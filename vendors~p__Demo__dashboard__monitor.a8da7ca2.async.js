(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{"+K+b":function(_e,dt,R){var V=R("JHRd");function E(T){var e=new T.constructor(T.byteLength);return new V(e).set(new V(T)),e}_e.exports=E},"+Qka":function(_e,dt,R){var V=R("fmRc"),E=R("t2Dn"),T=R("cq/+"),e=R("T1AV"),t=R("GoyQ"),u=R("mTTR"),s=R("itsj");function c(r,h,n,i,a){r!==h&&T(h,function(o,l){if(a||(a=new V),t(o))e(r,h,l,n,c,i,a);else{var f=i?i(s(r,l),o,l+"",r,h,a):void 0;f===void 0&&(f=o),E(r,l,f)}},u)}_e.exports=c},"+VLl":function(_e,dt,R){"use strict";R.d(dt,"a",function(){return o});var V=R("lSNA"),E=R.n(V),T=R("J4zp"),e=R.n(T),t=R("Hel2"),u=Math.PI/3,s=[0,u,2*u,3*u,4*u,5*u];function c(l){return l[0]}function r(l){return l[1]}var h=function(){var l=0,f=0,v=1,b=1,g=c,m=r,_,M,x;function y(P){var A={},O=[],L,H=P.length;for(L=0;L<H;++L)if(!(isNaN(K=+g.call(null,F=P[L],L,P))||isNaN(G=+m.call(null,F,L,P)))){var F,K,G,U=Math.round(G=G/x),Z=Math.round(K=K/M-(U&1)/2),J=G-U;if(Math.abs(J)*3>1){var rt=K-Z,vt=Z+(K<Z?-1:1)/2,mt=U+(G<U?-1:1),ut=K-vt,Rt=G-mt;rt*rt+J*J>ut*ut+Rt*Rt&&(Z=vt+(U&1?1:-1)/2,U=mt)}var Ft=Z+"-"+U,wt=A[Ft];wt?wt.push(F):(O.push(wt=A[Ft]=[F]),wt.x=(Z+(U&1)/2)*M,wt.y=U*x)}return O}function S(P){var A=0,O=0;return s.map(function(L){var H=Math.sin(L)*P,F=-Math.cos(L)*P,K=H-A,G=F-O;return A=H,O=F,[K,G]})}return y.hexagon=function(P){return"m"+S(P==null?_:+P).join("l")+"z"},y.centers=function(){for(var P=[],A=Math.round(f/x),O=Math.round(l/M),L=A*x;L<b+_;L+=x,++A)for(var H=O*M+(A&1)*M/2;H<v+M/2;H+=M)P.push([H,L]);return P},y.mesh=function(){var P=S(_).slice(0,4).join("l");return y.centers().map(function(A){return"M"+A+"m"+P}).join("")},y.x=function(P){return arguments.length?(g=P,y):g},y.y=function(P){return arguments.length?(m=P,y):m},y.radius=function(P){return arguments.length?(_=+P,M=_*2*Math.sin(u),x=_*1.5,y):_},y.size=function(P){return arguments.length?(l=f=0,v=+P[0],b=+P[1],y):[v-l,b-f]},y.extent=function(P){return arguments.length?(l=+P[0][0],f=+P[0][1],v=+P[1][0],b=+P[1][1],y):[[l,f],[v,b]]},y.radius(1)};function n(l,f){var v=Object.keys(l);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(l);f&&(b=b.filter(function(g){return Object.getOwnPropertyDescriptor(l,g).enumerable})),v.push.apply(v,b)}return v}function i(l){for(var f=1;f<arguments.length;f++){var v=arguments[f]!=null?arguments[f]:{};f%2?n(Object(v),!0).forEach(function(b){E()(l,b,v[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(v)):n(Object(v)).forEach(function(b){Object.defineProperty(l,b,Object.getOwnPropertyDescriptor(v,b))})}return l}var a=6378e3;function o(l,f){var v=l.dataArray,b=f.size,g=b===void 0?10:b,m=f.method,_=m===void 0?"sum":m,M=g/(2*Math.PI*a)*(256<<20)/2,x=v.map(function(A){var O=Object(t.d)(A.coordinates),L=e()(O,2),H=L[0],F=L[1];return i(i({},A),{},{coordinates:[H,F]})}),y=h().radius(M).x(function(A){return A.coordinates[0]}).y(function(A){return A.coordinates[1]}),S=y(x),P={dataArray:S.map(function(A,O){var L;if(f.field&&_){var H=t.c.getColumn(A,f.field);A[_]=t.c.statMap[_](H)}return L={},E()(L,f.method,A[_]),E()(L,"count",A.length),E()(L,"rawData",A),E()(L,"coordinates",[A.x,A.y]),E()(L,"_id",O),L}),radius:M,xOffset:M,yOffset:M,type:"hexagon"};return P}},"+em5":function(_e,dt,R){"use strict";R.d(dt,"a",function(){return K});var V=R("lSNA"),E=R.n(V),T=R("yG8O"),e=R.n(T),t=R("lwsE"),u=R.n(t),s=R("W8MJ"),c=R.n(s),r=R("U+yc"),h=R.n(r),n=R("1ABj"),i=R.n(n),a=R("gQMU"),o=R.n(a),l=R("J2iB"),f=R.n(l),v=R("u6S6"),b=R.n(v),g=R("4cb6"),m=R.n(g),_=R("h1nZ"),M=R("bB6j"),x=R("bPkA"),y,S,P,A,O;function L(G,U){var Z=Object.keys(G);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(G);U&&(J=J.filter(function(rt){return Object.getOwnPropertyDescriptor(G,rt).enumerable})),Z.push.apply(Z,J)}return Z}function H(G){for(var U=1;U<arguments.length;U++){var Z=arguments[U]!=null?arguments[U]:{};U%2?L(Object(Z),!0).forEach(function(J){E()(G,J,Z[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(Z)):L(Object(Z)).forEach(function(J){Object.defineProperty(G,J,Object.getOwnPropertyDescriptor(Z,J))})}return G}var F=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,K=(y=Object(g.injectable)(),S=Object(g.inject)(M.a.IShaderModuleService),y(P=(A=function(){function G(){u()(this,G),e()(this,"shaderModuleService",O,this),this.rendererService=void 0,this.config=void 0,this.quad=F,this.enabled=!0,this.renderToScreen=!1,this.model=void 0,this.name=void 0,this.optionsToUpdate={}}return c()(G,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(Z){this.name=Z}},{key:"getType",value:function(){return x.a.PostProcessing}},{key:"init",value:function(Z,J){this.config=J,this.rendererService=Z.getContainer().get(M.a.IRendererService);var rt=this.rendererService,vt=rt.createAttribute,mt=rt.createBuffer,ut=rt.createModel,Rt=this.setupShaders(),Ft=Rt.vs,wt=Rt.fs,Mt=Rt.uniforms;this.model=ut({vs:Ft,fs:wt,attributes:{a_Position:vt({buffer:mt({data:[-4,-4,4,-4,0,4],type:_.gl.FLOAT}),size:2})},uniforms:H(H({u_Texture:null},Mt),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(Z){var J=this,rt=Z.multiPassRenderer.getPostProcessor(),vt=this.rendererService,mt=vt.useFramebuffer,ut=vt.getViewportSize,Rt=vt.clear,Ft=ut(),wt=Ft.width,Mt=Ft.height;mt(this.renderToScreen?null:rt.getWriteFBO(),function(){Rt({framebuffer:rt.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0}),J.model.draw({uniforms:H({u_Texture:rt.getReadFBO(),u_ViewportSize:[wt,Mt]},J.convertOptionsToUniforms(J.optionsToUpdate))})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(Z){this.enabled=Z}},{key:"setRenderToScreen",value:function(Z){this.renderToScreen=Z}},{key:"updateOptions",value:function(Z){this.optionsToUpdate=H(H({},this.optionsToUpdate),Z)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(Z){var J={};return Object.keys(Z).forEach(function(rt){f()(Z[rt])||(J["u_".concat(o()(b()(rt)))]=Z[rt])}),J}}]),G}(),O=h()(A.prototype,"shaderModuleService",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A))||P)},"+iFO":function(_e,dt,R){var V=R("dTAl"),E=R("LcsW"),T=R("6sVZ");function e(t){return typeof t.constructor=="function"&&!T(t)?V(E(t)):{}}_e.exports=e},"/33/":function(_e,dt){},"/Uc5":function(_e,dt){},"/ezw":function(_e,dt,R){"use strict";var V=R("rePB"),E=R("wx14"),T=R("U8pU"),e=R("q1tI"),t=R("TSYQ"),u=R.n(t),s=function(G){var U=G.prefixCls,Z=G.className,J=G.width,rt=G.style;return e.createElement("h3",{className:u()(U,Z),style:Object(E.a)({width:J},rt)})},c=s,r=R("KQm4"),h=function(G){var U=function(Rt){var Ft=G.width,wt=G.rows,Mt=wt===void 0?2:wt;if(Array.isArray(Ft))return Ft[Rt];if(Mt-1===Rt)return Ft},Z=G.prefixCls,J=G.className,rt=G.style,vt=G.rows,mt=Object(r.a)(Array(vt)).map(function(ut,Rt){return e.createElement("li",{key:Rt,style:{width:U(Rt)}})});return e.createElement("ul",{className:u()(Z,J),style:rt},mt)},n=h,i=R("H84U"),a=function(G){var U,Z,J=G.prefixCls,rt=G.className,vt=G.style,mt=G.size,ut=G.shape,Rt=u()((U={},Object(V.a)(U,"".concat(J,"-lg"),mt==="large"),Object(V.a)(U,"".concat(J,"-sm"),mt==="small"),U)),Ft=u()((Z={},Object(V.a)(Z,"".concat(J,"-circle"),ut==="circle"),Object(V.a)(Z,"".concat(J,"-square"),ut==="square"),Object(V.a)(Z,"".concat(J,"-round"),ut==="round"),Z)),wt=typeof mt=="number"?{width:mt,height:mt,lineHeight:"".concat(mt,"px")}:{};return e.createElement("span",{className:u()(J,Rt,Ft,rt),style:Object(E.a)(Object(E.a)({},wt),vt)})},o=a,l=R("bT9E"),f=function(G){var U=function(J){var rt=J.getPrefixCls,vt=G.prefixCls,mt=G.className,ut=G.active,Rt=rt("skeleton",vt),Ft=Object(l.a)(G,["prefixCls"]),wt=u()(Rt,"".concat(Rt,"-element"),Object(V.a)({},"".concat(Rt,"-active"),ut),mt);return e.createElement("div",{className:wt},e.createElement(o,Object(E.a)({prefixCls:"".concat(Rt,"-avatar")},Ft)))};return e.createElement(i.a,null,U)};f.defaultProps={size:"default",shape:"circle"};var v=f,b=function(G){var U=function(J){var rt=J.getPrefixCls,vt=G.prefixCls,mt=G.className,ut=G.active,Rt=rt("skeleton",vt),Ft=Object(l.a)(G,["prefixCls"]),wt=u()(Rt,"".concat(Rt,"-element"),Object(V.a)({},"".concat(Rt,"-active"),ut),mt);return e.createElement("div",{className:wt},e.createElement(o,Object(E.a)({prefixCls:"".concat(Rt,"-button")},Ft)))};return e.createElement(i.a,null,U)};b.defaultProps={size:"default"};var g=b,m=function(G){var U=function(J){var rt=J.getPrefixCls,vt=G.prefixCls,mt=G.className,ut=G.active,Rt=rt("skeleton",vt),Ft=Object(l.a)(G,["prefixCls"]),wt=u()(Rt,"".concat(Rt,"-element"),Object(V.a)({},"".concat(Rt,"-active"),ut),mt);return e.createElement("div",{className:wt},e.createElement(o,Object(E.a)({prefixCls:"".concat(Rt,"-input")},Ft)))};return e.createElement(i.a,null,U)};m.defaultProps={size:"default"};var _=m,M="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",x=function(G){var U=function(J){var rt=J.getPrefixCls,vt=G.prefixCls,mt=G.className,ut=G.style,Rt=rt("skeleton",vt),Ft=u()(Rt,"".concat(Rt,"-element"),mt);return e.createElement("div",{className:Ft},e.createElement("div",{className:u()("".concat(Rt,"-image"),mt),style:ut},e.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(Rt,"-image-svg")},e.createElement("path",{d:M,className:"".concat(Rt,"-image-path")}))))};return e.createElement(i.a,null,U)},y=x;function S(K){return K&&Object(T.a)(K)==="object"?K:{}}function P(K,G){return K&&!G?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function A(K,G){return!K&&G?{width:"38%"}:K&&G?{width:"50%"}:{}}function O(K,G){var U={};return(!K||!G)&&(U.width="61%"),!K&&G?U.rows=3:U.rows=2,U}var L=function(G){var U=function(J){var rt=J.getPrefixCls,vt=J.direction,mt=G.prefixCls,ut=G.loading,Rt=G.className,Ft=G.children,wt=G.avatar,Mt=G.title,St=G.paragraph,At=G.active,nt=G.round,Pt=rt("skeleton",mt);if(ut||!("loading"in G)){var z,q=!!wt,gt=!!Mt,et=!!St,at;if(q){var xt=Object(E.a)(Object(E.a)({prefixCls:"".concat(Pt,"-avatar")},P(gt,et)),S(wt));at=e.createElement("div",{className:"".concat(Pt,"-header")},e.createElement(o,xt))}var k;if(gt||et){var ot;if(gt){var it=Object(E.a)(Object(E.a)({prefixCls:"".concat(Pt,"-title")},A(q,et)),S(Mt));ot=e.createElement(c,it)}var $;if(et){var _t=Object(E.a)(Object(E.a)({prefixCls:"".concat(Pt,"-paragraph")},O(q,gt)),S(St));$=e.createElement(n,_t)}k=e.createElement("div",{className:"".concat(Pt,"-content")},ot,$)}var yt=u()(Pt,(z={},Object(V.a)(z,"".concat(Pt,"-with-avatar"),q),Object(V.a)(z,"".concat(Pt,"-active"),At),Object(V.a)(z,"".concat(Pt,"-rtl"),vt==="rtl"),Object(V.a)(z,"".concat(Pt,"-round"),nt),z),Rt);return e.createElement("div",{className:yt},at,k)}return Ft};return e.createElement(i.a,null,U)};L.defaultProps={avatar:!1,title:!0,paragraph:!0},L.Button=g,L.Avatar=v,L.Input=_,L.Image=y;var H=L,F=dt.a=H},"/zsF":function(_e,dt,R){"use strict";var V=R("cIOH"),E=R.n(V),T=R("bE4E"),e=R.n(T)},"0JQy":function(_e,dt){var R="\\ud800-\\udfff",V="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=V+E+T,t="\\ufe0e\\ufe0f",u="["+R+"]",s="["+e+"]",c="\\ud83c[\\udffb-\\udfff]",r="(?:"+s+"|"+c+")",h="[^"+R+"]",n="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",a="\\u200d",o=r+"?",l="["+t+"]?",f="(?:"+a+"(?:"+[h,n,i].join("|")+")"+l+o+")*",v=l+o+f,b="(?:"+[h+s+"?",s,n,i,u].join("|")+")",g=RegExp(c+"(?="+c+")|"+b+v,"g");function m(_){return _.match(g)||[]}_e.exports=m},"0ZTe":function(_e,dt,R){var V=R("wy8a"),E=R("quyA"),T=R("Em2t"),e=R("dt0z");function t(u){return function(s){s=e(s);var c=E(s)?T(s):void 0,r=c?c[0]:s.charAt(0),h=c?V(c,1).join(""):s.slice(1);return r[u]()+h}}_e.exports=t},"0eqD":function(_e,dt){},"0gSV":function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.tagged=void 0;var V=R("GXnB"),E=R("Ztfv");function T(e,t){return function(u,s,c){var r=new V.Metadata(e,t);typeof c=="number"?E.tagParameter(u,s,c,r):E.tagProperty(u,s,r)}}dt.tagged=T},"0wsv":function(_e,dt,R){"use strict";R.d(dt,"b",function(){return t}),R.d(dt,"f",function(){return s}),R.d(dt,"e",function(){return n}),R.d(dt,"g",function(){return g}),R.d(dt,"a",function(){return y}),R.d(dt,"c",function(){return A}),R.d(dt,"d",function(){return O});var V=63710088e-1,E={centimeters:V*100,centimetres:V*100,degrees:V/111325,feet:V*3.28084,inches:V*39.37,kilometers:V/1e3,kilometres:V/1e3,meters:V,metres:V,miles:V/1609.344,millimeters:V*1e3,millimetres:V*1e3,nauticalmiles:V/1852,radians:1,yards:V/1.0936},T={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/V,yards:1/1.0936},e={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(F,K,G){G===void 0&&(G={});var U={type:"Feature"};return(G.id===0||G.id)&&(U.id=G.id),G.bbox&&(U.bbox=G.bbox),U.properties=K||{},U.geometry=F,U}function u(F,K,G){switch(G===void 0&&(G={}),F){case"Point":return s(K).geometry;case"LineString":return n(K).geometry;case"Polygon":return r(K).geometry;case"MultiPoint":return l(K).geometry;case"MultiLineString":return o(K).geometry;case"MultiPolygon":return f(K).geometry;default:throw new Error(F+" is invalid")}}function s(F,K,G){if(G===void 0&&(G={}),!F)throw new Error("coordinates is required");if(!Array.isArray(F))throw new Error("coordinates must be an Array");if(F.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A(F[0])||!A(F[1]))throw new Error("coordinates must contain numbers");var U={type:"Point",coordinates:F};return t(U,K,G)}function c(F,K,G){return G===void 0&&(G={}),a(F.map(function(U){return s(U,K)}),G)}function r(F,K,G){G===void 0&&(G={});for(var U=0,Z=F;U<Z.length;U++){var J=Z[U];if(J.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var rt=0;rt<J[J.length-1].length;rt++)if(J[J.length-1][rt]!==J[0][rt])throw new Error("First and last Position are not equivalent.")}var vt={type:"Polygon",coordinates:F};return t(vt,K,G)}function h(F,K,G){return G===void 0&&(G={}),a(F.map(function(U){return r(U,K)}),G)}function n(F,K,G){if(G===void 0&&(G={}),F.length<2)throw new Error("coordinates must be an array of two or more positions");var U={type:"LineString",coordinates:F};return t(U,K,G)}function i(F,K,G){return G===void 0&&(G={}),a(F.map(function(U){return n(U,K)}),G)}function a(F,K){K===void 0&&(K={});var G={type:"FeatureCollection"};return K.id&&(G.id=K.id),K.bbox&&(G.bbox=K.bbox),G.features=F,G}function o(F,K,G){G===void 0&&(G={});var U={type:"MultiLineString",coordinates:F};return t(U,K,G)}function l(F,K,G){G===void 0&&(G={});var U={type:"MultiPoint",coordinates:F};return t(U,K,G)}function f(F,K,G){G===void 0&&(G={});var U={type:"MultiPolygon",coordinates:F};return t(U,K,G)}function v(F,K,G){G===void 0&&(G={});var U={type:"GeometryCollection",geometries:F};return t(U,K,G)}function b(F,K){if(K===void 0&&(K=0),K&&!(K>=0))throw new Error("precision must be a positive number");var G=Math.pow(10,K||0);return Math.round(F*G)/G}function g(F,K){K===void 0&&(K="kilometers");var G=E[K];if(!G)throw new Error(K+" units is invalid");return F*G}function m(F,K){K===void 0&&(K="kilometers");var G=E[K];if(!G)throw new Error(K+" units is invalid");return F/G}function _(F,K){return x(m(F,K))}function M(F){var K=F%360;return K<0&&(K+=360),K}function x(F){var K=F%(2*Math.PI);return K*180/Math.PI}function y(F){var K=F%360;return K*Math.PI/180}function S(F,K,G){if(K===void 0&&(K="kilometers"),G===void 0&&(G="kilometers"),!(F>=0))throw new Error("length must be a positive number");return g(m(F,K),G)}function P(F,K,G){if(K===void 0&&(K="meters"),G===void 0&&(G="kilometers"),!(F>=0))throw new Error("area must be a positive number");var U=e[K];if(!U)throw new Error("invalid original units");var Z=e[G];if(!Z)throw new Error("invalid final units");return F/U*Z}function A(F){return!isNaN(F)&&F!==null&&!Array.isArray(F)}function O(F){return!!F&&F.constructor===Object}function L(F){if(!F)throw new Error("bbox is required");if(!Array.isArray(F))throw new Error("bbox must be an Array");if(F.length!==4&&F.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");F.forEach(function(K){if(!A(K))throw new Error("bbox must only contain numbers")})}function H(F){if(!F)throw new Error("id is required");if(["string","number"].indexOf(typeof F)===-1)throw new Error("id must be a number or a string")}},"1+5i":function(_e,dt,R){var V=R("w/wX"),E=R("sEf8"),T=R("mdPL"),e=T&&T.isSet,t=e?E(e):V;_e.exports=t},"14J3":function(_e,dt,R){"use strict";var V=R("cIOH"),E=R.n(V),T=R("1GLa")},"1ABj":function(_e,dt){function R(V,E){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}_e.exports=R,_e.exports.default=_e.exports,_e.exports.__esModule=!0},"1gqn":function(_e,dt){_e.exports=function(V){return V&&typeof V=="object"&&typeof V.copy=="function"&&typeof V.fill=="function"&&typeof V.readUInt8=="function"}},"1jvM":function(_e,dt){},"2ajD":function(_e,dt){function R(V){return V!==V}_e.exports=R},"3DfO":function(_e,dt){function R(V){return V==null}_e.exports=R},"3L66":function(_e,dt,R){var V=R("MMmD"),E=R("ExA7");function T(e){return E(e)&&V(e)}_e.exports=T},"3cYt":function(_e,dt){function R(V){return function(E){return V==null?void 0:V[E]}}_e.exports=R},"406g":function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.BindingOnSyntax=void 0;var V=R("z4Hk"),E=function(){function T(e){this._binding=e}return T.prototype.onActivation=function(e){return this._binding.onActivation=e,new V.BindingWhenSyntax(this._binding)},T}();dt.BindingOnSyntax=E},"4U9+":function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.default=function(l){return(0,E.default)((0,c.default)(l)&&l.length>=1,"Must merge at least 1 JSON schema."),e.default.apply(void 0,[{}].concat(o(l),[function(f,v,b){if(!(0,u.default)(f)){if(b==="required")return(0,h.default)(f.concat(v));if((0,i.default)(f)){if(!(0,i.default)(v))throw new Error('Failed to merge schemas because "'+b+'" has different values.');return}E.default.deepEqual(f,v,'Failed to merge schemas because "'+b+'" has different values: '+JSON.stringify(f)+" and "+JSON.stringify(v)+".")}}]))};var V=R("9lTW"),E=a(V),T=R("qd8s"),e=a(T),t=R("3DfO"),u=a(t),s=R("WFAs"),c=a(s),r=R("w26f"),h=a(r),n=R("zZPE"),i=a(n);function a(l){return l&&l.__esModule?l:{default:l}}function o(l){if(Array.isArray(l)){for(var f=0,v=Array(l.length);f<l.length;f++)v[f]=l[f];return v}else return Array.from(l)}_e.exports=dt.default},"4ZJM":function(_e,dt,R){(function(V,E){_e.exports=E()})(this,function(){"use strict";var V,E,T;function e(t,u){if(!V)V=u;else if(!E)E=u;else{var s="var sharedChunk = {}; ("+V+")(sharedChunk); ("+E+")(sharedChunk);",c={};V(c),T=u(c),typeof window!="undefined"&&(T.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}}return e(["exports"],function(t){"use strict";function u(d,p){return d(p={exports:{}},p.exports),p.exports}var s=c;function c(d,p,C,N){this.cx=3*d,this.bx=3*(C-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(N-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=N,this.p2x=C,this.p2y=N}c.prototype.sampleCurveX=function(d){return((this.ax*d+this.bx)*d+this.cx)*d},c.prototype.sampleCurveY=function(d){return((this.ay*d+this.by)*d+this.cy)*d},c.prototype.sampleCurveDerivativeX=function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},c.prototype.solveCurveX=function(d,p){var C,N,Q,ct,Tt;for(p===void 0&&(p=1e-6),Q=d,Tt=0;Tt<8;Tt++){if(ct=this.sampleCurveX(Q)-d,Math.abs(ct)<p)return Q;var Bt=this.sampleCurveDerivativeX(Q);if(Math.abs(Bt)<1e-6)break;Q-=ct/Bt}if((Q=d)<(C=0))return C;if(Q>(N=1))return N;for(;C<N;){if(ct=this.sampleCurveX(Q),Math.abs(ct-d)<p)return Q;d>ct?C=Q:N=Q,Q=.5*(N-C)+C}return Q},c.prototype.solve=function(d,p){return this.sampleCurveY(this.solveCurveX(d,p))};var r=h;function h(d,p){this.x=d,this.y=p}h.prototype={clone:function(){return new h(this.x,this.y)},add:function(p){return this.clone()._add(p)},sub:function(p){return this.clone()._sub(p)},multByPoint:function(p){return this.clone()._multByPoint(p)},divByPoint:function(p){return this.clone()._divByPoint(p)},mult:function(p){return this.clone()._mult(p)},div:function(p){return this.clone()._div(p)},rotate:function(p){return this.clone()._rotate(p)},rotateAround:function(p,C){return this.clone()._rotateAround(p,C)},matMult:function(p){return this.clone()._matMult(p)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(p){return this.x===p.x&&this.y===p.y},dist:function(p){return Math.sqrt(this.distSqr(p))},distSqr:function(p){var C=p.x-this.x,N=p.y-this.y;return C*C+N*N},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(p){return Math.atan2(this.y-p.y,this.x-p.x)},angleWith:function(p){return this.angleWithSep(p.x,p.y)},angleWithSep:function(p,C){return Math.atan2(this.x*C-this.y*p,this.x*p+this.y*C)},_matMult:function(p){var C=p[2]*this.x+p[3]*this.y;return this.x=p[0]*this.x+p[1]*this.y,this.y=C,this},_add:function(p){return this.x+=p.x,this.y+=p.y,this},_sub:function(p){return this.x-=p.x,this.y-=p.y,this},_mult:function(p){return this.x*=p,this.y*=p,this},_div:function(p){return this.x/=p,this.y/=p,this},_multByPoint:function(p){return this.x*=p.x,this.y*=p.y,this},_divByPoint:function(p){return this.x/=p.x,this.y/=p.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var p=this.y;return this.y=this.x,this.x=-p,this},_rotate:function(p){var C=Math.cos(p),N=Math.sin(p),Q=N*this.x+C*this.y;return this.x=C*this.x-N*this.y,this.y=Q,this},_rotateAround:function(p,C){var N=Math.cos(p),Q=Math.sin(p),ct=C.y+Q*(this.x-C.x)+N*(this.y-C.y);return this.x=C.x+N*(this.x-C.x)-Q*(this.y-C.y),this.y=ct,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(d){return d instanceof h?d:Array.isArray(d)?new h(d[0],d[1]):d};var n=typeof self!="undefined"?self:{},i=Math.pow(2,53)-1;function a(d,p,C,N){var Q=new s(d,p,C,N);return function(ct){return Q.solve(ct)}}var o=a(.25,.1,.25,1);function l(d,p,C){return Math.min(C,Math.max(p,d))}function f(d,p,C){var N=C-p,Q=((d-p)%N+N)%N+p;return Q===p?C:Q}function v(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];for(var N=0,Q=p;N<Q.length;N+=1){var ct=Q[N];for(var Tt in ct)d[Tt]=ct[Tt]}return d}var b=1;function g(){return b++}function m(){return function d(p){return p?(p^16*Math.random()>>p/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,d)}()}function _(d){return!!d&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(d)}function M(d,p){d.forEach(function(C){p[C]&&(p[C]=p[C].bind(p))})}function x(d,p){return d.indexOf(p,d.length-p.length)!==-1}function y(d,p,C){var N={};for(var Q in d)N[Q]=p.call(C||this,d[Q],Q,d);return N}function S(d,p,C){var N={};for(var Q in d)p.call(C||this,d[Q],Q,d)&&(N[Q]=d[Q]);return N}function P(d){return Array.isArray(d)?d.map(P):typeof d=="object"&&d?y(d,P):d}var A={};function O(d){A[d]||(typeof console!="undefined"&&console.warn(d),A[d]=!0)}function L(d,p,C){return(C.y-d.y)*(p.x-d.x)>(p.y-d.y)*(C.x-d.x)}function H(d){for(var p=0,C=0,N=d.length,Q=N-1,ct=void 0,Tt=void 0;C<N;Q=C++)p+=((Tt=d[Q]).x-(ct=d[C]).x)*(ct.y+Tt.y);return p}function F(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function K(d){var p={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(N,Q,ct,Tt){var Bt=ct||Tt;return p[Q]=!Bt||Bt.toLowerCase(),""}),p["max-age"]){var C=parseInt(p["max-age"],10);isNaN(C)?delete p["max-age"]:p["max-age"]=C}return p}var G=null;function U(d){if(G==null){var p=d.navigator?d.navigator.userAgent:null;G=!!d.safari||!(!p||!(/\b(iPad|iPhone|iPod)\b/.test(p)||p.match("Safari")&&!p.match("Chrome")))}return G}function Z(d){try{var p=n[d];return p.setItem("_mapbox_test_",1),p.removeItem("_mapbox_test_"),!0}catch(C){return!1}}var J,rt,vt,mt,ut=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now.bind(Date),Rt=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,Ft=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.msCancelAnimationFrame,wt={now:ut,frame:function(p){var C=Rt(p);return{cancel:function(){return Ft(C)}}},getImageData:function(p,C){C===void 0&&(C=0);var N=n.document.createElement("canvas"),Q=N.getContext("2d");if(!Q)throw new Error("failed to create canvas 2d context");return N.width=p.width,N.height=p.height,Q.drawImage(p,0,0,p.width,p.height),Q.getImageData(-C,-C,p.width+2*C,p.height+2*C)},resolveURL:function(p){return J||(J=n.document.createElement("a")),J.href=p,J.href},hardwareConcurrency:n.navigator&&n.navigator.hardwareConcurrency||4,get devicePixelRatio(){return n.devicePixelRatio},get prefersReducedMotion(){return!!n.matchMedia&&(rt==null&&(rt=n.matchMedia("(prefers-reduced-motion: reduce)")),rt.matches)}},Mt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},St={supported:!1,testSupport:function(p){!At&&mt&&(nt?Pt(p):vt=p)}},At=!1,nt=!1;function Pt(d){var p=d.createTexture();d.bindTexture(d.TEXTURE_2D,p);try{if(d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,mt),d.isContextLost())return;St.supported=!0}catch(C){}d.deleteTexture(p),At=!0}n.document&&((mt=n.document.createElement("img")).onload=function(){vt&&Pt(vt),vt=null,nt=!0},mt.onerror=function(){At=!0,vt=null},mt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var z="01",q=function(p,C){this._transformRequestFn=p,this._customAccessToken=C,this._createSkuToken()};function gt(d){return d.indexOf("mapbox:")===0}q.prototype._createSkuToken=function(){var d=function(){for(var p="",C=0;C<10;C++)p+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",z,p].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=d.token,this._skuTokenExpiresAt=d.tokenExpiresAt},q.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},q.prototype.transformRequest=function(d,p){return this._transformRequestFn&&this._transformRequestFn(d,p)||{url:d}},q.prototype.normalizeStyleURL=function(d,p){if(!gt(d))return d;var C=k(d);return C.path="/styles/v1"+C.path,this._makeAPIURL(C,this._customAccessToken||p)},q.prototype.normalizeGlyphsURL=function(d,p){if(!gt(d))return d;var C=k(d);return C.path="/fonts/v1"+C.path,this._makeAPIURL(C,this._customAccessToken||p)},q.prototype.normalizeSourceURL=function(d,p){if(!gt(d))return d;var C=k(d);return C.path="/v4/"+C.authority+".json",C.params.push("secure"),this._makeAPIURL(C,this._customAccessToken||p)},q.prototype.normalizeSpriteURL=function(d,p,C,N){var Q=k(d);return gt(d)?(Q.path="/styles/v1"+Q.path+"/sprite"+p+C,this._makeAPIURL(Q,this._customAccessToken||N)):(Q.path+=""+p+C,ot(Q))},q.prototype.normalizeTileURL=function(d,p){if(this._isSkuTokenExpired()&&this._createSkuToken(),d&&!gt(d))return d;var C=k(d);C.path=C.path.replace(/(\.(png|jpg)\d*)(?=$)/,(wt.devicePixelRatio>=2||p===512?"@2x":"")+(St.supported?".webp":"$1")),C.path=C.path.replace(/^.+\/v4\//,"/"),C.path="/v4"+C.path;var N=this._customAccessToken||function(Q){for(var ct=0,Tt=Q;ct<Tt.length;ct+=1){var Bt=Tt[ct].match(/^access_token=(.*)$/);if(Bt)return Bt[1]}return null}(C.params)||Mt.ACCESS_TOKEN;return Mt.REQUIRE_ACCESS_TOKEN&&N&&this._skuToken&&C.params.push("sku="+this._skuToken),this._makeAPIURL(C,N)},q.prototype.canonicalizeTileURL=function(d,p){var C=k(d);if(!C.path.match(/(^\/v4\/)/)||!C.path.match(/\.[\w]+$/))return d;var N="mapbox://tiles/";N+=C.path.replace("/v4/","");var Q=C.params;return p&&(Q=Q.filter(function(ct){return!ct.match(/^access_token=/)})),Q.length&&(N+="?"+Q.join("&")),N},q.prototype.canonicalizeTileset=function(d,p){for(var C=!!p&&gt(p),N=[],Q=0,ct=d.tiles||[];Q<ct.length;Q+=1){var Tt=ct[Q];at(Tt)?N.push(this.canonicalizeTileURL(Tt,C)):N.push(Tt)}return N},q.prototype._makeAPIURL=function(d,p){var C="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",N=k(Mt.API_URL);if(d.protocol=N.protocol,d.authority=N.authority,d.protocol==="http"){var Q=d.params.indexOf("secure");Q>=0&&d.params.splice(Q,1)}if(N.path!=="/"&&(d.path=""+N.path+d.path),!Mt.REQUIRE_ACCESS_TOKEN)return ot(d);if(!(p=p||Mt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+C);if(p[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+C);return d.params=d.params.filter(function(ct){return ct.indexOf("access_token")===-1}),d.params.push("access_token="+p),ot(d)};var et=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function at(d){return et.test(d)}var xt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function k(d){var p=d.match(xt);if(!p)throw new Error("Unable to parse URL object");return{protocol:p[1],authority:p[2],path:p[3]||"/",params:p[4]?p[4].split("&"):[]}}function ot(d){var p=d.params.length?"?"+d.params.join("&"):"";return d.protocol+"://"+d.authority+d.path+p}function it(d){if(!d)return null;var p=d.split(".");if(!p||p.length!==3)return null;try{return JSON.parse(decodeURIComponent(n.atob(p[1]).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(C){return null}}var $=function(p){this.type=p,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};$.prototype.getStorageKey=function(d){var p,C=it(Mt.ACCESS_TOKEN);return p=C&&C.u?n.btoa(encodeURIComponent(C.u).replace(/%([0-9A-F]{2})/g,function(N,Q){return String.fromCharCode(Number("0x"+Q))})):Mt.ACCESS_TOKEN||"",d?"mapbox.eventData."+d+":"+p:"mapbox.eventData:"+p},$.prototype.fetchEventData=function(){var d=Z("localStorage"),p=this.getStorageKey(),C=this.getStorageKey("uuid");if(d)try{var N=n.localStorage.getItem(p);N&&(this.eventData=JSON.parse(N));var Q=n.localStorage.getItem(C);Q&&(this.anonId=Q)}catch(ct){O("Unable to read from LocalStorage")}},$.prototype.saveEventData=function(){var d=Z("localStorage"),p=this.getStorageKey(),C=this.getStorageKey("uuid");if(d)try{n.localStorage.setItem(C,this.anonId),Object.keys(this.eventData).length>=1&&n.localStorage.setItem(p,JSON.stringify(this.eventData))}catch(N){O("Unable to write to LocalStorage")}},$.prototype.processRequests=function(d){},$.prototype.postEvent=function(d,p,C,N){var Q=this;if(Mt.EVENTS_URL){var ct=k(Mt.EVENTS_URL);ct.params.push("access_token="+(N||Mt.ACCESS_TOKEN||""));var Tt={event:this.type,created:new Date(d).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.1",skuId:z,userId:this.anonId},Bt=p?v(Tt,p):Tt,Jt={url:ot(ct),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Bt])};this.pendingRequest=hi(Jt,function(ve){Q.pendingRequest=null,C(ve),Q.saveEventData(),Q.processRequests(N)})}},$.prototype.queueRequest=function(d,p){this.queue.push(d),this.processRequests(p)};var _t,yt,Nt=function(d){function p(){d.call(this,"map.load"),this.success={},this.skuToken=""}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.postMapLoadEvent=function(C,N,Q,ct){this.skuToken=Q,(Mt.EVENTS_URL&&ct||Mt.ACCESS_TOKEN&&Array.isArray(C)&&C.some(function(Tt){return gt(Tt)||at(Tt)}))&&this.queueRequest({id:N,timestamp:Date.now()},ct)},p.prototype.processRequests=function(C){var N=this;if(!this.pendingRequest&&this.queue.length!==0){var Q=this.queue.shift(),ct=Q.id,Tt=Q.timestamp;ct&&this.success[ct]||(this.anonId||this.fetchEventData(),_(this.anonId)||(this.anonId=m()),this.postEvent(Tt,{skuToken:this.skuToken},function(Bt){Bt||ct&&(N.success[ct]=!0)},C))}},p}($),$t=new(function(d){function p(C){d.call(this,"appUserTurnstile"),this._customAccessToken=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.postTurnstileEvent=function(C,N){Mt.EVENTS_URL&&Mt.ACCESS_TOKEN&&Array.isArray(C)&&C.some(function(Q){return gt(Q)||at(Q)})&&this.queueRequest(Date.now(),N)},p.prototype.processRequests=function(C){var N=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Q=it(Mt.ACCESS_TOKEN),ct=Q?Q.u:Mt.ACCESS_TOKEN,Tt=ct!==this.eventData.tokenU;_(this.anonId)||(this.anonId=m(),Tt=!0);var Bt=this.queue.shift();if(this.eventData.lastSuccess){var Jt=new Date(this.eventData.lastSuccess),ve=new Date(Bt),Re=(Bt-this.eventData.lastSuccess)/864e5;Tt=Tt||Re>=1||Re<-1||Jt.getDate()!==ve.getDate()}else Tt=!0;if(!Tt)return this.processRequests();this.postEvent(Bt,{"enabled.telemetry":!1},function(Ge){Ge||(N.eventData.lastSuccess=Bt,N.eventData.tokenU=ct)},C)}},p}($)),ee=$t.postTurnstileEvent.bind($t),Gt=new Nt,Ht=Gt.postMapLoadEvent.bind(Gt),ae=500,le=50;function Be(){n.caches&&!_t&&(_t=n.caches.open("mapbox-tiles"))}function Ce(d){var p=d.indexOf("?");return p<0?d:d.slice(0,p)}var We,Ye=1/0;function wn(){return We==null&&(We=n.OffscreenCanvas&&new n.OffscreenCanvas(1,1).getContext("2d")&&typeof n.createImageBitmap=="function"),We}var er={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(er);var Lr=function(d){function p(C,N,Q){N===401&&at(Q)&&(C+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),d.call(this,C),this.status=N,this.url=Q,this.name=this.constructor.name,this.message=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},p}(Error),on=F()?function(){return self.worker&&self.worker.referrer}:function(){return(n.location.protocol==="blob:"?n.parent:n).location.href},en,An,Bn=function(p,C){if(!(/^file:/.test(N=p.url)||/^file:/.test(on())&&!/^\w+:/.test(N))){if(n.fetch&&n.Request&&n.AbortController&&n.Request.prototype.hasOwnProperty("signal"))return function(Q,ct){var Tt,Bt=new n.AbortController,Jt=new n.Request(Q.url,{method:Q.method||"GET",body:Q.body,credentials:Q.credentials,headers:Q.headers,referrer:on(),signal:Bt.signal}),ve=!1,Re=!1,Ge=(Tt=Jt.url).indexOf("sku=")>0&&at(Tt);Q.type==="json"&&Jt.headers.set("Accept","application/json");var He=function(Cn,Kn,Yn){if(!Re){if(Cn&&Cn.message!=="SecurityError"&&O(Cn),Kn&&Yn)return ln(Kn);var _r=Date.now();n.fetch(Jt).then(function(Nr){if(Nr.ok){var Yr=Ge?Nr.clone():null;return ln(Nr,Yr,_r)}return ct(new Lr(Nr.statusText,Nr.status,Q.url))}).catch(function(Nr){Nr.code!==20&&ct(new Error(Nr.message))})}},ln=function(Cn,Kn,Yn){(Q.type==="arrayBuffer"?Cn.arrayBuffer():Q.type==="json"?Cn.json():Cn.text()).then(function(_r){Re||(Kn&&Yn&&function(Nr,Yr,vi){if(Be(),_t){var si={status:Yr.status,statusText:Yr.statusText,headers:new n.Headers};Yr.headers.forEach(function(Fi,ia){return si.headers.set(ia,Fi)});var Ni=K(Yr.headers.get("Cache-Control")||"");Ni["no-store"]||(Ni["max-age"]&&si.headers.set("Expires",new Date(vi+1e3*Ni["max-age"]).toUTCString()),new Date(si.headers.get("Expires")).getTime()-vi<42e4||function(Fi,ia){if(yt===void 0)try{new Response(new ReadableStream),yt=!0}catch(pa){yt=!1}yt?ia(Fi.body):Fi.blob().then(ia)}(Yr,function(Fi){var ia=new n.Response(Fi,si);Be(),_t&&_t.then(function(pa){return pa.put(Ce(Nr.url),ia)}).catch(function(pa){return O(pa.message)})}))}}(Jt,Kn,Yn),ve=!0,ct(null,_r,Cn.headers.get("Cache-Control"),Cn.headers.get("Expires")))}).catch(function(_r){Re||ct(new Error(_r.message))})};return Ge?function(Ln,Cn){if(Be(),!_t)return Cn(null);var Kn=Ce(Ln.url);_t.then(function(Yn){Yn.match(Kn).then(function(_r){var Nr=function(Yr){if(!Yr)return!1;var vi=new Date(Yr.headers.get("Expires")||0),si=K(Yr.headers.get("Cache-Control")||"");return vi>Date.now()&&!si["no-cache"]}(_r);Yn.delete(Kn),Nr&&Yn.put(Kn,_r.clone()),Cn(null,_r,Nr)}).catch(Cn)}).catch(Cn)}(Jt,He):He(null,null),{cancel:function(){Re=!0,ve||Bt.abort()}}}(p,C);if(F()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",p,C,void 0,!0)}var N;return function(Q,ct){var Tt=new n.XMLHttpRequest;for(var Bt in Tt.open(Q.method||"GET",Q.url,!0),Q.type==="arrayBuffer"&&(Tt.responseType="arraybuffer"),Q.headers)Tt.setRequestHeader(Bt,Q.headers[Bt]);return Q.type==="json"&&(Tt.responseType="text",Tt.setRequestHeader("Accept","application/json")),Tt.withCredentials=Q.credentials==="include",Tt.onerror=function(){ct(new Error(Tt.statusText))},Tt.onload=function(){if((Tt.status>=200&&Tt.status<300||Tt.status===0)&&Tt.response!==null){var Jt=Tt.response;if(Q.type==="json")try{Jt=JSON.parse(Tt.response)}catch(ve){return ct(ve)}ct(null,Jt,Tt.getResponseHeader("Cache-Control"),Tt.getResponseHeader("Expires"))}else ct(new Lr(Tt.statusText,Tt.status,Q.url))},Tt.send(Q.body),{cancel:function(){return Tt.abort()}}}(p,C)},gr=function(p,C){return Bn(v(p,{type:"arrayBuffer"}),C)},hi=function(p,C){return Bn(v(p,{method:"POST"}),C)},Ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";en=[],An=0;var Me=function d(p,C){if(St.supported&&(p.headers||(p.headers={}),p.headers.accept="image/webp,*/*"),An>=Mt.MAX_PARALLEL_IMAGE_REQUESTS){var N={requestParameters:p,callback:C,cancelled:!1,cancel:function(){this.cancelled=!0}};return en.push(N),N}An++;var Q=!1,ct=function(){if(!Q)for(Q=!0,An--;en.length&&An<Mt.MAX_PARALLEL_IMAGE_REQUESTS;){var Jt=en.shift();Jt.cancelled||(Jt.cancel=d(Jt.requestParameters,Jt.callback).cancel)}},Tt=gr(p,function(Bt,Jt,ve,Re){ct(),Bt?C(Bt):Jt&&(wn()?function(Ge,He){var ln=new n.Blob([new Uint8Array(Ge)],{type:"image/png"});n.createImageBitmap(ln).then(function(Ln){He(null,Ln)}).catch(function(Ln){He(new Error("Could not load image because of "+Ln.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Jt,C):function(Ge,He,ln,Ln){var Cn=new n.Image,Kn=n.URL;Cn.onload=function(){He(null,Cn),Kn.revokeObjectURL(Cn.src),Cn.onload=null,n.requestAnimationFrame(function(){Cn.src=Ae})},Cn.onerror=function(){return He(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Yn=new n.Blob([new Uint8Array(Ge)],{type:"image/png"});Cn.cacheControl=ln,Cn.expires=Ln,Cn.src=Ge.byteLength?Kn.createObjectURL(Yn):Ae}(Jt,C,ve,Re))});return{cancel:function(){Tt.cancel(),ct()}}};function Qt(d,p,C){C[d]&&C[d].indexOf(p)!==-1||(C[d]=C[d]||[],C[d].push(p))}function ge(d,p,C){if(C&&C[d]){var N=C[d].indexOf(p);N!==-1&&C[d].splice(N,1)}}var Wt=function(p,C){C===void 0&&(C={}),v(this,C),this.type=p},re=function(d){function p(C,N){N===void 0&&(N={}),d.call(this,"error",v({error:C},N))}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(Wt),Te=function(){};Te.prototype.on=function(d,p){return this._listeners=this._listeners||{},Qt(d,p,this._listeners),this},Te.prototype.off=function(d,p){return ge(d,p,this._listeners),ge(d,p,this._oneTimeListeners),this},Te.prototype.once=function(d,p){return this._oneTimeListeners=this._oneTimeListeners||{},Qt(d,p,this._oneTimeListeners),this},Te.prototype.fire=function(d,p){typeof d=="string"&&(d=new Wt(d,p||{}));var C=d.type;if(this.listens(C)){d.target=this;for(var N=0,Q=this._listeners&&this._listeners[C]?this._listeners[C].slice():[];N<Q.length;N+=1)Q[N].call(this,d);for(var ct=0,Tt=this._oneTimeListeners&&this._oneTimeListeners[C]?this._oneTimeListeners[C].slice():[];ct<Tt.length;ct+=1){var Bt=Tt[ct];ge(C,Bt,this._oneTimeListeners),Bt.call(this,d)}var Jt=this._eventedParent;Jt&&(v(d,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Jt.fire(d))}else d instanceof re&&console.error(d.error);return this},Te.prototype.listens=function(d){return this._listeners&&this._listeners[d]&&this._listeners[d].length>0||this._oneTimeListeners&&this._oneTimeListeners[d]&&this._oneTimeListeners[d].length>0||this._eventedParent&&this._eventedParent.listens(d)},Te.prototype.setEventedParent=function(d,p){return this._eventedParent=d,this._eventedParentData=p,this};var ue={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},be=function(p,C,N,Q){this.message=(p?p+": ":"")+N,Q&&(this.identifier=Q),C!=null&&C.__line__&&(this.line=C.__line__)};function Xe(d){var p=d.value;return p?[new be(d.key,p,"constants have been deprecated as of v8")]:[]}function Rn(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];for(var N=0,Q=p;N<Q.length;N+=1){var ct=Q[N];for(var Tt in ct)d[Tt]=ct[Tt]}return d}function tr(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function Mn(d){if(Array.isArray(d))return d.map(Mn);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){var p={};for(var C in d)p[C]=Mn(d[C]);return p}return tr(d)}var vn=function(d){function p(C,N){d.call(this,N),this.message=N,this.key=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(Error),Ar=function(p,C){C===void 0&&(C=[]),this.parent=p,this.bindings={};for(var N=0,Q=C;N<Q.length;N+=1){var ct=Q[N];this.bindings[ct[0]]=ct[1]}};Ar.prototype.concat=function(d){return new Ar(this,d)},Ar.prototype.get=function(d){if(this.bindings[d])return this.bindings[d];if(this.parent)return this.parent.get(d);throw new Error(d+" not found in scope.")},Ar.prototype.has=function(d){return!!this.bindings[d]||!!this.parent&&this.parent.has(d)};var or={kind:"null"},cn={kind:"number"},Pr={kind:"string"},Sr={kind:"boolean"},De={kind:"color"},$e={kind:"object"},Ve={kind:"value"},En={kind:"collator"},xn={kind:"formatted"},Nn={kind:"resolvedImage"};function mn(d,p){return{kind:"array",itemType:d,N:p}}function Dn(d){if(d.kind==="array"){var p=Dn(d.itemType);return typeof d.N=="number"?"array<"+p+", "+d.N+">":d.itemType.kind==="value"?"array":"array<"+p+">"}return d.kind}var $n=[or,cn,Pr,Sr,De,xn,$e,mn(Ve),Nn];function Wn(d,p){if(p.kind==="error")return null;if(d.kind==="array"){if(p.kind==="array"&&(p.N===0&&p.itemType.kind==="value"||!Wn(d.itemType,p.itemType))&&(typeof d.N!="number"||d.N===p.N))return null}else{if(d.kind===p.kind)return null;if(d.kind==="value"){for(var C=0,N=$n;C<N.length;C+=1)if(!Wn(N[C],p))return null}}return"Expected "+Dn(d)+" but found "+Dn(p)+" instead."}function _n(d,p){return p.some(function(C){return C.kind===d.kind})}function xr(d,p){return p.some(function(C){return C==="null"?d===null:C==="array"?Array.isArray(d):C==="object"?d&&!Array.isArray(d)&&typeof d=="object":C===typeof d})}var mr=u(function(d,p){var C={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function N(Bt){return(Bt=Math.round(Bt))<0?0:Bt>255?255:Bt}function Q(Bt){return N(Bt[Bt.length-1]==="%"?parseFloat(Bt)/100*255:parseInt(Bt))}function ct(Bt){return(Jt=Bt[Bt.length-1]==="%"?parseFloat(Bt)/100:parseFloat(Bt))<0?0:Jt>1?1:Jt;var Jt}function Tt(Bt,Jt,ve){return ve<0?ve+=1:ve>1&&(ve-=1),6*ve<1?Bt+(Jt-Bt)*ve*6:2*ve<1?Jt:3*ve<2?Bt+(Jt-Bt)*(2/3-ve)*6:Bt}try{p.parseCSSColor=function(Bt){var Jt,ve=Bt.replace(/ /g,"").toLowerCase();if(ve in C)return C[ve].slice();if(ve[0]==="#")return ve.length===4?(Jt=parseInt(ve.substr(1),16))>=0&&Jt<=4095?[(3840&Jt)>>4|(3840&Jt)>>8,240&Jt|(240&Jt)>>4,15&Jt|(15&Jt)<<4,1]:null:ve.length===7&&(Jt=parseInt(ve.substr(1),16))>=0&&Jt<=16777215?[(16711680&Jt)>>16,(65280&Jt)>>8,255&Jt,1]:null;var Re=ve.indexOf("("),Ge=ve.indexOf(")");if(Re!==-1&&Ge+1===ve.length){var He=ve.substr(0,Re),ln=ve.substr(Re+1,Ge-(Re+1)).split(","),Ln=1;switch(He){case"rgba":if(ln.length!==4)return null;Ln=ct(ln.pop());case"rgb":return ln.length!==3?null:[Q(ln[0]),Q(ln[1]),Q(ln[2]),Ln];case"hsla":if(ln.length!==4)return null;Ln=ct(ln.pop());case"hsl":if(ln.length!==3)return null;var Cn=(parseFloat(ln[0])%360+360)%360/360,Kn=ct(ln[1]),Yn=ct(ln[2]),_r=Yn<=.5?Yn*(Kn+1):Yn+Kn-Yn*Kn,Nr=2*Yn-_r;return[N(255*Tt(Nr,_r,Cn+1/3)),N(255*Tt(Nr,_r,Cn)),N(255*Tt(Nr,_r,Cn-1/3)),Ln];default:return null}}return null}}catch(Bt){}}).parseCSSColor,Fr=function(p,C,N,Q){Q===void 0&&(Q=1),this.r=p,this.g=C,this.b=N,this.a=Q};Fr.parse=function(d){if(d){if(d instanceof Fr)return d;if(typeof d=="string"){var p=mr(d);if(p)return new Fr(p[0]/255*p[3],p[1]/255*p[3],p[2]/255*p[3],p[3])}}},Fr.prototype.toString=function(){var d=this.toArray(),p=d[1],C=d[2],N=d[3];return"rgba("+Math.round(d[0])+","+Math.round(p)+","+Math.round(C)+","+N+")"},Fr.prototype.toArray=function(){var d=this.a;return d===0?[0,0,0,0]:[255*this.r/d,255*this.g/d,255*this.b/d,d]},Fr.black=new Fr(0,0,0,1),Fr.white=new Fr(1,1,1,1),Fr.transparent=new Fr(0,0,0,0),Fr.red=new Fr(1,0,0,1);var xi=function(p,C,N){this.sensitivity=p?C?"variant":"case":C?"accent":"base",this.locale=N,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};xi.prototype.compare=function(d,p){return this.collator.compare(d,p)},xi.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ta=function(p,C,N,Q,ct){this.text=p,this.image=C,this.scale=N,this.fontStack=Q,this.textColor=ct},Aa=function(p){this.sections=p};Aa.fromString=function(d){return new Aa([new Ta(d,null,null,null,null)])},Aa.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(d){return d.text.length!==0||d.image&&d.image.name.length!==0})},Aa.factory=function(d){return d instanceof Aa?d:Aa.fromString(d)},Aa.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(d){return d.text}).join("")},Aa.prototype.serialize=function(){for(var d=["format"],p=0,C=this.sections;p<C.length;p+=1){var N=C[p];if(N.image)d.push(["image",N.image.name]);else{d.push(N.text);var Q={};N.fontStack&&(Q["text-font"]=["literal",N.fontStack.split(",")]),N.scale&&(Q["font-scale"]=N.scale),N.textColor&&(Q["text-color"]=["rgba"].concat(N.textColor.toArray())),d.push(Q)}}return d};var to=function(p){this.name=p.name,this.available=p.available};function Vo(d,p,C,N){return typeof d=="number"&&d>=0&&d<=255&&typeof p=="number"&&p>=0&&p<=255&&typeof C=="number"&&C>=0&&C<=255?N===void 0||typeof N=="number"&&N>=0&&N<=1?null:"Invalid rgba value ["+[d,p,C,N].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof N=="number"?[d,p,C,N]:[d,p,C]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ro(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof Fr||d instanceof xi||d instanceof Aa||d instanceof to)return!0;if(Array.isArray(d)){for(var p=0,C=d;p<C.length;p+=1)if(!Ro(C[p]))return!1;return!0}if(typeof d=="object"){for(var N in d)if(!Ro(d[N]))return!1;return!0}return!1}function ro(d){if(d===null)return or;if(typeof d=="string")return Pr;if(typeof d=="boolean")return Sr;if(typeof d=="number")return cn;if(d instanceof Fr)return De;if(d instanceof xi)return En;if(d instanceof Aa)return xn;if(d instanceof to)return Nn;if(Array.isArray(d)){for(var p,C=d.length,N=0,Q=d;N<Q.length;N+=1){var ct=ro(Q[N]);if(p){if(p===ct)continue;p=Ve;break}p=ct}return mn(p||Ve,C)}return $e}function vs(d){var p=typeof d;return d===null?"":p==="string"||p==="number"||p==="boolean"?String(d):d instanceof Fr||d instanceof Aa||d instanceof to?d.toString():JSON.stringify(d)}to.prototype.toString=function(){return this.name},to.fromString=function(d){return d?new to({name:d,available:!1}):null},to.prototype.serialize=function(){return["image",this.name]};var Jo=function(p,C){this.type=p,this.value=C};Jo.parse=function(d,p){if(d.length!==2)return p.error("'literal' expression requires exactly one argument, but found "+(d.length-1)+" instead.");if(!Ro(d[1]))return p.error("invalid value");var C=d[1],N=ro(C),Q=p.expectedType;return N.kind!=="array"||N.N!==0||!Q||Q.kind!=="array"||typeof Q.N=="number"&&Q.N!==0||(N=Q),new Jo(N,C)},Jo.prototype.evaluate=function(){return this.value},Jo.prototype.eachChild=function(){},Jo.prototype.outputDefined=function(){return!0},Jo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Fr?["rgba"].concat(this.value.toArray()):this.value instanceof Aa?this.value.serialize():this.value};var Do=function(p){this.name="ExpressionEvaluationError",this.message=p};Do.prototype.toJSON=function(){return this.message};var xs={string:Pr,number:cn,boolean:Sr,object:$e},Ra=function(p,C){this.type=p,this.args=C};Ra.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C,N=1,Q=d[0];if(Q==="array"){var ct,Tt;if(d.length>2){var Bt=d[1];if(typeof Bt!="string"||!(Bt in xs)||Bt==="object")return p.error('The item type argument of "array" must be one of string, number, boolean',1);ct=xs[Bt],N++}else ct=Ve;if(d.length>3){if(d[2]!==null&&(typeof d[2]!="number"||d[2]<0||d[2]!==Math.floor(d[2])))return p.error('The length argument to "array" must be a positive integer literal',2);Tt=d[2],N++}C=mn(ct,Tt)}else C=xs[Q];for(var Jt=[];N<d.length;N++){var ve=p.parse(d[N],N,Ve);if(!ve)return null;Jt.push(ve)}return new Ra(C,Jt)},Ra.prototype.evaluate=function(d){for(var p=0;p<this.args.length;p++){var C=this.args[p].evaluate(d);if(!Wn(this.type,ro(C)))return C;if(p===this.args.length-1)throw new Do("Expected value to be of type "+Dn(this.type)+", but found "+Dn(ro(C))+" instead.")}return null},Ra.prototype.eachChild=function(d){this.args.forEach(d)},Ra.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},Ra.prototype.serialize=function(){var d=this.type,p=[d.kind];if(d.kind==="array"){var C=d.itemType;if(C.kind==="string"||C.kind==="number"||C.kind==="boolean"){p.push(C.kind);var N=d.N;(typeof N=="number"||this.args.length>1)&&p.push(N)}}return p.concat(this.args.map(function(Q){return Q.serialize()}))};var $o=function(p){this.type=xn,this.sections=p};$o.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C=d[1];if(!Array.isArray(C)&&typeof C=="object")return p.error("First argument must be an image or text section.");for(var N=[],Q=!1,ct=1;ct<=d.length-1;++ct){var Tt=d[ct];if(Q&&typeof Tt=="object"&&!Array.isArray(Tt)){Q=!1;var Bt=null;if(Tt["font-scale"]&&!(Bt=p.parse(Tt["font-scale"],1,cn)))return null;var Jt=null;if(Tt["text-font"]&&!(Jt=p.parse(Tt["text-font"],1,mn(Pr))))return null;var ve=null;if(Tt["text-color"]&&!(ve=p.parse(Tt["text-color"],1,De)))return null;var Re=N[N.length-1];Re.scale=Bt,Re.font=Jt,Re.textColor=ve}else{var Ge=p.parse(d[ct],1,Ve);if(!Ge)return null;var He=Ge.type.kind;if(He!=="string"&&He!=="value"&&He!=="null"&&He!=="resolvedImage")return p.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Q=!0,N.push({content:Ge,scale:null,font:null,textColor:null})}}return new $o(N)},$o.prototype.evaluate=function(d){return new Aa(this.sections.map(function(p){var C=p.content.evaluate(d);return ro(C)===Nn?new Ta("",C,null,null,null):new Ta(vs(C),null,p.scale?p.scale.evaluate(d):null,p.font?p.font.evaluate(d).join(","):null,p.textColor?p.textColor.evaluate(d):null)}))},$o.prototype.eachChild=function(d){for(var p=0,C=this.sections;p<C.length;p+=1){var N=C[p];d(N.content),N.scale&&d(N.scale),N.font&&d(N.font),N.textColor&&d(N.textColor)}},$o.prototype.outputDefined=function(){return!1},$o.prototype.serialize=function(){for(var d=["format"],p=0,C=this.sections;p<C.length;p+=1){var N=C[p];d.push(N.content.serialize());var Q={};N.scale&&(Q["font-scale"]=N.scale.serialize()),N.font&&(Q["text-font"]=N.font.serialize()),N.textColor&&(Q["text-color"]=N.textColor.serialize()),d.push(Q)}return d};var jo=function(p){this.type=Nn,this.input=p};jo.parse=function(d,p){if(d.length!==2)return p.error("Expected two arguments.");var C=p.parse(d[1],1,Pr);return C?new jo(C):p.error("No image name provided.")},jo.prototype.evaluate=function(d){var p=this.input.evaluate(d),C=to.fromString(p);return C&&d.availableImages&&(C.available=d.availableImages.indexOf(p)>-1),C},jo.prototype.eachChild=function(d){d(this.input)},jo.prototype.outputDefined=function(){return!1},jo.prototype.serialize=function(){return["image",this.input.serialize()]};var Js={"to-boolean":Sr,"to-color":De,"to-number":cn,"to-string":Pr},io=function(p,C){this.type=p,this.args=C};io.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C=d[0];if((C==="to-boolean"||C==="to-string")&&d.length!==2)return p.error("Expected one argument.");for(var N=Js[C],Q=[],ct=1;ct<d.length;ct++){var Tt=p.parse(d[ct],ct,Ve);if(!Tt)return null;Q.push(Tt)}return new io(N,Q)},io.prototype.evaluate=function(d){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(d));if(this.type.kind==="color"){for(var p,C,N=0,Q=this.args;N<Q.length;N+=1){if(C=null,(p=Q[N].evaluate(d))instanceof Fr)return p;if(typeof p=="string"){var ct=d.parseColor(p);if(ct)return ct}else if(Array.isArray(p)&&!(C=p.length<3||p.length>4?"Invalid rbga value "+JSON.stringify(p)+": expected an array containing either three or four numeric values.":Vo(p[0],p[1],p[2],p[3])))return new Fr(p[0]/255,p[1]/255,p[2]/255,p[3])}throw new Do(C||"Could not parse color from value '"+(typeof p=="string"?p:String(JSON.stringify(p)))+"'")}if(this.type.kind==="number"){for(var Tt=null,Bt=0,Jt=this.args;Bt<Jt.length;Bt+=1){if((Tt=Jt[Bt].evaluate(d))===null)return 0;var ve=Number(Tt);if(!isNaN(ve))return ve}throw new Do("Could not convert "+JSON.stringify(Tt)+" to number.")}return this.type.kind==="formatted"?Aa.fromString(vs(this.args[0].evaluate(d))):this.type.kind==="resolvedImage"?to.fromString(vs(this.args[0].evaluate(d))):vs(this.args[0].evaluate(d))},io.prototype.eachChild=function(d){this.args.forEach(d)},io.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},io.prototype.serialize=function(){if(this.type.kind==="formatted")return new $o([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new jo(this.args[0]).serialize();var d=["to-"+this.type.kind];return this.eachChild(function(p){d.push(p.serialize())}),d};var so=["Unknown","Point","LineString","Polygon"],Gs=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Gs.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Gs.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?so[this.feature.type]:this.feature.type:null},Gs.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Gs.prototype.canonicalID=function(){return this.canonical},Gs.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Gs.prototype.parseColor=function(d){var p=this._parseColorCache[d];return p||(p=this._parseColorCache[d]=Fr.parse(d)),p};var Ne=function(p,C,N,Q){this.name=p,this.type=C,this._evaluate=N,this.args=Q};Ne.prototype.evaluate=function(d){return this._evaluate(d,this.args)},Ne.prototype.eachChild=function(d){this.args.forEach(d)},Ne.prototype.outputDefined=function(){return!1},Ne.prototype.serialize=function(){return[this.name].concat(this.args.map(function(d){return d.serialize()}))},Ne.parse=function(d,p){var C,N=d[0],Q=Ne.definitions[N];if(!Q)return p.error('Unknown expression "'+N+'". If you wanted a literal array, use ["literal", [...]].',0);for(var ct=Array.isArray(Q)?Q[0]:Q.type,Tt=Array.isArray(Q)?[[Q[1],Q[2]]]:Q.overloads,Bt=Tt.filter(function(va){var qi=va[0];return!Array.isArray(qi)||qi.length===d.length-1}),Jt=null,ve=0,Re=Bt;ve<Re.length;ve+=1){var Ge=Re[ve],He=Ge[0],ln=Ge[1];Jt=new zo(p.registry,p.path,null,p.scope);for(var Ln=[],Cn=!1,Kn=1;Kn<d.length;Kn++){var Yn=d[Kn],_r=Array.isArray(He)?He[Kn-1]:He.type,Nr=Jt.parse(Yn,1+Ln.length,_r);if(!Nr){Cn=!0;break}Ln.push(Nr)}if(!Cn)if(Array.isArray(He)&&He.length!==Ln.length)Jt.error("Expected "+He.length+" arguments, but found "+Ln.length+" instead.");else{for(var Yr=0;Yr<Ln.length;Yr++){var vi=Array.isArray(He)?He[Yr]:He.type,si=Ln[Yr];Jt.concat(Yr+1).checkSubtype(vi,si.type)}if(Jt.errors.length===0)return new Ne(N,ct,ln,Ln)}}if(Bt.length===1)(C=p.errors).push.apply(C,Jt.errors);else{for(var Ni=(Bt.length?Bt:Tt).map(function(va){var qi;return qi=va[0],Array.isArray(qi)?"("+qi.map(Dn).join(", ")+")":"("+Dn(qi.type)+"...)"}).join(" | "),Fi=[],ia=1;ia<d.length;ia++){var pa=p.parse(d[ia],1+Fi.length);if(!pa)return null;Fi.push(Dn(pa.type))}p.error("Expected arguments of type "+Ni+", but found ("+Fi.join(", ")+") instead.")}return null},Ne.register=function(d,p){for(var C in Ne.definitions=p,p)d[C]=Ne};var se=function(p,C,N){this.type=En,this.locale=N,this.caseSensitive=p,this.diacriticSensitive=C};function Yt(d,p){d[0]=Math.min(d[0],p[0]),d[1]=Math.min(d[1],p[1]),d[2]=Math.max(d[2],p[0]),d[3]=Math.max(d[3],p[1])}function Ee(d,p){return!(d[0]<=p[0]||d[2]>=p[2]||d[1]<=p[1]||d[3]>=p[3])}function sn(d,p){var C=(180+d[0])/360,N=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,Q=Math.pow(2,p.z);return[Math.round(C*Q*8192),Math.round(N*Q*8192)]}function Fn(d,p,C){return p[1]>d[1]!=C[1]>d[1]&&d[0]<(C[0]-p[0])*(d[1]-p[1])/(C[1]-p[1])+p[0]}function rr(d,p){for(var C,N,Q,ct,Tt,Bt,Jt,ve=!1,Re=0,Ge=p.length;Re<Ge;Re++)for(var He=p[Re],ln=0,Ln=He.length;ln<Ln-1;ln++){if((ct=(C=d)[0]-(N=He[ln])[0])*(Jt=C[1]-(Q=He[ln+1])[1])-(Bt=C[0]-Q[0])*(Tt=C[1]-N[1])==0&&ct*Bt<=0&&Tt*Jt<=0)return!1;Fn(d,He[ln],He[ln+1])&&(ve=!ve)}return ve}function qn(d,p){for(var C=0;C<p.length;C++)if(rr(d,p[C]))return!0;return!1}function $r(d,p,C,N){var Q=N[0]-C[0],ct=N[1]-C[1],Tt=(d[0]-C[0])*ct-Q*(d[1]-C[1]),Bt=(p[0]-C[0])*ct-Q*(p[1]-C[1]);return Tt>0&&Bt<0||Tt<0&&Bt>0}function bi(d,p,C){for(var N=0,Q=C;N<Q.length;N+=1)for(var ct=Q[N],Tt=0;Tt<ct.length-1;++Tt)if((Ge=[(Re=ct[Tt+1])[0]-(ve=ct[Tt])[0],Re[1]-ve[1]])[0]*(He=[(Jt=p)[0]-(Bt=d)[0],Jt[1]-Bt[1]])[1]-Ge[1]*He[0]!=0&&$r(Bt,Jt,ve,Re)&&$r(ve,Re,Bt,Jt))return!0;var Bt,Jt,ve,Re,Ge,He;return!1}function wi(d,p){for(var C=0;C<d.length;++C)if(!rr(d[C],p))return!1;for(var N=0;N<d.length-1;++N)if(bi(d[N],d[N+1],p))return!1;return!0}function Vi(d,p){for(var C=0;C<p.length;C++)if(wi(d,p[C]))return!0;return!1}function sa(d,p,C){for(var N=[],Q=0;Q<d.length;Q++){for(var ct=[],Tt=0;Tt<d[Q].length;Tt++){var Bt=sn(d[Q][Tt],C);Yt(p,Bt),ct.push(Bt)}N.push(ct)}return N}function $a(d,p,C){for(var N=[],Q=0;Q<d.length;Q++){var ct=sa(d[Q],p,C);N.push(ct)}return N}function Ca(d,p,C,N){if(d[0]<C[0]||d[0]>C[2]){var Q=.5*N,ct=d[0]-C[0]>Q?-N:C[0]-d[0]>Q?N:0;ct===0&&(ct=d[0]-C[2]>Q?-N:C[2]-d[0]>Q?N:0),d[0]+=ct}Yt(p,d)}function _o(d,p,C,N){for(var Q=8192*Math.pow(2,N.z),ct=[8192*N.x,8192*N.y],Tt=[],Bt=0,Jt=d;Bt<Jt.length;Bt+=1)for(var ve=0,Re=Jt[Bt];ve<Re.length;ve+=1){var Ge=Re[ve],He=[Ge.x+ct[0],Ge.y+ct[1]];Ca(He,p,C,Q),Tt.push(He)}return Tt}function Fa(d,p,C,N){for(var Q,ct=8192*Math.pow(2,N.z),Tt=[8192*N.x,8192*N.y],Bt=[],Jt=0,ve=d;Jt<ve.length;Jt+=1){for(var Re=[],Ge=0,He=ve[Jt];Ge<He.length;Ge+=1){var ln=He[Ge],Ln=[ln.x+Tt[0],ln.y+Tt[1]];Yt(p,Ln),Re.push(Ln)}Bt.push(Re)}if(p[2]-p[0]<=ct/2){(Q=p)[0]=Q[1]=1/0,Q[2]=Q[3]=-1/0;for(var Cn=0,Kn=Bt;Cn<Kn.length;Cn+=1)for(var Yn=0,_r=Kn[Cn];Yn<_r.length;Yn+=1)Ca(_r[Yn],p,C,ct)}return Bt}se.parse=function(d,p){if(d.length!==2)return p.error("Expected one argument.");var C=d[1];if(typeof C!="object"||Array.isArray(C))return p.error("Collator options argument must be an object.");var N=p.parse(C["case-sensitive"]!==void 0&&C["case-sensitive"],1,Sr);if(!N)return null;var Q=p.parse(C["diacritic-sensitive"]!==void 0&&C["diacritic-sensitive"],1,Sr);if(!Q)return null;var ct=null;return C.locale&&!(ct=p.parse(C.locale,1,Pr))?null:new se(N,Q,ct)},se.prototype.evaluate=function(d){return new xi(this.caseSensitive.evaluate(d),this.diacriticSensitive.evaluate(d),this.locale?this.locale.evaluate(d):null)},se.prototype.eachChild=function(d){d(this.caseSensitive),d(this.diacriticSensitive),this.locale&&d(this.locale)},se.prototype.outputDefined=function(){return!1},se.prototype.serialize=function(){var d={};return d["case-sensitive"]=this.caseSensitive.serialize(),d["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(d.locale=this.locale.serialize()),["collator",d]};var uo=function(p,C){this.type=Sr,this.geojson=p,this.geometries=C};function vo(d){if(d instanceof Ne&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof uo)return!1;var p=!0;return d.eachChild(function(C){p&&!vo(C)&&(p=!1)}),p}function Ja(d){if(d instanceof Ne&&d.name==="feature-state")return!1;var p=!0;return d.eachChild(function(C){p&&!Ja(C)&&(p=!1)}),p}function To(d,p){if(d instanceof Ne&&p.indexOf(d.name)>=0)return!1;var C=!0;return d.eachChild(function(N){C&&!To(N,p)&&(C=!1)}),C}uo.parse=function(d,p){if(d.length!==2)return p.error("'within' expression requires exactly one argument, but found "+(d.length-1)+" instead.");if(Ro(d[1])){var C=d[1];if(C.type==="FeatureCollection")for(var N=0;N<C.features.length;++N){var Q=C.features[N].geometry.type;if(Q==="Polygon"||Q==="MultiPolygon")return new uo(C,C.features[N].geometry)}else if(C.type==="Feature"){var ct=C.geometry.type;if(ct==="Polygon"||ct==="MultiPolygon")return new uo(C,C.geometry)}else if(C.type==="Polygon"||C.type==="MultiPolygon")return new uo(C,C)}return p.error("'within' expression requires valid geojson object that contains polygon geometry type.")},uo.prototype.evaluate=function(d){if(d.geometry()!=null&&d.canonicalID()!=null){if(d.geometryType()==="Point")return function(p,C){var N=[1/0,1/0,-1/0,-1/0],Q=[1/0,1/0,-1/0,-1/0],ct=p.canonicalID();if(C.type==="Polygon"){var Tt=sa(C.coordinates,Q,ct),Bt=_o(p.geometry(),N,Q,ct);if(!Ee(N,Q))return!1;for(var Jt=0,ve=Bt;Jt<ve.length;Jt+=1)if(!rr(ve[Jt],Tt))return!1}if(C.type==="MultiPolygon"){var Re=$a(C.coordinates,Q,ct),Ge=_o(p.geometry(),N,Q,ct);if(!Ee(N,Q))return!1;for(var He=0,ln=Ge;He<ln.length;He+=1)if(!qn(ln[He],Re))return!1}return!0}(d,this.geometries);if(d.geometryType()==="LineString")return function(p,C){var N=[1/0,1/0,-1/0,-1/0],Q=[1/0,1/0,-1/0,-1/0],ct=p.canonicalID();if(C.type==="Polygon"){var Tt=sa(C.coordinates,Q,ct),Bt=Fa(p.geometry(),N,Q,ct);if(!Ee(N,Q))return!1;for(var Jt=0,ve=Bt;Jt<ve.length;Jt+=1)if(!wi(ve[Jt],Tt))return!1}if(C.type==="MultiPolygon"){var Re=$a(C.coordinates,Q,ct),Ge=Fa(p.geometry(),N,Q,ct);if(!Ee(N,Q))return!1;for(var He=0,ln=Ge;He<ln.length;He+=1)if(!Vi(ln[He],Re))return!1}return!0}(d,this.geometries)}return!1},uo.prototype.eachChild=function(){},uo.prototype.outputDefined=function(){return!0},uo.prototype.serialize=function(){return["within",this.geojson]};var hs=function(p,C){this.type=C.type,this.name=p,this.boundExpression=C};hs.parse=function(d,p){if(d.length!==2||typeof d[1]!="string")return p.error("'var' expression requires exactly one string literal argument.");var C=d[1];return p.scope.has(C)?new hs(C,p.scope.get(C)):p.error('Unknown variable "'+C+'". Make sure "'+C+'" has been bound in an enclosing "let" expression before using it.',1)},hs.prototype.evaluate=function(d){return this.boundExpression.evaluate(d)},hs.prototype.eachChild=function(){},hs.prototype.outputDefined=function(){return!1},hs.prototype.serialize=function(){return["var",this.name]};var zo=function(p,C,N,Q,ct){C===void 0&&(C=[]),Q===void 0&&(Q=new Ar),ct===void 0&&(ct=[]),this.registry=p,this.path=C,this.key=C.map(function(Tt){return"["+Tt+"]"}).join(""),this.scope=Q,this.errors=ct,this.expectedType=N};function bs(d,p){for(var C,N=d.length-1,Q=0,ct=N,Tt=0;Q<=ct;)if((C=d[Tt=Math.floor((Q+ct)/2)])<=p){if(Tt===N||p<d[Tt+1])return Tt;Q=Tt+1}else{if(!(C>p))throw new Do("Input is not a number.");ct=Tt-1}return 0}zo.prototype.parse=function(d,p,C,N,Q){return Q===void 0&&(Q={}),p?this.concat(p,C,N)._parse(d,Q):this._parse(d,Q)},zo.prototype._parse=function(d,p){function C(ve,Re,Ge){return Ge==="assert"?new Ra(Re,[ve]):Ge==="coerce"?new io(Re,[ve]):ve}if(d!==null&&typeof d!="string"&&typeof d!="boolean"&&typeof d!="number"||(d=["literal",d]),Array.isArray(d)){if(d.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var N=d[0];if(typeof N!="string")return this.error("Expression name must be a string, but found "+typeof N+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Q=this.registry[N];if(Q){var ct=Q.parse(d,this);if(!ct)return null;if(this.expectedType){var Tt=this.expectedType,Bt=ct.type;if(Tt.kind!=="string"&&Tt.kind!=="number"&&Tt.kind!=="boolean"&&Tt.kind!=="object"&&Tt.kind!=="array"||Bt.kind!=="value")if(Tt.kind!=="color"&&Tt.kind!=="formatted"&&Tt.kind!=="resolvedImage"||Bt.kind!=="value"&&Bt.kind!=="string"){if(this.checkSubtype(Tt,Bt))return null}else ct=C(ct,Tt,p.typeAnnotation||"coerce");else ct=C(ct,Tt,p.typeAnnotation||"assert")}if(!(ct instanceof Jo)&&ct.type.kind!=="resolvedImage"&&function ve(Re){if(Re instanceof hs)return ve(Re.boundExpression);if(Re instanceof Ne&&Re.name==="error"||Re instanceof se||Re instanceof uo)return!1;var Ge=Re instanceof io||Re instanceof Ra,He=!0;return Re.eachChild(function(ln){He=Ge?He&&ve(ln):He&&ln instanceof Jo}),!!He&&vo(Re)&&To(Re,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(ct)){var Jt=new Gs;try{ct=new Jo(ct.type,ct.evaluate(Jt))}catch(ve){return this.error(ve.message),null}}return ct}return this.error('Unknown expression "'+N+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(d===void 0?"'undefined' value invalid. Use null instead.":typeof d=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof d+" instead.")},zo.prototype.concat=function(d,p,C){var N=typeof d=="number"?this.path.concat(d):this.path,Q=C?this.scope.concat(C):this.scope;return new zo(this.registry,N,p||null,Q,this.errors)},zo.prototype.error=function(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];var N=""+this.key+p.map(function(Q){return"["+Q+"]"}).join("");this.errors.push(new vn(N,d))},zo.prototype.checkSubtype=function(d,p){var C=Wn(d,p);return C&&this.error(C),C};var Ao=function(p,C,N){this.type=p,this.input=C,this.labels=[],this.outputs=[];for(var Q=0,ct=N;Q<ct.length;Q+=1){var Tt=ct[Q],Bt=Tt[1];this.labels.push(Tt[0]),this.outputs.push(Bt)}};function Wa(d,p,C){return d*(1-C)+p*C}Ao.parse=function(d,p){if(d.length-1<4)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if((d.length-1)%2!=0)return p.error("Expected an even number of arguments.");var C=p.parse(d[1],1,cn);if(!C)return null;var N=[],Q=null;p.expectedType&&p.expectedType.kind!=="value"&&(Q=p.expectedType);for(var ct=1;ct<d.length;ct+=2){var Tt=ct===1?-1/0:d[ct],Bt=d[ct+1],Jt=ct,ve=ct+1;if(typeof Tt!="number")return p.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Jt);if(N.length&&N[N.length-1][0]>=Tt)return p.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Jt);var Re=p.parse(Bt,ve,Q);if(!Re)return null;Q=Q||Re.type,N.push([Tt,Re])}return new Ao(Q,C,N)},Ao.prototype.evaluate=function(d){var p=this.labels,C=this.outputs;if(p.length===1)return C[0].evaluate(d);var N=this.input.evaluate(d);if(N<=p[0])return C[0].evaluate(d);var Q=p.length;return N>=p[Q-1]?C[Q-1].evaluate(d):C[bs(p,N)].evaluate(d)},Ao.prototype.eachChild=function(d){d(this.input);for(var p=0,C=this.outputs;p<C.length;p+=1)d(C[p])},Ao.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})},Ao.prototype.serialize=function(){for(var d=["step",this.input.serialize()],p=0;p<this.labels.length;p++)p>0&&d.push(this.labels[p]),d.push(this.outputs[p].serialize());return d};var Rs=Object.freeze({__proto__:null,number:Wa,color:function(p,C,N){return new Fr(Wa(p.r,C.r,N),Wa(p.g,C.g,N),Wa(p.b,C.b,N),Wa(p.a,C.a,N))},array:function(p,C,N){return p.map(function(Q,ct){return Wa(Q,C[ct],N)})}}),ss=6/29*3*(6/29),Ba=Math.PI/180,gn=180/Math.PI;function cr(d){return d>.008856451679035631?Math.pow(d,1/3):d/ss+4/29}function Gr(d){return d>6/29?d*d*d:ss*(d-4/29)}function Ui(d){return 255*(d<=.0031308?12.92*d:1.055*Math.pow(d,1/2.4)-.055)}function Ua(d){return(d/=255)<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function xo(d){var p=Ua(d.r),C=Ua(d.g),N=Ua(d.b),Q=cr((.4124564*p+.3575761*C+.1804375*N)/.95047),ct=cr((.2126729*p+.7151522*C+.072175*N)/1);return{l:116*ct-16,a:500*(Q-ct),b:200*(ct-cr((.0193339*p+.119192*C+.9503041*N)/1.08883)),alpha:d.a}}function po(d){var p=(d.l+16)/116,C=isNaN(d.a)?p:p+d.a/500,N=isNaN(d.b)?p:p-d.b/200;return p=1*Gr(p),C=.95047*Gr(C),N=1.08883*Gr(N),new Fr(Ui(3.2404542*C-1.5371385*p-.4985314*N),Ui(-.969266*C+1.8760108*p+.041556*N),Ui(.0556434*C-.2040259*p+1.0572252*N),d.alpha)}function ea(d,p,C){var N=p-d;return d+C*(N>180||N<-180?N-360*Math.round(N/360):N)}var Qa={forward:xo,reverse:po,interpolate:function(p,C,N){return{l:Wa(p.l,C.l,N),a:Wa(p.a,C.a,N),b:Wa(p.b,C.b,N),alpha:Wa(p.alpha,C.alpha,N)}}},Ds={forward:function(p){var C=xo(p),N=C.l,Q=C.a,ct=C.b,Tt=Math.atan2(ct,Q)*gn;return{h:Tt<0?Tt+360:Tt,c:Math.sqrt(Q*Q+ct*ct),l:N,alpha:p.a}},reverse:function(p){var C=p.h*Ba,N=p.c;return po({l:p.l,a:Math.cos(C)*N,b:Math.sin(C)*N,alpha:p.alpha})},interpolate:function(p,C,N){return{h:ea(p.h,C.h,N),c:Wa(p.c,C.c,N),l:Wa(p.l,C.l,N),alpha:Wa(p.alpha,C.alpha,N)}}},Es=Object.freeze({__proto__:null,lab:Qa,hcl:Ds}),Za=function(p,C,N,Q,ct){this.type=p,this.operator=C,this.interpolation=N,this.input=Q,this.labels=[],this.outputs=[];for(var Tt=0,Bt=ct;Tt<Bt.length;Tt+=1){var Jt=Bt[Tt],ve=Jt[1];this.labels.push(Jt[0]),this.outputs.push(ve)}};function ru(d,p,C,N){var Q=N-C,ct=d-C;return Q===0?0:p===1?ct/Q:(Math.pow(p,ct)-1)/(Math.pow(p,Q)-1)}Za.interpolationFactor=function(d,p,C,N){var Q=0;if(d.name==="exponential")Q=ru(p,d.base,C,N);else if(d.name==="linear")Q=ru(p,1,C,N);else if(d.name==="cubic-bezier"){var ct=d.controlPoints;Q=new s(ct[0],ct[1],ct[2],ct[3]).solve(ru(p,1,C,N))}return Q},Za.parse=function(d,p){var C=d[0],N=d[1],Q=d[2],ct=d.slice(3);if(!Array.isArray(N)||N.length===0)return p.error("Expected an interpolation type expression.",1);if(N[0]==="linear")N={name:"linear"};else if(N[0]==="exponential"){var Tt=N[1];if(typeof Tt!="number")return p.error("Exponential interpolation requires a numeric base.",1,1);N={name:"exponential",base:Tt}}else{if(N[0]!=="cubic-bezier")return p.error("Unknown interpolation type "+String(N[0]),1,0);var Bt=N.slice(1);if(Bt.length!==4||Bt.some(function(Kn){return typeof Kn!="number"||Kn<0||Kn>1}))return p.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);N={name:"cubic-bezier",controlPoints:Bt}}if(d.length-1<4)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if((d.length-1)%2!=0)return p.error("Expected an even number of arguments.");if(!(Q=p.parse(Q,2,cn)))return null;var Jt=[],ve=null;C==="interpolate-hcl"||C==="interpolate-lab"?ve=De:p.expectedType&&p.expectedType.kind!=="value"&&(ve=p.expectedType);for(var Re=0;Re<ct.length;Re+=2){var Ge=ct[Re],He=ct[Re+1],ln=Re+3,Ln=Re+4;if(typeof Ge!="number")return p.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ln);if(Jt.length&&Jt[Jt.length-1][0]>=Ge)return p.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ln);var Cn=p.parse(He,Ln,ve);if(!Cn)return null;ve=ve||Cn.type,Jt.push([Ge,Cn])}return ve.kind==="number"||ve.kind==="color"||ve.kind==="array"&&ve.itemType.kind==="number"&&typeof ve.N=="number"?new Za(ve,C,N,Q,Jt):p.error("Type "+Dn(ve)+" is not interpolatable.")},Za.prototype.evaluate=function(d){var p=this.labels,C=this.outputs;if(p.length===1)return C[0].evaluate(d);var N=this.input.evaluate(d);if(N<=p[0])return C[0].evaluate(d);var Q=p.length;if(N>=p[Q-1])return C[Q-1].evaluate(d);var ct=bs(p,N),Tt=Za.interpolationFactor(this.interpolation,N,p[ct],p[ct+1]),Bt=C[ct].evaluate(d),Jt=C[ct+1].evaluate(d);return this.operator==="interpolate"?Rs[this.type.kind.toLowerCase()](Bt,Jt,Tt):this.operator==="interpolate-hcl"?Ds.reverse(Ds.interpolate(Ds.forward(Bt),Ds.forward(Jt),Tt)):Qa.reverse(Qa.interpolate(Qa.forward(Bt),Qa.forward(Jt),Tt))},Za.prototype.eachChild=function(d){d(this.input);for(var p=0,C=this.outputs;p<C.length;p+=1)d(C[p])},Za.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})},Za.prototype.serialize=function(){var d;d=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var p=[this.operator,d,this.input.serialize()],C=0;C<this.labels.length;C++)p.push(this.labels[C],this.outputs[C].serialize());return p};var Qo=function(p,C){this.type=p,this.args=C};Qo.parse=function(d,p){if(d.length<2)return p.error("Expectected at least one argument.");var C=null,N=p.expectedType;N&&N.kind!=="value"&&(C=N);for(var Q=[],ct=0,Tt=d.slice(1);ct<Tt.length;ct+=1){var Bt=p.parse(Tt[ct],1+Q.length,C,void 0,{typeAnnotation:"omit"});if(!Bt)return null;C=C||Bt.type,Q.push(Bt)}var Jt=N&&Q.some(function(ve){return Wn(N,ve.type)});return new Qo(Jt?Ve:C,Q)},Qo.prototype.evaluate=function(d){for(var p,C=null,N=0,Q=0,ct=this.args;Q<ct.length&&(N++,(C=ct[Q].evaluate(d))&&C instanceof to&&!C.available&&(p||(p=C.name),C=null,N===this.args.length&&(C=p)),C===null);Q+=1);return C},Qo.prototype.eachChild=function(d){this.args.forEach(d)},Qo.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},Qo.prototype.serialize=function(){var d=["coalesce"];return this.eachChild(function(p){d.push(p.serialize())}),d};var Os=function(p,C){this.type=C.type,this.bindings=[].concat(p),this.result=C};Os.prototype.evaluate=function(d){return this.result.evaluate(d)},Os.prototype.eachChild=function(d){for(var p=0,C=this.bindings;p<C.length;p+=1)d(C[p][1]);d(this.result)},Os.parse=function(d,p){if(d.length<4)return p.error("Expected at least 3 arguments, but found "+(d.length-1)+" instead.");for(var C=[],N=1;N<d.length-1;N+=2){var Q=d[N];if(typeof Q!="string")return p.error("Expected string, but found "+typeof Q+" instead.",N);if(/[^a-zA-Z0-9_]/.test(Q))return p.error("Variable names must contain only alphanumeric characters or '_'.",N);var ct=p.parse(d[N+1],N+1);if(!ct)return null;C.push([Q,ct])}var Tt=p.parse(d[d.length-1],d.length-1,p.expectedType,C);return Tt?new Os(C,Tt):null},Os.prototype.outputDefined=function(){return this.result.outputDefined()},Os.prototype.serialize=function(){for(var d=["let"],p=0,C=this.bindings;p<C.length;p+=1){var N=C[p];d.push(N[0],N[1].serialize())}return d.push(this.result.serialize()),d};var $s=function(p,C,N){this.type=p,this.index=C,this.input=N};$s.parse=function(d,p){if(d.length!==3)return p.error("Expected 2 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,cn),N=p.parse(d[2],2,mn(p.expectedType||Ve));return C&&N?new $s(N.type.itemType,C,N):null},$s.prototype.evaluate=function(d){var p=this.index.evaluate(d),C=this.input.evaluate(d);if(p<0)throw new Do("Array index out of bounds: "+p+" < 0.");if(p>=C.length)throw new Do("Array index out of bounds: "+p+" > "+(C.length-1)+".");if(p!==Math.floor(p))throw new Do("Array index must be an integer, but found "+p+" instead.");return C[p]},$s.prototype.eachChild=function(d){d(this.index),d(this.input)},$s.prototype.outputDefined=function(){return!1},$s.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ss=function(p,C){this.type=Sr,this.needle=p,this.haystack=C};Ss.parse=function(d,p){if(d.length!==3)return p.error("Expected 2 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ve),N=p.parse(d[2],2,Ve);return C&&N?_n(C.type,[Sr,Pr,cn,or,Ve])?new Ss(C,N):p.error("Expected first argument to be of type boolean, string, number or null, but found "+Dn(C.type)+" instead"):null},Ss.prototype.evaluate=function(d){var p=this.needle.evaluate(d),C=this.haystack.evaluate(d);if(!C)return!1;if(!xr(p,["boolean","string","number","null"]))throw new Do("Expected first argument to be of type boolean, string, number or null, but found "+Dn(ro(p))+" instead.");if(!xr(C,["string","array"]))throw new Do("Expected second argument to be of type array or string, but found "+Dn(ro(C))+" instead.");return C.indexOf(p)>=0},Ss.prototype.eachChild=function(d){d(this.needle),d(this.haystack)},Ss.prototype.outputDefined=function(){return!0},Ss.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ps=function(p,C,N){this.type=cn,this.needle=p,this.haystack=C,this.fromIndex=N};ps.parse=function(d,p){if(d.length<=2||d.length>=5)return p.error("Expected 3 or 4 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ve),N=p.parse(d[2],2,Ve);if(!C||!N)return null;if(!_n(C.type,[Sr,Pr,cn,or,Ve]))return p.error("Expected first argument to be of type boolean, string, number or null, but found "+Dn(C.type)+" instead");if(d.length===4){var Q=p.parse(d[3],3,cn);return Q?new ps(C,N,Q):null}return new ps(C,N)},ps.prototype.evaluate=function(d){var p=this.needle.evaluate(d),C=this.haystack.evaluate(d);if(!xr(p,["boolean","string","number","null"]))throw new Do("Expected first argument to be of type boolean, string, number or null, but found "+Dn(ro(p))+" instead.");if(!xr(C,["string","array"]))throw new Do("Expected second argument to be of type array or string, but found "+Dn(ro(C))+" instead.");if(this.fromIndex){var N=this.fromIndex.evaluate(d);return C.indexOf(p,N)}return C.indexOf(p)},ps.prototype.eachChild=function(d){d(this.needle),d(this.haystack),this.fromIndex&&d(this.fromIndex)},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var d=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),d]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var rs=function(p,C,N,Q,ct,Tt){this.inputType=p,this.type=C,this.input=N,this.cases=Q,this.outputs=ct,this.otherwise=Tt};rs.parse=function(d,p){if(d.length<5)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if(d.length%2!=1)return p.error("Expected an even number of arguments.");var C,N;p.expectedType&&p.expectedType.kind!=="value"&&(N=p.expectedType);for(var Q={},ct=[],Tt=2;Tt<d.length-1;Tt+=2){var Bt=d[Tt],Jt=d[Tt+1];Array.isArray(Bt)||(Bt=[Bt]);var ve=p.concat(Tt);if(Bt.length===0)return ve.error("Expected at least one branch label.");for(var Re=0,Ge=Bt;Re<Ge.length;Re+=1){var He=Ge[Re];if(typeof He!="number"&&typeof He!="string")return ve.error("Branch labels must be numbers or strings.");if(typeof He=="number"&&Math.abs(He)>Number.MAX_SAFE_INTEGER)return ve.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof He=="number"&&Math.floor(He)!==He)return ve.error("Numeric branch labels must be integer values.");if(C){if(ve.checkSubtype(C,ro(He)))return null}else C=ro(He);if(Q[String(He)]!==void 0)return ve.error("Branch labels must be unique.");Q[String(He)]=ct.length}var ln=p.parse(Jt,Tt,N);if(!ln)return null;N=N||ln.type,ct.push(ln)}var Ln=p.parse(d[1],1,Ve);if(!Ln)return null;var Cn=p.parse(d[d.length-1],d.length-1,N);return Cn?Ln.type.kind!=="value"&&p.concat(1).checkSubtype(C,Ln.type)?null:new rs(C,N,Ln,Q,ct,Cn):null},rs.prototype.evaluate=function(d){var p=this.input.evaluate(d);return(ro(p)===this.inputType&&this.outputs[this.cases[p]]||this.otherwise).evaluate(d)},rs.prototype.eachChild=function(d){d(this.input),this.outputs.forEach(d),d(this.otherwise)},rs.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})&&this.otherwise.outputDefined()},rs.prototype.serialize=function(){for(var d=this,p=["match",this.input.serialize()],C=[],N={},Q=0,ct=Object.keys(this.cases).sort();Q<ct.length;Q+=1){var Tt=ct[Q];(Ge=N[this.cases[Tt]])===void 0?(N[this.cases[Tt]]=C.length,C.push([this.cases[Tt],[Tt]])):C[Ge][1].push(Tt)}for(var Bt=function(Ln){return d.inputType.kind==="number"?Number(Ln):Ln},Jt=0,ve=C;Jt<ve.length;Jt+=1){var Re=ve[Jt],Ge=Re[0],He=Re[1];p.push(He.length===1?Bt(He[0]):He.map(Bt)),p.push(this.outputs[outputIndex$1].serialize())}return p.push(this.otherwise.serialize()),p};var ws=function(p,C,N){this.type=p,this.branches=C,this.otherwise=N};ws.parse=function(d,p){if(d.length<4)return p.error("Expected at least 3 arguments, but found only "+(d.length-1)+".");if(d.length%2!=0)return p.error("Expected an odd number of arguments.");var C;p.expectedType&&p.expectedType.kind!=="value"&&(C=p.expectedType);for(var N=[],Q=1;Q<d.length-1;Q+=2){var ct=p.parse(d[Q],Q,Sr);if(!ct)return null;var Tt=p.parse(d[Q+1],Q+1,C);if(!Tt)return null;N.push([ct,Tt]),C=C||Tt.type}var Bt=p.parse(d[d.length-1],d.length-1,C);return Bt?new ws(C,N,Bt):null},ws.prototype.evaluate=function(d){for(var p=0,C=this.branches;p<C.length;p+=1){var N=C[p],Q=N[1];if(N[0].evaluate(d))return Q.evaluate(d)}return this.otherwise.evaluate(d)},ws.prototype.eachChild=function(d){for(var p=0,C=this.branches;p<C.length;p+=1){var N=C[p],Q=N[1];d(N[0]),d(Q)}d(this.otherwise)},ws.prototype.outputDefined=function(){return this.branches.every(function(d){return d[1].outputDefined()})&&this.otherwise.outputDefined()},ws.prototype.serialize=function(){var d=["case"];return this.eachChild(function(p){d.push(p.serialize())}),d};var _s=function(p,C,N,Q){this.type=p,this.input=C,this.beginIndex=N,this.endIndex=Q};function Tu(d,p){return d==="=="||d==="!="?p.kind==="boolean"||p.kind==="string"||p.kind==="number"||p.kind==="null"||p.kind==="value":p.kind==="string"||p.kind==="number"||p.kind==="value"}function Ru(d,p,C,N){return N.compare(p,C)===0}function Mo(d,p,C){var N=d!=="=="&&d!=="!=";return function(){function Q(ct,Tt,Bt){this.type=Sr,this.lhs=ct,this.rhs=Tt,this.collator=Bt,this.hasUntypedArgument=ct.type.kind==="value"||Tt.type.kind==="value"}return Q.parse=function(ct,Tt){if(ct.length!==3&&ct.length!==4)return Tt.error("Expected two or three arguments.");var Bt=ct[0],Jt=Tt.parse(ct[1],1,Ve);if(!Jt)return null;if(!Tu(Bt,Jt.type))return Tt.concat(1).error('"'+Bt+`" comparisons are not supported for type '`+Dn(Jt.type)+"'.");var ve=Tt.parse(ct[2],2,Ve);if(!ve)return null;if(!Tu(Bt,ve.type))return Tt.concat(2).error('"'+Bt+`" comparisons are not supported for type '`+Dn(ve.type)+"'.");if(Jt.type.kind!==ve.type.kind&&Jt.type.kind!=="value"&&ve.type.kind!=="value")return Tt.error("Cannot compare types '"+Dn(Jt.type)+"' and '"+Dn(ve.type)+"'.");N&&(Jt.type.kind==="value"&&ve.type.kind!=="value"?Jt=new Ra(ve.type,[Jt]):Jt.type.kind!=="value"&&ve.type.kind==="value"&&(ve=new Ra(Jt.type,[ve])));var Re=null;if(ct.length===4){if(Jt.type.kind!=="string"&&ve.type.kind!=="string"&&Jt.type.kind!=="value"&&ve.type.kind!=="value")return Tt.error("Cannot use collator to compare non-string types.");if(!(Re=Tt.parse(ct[3],3,En)))return null}return new Q(Jt,ve,Re)},Q.prototype.evaluate=function(ct){var Tt=this.lhs.evaluate(ct),Bt=this.rhs.evaluate(ct);if(N&&this.hasUntypedArgument){var Jt=ro(Tt),ve=ro(Bt);if(Jt.kind!==ve.kind||Jt.kind!=="string"&&Jt.kind!=="number")throw new Do('Expected arguments for "'+d+'" to be (string, string) or (number, number), but found ('+Jt.kind+", "+ve.kind+") instead.")}if(this.collator&&!N&&this.hasUntypedArgument){var Re=ro(Tt),Ge=ro(Bt);if(Re.kind!=="string"||Ge.kind!=="string")return p(ct,Tt,Bt)}return this.collator?C(ct,Tt,Bt,this.collator.evaluate(ct)):p(ct,Tt,Bt)},Q.prototype.eachChild=function(ct){ct(this.lhs),ct(this.rhs),this.collator&&ct(this.collator)},Q.prototype.outputDefined=function(){return!0},Q.prototype.serialize=function(){var ct=[d];return this.eachChild(function(Tt){ct.push(Tt.serialize())}),ct},Q}()}_s.parse=function(d,p){if(d.length<=2||d.length>=5)return p.error("Expected 3 or 4 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ve),N=p.parse(d[2],2,cn);if(!C||!N)return null;if(!_n(C.type,[mn(Ve),Pr,Ve]))return p.error("Expected first argument to be of type array or string, but found "+Dn(C.type)+" instead");if(d.length===4){var Q=p.parse(d[3],3,cn);return Q?new _s(C.type,C,N,Q):null}return new _s(C.type,C,N)},_s.prototype.evaluate=function(d){var p=this.input.evaluate(d),C=this.beginIndex.evaluate(d);if(!xr(p,["string","array"]))throw new Do("Expected first argument to be of type array or string, but found "+Dn(ro(p))+" instead.");if(this.endIndex){var N=this.endIndex.evaluate(d);return p.slice(C,N)}return p.slice(C)},_s.prototype.eachChild=function(d){d(this.input),d(this.beginIndex),this.endIndex&&d(this.endIndex)},_s.prototype.outputDefined=function(){return!1},_s.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var d=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),d]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Qs=Mo("==",function(d,p,C){return p===C},Ru),Du=Mo("!=",function(d,p,C){return p!==C},function(d,p,C,N){return!Ru(0,p,C,N)}),Wu=Mo("<",function(d,p,C){return p<C},function(d,p,C,N){return N.compare(p,C)<0}),il=Mo(">",function(d,p,C){return p>C},function(d,p,C,N){return N.compare(p,C)>0}),ju=Mo("<=",function(d,p,C){return p<=C},function(d,p,C,N){return N.compare(p,C)<=0}),Co=Mo(">=",function(d,p,C){return p>=C},function(d,p,C,N){return N.compare(p,C)>=0}),ka=function(p,C,N,Q,ct){this.type=Pr,this.number=p,this.locale=C,this.currency=N,this.minFractionDigits=Q,this.maxFractionDigits=ct};ka.parse=function(d,p){if(d.length!==3)return p.error("Expected two arguments.");var C=p.parse(d[1],1,cn);if(!C)return null;var N=d[2];if(typeof N!="object"||Array.isArray(N))return p.error("NumberFormat options argument must be an object.");var Q=null;if(N.locale&&!(Q=p.parse(N.locale,1,Pr)))return null;var ct=null;if(N.currency&&!(ct=p.parse(N.currency,1,Pr)))return null;var Tt=null;if(N["min-fraction-digits"]&&!(Tt=p.parse(N["min-fraction-digits"],1,cn)))return null;var Bt=null;return N["max-fraction-digits"]&&!(Bt=p.parse(N["max-fraction-digits"],1,cn))?null:new ka(C,Q,ct,Tt,Bt)},ka.prototype.evaluate=function(d){return new Intl.NumberFormat(this.locale?this.locale.evaluate(d):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(d):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(d):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(d):void 0}).format(this.number.evaluate(d))},ka.prototype.eachChild=function(d){d(this.number),this.locale&&d(this.locale),this.currency&&d(this.currency),this.minFractionDigits&&d(this.minFractionDigits),this.maxFractionDigits&&d(this.maxFractionDigits)},ka.prototype.outputDefined=function(){return!1},ka.prototype.serialize=function(){var d={};return this.locale&&(d.locale=this.locale.serialize()),this.currency&&(d.currency=this.currency.serialize()),this.minFractionDigits&&(d["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(d["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),d]};var ba=function(p){this.type=cn,this.input=p};ba.parse=function(d,p){if(d.length!==2)return p.error("Expected 1 argument, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1);return C?C.type.kind!=="array"&&C.type.kind!=="string"&&C.type.kind!=="value"?p.error("Expected argument of type string or array, but found "+Dn(C.type)+" instead."):new ba(C):null},ba.prototype.evaluate=function(d){var p=this.input.evaluate(d);if(typeof p=="string"||Array.isArray(p))return p.length;throw new Do("Expected value to be of type string or array, but found "+Dn(ro(p))+" instead.")},ba.prototype.eachChild=function(d){d(this.input)},ba.prototype.outputDefined=function(){return!1},ba.prototype.serialize=function(){var d=["length"];return this.eachChild(function(p){d.push(p.serialize())}),d};var Bo={"==":Qs,"!=":Du,">":il,"<":Wu,">=":Co,"<=":ju,array:Ra,at:$s,boolean:Ra,case:ws,coalesce:Qo,collator:se,format:$o,image:jo,in:Ss,"index-of":ps,interpolate:Za,"interpolate-hcl":Za,"interpolate-lab":Za,length:ba,let:Os,literal:Jo,match:rs,number:Ra,"number-format":ka,object:Ra,slice:_s,step:Ao,string:Ra,"to-boolean":io,"to-color":io,"to-number":io,"to-string":io,var:hs,within:uo};function uu(d,p){var C=p[0],N=p[1],Q=p[2],ct=p[3];C=C.evaluate(d),N=N.evaluate(d),Q=Q.evaluate(d);var Tt=ct?ct.evaluate(d):1,Bt=Vo(C,N,Q,Tt);if(Bt)throw new Do(Bt);return new Fr(C/255*Tt,N/255*Tt,Q/255*Tt,Tt)}function Hu(d,p){return d in p}function gs(d,p){var C=p[d];return C===void 0?null:C}function qo(d){return{type:d}}function Is(d){return{result:"success",value:d}}function iu(d){return{result:"error",value:d}}function Fo(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function Yu(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function Ys(d){return!!d.expression&&d.expression.interpolated}function Ka(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function pl(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function Gl(d){return d}function gl(d,p,C){return d!==void 0?d:p!==void 0?p:C!==void 0?C:void 0}function Ec(d,p,C,N,Q){return gl(typeof C===Q?N[C]:void 0,d.default,p.default)}function Ml(d,p,C){if(Ka(C)!=="number")return gl(d.default,p.default);var N=d.stops.length;if(N===1||C<=d.stops[0][0])return d.stops[0][1];if(C>=d.stops[N-1][0])return d.stops[N-1][1];var Q=bs(d.stops.map(function(ct){return ct[0]}),C);return d.stops[Q][1]}function ao(d,p,C){var N=d.base!==void 0?d.base:1;if(Ka(C)!=="number")return gl(d.default,p.default);var Q=d.stops.length;if(Q===1||C<=d.stops[0][0])return d.stops[0][1];if(C>=d.stops[Q-1][0])return d.stops[Q-1][1];var ct=bs(d.stops.map(function(Ge){return Ge[0]}),C),Tt=function(Ge,He,ln,Ln){var Cn=Ln-ln,Kn=Ge-ln;return Cn===0?0:He===1?Kn/Cn:(Math.pow(He,Kn)-1)/(Math.pow(He,Cn)-1)}(C,N,d.stops[ct][0],d.stops[ct+1][0]),Bt=d.stops[ct][1],Jt=d.stops[ct+1][1],ve=Rs[p.type]||Gl;if(d.colorSpace&&d.colorSpace!=="rgb"){var Re=Es[d.colorSpace];ve=function(He,ln){return Re.reverse(Re.interpolate(Re.forward(He),Re.forward(ln),Tt))}}return typeof Bt.evaluate=="function"?{evaluate:function(){for(var He=[],ln=arguments.length;ln--;)He[ln]=arguments[ln];var Ln=Bt.evaluate.apply(void 0,He),Cn=Jt.evaluate.apply(void 0,He);if(Ln!==void 0&&Cn!==void 0)return ve(Ln,Cn,Tt)}}:ve(Bt,Jt,Tt)}function Au(d,p,C){return p.type==="color"?C=Fr.parse(C):p.type==="formatted"?C=Aa.fromString(C.toString()):p.type==="resolvedImage"?C=to.fromString(C.toString()):Ka(C)===p.type||p.type==="enum"&&p.values[C]||(C=void 0),gl(C,d.default,p.default)}Ne.register(Bo,{error:[{kind:"error"},[Pr],function(d,p){throw new Do(p[0].evaluate(d))}],typeof:[Pr,[Ve],function(d,p){return Dn(ro(p[0].evaluate(d)))}],"to-rgba":[mn(cn,4),[De],function(d,p){return p[0].evaluate(d).toArray()}],rgb:[De,[cn,cn,cn],uu],rgba:[De,[cn,cn,cn,cn],uu],has:{type:Sr,overloads:[[[Pr],function(d,p){return Hu(p[0].evaluate(d),d.properties())}],[[Pr,$e],function(d,p){var C=p[1];return Hu(p[0].evaluate(d),C.evaluate(d))}]]},get:{type:Ve,overloads:[[[Pr],function(d,p){return gs(p[0].evaluate(d),d.properties())}],[[Pr,$e],function(d,p){var C=p[1];return gs(p[0].evaluate(d),C.evaluate(d))}]]},"feature-state":[Ve,[Pr],function(d,p){return gs(p[0].evaluate(d),d.featureState||{})}],properties:[$e,[],function(d){return d.properties()}],"geometry-type":[Pr,[],function(d){return d.geometryType()}],id:[Ve,[],function(d){return d.id()}],zoom:[cn,[],function(d){return d.globals.zoom}],"heatmap-density":[cn,[],function(d){return d.globals.heatmapDensity||0}],"line-progress":[cn,[],function(d){return d.globals.lineProgress||0}],accumulated:[Ve,[],function(d){return d.globals.accumulated===void 0?null:d.globals.accumulated}],"+":[cn,qo(cn),function(d,p){for(var C=0,N=0,Q=p;N<Q.length;N+=1)C+=Q[N].evaluate(d);return C}],"*":[cn,qo(cn),function(d,p){for(var C=1,N=0,Q=p;N<Q.length;N+=1)C*=Q[N].evaluate(d);return C}],"-":{type:cn,overloads:[[[cn,cn],function(d,p){var C=p[1];return p[0].evaluate(d)-C.evaluate(d)}],[[cn],function(d,p){return-p[0].evaluate(d)}]]},"/":[cn,[cn,cn],function(d,p){var C=p[1];return p[0].evaluate(d)/C.evaluate(d)}],"%":[cn,[cn,cn],function(d,p){var C=p[1];return p[0].evaluate(d)%C.evaluate(d)}],ln2:[cn,[],function(){return Math.LN2}],pi:[cn,[],function(){return Math.PI}],e:[cn,[],function(){return Math.E}],"^":[cn,[cn,cn],function(d,p){var C=p[1];return Math.pow(p[0].evaluate(d),C.evaluate(d))}],sqrt:[cn,[cn],function(d,p){return Math.sqrt(p[0].evaluate(d))}],log10:[cn,[cn],function(d,p){return Math.log(p[0].evaluate(d))/Math.LN10}],ln:[cn,[cn],function(d,p){return Math.log(p[0].evaluate(d))}],log2:[cn,[cn],function(d,p){return Math.log(p[0].evaluate(d))/Math.LN2}],sin:[cn,[cn],function(d,p){return Math.sin(p[0].evaluate(d))}],cos:[cn,[cn],function(d,p){return Math.cos(p[0].evaluate(d))}],tan:[cn,[cn],function(d,p){return Math.tan(p[0].evaluate(d))}],asin:[cn,[cn],function(d,p){return Math.asin(p[0].evaluate(d))}],acos:[cn,[cn],function(d,p){return Math.acos(p[0].evaluate(d))}],atan:[cn,[cn],function(d,p){return Math.atan(p[0].evaluate(d))}],min:[cn,qo(cn),function(d,p){return Math.min.apply(Math,p.map(function(C){return C.evaluate(d)}))}],max:[cn,qo(cn),function(d,p){return Math.max.apply(Math,p.map(function(C){return C.evaluate(d)}))}],abs:[cn,[cn],function(d,p){return Math.abs(p[0].evaluate(d))}],round:[cn,[cn],function(d,p){var C=p[0].evaluate(d);return C<0?-Math.round(-C):Math.round(C)}],floor:[cn,[cn],function(d,p){return Math.floor(p[0].evaluate(d))}],ceil:[cn,[cn],function(d,p){return Math.ceil(p[0].evaluate(d))}],"filter-==":[Sr,[Pr,Ve],function(d,p){var C=p[0],N=p[1];return d.properties()[C.value]===N.value}],"filter-id-==":[Sr,[Ve],function(d,p){var C=p[0];return d.id()===C.value}],"filter-type-==":[Sr,[Pr],function(d,p){var C=p[0];return d.geometryType()===C.value}],"filter-<":[Sr,[Pr,Ve],function(d,p){var C=p[0],N=p[1],Q=d.properties()[C.value],ct=N.value;return typeof Q==typeof ct&&Q<ct}],"filter-id-<":[Sr,[Ve],function(d,p){var C=p[0],N=d.id(),Q=C.value;return typeof N==typeof Q&&N<Q}],"filter->":[Sr,[Pr,Ve],function(d,p){var C=p[0],N=p[1],Q=d.properties()[C.value],ct=N.value;return typeof Q==typeof ct&&Q>ct}],"filter-id->":[Sr,[Ve],function(d,p){var C=p[0],N=d.id(),Q=C.value;return typeof N==typeof Q&&N>Q}],"filter-<=":[Sr,[Pr,Ve],function(d,p){var C=p[0],N=p[1],Q=d.properties()[C.value],ct=N.value;return typeof Q==typeof ct&&Q<=ct}],"filter-id-<=":[Sr,[Ve],function(d,p){var C=p[0],N=d.id(),Q=C.value;return typeof N==typeof Q&&N<=Q}],"filter->=":[Sr,[Pr,Ve],function(d,p){var C=p[0],N=p[1],Q=d.properties()[C.value],ct=N.value;return typeof Q==typeof ct&&Q>=ct}],"filter-id->=":[Sr,[Ve],function(d,p){var C=p[0],N=d.id(),Q=C.value;return typeof N==typeof Q&&N>=Q}],"filter-has":[Sr,[Ve],function(d,p){return p[0].value in d.properties()}],"filter-has-id":[Sr,[],function(d){return d.id()!==null&&d.id()!==void 0}],"filter-type-in":[Sr,[mn(Pr)],function(d,p){return p[0].value.indexOf(d.geometryType())>=0}],"filter-id-in":[Sr,[mn(Ve)],function(d,p){return p[0].value.indexOf(d.id())>=0}],"filter-in-small":[Sr,[Pr,mn(Ve)],function(d,p){var C=p[0];return p[1].value.indexOf(d.properties()[C.value])>=0}],"filter-in-large":[Sr,[Pr,mn(Ve)],function(d,p){var C=p[0],N=p[1];return function(Q,ct,Tt,Bt){for(;Tt<=Bt;){var Jt=Tt+Bt>>1;if(ct[Jt]===Q)return!0;ct[Jt]>Q?Bt=Jt-1:Tt=Jt+1}return!1}(d.properties()[C.value],N.value,0,N.value.length-1)}],all:{type:Sr,overloads:[[[Sr,Sr],function(d,p){var C=p[1];return p[0].evaluate(d)&&C.evaluate(d)}],[qo(Sr),function(d,p){for(var C=0,N=p;C<N.length;C+=1)if(!N[C].evaluate(d))return!1;return!0}]]},any:{type:Sr,overloads:[[[Sr,Sr],function(d,p){var C=p[1];return p[0].evaluate(d)||C.evaluate(d)}],[qo(Sr),function(d,p){for(var C=0,N=p;C<N.length;C+=1)if(N[C].evaluate(d))return!0;return!1}]]},"!":[Sr,[Sr],function(d,p){return!p[0].evaluate(d)}],"is-supported-script":[Sr,[Pr],function(d,p){var C=d.globals&&d.globals.isSupportedScript;return!C||C(p[0].evaluate(d))}],upcase:[Pr,[Pr],function(d,p){return p[0].evaluate(d).toUpperCase()}],downcase:[Pr,[Pr],function(d,p){return p[0].evaluate(d).toLowerCase()}],concat:[Pr,qo(Ve),function(d,p){return p.map(function(C){return vs(C.evaluate(d))}).join("")}],"resolved-locale":[Pr,[En],function(d,p){return p[0].evaluate(d).resolvedLocale()}]});var ml=function(p,C){this.expression=p,this._warningHistory={},this._evaluator=new Gs,this._defaultValue=C?function(N){return N.type==="color"&&pl(N.default)?new Fr(0,0,0,0):N.type==="color"?Fr.parse(N.default)||null:N.default===void 0?null:N.default}(C):null,this._enumValues=C&&C.type==="enum"?C.values:null};function qs(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in Bo}function Bu(d,p){var C=new zo(Bo,[],p?function(Q){var ct={color:De,string:Pr,number:cn,enum:Pr,boolean:Sr,formatted:xn,resolvedImage:Nn};return Q.type==="array"?mn(ct[Q.value]||Ve,Q.length):ct[Q.type]}(p):void 0),N=C.parse(d,void 0,void 0,void 0,p&&p.type==="string"?{typeAnnotation:"coerce"}:void 0);return N?Is(new ml(N,p)):iu(C.errors)}ml.prototype.evaluateWithoutErrorHandling=function(d,p,C,N,Q,ct){return this._evaluator.globals=d,this._evaluator.feature=p,this._evaluator.featureState=C,this._evaluator.canonical=N,this._evaluator.availableImages=Q||null,this._evaluator.formattedSection=ct,this.expression.evaluate(this._evaluator)},ml.prototype.evaluate=function(d,p,C,N,Q,ct){this._evaluator.globals=d,this._evaluator.feature=p||null,this._evaluator.featureState=C||null,this._evaluator.canonical=N,this._evaluator.availableImages=Q||null,this._evaluator.formattedSection=ct||null;try{var Tt=this.expression.evaluate(this._evaluator);if(Tt==null||typeof Tt=="number"&&Tt!=Tt)return this._defaultValue;if(this._enumValues&&!(Tt in this._enumValues))throw new Do("Expected value to be one of "+Object.keys(this._enumValues).map(function(Bt){return JSON.stringify(Bt)}).join(", ")+", but found "+JSON.stringify(Tt)+" instead.");return Tt}catch(Bt){return this._warningHistory[Bt.message]||(this._warningHistory[Bt.message]=!0,typeof console!="undefined"&&console.warn(Bt.message)),this._defaultValue}};var vu=function(p,C){this.kind=p,this._styleExpression=C,this.isStateDependent=p!=="constant"&&!Ja(C.expression)};vu.prototype.evaluateWithoutErrorHandling=function(d,p,C,N,Q,ct){return this._styleExpression.evaluateWithoutErrorHandling(d,p,C,N,Q,ct)},vu.prototype.evaluate=function(d,p,C,N,Q,ct){return this._styleExpression.evaluate(d,p,C,N,Q,ct)};var pu=function(p,C,N,Q){this.kind=p,this.zoomStops=N,this._styleExpression=C,this.isStateDependent=p!=="camera"&&!Ja(C.expression),this.interpolationType=Q};function Zs(d,p){if((d=Bu(d,p)).result==="error")return d;var C=d.value.expression,N=vo(C);if(!N&&!Fo(p))return iu([new vn("","data expressions not supported")]);var Q=To(C,["zoom"]);if(!Q&&!Yu(p))return iu([new vn("","zoom expressions not supported")]);var ct=function Tt(Bt){var Jt=null;if(Bt instanceof Os)Jt=Tt(Bt.result);else if(Bt instanceof Qo)for(var ve=0,Re=Bt.args;ve<Re.length&&!(Jt=Tt(Re[ve]));ve+=1);else(Bt instanceof Ao||Bt instanceof Za)&&Bt.input instanceof Ne&&Bt.input.name==="zoom"&&(Jt=Bt);return Jt instanceof vn||Bt.eachChild(function(Ge){var He=Tt(Ge);He instanceof vn?Jt=He:!Jt&&He?Jt=new vn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Jt&&He&&Jt!==He&&(Jt=new vn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Jt}(C);return ct||Q?ct instanceof vn?iu([ct]):ct instanceof Za&&!Ys(p)?iu([new vn("",'"interpolate" expressions cannot be used with this property')]):Is(ct?new pu(N?"camera":"composite",d.value,ct.labels,ct instanceof Za?ct.interpolation:void 0):new vu(N?"constant":"source",d.value)):iu([new vn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}pu.prototype.evaluateWithoutErrorHandling=function(d,p,C,N,Q,ct){return this._styleExpression.evaluateWithoutErrorHandling(d,p,C,N,Q,ct)},pu.prototype.evaluate=function(d,p,C,N,Q,ct){return this._styleExpression.evaluate(d,p,C,N,Q,ct)},pu.prototype.interpolationFactor=function(d,p,C){return this.interpolationType?Za.interpolationFactor(this.interpolationType,d,p,C):0};var ds=function(p,C){this._parameters=p,this._specification=C,Rn(this,function N(Q,ct){var Tt,Bt,Jt,ve=ct.type==="color",Re=Q.stops&&typeof Q.stops[0][0]=="object",Ge=Re||!(Re||Q.property!==void 0),He=Q.type||(Ys(ct)?"exponential":"interval");if(ve&&((Q=Rn({},Q)).stops&&(Q.stops=Q.stops.map(function(va){return[va[0],Fr.parse(va[1])]})),Q.default=Fr.parse(Q.default?Q.default:ct.default)),Q.colorSpace&&Q.colorSpace!=="rgb"&&!Es[Q.colorSpace])throw new Error("Unknown color space: "+Q.colorSpace);if(He==="exponential")Tt=ao;else if(He==="interval")Tt=Ml;else if(He==="categorical"){Tt=Ec,Bt=Object.create(null);for(var ln=0,Ln=Q.stops;ln<Ln.length;ln+=1){var Cn=Ln[ln];Bt[Cn[0]]=Cn[1]}Jt=typeof Q.stops[0][0]}else{if(He!=="identity")throw new Error('Unknown function type "'+He+'"');Tt=Au}if(Re){for(var Kn={},Yn=[],_r=0;_r<Q.stops.length;_r++){var Nr=Q.stops[_r],Yr=Nr[0].zoom;Kn[Yr]===void 0&&(Kn[Yr]={zoom:Yr,type:Q.type,property:Q.property,default:Q.default,stops:[]},Yn.push(Yr)),Kn[Yr].stops.push([Nr[0].value,Nr[1]])}for(var vi=[],si=0,Ni=Yn;si<Ni.length;si+=1){var Fi=Ni[si];vi.push([Kn[Fi].zoom,N(Kn[Fi],ct)])}var ia={name:"linear"};return{kind:"composite",interpolationType:ia,interpolationFactor:Za.interpolationFactor.bind(void 0,ia),zoomStops:vi.map(function(va){return va[0]}),evaluate:function(qi,eo){var wa=qi.zoom;return ao({stops:vi,base:Q.base},ct,wa).evaluate(wa,eo)}}}if(Ge){var pa=He==="exponential"?{name:"exponential",base:Q.base!==void 0?Q.base:1}:null;return{kind:"camera",interpolationType:pa,interpolationFactor:Za.interpolationFactor.bind(void 0,pa),zoomStops:Q.stops.map(function(va){return va[0]}),evaluate:function(qi){return Tt(Q,ct,qi.zoom,Bt,Jt)}}}return{kind:"source",evaluate:function(qi,eo){var wa=eo&&eo.properties?eo.properties[Q.property]:void 0;return wa===void 0?gl(Q.default,ct.default):Tt(Q,ct,wa,Bt,Jt)}}}(this._parameters,this._specification))};function Ms(d){var p=d.key,C=d.value,N=d.valueSpec||{},Q=d.objectElementValidators||{},ct=d.style,Tt=d.styleSpec,Bt=[],Jt=Ka(C);if(Jt!=="object")return[new be(p,C,"object expected, "+Jt+" found")];for(var ve in C){var Re=ve.split(".")[0],Ge=N[Re]||N["*"],He=void 0;if(Q[Re])He=Q[Re];else if(N[Re])He=Da;else if(Q["*"])He=Q["*"];else{if(!N["*"]){Bt.push(new be(p,C[ve],'unknown property "'+ve+'"'));continue}He=Da}Bt=Bt.concat(He({key:(p&&p+".")+ve,value:C[ve],valueSpec:Ge,style:ct,styleSpec:Tt,object:C,objectKey:ve},C))}for(var ln in N)Q[ln]||N[ln].required&&N[ln].default===void 0&&C[ln]===void 0&&Bt.push(new be(p,C,'missing required property "'+ln+'"'));return Bt}function al(d){var p=d.value,C=d.valueSpec,N=d.style,Q=d.styleSpec,ct=d.key,Tt=d.arrayElementValidator||Da;if(Ka(p)!=="array")return[new be(ct,p,"array expected, "+Ka(p)+" found")];if(C.length&&p.length!==C.length)return[new be(ct,p,"array length "+C.length+" expected, length "+p.length+" found")];if(C["min-length"]&&p.length<C["min-length"])return[new be(ct,p,"array length at least "+C["min-length"]+" expected, length "+p.length+" found")];var Bt={type:C.value,values:C.values};Q.$version<7&&(Bt.function=C.function),Ka(C.value)==="object"&&(Bt=C.value);for(var Jt=[],ve=0;ve<p.length;ve++)Jt=Jt.concat(Tt({array:p,arrayIndex:ve,value:p[ve],valueSpec:Bt,style:N,styleSpec:Q,key:ct+"["+ve+"]"}));return Jt}function Pl(d){var p=d.key,C=d.value,N=d.valueSpec,Q=Ka(C);return Q==="number"&&C!=C&&(Q="NaN"),Q!=="number"?[new be(p,C,"number expected, "+Q+" found")]:"minimum"in N&&C<N.minimum?[new be(p,C,C+" is less than the minimum value "+N.minimum)]:"maximum"in N&&C>N.maximum?[new be(p,C,C+" is greater than the maximum value "+N.maximum)]:[]}function jl(d){var p,C,N,Q=d.valueSpec,ct=tr(d.value.type),Tt={},Bt=ct!=="categorical"&&d.value.property===void 0,Jt=!Bt,ve=Ka(d.value.stops)==="array"&&Ka(d.value.stops[0])==="array"&&Ka(d.value.stops[0][0])==="object",Re=Ms({key:d.key,value:d.value,valueSpec:d.styleSpec.function,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(Ln){if(ct==="identity")return[new be(Ln.key,Ln.value,'identity function may not have a "stops" property')];var Cn=[],Kn=Ln.value;return Cn=Cn.concat(al({key:Ln.key,value:Kn,valueSpec:Ln.valueSpec,style:Ln.style,styleSpec:Ln.styleSpec,arrayElementValidator:Ge})),Ka(Kn)==="array"&&Kn.length===0&&Cn.push(new be(Ln.key,Kn,"array must have at least one stop")),Cn},default:function(Ln){return Da({key:Ln.key,value:Ln.value,valueSpec:Q,style:Ln.style,styleSpec:Ln.styleSpec})}}});return ct==="identity"&&Bt&&Re.push(new be(d.key,d.value,'missing required property "property"')),ct==="identity"||d.value.stops||Re.push(new be(d.key,d.value,'missing required property "stops"')),ct==="exponential"&&d.valueSpec.expression&&!Ys(d.valueSpec)&&Re.push(new be(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(Jt&&!Fo(d.valueSpec)?Re.push(new be(d.key,d.value,"property functions not supported")):Bt&&!Yu(d.valueSpec)&&Re.push(new be(d.key,d.value,"zoom functions not supported"))),ct!=="categorical"&&!ve||d.value.property!==void 0||Re.push(new be(d.key,d.value,'"property" property is required')),Re;function Ge(ln){var Ln=[],Cn=ln.value,Kn=ln.key;if(Ka(Cn)!=="array")return[new be(Kn,Cn,"array expected, "+Ka(Cn)+" found")];if(Cn.length!==2)return[new be(Kn,Cn,"array length 2 expected, length "+Cn.length+" found")];if(ve){if(Ka(Cn[0])!=="object")return[new be(Kn,Cn,"object expected, "+Ka(Cn[0])+" found")];if(Cn[0].zoom===void 0)return[new be(Kn,Cn,"object stop key must have zoom")];if(Cn[0].value===void 0)return[new be(Kn,Cn,"object stop key must have value")];if(N&&N>tr(Cn[0].zoom))return[new be(Kn,Cn[0].zoom,"stop zoom values must appear in ascending order")];tr(Cn[0].zoom)!==N&&(N=tr(Cn[0].zoom),C=void 0,Tt={}),Ln=Ln.concat(Ms({key:Kn+"[0]",value:Cn[0],valueSpec:{zoom:{}},style:ln.style,styleSpec:ln.styleSpec,objectElementValidators:{zoom:Pl,value:He}}))}else Ln=Ln.concat(He({key:Kn+"[0]",value:Cn[0],valueSpec:{},style:ln.style,styleSpec:ln.styleSpec},Cn));return qs(Mn(Cn[1]))?Ln.concat([new be(Kn+"[1]",Cn[1],"expressions are not allowed in function stops.")]):Ln.concat(Da({key:Kn+"[1]",value:Cn[1],valueSpec:Q,style:ln.style,styleSpec:ln.styleSpec}))}function He(ln,Ln){var Cn=Ka(ln.value),Kn=tr(ln.value),Yn=ln.value!==null?ln.value:Ln;if(p){if(Cn!==p)return[new be(ln.key,Yn,Cn+" stop domain type must match previous stop domain type "+p)]}else p=Cn;if(Cn!=="number"&&Cn!=="string"&&Cn!=="boolean")return[new be(ln.key,Yn,"stop domain value must be a number, string, or boolean")];if(Cn!=="number"&&ct!=="categorical"){var _r="number expected, "+Cn+" found";return Fo(Q)&&ct===void 0&&(_r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new be(ln.key,Yn,_r)]}return ct!=="categorical"||Cn!=="number"||isFinite(Kn)&&Math.floor(Kn)===Kn?ct!=="categorical"&&Cn==="number"&&C!==void 0&&Kn<C?[new be(ln.key,Yn,"stop domain values must appear in ascending order")]:(C=Kn,ct==="categorical"&&Kn in Tt?[new be(ln.key,Yn,"stop domain values must be unique")]:(Tt[Kn]=!0,[])):[new be(ln.key,Yn,"integer expected, found "+Kn)]}}function Nu(d){var p=(d.expressionContext==="property"?Zs:Bu)(Mn(d.value),d.valueSpec);if(p.result==="error")return p.value.map(function(N){return new be(""+d.key+N.key,d.value,N.message)});var C=p.value.expression||p.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!C.outputDefined())return[new be(d.key,d.value,'Invalid data expression for "'+d.propertyKey+'". Output values must be contained as literals within the expression.')];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!Ja(C))return[new be(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!Ja(C))return[new be(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!To(C,["zoom","feature-state"]))return[new be(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!vo(C))return[new be(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Zu(d){var p=d.key,C=d.value,N=d.valueSpec,Q=[];return Array.isArray(N.values)?N.values.indexOf(tr(C))===-1&&Q.push(new be(p,C,"expected one of ["+N.values.join(", ")+"], "+JSON.stringify(C)+" found")):Object.keys(N.values).indexOf(tr(C))===-1&&Q.push(new be(p,C,"expected one of ["+Object.keys(N.values).join(", ")+"], "+JSON.stringify(C)+" found")),Q}function ol(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(var p=0,C=d.slice(1);p<C.length;p+=1){var N=C[p];if(!ol(N)&&typeof N!="boolean")return!1}return!0;default:return!0}}ds.deserialize=function(d){return new ds(d._parameters,d._specification)},ds.serialize=function(d){return{_parameters:d._parameters,_specification:d._specification}};var gu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function au(d){if(d==null)return{filter:function(){return!0},needGeometry:!1};ol(d)||(d=Ls(d));var p=Bu(d,gu);if(p.result==="error")throw new Error(p.value.map(function(C){return C.key+": "+C.message}).join(", "));return{filter:function(N,Q,ct){return p.value.evaluate(N,Q,{},ct)},needGeometry:function C(N){if(!Array.isArray(N))return!1;if(N[0]==="within")return!0;for(var Q=1;Q<N.length;Q++)if(C(N[Q]))return!0;return!1}(d)}}function Ku(d,p){return d<p?-1:d>p?1:0}function Ls(d){if(!d)return!0;var p,C=d[0];return d.length<=1?C!=="any":C==="=="?yl(d[1],d[2],"=="):C==="!="?Bl(yl(d[1],d[2],"==")):C==="<"||C===">"||C==="<="||C===">="?yl(d[1],d[2],C):C==="any"?(p=d.slice(1),["any"].concat(p.map(Ls))):C==="all"?["all"].concat(d.slice(1).map(Ls)):C==="none"?["all"].concat(d.slice(1).map(Ls).map(Bl)):C==="in"?ic(d[1],d.slice(2)):C==="!in"?Bl(ic(d[1],d.slice(2))):C==="has"?Tl(d[1]):C==="!has"?Bl(Tl(d[1])):C!=="within"||d}function yl(d,p,C){switch(d){case"$type":return["filter-type-"+C,p];case"$id":return["filter-id-"+C,p];default:return["filter-"+C,d,p]}}function ic(d,p){if(p.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",p]];case"$id":return["filter-id-in",["literal",p]];default:return p.length>200&&!p.some(function(C){return typeof C!=typeof p[0]})?["filter-in-large",d,["literal",p.sort(Ku)]]:["filter-in-small",d,["literal",p]]}}function Tl(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function Bl(d){return["!",d]}function Vl(d){return ol(Mn(d.value))?Nu(Rn({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function p(C){var N=C.value,Q=C.key;if(Ka(N)!=="array")return[new be(Q,N,"array expected, "+Ka(N)+" found")];var ct,Tt=C.styleSpec,Bt=[];if(N.length<1)return[new be(Q,N,"filter array must have at least 1 element")];switch(Bt=Bt.concat(Zu({key:Q+"[0]",value:N[0],valueSpec:Tt.filter_operator,style:C.style,styleSpec:C.styleSpec})),tr(N[0])){case"<":case"<=":case">":case">=":N.length>=2&&tr(N[1])==="$type"&&Bt.push(new be(Q,N,'"$type" cannot be use with operator "'+N[0]+'"'));case"==":case"!=":N.length!==3&&Bt.push(new be(Q,N,'filter array for operator "'+N[0]+'" must have 3 elements'));case"in":case"!in":N.length>=2&&(ct=Ka(N[1]))!=="string"&&Bt.push(new be(Q+"[1]",N[1],"string expected, "+ct+" found"));for(var Jt=2;Jt<N.length;Jt++)ct=Ka(N[Jt]),tr(N[1])==="$type"?Bt=Bt.concat(Zu({key:Q+"["+Jt+"]",value:N[Jt],valueSpec:Tt.geometry_type,style:C.style,styleSpec:C.styleSpec})):ct!=="string"&&ct!=="number"&&ct!=="boolean"&&Bt.push(new be(Q+"["+Jt+"]",N[Jt],"string, number, or boolean expected, "+ct+" found"));break;case"any":case"all":case"none":for(var ve=1;ve<N.length;ve++)Bt=Bt.concat(p({key:Q+"["+ve+"]",value:N[ve],style:C.style,styleSpec:C.styleSpec}));break;case"has":case"!has":ct=Ka(N[1]),N.length!==2?Bt.push(new be(Q,N,'filter array for "'+N[0]+'" operator must have 2 elements')):ct!=="string"&&Bt.push(new be(Q+"[1]",N[1],"string expected, "+ct+" found"));break;case"within":ct=Ka(N[1]),N.length!==2?Bt.push(new be(Q,N,'filter array for "'+N[0]+'" operator must have 2 elements')):ct!=="object"&&Bt.push(new be(Q+"[1]",N[1],"object expected, "+ct+" found"))}return Bt}(d)}function pc(d,p){var C=d.key,N=d.style,Q=d.styleSpec,ct=d.value,Tt=d.objectKey,Bt=Q[p+"_"+d.layerType];if(!Bt)return[];var Jt=Tt.match(/^(.*)-transition$/);if(p==="paint"&&Jt&&Bt[Jt[1]]&&Bt[Jt[1]].transition)return Da({key:C,value:ct,valueSpec:Q.transition,style:N,styleSpec:Q});var ve,Re=d.valueSpec||Bt[Tt];if(!Re)return[new be(C,ct,'unknown property "'+Tt+'"')];if(Ka(ct)==="string"&&Fo(Re)&&!Re.tokens&&(ve=/^{([^}]+)}$/.exec(ct)))return[new be(C,ct,'"'+Tt+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(ve[1])+" }`.")];var Ge=[];return d.layerType==="symbol"&&(Tt==="text-field"&&N&&!N.glyphs&&Ge.push(new be(C,ct,'use of "text-field" requires a style "glyphs" property')),Tt==="text-font"&&pl(Mn(ct))&&tr(ct.type)==="identity"&&Ge.push(new be(C,ct,'"text-font" does not support identity functions'))),Ge.concat(Da({key:d.key,value:ct,valueSpec:Re,style:N,styleSpec:Q,expressionContext:"property",propertyType:p,propertyKey:Tt}))}function Xu(d){return pc(d,"paint")}function Al(d){return pc(d,"layout")}function Nl(d){var p=[],C=d.value,N=d.key,Q=d.style,ct=d.styleSpec;C.type||C.ref||p.push(new be(N,C,'either "type" or "ref" is required'));var Tt,Bt=tr(C.type),Jt=tr(C.ref);if(C.id)for(var ve=tr(C.id),Re=0;Re<d.arrayIndex;Re++){var Ge=Q.layers[Re];tr(Ge.id)===ve&&p.push(new be(N,C.id,'duplicate layer id "'+C.id+'", previously used at line '+Ge.id.__line__))}if("ref"in C)["type","source","source-layer","filter","layout"].forEach(function(Ln){Ln in C&&p.push(new be(N,C[Ln],'"'+Ln+'" is prohibited for ref layers'))}),Q.layers.forEach(function(Ln){tr(Ln.id)===Jt&&(Tt=Ln)}),Tt?Tt.ref?p.push(new be(N,C.ref,"ref cannot reference another ref layer")):Bt=tr(Tt.type):p.push(new be(N,C.ref,'ref layer "'+Jt+'" not found'));else if(Bt!=="background")if(C.source){var He=Q.sources&&Q.sources[C.source],ln=He&&tr(He.type);He?ln==="vector"&&Bt==="raster"?p.push(new be(N,C.source,'layer "'+C.id+'" requires a raster source')):ln==="raster"&&Bt!=="raster"?p.push(new be(N,C.source,'layer "'+C.id+'" requires a vector source')):ln!=="vector"||C["source-layer"]?ln==="raster-dem"&&Bt!=="hillshade"?p.push(new be(N,C.source,"raster-dem source can only be used with layer type 'hillshade'.")):Bt!=="line"||!C.paint||!C.paint["line-gradient"]||ln==="geojson"&&He.lineMetrics||p.push(new be(N,C,'layer "'+C.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):p.push(new be(N,C,'layer "'+C.id+'" must specify a "source-layer"')):p.push(new be(N,C.source,'source "'+C.source+'" not found'))}else p.push(new be(N,C,'missing required property "source"'));return p=p.concat(Ms({key:N,value:C,valueSpec:ct.layer,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Da({key:N+".type",value:C.type,valueSpec:ct.layer.type,style:d.style,styleSpec:d.styleSpec,object:C,objectKey:"type"})},filter:Vl,layout:function(Cn){return Ms({layer:C,key:Cn.key,value:Cn.value,style:Cn.style,styleSpec:Cn.styleSpec,objectElementValidators:{"*":function(Yn){return Al(Rn({layerType:Bt},Yn))}}})},paint:function(Cn){return Ms({layer:C,key:Cn.key,value:Cn.value,style:Cn.style,styleSpec:Cn.styleSpec,objectElementValidators:{"*":function(Yn){return Xu(Rn({layerType:Bt},Yn))}}})}}}))}function Oo(d){var p=d.value,C=d.key,N=Ka(p);return N!=="string"?[new be(C,p,"string expected, "+N+" found")]:[]}var go={promoteId:function(p){var C=p.key,N=p.value;if(Ka(N)==="string")return Oo({key:C,value:N});var Q=[];for(var ct in N)Q.push.apply(Q,Oo({key:C+"."+ct,value:N[ct]}));return Q}};function xl(d){var p=d.value,C=d.key,N=d.styleSpec,Q=d.style;if(!p.type)return[new be(C,p,'"type" is required')];var ct,Tt=tr(p.type);switch(Tt){case"vector":case"raster":case"raster-dem":return Ms({key:C,value:p,valueSpec:N["source_"+Tt.replace("-","_")],style:d.style,styleSpec:N,objectElementValidators:go});case"geojson":if(ct=Ms({key:C,value:p,valueSpec:N.source_geojson,style:Q,styleSpec:N,objectElementValidators:go}),p.cluster)for(var Bt in p.clusterProperties){var Jt=p.clusterProperties[Bt],ve=Jt[0],Re=typeof ve=="string"?[ve,["accumulated"],["get",Bt]]:ve;ct.push.apply(ct,Nu({key:C+"."+Bt+".map",value:Jt[1],expressionContext:"cluster-map"})),ct.push.apply(ct,Nu({key:C+"."+Bt+".reduce",value:Re,expressionContext:"cluster-reduce"}))}return ct;case"video":return Ms({key:C,value:p,valueSpec:N.source_video,style:Q,styleSpec:N});case"image":return Ms({key:C,value:p,valueSpec:N.source_image,style:Q,styleSpec:N});case"canvas":return[new be(C,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Zu({key:C+".type",value:p.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Q,styleSpec:N})}}function sl(d){var p=d.value,C=d.styleSpec,N=C.light,Q=d.style,ct=[],Tt=Ka(p);if(p===void 0)return ct;if(Tt!=="object")return ct.concat([new be("light",p,"object expected, "+Tt+" found")]);for(var Bt in p){var Jt=Bt.match(/^(.*)-transition$/);ct=ct.concat(Jt&&N[Jt[1]]&&N[Jt[1]].transition?Da({key:Bt,value:p[Bt],valueSpec:C.transition,style:Q,styleSpec:C}):N[Bt]?Da({key:Bt,value:p[Bt],valueSpec:N[Bt],style:Q,styleSpec:C}):[new be(Bt,p[Bt],'unknown property "'+Bt+'"')])}return ct}var Vs={"*":function(){return[]},array:al,boolean:function(p){var C=p.value,N=p.key,Q=Ka(C);return Q!=="boolean"?[new be(N,C,"boolean expected, "+Q+" found")]:[]},number:Pl,color:function(p){var C=p.key,N=p.value,Q=Ka(N);return Q!=="string"?[new be(C,N,"color expected, "+Q+" found")]:mr(N)===null?[new be(C,N,'color expected, "'+N+'" found')]:[]},constants:Xe,enum:Zu,filter:Vl,function:jl,layer:Nl,object:Ms,source:xl,light:sl,string:Oo,formatted:function(p){return Oo(p).length===0?[]:Nu(p)},resolvedImage:function(p){return Oo(p).length===0?[]:Nu(p)}};function Da(d){var p=d.value,C=d.valueSpec,N=d.styleSpec;return C.expression&&pl(tr(p))?jl(d):C.expression&&qs(Mn(p))?Nu(d):C.type&&Vs[C.type]?Vs[C.type](d):Ms(Rn({},d,{valueSpec:C.type?N[C.type]:C}))}function bo(d){var p=d.value,C=d.key,N=Oo(d);return N.length||(p.indexOf("{fontstack}")===-1&&N.push(new be(C,p,'"glyphs" url must include a "{fontstack}" token')),p.indexOf("{range}")===-1&&N.push(new be(C,p,'"glyphs" url must include a "{range}" token'))),N}function Ns(d,p){p===void 0&&(p=ue);var C=[];return C=C.concat(Da({key:"",value:d,valueSpec:p.$root,styleSpec:p,style:d,objectElementValidators:{glyphs:bo,"*":function(){return[]}}})),d.constants&&(C=C.concat(Xe({key:"constants",value:d.constants,style:d,styleSpec:p}))),Cl(C)}function Cl(d){return[].concat(d).sort(function(p,C){return p.line-C.line})}function ul(d){return function(){for(var p=[],C=arguments.length;C--;)p[C]=arguments[C];return Cl(d.apply(this,p))}}Ns.source=ul(xl),Ns.light=ul(sl),Ns.layer=ul(Nl),Ns.filter=ul(Vl),Ns.paintProperty=ul(Xu),Ns.layoutProperty=ul(Al);var Ju=Ns,Sc=Ju.light,Wl=Ju.paintProperty,$u=Ju.layoutProperty;function tu(d,p){var C=!1;if(p&&p.length)for(var N=0,Q=p;N<Q.length;N+=1)d.fire(new re(new Error(Q[N].message))),C=!0;return C}var Ws=is;function is(d,p,C){var N=this.cells=[];if(d instanceof ArrayBuffer){this.arrayBuffer=d;var Q=new Int32Array(this.arrayBuffer);d=Q[0],this.d=(p=Q[1])+2*(C=Q[2]);for(var ct=0;ct<this.d*this.d;ct++){var Tt=Q[3+ct],Bt=Q[3+ct+1];N.push(Tt===Bt?null:Q.subarray(Tt,Bt))}var Jt=Q[3+N.length+1];this.keys=Q.subarray(Q[3+N.length],Jt),this.bboxes=Q.subarray(Jt),this.insert=this._insertReadonly}else{this.d=p+2*C;for(var ve=0;ve<this.d*this.d;ve++)N.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=d,this.padding=C,this.scale=p/d,this.uid=0;var Re=C/p*d;this.min=-Re,this.max=d+Re}is.prototype.insert=function(d,p,C,N,Q){this._forEachCell(p,C,N,Q,this._insertCell,this.uid++),this.keys.push(d),this.bboxes.push(p),this.bboxes.push(C),this.bboxes.push(N),this.bboxes.push(Q)},is.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},is.prototype._insertCell=function(d,p,C,N,Q,ct){this.cells[Q].push(ct)},is.prototype.query=function(d,p,C,N,Q){var ct=this.min,Tt=this.max;if(d<=ct&&p<=ct&&Tt<=C&&Tt<=N&&!Q)return Array.prototype.slice.call(this.keys);var Bt=[];return this._forEachCell(d,p,C,N,this._queryCell,Bt,{},Q),Bt},is.prototype._queryCell=function(d,p,C,N,Q,ct,Tt,Bt){var Jt=this.cells[Q];if(Jt!==null)for(var ve=this.keys,Re=this.bboxes,Ge=0;Ge<Jt.length;Ge++){var He=Jt[Ge];if(Tt[He]===void 0){var ln=4*He;(Bt?Bt(Re[ln+0],Re[ln+1],Re[ln+2],Re[ln+3]):d<=Re[ln+2]&&p<=Re[ln+3]&&C>=Re[ln+0]&&N>=Re[ln+1])?(Tt[He]=!0,ct.push(ve[He])):Tt[He]=!1}}},is.prototype._forEachCell=function(d,p,C,N,Q,ct,Tt,Bt){for(var Jt=this._convertToCellCoord(d),ve=this._convertToCellCoord(p),Re=this._convertToCellCoord(C),Ge=this._convertToCellCoord(N),He=Jt;He<=Re;He++)for(var ln=ve;ln<=Ge;ln++){var Ln=this.d*ln+He;if((!Bt||Bt(this._convertFromCellCoord(He),this._convertFromCellCoord(ln),this._convertFromCellCoord(He+1),this._convertFromCellCoord(ln+1)))&&Q.call(this,d,p,C,N,Ln,ct,Tt,Bt))return}},is.prototype._convertFromCellCoord=function(d){return(d-this.padding)/this.scale},is.prototype._convertToCellCoord=function(d){return Math.max(0,Math.min(this.d-1,Math.floor(d*this.scale)+this.padding))},is.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var d=this.cells,p=3+this.cells.length+1+1,C=0,N=0;N<this.cells.length;N++)C+=this.cells[N].length;var Q=new Int32Array(p+C+this.keys.length+this.bboxes.length);Q[0]=this.extent,Q[1]=this.n,Q[2]=this.padding;for(var ct=p,Tt=0;Tt<d.length;Tt++){var Bt=d[Tt];Q[3+Tt]=ct,Q.set(Bt,ct),ct+=Bt.length}return Q[3+d.length]=ct,Q.set(this.keys,ct),Q[3+d.length+1]=ct+=this.keys.length,Q.set(this.bboxes,ct),ct+=this.bboxes.length,Q.buffer};var eu=n.ImageData,Fu=n.ImageBitmap,us={};function Wi(d,p,C){C===void 0&&(C={}),Object.defineProperty(p,"_classRegistryKey",{value:d,writeable:!1}),us[d]={klass:p,omit:C.omit||[],shallow:C.shallow||[]}}for(var js in Wi("Object",Object),Ws.serialize=function(d,p){var C=d.toArrayBuffer();return p&&p.push(C),{buffer:C}},Ws.deserialize=function(d){return new Ws(d.buffer)},Wi("Grid",Ws),Wi("Color",Fr),Wi("Error",Error),Wi("ResolvedImage",to),Wi("StylePropertyFunction",ds),Wi("StyleExpression",ml,{omit:["_evaluator"]}),Wi("ZoomDependentExpression",pu),Wi("ZoomConstantExpression",vu),Wi("CompoundExpression",Ne,{omit:["_evaluate"]}),Bo)Bo[js]._classRegistryKey||Wi("Expression_"+js,Bo[js]);function Qu(d){return d&&typeof ArrayBuffer!="undefined"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function zu(d){return Fu&&d instanceof Fu}function Uo(d,p){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp)return d;if(Qu(d)||zu(d))return p&&p.push(d),d;if(ArrayBuffer.isView(d)){var C=d;return p&&p.push(C.buffer),C}if(d instanceof eu)return p&&p.push(d.data.buffer),d;if(Array.isArray(d)){for(var N=[],Q=0,ct=d;Q<ct.length;Q+=1)N.push(Uo(ct[Q],p));return N}if(typeof d=="object"){var Tt=d.constructor,Bt=Tt._classRegistryKey;if(!Bt)throw new Error("can't serialize object of unregistered class");var Jt=Tt.serialize?Tt.serialize(d,p):{};if(!Tt.serialize){for(var ve in d)if(d.hasOwnProperty(ve)&&!(us[Bt].omit.indexOf(ve)>=0)){var Re=d[ve];Jt[ve]=us[Bt].shallow.indexOf(ve)>=0?Re:Uo(Re,p)}d instanceof Error&&(Jt.message=d.message)}if(Jt.$name)throw new Error("$name property is reserved for worker serialization logic.");return Bt!=="Object"&&(Jt.$name=Bt),Jt}throw new Error("can't serialize object of type "+typeof d)}function Wo(d){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||Qu(d)||zu(d)||ArrayBuffer.isView(d)||d instanceof eu)return d;if(Array.isArray(d))return d.map(Wo);if(typeof d=="object"){var p=d.$name||"Object",C=us[p].klass;if(!C)throw new Error("can't deserialize unregistered class "+p);if(C.deserialize)return C.deserialize(d);for(var N=Object.create(C.prototype),Q=0,ct=Object.keys(d);Q<ct.length;Q+=1){var Tt=ct[Q];if(Tt!=="$name"){var Bt=d[Tt];N[Tt]=us[p].shallow.indexOf(Tt)>=0?Bt:Wo(Bt)}}return N}throw new Error("can't deserialize object of type "+typeof d)}var mu=function(){this.first=!0};mu.prototype.update=function(d,p){var C=Math.floor(d);return this.first?(this.first=!1,this.lastIntegerZoom=C,this.lastIntegerZoomTime=0,this.lastZoom=d,this.lastFloorZoom=C,!0):(this.lastFloorZoom>C?(this.lastIntegerZoom=C+1,this.lastIntegerZoomTime=p):this.lastFloorZoom<C&&(this.lastIntegerZoom=C,this.lastIntegerZoomTime=p),d!==this.lastZoom&&(this.lastZoom=d,this.lastFloorZoom=C,!0))};var _i={"Latin-1 Supplement":function(p){return p>=128&&p<=255},Arabic:function(p){return p>=1536&&p<=1791},"Arabic Supplement":function(p){return p>=1872&&p<=1919},"Arabic Extended-A":function(p){return p>=2208&&p<=2303},"Hangul Jamo":function(p){return p>=4352&&p<=4607},"Unified Canadian Aboriginal Syllabics":function(p){return p>=5120&&p<=5759},Khmer:function(p){return p>=6016&&p<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(p){return p>=6320&&p<=6399},"General Punctuation":function(p){return p>=8192&&p<=8303},"Letterlike Symbols":function(p){return p>=8448&&p<=8527},"Number Forms":function(p){return p>=8528&&p<=8591},"Miscellaneous Technical":function(p){return p>=8960&&p<=9215},"Control Pictures":function(p){return p>=9216&&p<=9279},"Optical Character Recognition":function(p){return p>=9280&&p<=9311},"Enclosed Alphanumerics":function(p){return p>=9312&&p<=9471},"Geometric Shapes":function(p){return p>=9632&&p<=9727},"Miscellaneous Symbols":function(p){return p>=9728&&p<=9983},"Miscellaneous Symbols and Arrows":function(p){return p>=11008&&p<=11263},"CJK Radicals Supplement":function(p){return p>=11904&&p<=12031},"Kangxi Radicals":function(p){return p>=12032&&p<=12255},"Ideographic Description Characters":function(p){return p>=12272&&p<=12287},"CJK Symbols and Punctuation":function(p){return p>=12288&&p<=12351},Hiragana:function(p){return p>=12352&&p<=12447},Katakana:function(p){return p>=12448&&p<=12543},Bopomofo:function(p){return p>=12544&&p<=12591},"Hangul Compatibility Jamo":function(p){return p>=12592&&p<=12687},Kanbun:function(p){return p>=12688&&p<=12703},"Bopomofo Extended":function(p){return p>=12704&&p<=12735},"CJK Strokes":function(p){return p>=12736&&p<=12783},"Katakana Phonetic Extensions":function(p){return p>=12784&&p<=12799},"Enclosed CJK Letters and Months":function(p){return p>=12800&&p<=13055},"CJK Compatibility":function(p){return p>=13056&&p<=13311},"CJK Unified Ideographs Extension A":function(p){return p>=13312&&p<=19903},"Yijing Hexagram Symbols":function(p){return p>=19904&&p<=19967},"CJK Unified Ideographs":function(p){return p>=19968&&p<=40959},"Yi Syllables":function(p){return p>=40960&&p<=42127},"Yi Radicals":function(p){return p>=42128&&p<=42191},"Hangul Jamo Extended-A":function(p){return p>=43360&&p<=43391},"Hangul Syllables":function(p){return p>=44032&&p<=55215},"Hangul Jamo Extended-B":function(p){return p>=55216&&p<=55295},"Private Use Area":function(p){return p>=57344&&p<=63743},"CJK Compatibility Ideographs":function(p){return p>=63744&&p<=64255},"Arabic Presentation Forms-A":function(p){return p>=64336&&p<=65023},"Vertical Forms":function(p){return p>=65040&&p<=65055},"CJK Compatibility Forms":function(p){return p>=65072&&p<=65103},"Small Form Variants":function(p){return p>=65104&&p<=65135},"Arabic Presentation Forms-B":function(p){return p>=65136&&p<=65279},"Halfwidth and Fullwidth Forms":function(p){return p>=65280&&p<=65519}};function yu(d){for(var p=0,C=d;p<C.length;p+=1)if(Cu(C[p].charCodeAt(0)))return!0;return!1}function Cu(d){return!(d!==746&&d!==747&&(d<4352||!(_i["Bopomofo Extended"](d)||_i.Bopomofo(d)||_i["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||_i["CJK Compatibility Ideographs"](d)||_i["CJK Compatibility"](d)||_i["CJK Radicals Supplement"](d)||_i["CJK Strokes"](d)||!(!_i["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||_i["CJK Unified Ideographs Extension A"](d)||_i["CJK Unified Ideographs"](d)||_i["Enclosed CJK Letters and Months"](d)||_i["Hangul Compatibility Jamo"](d)||_i["Hangul Jamo Extended-A"](d)||_i["Hangul Jamo Extended-B"](d)||_i["Hangul Jamo"](d)||_i["Hangul Syllables"](d)||_i.Hiragana(d)||_i["Ideographic Description Characters"](d)||_i.Kanbun(d)||_i["Kangxi Radicals"](d)||_i["Katakana Phonetic Extensions"](d)||_i.Katakana(d)&&d!==12540||!(!_i["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!_i["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||_i["Unified Canadian Aboriginal Syllabics"](d)||_i["Unified Canadian Aboriginal Syllabics Extended"](d)||_i["Vertical Forms"](d)||_i["Yijing Hexagram Symbols"](d)||_i["Yi Syllables"](d)||_i["Yi Radicals"](d))))}function Ou(d){return!(Cu(d)||function(p){return!!(_i["Latin-1 Supplement"](p)&&(p===167||p===169||p===174||p===177||p===188||p===189||p===190||p===215||p===247)||_i["General Punctuation"](p)&&(p===8214||p===8224||p===8225||p===8240||p===8241||p===8251||p===8252||p===8258||p===8263||p===8264||p===8265||p===8273)||_i["Letterlike Symbols"](p)||_i["Number Forms"](p)||_i["Miscellaneous Technical"](p)&&(p>=8960&&p<=8967||p>=8972&&p<=8991||p>=8996&&p<=9e3||p===9003||p>=9085&&p<=9114||p>=9150&&p<=9165||p===9167||p>=9169&&p<=9179||p>=9186&&p<=9215)||_i["Control Pictures"](p)&&p!==9251||_i["Optical Character Recognition"](p)||_i["Enclosed Alphanumerics"](p)||_i["Geometric Shapes"](p)||_i["Miscellaneous Symbols"](p)&&!(p>=9754&&p<=9759)||_i["Miscellaneous Symbols and Arrows"](p)&&(p>=11026&&p<=11055||p>=11088&&p<=11097||p>=11192&&p<=11243)||_i["CJK Symbols and Punctuation"](p)||_i.Katakana(p)||_i["Private Use Area"](p)||_i["CJK Compatibility Forms"](p)||_i["Small Form Variants"](p)||_i["Halfwidth and Fullwidth Forms"](p)||p===8734||p===8756||p===8757||p>=9984&&p<=10087||p>=10102&&p<=10131||p===65532||p===65533)}(d))}function Ks(d){return d>=1424&&d<=2303||_i["Arabic Presentation Forms-A"](d)||_i["Arabic Presentation Forms-B"](d)}function we(d,p){return!(!p&&Ks(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||_i.Khmer(d))}function Pe(d){for(var p=0,C=d;p<C.length;p+=1)if(Ks(C[p].charCodeAt(0)))return!0;return!1}var hn=null,tn="unavailable",On=null,hr=function(p){p&&typeof p=="string"&&p.indexOf("NetworkError")>-1&&(tn="error"),hn&&hn(p)};function Rr(){Xr.fire(new Wt("pluginStateChange",{pluginStatus:tn,pluginURL:On}))}var Xr=new Te,ni=function(){return tn},zr=function(){if(tn!=="deferred"||!On)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");tn="loading",Rr(),On&&gr({url:On},function(p){p?hr(p):(tn="loaded",Rr())})},li={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return tn==="loaded"||li.applyArabicShaping!=null},isLoading:function(){return tn==="loading"},setState:function(p){tn=p.pluginStatus,On=p.pluginURL},isParsed:function(){return li.applyArabicShaping!=null&&li.processBidirectionalText!=null&&li.processStyledBidirectionalText!=null},getPluginURL:function(){return On}},yr=function(p,C){this.zoom=p,C?(this.now=C.now,this.fadeDuration=C.fadeDuration,this.zoomHistory=C.zoomHistory,this.transition=C.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new mu,this.transition={})};yr.prototype.isSupportedScript=function(d){return function(p,C){for(var N=0,Q=p;N<Q.length;N+=1)if(!we(Q[N].charCodeAt(0),C))return!1;return!0}(d,li.isLoaded())},yr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},yr.prototype.getCrossfadeParameters=function(){var d=this.zoom,p=d-Math.floor(d),C=this.crossFadingFactor();return d>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:p+(1-p)*C}:{fromScale:.5,toScale:1,t:1-(1-C)*p}};var Kt=function(p,C){this.property=p,this.value=C,this.expression=function(N,Q){if(pl(N))return new ds(N,Q);if(qs(N)){var ct=Zs(N,Q);if(ct.result==="error")throw new Error(ct.value.map(function(Bt){return Bt.key+": "+Bt.message}).join(", "));return ct.value}var Tt=N;return typeof N=="string"&&Q.type==="color"&&(Tt=Fr.parse(N)),{kind:"constant",evaluate:function(){return Tt}}}(C===void 0?p.specification.default:C,p.specification)};Kt.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Kt.prototype.possiblyEvaluate=function(d,p,C){return this.property.possiblyEvaluate(this,d,p,C)};var te=function(p){this.property=p,this.value=new Kt(p,void 0)};te.prototype.transitioned=function(d,p){return new Se(this.property,this.value,p,v({},d.transition,this.transition),d.now)},te.prototype.untransitioned=function(){return new Se(this.property,this.value,null,{},0)};var Le=function(p){this._properties=p,this._values=Object.create(p.defaultTransitionablePropertyValues)};Le.prototype.getValue=function(d){return P(this._values[d].value.value)},Le.prototype.setValue=function(d,p){this._values.hasOwnProperty(d)||(this._values[d]=new te(this._values[d].property)),this._values[d].value=new Kt(this._values[d].property,p===null?void 0:P(p))},Le.prototype.getTransition=function(d){return P(this._values[d].transition)},Le.prototype.setTransition=function(d,p){this._values.hasOwnProperty(d)||(this._values[d]=new te(this._values[d].property)),this._values[d].transition=P(p)||void 0},Le.prototype.serialize=function(){for(var d={},p=0,C=Object.keys(this._values);p<C.length;p+=1){var N=C[p],Q=this.getValue(N);Q!==void 0&&(d[N]=Q);var ct=this.getTransition(N);ct!==void 0&&(d[N+"-transition"]=ct)}return d},Le.prototype.transitioned=function(d,p){for(var C=new Dt(this._properties),N=0,Q=Object.keys(this._values);N<Q.length;N+=1){var ct=Q[N];C._values[ct]=this._values[ct].transitioned(d,p._values[ct])}return C},Le.prototype.untransitioned=function(){for(var d=new Dt(this._properties),p=0,C=Object.keys(this._values);p<C.length;p+=1){var N=C[p];d._values[N]=this._values[N].untransitioned()}return d};var Se=function(p,C,N,Q,ct){this.property=p,this.value=C,this.begin=ct+Q.delay||0,this.end=this.begin+Q.duration||0,p.specification.transition&&(Q.delay||Q.duration)&&(this.prior=N)};Se.prototype.possiblyEvaluate=function(d,p,C){var N=d.now||0,Q=this.value.possiblyEvaluate(d,p,C),ct=this.prior;if(ct){if(N>this.end)return this.prior=null,Q;if(this.value.isDataDriven())return this.prior=null,Q;if(N<this.begin)return ct.possiblyEvaluate(d,p,C);var Tt=(N-this.begin)/(this.end-this.begin);return this.property.interpolate(ct.possiblyEvaluate(d,p,C),Q,function(Bt){if(Bt<=0)return 0;if(Bt>=1)return 1;var Jt=Bt*Bt,ve=Jt*Bt;return 4*(Bt<.5?ve:3*(Bt-Jt)+ve-.75)}(Tt))}return Q};var Dt=function(p){this._properties=p,this._values=Object.create(p.defaultTransitioningPropertyValues)};Dt.prototype.possiblyEvaluate=function(d,p,C){for(var N=new ne(this._properties),Q=0,ct=Object.keys(this._values);Q<ct.length;Q+=1){var Tt=ct[Q];N._values[Tt]=this._values[Tt].possiblyEvaluate(d,p,C)}return N},Dt.prototype.hasTransition=function(){for(var d=0,p=Object.keys(this._values);d<p.length;d+=1)if(this._values[p[d]].prior)return!0;return!1};var zt=function(p){this._properties=p,this._values=Object.create(p.defaultPropertyValues)};zt.prototype.getValue=function(d){return P(this._values[d].value)},zt.prototype.setValue=function(d,p){this._values[d]=new Kt(this._values[d].property,p===null?void 0:P(p))},zt.prototype.serialize=function(){for(var d={},p=0,C=Object.keys(this._values);p<C.length;p+=1){var N=C[p],Q=this.getValue(N);Q!==void 0&&(d[N]=Q)}return d},zt.prototype.possiblyEvaluate=function(d,p,C){for(var N=new ne(this._properties),Q=0,ct=Object.keys(this._values);Q<ct.length;Q+=1){var Tt=ct[Q];N._values[Tt]=this._values[Tt].possiblyEvaluate(d,p,C)}return N};var oe=function(p,C,N){this.property=p,this.value=C,this.parameters=N};oe.prototype.isConstant=function(){return this.value.kind==="constant"},oe.prototype.constantOr=function(d){return this.value.kind==="constant"?this.value.value:d},oe.prototype.evaluate=function(d,p,C,N){return this.property.evaluate(this.value,this.parameters,d,p,C,N)};var ne=function(p){this._properties=p,this._values=Object.create(p.defaultPossiblyEvaluatedValues)};ne.prototype.get=function(d){return this._values[d]};var he=function(p){this.specification=p};he.prototype.possiblyEvaluate=function(d,p){return d.expression.evaluate(p)},he.prototype.interpolate=function(d,p,C){var N=Rs[this.specification.type];return N?N(d,p,C):d};var Fe=function(p,C){this.specification=p,this.overrides=C};Fe.prototype.possiblyEvaluate=function(d,p,C,N){return new oe(this,d.expression.kind==="constant"||d.expression.kind==="camera"?{kind:"constant",value:d.expression.evaluate(p,null,{},C,N)}:d.expression,p)},Fe.prototype.interpolate=function(d,p,C){if(d.value.kind!=="constant"||p.value.kind!=="constant")return d;if(d.value.value===void 0||p.value.value===void 0)return new oe(this,{kind:"constant",value:void 0},d.parameters);var N=Rs[this.specification.type];return N?new oe(this,{kind:"constant",value:N(d.value.value,p.value.value,C)},d.parameters):d},Fe.prototype.evaluate=function(d,p,C,N,Q,ct){return d.kind==="constant"?d.value:d.evaluate(p,C,N,Q,ct)};var Ze=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.possiblyEvaluate=function(C,N,Q,ct){if(C.value===void 0)return new oe(this,{kind:"constant",value:void 0},N);if(C.expression.kind==="constant"){var Tt=C.expression.evaluate(N,null,{},Q,ct),Bt=C.property.specification.type==="resolvedImage"&&typeof Tt!="string"?Tt.name:Tt,Jt=this._calculate(Bt,Bt,Bt,N);return new oe(this,{kind:"constant",value:Jt},N)}if(C.expression.kind==="camera"){var ve=this._calculate(C.expression.evaluate({zoom:N.zoom-1}),C.expression.evaluate({zoom:N.zoom}),C.expression.evaluate({zoom:N.zoom+1}),N);return new oe(this,{kind:"constant",value:ve},N)}return new oe(this,C.expression,N)},p.prototype.evaluate=function(C,N,Q,ct,Tt,Bt){if(C.kind==="source"){var Jt=C.evaluate(N,Q,ct,Tt,Bt);return this._calculate(Jt,Jt,Jt,N)}return C.kind==="composite"?this._calculate(C.evaluate({zoom:Math.floor(N.zoom)-1},Q,ct),C.evaluate({zoom:Math.floor(N.zoom)},Q,ct),C.evaluate({zoom:Math.floor(N.zoom)+1},Q,ct),N):C.value},p.prototype._calculate=function(C,N,Q,ct){return ct.zoom>ct.zoomHistory.lastIntegerZoom?{from:C,to:N}:{from:Q,to:N}},p.prototype.interpolate=function(C){return C},p}(Fe),nn=function(p){this.specification=p};nn.prototype.possiblyEvaluate=function(d,p,C,N){if(d.value!==void 0){if(d.expression.kind==="constant"){var Q=d.expression.evaluate(p,null,{},C,N);return this._calculate(Q,Q,Q,p)}return this._calculate(d.expression.evaluate(new yr(Math.floor(p.zoom-1),p)),d.expression.evaluate(new yr(Math.floor(p.zoom),p)),d.expression.evaluate(new yr(Math.floor(p.zoom+1),p)),p)}},nn.prototype._calculate=function(d,p,C,N){return N.zoom>N.zoomHistory.lastIntegerZoom?{from:d,to:p}:{from:C,to:p}},nn.prototype.interpolate=function(d){return d};var Je=function(p){this.specification=p};Je.prototype.possiblyEvaluate=function(d,p,C,N){return!!d.expression.evaluate(p,null,{},C,N)},Je.prototype.interpolate=function(){return!1};var pn=function(p){for(var C in this.properties=p,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],p){var N=p[C];N.specification.overridable&&this.overridableProperties.push(C);var Q=this.defaultPropertyValues[C]=new Kt(N,void 0),ct=this.defaultTransitionablePropertyValues[C]=new te(N);this.defaultTransitioningPropertyValues[C]=ct.untransitioned(),this.defaultPossiblyEvaluatedValues[C]=Q.possiblyEvaluate({})}};Wi("DataDrivenProperty",Fe),Wi("DataConstantProperty",he),Wi("CrossFadedDataDrivenProperty",Ze),Wi("CrossFadedProperty",nn),Wi("ColorRampProperty",Je);var fn=function(d){function p(C,N){if(d.call(this),this.id=C.id,this.type=C.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},C.type!=="custom"&&(this.metadata=(C=C).metadata,this.minzoom=C.minzoom,this.maxzoom=C.maxzoom,C.type!=="background"&&(this.source=C.source,this.sourceLayer=C["source-layer"],this.filter=C.filter),N.layout&&(this._unevaluatedLayout=new zt(N.layout)),N.paint)){for(var Q in this._transitionablePaint=new Le(N.paint),C.paint)this.setPaintProperty(Q,C.paint[Q],{validate:!1});for(var ct in C.layout)this.setLayoutProperty(ct,C.layout[ct],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ne(N.paint)}}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},p.prototype.getLayoutProperty=function(C){return C==="visibility"?this.visibility:this._unevaluatedLayout.getValue(C)},p.prototype.setLayoutProperty=function(C,N,Q){Q===void 0&&(Q={}),N!=null&&this._validate($u,"layers."+this.id+".layout."+C,C,N,Q)||(C!=="visibility"?this._unevaluatedLayout.setValue(C,N):this.visibility=N)},p.prototype.getPaintProperty=function(C){return x(C,"-transition")?this._transitionablePaint.getTransition(C.slice(0,-"-transition".length)):this._transitionablePaint.getValue(C)},p.prototype.setPaintProperty=function(C,N,Q){if(Q===void 0&&(Q={}),N!=null&&this._validate(Wl,"layers."+this.id+".paint."+C,C,N,Q))return!1;if(x(C,"-transition"))return this._transitionablePaint.setTransition(C.slice(0,-"-transition".length),N||void 0),!1;var ct=this._transitionablePaint._values[C],Tt=ct.property.specification["property-type"]==="cross-faded-data-driven",Bt=ct.value.isDataDriven(),Jt=ct.value;this._transitionablePaint.setValue(C,N),this._handleSpecialPaintPropertyUpdate(C);var ve=this._transitionablePaint._values[C].value;return ve.isDataDriven()||Bt||Tt||this._handleOverridablePaintPropertyUpdate(C,Jt,ve)},p.prototype._handleSpecialPaintPropertyUpdate=function(C){},p.prototype._handleOverridablePaintPropertyUpdate=function(C,N,Q){return!1},p.prototype.isHidden=function(C){return!!(this.minzoom&&C<this.minzoom)||!!(this.maxzoom&&C>=this.maxzoom)||this.visibility==="none"},p.prototype.updateTransitions=function(C){this._transitioningPaint=this._transitionablePaint.transitioned(C,this._transitioningPaint)},p.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},p.prototype.recalculate=function(C,N){C.getCrossfadeParameters&&(this._crossfadeParameters=C.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(C,void 0,N)),this.paint=this._transitioningPaint.possiblyEvaluate(C,void 0,N)},p.prototype.serialize=function(){var C={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(C.layout=C.layout||{},C.layout.visibility=this.visibility),S(C,function(N,Q){return!(N===void 0||Q==="layout"&&!Object.keys(N).length||Q==="paint"&&!Object.keys(N).length)})},p.prototype._validate=function(C,N,Q,ct,Tt){return Tt===void 0&&(Tt={}),(!Tt||Tt.validate!==!1)&&tu(this,C.call(Ju,{key:N,layerType:this.type,objectKey:Q,value:ct,styleSpec:ue,style:{glyphs:!0,sprite:!0}}))},p.prototype.is3D=function(){return!1},p.prototype.isTileClipped=function(){return!1},p.prototype.hasOffscreenPass=function(){return!1},p.prototype.resize=function(){},p.prototype.isStateDependent=function(){for(var C in this.paint._values){var N=this.paint.get(C);if(N instanceof oe&&Fo(N.property.specification)&&(N.value.kind==="source"||N.value.kind==="composite")&&N.value.isStateDependent)return!0}return!1},p}(Te),Hn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Un=function(p,C){this._structArray=p,this._pos1=C*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Vn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Gn(d,p){p===void 0&&(p=1);var C=0,N=0;return{members:d.map(function(Q){var ct=Hn[Q.type].BYTES_PER_ELEMENT,Tt=C=dr(C,Math.max(p,ct)),Bt=Q.components||1;return N=Math.max(N,ct),C+=ct*Bt,{name:Q.name,type:Q.type,components:Bt,offset:Tt}}),size:dr(C,Math.max(N,p)),alignment:p}}function dr(d,p){return Math.ceil(d/p)*p}Vn.serialize=function(d,p){return d._trim(),p&&(d.isTransferred=!0,p.push(d.arrayBuffer)),{length:d.length,arrayBuffer:d.arrayBuffer}},Vn.deserialize=function(d){var p=Object.create(this.prototype);return p.arrayBuffer=d.arrayBuffer,p.length=d.length,p.capacity=d.arrayBuffer.byteLength/p.bytesPerElement,p._refreshViews(),p},Vn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Vn.prototype.clear=function(){this.length=0},Vn.prototype.resize=function(d){this.reserve(d),this.length=d},Vn.prototype.reserve=function(d){if(d>this.capacity){this.capacity=Math.max(d,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var p=this.uint8;this._refreshViews(),p&&this.uint8.set(p)}},Vn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var br=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N){var Q=this.length;return this.resize(Q+1),this.emplace(Q,C,N)},p.prototype.emplace=function(C,N,Q){var ct=2*C;return this.int16[ct+0]=N,this.int16[ct+1]=Q,C},p}(Vn);br.prototype.bytesPerElement=4,Wi("StructArrayLayout2i4",br);var Kr=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q,ct){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,C,N,Q,ct)},p.prototype.emplace=function(C,N,Q,ct,Tt){var Bt=4*C;return this.int16[Bt+0]=N,this.int16[Bt+1]=Q,this.int16[Bt+2]=ct,this.int16[Bt+3]=Tt,C},p}(Vn);Kr.prototype.bytesPerElement=8,Wi("StructArrayLayout4i8",Kr);var mi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q,ct,Tt,Bt){var Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,C,N,Q,ct,Tt,Bt)},p.prototype.emplace=function(C,N,Q,ct,Tt,Bt,Jt){var ve=6*C;return this.int16[ve+0]=N,this.int16[ve+1]=Q,this.int16[ve+2]=ct,this.int16[ve+3]=Tt,this.int16[ve+4]=Bt,this.int16[ve+5]=Jt,C},p}(Vn);mi.prototype.bytesPerElement=12,Wi("StructArrayLayout2i4i12",mi);var jr=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q,ct,Tt,Bt){var Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,C,N,Q,ct,Tt,Bt)},p.prototype.emplace=function(C,N,Q,ct,Tt,Bt,Jt){var ve=4*C,Re=8*C;return this.int16[ve+0]=N,this.int16[ve+1]=Q,this.uint8[Re+4]=ct,this.uint8[Re+5]=Tt,this.uint8[Re+6]=Bt,this.uint8[Re+7]=Jt,C},p}(Vn);jr.prototype.bytesPerElement=8,Wi("StructArrayLayout2i4ub8",jr);var oi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N){var Q=this.length;return this.resize(Q+1),this.emplace(Q,C,N)},p.prototype.emplace=function(C,N,Q){var ct=2*C;return this.float32[ct+0]=N,this.float32[ct+1]=Q,C},p}(Vn);oi.prototype.bytesPerElement=8,Wi("StructArrayLayout2f8",oi);var fi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge){var He=this.length;return this.resize(He+1),this.emplace(He,C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge)},p.prototype.emplace=function(C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge,He){var ln=10*C;return this.uint16[ln+0]=N,this.uint16[ln+1]=Q,this.uint16[ln+2]=ct,this.uint16[ln+3]=Tt,this.uint16[ln+4]=Bt,this.uint16[ln+5]=Jt,this.uint16[ln+6]=ve,this.uint16[ln+7]=Re,this.uint16[ln+8]=Ge,this.uint16[ln+9]=He,C},p}(Vn);fi.prototype.bytesPerElement=20,Wi("StructArrayLayout10ui20",fi);var Hi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge,He,ln){var Ln=this.length;return this.resize(Ln+1),this.emplace(Ln,C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge,He,ln)},p.prototype.emplace=function(C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge,He,ln,Ln){var Cn=12*C;return this.int16[Cn+0]=N,this.int16[Cn+1]=Q,this.int16[Cn+2]=ct,this.int16[Cn+3]=Tt,this.uint16[Cn+4]=Bt,this.uint16[Cn+5]=Jt,this.uint16[Cn+6]=ve,this.uint16[Cn+7]=Re,this.int16[Cn+8]=Ge,this.int16[Cn+9]=He,this.int16[Cn+10]=ln,this.int16[Cn+11]=Ln,C},p}(Vn);Hi.prototype.bytesPerElement=24,Wi("StructArrayLayout4i4ui4i24",Hi);var Di=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q){var ct=this.length;return this.resize(ct+1),this.emplace(ct,C,N,Q)},p.prototype.emplace=function(C,N,Q,ct){var Tt=3*C;return this.float32[Tt+0]=N,this.float32[Tt+1]=Q,this.float32[Tt+2]=ct,C},p}(Vn);Di.prototype.bytesPerElement=12,Wi("StructArrayLayout3f12",Di);var Ma=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var N=this.length;return this.resize(N+1),this.emplace(N,C)},p.prototype.emplace=function(C,N){return this.uint32[1*C+0]=N,C},p}(Vn);Ma.prototype.bytesPerElement=4,Wi("StructArrayLayout1ul4",Ma);var xa=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q,ct,Tt,Bt,Jt,ve,Re){var Ge=this.length;return this.resize(Ge+1),this.emplace(Ge,C,N,Q,ct,Tt,Bt,Jt,ve,Re)},p.prototype.emplace=function(C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge){var He=10*C,ln=5*C;return this.int16[He+0]=N,this.int16[He+1]=Q,this.int16[He+2]=ct,this.int16[He+3]=Tt,this.int16[He+4]=Bt,this.int16[He+5]=Jt,this.uint32[ln+3]=ve,this.uint16[He+8]=Re,this.uint16[He+9]=Ge,C},p}(Vn);xa.prototype.bytesPerElement=20,Wi("StructArrayLayout6i1ul2ui20",xa);var Pa=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q,ct,Tt,Bt){var Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,C,N,Q,ct,Tt,Bt)},p.prototype.emplace=function(C,N,Q,ct,Tt,Bt,Jt){var ve=6*C;return this.int16[ve+0]=N,this.int16[ve+1]=Q,this.int16[ve+2]=ct,this.int16[ve+3]=Tt,this.int16[ve+4]=Bt,this.int16[ve+5]=Jt,C},p}(Vn);Pa.prototype.bytesPerElement=12,Wi("StructArrayLayout2i2i2i12",Pa);var ei=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q,ct,Tt){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,C,N,Q,ct,Tt)},p.prototype.emplace=function(C,N,Q,ct,Tt,Bt){var Jt=4*C,ve=8*C;return this.float32[Jt+0]=N,this.float32[Jt+1]=Q,this.float32[Jt+2]=ct,this.int16[ve+6]=Tt,this.int16[ve+7]=Bt,C},p}(Vn);ei.prototype.bytesPerElement=16,Wi("StructArrayLayout2f1f2i16",ei);var Ea=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q,ct){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,C,N,Q,ct)},p.prototype.emplace=function(C,N,Q,ct,Tt){var Bt=12*C,Jt=3*C;return this.uint8[Bt+0]=N,this.uint8[Bt+1]=Q,this.float32[Jt+1]=ct,this.float32[Jt+2]=Tt,C},p}(Vn);Ea.prototype.bytesPerElement=12,Wi("StructArrayLayout2ub2f12",Ea);var Ga=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q){var ct=this.length;return this.resize(ct+1),this.emplace(ct,C,N,Q)},p.prototype.emplace=function(C,N,Q,ct){var Tt=3*C;return this.uint16[Tt+0]=N,this.uint16[Tt+1]=Q,this.uint16[Tt+2]=ct,C},p}(Vn);Ga.prototype.bytesPerElement=6,Wi("StructArrayLayout3ui6",Ga);var Ha=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge,He,ln,Ln,Cn,Kn,Yn,_r){var Nr=this.length;return this.resize(Nr+1),this.emplace(Nr,C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge,He,ln,Ln,Cn,Kn,Yn,_r)},p.prototype.emplace=function(C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge,He,ln,Ln,Cn,Kn,Yn,_r,Nr){var Yr=24*C,vi=12*C,si=48*C;return this.int16[Yr+0]=N,this.int16[Yr+1]=Q,this.uint16[Yr+2]=ct,this.uint16[Yr+3]=Tt,this.uint32[vi+2]=Bt,this.uint32[vi+3]=Jt,this.uint32[vi+4]=ve,this.uint16[Yr+10]=Re,this.uint16[Yr+11]=Ge,this.uint16[Yr+12]=He,this.float32[vi+7]=ln,this.float32[vi+8]=Ln,this.uint8[si+36]=Cn,this.uint8[si+37]=Kn,this.uint8[si+38]=Yn,this.uint32[vi+10]=_r,this.int16[Yr+22]=Nr,C},p}(Vn);Ha.prototype.bytesPerElement=48,Wi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ha);var Li=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge,He,ln,Ln,Cn,Kn,Yn,_r,Nr,Yr,vi,si,Ni,Fi,ia,pa,va,qi,eo){var wa=this.length;return this.resize(wa+1),this.emplace(wa,C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge,He,ln,Ln,Cn,Kn,Yn,_r,Nr,Yr,vi,si,Ni,Fi,ia,pa,va,qi,eo)},p.prototype.emplace=function(C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge,He,ln,Ln,Cn,Kn,Yn,_r,Nr,Yr,vi,si,Ni,Fi,ia,pa,va,qi,eo,wa){var ya=34*C,es=17*C;return this.int16[ya+0]=N,this.int16[ya+1]=Q,this.int16[ya+2]=ct,this.int16[ya+3]=Tt,this.int16[ya+4]=Bt,this.int16[ya+5]=Jt,this.int16[ya+6]=ve,this.int16[ya+7]=Re,this.uint16[ya+8]=Ge,this.uint16[ya+9]=He,this.uint16[ya+10]=ln,this.uint16[ya+11]=Ln,this.uint16[ya+12]=Cn,this.uint16[ya+13]=Kn,this.uint16[ya+14]=Yn,this.uint16[ya+15]=_r,this.uint16[ya+16]=Nr,this.uint16[ya+17]=Yr,this.uint16[ya+18]=vi,this.uint16[ya+19]=si,this.uint16[ya+20]=Ni,this.uint16[ya+21]=Fi,this.uint16[ya+22]=ia,this.uint32[es+12]=pa,this.float32[es+13]=va,this.float32[es+14]=qi,this.float32[es+15]=eo,this.float32[es+16]=wa,C},p}(Vn);Li.prototype.bytesPerElement=68,Wi("StructArrayLayout8i15ui1ul4f68",Li);var Ia=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var N=this.length;return this.resize(N+1),this.emplace(N,C)},p.prototype.emplace=function(C,N){return this.float32[1*C+0]=N,C},p}(Vn);Ia.prototype.bytesPerElement=4,Wi("StructArrayLayout1f4",Ia);var Eo=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q){var ct=this.length;return this.resize(ct+1),this.emplace(ct,C,N,Q)},p.prototype.emplace=function(C,N,Q,ct){var Tt=3*C;return this.int16[Tt+0]=N,this.int16[Tt+1]=Q,this.int16[Tt+2]=ct,C},p}(Vn);Eo.prototype.bytesPerElement=6,Wi("StructArrayLayout3i6",Eo);var Hs=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q){var ct=this.length;return this.resize(ct+1),this.emplace(ct,C,N,Q)},p.prototype.emplace=function(C,N,Q,ct){var Tt=4*C;return this.uint32[2*C+0]=N,this.uint16[Tt+2]=Q,this.uint16[Tt+3]=ct,C},p}(Vn);Hs.prototype.bytesPerElement=8,Wi("StructArrayLayout1ul2ui8",Hs);var Fs=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N){var Q=this.length;return this.resize(Q+1),this.emplace(Q,C,N)},p.prototype.emplace=function(C,N,Q){var ct=2*C;return this.uint16[ct+0]=N,this.uint16[ct+1]=Q,C},p}(Vn);Fs.prototype.bytesPerElement=4,Wi("StructArrayLayout2ui4",Fs);var Ol=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var N=this.length;return this.resize(N+1),this.emplace(N,C)},p.prototype.emplace=function(C,N){return this.uint16[1*C+0]=N,C},p}(Vn);Ol.prototype.bytesPerElement=2,Wi("StructArrayLayout1ui2",Ol);var xu=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,Q,ct){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,C,N,Q,ct)},p.prototype.emplace=function(C,N,Q,ct,Tt){var Bt=4*C;return this.float32[Bt+0]=N,this.float32[Bt+1]=Q,this.float32[Bt+2]=ct,this.float32[Bt+3]=Tt,C},p}(Vn);xu.prototype.bytesPerElement=16,Wi("StructArrayLayout4f16",xu);var j=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return C.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},C.x1.get=function(){return this._structArray.int16[this._pos2+2]},C.y1.get=function(){return this._structArray.int16[this._pos2+3]},C.x2.get=function(){return this._structArray.int16[this._pos2+4]},C.y2.get=function(){return this._structArray.int16[this._pos2+5]},C.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},C.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},C.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},C.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(p.prototype,C),p}(Un);j.prototype.size=20;var I=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new j(this,C)},p}(xa);Wi("CollisionBoxArray",I);var w=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return C.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},C.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},C.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},C.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},C.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},C.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},C.segment.get=function(){return this._structArray.uint16[this._pos2+10]},C.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},C.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},C.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},C.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},C.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},C.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},C.placedOrientation.set=function(N){this._structArray.uint8[this._pos1+37]=N},C.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},C.hidden.set=function(N){this._structArray.uint8[this._pos1+38]=N},C.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},C.crossTileID.set=function(N){this._structArray.uint32[this._pos4+10]=N},C.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(p.prototype,C),p}(Un);w.prototype.size=48;var B=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new w(this,C)},p}(Ha);Wi("PlacedSymbolArray",B);var D=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return C.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},C.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},C.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},C.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},C.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},C.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},C.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},C.key.get=function(){return this._structArray.uint16[this._pos2+8]},C.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},C.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},C.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},C.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},C.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},C.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},C.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},C.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},C.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},C.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},C.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},C.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},C.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},C.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},C.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},C.crossTileID.set=function(N){this._structArray.uint32[this._pos4+12]=N},C.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},C.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},C.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},C.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(p.prototype,C),p}(Un);D.prototype.size=68;var W=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new D(this,C)},p}(Li);Wi("SymbolInstanceArray",W);var tt=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getoffsetX=function(C){return this.float32[1*C+0]},p}(Ia);Wi("GlyphOffsetArray",tt);var st=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getx=function(C){return this.int16[3*C+0]},p.prototype.gety=function(C){return this.int16[3*C+1]},p.prototype.gettileUnitDistanceFromAnchor=function(C){return this.int16[3*C+2]},p}(Eo);Wi("SymbolLineVertexArray",st);var Ct=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return C.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},C.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},C.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(p.prototype,C),p}(Un);Ct.prototype.size=8;var It=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new Ct(this,C)},p}(Hs);Wi("FeatureIndexArray",It);var Ut=Gn([{name:"a_pos",components:2,type:"Int16"}],4).members,Zt=function(p){p===void 0&&(p=[]),this.segments=p};function qt(d,p){return 256*(d=l(Math.floor(d),0,255))+l(Math.floor(p),0,255)}Zt.prototype.prepareSegment=function(d,p,C,N){var Q=this.segments[this.segments.length-1];return d>Zt.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+Zt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+d),(!Q||Q.vertexLength+d>Zt.MAX_VERTEX_ARRAY_LENGTH||Q.sortKey!==N)&&(Q={vertexOffset:p.length,primitiveOffset:C.length,vertexLength:0,primitiveLength:0},N!==void 0&&(Q.sortKey=N),this.segments.push(Q)),Q},Zt.prototype.get=function(){return this.segments},Zt.prototype.destroy=function(){for(var d=0,p=this.segments;d<p.length;d+=1){var C=p[d];for(var N in C.vaos)C.vaos[N].destroy()}},Zt.simpleSegment=function(d,p,C,N){return new Zt([{vertexOffset:d,primitiveOffset:p,vertexLength:C,primitiveLength:N,vaos:{},sortKey:0}])},Zt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Wi("SegmentVector",Zt);var de=Gn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),me=u(function(d){d.exports=function(p,C){var N,Q,ct,Tt,Bt,Jt,ve,Re;for(Q=p.length-(N=3&p.length),ct=C,Bt=3432918353,Jt=461845907,Re=0;Re<Q;)ve=255&p.charCodeAt(Re)|(255&p.charCodeAt(++Re))<<8|(255&p.charCodeAt(++Re))<<16|(255&p.charCodeAt(++Re))<<24,++Re,ct=27492+(65535&(Tt=5*(65535&(ct=(ct^=ve=(65535&(ve=(ve=(65535&ve)*Bt+(((ve>>>16)*Bt&65535)<<16)&4294967295)<<15|ve>>>17))*Jt+(((ve>>>16)*Jt&65535)<<16)&4294967295)<<13|ct>>>19))+((5*(ct>>>16)&65535)<<16)&4294967295))+((58964+(Tt>>>16)&65535)<<16);switch(ve=0,N){case 3:ve^=(255&p.charCodeAt(Re+2))<<16;case 2:ve^=(255&p.charCodeAt(Re+1))<<8;case 1:ct^=ve=(65535&(ve=(ve=(65535&(ve^=255&p.charCodeAt(Re)))*Bt+(((ve>>>16)*Bt&65535)<<16)&4294967295)<<15|ve>>>17))*Jt+(((ve>>>16)*Jt&65535)<<16)&4294967295}return ct^=p.length,ct=2246822507*(65535&(ct^=ct>>>16))+((2246822507*(ct>>>16)&65535)<<16)&4294967295,ct=3266489909*(65535&(ct^=ct>>>13))+((3266489909*(ct>>>16)&65535)<<16)&4294967295,(ct^=ct>>>16)>>>0}}),je=u(function(d){d.exports=function(p,C){for(var N,Q=p.length,ct=C^Q,Tt=0;Q>=4;)N=1540483477*(65535&(N=255&p.charCodeAt(Tt)|(255&p.charCodeAt(++Tt))<<8|(255&p.charCodeAt(++Tt))<<16|(255&p.charCodeAt(++Tt))<<24))+((1540483477*(N>>>16)&65535)<<16),ct=1540483477*(65535&ct)+((1540483477*(ct>>>16)&65535)<<16)^(N=1540483477*(65535&(N^=N>>>24))+((1540483477*(N>>>16)&65535)<<16)),Q-=4,++Tt;switch(Q){case 3:ct^=(255&p.charCodeAt(Tt+2))<<16;case 2:ct^=(255&p.charCodeAt(Tt+1))<<8;case 1:ct=1540483477*(65535&(ct^=255&p.charCodeAt(Tt)))+((1540483477*(ct>>>16)&65535)<<16)}return ct=1540483477*(65535&(ct^=ct>>>13))+((1540483477*(ct>>>16)&65535)<<16),(ct^=ct>>>15)>>>0}}),Oe=me,ke=je;Oe.murmur3=me,Oe.murmur2=ke;var qe=function(){this.ids=[],this.positions=[],this.indexed=!1};qe.prototype.add=function(d,p,C,N){this.ids.push(Xn(d)),this.positions.push(p,C,N)},qe.prototype.getPositions=function(d){for(var p=Xn(d),C=0,N=this.ids.length-1;C<N;){var Q=C+N>>1;this.ids[Q]>=p?N=Q:C=Q+1}for(var ct=[];this.ids[C]===p;)ct.push({index:this.positions[3*C],start:this.positions[3*C+1],end:this.positions[3*C+2]}),C++;return ct},qe.serialize=function(d,p){var C=new Float64Array(d.ids),N=new Uint32Array(d.positions);return function Q(ct,Tt,Bt,Jt){for(;Bt<Jt;){for(var ve=ct[Bt+Jt>>1],Re=Bt-1,Ge=Jt+1;;){do Re++;while(ct[Re]<ve);do Ge--;while(ct[Ge]>ve);if(Re>=Ge)break;kn(ct,Re,Ge),kn(Tt,3*Re,3*Ge),kn(Tt,3*Re+1,3*Ge+1),kn(Tt,3*Re+2,3*Ge+2)}Ge-Bt<Jt-Ge?(Q(ct,Tt,Bt,Ge),Bt=Ge+1):(Q(ct,Tt,Ge+1,Jt),Jt=Ge)}}(C,N,0,C.length-1),p&&p.push(C.buffer,N.buffer),{ids:C,positions:N}},qe.deserialize=function(d){var p=new qe;return p.ids=d.ids,p.positions=d.positions,p.indexed=!0,p};var an=Math.pow(2,53)-1;function Xn(d){var p=+d;return!isNaN(p)&&p<=an?p:Oe(String(d))}function kn(d,p,C){var N=d[p];d[p]=d[C],d[C]=N}Wi("FeaturePositionMap",qe);var fr=function(p,C){this.gl=p.gl,this.location=C},Mr=function(d){function p(C,N){d.call(this,C,N),this.current=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){this.current!==C&&(this.current=C,this.gl.uniform1i(this.location,C))},p}(fr),Qr=function(d){function p(C,N){d.call(this,C,N),this.current=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){this.current!==C&&(this.current=C,this.gl.uniform1f(this.location,C))},p}(fr),Zr=function(d){function p(C,N){d.call(this,C,N),this.current=[0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]||(this.current=C,this.gl.uniform2f(this.location,C[0],C[1]))},p}(fr),Pi=function(d){function p(C,N){d.call(this,C,N),this.current=[0,0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]&&C[2]===this.current[2]||(this.current=C,this.gl.uniform3f(this.location,C[0],C[1],C[2]))},p}(fr),Ri=function(d){function p(C,N){d.call(this,C,N),this.current=[0,0,0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]&&C[2]===this.current[2]&&C[3]===this.current[3]||(this.current=C,this.gl.uniform4f(this.location,C[0],C[1],C[2],C[3]))},p}(fr),Ki=function(d){function p(C,N){d.call(this,C,N),this.current=Fr.transparent}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C.r===this.current.r&&C.g===this.current.g&&C.b===this.current.b&&C.a===this.current.a||(this.current=C,this.gl.uniform4f(this.location,C.r,C.g,C.b,C.a))},p}(fr),Xi=new Float32Array(16),Oa=function(d){function p(C,N){d.call(this,C,N),this.current=Xi}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){if(C[12]!==this.current[12]||C[0]!==this.current[0])return this.current=C,void this.gl.uniformMatrix4fv(this.location,!1,C);for(var N=1;N<16;N++)if(C[N]!==this.current[N]){this.current=C,this.gl.uniformMatrix4fv(this.location,!1,C);break}},p}(fr);function ja(d){return[qt(255*d.r,255*d.g),qt(255*d.b,255*d.a)]}var ki=function(p,C,N){this.value=p,this.uniformNames=C.map(function(Q){return"u_"+Q}),this.type=N};ki.prototype.setUniform=function(d,p,C){d.set(C.constantOr(this.value))},ki.prototype.getBinding=function(d,p,C){return this.type==="color"?new Ki(d,p):new Qr(d,p)};var Sa=function(p,C){this.uniformNames=C.map(function(N){return"u_"+N}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Sa.prototype.setConstantPatternPositions=function(d,p){this.pixelRatioFrom=p.pixelRatio,this.pixelRatioTo=d.pixelRatio,this.patternFrom=p.tlbr,this.patternTo=d.tlbr},Sa.prototype.setUniform=function(d,p,C,N){var Q=N==="u_pattern_to"?this.patternTo:N==="u_pattern_from"?this.patternFrom:N==="u_pixel_ratio_to"?this.pixelRatioTo:N==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Q&&d.set(Q)},Sa.prototype.getBinding=function(d,p,C){return C.substr(0,9)==="u_pattern"?new Ri(d,p):new Qr(d,p)};var ga=function(p,C,N,Q){this.expression=p,this.type=N,this.maxValue=0,this.paintVertexAttributes=C.map(function(ct){return{name:"a_"+ct,type:"Float32",components:N==="color"?2:1,offset:0}}),this.paintVertexArray=new Q};ga.prototype.populatePaintArray=function(d,p,C,N,Q){var ct=this.paintVertexArray.length,Tt=this.expression.evaluate(new yr(0),p,{},N,[],Q);this.paintVertexArray.resize(d),this._setPaintValue(ct,d,Tt)},ga.prototype.updatePaintArray=function(d,p,C,N){var Q=this.expression.evaluate({zoom:0},C,N);this._setPaintValue(d,p,Q)},ga.prototype._setPaintValue=function(d,p,C){if(this.type==="color")for(var N=ja(C),Q=d;Q<p;Q++)this.paintVertexArray.emplace(Q,N[0],N[1]);else{for(var ct=d;ct<p;ct++)this.paintVertexArray.emplace(ct,C);this.maxValue=Math.max(this.maxValue,Math.abs(C))}},ga.prototype.upload=function(d){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=d.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ga.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Yi=function(p,C,N,Q,ct,Tt){this.expression=p,this.uniformNames=C.map(function(Bt){return"u_"+Bt+"_t"}),this.type=N,this.useIntegerZoom=Q,this.zoom=ct,this.maxValue=0,this.paintVertexAttributes=C.map(function(Bt){return{name:"a_"+Bt,type:"Float32",components:N==="color"?4:2,offset:0}}),this.paintVertexArray=new Tt};Yi.prototype.populatePaintArray=function(d,p,C,N,Q){var ct=this.expression.evaluate(new yr(this.zoom),p,{},N,[],Q),Tt=this.expression.evaluate(new yr(this.zoom+1),p,{},N,[],Q),Bt=this.paintVertexArray.length;this.paintVertexArray.resize(d),this._setPaintValue(Bt,d,ct,Tt)},Yi.prototype.updatePaintArray=function(d,p,C,N){var Q=this.expression.evaluate({zoom:this.zoom},C,N),ct=this.expression.evaluate({zoom:this.zoom+1},C,N);this._setPaintValue(d,p,Q,ct)},Yi.prototype._setPaintValue=function(d,p,C,N){if(this.type==="color")for(var Q=ja(C),ct=ja(N),Tt=d;Tt<p;Tt++)this.paintVertexArray.emplace(Tt,Q[0],Q[1],ct[0],ct[1]);else{for(var Bt=d;Bt<p;Bt++)this.paintVertexArray.emplace(Bt,C,N);this.maxValue=Math.max(this.maxValue,Math.abs(C),Math.abs(N))}},Yi.prototype.upload=function(d){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=d.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Yi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Yi.prototype.setUniform=function(d,p){var C=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,N=l(this.expression.interpolationFactor(C,this.zoom,this.zoom+1),0,1);d.set(N)},Yi.prototype.getBinding=function(d,p,C){return new Qr(d,p)};var _a=function(p,C,N,Q,ct,Tt){this.expression=p,this.type=C,this.useIntegerZoom=N,this.zoom=Q,this.layerId=Tt,this.zoomInPaintVertexArray=new ct,this.zoomOutPaintVertexArray=new ct};_a.prototype.populatePaintArray=function(d,p,C){var N=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(d),this.zoomOutPaintVertexArray.resize(d),this._setPaintValues(N,d,p.patterns&&p.patterns[this.layerId],C)},_a.prototype.updatePaintArray=function(d,p,C,N,Q){this._setPaintValues(d,p,C.patterns&&C.patterns[this.layerId],Q)},_a.prototype._setPaintValues=function(d,p,C,N){if(N&&C){var Q=N[C.min],ct=N[C.mid],Tt=N[C.max];if(Q&&ct&&Tt)for(var Bt=d;Bt<p;Bt++)this.zoomInPaintVertexArray.emplace(Bt,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],ct.pixelRatio,Q.pixelRatio),this.zoomOutPaintVertexArray.emplace(Bt,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],Tt.tl[0],Tt.tl[1],Tt.br[0],Tt.br[1],ct.pixelRatio,Tt.pixelRatio)}},_a.prototype.upload=function(d){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=d.createVertexBuffer(this.zoomInPaintVertexArray,de.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=d.createVertexBuffer(this.zoomOutPaintVertexArray,de.members,this.expression.isStateDependent))},_a.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ra=function(p,C,N){this.binders={},this._buffers=[];var Q=[];for(var ct in p.paint._values)if(N(ct)){var Tt=p.paint.get(ct);if(Tt instanceof oe&&Fo(Tt.property.specification)){var Bt=za(ct,p.type),Jt=Tt.value,ve=Tt.property.specification.type,Re=Tt.property.useIntegerZoom,Ge=Tt.property.specification["property-type"],He=Ge==="cross-faded"||Ge==="cross-faded-data-driven";if(Jt.kind==="constant")this.binders[ct]=He?new Sa(Jt.value,Bt):new ki(Jt.value,Bt,ve),Q.push("/u_"+ct);else if(Jt.kind==="source"||He){var ln=Ps(ct,ve,"source");this.binders[ct]=He?new _a(Jt,ve,Re,C,ln,p.id):new ga(Jt,Bt,ve,ln),Q.push("/a_"+ct)}else{var Ln=Ps(ct,ve,"composite");this.binders[ct]=new Yi(Jt,Bt,ve,Re,C,Ln),Q.push("/z_"+ct)}}}this.cacheKey=Q.sort().join("")};ra.prototype.getMaxValue=function(d){var p=this.binders[d];return p instanceof ga||p instanceof Yi?p.maxValue:0},ra.prototype.populatePaintArrays=function(d,p,C,N,Q){for(var ct in this.binders){var Tt=this.binders[ct];(Tt instanceof ga||Tt instanceof Yi||Tt instanceof _a)&&Tt.populatePaintArray(d,p,C,N,Q)}},ra.prototype.setConstantPatternPositions=function(d,p){for(var C in this.binders){var N=this.binders[C];N instanceof Sa&&N.setConstantPatternPositions(d,p)}},ra.prototype.updatePaintArrays=function(d,p,C,N,Q){var ct=!1;for(var Tt in d)for(var Bt=0,Jt=p.getPositions(Tt);Bt<Jt.length;Bt+=1){var ve=Jt[Bt],Re=C.feature(ve.index);for(var Ge in this.binders){var He=this.binders[Ge];if((He instanceof ga||He instanceof Yi||He instanceof _a)&&He.expression.isStateDependent===!0){var ln=N.paint.get(Ge);He.expression=ln.value,He.updatePaintArray(ve.start,ve.end,Re,d[Tt],Q),ct=!0}}}return ct},ra.prototype.defines=function(){var d=[];for(var p in this.binders){var C=this.binders[p];(C instanceof ki||C instanceof Sa)&&d.push.apply(d,C.uniformNames.map(function(N){return"#define HAS_UNIFORM_"+N}))}return d},ra.prototype.getBinderAttributes=function(){var d=[];for(var p in this.binders){var C=this.binders[p];if(C instanceof ga||C instanceof Yi)for(var N=0;N<C.paintVertexAttributes.length;N++)d.push(C.paintVertexAttributes[N].name);else if(C instanceof _a)for(var Q=0;Q<de.members.length;Q++)d.push(de.members[Q].name)}return d},ra.prototype.getBinderUniforms=function(){var d=[];for(var p in this.binders){var C=this.binders[p];if(C instanceof ki||C instanceof Sa||C instanceof Yi)for(var N=0,Q=C.uniformNames;N<Q.length;N+=1)d.push(Q[N])}return d},ra.prototype.getPaintVertexBuffers=function(){return this._buffers},ra.prototype.getUniforms=function(d,p){var C=[];for(var N in this.binders){var Q=this.binders[N];if(Q instanceof ki||Q instanceof Sa||Q instanceof Yi)for(var ct=0,Tt=Q.uniformNames;ct<Tt.length;ct+=1){var Bt=Tt[ct];if(p[Bt]){var Jt=Q.getBinding(d,p[Bt],Bt);C.push({name:Bt,property:N,binding:Jt})}}}return C},ra.prototype.setUniforms=function(d,p,C,N){for(var Q=0,ct=p;Q<ct.length;Q+=1){var Tt=ct[Q],Bt=Tt.name,Jt=Tt.property;this.binders[Jt].setUniform(Tt.binding,N,C.get(Jt),Bt)}},ra.prototype.updatePaintBuffers=function(d){for(var p in this._buffers=[],this.binders){var C=this.binders[p];if(d&&C instanceof _a){var N=d.fromScale===2?C.zoomInPaintVertexBuffer:C.zoomOutPaintVertexBuffer;N&&this._buffers.push(N)}else(C instanceof ga||C instanceof Yi)&&C.paintVertexBuffer&&this._buffers.push(C.paintVertexBuffer)}},ra.prototype.upload=function(d){for(var p in this.binders){var C=this.binders[p];(C instanceof ga||C instanceof Yi||C instanceof _a)&&C.upload(d)}this.updatePaintBuffers()},ra.prototype.destroy=function(){for(var d in this.binders){var p=this.binders[d];(p instanceof ga||p instanceof Yi||p instanceof _a)&&p.destroy()}};var La=function(p,C,N){N===void 0&&(N=function(){return!0}),this.programConfigurations={};for(var Q=0,ct=p;Q<ct.length;Q+=1){var Tt=ct[Q];this.programConfigurations[Tt.id]=new ra(Tt,C,N)}this.needsUpload=!1,this._featureMap=new qe,this._bufferOffset=0};function za(d,p){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(p+"-","").replace(/-/g,"_")]}function Ps(d,p,C){var N={color:{source:oi,composite:xu},number:{source:Ia,composite:oi}},Q=function(ct){return{"line-pattern":{source:fi,composite:fi},"fill-pattern":{source:fi,composite:fi},"fill-extrusion-pattern":{source:fi,composite:fi}}[ct]}(d);return Q&&Q[C]||N[p][C]}La.prototype.populatePaintArrays=function(d,p,C,N,Q,ct){for(var Tt in this.programConfigurations)this.programConfigurations[Tt].populatePaintArrays(d,p,N,Q,ct);p.id!==void 0&&this._featureMap.add(p.id,C,this._bufferOffset,d),this._bufferOffset=d,this.needsUpload=!0},La.prototype.updatePaintArrays=function(d,p,C,N){for(var Q=0,ct=C;Q<ct.length;Q+=1){var Tt=ct[Q];this.needsUpload=this.programConfigurations[Tt.id].updatePaintArrays(d,this._featureMap,p,Tt,N)||this.needsUpload}},La.prototype.get=function(d){return this.programConfigurations[d]},La.prototype.upload=function(d){if(this.needsUpload){for(var p in this.programConfigurations)this.programConfigurations[p].upload(d);this.needsUpload=!1}},La.prototype.destroy=function(){for(var d in this.programConfigurations)this.programConfigurations[d].destroy()},Wi("ConstantBinder",ki),Wi("CrossFadedConstantBinder",Sa),Wi("SourceExpressionBinder",ga),Wi("CrossFadedCompositeBinder",_a),Wi("CompositeExpressionBinder",Yi),Wi("ProgramConfiguration",ra,{omit:["_buffers"]}),Wi("ProgramConfigurationSet",La);var ls=Math.pow(2,14)-1,Ts=-ls-1;function ms(d){for(var p=8192/d.extent,C=d.loadGeometry(),N=0;N<C.length;N++)for(var Q=C[N],ct=0;ct<Q.length;ct++){var Tt=Q[ct],Bt=Math.round(Tt.x*p),Jt=Math.round(Tt.y*p);Tt.x=l(Bt,Ts,ls),Tt.y=l(Jt,Ts,ls),(Bt<Tt.x||Bt>Tt.x+1||Jt<Tt.y||Jt>Tt.y+1)&&O("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return C}function nu(d,p){return{type:d.type,id:d.id,properties:d.properties,geometry:p?ms(d):[]}}function Uu(d,p,C,N,Q){d.emplaceBack(2*p+(N+1)/2,2*C+(Q+1)/2)}var qu=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.layoutVertexArray=new br,this.indexArray=new Ga,this.segments=new Zt,this.programConfigurations=new La(p.layers,p.zoom),this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};function _c(d,p){for(var C=0;C<d.length;C++)if(Cc(p,d[C]))return!0;for(var N=0;N<p.length;N++)if(Cc(d,p[N]))return!0;return!!Gc(d,p)}function Ic(d,p,C){return!!Cc(d,p)||!!Bc(p,d,C)}function wl(d,p){if(d.length===1)return nf(p,d[0]);for(var C=0;C<p.length;C++)for(var N=p[C],Q=0;Q<N.length;Q++)if(Cc(d,N[Q]))return!0;for(var ct=0;ct<d.length;ct++)if(nf(p,d[ct]))return!0;for(var Tt=0;Tt<p.length;Tt++)if(Gc(d,p[Tt]))return!0;return!1}function ac(d,p,C){if(d.length>1){if(Gc(d,p))return!0;for(var N=0;N<p.length;N++)if(Bc(p[N],d,C))return!0}for(var Q=0;Q<d.length;Q++)if(Bc(d[Q],p,C))return!0;return!1}function Gc(d,p){if(d.length===0||p.length===0)return!1;for(var C=0;C<d.length-1;C++)for(var N=d[C],Q=d[C+1],ct=0;ct<p.length-1;ct++)if(ef(N,Q,p[ct],p[ct+1]))return!0;return!1}function ef(d,p,C,N){return L(d,C,N)!==L(p,C,N)&&L(d,p,C)!==L(d,p,N)}function Bc(d,p,C){var N=C*C;if(p.length===1)return d.distSqr(p[0])<N;for(var Q=1;Q<p.length;Q++)if(Hc(d,p[Q-1],p[Q])<N)return!0;return!1}function Hc(d,p,C){var N=p.distSqr(C);if(N===0)return d.distSqr(p);var Q=((d.x-p.x)*(C.x-p.x)+(d.y-p.y)*(C.y-p.y))/N;return d.distSqr(Q<0?p:Q>1?C:C.sub(p)._mult(Q)._add(p))}function nf(d,p){for(var C,N,Q,ct=!1,Tt=0;Tt<d.length;Tt++)for(var Bt=0,Jt=(C=d[Tt]).length-1;Bt<C.length;Jt=Bt++)(N=C[Bt]).y>p.y!=(Q=C[Jt]).y>p.y&&p.x<(Q.x-N.x)*(p.y-N.y)/(Q.y-N.y)+N.x&&(ct=!ct);return ct}function Cc(d,p){for(var C=!1,N=0,Q=d.length-1;N<d.length;Q=N++){var ct=d[N],Tt=d[Q];ct.y>p.y!=Tt.y>p.y&&p.x<(Tt.x-ct.x)*(p.y-ct.y)/(Tt.y-ct.y)+ct.x&&(C=!C)}return C}function Yc(d,p,C){var N=C[0],Q=C[2];if(d.x<N.x&&p.x<N.x||d.x>Q.x&&p.x>Q.x||d.y<N.y&&p.y<N.y||d.y>Q.y&&p.y>Q.y)return!1;var ct=L(d,p,C[0]);return ct!==L(d,p,C[1])||ct!==L(d,p,C[2])||ct!==L(d,p,C[3])}function gc(d,p,C){var N=p.paint.get(d).value;return N.kind==="constant"?N.value:C.programConfigurations.get(p.id).getMaxValue(d)}function lu(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function cu(d,p,C,N,Q){if(!p[0]&&!p[1])return d;var ct=r.convert(p)._mult(Q);C==="viewport"&&ct._rotate(-N);for(var Tt=[],Bt=0;Bt<d.length;Bt++)Tt.push(d[Bt].sub(ct));return Tt}qu.prototype.populate=function(d,p,C){var N=this.layers[0],Q=[],ct=null;N.type==="circle"&&(ct=N.layout.get("circle-sort-key"));for(var Tt=0,Bt=d;Tt<Bt.length;Tt+=1){var Jt=Bt[Tt],ve=Jt.feature,Re=Jt.id,Ge=Jt.index,He=Jt.sourceLayerIndex,ln=this.layers[0]._featureFilter.needGeometry,Ln=nu(ve,ln);if(this.layers[0]._featureFilter.filter(new yr(this.zoom),Ln,C)){var Cn=ct?ct.evaluate(Ln,{},C):void 0,Kn={id:Re,properties:ve.properties,type:ve.type,sourceLayerIndex:He,index:Ge,geometry:ln?Ln.geometry:ms(ve),patterns:{},sortKey:Cn};Q.push(Kn)}}ct&&Q.sort(function(Fi,ia){return Fi.sortKey-ia.sortKey});for(var Yn=0,_r=Q;Yn<_r.length;Yn+=1){var Nr=_r[Yn],Yr=Nr.geometry,vi=Nr.index,si=Nr.sourceLayerIndex,Ni=d[vi].feature;this.addFeature(Nr,Yr,vi,C),p.featureIndex.insert(Ni,Yr,vi,si,this.index)}},qu.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},qu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},qu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qu.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Ut),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},qu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qu.prototype.addFeature=function(d,p,C,N){for(var Q=0,ct=p;Q<ct.length;Q+=1)for(var Tt=0,Bt=ct[Q];Tt<Bt.length;Tt+=1){var Jt=Bt[Tt],ve=Jt.x,Re=Jt.y;if(!(ve<0||ve>=8192||Re<0||Re>=8192)){var Ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,d.sortKey),He=Ge.vertexLength;Uu(this.layoutVertexArray,ve,Re,-1,-1),Uu(this.layoutVertexArray,ve,Re,1,-1),Uu(this.layoutVertexArray,ve,Re,1,1),Uu(this.layoutVertexArray,ve,Re,-1,1),this.indexArray.emplaceBack(He,He+1,He+2),this.indexArray.emplaceBack(He,He+3,He+2),Ge.vertexLength+=4,Ge.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,{},N)},Wi("CircleBucket",qu,{omit:["layers"]});var Hl=new pn({"circle-sort-key":new Fe(ue.layout_circle["circle-sort-key"])}),ou={paint:new pn({"circle-radius":new Fe(ue.paint_circle["circle-radius"]),"circle-color":new Fe(ue.paint_circle["circle-color"]),"circle-blur":new Fe(ue.paint_circle["circle-blur"]),"circle-opacity":new Fe(ue.paint_circle["circle-opacity"]),"circle-translate":new he(ue.paint_circle["circle-translate"]),"circle-translate-anchor":new he(ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new he(ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new he(ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Fe(ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Fe(ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Fe(ue.paint_circle["circle-stroke-opacity"])}),layout:Hl},fu=typeof Float32Array!="undefined"?Float32Array:Array;function bu(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function Eu(d,p,C){var N=p[0],Q=p[1],ct=p[2],Tt=p[3],Bt=p[4],Jt=p[5],ve=p[6],Re=p[7],Ge=p[8],He=p[9],ln=p[10],Ln=p[11],Cn=p[12],Kn=p[13],Yn=p[14],_r=p[15],Nr=C[0],Yr=C[1],vi=C[2],si=C[3];return d[0]=Nr*N+Yr*Bt+vi*Ge+si*Cn,d[1]=Nr*Q+Yr*Jt+vi*He+si*Kn,d[2]=Nr*ct+Yr*ve+vi*ln+si*Yn,d[3]=Nr*Tt+Yr*Re+vi*Ln+si*_r,d[4]=(Nr=C[4])*N+(Yr=C[5])*Bt+(vi=C[6])*Ge+(si=C[7])*Cn,d[5]=Nr*Q+Yr*Jt+vi*He+si*Kn,d[6]=Nr*ct+Yr*ve+vi*ln+si*Yn,d[7]=Nr*Tt+Yr*Re+vi*Ln+si*_r,d[8]=(Nr=C[8])*N+(Yr=C[9])*Bt+(vi=C[10])*Ge+(si=C[11])*Cn,d[9]=Nr*Q+Yr*Jt+vi*He+si*Kn,d[10]=Nr*ct+Yr*ve+vi*ln+si*Yn,d[11]=Nr*Tt+Yr*Re+vi*Ln+si*_r,d[12]=(Nr=C[12])*N+(Yr=C[13])*Bt+(vi=C[14])*Ge+(si=C[15])*Cn,d[13]=Nr*Q+Yr*Jt+vi*He+si*Kn,d[14]=Nr*ct+Yr*ve+vi*ln+si*Yn,d[15]=Nr*Tt+Yr*Re+vi*Ln+si*_r,d}Math.hypot||(Math.hypot=function(){for(var d=arguments,p=0,C=arguments.length;C--;)p+=d[C]*d[C];return Math.sqrt(p)});var Fl,ll=Eu;function Jl(d,p,C){var N=p[0],Q=p[1],ct=p[2],Tt=p[3];return d[0]=C[0]*N+C[4]*Q+C[8]*ct+C[12]*Tt,d[1]=C[1]*N+C[5]*Q+C[9]*ct+C[13]*Tt,d[2]=C[2]*N+C[6]*Q+C[10]*ct+C[14]*Tt,d[3]=C[3]*N+C[7]*Q+C[11]*ct+C[15]*Tt,d}Fl=new fu(3),fu!=Float32Array&&(Fl[0]=0,Fl[1]=0,Fl[2]=0),function(){var d=new fu(4);fu!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[3]=0)}();var Nc=(function(){var d=new fu(2);fu!=Float32Array&&(d[0]=0,d[1]=0)}(),function(d){function p(C){d.call(this,C,ou)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new qu(C)},p.prototype.queryRadius=function(C){var N=C;return gc("circle-radius",this,N)+gc("circle-stroke-width",this,N)+lu(this.paint.get("circle-translate"))},p.prototype.queryIntersectsFeature=function(C,N,Q,ct,Tt,Bt,Jt,ve){for(var Re=cu(C,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Bt.angle,Jt),Ge=this.paint.get("circle-radius").evaluate(N,Q)+this.paint.get("circle-stroke-width").evaluate(N,Q),He=this.paint.get("circle-pitch-alignment")==="map",ln=He?Re:function(Ni,Fi){return Ni.map(function(ia){return Zc(ia,Fi)})}(Re,ve),Ln=He?Ge*Jt:Ge,Cn=0,Kn=ct;Cn<Kn.length;Cn+=1)for(var Yn=0,_r=Kn[Cn];Yn<_r.length;Yn+=1){var Nr=_r[Yn],Yr=He?Nr:Zc(Nr,ve),vi=Ln,si=Jl([],[Nr.x,Nr.y,0,1],ve);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?vi*=si[3]/Bt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(vi*=Bt.cameraToCenterDistance/si[3]),Ic(ln,Yr,vi))return!0}return!1},p}(fn));function Zc(d,p){var C=Jl([],[d.x,d.y,0,1],p);return new r(C[0]/C[3],C[1]/C[3])}var Fc=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(qu);function bl(d,p,C,N){var Q=p.width,ct=p.height;if(N){if(N instanceof Uint8ClampedArray)N=new Uint8Array(N.buffer);else if(N.length!==Q*ct*C)throw new RangeError("mismatched image size")}else N=new Uint8Array(Q*ct*C);return d.width=Q,d.height=ct,d.data=N,d}function rf(d,p,C){var N=p.width,Q=p.height;if(N!==d.width||Q!==d.height){var ct=bl({},{width:N,height:Q},C);zc(d,ct,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,N),height:Math.min(d.height,Q)},C),d.width=N,d.height=Q,d.data=ct.data}}function zc(d,p,C,N,Q,ct){if(Q.width===0||Q.height===0)return p;if(Q.width>d.width||Q.height>d.height||C.x>d.width-Q.width||C.y>d.height-Q.height)throw new RangeError("out of range source coordinates for image copy");if(Q.width>p.width||Q.height>p.height||N.x>p.width-Q.width||N.y>p.height-Q.height)throw new RangeError("out of range destination coordinates for image copy");for(var Tt=d.data,Bt=p.data,Jt=0;Jt<Q.height;Jt++)for(var ve=((C.y+Jt)*d.width+C.x)*ct,Re=((N.y+Jt)*p.width+N.x)*ct,Ge=0;Ge<Q.width*ct;Ge++)Bt[Re+Ge]=Tt[ve+Ge];return p}Wi("HeatmapBucket",Fc,{omit:["layers"]});var oc=function(p,C){bl(this,p,1,C)};oc.prototype.resize=function(d){rf(this,d,1)},oc.prototype.clone=function(){return new oc({width:this.width,height:this.height},new Uint8Array(this.data))},oc.copy=function(d,p,C,N,Q){zc(d,p,C,N,Q,1)};var El=function(p,C){bl(this,p,4,C)};El.prototype.resize=function(d){rf(this,d,4)},El.prototype.replace=function(d,p){p?this.data.set(d):this.data=d instanceof Uint8ClampedArray?new Uint8Array(d.buffer):d},El.prototype.clone=function(){return new El({width:this.width,height:this.height},new Uint8Array(this.data))},El.copy=function(d,p,C,N,Q){zc(d,p,C,N,Q,4)},Wi("AlphaImage",oc),Wi("RGBAImage",El);var ph={paint:new pn({"heatmap-radius":new Fe(ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Fe(ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new he(ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Je(ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new he(ue.paint_heatmap["heatmap-opacity"])})};function Cf(d){var p={},C=d.resolution||256,N=d.clips?d.clips.length:1,Q=d.image||new El({width:C,height:N}),ct=function(Cn,Kn,Yn){p[d.evaluationKey]=Yn;var _r=d.expression.evaluate(p);Q.data[Cn+Kn+0]=Math.floor(255*_r.r/_r.a),Q.data[Cn+Kn+1]=Math.floor(255*_r.g/_r.a),Q.data[Cn+Kn+2]=Math.floor(255*_r.b/_r.a),Q.data[Cn+Kn+3]=Math.floor(255*_r.a)};if(d.clips)for(var Tt=0,Bt=0;Tt<N;++Tt,Bt+=4*C)for(var Jt=0,ve=0;Jt<C;Jt++,ve+=4){var Re=Jt/(C-1),Ge=d.clips[Tt];ct(Bt,ve,Ge.start*(1-Re)+Ge.end*Re)}else for(var He=0,ln=0;He<C;He++,ln+=4)ct(0,ln,He/(C-1));return Q}var vf=function(d){function p(C){d.call(this,C,ph),this._updateColorRamp()}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new Fc(C)},p.prototype._handleSpecialPaintPropertyUpdate=function(C){C==="heatmap-color"&&this._updateColorRamp()},p.prototype._updateColorRamp=function(){this.colorRamp=Cf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},p.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},p.prototype.queryRadius=function(){return 0},p.prototype.queryIntersectsFeature=function(){return!1},p.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},p}(fn),Kc={paint:new pn({"hillshade-illumination-direction":new he(ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new he(ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new he(ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new he(ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new he(ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new he(ue.paint_hillshade["hillshade-accent-color"])})},Of=function(d){function p(C){d.call(this,C,Kc)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},p}(fn),cf=Gn([{name:"a_pos",components:2,type:"Int16"}],4).members,Xc=Jc,Gf=Jc;function Jc(d,p,C){C=C||2;var N,Q,ct,Tt,Bt,Jt,ve,Re=p&&p.length,Ge=Re?p[0]*C:d.length,He=af(d,0,Ge,C,!0),ln=[];if(!He||He.next===He.prev)return ln;if(Re&&(He=function(Cn,Kn,Yn,_r){var Nr,Yr,vi,si=[];for(Nr=0,Yr=Kn.length;Nr<Yr;Nr++)(vi=af(Cn,Kn[Nr]*_r,Nr<Yr-1?Kn[Nr+1]*_r:Cn.length,_r,!1))===vi.next&&(vi.steiner=!0),si.push(Ue(vi));for(si.sort(pe),Nr=0;Nr<si.length;Nr++)ye(si[Nr],Yn),Yn=Vc(Yn,Yn.next);return Yn}(d,p,He,C)),d.length>80*C){N=ct=d[0],Q=Tt=d[1];for(var Ln=C;Ln<Ge;Ln+=C)(Bt=d[Ln])<N&&(N=Bt),(Jt=d[Ln+1])<Q&&(Q=Jt),Bt>ct&&(ct=Bt),Jt>Tt&&(Tt=Jt);ve=(ve=Math.max(ct-N,Tt-Q))!==0?1/ve:0}return Ef(He,ln,C,N,Q,ve),ln}function af(d,p,C,N,Q){var ct,Tt;if(Q===wo(d,p,C,N)>0)for(ct=p;ct<C;ct+=N)Tt=qa(ct,d[ct],d[ct+1],Tt);else for(ct=C-N;ct>=p;ct-=N)Tt=qa(ct,d[ct],d[ct+1],Tt);return Tt&&vr(Tt,Tt.next)&&(Xa(Tt),Tt=Tt.next),Tt}function Vc(d,p){if(!d)return d;p||(p=d);var C,N=d;do if(C=!1,N.steiner||!vr(N,N.next)&&ir(N.prev,N,N.next)!==0)N=N.next;else{if(Xa(N),(N=p=N.prev)===N.next)break;C=!0}while(C||N!==p);return p}function Ef(d,p,C,N,Q,ct,Tt){if(d){!Tt&&ct&&function(Re,Ge,He,ln){var Ln=Re;do Ln.z===null&&(Ln.z=Xt(Ln.x,Ln.y,Ge,He,ln)),Ln.prevZ=Ln.prev,Ln.nextZ=Ln.next,Ln=Ln.next;while(Ln!==Re);Ln.prevZ.nextZ=null,Ln.prevZ=null,function(Cn){var Kn,Yn,_r,Nr,Yr,vi,si,Ni,Fi=1;do{for(Yn=Cn,Cn=null,Yr=null,vi=0;Yn;){for(vi++,_r=Yn,si=0,Kn=0;Kn<Fi&&(si++,_r=_r.nextZ);Kn++);for(Ni=Fi;si>0||Ni>0&&_r;)si!==0&&(Ni===0||!_r||Yn.z<=_r.z)?(Nr=Yn,Yn=Yn.nextZ,si--):(Nr=_r,_r=_r.nextZ,Ni--),Yr?Yr.nextZ=Nr:Cn=Nr,Nr.prevZ=Yr,Yr=Nr;Yn=_r}Yr.nextZ=null,Fi*=2}while(vi>1)}(Ln)}(d,N,Q,ct);for(var Bt,Jt,ve=d;d.prev!==d.next;)if(Bt=d.prev,Jt=d.next,ct?Sf(d,N,Q,ct):gh(d))p.push(Bt.i/C),p.push(d.i/C),p.push(Jt.i/C),Xa(d),d=Jt.next,ve=Jt.next;else if((d=Jt)===ve){Tt?Tt===1?Ef(d=Vf(Vc(d),p,C),p,C,N,Q,ct,2):Tt===2&&Qf(d,p,C,N,Q,ct):Ef(Vc(d),p,C,N,Q,ct,1);break}}}function gh(d){var p=d.prev,C=d,N=d.next;if(ir(p,C,N)>=0)return!1;for(var Q=d.next.next;Q!==d.prev;){if(un(p.x,p.y,C.x,C.y,N.x,N.y,Q.x,Q.y)&&ir(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function Sf(d,p,C,N){var Q=d.prev,ct=d,Tt=d.next;if(ir(Q,ct,Tt)>=0)return!1;for(var Bt=Q.x>ct.x?Q.x>Tt.x?Q.x:Tt.x:ct.x>Tt.x?ct.x:Tt.x,Jt=Q.y>ct.y?Q.y>Tt.y?Q.y:Tt.y:ct.y>Tt.y?ct.y:Tt.y,ve=Xt(Q.x<ct.x?Q.x<Tt.x?Q.x:Tt.x:ct.x<Tt.x?ct.x:Tt.x,Q.y<ct.y?Q.y<Tt.y?Q.y:Tt.y:ct.y<Tt.y?ct.y:Tt.y,p,C,N),Re=Xt(Bt,Jt,p,C,N),Ge=d.prevZ,He=d.nextZ;Ge&&Ge.z>=ve&&He&&He.z<=Re;){if(Ge!==d.prev&&Ge!==d.next&&un(Q.x,Q.y,ct.x,ct.y,Tt.x,Tt.y,Ge.x,Ge.y)&&ir(Ge.prev,Ge,Ge.next)>=0||(Ge=Ge.prevZ,He!==d.prev&&He!==d.next&&un(Q.x,Q.y,ct.x,ct.y,Tt.x,Tt.y,He.x,He.y)&&ir(He.prev,He,He.next)>=0))return!1;He=He.nextZ}for(;Ge&&Ge.z>=ve;){if(Ge!==d.prev&&Ge!==d.next&&un(Q.x,Q.y,ct.x,ct.y,Tt.x,Tt.y,Ge.x,Ge.y)&&ir(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.prevZ}for(;He&&He.z<=Re;){if(He!==d.prev&&He!==d.next&&un(Q.x,Q.y,ct.x,ct.y,Tt.x,Tt.y,He.x,He.y)&&ir(He.prev,He,He.next)>=0)return!1;He=He.nextZ}return!0}function Vf(d,p,C){var N=d;do{var Q=N.prev,ct=N.next.next;!vr(Q,ct)&&ti(Q,N,N.next,ct)&&ua(Q,ct)&&ua(ct,Q)&&(p.push(Q.i/C),p.push(N.i/C),p.push(ct.i/C),Xa(N),Xa(N.next),N=d=ct),N=N.next}while(N!==d);return Vc(N)}function Qf(d,p,C,N,Q,ct){var Tt=d;do{for(var Bt=Tt.next.next;Bt!==Tt.prev;){if(Tt.i!==Bt.i&&Zn(Tt,Bt)){var Jt=la(Tt,Bt);return Tt=Vc(Tt,Tt.next),Jt=Vc(Jt,Jt.next),Ef(Tt,p,C,N,Q,ct),void Ef(Jt,p,C,N,Q,ct)}Bt=Bt.next}Tt=Tt.next}while(Tt!==d)}function pe(d,p){return d.x-p.x}function ye(d,p){if(p=function(N,Q){var ct,Tt=Q,Bt=N.x,Jt=N.y,ve=-1/0;do{if(Jt<=Tt.y&&Jt>=Tt.next.y&&Tt.next.y!==Tt.y){var Re=Tt.x+(Jt-Tt.y)*(Tt.next.x-Tt.x)/(Tt.next.y-Tt.y);if(Re<=Bt&&Re>ve){if(ve=Re,Re===Bt){if(Jt===Tt.y)return Tt;if(Jt===Tt.next.y)return Tt.next}ct=Tt.x<Tt.next.x?Tt:Tt.next}}Tt=Tt.next}while(Tt!==Q);if(!ct)return null;if(Bt===ve)return ct;var Ge,He=ct,ln=ct.x,Ln=ct.y,Cn=1/0;Tt=ct;do Bt>=Tt.x&&Tt.x>=ln&&Bt!==Tt.x&&un(Jt<Ln?Bt:ve,Jt,ln,Ln,Jt<Ln?ve:Bt,Jt,Tt.x,Tt.y)&&(Ge=Math.abs(Jt-Tt.y)/(Bt-Tt.x),ua(Tt,N)&&(Ge<Cn||Ge===Cn&&(Tt.x>ct.x||Tt.x===ct.x&&Vt(ct,Tt)))&&(ct=Tt,Cn=Ge)),Tt=Tt.next;while(Tt!==He);return ct}(d,p)){var C=la(p,d);Vc(p,p.next),Vc(C,C.next)}}function Vt(d,p){return ir(d.prev,d,p.prev)<0&&ir(p.next,d,d.next)<0}function Xt(d,p,C,N,Q){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-C)*Q)|d<<8))|d<<4))|d<<2))|d<<1))|(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=32767*(p-N)*Q)|p<<8))|p<<4))|p<<2))|p<<1))<<1}function Ue(d){var p=d,C=d;do(p.x<C.x||p.x===C.x&&p.y<C.y)&&(C=p),p=p.next;while(p!==d);return C}function un(d,p,C,N,Q,ct,Tt,Bt){return(Q-Tt)*(p-Bt)-(d-Tt)*(ct-Bt)>=0&&(d-Tt)*(N-Bt)-(C-Tt)*(p-Bt)>=0&&(C-Tt)*(ct-Bt)-(Q-Tt)*(N-Bt)>=0}function Zn(d,p){return d.next.i!==p.i&&d.prev.i!==p.i&&!function(C,N){var Q=C;do{if(Q.i!==C.i&&Q.next.i!==C.i&&Q.i!==N.i&&Q.next.i!==N.i&&ti(Q,Q.next,C,N))return!0;Q=Q.next}while(Q!==C);return!1}(d,p)&&(ua(d,p)&&ua(p,d)&&function(C,N){var Q=C,ct=!1,Tt=(C.x+N.x)/2,Bt=(C.y+N.y)/2;do Q.y>Bt!=Q.next.y>Bt&&Q.next.y!==Q.y&&Tt<(Q.next.x-Q.x)*(Bt-Q.y)/(Q.next.y-Q.y)+Q.x&&(ct=!ct),Q=Q.next;while(Q!==C);return ct}(d,p)&&(ir(d.prev,d,p.prev)||ir(d,p.prev,p))||vr(d,p)&&ir(d.prev,d,d.next)>0&&ir(p.prev,p,p.next)>0)}function ir(d,p,C){return(p.y-d.y)*(C.x-p.x)-(p.x-d.x)*(C.y-p.y)}function vr(d,p){return d.x===p.x&&d.y===p.y}function ti(d,p,C,N){var Q=Ji(ir(d,p,C)),ct=Ji(ir(d,p,N)),Tt=Ji(ir(C,N,d)),Bt=Ji(ir(C,N,p));return Q!==ct&&Tt!==Bt||!(Q!==0||!Ci(d,C,p))||!(ct!==0||!Ci(d,N,p))||!(Tt!==0||!Ci(C,d,N))||!(Bt!==0||!Ci(C,p,N))}function Ci(d,p,C){return p.x<=Math.max(d.x,C.x)&&p.x>=Math.min(d.x,C.x)&&p.y<=Math.max(d.y,C.y)&&p.y>=Math.min(d.y,C.y)}function Ji(d){return d>0?1:d<0?-1:0}function ua(d,p){return ir(d.prev,d,d.next)<0?ir(d,p,d.next)>=0&&ir(d,d.prev,p)>=0:ir(d,p,d.prev)<0||ir(d,d.next,p)<0}function la(d,p){var C=new Ho(d.i,d.x,d.y),N=new Ho(p.i,p.x,p.y),Q=d.next,ct=p.prev;return d.next=p,p.prev=d,C.next=Q,Q.prev=C,N.next=C,C.prev=N,ct.next=N,N.prev=ct,N}function qa(d,p,C,N){var Q=new Ho(d,p,C);return N?(Q.next=N.next,Q.prev=N,N.next.prev=Q,N.next=Q):(Q.prev=Q,Q.next=Q),Q}function Xa(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function Ho(d,p,C){this.i=d,this.x=p,this.y=C,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wo(d,p,C,N){for(var Q=0,ct=p,Tt=C-N;ct<C;ct+=N)Q+=(d[Tt]-d[ct])*(d[ct+1]+d[Tt+1]),Tt=ct;return Q}function Su(d,p,C,N,Q){(function ct(Tt,Bt,Jt,ve,Re){for(;ve>Jt;){if(ve-Jt>600){var Ge=ve-Jt+1,He=Bt-Jt+1,ln=Math.log(Ge),Ln=.5*Math.exp(2*ln/3),Cn=.5*Math.sqrt(ln*Ln*(Ge-Ln)/Ge)*(He-Ge/2<0?-1:1);ct(Tt,Bt,Math.max(Jt,Math.floor(Bt-He*Ln/Ge+Cn)),Math.min(ve,Math.floor(Bt+(Ge-He)*Ln/Ge+Cn)),Re)}var Kn=Tt[Bt],Yn=Jt,_r=ve;for(Xs(Tt,Jt,Bt),Re(Tt[ve],Kn)>0&&Xs(Tt,Jt,ve);Yn<_r;){for(Xs(Tt,Yn,_r),Yn++,_r--;Re(Tt[Yn],Kn)<0;)Yn++;for(;Re(Tt[_r],Kn)>0;)_r--}Re(Tt[Jt],Kn)===0?Xs(Tt,Jt,_r):Xs(Tt,++_r,ve),_r<=Bt&&(Jt=_r+1),Bt<=_r&&(ve=_r-1)}})(d,p,C||0,N||d.length-1,Q||ku)}function Xs(d,p,C){var N=d[p];d[p]=d[C],d[C]=N}function ku(d,p){return d<p?-1:d>p?1:0}function hu(d,p){var C=d.length;if(C<=1)return[d];for(var N,Q,ct=[],Tt=0;Tt<C;Tt++){var Bt=H(d[Tt]);Bt!==0&&(d[Tt].area=Math.abs(Bt),Q===void 0&&(Q=Bt<0),Q===Bt<0?(N&&ct.push(N),N=[d[Tt]]):N.push(d[Tt]))}if(N&&ct.push(N),p>1)for(var Jt=0;Jt<ct.length;Jt++)ct[Jt].length<=p||(Su(ct[Jt],p,1,ct[Jt].length-1,Gu),ct[Jt]=ct[Jt].slice(0,p));return ct}function Gu(d,p){return p.area-d.area}function Zo(d,p,C){for(var N=C.patternDependencies,Q=!1,ct=0,Tt=p;ct<Tt.length;ct+=1){var Bt=Tt[ct].paint.get(d+"-pattern");Bt.isConstant()||(Q=!0);var Jt=Bt.constantOr(null);Jt&&(Q=!0,N[Jt.to]=!0,N[Jt.from]=!0)}return Q}function lo(d,p,C,N,Q){for(var ct=Q.patternDependencies,Tt=0,Bt=p;Tt<Bt.length;Tt+=1){var Jt=Bt[Tt],ve=Jt.paint.get(d+"-pattern").value;if(ve.kind!=="constant"){var Re=ve.evaluate({zoom:N-1},C,{},Q.availableImages),Ge=ve.evaluate({zoom:N},C,{},Q.availableImages),He=ve.evaluate({zoom:N+1},C,{},Q.availableImages);Ge=Ge&&Ge.name?Ge.name:Ge,He=He&&He.name?He.name:He,ct[Re=Re&&Re.name?Re.name:Re]=!0,ct[Ge]=!0,ct[He]=!0,C.patterns[Jt.id]={min:Re,mid:Ge,max:He}}}return C}Jc.deviation=function(d,p,C,N){var Q=p&&p.length,ct=Math.abs(wo(d,0,Q?p[0]*C:d.length,C));if(Q)for(var Tt=0,Bt=p.length;Tt<Bt;Tt++)ct-=Math.abs(wo(d,p[Tt]*C,Tt<Bt-1?p[Tt+1]*C:d.length,C));var Jt=0;for(Tt=0;Tt<N.length;Tt+=3){var ve=N[Tt]*C,Re=N[Tt+1]*C,Ge=N[Tt+2]*C;Jt+=Math.abs((d[ve]-d[Ge])*(d[Re+1]-d[ve+1])-(d[ve]-d[Re])*(d[Ge+1]-d[ve+1]))}return ct===0&&Jt===0?0:Math.abs((Jt-ct)/ct)},Jc.flatten=function(d){for(var p=d[0][0].length,C={vertices:[],holes:[],dimensions:p},N=0,Q=0;Q<d.length;Q++){for(var ct=0;ct<d[Q].length;ct++)for(var Tt=0;Tt<p;Tt++)C.vertices.push(d[Q][ct][Tt]);Q>0&&C.holes.push(N+=d[Q-1].length)}return C},Xc.default=Gf;var Bs=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new br,this.indexArray=new Ga,this.indexArray2=new Fs,this.programConfigurations=new La(p.layers,p.zoom),this.segments=new Zt,this.segments2=new Zt,this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};Bs.prototype.populate=function(d,p,C){this.hasPattern=Zo("fill",this.layers,p);for(var N=this.layers[0].layout.get("fill-sort-key"),Q=[],ct=0,Tt=d;ct<Tt.length;ct+=1){var Bt=Tt[ct],Jt=Bt.feature,ve=Bt.id,Re=Bt.index,Ge=Bt.sourceLayerIndex,He=this.layers[0]._featureFilter.needGeometry,ln=nu(Jt,He);if(this.layers[0]._featureFilter.filter(new yr(this.zoom),ln,C)){var Ln=N?N.evaluate(ln,{},C,p.availableImages):void 0,Cn={id:ve,properties:Jt.properties,type:Jt.type,sourceLayerIndex:Ge,index:Re,geometry:He?ln.geometry:ms(Jt),patterns:{},sortKey:Ln};Q.push(Cn)}}N&&Q.sort(function(Ni,Fi){return Ni.sortKey-Fi.sortKey});for(var Kn=0,Yn=Q;Kn<Yn.length;Kn+=1){var _r=Yn[Kn],Nr=_r.geometry,Yr=_r.index,vi=_r.sourceLayerIndex;if(this.hasPattern){var si=lo("fill",this.layers,_r,this.zoom,p);this.patternFeatures.push(si)}else this.addFeature(_r,Nr,Yr,C,{});p.featureIndex.insert(d[Yr].feature,Nr,Yr,vi,this.index)}},Bs.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},Bs.prototype.addFeatures=function(d,p,C){for(var N=0,Q=this.patternFeatures;N<Q.length;N+=1){var ct=Q[N];this.addFeature(ct,ct.geometry,ct.index,p,C)}},Bs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Bs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Bs.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,cf),this.indexBuffer=d.createIndexBuffer(this.indexArray),this.indexBuffer2=d.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(d),this.uploaded=!0},Bs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Bs.prototype.addFeature=function(d,p,C,N,Q){for(var ct=0,Tt=hu(p,500);ct<Tt.length;ct+=1){for(var Bt=Tt[ct],Jt=0,ve=0,Re=Bt;ve<Re.length;ve+=1)Jt+=Re[ve].length;for(var Ge=this.segments.prepareSegment(Jt,this.layoutVertexArray,this.indexArray),He=Ge.vertexLength,ln=[],Ln=[],Cn=0,Kn=Bt;Cn<Kn.length;Cn+=1){var Yn=Kn[Cn];if(Yn.length!==0){Yn!==Bt[0]&&Ln.push(ln.length/2);var _r=this.segments2.prepareSegment(Yn.length,this.layoutVertexArray,this.indexArray2),Nr=_r.vertexLength;this.layoutVertexArray.emplaceBack(Yn[0].x,Yn[0].y),this.indexArray2.emplaceBack(Nr+Yn.length-1,Nr),ln.push(Yn[0].x),ln.push(Yn[0].y);for(var Yr=1;Yr<Yn.length;Yr++)this.layoutVertexArray.emplaceBack(Yn[Yr].x,Yn[Yr].y),this.indexArray2.emplaceBack(Nr+Yr-1,Nr+Yr),ln.push(Yn[Yr].x),ln.push(Yn[Yr].y);_r.vertexLength+=Yn.length,_r.primitiveLength+=Yn.length}}for(var vi=Xc(ln,Ln),si=0;si<vi.length;si+=3)this.indexArray.emplaceBack(He+vi[si],He+vi[si+1],He+vi[si+2]);Ge.vertexLength+=Jt,Ge.primitiveLength+=vi.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,Q,N)},Wi("FillBucket",Bs,{omit:["layers","patternFeatures"]});var _u=new pn({"fill-sort-key":new Fe(ue.layout_fill["fill-sort-key"])}),Sl={paint:new pn({"fill-antialias":new he(ue.paint_fill["fill-antialias"]),"fill-opacity":new Fe(ue.paint_fill["fill-opacity"]),"fill-color":new Fe(ue.paint_fill["fill-color"]),"fill-outline-color":new Fe(ue.paint_fill["fill-outline-color"]),"fill-translate":new he(ue.paint_fill["fill-translate"]),"fill-translate-anchor":new he(ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ze(ue.paint_fill["fill-pattern"])}),layout:_u},Yl=function(d){function p(C){d.call(this,C,Sl)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.recalculate=function(C,N){d.prototype.recalculate.call(this,C,N);var Q=this.paint._values["fill-outline-color"];Q.value.kind==="constant"&&Q.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},p.prototype.createBucket=function(C){return new Bs(C)},p.prototype.queryRadius=function(){return lu(this.paint.get("fill-translate"))},p.prototype.queryIntersectsFeature=function(C,N,Q,ct,Tt,Bt,Jt){return wl(cu(C,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Bt.angle,Jt),ct)},p.prototype.isTileClipped=function(){return!0},p}(fn),Mc=Gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Pc=Uc;function Uc(d,p,C,N,Q){this.properties={},this.extent=C,this.type=0,this._pbf=d,this._geometry=-1,this._keys=N,this._values=Q,d.readFields(wf,this,p)}function wf(d,p,C){d==1?p.id=C.readVarint():d==2?function(N,Q){for(var ct=N.readVarint()+N.pos;N.pos<ct;){var Tt=Q._keys[N.readVarint()],Bt=Q._values[N.readVarint()];Q.properties[Tt]=Bt}}(C,p):d==3?p.type=C.readVarint():d==4&&(p._geometry=C.pos)}function ff(d){for(var p,C,N=0,Q=0,ct=d.length,Tt=ct-1;Q<ct;Tt=Q++)N+=((C=d[Tt]).x-(p=d[Q]).x)*(p.y+C.y);return N}Uc.types=["Unknown","Point","LineString","Polygon"],Uc.prototype.loadGeometry=function(){var d=this._pbf;d.pos=this._geometry;for(var p,C=d.readVarint()+d.pos,N=1,Q=0,ct=0,Tt=0,Bt=[];d.pos<C;){if(Q<=0){var Jt=d.readVarint();N=7&Jt,Q=Jt>>3}if(Q--,N===1||N===2)ct+=d.readSVarint(),Tt+=d.readSVarint(),N===1&&(p&&Bt.push(p),p=[]),p.push(new r(ct,Tt));else{if(N!==7)throw new Error("unknown command "+N);p&&p.push(p[0].clone())}}return p&&Bt.push(p),Bt},Uc.prototype.bbox=function(){var d=this._pbf;d.pos=this._geometry;for(var p=d.readVarint()+d.pos,C=1,N=0,Q=0,ct=0,Tt=1/0,Bt=-1/0,Jt=1/0,ve=-1/0;d.pos<p;){if(N<=0){var Re=d.readVarint();C=7&Re,N=Re>>3}if(N--,C===1||C===2)(Q+=d.readSVarint())<Tt&&(Tt=Q),Q>Bt&&(Bt=Q),(ct+=d.readSVarint())<Jt&&(Jt=ct),ct>ve&&(ve=ct);else if(C!==7)throw new Error("unknown command "+C)}return[Tt,Jt,Bt,ve]},Uc.prototype.toGeoJSON=function(d,p,C){var N,Q,ct=this.extent*Math.pow(2,C),Tt=this.extent*d,Bt=this.extent*p,Jt=this.loadGeometry(),ve=Uc.types[this.type];function Re(ln){for(var Ln=0;Ln<ln.length;Ln++){var Cn=ln[Ln];ln[Ln]=[360*(Cn.x+Tt)/ct-180,360/Math.PI*Math.atan(Math.exp((180-360*(Cn.y+Bt)/ct)*Math.PI/180))-90]}}switch(this.type){case 1:var Ge=[];for(N=0;N<Jt.length;N++)Ge[N]=Jt[N][0];Re(Jt=Ge);break;case 2:for(N=0;N<Jt.length;N++)Re(Jt[N]);break;case 3:for(Jt=function(ln){var Ln=ln.length;if(Ln<=1)return[ln];for(var Cn,Kn,Yn=[],_r=0;_r<Ln;_r++){var Nr=ff(ln[_r]);Nr!==0&&(Kn===void 0&&(Kn=Nr<0),Kn===Nr<0?(Cn&&Yn.push(Cn),Cn=[ln[_r]]):Cn.push(ln[_r]))}return Cn&&Yn.push(Cn),Yn}(Jt),N=0;N<Jt.length;N++)for(Q=0;Q<Jt[N].length;Q++)Re(Jt[N][Q])}Jt.length===1?Jt=Jt[0]:ve="Multi"+ve;var He={type:"Feature",geometry:{type:ve,coordinates:Jt},properties:this.properties};return"id"in this&&(He.id=this.id),He};var Wf=qf;function qf(d,p){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(Hf,this,p),this.length=this._features.length}function Hf(d,p,C){d===15?p.version=C.readVarint():d===1?p.name=C.readString():d===5?p.extent=C.readVarint():d===2?p._features.push(C.pos):d===3?p._keys.push(C.readString()):d===4&&p._values.push(function(N){for(var Q=null,ct=N.readVarint()+N.pos;N.pos<ct;){var Tt=N.readVarint()>>3;Q=Tt===1?N.readString():Tt===2?N.readFloat():Tt===3?N.readDouble():Tt===4?N.readVarint64():Tt===5?N.readVarint():Tt===6?N.readSVarint():Tt===7?N.readBoolean():null}return Q}(C))}function sc(d,p,C){if(d===3){var N=new Wf(C,C.readVarint()+C.pos);N.length&&(p[N.name]=N)}}qf.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var p=this._pbf.readVarint()+this._pbf.pos;return new Pc(this._pbf,p,this.extent,this._keys,this._values)};var _f={VectorTile:function(p,C){this.layers=p.readFields(sc,{},C)},VectorTileFeature:Pc,VectorTileLayer:Wf},of=_f.VectorTileFeature.types,qc=Math.pow(2,13);function pf(d,p,C,N,Q,ct,Tt,Bt){d.emplaceBack(p,C,2*Math.floor(N*qc)+Tt,Q*qc*2,ct*qc*2,Math.round(Bt))}var Lc=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.layoutVertexArray=new mi,this.indexArray=new Ga,this.programConfigurations=new La(p.layers,p.zoom),this.segments=new Zt,this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};function Yf(d,p){return d.x===p.x&&(d.x<0||d.x>8192)||d.y===p.y&&(d.y<0||d.y>8192)}Lc.prototype.populate=function(d,p,C){this.features=[],this.hasPattern=Zo("fill-extrusion",this.layers,p);for(var N=0,Q=d;N<Q.length;N+=1){var ct=Q[N],Tt=ct.feature,Bt=ct.id,Jt=ct.index,ve=ct.sourceLayerIndex,Re=this.layers[0]._featureFilter.needGeometry,Ge=nu(Tt,Re);if(this.layers[0]._featureFilter.filter(new yr(this.zoom),Ge,C)){var He={id:Bt,sourceLayerIndex:ve,index:Jt,geometry:Re?Ge.geometry:ms(Tt),properties:Tt.properties,type:Tt.type,patterns:{}};this.hasPattern?this.features.push(lo("fill-extrusion",this.layers,He,this.zoom,p)):this.addFeature(He,He.geometry,Jt,C,{}),p.featureIndex.insert(Tt,He.geometry,Jt,ve,this.index,!0)}}},Lc.prototype.addFeatures=function(d,p,C){for(var N=0,Q=this.features;N<Q.length;N+=1){var ct=Q[N];this.addFeature(ct,ct.geometry,ct.index,p,C)}},Lc.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},Lc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Lc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Lc.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Mc),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},Lc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Lc.prototype.addFeature=function(d,p,C,N,Q){for(var ct=0,Tt=hu(p,500);ct<Tt.length;ct+=1){for(var Bt=Tt[ct],Jt=0,ve=0,Re=Bt;ve<Re.length;ve+=1)Jt+=Re[ve].length;for(var Ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),He=0,ln=Bt;He<ln.length;He+=1){var Ln=ln[He];if(Ln.length!==0&&!((es=Ln).every(function(yo){return yo.x<0})||es.every(function(yo){return yo.x>8192})||es.every(function(yo){return yo.y<0})||es.every(function(yo){return yo.y>8192})))for(var Cn=0,Kn=0;Kn<Ln.length;Kn++){var Yn=Ln[Kn];if(Kn>=1){var _r=Ln[Kn-1];if(!Yf(Yn,_r)){Ge.vertexLength+4>Zt.MAX_VERTEX_ARRAY_LENGTH&&(Ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Nr=Yn.sub(_r)._perp()._unit(),Yr=_r.dist(Yn);Cn+Yr>32768&&(Cn=0),pf(this.layoutVertexArray,Yn.x,Yn.y,Nr.x,Nr.y,0,0,Cn),pf(this.layoutVertexArray,Yn.x,Yn.y,Nr.x,Nr.y,0,1,Cn),pf(this.layoutVertexArray,_r.x,_r.y,Nr.x,Nr.y,0,0,Cn+=Yr),pf(this.layoutVertexArray,_r.x,_r.y,Nr.x,Nr.y,0,1,Cn);var vi=Ge.vertexLength;this.indexArray.emplaceBack(vi,vi+2,vi+1),this.indexArray.emplaceBack(vi+1,vi+2,vi+3),Ge.vertexLength+=4,Ge.primitiveLength+=2}}}}if(Ge.vertexLength+Jt>Zt.MAX_VERTEX_ARRAY_LENGTH&&(Ge=this.segments.prepareSegment(Jt,this.layoutVertexArray,this.indexArray)),of[d.type]==="Polygon"){for(var si=[],Ni=[],Fi=Ge.vertexLength,ia=0,pa=Bt;ia<pa.length;ia+=1){var va=pa[ia];if(va.length!==0){va!==Bt[0]&&Ni.push(si.length/2);for(var qi=0;qi<va.length;qi++){var eo=va[qi];pf(this.layoutVertexArray,eo.x,eo.y,0,0,1,1,0),si.push(eo.x),si.push(eo.y)}}}for(var wa=Xc(si,Ni),ya=0;ya<wa.length;ya+=3)this.indexArray.emplaceBack(Fi+wa[ya],Fi+wa[ya+2],Fi+wa[ya+1]);Ge.primitiveLength+=wa.length/3,Ge.vertexLength+=Jt}}var es;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,Q,N)},Wi("FillExtrusionBucket",Lc,{omit:["layers","features"]});var If={paint:new pn({"fill-extrusion-opacity":new he(ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Fe(ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new he(ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new he(ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ze(ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Fe(ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Fe(ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new he(ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Tc=function(d){function p(C){d.call(this,C,If)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new Lc(C)},p.prototype.queryRadius=function(){return lu(this.paint.get("fill-extrusion-translate"))},p.prototype.is3D=function(){return!0},p.prototype.queryIntersectsFeature=function(C,N,Q,ct,Tt,Bt,Jt,ve){var Re=cu(C,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Bt.angle,Jt),Ge=this.paint.get("fill-extrusion-height").evaluate(N,Q),He=this.paint.get("fill-extrusion-base").evaluate(N,Q),ln=function(Cn,Kn,Yn,_r){for(var Nr=[],Yr=0,vi=Cn;Yr<vi.length;Yr+=1){var si=vi[Yr],Ni=[si.x,si.y,0,1];Jl(Ni,Ni,Kn),Nr.push(new r(Ni[0]/Ni[3],Ni[1]/Ni[3]))}return Nr}(Re,ve),Ln=function(Cn,Kn,Yn,_r){for(var Nr=[],Yr=[],vi=_r[8]*Kn,si=_r[9]*Kn,Ni=_r[10]*Kn,Fi=_r[11]*Kn,ia=_r[8]*Yn,pa=_r[9]*Yn,va=_r[10]*Yn,qi=_r[11]*Yn,eo=0,wa=Cn;eo<wa.length;eo+=1){for(var ya=[],es=[],yo=0,Us=wa[eo];yo<Us.length;yo+=1){var Va=Us[yo],ko=Va.x,Iu=Va.y,Lu=_r[0]*ko+_r[4]*Iu+_r[12],el=_r[1]*ko+_r[5]*Iu+_r[13],hl=_r[2]*ko+_r[6]*Iu+_r[14],Rl=_r[3]*ko+_r[7]*Iu+_r[15],Kl=hl+Ni,dl=Rl+Fi,hc=Lu+ia,zl=el+pa,Dc=hl+va,ec=Rl+qi,Ul=new r((Lu+vi)/dl,(el+si)/dl);Ul.z=Kl/dl,ya.push(Ul);var dc=new r(hc/ec,zl/ec);dc.z=Dc/ec,es.push(dc)}Nr.push(ya),Yr.push(es)}return[Nr,Yr]}(ct,He,Ge,ve);return function(Cn,Kn,Yn){var _r=1/0;wl(Yn,Kn)&&(_r=cl(Yn,Kn[0]));for(var Nr=0;Nr<Kn.length;Nr++)for(var Yr=Kn[Nr],vi=Cn[Nr],si=0;si<Yr.length-1;si++){var Ni=Yr[si],Fi=[Ni,Yr[si+1],vi[si+1],vi[si],Ni];_c(Yn,Fi)&&(_r=Math.min(_r,cl(Yn,Fi)))}return _r!==1/0&&_r}(Ln[0],Ln[1],ln)},p}(fn);function kc(d,p){return d.x*p.x+d.y*p.y}function cl(d,p){if(d.length===1){for(var C,N=0,Q=p[N++];!C||Q.equals(C);)if(!(C=p[N++]))return 1/0;for(;N<p.length;N++){var ct=p[N],Tt=d[0],Bt=C.sub(Q),Jt=ct.sub(Q),ve=Tt.sub(Q),Re=kc(Bt,Bt),Ge=kc(Bt,Jt),He=kc(Jt,Jt),ln=kc(ve,Bt),Ln=kc(ve,Jt),Cn=Re*He-Ge*Ge,Kn=(He*ln-Ge*Ln)/Cn,Yn=(Re*Ln-Ge*ln)/Cn,_r=Q.z*(1-Kn-Yn)+C.z*Kn+ct.z*Yn;if(isFinite(_r))return _r}return 1/0}for(var Nr=1/0,Yr=0,vi=p;Yr<vi.length;Yr+=1)Nr=Math.min(Nr,vi[Yr].z);return Nr}var Oc=Gn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Lf=Gn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,th=_f.VectorTileFeature.types,eh=Math.cos(Math.PI/180*37.5),nh=Math.pow(2,14)/.5,Ac=function(p){var C=this;this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=p.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(N){C.gradients[N.id]={}}),this.layoutVertexArray=new jr,this.layoutVertexArray2=new oi,this.indexArray=new Ga,this.programConfigurations=new La(p.layers,p.zoom),this.segments=new Zt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};Ac.prototype.populate=function(d,p,C){this.hasPattern=Zo("line",this.layers,p);for(var N=this.layers[0].layout.get("line-sort-key"),Q=[],ct=0,Tt=d;ct<Tt.length;ct+=1){var Bt=Tt[ct],Jt=Bt.feature,ve=Bt.id,Re=Bt.index,Ge=Bt.sourceLayerIndex,He=this.layers[0]._featureFilter.needGeometry,ln=nu(Jt,He);if(this.layers[0]._featureFilter.filter(new yr(this.zoom),ln,C)){var Ln=N?N.evaluate(ln,{},C):void 0,Cn={id:ve,properties:Jt.properties,type:Jt.type,sourceLayerIndex:Ge,index:Re,geometry:He?ln.geometry:ms(Jt),patterns:{},sortKey:Ln};Q.push(Cn)}}N&&Q.sort(function(Ni,Fi){return Ni.sortKey-Fi.sortKey});for(var Kn=0,Yn=Q;Kn<Yn.length;Kn+=1){var _r=Yn[Kn],Nr=_r.geometry,Yr=_r.index,vi=_r.sourceLayerIndex;if(this.hasPattern){var si=lo("line",this.layers,_r,this.zoom,p);this.patternFeatures.push(si)}else this.addFeature(_r,Nr,Yr,C,{});p.featureIndex.insert(d[Yr].feature,Nr,Yr,vi,this.index)}},Ac.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},Ac.prototype.addFeatures=function(d,p,C){for(var N=0,Q=this.patternFeatures;N<Q.length;N+=1){var ct=Q[N];this.addFeature(ct,ct.geometry,ct.index,p,C)}},Ac.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ac.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ac.prototype.upload=function(d){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=d.createVertexBuffer(this.layoutVertexArray2,Lf)),this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Oc),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},Ac.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ac.prototype.lineFeatureClips=function(d){if(d.properties&&d.properties.hasOwnProperty("mapbox_clip_start")&&d.properties.hasOwnProperty("mapbox_clip_end"))return{start:+d.properties.mapbox_clip_start,end:+d.properties.mapbox_clip_end}},Ac.prototype.addFeature=function(d,p,C,N,Q){var ct=this.layers[0].layout,Tt=ct.get("line-join").evaluate(d,{}),Bt=ct.get("line-cap"),Jt=ct.get("line-miter-limit"),ve=ct.get("line-round-limit");this.lineClips=this.lineFeatureClips(d);for(var Re=0,Ge=p;Re<Ge.length;Re+=1)this.addLine(Ge[Re],d,Tt,Bt,Jt,ve);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,Q,N)},Ac.prototype.addLine=function(d,p,C,N,Q,ct){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Tt=0;Tt<d.length-1;Tt++)this.totalDistance+=d[Tt].dist(d[Tt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Bt=th[p.type]==="Polygon",Jt=d.length;Jt>=2&&d[Jt-1].equals(d[Jt-2]);)Jt--;for(var ve=0;ve<Jt-1&&d[ve].equals(d[ve+1]);)ve++;if(!(Jt<(Bt?3:2))){C==="bevel"&&(Q=1.05);var Re,Ge=this.overscaling<=16?122880/(512*this.overscaling):0,He=this.segments.prepareSegment(10*Jt,this.layoutVertexArray,this.indexArray),ln=void 0,Ln=void 0,Cn=void 0,Kn=void 0;this.e1=this.e2=-1,Bt&&(Kn=d[ve].sub(Re=d[Jt-2])._unit()._perp());for(var Yn=ve;Yn<Jt;Yn++)if(!(Ln=Yn===Jt-1?Bt?d[ve+1]:void 0:d[Yn+1])||!d[Yn].equals(Ln)){Kn&&(Cn=Kn),Re&&(ln=Re),Re=d[Yn],Kn=Ln?Ln.sub(Re)._unit()._perp():Cn;var _r=(Cn=Cn||Kn).add(Kn);_r.x===0&&_r.y===0||_r._unit();var Nr=Cn.x*Kn.x+Cn.y*Kn.y,Yr=_r.x*Kn.x+_r.y*Kn.y,vi=Yr!==0?1/Yr:1/0,si=2*Math.sqrt(2-2*Yr),Ni=Yr<eh&&ln&&Ln,Fi=Cn.x*Kn.y-Cn.y*Kn.x>0;if(Ni&&Yn>ve){var ia=Re.dist(ln);if(ia>2*Ge){var pa=Re.sub(Re.sub(ln)._mult(Ge/ia)._round());this.updateDistance(ln,pa),this.addCurrentVertex(pa,Cn,0,0,He),ln=pa}}var va=ln&&Ln,qi=va?C:Bt?"butt":N;if(va&&qi==="round"&&(vi<ct?qi="miter":vi<=2&&(qi="fakeround")),qi==="miter"&&vi>Q&&(qi="bevel"),qi==="bevel"&&(vi>2&&(qi="flipbevel"),vi<Q&&(qi="miter")),ln&&this.updateDistance(ln,Re),qi==="miter")_r._mult(vi),this.addCurrentVertex(Re,_r,0,0,He);else if(qi==="flipbevel"){if(vi>100)_r=Kn.mult(-1);else{var eo=vi*Cn.add(Kn).mag()/Cn.sub(Kn).mag();_r._perp()._mult(eo*(Fi?-1:1))}this.addCurrentVertex(Re,_r,0,0,He),this.addCurrentVertex(Re,_r.mult(-1),0,0,He)}else if(qi==="bevel"||qi==="fakeround"){var wa=-Math.sqrt(vi*vi-1),ya=Fi?wa:0,es=Fi?0:wa;if(ln&&this.addCurrentVertex(Re,Cn,ya,es,He),qi==="fakeround")for(var yo=Math.round(180*si/Math.PI/20),Us=1;Us<yo;Us++){var Va=Us/yo;if(Va!==.5){var ko=Va-.5;Va+=Va*ko*(Va-1)*((1.0904+Nr*(Nr*(3.55645-1.43519*Nr)-3.2452))*ko*ko+(.848013+Nr*(.215638*Nr-1.06021)))}var Iu=Kn.sub(Cn)._mult(Va)._add(Cn)._unit()._mult(Fi?-1:1);this.addHalfVertex(Re,Iu.x,Iu.y,!1,Fi,0,He)}Ln&&this.addCurrentVertex(Re,Kn,-ya,-es,He)}else if(qi==="butt")this.addCurrentVertex(Re,_r,0,0,He);else if(qi==="square"){var Lu=ln?1:-1;this.addCurrentVertex(Re,_r,Lu,Lu,He)}else qi==="round"&&(ln&&(this.addCurrentVertex(Re,Cn,0,0,He),this.addCurrentVertex(Re,Cn,1,1,He,!0)),Ln&&(this.addCurrentVertex(Re,Kn,-1,-1,He,!0),this.addCurrentVertex(Re,Kn,0,0,He)));if(Ni&&Yn<Jt-1){var el=Re.dist(Ln);if(el>2*Ge){var hl=Re.add(Ln.sub(Re)._mult(Ge/el)._round());this.updateDistance(Re,hl),this.addCurrentVertex(hl,Kn,0,0,He),Re=hl}}}}},Ac.prototype.addCurrentVertex=function(d,p,C,N,Q,ct){ct===void 0&&(ct=!1);var Tt=p.y*N-p.x,Bt=-p.y-p.x*N;this.addHalfVertex(d,p.x+p.y*C,p.y-p.x*C,ct,!1,C,Q),this.addHalfVertex(d,Tt,Bt,ct,!0,-N,Q),this.distance>nh/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(d,p,C,N,Q,ct))},Ac.prototype.addHalfVertex=function(d,p,C,N,Q,ct,Tt){var Bt=.5*(this.lineClips?this.scaledDistance*(nh-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((d.x<<1)+(N?1:0),(d.y<<1)+(Q?1:0),Math.round(63*p)+128,Math.round(63*C)+128,1+(ct===0?0:ct<0?-1:1)|(63&Bt)<<2,Bt>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Jt=Tt.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Jt),Tt.primitiveLength++),Q?this.e2=Jt:this.e1=Jt},Ac.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ac.prototype.updateDistance=function(d,p){this.distance+=d.dist(p),this.updateScaledDistance()},Wi("LineBucket",Ac,{omit:["layers","patternFeatures"]});var mh=new pn({"line-cap":new he(ue.layout_line["line-cap"]),"line-join":new Fe(ue.layout_line["line-join"]),"line-miter-limit":new he(ue.layout_line["line-miter-limit"]),"line-round-limit":new he(ue.layout_line["line-round-limit"]),"line-sort-key":new Fe(ue.layout_line["line-sort-key"])}),Ih={paint:new pn({"line-opacity":new Fe(ue.paint_line["line-opacity"]),"line-color":new Fe(ue.paint_line["line-color"]),"line-translate":new he(ue.paint_line["line-translate"]),"line-translate-anchor":new he(ue.paint_line["line-translate-anchor"]),"line-width":new Fe(ue.paint_line["line-width"]),"line-gap-width":new Fe(ue.paint_line["line-gap-width"]),"line-offset":new Fe(ue.paint_line["line-offset"]),"line-blur":new Fe(ue.paint_line["line-blur"]),"line-dasharray":new nn(ue.paint_line["line-dasharray"]),"line-pattern":new Ze(ue.paint_line["line-pattern"]),"line-gradient":new Je(ue.paint_line["line-gradient"])}),layout:mh},jt=new(function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.possiblyEvaluate=function(C,N){return N=new yr(Math.floor(N.zoom),{now:N.now,fadeDuration:N.fadeDuration,zoomHistory:N.zoomHistory,transition:N.transition}),d.prototype.possiblyEvaluate.call(this,C,N)},p.prototype.evaluate=function(C,N,Q,ct){return N=v({},N,{zoom:Math.floor(N.zoom)}),d.prototype.evaluate.call(this,C,N,Q,ct)},p}(Fe))(Ih.paint.properties["line-width"].specification);jt.useIntegerZoom=!0;var bt=function(d){function p(C){d.call(this,C,Ih),this.gradientVersion=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._handleSpecialPaintPropertyUpdate=function(C){C==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ao,this.gradientVersion=(this.gradientVersion+1)%i)},p.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},p.prototype.recalculate=function(C,N){d.prototype.recalculate.call(this,C,N),this.paint._values["line-floorwidth"]=jt.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,C)},p.prototype.createBucket=function(C){return new Ac(C)},p.prototype.queryRadius=function(C){var N=C,Q=X(gc("line-width",this,N),gc("line-gap-width",this,N)),ct=gc("line-offset",this,N);return Q/2+Math.abs(ct)+lu(this.paint.get("line-translate"))},p.prototype.queryIntersectsFeature=function(C,N,Q,ct,Tt,Bt,Jt){var ve=cu(C,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Bt.angle,Jt),Re=Jt/2*X(this.paint.get("line-width").evaluate(N,Q),this.paint.get("line-gap-width").evaluate(N,Q)),Ge=this.paint.get("line-offset").evaluate(N,Q);return Ge&&(ct=function(He,ln){for(var Ln=[],Cn=new r(0,0),Kn=0;Kn<He.length;Kn++){for(var Yn=He[Kn],_r=[],Nr=0;Nr<Yn.length;Nr++){var Yr=Yn[Nr],vi=Yn[Nr+1],si=Nr===0?Cn:Yr.sub(Yn[Nr-1])._unit()._perp(),Ni=Nr===Yn.length-1?Cn:vi.sub(Yr)._unit()._perp(),Fi=si._add(Ni)._unit();Fi._mult(1/(Fi.x*Ni.x+Fi.y*Ni.y)),_r.push(Fi._mult(ln)._add(Yr))}Ln.push(_r)}return Ln}(ct,Ge*Jt)),function(He,ln,Ln){for(var Cn=0;Cn<ln.length;Cn++){var Kn=ln[Cn];if(He.length>=3){for(var Yn=0;Yn<Kn.length;Yn++)if(Cc(He,Kn[Yn]))return!0}if(ac(He,Kn,Ln))return!0}return!1}(ve,ct,Re)},p.prototype.isTileClipped=function(){return!0},p}(fn);function X(d,p){return p>0?p+2*d:d}var Et=Gn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Lt=Gn([{name:"a_projected_pos",components:3,type:"Float32"}],4),ie=(Gn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Gn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),ze=(Gn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),yn=Gn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function dn(d,p,C){return d.sections.forEach(function(N){N.text=function(Q,ct,Tt){var Bt=ct.layout.get("text-transform").evaluate(Tt,{});return Bt==="uppercase"?Q=Q.toLocaleUpperCase():Bt==="lowercase"&&(Q=Q.toLocaleLowerCase()),li.applyArabicShaping&&(Q=li.applyArabicShaping(Q)),Q}(N.text,p,C)}),d}Gn([{name:"triangle",components:3,type:"Uint16"}]),Gn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Gn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Gn([{type:"Float32",name:"offsetX"}]),Gn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Pn={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Br=function(p,C,N,Q,ct){var Tt,Bt,Jt=8*ct-Q-1,ve=(1<<Jt)-1,Re=ve>>1,Ge=-7,He=N?ct-1:0,ln=N?-1:1,Ln=p[C+He];for(He+=ln,Tt=Ln&(1<<-Ge)-1,Ln>>=-Ge,Ge+=Jt;Ge>0;Tt=256*Tt+p[C+He],He+=ln,Ge-=8);for(Bt=Tt&(1<<-Ge)-1,Tt>>=-Ge,Ge+=Q;Ge>0;Bt=256*Bt+p[C+He],He+=ln,Ge-=8);if(Tt===0)Tt=1-Re;else{if(Tt===ve)return Bt?NaN:1/0*(Ln?-1:1);Bt+=Math.pow(2,Q),Tt-=Re}return(Ln?-1:1)*Bt*Math.pow(2,Tt-Q)},ce=function(p,C,N,Q,ct,Tt){var Bt,Jt,ve,Re=8*Tt-ct-1,Ge=(1<<Re)-1,He=Ge>>1,ln=ct===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ln=Q?0:Tt-1,Cn=Q?1:-1,Kn=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(Jt=isNaN(C)?1:0,Bt=Ge):(Bt=Math.floor(Math.log(C)/Math.LN2),C*(ve=Math.pow(2,-Bt))<1&&(Bt--,ve*=2),(C+=Bt+He>=1?ln/ve:ln*Math.pow(2,1-He))*ve>=2&&(Bt++,ve/=2),Bt+He>=Ge?(Jt=0,Bt=Ge):Bt+He>=1?(Jt=(C*ve-1)*Math.pow(2,ct),Bt+=He):(Jt=C*Math.pow(2,He-1)*Math.pow(2,ct),Bt=0));ct>=8;p[N+Ln]=255&Jt,Ln+=Cn,Jt/=256,ct-=8);for(Bt=Bt<<ct|Jt,Re+=ct;Re>0;p[N+Ln]=255&Bt,Ln+=Cn,Bt/=256,Re-=8);p[N+Ln-Cn]|=128*Kn},xe=Ke;function Ke(d){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(d)?d:new Uint8Array(d||0),this.pos=0,this.type=0,this.length=this.buf.length}Ke.Varint=0,Ke.Fixed64=1,Ke.Bytes=2,Ke.Fixed32=5;var zn=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function lr(d){return d.type===Ke.Bytes?d.readVarint()+d.pos:d.pos+1}function pr(d,p,C){return C?4294967296*p+(d>>>0):4294967296*(p>>>0)+(d>>>0)}function Qn(d,p,C){var N=p<=16383?1:p<=2097151?2:p<=268435455?3:Math.floor(Math.log(p)/(7*Math.LN2));C.realloc(N);for(var Q=C.pos-1;Q>=d;Q--)C.buf[Q+N]=C.buf[Q]}function Jr(d,p){for(var C=0;C<d.length;C++)p.writeVarint(d[C])}function qr(d,p){for(var C=0;C<d.length;C++)p.writeSVarint(d[C])}function ri(d,p){for(var C=0;C<d.length;C++)p.writeFloat(d[C])}function ui(d,p){for(var C=0;C<d.length;C++)p.writeDouble(d[C])}function yi(d,p){for(var C=0;C<d.length;C++)p.writeBoolean(d[C])}function Ti(d,p){for(var C=0;C<d.length;C++)p.writeFixed32(d[C])}function pi(d,p){for(var C=0;C<d.length;C++)p.writeSFixed32(d[C])}function gi(d,p){for(var C=0;C<d.length;C++)p.writeFixed64(d[C])}function Cr(d,p){for(var C=0;C<d.length;C++)p.writeSFixed64(d[C])}function Ir(d,p){return(d[p]|d[p+1]<<8|d[p+2]<<16)+16777216*d[p+3]}function Mi(d,p,C){d[C]=p,d[C+1]=p>>>8,d[C+2]=p>>>16,d[C+3]=p>>>24}function Gi(d,p){return(d[p]|d[p+1]<<8|d[p+2]<<16)+(d[p+3]<<24)}function kr(d,p,C){d===1&&C.readMessage(ca,p)}function ca(d,p,C){if(d===3){var N=C.readMessage(Oi,{}),Q=N.width,ct=N.height,Tt=N.left,Bt=N.top,Jt=N.advance;p.push({id:N.id,bitmap:new oc({width:Q+6,height:ct+6},N.bitmap),metrics:{width:Q,height:ct,left:Tt,top:Bt,advance:Jt}})}}function Oi(d,p,C){d===1?p.id=C.readVarint():d===2?p.bitmap=C.readBytes():d===3?p.width=C.readVarint():d===4?p.height=C.readVarint():d===5?p.left=C.readSVarint():d===6?p.top=C.readSVarint():d===7&&(p.advance=C.readVarint())}function Ai(d){for(var p=0,C=0,N=0,Q=d;N<Q.length;N+=1){var ct=Q[N];p+=ct.w*ct.h,C=Math.max(C,ct.w)}d.sort(function(Cn,Kn){return Kn.h-Cn.h});for(var Tt=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(p/.95)),C),h:1/0}],Bt=0,Jt=0,ve=0,Re=d;ve<Re.length;ve+=1)for(var Ge=Re[ve],He=Tt.length-1;He>=0;He--){var ln=Tt[He];if(!(Ge.w>ln.w||Ge.h>ln.h)){if(Ge.x=ln.x,Ge.y=ln.y,Jt=Math.max(Jt,Ge.y+Ge.h),Bt=Math.max(Bt,Ge.x+Ge.w),Ge.w===ln.w&&Ge.h===ln.h){var Ln=Tt.pop();He<Tt.length&&(Tt[He]=Ln)}else Ge.h===ln.h?(ln.x+=Ge.w,ln.w-=Ge.w):Ge.w===ln.w?(ln.y+=Ge.h,ln.h-=Ge.h):(Tt.push({x:ln.x+Ge.w,y:ln.y,w:ln.w-Ge.w,h:Ge.h}),ln.y+=Ge.h,ln.h-=Ge.h);break}}return{w:Bt,h:Jt,fill:p/(Bt*Jt)||0}}Ke.prototype={destroy:function(){this.buf=null},readFields:function(p,C,N){for(N=N||this.length;this.pos<N;){var Q=this.readVarint(),ct=Q>>3,Tt=this.pos;this.type=7&Q,p(ct,C,this),this.pos===Tt&&this.skip(Q)}return C},readMessage:function(p,C){return this.readFields(p,C,this.readVarint()+this.pos)},readFixed32:function(){var p=Ir(this.buf,this.pos);return this.pos+=4,p},readSFixed32:function(){var p=Gi(this.buf,this.pos);return this.pos+=4,p},readFixed64:function(){var p=Ir(this.buf,this.pos)+4294967296*Ir(this.buf,this.pos+4);return this.pos+=8,p},readSFixed64:function(){var p=Ir(this.buf,this.pos)+4294967296*Gi(this.buf,this.pos+4);return this.pos+=8,p},readFloat:function(){var p=Br(this.buf,this.pos,!0,23,4);return this.pos+=4,p},readDouble:function(){var p=Br(this.buf,this.pos,!0,52,8);return this.pos+=8,p},readVarint:function(p){var C,N,Q=this.buf;return C=127&(N=Q[this.pos++]),N<128?C:(C|=(127&(N=Q[this.pos++]))<<7,N<128?C:(C|=(127&(N=Q[this.pos++]))<<14,N<128?C:(C|=(127&(N=Q[this.pos++]))<<21,N<128?C:function(ct,Tt,Bt){var Jt,ve,Re=Bt.buf;if(Jt=(112&(ve=Re[Bt.pos++]))>>4,ve<128||(Jt|=(127&(ve=Re[Bt.pos++]))<<3,ve<128)||(Jt|=(127&(ve=Re[Bt.pos++]))<<10,ve<128)||(Jt|=(127&(ve=Re[Bt.pos++]))<<17,ve<128)||(Jt|=(127&(ve=Re[Bt.pos++]))<<24,ve<128)||(Jt|=(1&(ve=Re[Bt.pos++]))<<31,ve<128))return pr(ct,Jt,Tt);throw new Error("Expected varint not more than 10 bytes")}(C|=(15&(N=Q[this.pos]))<<28,p,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var p=this.readVarint();return p%2==1?(p+1)/-2:p/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var p=this.readVarint()+this.pos,C=this.pos;return this.pos=p,p-C>=12&&zn?function(N,Q,ct){return zn.decode(N.subarray(Q,ct))}(this.buf,C,p):function(N,Q,ct){for(var Tt="",Bt=Q;Bt<ct;){var Jt,ve,Re,Ge=N[Bt],He=null,ln=Ge>239?4:Ge>223?3:Ge>191?2:1;if(Bt+ln>ct)break;ln===1?Ge<128&&(He=Ge):ln===2?(192&(Jt=N[Bt+1]))==128&&(He=(31&Ge)<<6|63&Jt)<=127&&(He=null):ln===3?(ve=N[Bt+2],(192&(Jt=N[Bt+1]))==128&&(192&ve)==128&&((He=(15&Ge)<<12|(63&Jt)<<6|63&ve)<=2047||He>=55296&&He<=57343)&&(He=null)):ln===4&&(ve=N[Bt+2],Re=N[Bt+3],(192&(Jt=N[Bt+1]))==128&&(192&ve)==128&&(192&Re)==128&&((He=(15&Ge)<<18|(63&Jt)<<12|(63&ve)<<6|63&Re)<=65535||He>=1114112)&&(He=null)),He===null?(He=65533,ln=1):He>65535&&(He-=65536,Tt+=String.fromCharCode(He>>>10&1023|55296),He=56320|1023&He),Tt+=String.fromCharCode(He),Bt+=ln}return Tt}(this.buf,C,p)},readBytes:function(){var p=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,p);return this.pos=p,C},readPackedVarint:function(p,C){if(this.type!==Ke.Bytes)return p.push(this.readVarint(C));var N=lr(this);for(p=p||[];this.pos<N;)p.push(this.readVarint(C));return p},readPackedSVarint:function(p){if(this.type!==Ke.Bytes)return p.push(this.readSVarint());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readSVarint());return p},readPackedBoolean:function(p){if(this.type!==Ke.Bytes)return p.push(this.readBoolean());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readBoolean());return p},readPackedFloat:function(p){if(this.type!==Ke.Bytes)return p.push(this.readFloat());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readFloat());return p},readPackedDouble:function(p){if(this.type!==Ke.Bytes)return p.push(this.readDouble());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readDouble());return p},readPackedFixed32:function(p){if(this.type!==Ke.Bytes)return p.push(this.readFixed32());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readFixed32());return p},readPackedSFixed32:function(p){if(this.type!==Ke.Bytes)return p.push(this.readSFixed32());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readSFixed32());return p},readPackedFixed64:function(p){if(this.type!==Ke.Bytes)return p.push(this.readFixed64());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readFixed64());return p},readPackedSFixed64:function(p){if(this.type!==Ke.Bytes)return p.push(this.readSFixed64());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readSFixed64());return p},skip:function(p){var C=7&p;if(C===Ke.Varint)for(;this.buf[this.pos++]>127;);else if(C===Ke.Bytes)this.pos=this.readVarint()+this.pos;else if(C===Ke.Fixed32)this.pos+=4;else{if(C!==Ke.Fixed64)throw new Error("Unimplemented type: "+C);this.pos+=8}},writeTag:function(p,C){this.writeVarint(p<<3|C)},realloc:function(p){for(var C=this.length||16;C<this.pos+p;)C*=2;if(C!==this.length){var N=new Uint8Array(C);N.set(this.buf),this.buf=N,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(p){this.realloc(4),Mi(this.buf,p,this.pos),this.pos+=4},writeSFixed32:function(p){this.realloc(4),Mi(this.buf,p,this.pos),this.pos+=4},writeFixed64:function(p){this.realloc(8),Mi(this.buf,-1&p,this.pos),Mi(this.buf,Math.floor(p*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(p){this.realloc(8),Mi(this.buf,-1&p,this.pos),Mi(this.buf,Math.floor(p*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(p){(p=+p||0)>268435455||p<0?function(C,N){var Q,ct;if(C>=0?(Q=C%4294967296|0,ct=C/4294967296|0):(ct=~(-C/4294967296),4294967295^(Q=~(-C%4294967296))?Q=Q+1|0:(Q=0,ct=ct+1|0)),C>=18446744073709552e3||C<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");N.realloc(10),function(Tt,Bt,Jt){Jt.buf[Jt.pos++]=127&Tt|128,Tt>>>=7,Jt.buf[Jt.pos++]=127&Tt|128,Tt>>>=7,Jt.buf[Jt.pos++]=127&Tt|128,Tt>>>=7,Jt.buf[Jt.pos++]=127&Tt|128,Jt.buf[Jt.pos]=127&(Tt>>>=7)}(Q,0,N),function(Tt,Bt){var Jt=(7&Tt)<<4;Bt.buf[Bt.pos++]|=Jt|((Tt>>>=3)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt)))))}(ct,N)}(p,this):(this.realloc(4),this.buf[this.pos++]=127&p|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=p>>>7&127))))},writeSVarint:function(p){this.writeVarint(p<0?2*-p-1:2*p)},writeBoolean:function(p){this.writeVarint(Boolean(p))},writeString:function(p){p=String(p),this.realloc(4*p.length),this.pos++;var C=this.pos;this.pos=function(Q,ct,Tt){for(var Bt,Jt,ve=0;ve<ct.length;ve++){if((Bt=ct.charCodeAt(ve))>55295&&Bt<57344){if(!Jt){Bt>56319||ve+1===ct.length?(Q[Tt++]=239,Q[Tt++]=191,Q[Tt++]=189):Jt=Bt;continue}if(Bt<56320){Q[Tt++]=239,Q[Tt++]=191,Q[Tt++]=189,Jt=Bt;continue}Bt=Jt-55296<<10|Bt-56320|65536,Jt=null}else Jt&&(Q[Tt++]=239,Q[Tt++]=191,Q[Tt++]=189,Jt=null);Bt<128?Q[Tt++]=Bt:(Bt<2048?Q[Tt++]=Bt>>6|192:(Bt<65536?Q[Tt++]=Bt>>12|224:(Q[Tt++]=Bt>>18|240,Q[Tt++]=Bt>>12&63|128),Q[Tt++]=Bt>>6&63|128),Q[Tt++]=63&Bt|128)}return Tt}(this.buf,p,this.pos);var N=this.pos-C;N>=128&&Qn(C,N,this),this.pos=C-1,this.writeVarint(N),this.pos+=N},writeFloat:function(p){this.realloc(4),ce(this.buf,p,this.pos,!0,23,4),this.pos+=4},writeDouble:function(p){this.realloc(8),ce(this.buf,p,this.pos,!0,52,8),this.pos+=8},writeBytes:function(p){var C=p.length;this.writeVarint(C),this.realloc(C);for(var N=0;N<C;N++)this.buf[this.pos++]=p[N]},writeRawMessage:function(p,C){this.pos++;var N=this.pos;p(C,this);var Q=this.pos-N;Q>=128&&Qn(N,Q,this),this.pos=N-1,this.writeVarint(Q),this.pos+=Q},writeMessage:function(p,C,N){this.writeTag(p,Ke.Bytes),this.writeRawMessage(C,N)},writePackedVarint:function(p,C){C.length&&this.writeMessage(p,Jr,C)},writePackedSVarint:function(p,C){C.length&&this.writeMessage(p,qr,C)},writePackedBoolean:function(p,C){C.length&&this.writeMessage(p,yi,C)},writePackedFloat:function(p,C){C.length&&this.writeMessage(p,ri,C)},writePackedDouble:function(p,C){C.length&&this.writeMessage(p,ui,C)},writePackedFixed32:function(p,C){C.length&&this.writeMessage(p,Ti,C)},writePackedSFixed32:function(p,C){C.length&&this.writeMessage(p,pi,C)},writePackedFixed64:function(p,C){C.length&&this.writeMessage(p,gi,C)},writePackedSFixed64:function(p,C){C.length&&this.writeMessage(p,Cr,C)},writeBytesField:function(p,C){this.writeTag(p,Ke.Bytes),this.writeBytes(C)},writeFixed32Field:function(p,C){this.writeTag(p,Ke.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(p,C){this.writeTag(p,Ke.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(p,C){this.writeTag(p,Ke.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(p,C){this.writeTag(p,Ke.Fixed64),this.writeSFixed64(C)},writeVarintField:function(p,C){this.writeTag(p,Ke.Varint),this.writeVarint(C)},writeSVarintField:function(p,C){this.writeTag(p,Ke.Varint),this.writeSVarint(C)},writeStringField:function(p,C){this.writeTag(p,Ke.Bytes),this.writeString(C)},writeFloatField:function(p,C){this.writeTag(p,Ke.Fixed32),this.writeFloat(C)},writeDoubleField:function(p,C){this.writeTag(p,Ke.Fixed64),this.writeDouble(C)},writeBooleanField:function(p,C){this.writeVarintField(p,Boolean(C))}};var Ei=function(p,C){var N=C.pixelRatio,Q=C.version,ct=C.stretchX,Tt=C.stretchY,Bt=C.content;this.paddedRect=p,this.pixelRatio=N,this.stretchX=ct,this.stretchY=Tt,this.content=Bt,this.version=Q},Ii={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ii.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Ii.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Ii.tlbr.get=function(){return this.tl.concat(this.br)},Ii.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ei.prototype,Ii);var fa=function(p,C){var N={},Q={};this.haveRenderCallbacks=[];var ct=[];this.addImages(p,N,ct),this.addImages(C,Q,ct);var Tt=Ai(ct),Bt=new El({width:Tt.w||1,height:Tt.h||1});for(var Jt in p){var ve=p[Jt],Re=N[Jt].paddedRect;El.copy(ve.data,Bt,{x:0,y:0},{x:Re.x+1,y:Re.y+1},ve.data)}for(var Ge in C){var He=C[Ge],ln=Q[Ge].paddedRect,Ln=ln.x+1,Cn=ln.y+1,Kn=He.data.width,Yn=He.data.height;El.copy(He.data,Bt,{x:0,y:0},{x:Ln,y:Cn},He.data),El.copy(He.data,Bt,{x:0,y:Yn-1},{x:Ln,y:Cn-1},{width:Kn,height:1}),El.copy(He.data,Bt,{x:0,y:0},{x:Ln,y:Cn+Yn},{width:Kn,height:1}),El.copy(He.data,Bt,{x:Kn-1,y:0},{x:Ln-1,y:Cn},{width:1,height:Yn}),El.copy(He.data,Bt,{x:0,y:0},{x:Ln+Kn,y:Cn},{width:1,height:Yn})}this.image=Bt,this.iconPositions=N,this.patternPositions=Q};fa.prototype.addImages=function(d,p,C){for(var N in d){var Q=d[N],ct={x:0,y:0,w:Q.data.width+2,h:Q.data.height+2};C.push(ct),p[N]=new Ei(ct,Q),Q.hasRenderCallback&&this.haveRenderCallbacks.push(N)}},fa.prototype.patchUpdatedImages=function(d,p){for(var C in d.dispatchRenderCallbacks(this.haveRenderCallbacks),d.updatedImages)this.patchUpdatedImage(this.iconPositions[C],d.getImage(C),p),this.patchUpdatedImage(this.patternPositions[C],d.getImage(C),p)},fa.prototype.patchUpdatedImage=function(d,p,C){if(d&&p&&d.version!==p.version){d.version=p.version;var N=d.tl;C.update(p.data,void 0,{x:N[0],y:N[1]})}},Wi("ImagePosition",Ei),Wi("ImageAtlas",fa);var ma={horizontal:1,vertical:2,horizontalOnly:3},ji=function(){this.scale=1,this.fontStack="",this.imageName=null};ji.forText=function(d,p){var C=new ji;return C.scale=d||1,C.fontStack=p,C},ji.forImage=function(d){var p=new ji;return p.imageName=d,p};var Si=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function di(d,p,C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge,He,ln,Ln,Cn){var Kn,Yn=Si.fromFeature(d,Q);Ge===ma.vertical&&Yn.verticalizePunctuation();var _r=li.processBidirectionalText,Nr=li.processStyledBidirectionalText;if(_r&&Yn.sections.length===1){Kn=[];for(var Yr=0,vi=_r(Yn.toString(),Ko(Yn,ve,ct,p,N,ln,Ln));Yr<vi.length;Yr+=1){var si=vi[Yr],Ni=new Si;Ni.text=si,Ni.sections=Yn.sections;for(var Fi=0;Fi<si.length;Fi++)Ni.sectionIndex.push(0);Kn.push(Ni)}}else if(Nr){Kn=[];for(var ia=0,pa=Nr(Yn.text,Yn.sectionIndex,Ko(Yn,ve,ct,p,N,ln,Ln));ia<pa.length;ia+=1){var va=pa[ia],qi=new Si;qi.text=va[0],qi.sectionIndex=va[1],qi.sections=Yn.sections,Kn.push(qi)}}else Kn=function(ya,es){for(var yo=[],Us=ya.text,Va=0,ko=0,Iu=es;ko<Iu.length;ko+=1){var Lu=Iu[ko];yo.push(ya.substring(Va,Lu)),Va=Lu}return Va<Us.length&&yo.push(ya.substring(Va,Us.length)),yo}(Yn,Ko(Yn,ve,ct,p,N,ln,Ln));var eo=[],wa={positionedLines:eo,text:Yn.toString(),top:Re[1],bottom:Re[1],left:Re[0],right:Re[0],writingMode:Ge,iconsInText:!1,verticalizable:!1};return function(ya,es,yo,Us,Va,ko,Iu,Lu,el,hl,Rl,Kl){for(var dl=0,hc=-17,zl=0,Dc=0,ec=Lu==="right"?1:Lu==="left"?0:.5,Ul=0,dc=0,As=Va;dc<As.length;dc+=1){var ns=As[dc];ns.trim();var du=ns.getMaxScale(),Mu=24*(du-1),jc={positionedGlyphs:[],lineOffset:0};ya.positionedLines[Ul]=jc;var nl=jc.positionedGlyphs,rl=0;if(ns.length()){for(var wc=0;wc<ns.length();wc++){var Cs=ns.getSection(wc),Pf=ns.getSectionIndex(wc),uf=ns.getCharCode(wc),Tf=0,lf=null,nc=null,Wc=null,Df=24,jf=!(el===ma.horizontal||!Rl&&!Cu(uf)||Rl&&(Qi[uf]||(Nf=uf,_i.Arabic(Nf)||_i["Arabic Supplement"](Nf)||_i["Arabic Extended-A"](Nf)||_i["Arabic Presentation Forms-A"](Nf)||_i["Arabic Presentation Forms-B"](Nf))));if(Cs.imageName){var Dh=Us[Cs.imageName];if(!Dh)continue;Wc=Cs.imageName,ya.iconsInText=ya.iconsInText||!0,nc=Dh.paddedRect;var mf=Dh.displaySize;Cs.scale=24*Cs.scale/Kl,Tf=Mu+(24-mf[1]*Cs.scale),Df=(lf={width:mf[0],height:mf[1],left:1,top:-3,advance:jf?mf[1]:mf[0]}).advance;var Xh=jf?mf[0]*Cs.scale-24*du:mf[1]*Cs.scale-24*du;Xh>0&&Xh>rl&&(rl=Xh)}else{var jh=yo[Cs.fontStack],Bf=jh&&jh[uf];if(Bf&&Bf.rect)nc=Bf.rect,lf=Bf.metrics;else{var Jh=es[Cs.fontStack],Bh=Jh&&Jh[uf];if(!Bh)continue;lf=Bh.metrics}Tf=24*(du-Cs.scale)}jf?(ya.verticalizable=!0,nl.push({glyph:uf,imageName:Wc,x:dl,y:hc+Tf,vertical:jf,scale:Cs.scale,fontStack:Cs.fontStack,sectionIndex:Pf,metrics:lf,rect:nc}),dl+=Df*Cs.scale+hl):(nl.push({glyph:uf,imageName:Wc,x:dl,y:hc+Tf,vertical:jf,scale:Cs.scale,fontStack:Cs.fontStack,sectionIndex:Pf,metrics:lf,rect:nc}),dl+=lf.advance*Cs.scale+hl)}nl.length!==0&&(zl=Math.max(dl-hl,zl),uc(nl,0,nl.length-1,ec,rl)),dl=0;var $h=ko*du+rl;jc.lineOffset=Math.max(rl,Mu),hc+=$h,Dc=Math.max($h,Dc),++Ul}else hc+=ko,++Ul}var Nf,Nh=hc- -17,tf=Il(Iu),oh=tf.horizontalAlign,Ff=tf.verticalAlign;(function(bh,Fh,sh,uh,zh,Qh,Eh,qh,Sh){var _h,Mh=(Fh-sh)*zh;_h=Qh!==Eh?-qh*uh- -17:(-uh*Sh+.5)*Eh;for(var lh=0,Xf=bh;lh<Xf.length;lh+=1)for(var ch=0,fh=Xf[lh].positionedGlyphs;ch<fh.length;ch+=1){var Ph=fh[ch];Ph.x+=Mh,Ph.y+=_h}})(ya.positionedLines,ec,oh,Ff,zl,Dc,ko,Nh,Va.length),ya.top+=-Ff*Nh,ya.bottom=ya.top+Nh,ya.left+=-oh*zl,ya.right=ya.left+zl}(wa,p,C,N,Kn,Tt,Bt,Jt,Ge,ve,He,Cn),!function(ya){for(var es=0,yo=ya;es<yo.length;es+=1)if(yo[es].positionedGlyphs.length!==0)return!1;return!0}(eo)&&wa}Si.fromFeature=function(d,p){for(var C=new Si,N=0;N<d.sections.length;N++){var Q=d.sections[N];Q.image?C.addImageSection(Q):C.addTextSection(Q,p)}return C},Si.prototype.length=function(){return this.text.length},Si.prototype.getSection=function(d){return this.sections[this.sectionIndex[d]]},Si.prototype.getSectionIndex=function(d){return this.sectionIndex[d]},Si.prototype.getCharCode=function(d){return this.text.charCodeAt(d)},Si.prototype.verticalizePunctuation=function(){this.text=function(d){for(var p="",C=0;C<d.length;C++){var N=d.charCodeAt(C+1)||null,Q=d.charCodeAt(C-1)||null;p+=N&&Ou(N)&&!Pn[d[C+1]]||Q&&Ou(Q)&&!Pn[d[C-1]]||!Pn[d[C]]?d[C]:Pn[d[C]]}return p}(this.text)},Si.prototype.trim=function(){for(var d=0,p=0;p<this.text.length&&Qi[this.text.charCodeAt(p)];p++)d++;for(var C=this.text.length,N=this.text.length-1;N>=0&&N>=d&&Qi[this.text.charCodeAt(N)];N--)C--;this.text=this.text.substring(d,C),this.sectionIndex=this.sectionIndex.slice(d,C)},Si.prototype.substring=function(d,p){var C=new Si;return C.text=this.text.substring(d,p),C.sectionIndex=this.sectionIndex.slice(d,p),C.sections=this.sections,C},Si.prototype.toString=function(){return this.text},Si.prototype.getMaxScale=function(){var d=this;return this.sectionIndex.reduce(function(p,C){return Math.max(p,d.sections[C].scale)},0)},Si.prototype.addTextSection=function(d,p){this.text+=d.text,this.sections.push(ji.forText(d.scale,d.fontStack||p));for(var C=this.sections.length-1,N=0;N<d.text.length;++N)this.sectionIndex.push(C)},Si.prototype.addImageSection=function(d){var p=d.image?d.image.name:"";if(p.length!==0){var C=this.getNextImageSectionCharCode();C?(this.text+=String.fromCharCode(C),this.sections.push(ji.forImage(p)),this.sectionIndex.push(this.sections.length-1)):O("Reached maximum number of images 6401")}else O("Can't add FormattedSection with an empty image.")},Si.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Qi={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},aa={};function $i(d,p,C,N,Q,ct){if(p.imageName){var Tt=N[p.imageName];return Tt?Tt.displaySize[0]*p.scale*24/ct+Q:0}var Bt=C[p.fontStack],Jt=Bt&&Bt[d];return Jt?Jt.metrics.advance*p.scale+Q:0}function co(d,p,C,N){var Q=Math.pow(d-p,2);return N?d<p?Q/2:2*Q:Q+Math.abs(C)*C}function mo(d,p,C){var N=0;return d===10&&(N-=1e4),C&&(N+=150),d!==40&&d!==65288||(N+=50),p!==41&&p!==65289||(N+=50),N}function No(d,p,C,N,Q,ct){for(var Tt=null,Bt=co(p,C,Q,ct),Jt=0,ve=N;Jt<ve.length;Jt+=1){var Re=ve[Jt],Ge=co(p-Re.x,C,Q,ct)+Re.badness;Ge<=Bt&&(Tt=Re,Bt=Ge)}return{index:d,x:p,priorBreak:Tt,badness:Bt}}function Ko(d,p,C,N,Q,ct,Tt){if(ct!=="point")return[];if(!d)return[];for(var Bt,Jt=[],ve=function(Kn,Yn,_r,Nr,Yr,vi){for(var si=0,Ni=0;Ni<Kn.length();Ni++){var Fi=Kn.getSection(Ni);si+=$i(Kn.getCharCode(Ni),Fi,Nr,Yr,Yn,vi)}return si/Math.max(1,Math.ceil(si/_r))}(d,p,C,N,Q,Tt),Re=d.text.indexOf("\u200B")>=0,Ge=0,He=0;He<d.length();He++){var ln=d.getSection(He),Ln=d.getCharCode(He);if(Qi[Ln]||(Ge+=$i(Ln,ln,N,Q,p,Tt)),He<d.length()-1){var Cn=!((Bt=Ln)<11904||!(_i["Bopomofo Extended"](Bt)||_i.Bopomofo(Bt)||_i["CJK Compatibility Forms"](Bt)||_i["CJK Compatibility Ideographs"](Bt)||_i["CJK Compatibility"](Bt)||_i["CJK Radicals Supplement"](Bt)||_i["CJK Strokes"](Bt)||_i["CJK Symbols and Punctuation"](Bt)||_i["CJK Unified Ideographs Extension A"](Bt)||_i["CJK Unified Ideographs"](Bt)||_i["Enclosed CJK Letters and Months"](Bt)||_i["Halfwidth and Fullwidth Forms"](Bt)||_i.Hiragana(Bt)||_i["Ideographic Description Characters"](Bt)||_i["Kangxi Radicals"](Bt)||_i["Katakana Phonetic Extensions"](Bt)||_i.Katakana(Bt)||_i["Vertical Forms"](Bt)||_i["Yi Radicals"](Bt)||_i["Yi Syllables"](Bt)));(aa[Ln]||Cn||ln.imageName)&&Jt.push(No(He+1,Ge,ve,Jt,mo(Ln,d.getCharCode(He+1),Cn&&Re),!1))}}return function Kn(Yn){return Yn?Kn(Yn.priorBreak).concat(Yn.index):[]}(No(d.length(),Ge,ve,Jt,0,!0))}function Il(d){var p=.5,C=.5;switch(d){case"right":case"top-right":case"bottom-right":p=1;break;case"left":case"top-left":case"bottom-left":p=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":C=1;break;case"top":case"top-right":case"top-left":C=0}return{horizontalAlign:p,verticalAlign:C}}function uc(d,p,C,N,Q){if(N||Q)for(var ct=d[C],Tt=(d[C].x+ct.metrics.advance*ct.scale)*N,Bt=p;Bt<=C;Bt++)d[Bt].x-=Tt,d[Bt].y+=Q}function ts(d,p,C,N,Q,ct){var Tt,Bt=d.image;if(Bt.content){var Jt=Bt.content,ve=Bt.pixelRatio||1;Tt=[Jt[0]/ve,Jt[1]/ve,Bt.displaySize[0]-Jt[2]/ve,Bt.displaySize[1]-Jt[3]/ve]}var Re,Ge,He,ln,Ln=p.left*ct,Cn=p.right*ct;C==="width"||C==="both"?(ln=Q[0]+Ln-N[3],Ge=Q[0]+Cn+N[1]):Ge=(ln=Q[0]+(Ln+Cn-Bt.displaySize[0])/2)+Bt.displaySize[0];var Kn=p.top*ct,Yn=p.bottom*ct;return C==="height"||C==="both"?(Re=Q[1]+Kn-N[0],He=Q[1]+Yn+N[2]):He=(Re=Q[1]+(Kn+Yn-Bt.displaySize[1])/2)+Bt.displaySize[1],{image:Bt,top:Re,right:Ge,bottom:He,left:ln,collisionPadding:Tt}}aa[10]=!0,aa[32]=!0,aa[38]=!0,aa[40]=!0,aa[41]=!0,aa[43]=!0,aa[45]=!0,aa[47]=!0,aa[173]=!0,aa[183]=!0,aa[8203]=!0,aa[8208]=!0,aa[8211]=!0,aa[8231]=!0;var _l=function(d){function p(C,N,Q,ct){d.call(this,C,N),this.angle=Q,ct!==void 0&&(this.segment=ct)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.clone=function(){return new p(this.x,this.y,this.angle,this.segment)},p}(r);function wu(d,p){var C=p.expression;if(C.kind==="constant")return{kind:"constant",layoutSize:C.evaluate(new yr(d+1))};if(C.kind==="source")return{kind:"source"};for(var N=C.zoomStops,Q=C.interpolationType,ct=0;ct<N.length&&N[ct]<=d;)ct++;for(var Tt=ct=Math.max(0,ct-1);Tt<N.length&&N[Tt]<d+1;)Tt++;Tt=Math.min(N.length-1,Tt);var Bt=N[ct],Jt=N[Tt];return C.kind==="composite"?{kind:"composite",minZoom:Bt,maxZoom:Jt,interpolationType:Q}:{kind:"camera",minZoom:Bt,maxZoom:Jt,minSize:C.evaluate(new yr(Bt)),maxSize:C.evaluate(new yr(Jt)),interpolationType:Q}}function Zl(d,p,C){var N=p.uSize,Q=C.lowerSize;return d.kind==="source"?Q/128:d.kind==="composite"?Wa(Q/128,C.upperSize/128,p.uSizeT):N}function $l(d,p){var C=0,N=0;if(d.kind==="constant")N=d.layoutSize;else if(d.kind!=="source"){var Q=d.interpolationType,ct=Q?l(Za.interpolationFactor(Q,p,d.minZoom,d.maxZoom),0,1):0;d.kind==="camera"?N=Wa(d.minSize,d.maxSize,ct):C=ct}return{uSizeT:C,uSize:N}}Wi("Anchor",_l);var lc=Object.freeze({__proto__:null,getSizeData:wu,evaluateSizeForFeature:Zl,evaluateSizeForZoom:$l,SIZE_PACK_FACTOR:128});function mc(d,p,C,N,Q){if(p.segment===void 0)return!0;for(var ct=p,Tt=p.segment+1,Bt=0;Bt>-C/2;){if(--Tt<0)return!1;Bt-=d[Tt].dist(ct),ct=d[Tt]}Bt+=d[Tt].dist(d[Tt+1]),Tt++;for(var Jt=[],ve=0;Bt<C/2;){var Re=d[Tt],Ge=d[Tt+1];if(!Ge)return!1;var He=d[Tt-1].angleTo(Re)-Re.angleTo(Ge);for(He=Math.abs((He+3*Math.PI)%(2*Math.PI)-Math.PI),Jt.push({distance:Bt,angleDelta:He}),ve+=He;Bt-Jt[0].distance>N;)ve-=Jt.shift().angleDelta;if(ve>Q)return!1;Tt++,Bt+=Re.dist(Ge)}return!0}function cc(d){for(var p=0,C=0;C<d.length-1;C++)p+=d[C].dist(d[C+1]);return p}function fl(d,p,C){return d?.6*p*C:0}function Io(d,p){return Math.max(d?d.right-d.left:0,p?p.right-p.left:0)}function yc(d,p,C,N,Q,ct){for(var Tt=fl(C,Q,ct),Bt=Io(C,N)*ct,Jt=0,ve=cc(d)/2,Re=0;Re<d.length-1;Re++){var Ge=d[Re],He=d[Re+1],ln=Ge.dist(He);if(Jt+ln>ve){var Ln=(ve-Jt)/ln,Cn=Wa(Ge.x,He.x,Ln),Kn=Wa(Ge.y,He.y,Ln),Yn=new _l(Cn,Kn,He.angleTo(Ge),Re);return Yn._round(),!Tt||mc(d,Yn,Bt,Tt,p)?Yn:void 0}Jt+=ln}}function zs(d,p,C,N,Q,ct,Tt,Bt,Jt){var ve=fl(N,ct,Tt),Re=Io(N,Q),Ge=Re*Tt,He=d[0].x===0||d[0].x===Jt||d[0].y===0||d[0].y===Jt;return p-Ge<p/4&&(p=Ge+p/4),function ln(Ln,Cn,Kn,Yn,_r,Nr,Yr,vi,si){for(var Ni=Nr/2,Fi=cc(Ln),ia=0,pa=Cn-Kn,va=[],qi=0;qi<Ln.length-1;qi++){for(var eo=Ln[qi],wa=Ln[qi+1],ya=eo.dist(wa),es=wa.angleTo(eo);pa+Kn<ia+ya;){var yo=((pa+=Kn)-ia)/ya,Us=Wa(eo.x,wa.x,yo),Va=Wa(eo.y,wa.y,yo);if(Us>=0&&Us<si&&Va>=0&&Va<si&&pa-Ni>=0&&pa+Ni<=Fi){var ko=new _l(Us,Va,es,qi);ko._round(),Yn&&!mc(Ln,ko,Nr,Yn,_r)||va.push(ko)}}ia+=ya}return vi||va.length||Yr||(va=ln(Ln,ia/2,Kn,Yn,_r,Nr,Yr,!0,si)),va}(d,He?p/2*Bt%p:(Re/2+2*ct)*Tt*Bt%p,p,ve,C,Ge,He,!1,Jt)}function Ya(d,p,C,N,Q){for(var ct=[],Tt=0;Tt<d.length;Tt++)for(var Bt=d[Tt],Jt=void 0,ve=0;ve<Bt.length-1;ve++){var Re=Bt[ve],Ge=Bt[ve+1];Re.x<p&&Ge.x<p||(Re.x<p?Re=new r(p,Re.y+(p-Re.x)/(Ge.x-Re.x)*(Ge.y-Re.y))._round():Ge.x<p&&(Ge=new r(p,Re.y+(p-Re.x)/(Ge.x-Re.x)*(Ge.y-Re.y))._round()),Re.y<C&&Ge.y<C||(Re.y<C?Re=new r(Re.x+(C-Re.y)/(Ge.y-Re.y)*(Ge.x-Re.x),C)._round():Ge.y<C&&(Ge=new r(Re.x+(C-Re.y)/(Ge.y-Re.y)*(Ge.x-Re.x),C)._round()),Re.x>=N&&Ge.x>=N||(Re.x>=N?Re=new r(N,Re.y+(N-Re.x)/(Ge.x-Re.x)*(Ge.y-Re.y))._round():Ge.x>=N&&(Ge=new r(N,Re.y+(N-Re.x)/(Ge.x-Re.x)*(Ge.y-Re.y))._round()),Re.y>=Q&&Ge.y>=Q||(Re.y>=Q?Re=new r(Re.x+(Q-Re.y)/(Ge.y-Re.y)*(Ge.x-Re.x),Q)._round():Ge.y>=Q&&(Ge=new r(Re.x+(Q-Re.y)/(Ge.y-Re.y)*(Ge.x-Re.x),Q)._round()),Jt&&Re.equals(Jt[Jt.length-1])||ct.push(Jt=[Re]),Jt.push(Ge)))))}return ct}function So(d,p,C,N){var Q=[],ct=d.image,Tt=ct.pixelRatio,Bt=ct.paddedRect.w-2,Jt=ct.paddedRect.h-2,ve=d.right-d.left,Re=d.bottom-d.top,Ge=ct.stretchX||[[0,Bt]],He=ct.stretchY||[[0,Jt]],ln=function(Va,ko){return Va+ko[1]-ko[0]},Ln=Ge.reduce(ln,0),Cn=He.reduce(ln,0),Kn=Bt-Ln,Yn=Jt-Cn,_r=0,Nr=Ln,Yr=0,vi=Cn,si=0,Ni=Kn,Fi=0,ia=Yn;if(ct.content&&N){var pa=ct.content;_r=as(Ge,0,pa[0]),Yr=as(He,0,pa[1]),Nr=as(Ge,pa[0],pa[2]),vi=as(He,pa[1],pa[3]),si=pa[0]-_r,Fi=pa[1]-Yr,Ni=pa[2]-pa[0]-Nr,ia=pa[3]-pa[1]-vi}var va=function(Va,ko,Iu,Lu){var el=bc(Va.stretch-_r,Nr,ve,d.left),hl=sf(Va.fixed-si,Ni,Va.stretch,Ln),Rl=bc(ko.stretch-Yr,vi,Re,d.top),Kl=sf(ko.fixed-Fi,ia,ko.stretch,Cn),dl=bc(Iu.stretch-_r,Nr,ve,d.left),hc=sf(Iu.fixed-si,Ni,Iu.stretch,Ln),zl=bc(Lu.stretch-Yr,vi,Re,d.top),Dc=sf(Lu.fixed-Fi,ia,Lu.stretch,Cn),ec=new r(el,Rl),Ul=new r(dl,Rl),dc=new r(dl,zl),As=new r(el,zl),ns=new r(hl/Tt,Kl/Tt),du=new r(hc/Tt,Dc/Tt),Mu=p*Math.PI/180;if(Mu){var jc=Math.sin(Mu),nl=Math.cos(Mu),rl=[nl,-jc,jc,nl];ec._matMult(rl),Ul._matMult(rl),As._matMult(rl),dc._matMult(rl)}var wc=Va.stretch+Va.fixed,Cs=ko.stretch+ko.fixed;return{tl:ec,tr:Ul,bl:As,br:dc,tex:{x:ct.paddedRect.x+1+wc,y:ct.paddedRect.y+1+Cs,w:Iu.stretch+Iu.fixed-wc,h:Lu.stretch+Lu.fixed-Cs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ns,pixelOffsetBR:du,minFontScaleX:Ni/Tt/ve,minFontScaleY:ia/Tt/Re,isSDF:C}};if(N&&(ct.stretchX||ct.stretchY))for(var qi=xc(Ge,Kn,Ln),eo=xc(He,Yn,Cn),wa=0;wa<qi.length-1;wa++)for(var ya=qi[wa],es=qi[wa+1],yo=0;yo<eo.length-1;yo++)Q.push(va(ya,eo[yo],es,eo[yo+1]));else Q.push(va({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Bt+1},{fixed:0,stretch:Jt+1}));return Q}function as(d,p,C){for(var N=0,Q=0,ct=d;Q<ct.length;Q+=1){var Tt=ct[Q];N+=Math.max(p,Math.min(C,Tt[1]))-Math.max(p,Math.min(C,Tt[0]))}return N}function xc(d,p,C){for(var N=[{fixed:-1,stretch:0}],Q=0,ct=d;Q<ct.length;Q+=1){var Tt=ct[Q],Bt=Tt[0],Jt=Tt[1],ve=N[N.length-1];N.push({fixed:Bt-ve.stretch,stretch:ve.stretch}),N.push({fixed:Bt-ve.stretch,stretch:ve.stretch+(Jt-Bt)})}return N.push({fixed:p+1,stretch:C}),N}function bc(d,p,C,N){return d/p*C+N}function sf(d,p,C,N){return d-p*C/N}var jn=function(p,C,N,Q,ct,Tt,Bt,Jt,ve,Re){if(this.boxStartIndex=p.length,ve){var Ge=Tt.top,He=Tt.bottom,ln=Tt.collisionPadding;ln&&(Ge-=ln[1],He+=ln[3]);var Ln=He-Ge;Ln>0&&(Ln=Math.max(10,Ln),this.circleDiameter=Ln)}else{var Cn=Tt.top*Bt-Jt,Kn=Tt.bottom*Bt+Jt,Yn=Tt.left*Bt-Jt,_r=Tt.right*Bt+Jt,Nr=Tt.collisionPadding;if(Nr&&(Yn-=Nr[0]*Bt,Cn-=Nr[1]*Bt,_r+=Nr[2]*Bt,Kn+=Nr[3]*Bt),Re){var Yr=new r(Yn,Cn),vi=new r(_r,Cn),si=new r(Yn,Kn),Ni=new r(_r,Kn),Fi=Re*Math.PI/180;Yr._rotate(Fi),vi._rotate(Fi),si._rotate(Fi),Ni._rotate(Fi),Yn=Math.min(Yr.x,vi.x,si.x,Ni.x),_r=Math.max(Yr.x,vi.x,si.x,Ni.x),Cn=Math.min(Yr.y,vi.y,si.y,Ni.y),Kn=Math.max(Yr.y,vi.y,si.y,Ni.y)}p.emplaceBack(C.x,C.y,Yn,Cn,_r,Kn,N,Q,ct)}this.boxEndIndex=p.length},Wr=function(p,C){if(p===void 0&&(p=[]),C===void 0&&(C=Ur),this.data=p,this.length=this.data.length,this.compare=C,this.length>0)for(var N=(this.length>>1)-1;N>=0;N--)this._down(N)};function Ur(d,p){return d<p?-1:d>p?1:0}function na(d,p,C){p===void 0&&(p=1),C===void 0&&(C=!1);for(var N=1/0,Q=1/0,ct=-1/0,Tt=-1/0,Bt=d[0],Jt=0;Jt<Bt.length;Jt++){var ve=Bt[Jt];(!Jt||ve.x<N)&&(N=ve.x),(!Jt||ve.y<Q)&&(Q=ve.y),(!Jt||ve.x>ct)&&(ct=ve.x),(!Jt||ve.y>Tt)&&(Tt=ve.y)}var Re=Math.min(ct-N,Tt-Q),Ge=Re/2,He=new Wr([],oo);if(Re===0)return new r(N,Q);for(var ln=N;ln<ct;ln+=Re)for(var Ln=Q;Ln<Tt;Ln+=Re)He.push(new Sn(ln+Ge,Ln+Ge,Ge,d));for(var Cn=function(_r){for(var Nr=0,Yr=0,vi=0,si=_r[0],Ni=0,Fi=si.length,ia=Fi-1;Ni<Fi;ia=Ni++){var pa=si[Ni],va=si[ia],qi=pa.x*va.y-va.x*pa.y;Yr+=(pa.x+va.x)*qi,vi+=(pa.y+va.y)*qi,Nr+=3*qi}return new Sn(Yr/Nr,vi/Nr,0,_r)}(d),Kn=He.length;He.length;){var Yn=He.pop();(Yn.d>Cn.d||!Cn.d)&&(Cn=Yn,C&&console.log("found best %d after %d probes",Math.round(1e4*Yn.d)/1e4,Kn)),Yn.max-Cn.d<=p||(He.push(new Sn(Yn.p.x-(Ge=Yn.h/2),Yn.p.y-Ge,Ge,d)),He.push(new Sn(Yn.p.x+Ge,Yn.p.y-Ge,Ge,d)),He.push(new Sn(Yn.p.x-Ge,Yn.p.y+Ge,Ge,d)),He.push(new Sn(Yn.p.x+Ge,Yn.p.y+Ge,Ge,d)),Kn+=4)}return C&&(console.log("num probes: "+Kn),console.log("best distance: "+Cn.d)),Cn.p}function oo(d,p){return p.max-d.max}function Sn(d,p,C,N){this.p=new r(d,p),this.h=C,this.d=function(Q,ct){for(var Tt=!1,Bt=1/0,Jt=0;Jt<ct.length;Jt++)for(var ve=ct[Jt],Re=0,Ge=ve.length,He=Ge-1;Re<Ge;He=Re++){var ln=ve[Re],Ln=ve[He];ln.y>Q.y!=Ln.y>Q.y&&Q.x<(Ln.x-ln.x)*(Q.y-ln.y)/(Ln.y-ln.y)+ln.x&&(Tt=!Tt),Bt=Math.min(Bt,Hc(Q,ln,Ln))}return(Tt?1:-1)*Math.sqrt(Bt)}(this.p,N),this.max=this.d+this.h*Math.SQRT2}Wr.prototype.push=function(d){this.data.push(d),this.length++,this._up(this.length-1)},Wr.prototype.pop=function(){if(this.length!==0){var d=this.data[0],p=this.data.pop();return this.length--,this.length>0&&(this.data[0]=p,this._down(0)),d}},Wr.prototype.peek=function(){return this.data[0]},Wr.prototype._up=function(d){for(var p=this.data,C=this.compare,N=p[d];d>0;){var Q=d-1>>1,ct=p[Q];if(C(N,ct)>=0)break;p[d]=ct,d=Q}p[d]=N},Wr.prototype._down=function(d){for(var p=this.data,C=this.compare,N=this.length>>1,Q=p[d];d<N;){var ct=1+(d<<1),Tt=p[ct],Bt=ct+1;if(Bt<this.length&&C(p[Bt],Tt)<0&&(ct=Bt,Tt=p[Bt]),C(Tt,Q)>=0)break;p[d]=Tt,d=ct}p[d]=Q};var rn=Number.POSITIVE_INFINITY;function nr(d,p){return p[1]!==rn?function(C,N,Q){var ct=0,Tt=0;switch(N=Math.abs(N),Q=Math.abs(Q),C){case"top-right":case"top-left":case"top":Tt=Q-7;break;case"bottom-right":case"bottom-left":case"bottom":Tt=7-Q}switch(C){case"top-right":case"bottom-right":case"right":ct=-N;break;case"top-left":case"bottom-left":case"left":ct=N}return[ct,Tt]}(d,p[0],p[1]):function(C,N){var Q=0,ct=0;N<0&&(N=0);var Tt=N/Math.sqrt(2);switch(C){case"top-right":case"top-left":ct=Tt-7;break;case"bottom-right":case"bottom-left":ct=7-Tt;break;case"bottom":ct=7-N;break;case"top":ct=N-7}switch(C){case"top-right":case"bottom-right":Q=-Tt;break;case"top-left":case"bottom-left":Q=Tt;break;case"left":Q=N;break;case"right":Q=-N}return[Q,ct]}(d,p[0])}function Or(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wr(d,p,C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge,He,ln,Ln){var Cn=function(Yr,vi,si,Ni,Fi,ia,pa,va){for(var qi=Ni.layout.get("text-rotate").evaluate(ia,{})*Math.PI/180,eo=[],wa=0,ya=vi.positionedLines;wa<ya.length;wa+=1)for(var es=ya[wa],yo=0,Us=es.positionedGlyphs;yo<Us.length;yo+=1){var Va=Us[yo];if(Va.rect){var ko=Va.rect||{},Iu=4,Lu=!0,el=1,hl=0,Rl=(Fi||va)&&Va.vertical,Kl=Va.metrics.advance*Va.scale/2;if(va&&vi.verticalizable&&(hl=es.lineOffset/2-(Va.imageName?-(24-Va.metrics.width*Va.scale)/2:24*(Va.scale-1))),Va.imageName){var dl=pa[Va.imageName];Lu=dl.sdf,Iu=1/(el=dl.pixelRatio)}var hc=Fi?[Va.x+Kl,Va.y]:[0,0],zl=Fi?[0,0]:[Va.x+Kl+si[0],Va.y+si[1]-hl],Dc=[0,0];Rl&&(Dc=zl,zl=[0,0]);var ec=(Va.metrics.left-Iu)*Va.scale-Kl+zl[0],Ul=(-Va.metrics.top-Iu)*Va.scale+zl[1],dc=ec+ko.w*Va.scale/el,As=Ul+ko.h*Va.scale/el,ns=new r(ec,Ul),du=new r(dc,Ul),Mu=new r(ec,As),jc=new r(dc,As);if(Rl){var nl=new r(-Kl,Kl- -17),rl=-Math.PI/2,wc=12-Kl,Cs=new r(22-wc,-(Va.imageName?wc:0)),Pf=new(Function.prototype.bind.apply(r,[null].concat(Dc)));ns._rotateAround(rl,nl)._add(Cs)._add(Pf),du._rotateAround(rl,nl)._add(Cs)._add(Pf),Mu._rotateAround(rl,nl)._add(Cs)._add(Pf),jc._rotateAround(rl,nl)._add(Cs)._add(Pf)}if(qi){var uf=Math.sin(qi),Tf=Math.cos(qi),lf=[Tf,-uf,uf,Tf];ns._matMult(lf),du._matMult(lf),Mu._matMult(lf),jc._matMult(lf)}var nc=new r(0,0),Wc=new r(0,0);eo.push({tl:ns,tr:du,bl:Mu,br:jc,tex:ko,writingMode:vi.writingMode,glyphOffset:hc,sectionIndex:Va.sectionIndex,isSDF:Lu,pixelOffsetTL:nc,pixelOffsetBR:Wc,minFontScaleX:0,minFontScaleY:0})}}return eo}(0,C,Bt,Q,ct,Tt,N,d.allowVerticalPlacement),Kn=d.textSizeData,Yn=null;Kn.kind==="source"?(Yn=[128*Q.layout.get("text-size").evaluate(Tt,{})])[0]>32640&&O(d.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Kn.kind==="composite"&&((Yn=[128*ln.compositeTextSizes[0].evaluate(Tt,{},Ln),128*ln.compositeTextSizes[1].evaluate(Tt,{},Ln)])[0]>32640||Yn[1]>32640)&&O(d.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),d.addSymbols(d.text,Cn,Yn,Bt,ct,Tt,ve,p,Jt.lineStartIndex,Jt.lineLength,He,Ln);for(var _r=0,Nr=Re;_r<Nr.length;_r+=1)Ge[Nr[_r]]=d.text.placedSymbolArray.length-1;return 4*Cn.length}function ur(d){for(var p in d)return d[p];return null}function ar(d,p,C,N){var Q=d.compareText;if(p in Q){for(var ct=Q[p],Tt=ct.length-1;Tt>=0;Tt--)if(N.dist(ct[Tt])<C)return!0}else Q[p]=[];return Q[p].push(N),!1}var Er=_f.VectorTileFeature.types,Tn=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Jn(d,p,C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge,He){var ln=Bt?Math.min(32640,Math.round(Bt[0])):0,Ln=Bt?Math.min(32640,Math.round(Bt[1])):0;d.emplaceBack(p,C,Math.round(32*N),Math.round(32*Q),ct,Tt,(ln<<1)+(Jt?1:0),Ln,16*ve,16*Re,256*Ge,256*He)}function bn(d,p,C){d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C)}function Tr(d){for(var p=0,C=d.sections;p<C.length;p+=1)if(Pe(C[p].text))return!0;return!1}var Dr=function(p){this.layoutVertexArray=new Hi,this.indexArray=new Ga,this.programConfigurations=p,this.segments=new Zt,this.dynamicLayoutVertexArray=new Di,this.opacityVertexArray=new Ma,this.placedSymbolArray=new B};Dr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Dr.prototype.upload=function(d,p,C,N){this.isEmpty()||(C&&(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Et.members),this.indexBuffer=d.createIndexBuffer(this.indexArray,p),this.dynamicLayoutVertexBuffer=d.createVertexBuffer(this.dynamicLayoutVertexArray,Lt.members,!0),this.opacityVertexBuffer=d.createVertexBuffer(this.opacityVertexArray,Tn,!0),this.opacityVertexBuffer.itemSize=1),(C||N)&&this.programConfigurations.upload(d))},Dr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Wi("SymbolBuffers",Dr);var ci=function(p,C,N){this.layoutVertexArray=new p,this.layoutAttributes=C,this.indexArray=new N,this.segments=new Zt,this.collisionVertexArray=new Ea};ci.prototype.upload=function(d){this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=d.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=d.createVertexBuffer(this.collisionVertexArray,ie.members,!0)},ci.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Wi("CollisionBuffers",ci);var Hr=function(p){this.collisionBoxArray=p.collisionBoxArray,this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(Tt){return Tt.id}),this.index=p.index,this.pixelRatio=p.pixelRatio,this.sourceLayerIndex=p.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=bu([]),this.placementViewportMatrix=bu([]);var C=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wu(this.zoom,C["text-size"]),this.iconSizeData=wu(this.zoom,C["icon-size"]);var N=this.layers[0].layout,Q=N.get("symbol-sort-key"),ct=N.get("symbol-z-order");this.canOverlap=N.get("text-allow-overlap")||N.get("icon-allow-overlap")||N.get("text-ignore-placement")||N.get("icon-ignore-placement"),this.sortFeaturesByKey=ct!=="viewport-y"&&Q.constantOr(1)!==void 0,this.sortFeaturesByY=(ct==="viewport-y"||ct==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,N.get("symbol-placement")==="point"&&(this.writingModes=N.get("text-writing-mode").map(function(Tt){return ma[Tt]})),this.stateDependentLayerIds=this.layers.filter(function(Tt){return Tt.isStateDependent()}).map(function(Tt){return Tt.id}),this.sourceID=p.sourceID};Hr.prototype.createArrays=function(){this.text=new Dr(new La(this.layers,this.zoom,function(d){return/^text/.test(d)})),this.icon=new Dr(new La(this.layers,this.zoom,function(d){return/^icon/.test(d)})),this.glyphOffsetArray=new tt,this.lineVertexArray=new st,this.symbolInstances=new W},Hr.prototype.calculateGlyphDependencies=function(d,p,C,N,Q){for(var ct=0;ct<d.length;ct++)if(p[d.charCodeAt(ct)]=!0,(C||N)&&Q){var Tt=Pn[d.charAt(ct)];Tt&&(p[Tt.charCodeAt(0)]=!0)}},Hr.prototype.populate=function(d,p,C){var N=this.layers[0],Q=N.layout,ct=Q.get("text-font"),Tt=Q.get("text-field"),Bt=Q.get("icon-image"),Jt=(Tt.value.kind!=="constant"||Tt.value.value instanceof Aa&&!Tt.value.value.isEmpty()||Tt.value.value.toString().length>0)&&(ct.value.kind!=="constant"||ct.value.value.length>0),ve=Bt.value.kind!=="constant"||!!Bt.value.value||Object.keys(Bt.parameters).length>0,Re=Q.get("symbol-sort-key");if(this.features=[],Jt||ve){for(var Ge=p.iconDependencies,He=p.glyphDependencies,ln=p.availableImages,Ln=new yr(this.zoom),Cn=0,Kn=d;Cn<Kn.length;Cn+=1){var Yn=Kn[Cn],_r=Yn.feature,Nr=Yn.id,Yr=Yn.index,vi=Yn.sourceLayerIndex,si=N._featureFilter.needGeometry,Ni=nu(_r,si);if(N._featureFilter.filter(Ln,Ni,C)){si||(Ni.geometry=ms(_r));var Fi=void 0;if(Jt){var ia=N.getValueAndResolveTokens("text-field",Ni,C,ln),pa=Aa.factory(ia);Tr(pa)&&(this.hasRTLText=!0),(!this.hasRTLText||ni()==="unavailable"||this.hasRTLText&&li.isParsed())&&(Fi=dn(pa,N,Ni))}var va=void 0;if(ve){var qi=N.getValueAndResolveTokens("icon-image",Ni,C,ln);va=qi instanceof to?qi:to.fromString(qi)}if(Fi||va){var eo=this.sortFeaturesByKey?Re.evaluate(Ni,{},C):void 0;if(this.features.push({id:Nr,text:Fi,icon:va,index:Yr,sourceLayerIndex:vi,geometry:Ni.geometry,properties:_r.properties,type:Er[_r.type],sortKey:eo}),va&&(Ge[va.name]=!0),Fi){var wa=ct.evaluate(Ni,{},C).join(","),ya=Q.get("text-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ma.vertical)>=0;for(var es=0,yo=Fi.sections;es<yo.length;es+=1){var Us=yo[es];if(Us.image)Ge[Us.image.name]=!0;else{var Va=yu(Fi.toString()),ko=Us.fontStack||wa,Iu=He[ko]=He[ko]||{};this.calculateGlyphDependencies(Us.text,Iu,ya,this.allowVerticalPlacement,Va)}}}}}}Q.get("symbol-placement")==="line"&&(this.features=function(Lu){var el={},hl={},Rl=[],Kl=0;function dl(nl){Rl.push(Lu[nl]),Kl++}function hc(nl,rl,wc){var Cs=hl[nl];return delete hl[nl],hl[rl]=Cs,Rl[Cs].geometry[0].pop(),Rl[Cs].geometry[0]=Rl[Cs].geometry[0].concat(wc[0]),Cs}function zl(nl,rl,wc){var Cs=el[rl];return delete el[rl],el[nl]=Cs,Rl[Cs].geometry[0].shift(),Rl[Cs].geometry[0]=wc[0].concat(Rl[Cs].geometry[0]),Cs}function Dc(nl,rl,wc){var Cs=wc?rl[0][rl[0].length-1]:rl[0][0];return nl+":"+Cs.x+":"+Cs.y}for(var ec=0;ec<Lu.length;ec++){var Ul=Lu[ec],dc=Ul.geometry,As=Ul.text?Ul.text.toString():null;if(As){var ns=Dc(As,dc),du=Dc(As,dc,!0);if(ns in hl&&du in el&&hl[ns]!==el[du]){var Mu=zl(ns,du,dc),jc=hc(ns,du,Rl[Mu].geometry);delete el[ns],delete hl[du],hl[Dc(As,Rl[jc].geometry,!0)]=jc,Rl[Mu].geometry=null}else ns in hl?hc(ns,du,dc):du in el?zl(ns,du,dc):(dl(ec),el[ns]=Kl-1,hl[du]=Kl-1)}else dl(ec)}return Rl.filter(function(nl){return nl.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Lu,el){return Lu.sortKey-el.sortKey})}},Hr.prototype.update=function(d,p,C){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(d,p,this.layers,C),this.icon.programConfigurations.updatePaintArrays(d,p,this.layers,C))},Hr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Hr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Hr.prototype.upload=function(d){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(d),this.iconCollisionBox.upload(d)),this.text.upload(d,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(d,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Hr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Hr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Hr.prototype.addToLineVertexArray=function(d,p){var C=this.lineVertexArray.length;if(d.segment!==void 0){for(var N=d.dist(p[d.segment+1]),Q=d.dist(p[d.segment]),ct={},Tt=d.segment+1;Tt<p.length;Tt++)ct[Tt]={x:p[Tt].x,y:p[Tt].y,tileUnitDistanceFromAnchor:N},Tt<p.length-1&&(N+=p[Tt+1].dist(p[Tt]));for(var Bt=d.segment||0;Bt>=0;Bt--)ct[Bt]={x:p[Bt].x,y:p[Bt].y,tileUnitDistanceFromAnchor:Q},Bt>0&&(Q+=p[Bt-1].dist(p[Bt]));for(var Jt=0;Jt<p.length;Jt++){var ve=ct[Jt];this.lineVertexArray.emplaceBack(ve.x,ve.y,ve.tileUnitDistanceFromAnchor)}}return{lineStartIndex:C,lineLength:this.lineVertexArray.length-C}},Hr.prototype.addSymbols=function(d,p,C,N,Q,ct,Tt,Bt,Jt,ve,Re,Ge){for(var He=d.indexArray,ln=d.layoutVertexArray,Ln=d.segments.prepareSegment(4*p.length,ln,He,this.canOverlap?ct.sortKey:void 0),Cn=this.glyphOffsetArray.length,Kn=Ln.vertexLength,Yn=this.allowVerticalPlacement&&Tt===ma.vertical?Math.PI/2:0,_r=ct.text&&ct.text.sections,Nr=0;Nr<p.length;Nr++){var Yr=p[Nr],vi=Yr.tl,si=Yr.tr,Ni=Yr.bl,Fi=Yr.br,ia=Yr.tex,pa=Yr.pixelOffsetTL,va=Yr.pixelOffsetBR,qi=Yr.minFontScaleX,eo=Yr.minFontScaleY,wa=Yr.glyphOffset,ya=Yr.isSDF,es=Yr.sectionIndex,yo=Ln.vertexLength,Us=wa[1];Jn(ln,Bt.x,Bt.y,vi.x,Us+vi.y,ia.x,ia.y,C,ya,pa.x,pa.y,qi,eo),Jn(ln,Bt.x,Bt.y,si.x,Us+si.y,ia.x+ia.w,ia.y,C,ya,va.x,pa.y,qi,eo),Jn(ln,Bt.x,Bt.y,Ni.x,Us+Ni.y,ia.x,ia.y+ia.h,C,ya,pa.x,va.y,qi,eo),Jn(ln,Bt.x,Bt.y,Fi.x,Us+Fi.y,ia.x+ia.w,ia.y+ia.h,C,ya,va.x,va.y,qi,eo),bn(d.dynamicLayoutVertexArray,Bt,Yn),He.emplaceBack(yo,yo+1,yo+2),He.emplaceBack(yo+1,yo+2,yo+3),Ln.vertexLength+=4,Ln.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wa[0]),Nr!==p.length-1&&es===p[Nr+1].sectionIndex||d.programConfigurations.populatePaintArrays(ln.length,ct,ct.index,{},Ge,_r&&_r[es])}d.placedSymbolArray.emplaceBack(Bt.x,Bt.y,Cn,this.glyphOffsetArray.length-Cn,Kn,Jt,ve,Bt.segment,C?C[0]:0,C?C[1]:0,N[0],N[1],Tt,0,!1,0,Re)},Hr.prototype._addCollisionDebugVertex=function(d,p,C,N,Q,ct){return p.emplaceBack(0,0),d.emplaceBack(C.x,C.y,N,Q,Math.round(ct.x),Math.round(ct.y))},Hr.prototype.addCollisionDebugVertices=function(d,p,C,N,Q,ct,Tt){var Bt=Q.segments.prepareSegment(4,Q.layoutVertexArray,Q.indexArray),Jt=Bt.vertexLength,ve=Q.layoutVertexArray,Re=Q.collisionVertexArray,Ge=Tt.anchorX,He=Tt.anchorY;this._addCollisionDebugVertex(ve,Re,ct,Ge,He,new r(d,p)),this._addCollisionDebugVertex(ve,Re,ct,Ge,He,new r(C,p)),this._addCollisionDebugVertex(ve,Re,ct,Ge,He,new r(C,N)),this._addCollisionDebugVertex(ve,Re,ct,Ge,He,new r(d,N)),Bt.vertexLength+=4;var ln=Q.indexArray;ln.emplaceBack(Jt,Jt+1),ln.emplaceBack(Jt+1,Jt+2),ln.emplaceBack(Jt+2,Jt+3),ln.emplaceBack(Jt+3,Jt),Bt.primitiveLength+=4},Hr.prototype.addDebugCollisionBoxes=function(d,p,C,N){for(var Q=d;Q<p;Q++){var ct=this.collisionBoxArray.get(Q);this.addCollisionDebugVertices(ct.x1,ct.y1,ct.x2,ct.y2,N?this.textCollisionBox:this.iconCollisionBox,ct.anchorPoint,C)}},Hr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ci(Pa,ze.members,Fs),this.iconCollisionBox=new ci(Pa,ze.members,Fs);for(var d=0;d<this.symbolInstances.length;d++){var p=this.symbolInstances.get(d);this.addDebugCollisionBoxes(p.textBoxStartIndex,p.textBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.iconBoxStartIndex,p.iconBoxEndIndex,p,!1),this.addDebugCollisionBoxes(p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex,p,!1)}},Hr.prototype._deserializeCollisionBoxesForSymbol=function(d,p,C,N,Q,ct,Tt,Bt,Jt){for(var ve={},Re=p;Re<C;Re++){var Ge=d.get(Re);ve.textBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},ve.textFeatureIndex=Ge.featureIndex;break}for(var He=N;He<Q;He++){var ln=d.get(He);ve.verticalTextBox={x1:ln.x1,y1:ln.y1,x2:ln.x2,y2:ln.y2,anchorPointX:ln.anchorPointX,anchorPointY:ln.anchorPointY},ve.verticalTextFeatureIndex=ln.featureIndex;break}for(var Ln=ct;Ln<Tt;Ln++){var Cn=d.get(Ln);ve.iconBox={x1:Cn.x1,y1:Cn.y1,x2:Cn.x2,y2:Cn.y2,anchorPointX:Cn.anchorPointX,anchorPointY:Cn.anchorPointY},ve.iconFeatureIndex=Cn.featureIndex;break}for(var Kn=Bt;Kn<Jt;Kn++){var Yn=d.get(Kn);ve.verticalIconBox={x1:Yn.x1,y1:Yn.y1,x2:Yn.x2,y2:Yn.y2,anchorPointX:Yn.anchorPointX,anchorPointY:Yn.anchorPointY},ve.verticalIconFeatureIndex=Yn.featureIndex;break}return ve},Hr.prototype.deserializeCollisionBoxes=function(d){this.collisionArrays=[];for(var p=0;p<this.symbolInstances.length;p++){var C=this.symbolInstances.get(p);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(d,C.textBoxStartIndex,C.textBoxEndIndex,C.verticalTextBoxStartIndex,C.verticalTextBoxEndIndex,C.iconBoxStartIndex,C.iconBoxEndIndex,C.verticalIconBoxStartIndex,C.verticalIconBoxEndIndex))}},Hr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Hr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Hr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Hr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Hr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Hr.prototype.addIndicesForPlacedSymbol=function(d,p){for(var C=d.placedSymbolArray.get(p),N=C.vertexStartIndex+4*C.numGlyphs,Q=C.vertexStartIndex;Q<N;Q+=4)d.indexArray.emplaceBack(Q,Q+1,Q+2),d.indexArray.emplaceBack(Q+1,Q+2,Q+3)},Hr.prototype.getSortedSymbolIndexes=function(d){if(this.sortedAngle===d&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var p=Math.sin(d),C=Math.cos(d),N=[],Q=[],ct=[],Tt=0;Tt<this.symbolInstances.length;++Tt){ct.push(Tt);var Bt=this.symbolInstances.get(Tt);N.push(0|Math.round(p*Bt.anchorX+C*Bt.anchorY)),Q.push(Bt.featureIndex)}return ct.sort(function(Jt,ve){return N[Jt]-N[ve]||Q[ve]-Q[Jt]}),ct},Hr.prototype.addToSortKeyRanges=function(d,p){var C=this.sortKeyRanges[this.sortKeyRanges.length-1];C&&C.sortKey===p?C.symbolInstanceEnd=d+1:this.sortKeyRanges.push({sortKey:p,symbolInstanceStart:d,symbolInstanceEnd:d+1})},Hr.prototype.sortFeatures=function(d){var p=this;if(this.sortFeaturesByY&&this.sortedAngle!==d&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(d),this.sortedAngle=d,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var C=0,N=this.symbolInstanceIndexes;C<N.length;C+=1){var Q=this.symbolInstances.get(N[C]);this.featureSortOrder.push(Q.featureIndex),[Q.rightJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.leftJustifiedTextSymbolIndex].forEach(function(ct,Tt,Bt){ct>=0&&Bt.indexOf(ct)===Tt&&p.addIndicesForPlacedSymbol(p.text,ct)}),Q.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Q.verticalPlacedTextSymbolIndex),Q.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Q.placedIconSymbolIndex),Q.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Q.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Wi("SymbolBucket",Hr,{omit:["layers","collisionBoxArray","features","compareText"]}),Hr.MAX_GLYPHS=65535,Hr.addDynamicAttributes=bn;var ai=new pn({"symbol-placement":new he(ue.layout_symbol["symbol-placement"]),"symbol-spacing":new he(ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new he(ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Fe(ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new he(ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new he(ue.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new he(ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new he(ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new he(ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new Fe(ue.layout_symbol["icon-size"]),"icon-text-fit":new he(ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new he(ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new Fe(ue.layout_symbol["icon-image"]),"icon-rotate":new Fe(ue.layout_symbol["icon-rotate"]),"icon-padding":new he(ue.layout_symbol["icon-padding"]),"icon-keep-upright":new he(ue.layout_symbol["icon-keep-upright"]),"icon-offset":new Fe(ue.layout_symbol["icon-offset"]),"icon-anchor":new Fe(ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new he(ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new he(ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new he(ue.layout_symbol["text-rotation-alignment"]),"text-field":new Fe(ue.layout_symbol["text-field"]),"text-font":new Fe(ue.layout_symbol["text-font"]),"text-size":new Fe(ue.layout_symbol["text-size"]),"text-max-width":new Fe(ue.layout_symbol["text-max-width"]),"text-line-height":new he(ue.layout_symbol["text-line-height"]),"text-letter-spacing":new Fe(ue.layout_symbol["text-letter-spacing"]),"text-justify":new Fe(ue.layout_symbol["text-justify"]),"text-radial-offset":new Fe(ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new he(ue.layout_symbol["text-variable-anchor"]),"text-anchor":new Fe(ue.layout_symbol["text-anchor"]),"text-max-angle":new he(ue.layout_symbol["text-max-angle"]),"text-writing-mode":new he(ue.layout_symbol["text-writing-mode"]),"text-rotate":new Fe(ue.layout_symbol["text-rotate"]),"text-padding":new he(ue.layout_symbol["text-padding"]),"text-keep-upright":new he(ue.layout_symbol["text-keep-upright"]),"text-transform":new Fe(ue.layout_symbol["text-transform"]),"text-offset":new Fe(ue.layout_symbol["text-offset"]),"text-allow-overlap":new he(ue.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new he(ue.layout_symbol["text-ignore-placement"]),"text-optional":new he(ue.layout_symbol["text-optional"])}),Bi={paint:new pn({"icon-opacity":new Fe(ue.paint_symbol["icon-opacity"]),"icon-color":new Fe(ue.paint_symbol["icon-color"]),"icon-halo-color":new Fe(ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new Fe(ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Fe(ue.paint_symbol["icon-halo-blur"]),"icon-translate":new he(ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new he(ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new Fe(ue.paint_symbol["text-opacity"]),"text-color":new Fe(ue.paint_symbol["text-color"],{runtimeType:De,getOverride:function(p){return p.textColor},hasOverride:function(p){return!!p.textColor}}),"text-halo-color":new Fe(ue.paint_symbol["text-halo-color"]),"text-halo-width":new Fe(ue.paint_symbol["text-halo-width"]),"text-halo-blur":new Fe(ue.paint_symbol["text-halo-blur"]),"text-translate":new he(ue.paint_symbol["text-translate"]),"text-translate-anchor":new he(ue.paint_symbol["text-translate-anchor"])}),layout:ai},ha=function(p){this.type=p.property.overrides?p.property.overrides.runtimeType:or,this.defaultValue=p};ha.prototype.evaluate=function(d){if(d.formattedSection){var p=this.defaultValue.property.overrides;if(p&&p.hasOverride(d.formattedSection))return p.getOverride(d.formattedSection)}return d.feature&&d.featureState?this.defaultValue.evaluate(d.feature,d.featureState):this.defaultValue.property.specification.default},ha.prototype.eachChild=function(d){this.defaultValue.isConstant()||d(this.defaultValue.value._styleExpression.expression)},ha.prototype.outputDefined=function(){return!1},ha.prototype.serialize=function(){return null},Wi("FormatSectionOverride",ha,{omit:["defaultValue"]});var fo=function(d){function p(C){d.call(this,C,Bi)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.recalculate=function(C,N){if(d.prototype.recalculate.call(this,C,N),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Q=this.layout.get("text-writing-mode");if(Q){for(var ct=[],Tt=0,Bt=Q;Tt<Bt.length;Tt+=1){var Jt=Bt[Tt];ct.indexOf(Jt)<0&&ct.push(Jt)}this.layout._values["text-writing-mode"]=ct}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},p.prototype.getValueAndResolveTokens=function(C,N,Q,ct){var Tt=this.layout.get(C).evaluate(N,{},Q,ct),Bt=this._unevaluatedLayout._values[C];return Bt.isDataDriven()||qs(Bt.value)||!Tt?Tt:function(Jt,ve){return ve.replace(/{([^{}]+)}/g,function(Re,Ge){return Ge in Jt?String(Jt[Ge]):""})}(N.properties,Tt)},p.prototype.createBucket=function(C){return new Hr(C)},p.prototype.queryRadius=function(){return 0},p.prototype.queryIntersectsFeature=function(){return!1},p.prototype._setPaintOverrides=function(){for(var C=0,N=Bi.paint.overridableProperties;C<N.length;C+=1){var Q=N[C];if(p.hasPaintOverride(this.layout,Q)){var ct,Tt=this.paint.get(Q),Bt=new ha(Tt),Jt=new ml(Bt,Tt.property.specification);ct=Tt.value.kind==="constant"||Tt.value.kind==="source"?new vu("source",Jt):new pu("composite",Jt,Tt.value.zoomStops,Tt.value._interpolationType),this.paint._values[Q]=new oe(Tt.property,ct,Tt.parameters)}}},p.prototype._handleOverridablePaintPropertyUpdate=function(C,N,Q){return!(!this.layout||N.isDataDriven()||Q.isDataDriven())&&p.hasPaintOverride(this.layout,C)},p.hasPaintOverride=function(C,N){var Q=C.get("text-field"),ct=Bi.paint.properties[N],Tt=!1,Bt=function(Ge){for(var He=0,ln=Ge;He<ln.length;He+=1)if(ct.overrides&&ct.overrides.hasOverride(ln[He]))return void(Tt=!0)};if(Q.value.kind==="constant"&&Q.value.value instanceof Aa)Bt(Q.value.value.sections);else if(Q.value.kind==="source"){var Jt=function Re(Ge){Tt||(Ge instanceof Jo&&ro(Ge.value)===xn?Bt(Ge.value.sections):Ge instanceof $o?Bt(Ge.sections):Ge.eachChild(Re))},ve=Q.value;ve._styleExpression&&Jt(ve._styleExpression.expression)}return Tt},p}(fn),da={paint:new pn({"background-color":new he(ue.paint_background["background-color"]),"background-pattern":new nn(ue.paint_background["background-pattern"]),"background-opacity":new he(ue.paint_background["background-opacity"])})},Na=function(d){function p(C){d.call(this,C,da)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(fn),ho={paint:new pn({"raster-opacity":new he(ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new he(ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new he(ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new he(ue.paint_raster["raster-brightness-max"]),"raster-saturation":new he(ue.paint_raster["raster-saturation"]),"raster-contrast":new he(ue.paint_raster["raster-contrast"]),"raster-resampling":new he(ue.paint_raster["raster-resampling"]),"raster-fade-duration":new he(ue.paint_raster["raster-fade-duration"])})},cs=function(d){function p(C){d.call(this,C,ho)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(fn),Ll=function(d){function p(C){d.call(this,C,{}),this.implementation=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},p.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},p.prototype.recalculate=function(){},p.prototype.updateTransitions=function(){},p.prototype.hasTransition=function(){},p.prototype.serialize=function(){},p.prototype.onAdd=function(C){this.implementation.onAdd&&this.implementation.onAdd(C,C.painter.context.gl)},p.prototype.onRemove=function(C){this.implementation.onRemove&&this.implementation.onRemove(C,C.painter.context.gl)},p}(fn),Rc={circle:Nc,heatmap:vf,hillshade:Of,fill:Yl,"fill-extrusion":Tc,line:bt,symbol:fo,background:Na,raster:cs},Ql=n.HTMLImageElement,$c=n.HTMLCanvasElement,Lh=n.HTMLVideoElement,os=n.ImageData,rh=n.ImageBitmap,gf=function(p,C,N,Q){this.context=p,this.format=N,this.texture=p.gl.createTexture(),this.update(C,Q)};gf.prototype.update=function(d,p,C){var N=d.width,Q=d.height,ct=!(this.size&&this.size[0]===N&&this.size[1]===Q||C),Tt=this.context,Bt=Tt.gl;if(this.useMipmap=Boolean(p&&p.useMipmap),Bt.bindTexture(Bt.TEXTURE_2D,this.texture),Tt.pixelStoreUnpackFlipY.set(!1),Tt.pixelStoreUnpack.set(1),Tt.pixelStoreUnpackPremultiplyAlpha.set(this.format===Bt.RGBA&&(!p||p.premultiply!==!1)),ct)this.size=[N,Q],d instanceof Ql||d instanceof $c||d instanceof Lh||d instanceof os||rh&&d instanceof rh?Bt.texImage2D(Bt.TEXTURE_2D,0,this.format,this.format,Bt.UNSIGNED_BYTE,d):Bt.texImage2D(Bt.TEXTURE_2D,0,this.format,N,Q,0,this.format,Bt.UNSIGNED_BYTE,d.data);else{var Jt=C||{x:0,y:0},ve=Jt.x,Re=Jt.y;d instanceof Ql||d instanceof $c||d instanceof Lh||d instanceof os||rh&&d instanceof rh?Bt.texSubImage2D(Bt.TEXTURE_2D,0,ve,Re,Bt.RGBA,Bt.UNSIGNED_BYTE,d):Bt.texSubImage2D(Bt.TEXTURE_2D,0,ve,Re,N,Q,Bt.RGBA,Bt.UNSIGNED_BYTE,d.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Bt.generateMipmap(Bt.TEXTURE_2D)},gf.prototype.bind=function(d,p,C){var N=this.context.gl;N.bindTexture(N.TEXTURE_2D,this.texture),C!==N.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(C=N.LINEAR),d!==this.filter&&(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,d),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,C||d),this.filter=d),p!==this.wrap&&(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,p),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,p),this.wrap=p)},gf.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},gf.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var ih=function(p){var C=this;this._callback=p,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){C._triggered=!1,C._callback()})};ih.prototype.trigger=function(){var d=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){d._triggered=!1,d._callback()},0))},ih.prototype.remove=function(){delete this._channel,this._callback=function(){}};var yh=function(p,C,N){this.target=p,this.parent=C,this.mapId=N,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},M(["receive","process"],this),this.invoker=new ih(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=F()?p:n};function Pd(d,p,C){var N=2*Math.PI*6378137/256/Math.pow(2,C);return[d*N-2*Math.PI*6378137/2,p*N-2*Math.PI*6378137/2]}yh.prototype.send=function(d,p,C,N,Q){var ct=this;Q===void 0&&(Q=!1);var Tt=Math.round(1e18*Math.random()).toString(36).substring(0,10);C&&(this.callbacks[Tt]=C);var Bt=U(this.globalScope)?void 0:[];return this.target.postMessage({id:Tt,type:d,hasCallback:!!C,targetMapId:N,mustQueue:Q,sourceMapId:this.mapId,data:Uo(p,Bt)},Bt),{cancel:function(){C&&delete ct.callbacks[Tt],ct.target.postMessage({id:Tt,type:"<cancel>",targetMapId:N,sourceMapId:ct.mapId})}}},yh.prototype.receive=function(d){var p=d.data,C=p.id;if(C&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[C];var N=this.cancelCallbacks[C];delete this.cancelCallbacks[C],N&&N()}else F()||p.mustQueue?(this.tasks[C]=p,this.taskQueue.push(C),this.invoker.trigger()):this.processTask(C,p)},yh.prototype.process=function(){if(this.taskQueue.length){var d=this.taskQueue.shift(),p=this.tasks[d];delete this.tasks[d],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(d,p)}},yh.prototype.processTask=function(d,p){var C=this;if(p.type==="<response>"){var N=this.callbacks[d];delete this.callbacks[d],N&&(p.error?N(Wo(p.error)):N(null,Wo(p.data)))}else{var Q=!1,ct=U(this.globalScope)?void 0:[],Tt=p.hasCallback?function(Re,Ge){Q=!0,delete C.cancelCallbacks[d],C.target.postMessage({id:d,type:"<response>",sourceMapId:C.mapId,error:Re?Uo(Re):null,data:Uo(Ge,ct)},ct)}:function(Re){Q=!0},Bt=null,Jt=Wo(p.data);if(this.parent[p.type])Bt=this.parent[p.type](p.sourceMapId,Jt,Tt);else if(this.parent.getWorkerSource){var ve=p.type.split(".");Bt=this.parent.getWorkerSource(p.sourceMapId,ve[0],Jt.source)[ve[1]](Jt,Tt)}else Tt(new Error("Could not find function "+p.type));!Q&&Bt&&Bt.cancel&&(this.cancelCallbacks[d]=Bt.cancel)}},yh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ql=function(p,C){p&&(C?this.setSouthWest(p).setNorthEast(C):p.length===4?this.setSouthWest([p[0],p[1]]).setNorthEast([p[2],p[3]]):this.setSouthWest(p[0]).setNorthEast(p[1]))};ql.prototype.setNorthEast=function(d){return this._ne=d instanceof tl?new tl(d.lng,d.lat):tl.convert(d),this},ql.prototype.setSouthWest=function(d){return this._sw=d instanceof tl?new tl(d.lng,d.lat):tl.convert(d),this},ql.prototype.extend=function(d){var p,C,N=this._sw,Q=this._ne;if(d instanceof tl)p=d,C=d;else{if(!(d instanceof ql))return Array.isArray(d)?d.length===4||d.every(Array.isArray)?this.extend(ql.convert(d)):this.extend(tl.convert(d)):this;if(C=d._ne,!(p=d._sw)||!C)return this}return N||Q?(N.lng=Math.min(p.lng,N.lng),N.lat=Math.min(p.lat,N.lat),Q.lng=Math.max(C.lng,Q.lng),Q.lat=Math.max(C.lat,Q.lat)):(this._sw=new tl(p.lng,p.lat),this._ne=new tl(C.lng,C.lat)),this},ql.prototype.getCenter=function(){return new tl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ql.prototype.getSouthWest=function(){return this._sw},ql.prototype.getNorthEast=function(){return this._ne},ql.prototype.getNorthWest=function(){return new tl(this.getWest(),this.getNorth())},ql.prototype.getSouthEast=function(){return new tl(this.getEast(),this.getSouth())},ql.prototype.getWest=function(){return this._sw.lng},ql.prototype.getSouth=function(){return this._sw.lat},ql.prototype.getEast=function(){return this._ne.lng},ql.prototype.getNorth=function(){return this._ne.lat},ql.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ql.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ql.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ql.prototype.contains=function(d){var p=tl.convert(d),C=p.lng,N=p.lat,Q=this._sw.lng<=C&&C<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Q=this._sw.lng>=C&&C>=this._ne.lng),this._sw.lat<=N&&N<=this._ne.lat&&Q},ql.convert=function(d){return!d||d instanceof ql?d:new ql(d)};var tl=function(p,C){if(isNaN(p)||isNaN(C))throw new Error("Invalid LngLat object: ("+p+", "+C+")");if(this.lng=+p,this.lat=+C,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};tl.prototype.wrap=function(){return new tl(f(this.lng,-180,180),this.lat)},tl.prototype.toArray=function(){return[this.lng,this.lat]},tl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},tl.prototype.distanceTo=function(d){var p=Math.PI/180,C=this.lat*p,N=d.lat*p,Q=Math.sin(C)*Math.sin(N)+Math.cos(C)*Math.cos(N)*Math.cos((d.lng-this.lng)*p);return 63710088e-1*Math.acos(Math.min(Q,1))},tl.prototype.toBounds=function(d){d===void 0&&(d=0);var p=360*d/40075017,C=p/Math.cos(Math.PI/180*this.lat);return new ql(new tl(this.lng-C,this.lat-p),new tl(this.lng+C,this.lat+p))},tl.convert=function(d){if(d instanceof tl)return d;if(Array.isArray(d)&&(d.length===2||d.length===3))return new tl(Number(d[0]),Number(d[1]));if(!Array.isArray(d)&&typeof d=="object"&&d!==null)return new tl(Number("lng"in d?d.lng:d.lon),Number(d.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Td=2*Math.PI*63710088e-1;function ld(d){return Td*Math.cos(d*Math.PI/180)}function cd(d){return(180+d)/360}function Ad(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function Cd(d,p){return d/ld(p)}function fd(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}var Zf=function(p,C,N){N===void 0&&(N=0),this.x=+p,this.y=+C,this.z=+N};Zf.fromLngLat=function(d,p){p===void 0&&(p=0);var C=tl.convert(d);return new Zf(cd(C.lng),Ad(C.lat),Cd(p,C.lat))},Zf.prototype.toLngLat=function(){return new tl(360*this.x-180,fd(this.y))},Zf.prototype.toAltitude=function(){return this.z*ld(fd(this.y))},Zf.prototype.meterInMercatorCoordinateUnits=function(){return 1/Td*(d=fd(this.y),1/Math.cos(d*Math.PI/180));var d};var ah=function(p,C,N){this.z=p,this.x=C,this.y=N,this.key=Rh(0,p,p,C,N)};ah.prototype.equals=function(d){return this.z===d.z&&this.x===d.x&&this.y===d.y},ah.prototype.url=function(d,p){var C,N,Q,ct,Tt,Bt=(N=this.y,Q=this.z,ct=Pd(256*(C=this.x),256*(N=Math.pow(2,Q)-N-1),Q),Tt=Pd(256*(C+1),256*(N+1),Q),ct[0]+","+ct[1]+","+Tt[0]+","+Tt[1]),Jt=function(ve,Re,Ge){for(var He,ln="",Ln=ve;Ln>0;Ln--)ln+=(Re&(He=1<<Ln-1)?1:0)+(Ge&He?2:0);return ln}(this.z,this.x,this.y);return d[(this.x+this.y)%d.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Jt).replace("{bbox-epsg-3857}",Bt)},ah.prototype.getTilePoint=function(d){var p=Math.pow(2,this.z);return new r(8192*(d.x*p-this.x),8192*(d.y*p-this.y))},ah.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var hd=function(p,C){this.wrap=p,this.canonical=C,this.key=Rh(p,C.z,C.z,C.x,C.y)},tc=function(p,C,N,Q,ct){this.overscaledZ=p,this.wrap=C,this.canonical=new ah(N,+Q,+ct),this.key=Rh(C,p,N,Q,ct)};function Rh(d,p,C,N,Q){(d*=2)<0&&(d=-1*d-1);var ct=1<<C;return(ct*ct*d+ct*Q+N).toString(36)+C.toString(36)+p.toString(36)}tc.prototype.equals=function(d){return this.overscaledZ===d.overscaledZ&&this.wrap===d.wrap&&this.canonical.equals(d.canonical)},tc.prototype.scaledTo=function(d){var p=this.canonical.z-d;return d>this.canonical.z?new tc(d,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new tc(d,this.wrap,d,this.canonical.x>>p,this.canonical.y>>p)},tc.prototype.calculateScaledKey=function(d,p){var C=this.canonical.z-d;return d>this.canonical.z?Rh(this.wrap*+p,d,this.canonical.z,this.canonical.x,this.canonical.y):Rh(this.wrap*+p,d,d,this.canonical.x>>C,this.canonical.y>>C)},tc.prototype.isChildOf=function(d){if(d.wrap!==this.wrap)return!1;var p=this.canonical.z-d.canonical.z;return d.overscaledZ===0||d.overscaledZ<this.overscaledZ&&d.canonical.x===this.canonical.x>>p&&d.canonical.y===this.canonical.y>>p},tc.prototype.children=function(d){if(this.overscaledZ>=d)return[new tc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var p=this.canonical.z+1,C=2*this.canonical.x,N=2*this.canonical.y;return[new tc(p,this.wrap,p,C,N),new tc(p,this.wrap,p,C+1,N),new tc(p,this.wrap,p,C,N+1),new tc(p,this.wrap,p,C+1,N+1)]},tc.prototype.isLessThan=function(d){return this.wrap<d.wrap||!(this.wrap>d.wrap)&&(this.overscaledZ<d.overscaledZ||!(this.overscaledZ>d.overscaledZ)&&(this.canonical.x<d.canonical.x||!(this.canonical.x>d.canonical.x)&&this.canonical.y<d.canonical.y))},tc.prototype.wrapped=function(){return new tc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},tc.prototype.unwrapTo=function(d){return new tc(this.overscaledZ,d,this.canonical.z,this.canonical.x,this.canonical.y)},tc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},tc.prototype.toUnwrapped=function(){return new hd(this.wrap,this.canonical)},tc.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},tc.prototype.getTilePoint=function(d){return this.canonical.getTilePoint(new Zf(d.x-this.wrap,d.y))},Wi("CanonicalTileID",ah),Wi("OverscaledTileID",tc,{omit:["posMatrix"]});var Rf=function(p,C,N){if(this.uid=p,C.height!==C.width)throw new RangeError("DEM tiles must be square");if(N&&N!=="mapbox"&&N!=="terrarium")return O('"'+N+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=C.height;var Q=this.dim=C.height-2;this.data=new Uint32Array(C.data.buffer),this.encoding=N||"mapbox";for(var ct=0;ct<Q;ct++)this.data[this._idx(-1,ct)]=this.data[this._idx(0,ct)],this.data[this._idx(Q,ct)]=this.data[this._idx(Q-1,ct)],this.data[this._idx(ct,-1)]=this.data[this._idx(ct,0)],this.data[this._idx(ct,Q)]=this.data[this._idx(ct,Q-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(Q,-1)]=this.data[this._idx(Q-1,0)],this.data[this._idx(-1,Q)]=this.data[this._idx(0,Q-1)],this.data[this._idx(Q,Q)]=this.data[this._idx(Q-1,Q-1)]};Rf.prototype.get=function(d,p){var C=new Uint8Array(this.data.buffer),N=4*this._idx(d,p);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(C[N],C[N+1],C[N+2])},Rf.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Rf.prototype._idx=function(d,p){if(d<-1||d>=this.dim+1||p<-1||p>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(p+1)*this.stride+(d+1)},Rf.prototype._unpackMapbox=function(d,p,C){return(256*d*256+256*p+C)/10-1e4},Rf.prototype._unpackTerrarium=function(d,p,C){return 256*d+p+C/256-32768},Rf.prototype.getPixels=function(){return new El({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Rf.prototype.backfillBorder=function(d,p,C){if(this.dim!==d.dim)throw new Error("dem dimension mismatch");var N=p*this.dim,Q=p*this.dim+this.dim,ct=C*this.dim,Tt=C*this.dim+this.dim;switch(p){case-1:N=Q-1;break;case 1:Q=N+1}switch(C){case-1:ct=Tt-1;break;case 1:Tt=ct+1}for(var Bt=-p*this.dim,Jt=-C*this.dim,ve=ct;ve<Tt;ve++)for(var Re=N;Re<Q;Re++)this.data[this._idx(Re,ve)]=d.data[this._idx(Re+Bt,ve+Jt)]},Wi("DEMData",Rf);var Zh=function(p){this._stringToNumber={},this._numberToString=[];for(var C=0;C<p.length;C++){var N=p[C];this._stringToNumber[N]=C,this._numberToString[C]=N}};Zh.prototype.encode=function(d){return this._stringToNumber[d]},Zh.prototype.decode=function(d){return this._numberToString[d]};var Kh=function(p,C,N,Q,ct){this.type="Feature",this._vectorTileFeature=p,p._z=C,p._x=N,p._y=Q,this.properties=p.properties,this.id=ct},dd={geometry:{configurable:!0}};dd.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},dd.geometry.set=function(d){this._geometry=d},Kh.prototype.toJSON=function(){var d={geometry:this.geometry};for(var p in this)p!=="_geometry"&&p!=="_vectorTileFeature"&&(d[p]=this[p]);return d},Object.defineProperties(Kh.prototype,dd);var xh=function(){this.state={},this.stateChanges={},this.deletedStates={}};xh.prototype.updateState=function(d,p,C){var N=String(p);if(this.stateChanges[d]=this.stateChanges[d]||{},this.stateChanges[d][N]=this.stateChanges[d][N]||{},v(this.stateChanges[d][N],C),this.deletedStates[d]===null)for(var Q in this.deletedStates[d]={},this.state[d])Q!==N&&(this.deletedStates[d][Q]=null);else if(this.deletedStates[d]&&this.deletedStates[d][N]===null)for(var ct in this.deletedStates[d][N]={},this.state[d][N])C[ct]||(this.deletedStates[d][N][ct]=null);else for(var Tt in C)this.deletedStates[d]&&this.deletedStates[d][N]&&this.deletedStates[d][N][Tt]===null&&delete this.deletedStates[d][N][Tt]},xh.prototype.removeFeatureState=function(d,p,C){if(this.deletedStates[d]!==null){var N=String(p);if(this.deletedStates[d]=this.deletedStates[d]||{},C&&p!==void 0)this.deletedStates[d][N]!==null&&(this.deletedStates[d][N]=this.deletedStates[d][N]||{},this.deletedStates[d][N][C]=null);else if(p!==void 0)if(this.stateChanges[d]&&this.stateChanges[d][N])for(C in this.deletedStates[d][N]={},this.stateChanges[d][N])this.deletedStates[d][N][C]=null;else this.deletedStates[d][N]=null;else this.deletedStates[d]=null}},xh.prototype.getState=function(d,p){var C=String(p),N=v({},(this.state[d]||{})[C],(this.stateChanges[d]||{})[C]);if(this.deletedStates[d]===null)return{};if(this.deletedStates[d]){var Q=this.deletedStates[d][p];if(Q===null)return{};for(var ct in Q)delete N[ct]}return N},xh.prototype.initializeTileState=function(d,p){d.setFeatureState(this.state,p)},xh.prototype.coalesceChanges=function(d,p){var C={};for(var N in this.stateChanges){this.state[N]=this.state[N]||{};var Q={};for(var ct in this.stateChanges[N])this.state[N][ct]||(this.state[N][ct]={}),v(this.state[N][ct],this.stateChanges[N][ct]),Q[ct]=this.state[N][ct];C[N]=Q}for(var Tt in this.deletedStates){this.state[Tt]=this.state[Tt]||{};var Bt={};if(this.deletedStates[Tt]===null)for(var Jt in this.state[Tt])Bt[Jt]={},this.state[Tt][Jt]={};else for(var ve in this.deletedStates[Tt]){if(this.deletedStates[Tt][ve]===null)this.state[Tt][ve]={};else for(var Re=0,Ge=Object.keys(this.deletedStates[Tt][ve]);Re<Ge.length;Re+=1)delete this.state[Tt][ve][Ge[Re]];Bt[ve]=this.state[Tt][ve]}C[Tt]=C[Tt]||{},v(C[Tt],Bt)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(var He in d)d[He].setFeatureState(C,p)};var Mf=function(p,C){this.tileID=p,this.x=p.canonical.x,this.y=p.canonical.y,this.z=p.canonical.z,this.grid=new Ws(8192,16,0),this.grid3D=new Ws(8192,16,0),this.featureIndexArray=new It,this.promoteId=C};function Od(d,p,C,N,Q){return y(d,function(ct,Tt){var Bt=p instanceof ne?p.get(Tt):null;return Bt&&Bt.evaluate?Bt.evaluate(C,N,Q):Bt})}function wd(d){for(var p=1/0,C=1/0,N=-1/0,Q=-1/0,ct=0,Tt=d;ct<Tt.length;ct+=1){var Bt=Tt[ct];p=Math.min(p,Bt.x),C=Math.min(C,Bt.y),N=Math.max(N,Bt.x),Q=Math.max(Q,Bt.y)}return{minX:p,minY:C,maxX:N,maxY:Q}}function Ud(d,p){return p-d}Mf.prototype.insert=function(d,p,C,N,Q,ct){var Tt=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(C,N,Q);for(var Bt=ct?this.grid3D:this.grid,Jt=0;Jt<p.length;Jt++){for(var ve=p[Jt],Re=[1/0,1/0,-1/0,-1/0],Ge=0;Ge<ve.length;Ge++){var He=ve[Ge];Re[0]=Math.min(Re[0],He.x),Re[1]=Math.min(Re[1],He.y),Re[2]=Math.max(Re[2],He.x),Re[3]=Math.max(Re[3],He.y)}Re[0]<8192&&Re[1]<8192&&Re[2]>=0&&Re[3]>=0&&Bt.insert(Tt,Re[0],Re[1],Re[2],Re[3])}},Mf.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new _f.VectorTile(new xe(this.rawTileData)).layers,this.sourceLayerCoder=new Zh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Mf.prototype.query=function(d,p,C,N){var Q=this;this.loadVTLayers();for(var ct=d.params||{},Tt=8192/d.tileSize/d.scale,Bt=au(ct.filter),Jt=d.queryGeometry,ve=d.queryPadding*Tt,Re=wd(Jt),Ge=this.grid.query(Re.minX-ve,Re.minY-ve,Re.maxX+ve,Re.maxY+ve),He=wd(d.cameraQueryGeometry),ln=this.grid3D.query(He.minX-ve,He.minY-ve,He.maxX+ve,He.maxY+ve,function(Yr,vi,si,Ni){return function(Fi,ia,pa,va,qi){for(var eo=0,wa=Fi;eo<wa.length;eo+=1){var ya=wa[eo];if(ia<=ya.x&&pa<=ya.y&&va>=ya.x&&qi>=ya.y)return!0}var es=[new r(ia,pa),new r(ia,qi),new r(va,qi),new r(va,pa)];if(Fi.length>2){for(var yo=0,Us=es;yo<Us.length;yo+=1)if(Cc(Fi,Us[yo]))return!0}for(var Va=0;Va<Fi.length-1;Va++)if(Yc(Fi[Va],Fi[Va+1],es))return!0;return!1}(d.cameraQueryGeometry,Yr-ve,vi-ve,si+ve,Ni+ve)}),Ln=0,Cn=ln;Ln<Cn.length;Ln+=1)Ge.push(Cn[Ln]);Ge.sort(Ud);for(var Kn,Yn={},_r=function(vi){var si=Ge[vi];if(si!==Kn){Kn=si;var Ni=Q.featureIndexArray.get(si),Fi=null;Q.loadMatchingFeature(Yn,Ni.bucketIndex,Ni.sourceLayerIndex,Ni.featureIndex,Bt,ct.layers,ct.availableImages,p,C,N,function(ia,pa,va){return Fi||(Fi=ms(ia)),pa.queryIntersectsFeature(Jt,ia,va,Fi,Q.z,d.transform,Tt,d.pixelPosMatrix)})}},Nr=0;Nr<Ge.length;Nr++)_r(Nr);return Yn},Mf.prototype.loadMatchingFeature=function(d,p,C,N,Q,ct,Tt,Bt,Jt,ve,Re){var Ge=this.bucketLayerIDs[p];if(!ct||function(Fi,ia){for(var pa=0;pa<Fi.length;pa++)if(ia.indexOf(Fi[pa])>=0)return!0;return!1}(ct,Ge)){var He=this.sourceLayerCoder.decode(C),ln=this.vtLayers[He].feature(N);if(Q.needGeometry){var Ln=nu(ln,!0);if(!Q.filter(new yr(this.tileID.overscaledZ),Ln,this.tileID.canonical))return}else if(!Q.filter(new yr(this.tileID.overscaledZ),ln))return;for(var Cn=this.getId(ln,He),Kn=0;Kn<Ge.length;Kn++){var Yn=Ge[Kn];if(!(ct&&ct.indexOf(Yn)<0)){var _r=Bt[Yn];if(_r){var Nr={};Cn!==void 0&&ve&&(Nr=ve.getState(_r.sourceLayer||"_geojsonTileLayer",Cn));var Yr=v({},Jt[Yn]);Yr.paint=Od(Yr.paint,_r.paint,ln,Nr,Tt),Yr.layout=Od(Yr.layout,_r.layout,ln,Nr,Tt);var vi=!Re||Re(ln,_r,Nr);if(vi){var si=new Kh(ln,this.z,this.x,this.y,Cn);si.layer=Yr;var Ni=d[Yn];Ni===void 0&&(Ni=d[Yn]=[]),Ni.push({featureIndex:N,feature:si,intersectionZ:vi})}}}}}},Mf.prototype.lookupSymbolFeatures=function(d,p,C,N,Q,ct,Tt,Bt){var Jt={};this.loadVTLayers();for(var ve=au(Q),Re=0,Ge=d;Re<Ge.length;Re+=1)this.loadMatchingFeature(Jt,C,N,Ge[Re],ve,ct,Tt,Bt,p);return Jt},Mf.prototype.hasLayer=function(d){for(var p=0,C=this.bucketLayerIDs;p<C.length;p+=1)for(var N=0,Q=C[p];N<Q.length;N+=1)if(d===Q[N])return!0;return!1},Mf.prototype.getId=function(d,p){var C=d.id;return this.promoteId&&typeof(C=d.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[p]])=="boolean"&&(C=Number(C)),C},Wi("FeatureIndex",Mf,{omit:["rawTileData","sourceLayerCoder"]});var fc=function(p,C){this.tileID=p,this.uid=g(),this.uses=0,this.tileSize=C,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};fc.prototype.registerFadeDuration=function(d){var p=d+this.timeAdded;p<wt.now()||this.fadeEndTime&&p<this.fadeEndTime||(this.fadeEndTime=p)},fc.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},fc.prototype.loadVectorData=function(d,p,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",d){for(var N in d.featureIndex&&(this.latestFeatureIndex=d.featureIndex,d.rawTileData?(this.latestRawTileData=d.rawTileData,this.latestFeatureIndex.rawTileData=d.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=d.collisionBoxArray,this.buckets=function(ve,Re){var Ge={};if(!Re)return Ge;for(var He=function(){var Kn=Ln[ln],Yn=Kn.layerIds.map(function(Yr){return Re.getLayer(Yr)}).filter(Boolean);if(Yn.length!==0){Kn.layers=Yn,Kn.stateDependentLayerIds&&(Kn.stateDependentLayers=Kn.stateDependentLayerIds.map(function(Yr){return Yn.filter(function(vi){return vi.id===Yr})[0]}));for(var _r=0,Nr=Yn;_r<Nr.length;_r+=1)Ge[Nr[_r].id]=Kn}},ln=0,Ln=ve;ln<Ln.length;ln+=1)He();return Ge}(d.buckets,p.style),this.hasSymbolBuckets=!1,this.buckets){var Q=this.buckets[N];if(Q instanceof Hr){if(this.hasSymbolBuckets=!0,!C)break;Q.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var ct in this.buckets){var Tt=this.buckets[ct];if(Tt instanceof Hr&&Tt.hasRTLText){this.hasRTLText=!0,li.isLoading()||li.isLoaded()||ni()!=="deferred"||zr();break}}for(var Bt in this.queryPadding=0,this.buckets){var Jt=this.buckets[Bt];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(Bt).queryRadius(Jt))}d.imageAtlas&&(this.imageAtlas=d.imageAtlas),d.glyphAtlasImage&&(this.glyphAtlasImage=d.glyphAtlasImage)}else this.collisionBoxArray=new I},fc.prototype.unloadVectorData=function(){for(var d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},fc.prototype.getBucket=function(d){return this.buckets[d.id]},fc.prototype.upload=function(d){for(var p in this.buckets){var C=this.buckets[p];C.uploadPending()&&C.upload(d)}var N=d.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new gf(d,this.imageAtlas.image,N.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new gf(d,this.glyphAtlasImage,N.ALPHA),this.glyphAtlasImage=null)},fc.prototype.prepare=function(d){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(d,this.imageAtlasTexture)},fc.prototype.queryRenderedFeatures=function(d,p,C,N,Q,ct,Tt,Bt,Jt,ve){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:N,cameraQueryGeometry:Q,scale:ct,tileSize:this.tileSize,pixelPosMatrix:ve,transform:Bt,params:Tt,queryPadding:this.queryPadding*Jt},d,p,C):{}},fc.prototype.querySourceFeatures=function(d,p){var C=this.latestFeatureIndex;if(C&&C.rawTileData){var N=C.loadVTLayers(),Q=p?p.sourceLayer:"",ct=N._geojsonTileLayer||N[Q];if(ct)for(var Tt=au(p&&p.filter),Bt=this.tileID.canonical,Jt=Bt.z,ve=Bt.x,Re=Bt.y,Ge={z:Jt,x:ve,y:Re},He=0;He<ct.length;He++){var ln=ct.feature(He);if(Tt.needGeometry){var Ln=nu(ln,!0);if(!Tt.filter(new yr(this.tileID.overscaledZ),Ln,this.tileID.canonical))continue}else if(!Tt.filter(new yr(this.tileID.overscaledZ),ln))continue;var Cn=C.getId(ln,Q),Kn=new Kh(ln,Jt,ve,Re,Cn);Kn.tile=Ge,d.push(Kn)}}},fc.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},fc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},fc.prototype.setExpiryData=function(d){var p=this.expirationTime;if(d.cacheControl){var C=K(d.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else d.expires&&(this.expirationTime=new Date(d.expires).getTime());if(this.expirationTime){var N=Date.now(),Q=!1;if(this.expirationTime>N)Q=!1;else if(p)if(this.expirationTime<p)Q=!0;else{var ct=this.expirationTime-p;ct?this.expirationTime=N+Math.max(ct,3e4):Q=!0}else Q=!0;Q?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},fc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},fc.prototype.setFeatureState=function(d,p){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(d).length!==0){var C=this.latestFeatureIndex.loadVTLayers();for(var N in this.buckets)if(p.style.hasLayer(N)){var Q=this.buckets[N],ct=Q.layers[0].sourceLayer||"_geojsonTileLayer",Tt=C[ct],Bt=d[ct];if(Tt&&Bt&&Object.keys(Bt).length!==0){Q.update(Bt,Tt,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Jt=p&&p.style&&p.style.getLayer(N);Jt&&(this.queryPadding=Math.max(this.queryPadding,Jt.queryRadius(Q)))}}}},fc.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},fc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<wt.now()},fc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},fc.prototype.setHoldDuration=function(d){this.symbolFadeHoldUntil=wt.now()+d},fc.prototype.setDependencies=function(d,p){for(var C={},N=0,Q=p;N<Q.length;N+=1)C[Q[N]]=!0;this.dependencies[d]=C},fc.prototype.hasDependency=function(d,p){for(var C=0,N=d;C<N.length;C+=1){var Q=this.dependencies[N[C]];if(Q){for(var ct=0,Tt=p;ct<Tt.length;ct+=1)if(Q[Tt[ct]])return!0}}return!1};var Kf=n.performance,Id=function(p){this._marks={start:[p.url,"start"].join("#"),end:[p.url,"end"].join("#"),measure:p.url.toString()},Kf.mark(this._marks.start)};Id.prototype.finish=function(){Kf.mark(this._marks.end);var d=Kf.getEntriesByName(this._marks.measure);return d.length===0&&(Kf.measure(this._marks.measure,this._marks.start,this._marks.end),d=Kf.getEntriesByName(this._marks.measure),Kf.clearMarks(this._marks.start),Kf.clearMarks(this._marks.end),Kf.clearMeasures(this._marks.measure)),d},t.Actor=yh,t.AlphaImage=oc,t.CanonicalTileID=ah,t.CollisionBoxArray=I,t.Color=Fr,t.DEMData=Rf,t.DataConstantProperty=he,t.DictionaryCoder=Zh,t.EXTENT=8192,t.ErrorEvent=re,t.EvaluationParameters=yr,t.Event=Wt,t.Evented=Te,t.FeatureIndex=Mf,t.FillBucket=Bs,t.FillExtrusionBucket=Lc,t.ImageAtlas=fa,t.ImagePosition=Ei,t.LineBucket=Ac,t.LngLat=tl,t.LngLatBounds=ql,t.MercatorCoordinate=Zf,t.ONE_EM=24,t.OverscaledTileID=tc,t.Point=r,t.Point$1=r,t.Properties=pn,t.Protobuf=xe,t.RGBAImage=El,t.RequestManager=q,t.RequestPerformance=Id,t.ResourceType=er,t.SegmentVector=Zt,t.SourceFeatureState=xh,t.StructArrayLayout1ui2=Ol,t.StructArrayLayout2f1f2i16=ei,t.StructArrayLayout2i4=br,t.StructArrayLayout3ui6=Ga,t.StructArrayLayout4i8=Kr,t.SymbolBucket=Hr,t.Texture=gf,t.Tile=fc,t.Transitionable=Le,t.Uniform1f=Qr,t.Uniform1i=Mr,t.Uniform2f=Zr,t.Uniform3f=Pi,t.Uniform4f=Ri,t.UniformColor=Ki,t.UniformMatrix4f=Oa,t.UnwrappedTileID=hd,t.ValidationError=be,t.WritingMode=ma,t.ZoomHistory=mu,t.add=function(d,p,C){return d[0]=p[0]+C[0],d[1]=p[1]+C[1],d[2]=p[2]+C[2],d},t.addDynamicAttributes=bn,t.asyncAll=function(d,p,C){if(!d.length)return C(null,[]);var N=d.length,Q=new Array(d.length),ct=null;d.forEach(function(Tt,Bt){p(Tt,function(Jt,ve){Jt&&(ct=Jt),Q[Bt]=ve,--N==0&&C(ct,Q)})})},t.bezier=a,t.bindAll=M,t.browser=wt,t.cacheEntryPossiblyAdded=function(d){++Ye>le&&(d.getActor().send("enforceCacheSizeLimit",ae),Ye=0)},t.clamp=l,t.clearTileCache=function(d){var p=n.caches.delete("mapbox-tiles");d&&p.catch(d).then(function(){return d()})},t.clipLine=Ya,t.clone=function(d){var p=new fu(16);return p[0]=d[0],p[1]=d[1],p[2]=d[2],p[3]=d[3],p[4]=d[4],p[5]=d[5],p[6]=d[6],p[7]=d[7],p[8]=d[8],p[9]=d[9],p[10]=d[10],p[11]=d[11],p[12]=d[12],p[13]=d[13],p[14]=d[14],p[15]=d[15],p},t.clone$1=P,t.clone$2=function(d){var p=new fu(3);return p[0]=d[0],p[1]=d[1],p[2]=d[2],p},t.collisionCircleLayout=yn,t.config=Mt,t.create=function(){var d=new fu(16);return fu!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},t.create$1=function(){var d=new fu(9);return fu!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d},t.create$2=function(){var d=new fu(4);return fu!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d},t.createCommonjsModule=u,t.createExpression=Bu,t.createLayout=Gn,t.createStyleLayer=function(d){return d.type==="custom"?new Ll(d):new Rc[d.type](d)},t.cross=function(d,p,C){var N=p[0],Q=p[1],ct=p[2],Tt=C[0],Bt=C[1],Jt=C[2];return d[0]=Q*Jt-ct*Bt,d[1]=ct*Tt-N*Jt,d[2]=N*Bt-Q*Tt,d},t.deepEqual=function d(p,C){if(Array.isArray(p)){if(!Array.isArray(C)||p.length!==C.length)return!1;for(var N=0;N<p.length;N++)if(!d(p[N],C[N]))return!1;return!0}if(typeof p=="object"&&p!==null&&C!==null){if(typeof C!="object"||Object.keys(p).length!==Object.keys(C).length)return!1;for(var Q in p)if(!d(p[Q],C[Q]))return!1;return!0}return p===C},t.dot=function(d,p){return d[0]*p[0]+d[1]*p[1]+d[2]*p[2]},t.dot$1=function(d,p){return d[0]*p[0]+d[1]*p[1]+d[2]*p[2]+d[3]*p[3]},t.ease=o,t.emitValidationErrors=tu,t.endsWith=x,t.enforceCacheSizeLimit=function(d){Be(),_t&&_t.then(function(p){p.keys().then(function(C){for(var N=0;N<C.length-d;N++)p.delete(C[N])})})},t.evaluateSizeForFeature=Zl,t.evaluateSizeForZoom=$l,t.evaluateVariableOffset=nr,t.evented=Xr,t.extend=v,t.featureFilter=au,t.filterObject=S,t.fromRotation=function(d,p){var C=Math.sin(p),N=Math.cos(p);return d[0]=N,d[1]=C,d[2]=0,d[3]=-C,d[4]=N,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},t.getAnchorAlignment=Il,t.getAnchorJustification=Or,t.getArrayBuffer=gr,t.getImage=Me,t.getJSON=function(d,p){return Bn(v(d,{type:"json"}),p)},t.getRTLTextPluginStatus=ni,t.getReferrer=on,t.getVideo=function(d,p){var C,N,Q=n.document.createElement("video");Q.muted=!0,Q.onloadstart=function(){p(null,Q)};for(var ct=0;ct<d.length;ct++){var Tt=n.document.createElement("source");C=d[ct],N=void 0,(N=n.document.createElement("a")).href=C,(N.protocol!==n.document.location.protocol||N.host!==n.document.location.host)&&(Q.crossOrigin="Anonymous"),Tt.src=d[ct],Q.appendChild(Tt)}return{cancel:function(){}}},t.identity=bu,t.invert=function(d,p){var C=p[0],N=p[1],Q=p[2],ct=p[3],Tt=p[4],Bt=p[5],Jt=p[6],ve=p[7],Re=p[8],Ge=p[9],He=p[10],ln=p[11],Ln=p[12],Cn=p[13],Kn=p[14],Yn=p[15],_r=C*Bt-N*Tt,Nr=C*Jt-Q*Tt,Yr=C*ve-ct*Tt,vi=N*Jt-Q*Bt,si=N*ve-ct*Bt,Ni=Q*ve-ct*Jt,Fi=Re*Cn-Ge*Ln,ia=Re*Kn-He*Ln,pa=Re*Yn-ln*Ln,va=Ge*Kn-He*Cn,qi=Ge*Yn-ln*Cn,eo=He*Yn-ln*Kn,wa=_r*eo-Nr*qi+Yr*va+vi*pa-si*ia+Ni*Fi;return wa?(d[0]=(Bt*eo-Jt*qi+ve*va)*(wa=1/wa),d[1]=(Q*qi-N*eo-ct*va)*wa,d[2]=(Cn*Ni-Kn*si+Yn*vi)*wa,d[3]=(He*si-Ge*Ni-ln*vi)*wa,d[4]=(Jt*pa-Tt*eo-ve*ia)*wa,d[5]=(C*eo-Q*pa+ct*ia)*wa,d[6]=(Kn*Yr-Ln*Ni-Yn*Nr)*wa,d[7]=(Re*Ni-He*Yr+ln*Nr)*wa,d[8]=(Tt*qi-Bt*pa+ve*Fi)*wa,d[9]=(N*pa-C*qi-ct*Fi)*wa,d[10]=(Ln*si-Cn*Yr+Yn*_r)*wa,d[11]=(Ge*Yr-Re*si-ln*_r)*wa,d[12]=(Bt*ia-Tt*va-Jt*Fi)*wa,d[13]=(C*va-N*ia+Q*Fi)*wa,d[14]=(Cn*Nr-Ln*vi-Kn*_r)*wa,d[15]=(Re*vi-Ge*Nr+He*_r)*wa,d):null},t.isChar=_i,t.isMapboxURL=gt,t.keysDifference=function(d,p){var C=[];for(var N in d)N in p||C.push(N);return C},t.makeRequest=Bn,t.mapObject=y,t.mercatorXfromLng=cd,t.mercatorYfromLat=Ad,t.mercatorZfromAltitude=Cd,t.mul=ll,t.multiply=Eu,t.mvt=_f,t.nextPowerOfTwo=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},t.normalize=function(d,p){var C=p[0],N=p[1],Q=p[2],ct=C*C+N*N+Q*Q;return ct>0&&(ct=1/Math.sqrt(ct)),d[0]=p[0]*ct,d[1]=p[1]*ct,d[2]=p[2]*ct,d},t.number=Wa,t.offscreenCanvasSupported=wn,t.ortho=function(d,p,C,N,Q,ct,Tt){var Bt=1/(p-C),Jt=1/(N-Q),ve=1/(ct-Tt);return d[0]=-2*Bt,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*Jt,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*ve,d[11]=0,d[12]=(p+C)*Bt,d[13]=(Q+N)*Jt,d[14]=(Tt+ct)*ve,d[15]=1,d},t.parseGlyphPBF=function(d){return new xe(d).readFields(kr,[])},t.pbf=xe,t.performSymbolLayout=function(d,p,C,N,Q,ct,Tt){d.createArrays(),d.tilePixelRatio=8192/(512*d.overscaling),d.compareText={},d.iconsNeedLinear=!1;var Bt=d.layers[0].layout,Jt=d.layers[0]._unevaluatedLayout._values,ve={};if(d.textSizeData.kind==="composite"){var Re=d.textSizeData,Ge=Re.maxZoom;ve.compositeTextSizes=[Jt["text-size"].possiblyEvaluate(new yr(Re.minZoom),Tt),Jt["text-size"].possiblyEvaluate(new yr(Ge),Tt)]}if(d.iconSizeData.kind==="composite"){var He=d.iconSizeData,ln=He.maxZoom;ve.compositeIconSizes=[Jt["icon-size"].possiblyEvaluate(new yr(He.minZoom),Tt),Jt["icon-size"].possiblyEvaluate(new yr(ln),Tt)]}ve.layoutTextSize=Jt["text-size"].possiblyEvaluate(new yr(d.zoom+1),Tt),ve.layoutIconSize=Jt["icon-size"].possiblyEvaluate(new yr(d.zoom+1),Tt),ve.textMaxSize=Jt["text-size"].possiblyEvaluate(new yr(18));for(var Ln=24*Bt.get("text-line-height"),Cn=Bt.get("text-rotation-alignment")==="map"&&Bt.get("symbol-placement")!=="point",Kn=Bt.get("text-keep-upright"),Yn=Bt.get("text-size"),_r=function(){var si=Yr[Nr],Ni=Bt.get("text-font").evaluate(si,{},Tt).join(","),Fi=Yn.evaluate(si,{},Tt),ia=ve.layoutTextSize.evaluate(si,{},Tt),pa=ve.layoutIconSize.evaluate(si,{},Tt),va={horizontal:{},vertical:void 0},qi=si.text,eo=[0,0];if(qi){var wa=qi.toString(),ya=24*Bt.get("text-letter-spacing").evaluate(si,{},Tt),es=function(As){for(var ns=0,du=As;ns<du.length;ns+=1)if(Mu=du[ns].charCodeAt(0),_i.Arabic(Mu)||_i["Arabic Supplement"](Mu)||_i["Arabic Extended-A"](Mu)||_i["Arabic Presentation Forms-A"](Mu)||_i["Arabic Presentation Forms-B"](Mu))return!1;var Mu;return!0}(wa)?ya:0,yo=Bt.get("text-anchor").evaluate(si,{},Tt),Us=Bt.get("text-variable-anchor");if(!Us){var Va=Bt.get("text-radial-offset").evaluate(si,{},Tt);eo=Va?nr(yo,[24*Va,rn]):Bt.get("text-offset").evaluate(si,{},Tt).map(function(As){return 24*As})}var ko=Cn?"center":Bt.get("text-justify").evaluate(si,{},Tt),Iu=Bt.get("symbol-placement"),Lu=Iu==="point"?24*Bt.get("text-max-width").evaluate(si,{},Tt):0,el=function(){d.allowVerticalPlacement&&yu(wa)&&(va.vertical=di(qi,p,C,Q,Ni,Lu,Ln,yo,"left",es,eo,ma.vertical,!0,Iu,ia,Fi))};if(!Cn&&Us){for(var hl=ko==="auto"?Us.map(function(As){return Or(As)}):[ko],Rl=!1,Kl=0;Kl<hl.length;Kl++){var dl=hl[Kl];if(!va.horizontal[dl])if(Rl)va.horizontal[dl]=va.horizontal[0];else{var hc=di(qi,p,C,Q,Ni,Lu,Ln,"center",dl,es,eo,ma.horizontal,!1,Iu,ia,Fi);hc&&(va.horizontal[dl]=hc,Rl=hc.positionedLines.length===1)}}el()}else{ko==="auto"&&(ko=Or(yo));var zl=di(qi,p,C,Q,Ni,Lu,Ln,yo,ko,es,eo,ma.horizontal,!1,Iu,ia,Fi);zl&&(va.horizontal[ko]=zl),el(),yu(wa)&&Cn&&Kn&&(va.vertical=di(qi,p,C,Q,Ni,Lu,Ln,yo,ko,es,eo,ma.vertical,!1,Iu,ia,Fi))}}var Dc=void 0,ec=!1;if(si.icon&&si.icon.name){var Ul=N[si.icon.name];Ul&&(Dc=function(As,ns,du){var Mu=Il(du),jc=ns[0]-As.displaySize[0]*Mu.horizontalAlign,nl=ns[1]-As.displaySize[1]*Mu.verticalAlign;return{image:As,top:nl,bottom:nl+As.displaySize[1],left:jc,right:jc+As.displaySize[0]}}(Q[si.icon.name],Bt.get("icon-offset").evaluate(si,{},Tt),Bt.get("icon-anchor").evaluate(si,{},Tt)),ec=Ul.sdf,d.sdfIcons===void 0?d.sdfIcons=Ul.sdf:d.sdfIcons!==Ul.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ul.pixelRatio!==d.pixelRatio||Bt.get("icon-rotate").constantOr(1)!==0)&&(d.iconsNeedLinear=!0))}var dc=ur(va.horizontal)||va.vertical;d.iconsInText=!!dc&&dc.iconsInText,(dc||Dc)&&function(As,ns,du,Mu,jc,nl,rl,wc,Cs,Pf,uf){var Tf=nl.textMaxSize.evaluate(ns,{});Tf===void 0&&(Tf=rl);var lf,nc=As.layers[0].layout,Wc=nc.get("icon-offset").evaluate(ns,{},uf),Df=ur(du.horizontal),jf=rl/24,Dh=As.tilePixelRatio*jf,mf=As.tilePixelRatio*Tf/24,Xh=As.tilePixelRatio*wc,jh=As.tilePixelRatio*nc.get("symbol-spacing"),Bf=nc.get("text-padding")*As.tilePixelRatio,Jh=nc.get("icon-padding")*As.tilePixelRatio,Bh=nc.get("text-max-angle")/180*Math.PI,$h=nc.get("text-rotation-alignment")==="map"&&nc.get("symbol-placement")!=="point",Nf=nc.get("icon-rotation-alignment")==="map"&&nc.get("symbol-placement")!=="point",Nh=nc.get("symbol-placement"),tf=jh/2,oh=nc.get("icon-text-fit");Mu&&oh!=="none"&&(As.allowVerticalPlacement&&du.vertical&&(lf=ts(Mu,du.vertical,oh,nc.get("icon-text-fit-padding"),Wc,jf)),Df&&(Mu=ts(Mu,Df,oh,nc.get("icon-text-fit-padding"),Wc,jf)));var Ff=function(Gd,Th){Th.x<0||Th.x>=8192||Th.y<0||Th.y>=8192||function(Dl,hf,Uh,zf,md,Rd,nd,Uf,rd,kh,Gh,Vh,Ah,Dd,Ch,yd,xd,id,bd,jd,Qc,Wh,Ed,yf,Bd){var Oh,Jf,hh,dh,wh,vh=Dl.addToLineVertexArray(hf,Uh),Sd=0,Nd=0,_d=0,Md=0,ad=-1,Hh=-1,Af={},Fd=Oe(""),Y=0,pt=0;if(Uf._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Y=(Oh=Uf.layout.get("text-offset").evaluate(Qc,{},yf).map(function(Vu){return 24*Vu}))[0],pt=Oh[1]):(Y=24*Uf.layout.get("text-radial-offset").evaluate(Qc,{},yf),pt=rn),Dl.allowVerticalPlacement&&zf.vertical){var ft=Uf.layout.get("text-rotate").evaluate(Qc,{},yf)+90;dh=new jn(rd,hf,kh,Gh,Vh,zf.vertical,Ah,Dd,Ch,ft),nd&&(wh=new jn(rd,hf,kh,Gh,Vh,nd,xd,id,Ch,ft))}if(md){var lt=Uf.layout.get("icon-rotate").evaluate(Qc,{}),ht=Uf.layout.get("icon-text-fit")!=="none",Ot=So(md,lt,Ed,ht),kt=nd?So(nd,lt,Ed,ht):void 0;hh=new jn(rd,hf,kh,Gh,Vh,md,xd,id,!1,lt),Sd=4*Ot.length;var fe=Dl.iconSizeData,Ie=null;fe.kind==="source"?(Ie=[128*Uf.layout.get("icon-size").evaluate(Qc,{})])[0]>32640&&O(Dl.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):fe.kind==="composite"&&((Ie=[128*Wh.compositeIconSizes[0].evaluate(Qc,{},yf),128*Wh.compositeIconSizes[1].evaluate(Qc,{},yf)])[0]>32640||Ie[1]>32640)&&O(Dl.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Dl.addSymbols(Dl.icon,Ot,Ie,jd,bd,Qc,!1,hf,vh.lineStartIndex,vh.lineLength,-1,yf),ad=Dl.icon.placedSymbolArray.length-1,kt&&(Nd=4*kt.length,Dl.addSymbols(Dl.icon,kt,Ie,jd,bd,Qc,ma.vertical,hf,vh.lineStartIndex,vh.lineLength,-1,yf),Hh=Dl.icon.placedSymbolArray.length-1)}for(var Qe in zf.horizontal){var In=zf.horizontal[Qe];if(!Jf){Fd=Oe(In.text);var sr=Uf.layout.get("text-rotate").evaluate(Qc,{},yf);Jf=new jn(rd,hf,kh,Gh,Vh,In,Ah,Dd,Ch,sr)}var Vr=In.positionedLines.length===1;if(_d+=wr(Dl,hf,In,Rd,Uf,Ch,Qc,yd,vh,zf.vertical?ma.horizontal:ma.horizontalOnly,Vr?Object.keys(zf.horizontal):[Qe],Af,ad,Wh,yf),Vr)break}zf.vertical&&(Md+=wr(Dl,hf,zf.vertical,Rd,Uf,Ch,Qc,yd,vh,ma.vertical,["vertical"],Af,Hh,Wh,yf));var ii=Jf?Jf.boxStartIndex:Dl.collisionBoxArray.length,zi=Jf?Jf.boxEndIndex:Dl.collisionBoxArray.length,Zi=dh?dh.boxStartIndex:Dl.collisionBoxArray.length,oa=dh?dh.boxEndIndex:Dl.collisionBoxArray.length,no=hh?hh.boxStartIndex:Dl.collisionBoxArray.length,Go=hh?hh.boxEndIndex:Dl.collisionBoxArray.length,ks=wh?wh.boxStartIndex:Dl.collisionBoxArray.length,fs=wh?wh.boxEndIndex:Dl.collisionBoxArray.length,Yo=-1,Pu=function(vl,rc){return vl&&vl.circleDiameter?Math.max(vl.circleDiameter,rc):rc};Yo=Pu(Jf,Yo),Yo=Pu(dh,Yo),Yo=Pu(hh,Yo);var Po=(Yo=Pu(wh,Yo))>-1?1:0;Po&&(Yo*=Bd/24),Dl.glyphOffsetArray.length>=Hr.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Qc.sortKey!==void 0&&Dl.addToSortKeyRanges(Dl.symbolInstances.length,Qc.sortKey),Dl.symbolInstances.emplaceBack(hf.x,hf.y,Af.right>=0?Af.right:-1,Af.center>=0?Af.center:-1,Af.left>=0?Af.left:-1,Af.vertical||-1,ad,Hh,Fd,ii,zi,Zi,oa,no,Go,ks,fs,kh,_d,Md,Sd,Nd,Po,0,Ah,Y,pt,Yo)}(As,Th,Gd,du,Mu,jc,lf,As.layers[0],As.collisionBoxArray,ns.index,ns.sourceLayerIndex,As.index,Dh,Bf,$h,Cs,Xh,Jh,Nf,Wc,ns,nl,Pf,uf,rl)};if(Nh==="line")for(var bh=0,Fh=Ya(ns.geometry,0,0,8192,8192);bh<Fh.length;bh+=1)for(var sh=Fh[bh],uh=0,zh=zs(sh,jh,Bh,du.vertical||Df,Mu,24,mf,As.overscaling,8192);uh<zh.length;uh+=1){var Qh=zh[uh];Df&&ar(As,Df.text,tf,Qh)||Ff(sh,Qh)}else if(Nh==="line-center")for(var Eh=0,qh=ns.geometry;Eh<qh.length;Eh+=1){var Sh=qh[Eh];if(Sh.length>1){var _h=yc(Sh,Bh,du.vertical||Df,Mu,24,mf);_h&&Ff(Sh,_h)}}else if(ns.type==="Polygon")for(var Mh=0,lh=hu(ns.geometry,0);Mh<lh.length;Mh+=1){var Xf=lh[Mh],ch=na(Xf,16);Ff(Xf[0],new _l(ch.x,ch.y,0))}else if(ns.type==="LineString")for(var fh=0,Ph=ns.geometry;fh<Ph.length;fh+=1){var vd=Ph[fh];Ff(vd,new _l(vd[0].x,vd[0].y,0))}else if(ns.type==="Point")for(var pd=0,gd=ns.geometry;pd<gd.length;pd+=1)for(var td=0,Ld=gd[pd];td<Ld.length;td+=1){var ed=Ld[td];Ff([ed],new _l(ed.x,ed.y,0))}}(d,si,va,Dc,N,ve,ia,pa,eo,ec,Tt)},Nr=0,Yr=d.features;Nr<Yr.length;Nr+=1)_r();ct&&d.generateCollisionDebugBuffers()},t.perspective=function(d,p,C,N,Q){var ct,Tt=1/Math.tan(p/2);return d[0]=Tt/C,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=Tt,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,Q!=null&&Q!==1/0?(d[10]=(Q+N)*(ct=1/(N-Q)),d[14]=2*Q*N*ct):(d[10]=-1,d[14]=-2*N),d},t.pick=function(d,p){for(var C={},N=0;N<p.length;N++){var Q=p[N];Q in d&&(C[Q]=d[Q])}return C},t.plugin=li,t.polygonIntersectsPolygon=_c,t.postMapLoadEvent=Ht,t.postTurnstileEvent=ee,t.potpack=Ai,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Wi,t.registerForPluginStateChange=function(d){return d({pluginStatus:tn,pluginURL:On}),Xr.on("pluginStateChange",d),d},t.renderColorRamp=Cf,t.rotate=function(d,p,C){var N=p[0],Q=p[1],ct=p[2],Tt=p[3],Bt=Math.sin(C),Jt=Math.cos(C);return d[0]=N*Jt+ct*Bt,d[1]=Q*Jt+Tt*Bt,d[2]=N*-Bt+ct*Jt,d[3]=Q*-Bt+Tt*Jt,d},t.rotateX=function(d,p,C){var N=Math.sin(C),Q=Math.cos(C),ct=p[4],Tt=p[5],Bt=p[6],Jt=p[7],ve=p[8],Re=p[9],Ge=p[10],He=p[11];return p!==d&&(d[0]=p[0],d[1]=p[1],d[2]=p[2],d[3]=p[3],d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15]),d[4]=ct*Q+ve*N,d[5]=Tt*Q+Re*N,d[6]=Bt*Q+Ge*N,d[7]=Jt*Q+He*N,d[8]=ve*Q-ct*N,d[9]=Re*Q-Tt*N,d[10]=Ge*Q-Bt*N,d[11]=He*Q-Jt*N,d},t.rotateZ=function(d,p,C){var N=Math.sin(C),Q=Math.cos(C),ct=p[0],Tt=p[1],Bt=p[2],Jt=p[3],ve=p[4],Re=p[5],Ge=p[6],He=p[7];return p!==d&&(d[8]=p[8],d[9]=p[9],d[10]=p[10],d[11]=p[11],d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15]),d[0]=ct*Q+ve*N,d[1]=Tt*Q+Re*N,d[2]=Bt*Q+Ge*N,d[3]=Jt*Q+He*N,d[4]=ve*Q-ct*N,d[5]=Re*Q-Tt*N,d[6]=Ge*Q-Bt*N,d[7]=He*Q-Jt*N,d},t.scale=function(d,p,C){var N=C[0],Q=C[1],ct=C[2];return d[0]=p[0]*N,d[1]=p[1]*N,d[2]=p[2]*N,d[3]=p[3]*N,d[4]=p[4]*Q,d[5]=p[5]*Q,d[6]=p[6]*Q,d[7]=p[7]*Q,d[8]=p[8]*ct,d[9]=p[9]*ct,d[10]=p[10]*ct,d[11]=p[11]*ct,d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15],d},t.scale$1=function(d,p,C){return d[0]=p[0]*C,d[1]=p[1]*C,d[2]=p[2]*C,d[3]=p[3]*C,d},t.scale$2=function(d,p,C){return d[0]=p[0]*C,d[1]=p[1]*C,d[2]=p[2]*C,d},t.setCacheLimits=function(d,p){ae=d,le=p},t.setRTLTextPlugin=function(d,p,C){if(C===void 0&&(C=!1),tn==="deferred"||tn==="loading"||tn==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");On=wt.resolveURL(d),tn="deferred",hn=p,Rr(),C||zr()},t.sphericalToCartesian=function(d){var p=d[0],C=d[1],N=d[2];return C+=90,C*=Math.PI/180,N*=Math.PI/180,{x:p*Math.cos(C)*Math.sin(N),y:p*Math.sin(C)*Math.sin(N),z:p*Math.cos(N)}},t.sqrLen=function(d){var p=d[0],C=d[1];return p*p+C*C},t.styleSpec=ue,t.sub=function(d,p,C){return d[0]=p[0]-C[0],d[1]=p[1]-C[1],d[2]=p[2]-C[2],d},t.symbolSize=lc,t.transformMat3=function(d,p,C){var N=p[0],Q=p[1],ct=p[2];return d[0]=N*C[0]+Q*C[3]+ct*C[6],d[1]=N*C[1]+Q*C[4]+ct*C[7],d[2]=N*C[2]+Q*C[5]+ct*C[8],d},t.transformMat4=Jl,t.translate=function(d,p,C){var N,Q,ct,Tt,Bt,Jt,ve,Re,Ge,He,ln,Ln,Cn=C[0],Kn=C[1],Yn=C[2];return p===d?(d[12]=p[0]*Cn+p[4]*Kn+p[8]*Yn+p[12],d[13]=p[1]*Cn+p[5]*Kn+p[9]*Yn+p[13],d[14]=p[2]*Cn+p[6]*Kn+p[10]*Yn+p[14],d[15]=p[3]*Cn+p[7]*Kn+p[11]*Yn+p[15]):(Q=p[1],ct=p[2],Tt=p[3],Bt=p[4],Jt=p[5],ve=p[6],Re=p[7],Ge=p[8],He=p[9],ln=p[10],Ln=p[11],d[0]=N=p[0],d[1]=Q,d[2]=ct,d[3]=Tt,d[4]=Bt,d[5]=Jt,d[6]=ve,d[7]=Re,d[8]=Ge,d[9]=He,d[10]=ln,d[11]=Ln,d[12]=N*Cn+Bt*Kn+Ge*Yn+p[12],d[13]=Q*Cn+Jt*Kn+He*Yn+p[13],d[14]=ct*Cn+ve*Kn+ln*Yn+p[14],d[15]=Tt*Cn+Re*Kn+Ln*Yn+p[15]),d},t.triggerPluginCompletionEvent=hr,t.uniqueId=g,t.validateCustomStyleLayer=function(d){var p=[],C=d.id;return C===void 0&&p.push({message:"layers."+C+': missing required property "id"'}),d.render===void 0&&p.push({message:"layers."+C+': missing required method "render"'}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&p.push({message:"layers."+C+': property "renderingMode" must be either "2d" or "3d"'}),p},t.validateLight=Sc,t.validateStyle=Ju,t.values=function(d){var p=[];for(var C in d)p.push(d[C]);return p},t.vectorTile=_f,t.version="1.13.1",t.warnOnce=O,t.webpSupported=St,t.window=n,t.wrap=f}),e(["./shared"],function(t){"use strict";function u(Ae){var Me=typeof Ae;if(Me==="number"||Me==="boolean"||Me==="string"||Ae==null)return JSON.stringify(Ae);if(Array.isArray(Ae)){for(var Qt="[",ge=0,Wt=Ae;ge<Wt.length;ge+=1)Qt+=u(Wt[ge])+",";return Qt+"]"}for(var re=Object.keys(Ae).sort(),Te="{",ue=0;ue<re.length;ue++)Te+=JSON.stringify(re[ue])+":"+u(Ae[re[ue]])+",";return Te+"}"}function s(Ae){for(var Me="",Qt=0,ge=t.refProperties;Qt<ge.length;Qt+=1)Me+="/"+u(Ae[ge[Qt]]);return Me}var c=function(Me){this.keyCache={},Me&&this.replace(Me)};c.prototype.replace=function(Ae){this._layerConfigs={},this._layers={},this.update(Ae,[])},c.prototype.update=function(Ae,Me){for(var Qt=this,ge=0,Wt=Ae;ge<Wt.length;ge+=1){var re=Wt[ge];this._layerConfigs[re.id]=re;var Te=this._layers[re.id]=t.createStyleLayer(re);Te._featureFilter=t.featureFilter(Te.filter),this.keyCache[re.id]&&delete this.keyCache[re.id]}for(var ue=0,be=Me;ue<be.length;ue+=1){var Xe=be[ue];delete this.keyCache[Xe],delete this._layerConfigs[Xe],delete this._layers[Xe]}this.familiesBySource={};for(var Rn=0,tr=function(Sr,De){for(var $e={},Ve=0;Ve<Sr.length;Ve++){var En=De&&De[Sr[Ve].id]||s(Sr[Ve]);De&&(De[Sr[Ve].id]=En);var xn=$e[En];xn||(xn=$e[En]=[]),xn.push(Sr[Ve])}var Nn=[];for(var mn in $e)Nn.push($e[mn]);return Nn}(t.values(this._layerConfigs),this.keyCache);Rn<tr.length;Rn+=1){var Mn=tr[Rn].map(function(Sr){return Qt._layers[Sr.id]}),vn=Mn[0];if(vn.visibility!=="none"){var Ar=vn.source||"",or=this.familiesBySource[Ar];or||(or=this.familiesBySource[Ar]={});var cn=vn.sourceLayer||"_geojsonTileLayer",Pr=or[cn];Pr||(Pr=or[cn]=[]),Pr.push(Mn)}}};var r=function(Me){var Qt={},ge=[];for(var Wt in Me){var re=Me[Wt],Te=Qt[Wt]={};for(var ue in re){var be=re[+ue];if(be&&be.bitmap.width!==0&&be.bitmap.height!==0){var Xe={x:0,y:0,w:be.bitmap.width+2,h:be.bitmap.height+2};ge.push(Xe),Te[ue]={rect:Xe,metrics:be.metrics}}}}var Rn=t.potpack(ge),tr=new t.AlphaImage({width:Rn.w||1,height:Rn.h||1});for(var Mn in Me){var vn=Me[Mn];for(var Ar in vn){var or=vn[+Ar];if(or&&or.bitmap.width!==0&&or.bitmap.height!==0){var cn=Qt[Mn][Ar].rect;t.AlphaImage.copy(or.bitmap,tr,{x:0,y:0},{x:cn.x+1,y:cn.y+1},or.bitmap)}}}this.image=tr,this.positions=Qt};t.register("GlyphAtlas",r);var h=function(Me){this.tileID=new t.OverscaledTileID(Me.tileID.overscaledZ,Me.tileID.wrap,Me.tileID.canonical.z,Me.tileID.canonical.x,Me.tileID.canonical.y),this.uid=Me.uid,this.zoom=Me.zoom,this.pixelRatio=Me.pixelRatio,this.tileSize=Me.tileSize,this.source=Me.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Me.showCollisionBoxes,this.collectResourceTiming=!!Me.collectResourceTiming,this.returnDependencies=!!Me.returnDependencies,this.promoteId=Me.promoteId};function n(Ae,Me,Qt){for(var ge=new t.EvaluationParameters(Me),Wt=0,re=Ae;Wt<re.length;Wt+=1)re[Wt].recalculate(ge,Qt)}function i(Ae,Me){var Qt=t.getArrayBuffer(Ae.request,function(ge,Wt,re,Te){ge?Me(ge):Wt&&Me(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(Wt)),rawData:Wt,cacheControl:re,expires:Te})});return function(){Qt.cancel(),Me()}}h.prototype.parse=function(Ae,Me,Qt,ge,Wt){var re=this;this.status="parsing",this.data=Ae,this.collisionBoxArray=new t.CollisionBoxArray;var Te=new t.DictionaryCoder(Object.keys(Ae.layers).sort()),ue=new t.FeatureIndex(this.tileID,this.promoteId);ue.bucketLayerIDs=[];var be,Xe,Rn,tr,Mn={},vn={featureIndex:ue,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Qt},Ar=Me.familiesBySource[this.source];for(var or in Ar){var cn=Ae.layers[or];if(cn){cn.version===1&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+or+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Pr=Te.encode(or),Sr=[],De=0;De<cn.length;De++){var $e=cn.feature(De),Ve=ue.getId($e,or);Sr.push({feature:$e,id:Ve,index:De,sourceLayerIndex:Pr})}for(var En=0,xn=Ar[or];En<xn.length;En+=1){var Nn=xn[En],mn=Nn[0];mn.minzoom&&this.zoom<Math.floor(mn.minzoom)||mn.maxzoom&&this.zoom>=mn.maxzoom||mn.visibility!=="none"&&(n(Nn,this.zoom,Qt),(Mn[mn.id]=mn.createBucket({index:ue.bucketLayerIDs.length,layers:Nn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pr,sourceID:this.source})).populate(Sr,vn,this.tileID.canonical),ue.bucketLayerIDs.push(Nn.map(function(xr){return xr.id})))}}}var Dn=t.mapObject(vn.glyphDependencies,function(xr){return Object.keys(xr).map(Number)});Object.keys(Dn).length?ge.send("getGlyphs",{uid:this.uid,stacks:Dn},function(xr,mr){be||(be=xr,Xe=mr,_n.call(re))}):Xe={};var $n=Object.keys(vn.iconDependencies);$n.length?ge.send("getImages",{icons:$n,source:this.source,tileID:this.tileID,type:"icons"},function(xr,mr){be||(be=xr,Rn=mr,_n.call(re))}):Rn={};var Wn=Object.keys(vn.patternDependencies);function _n(){if(be)return Wt(be);if(Xe&&Rn&&tr){var xr=new r(Xe),mr=new t.ImageAtlas(Rn,tr);for(var Fr in Mn){var xi=Mn[Fr];xi instanceof t.SymbolBucket?(n(xi.layers,this.zoom,Qt),t.performSymbolLayout(xi,Xe,xr.positions,Rn,mr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):xi.hasPattern&&(xi instanceof t.LineBucket||xi instanceof t.FillBucket||xi instanceof t.FillExtrusionBucket)&&(n(xi.layers,this.zoom,Qt),xi.addFeatures(vn,this.tileID.canonical,mr.patternPositions))}this.status="done",Wt(null,{buckets:t.values(Mn).filter(function(Ta){return!Ta.isEmpty()}),featureIndex:ue,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xr.image,imageAtlas:mr,glyphMap:this.returnDependencies?Xe:null,iconMap:this.returnDependencies?Rn:null,glyphPositions:this.returnDependencies?xr.positions:null})}}Wn.length?ge.send("getImages",{icons:Wn,source:this.source,tileID:this.tileID,type:"patterns"},function(xr,mr){be||(be=xr,tr=mr,_n.call(re))}):tr={},_n.call(this)};var a=function(Me,Qt,ge,Wt){this.actor=Me,this.layerIndex=Qt,this.availableImages=ge,this.loadVectorData=Wt||i,this.loading={},this.loaded={}};a.prototype.loadTile=function(Ae,Me){var Qt=this,ge=Ae.uid;this.loading||(this.loading={});var Wt=!!(Ae&&Ae.request&&Ae.request.collectResourceTiming)&&new t.RequestPerformance(Ae.request),re=this.loading[ge]=new h(Ae);re.abort=this.loadVectorData(Ae,function(Te,ue){if(delete Qt.loading[ge],Te||!ue)return re.status="done",Qt.loaded[ge]=re,Me(Te);var be=ue.rawData,Xe={};ue.expires&&(Xe.expires=ue.expires),ue.cacheControl&&(Xe.cacheControl=ue.cacheControl);var Rn={};if(Wt){var tr=Wt.finish();tr&&(Rn.resourceTiming=JSON.parse(JSON.stringify(tr)))}re.vectorTile=ue.vectorTile,re.parse(ue.vectorTile,Qt.layerIndex,Qt.availableImages,Qt.actor,function(Mn,vn){if(Mn||!vn)return Me(Mn);Me(null,t.extend({rawTileData:be.slice(0)},vn,Xe,Rn))}),Qt.loaded=Qt.loaded||{},Qt.loaded[ge]=re})},a.prototype.reloadTile=function(Ae,Me){var Qt=this,ge=this.loaded,Wt=Ae.uid,re=this;if(ge&&ge[Wt]){var Te=ge[Wt];Te.showCollisionBoxes=Ae.showCollisionBoxes;var ue=function(Xe,Rn){var tr=Te.reloadCallback;tr&&(delete Te.reloadCallback,Te.parse(Te.vectorTile,re.layerIndex,Qt.availableImages,re.actor,tr)),Me(Xe,Rn)};Te.status==="parsing"?Te.reloadCallback=ue:Te.status==="done"&&(Te.vectorTile?Te.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,ue):ue())}},a.prototype.abortTile=function(Ae,Me){var Qt=this.loading,ge=Ae.uid;Qt&&Qt[ge]&&Qt[ge].abort&&(Qt[ge].abort(),delete Qt[ge]),Me()},a.prototype.removeTile=function(Ae,Me){var Qt=this.loaded,ge=Ae.uid;Qt&&Qt[ge]&&delete Qt[ge],Me()};var o=t.window.ImageBitmap,l=function(){this.loaded={}};function f(Ae,Me){if(Ae.length!==0){v(Ae[0],Me);for(var Qt=1;Qt<Ae.length;Qt++)v(Ae[Qt],!Me)}}function v(Ae,Me){for(var Qt=0,ge=0,Wt=Ae.length,re=Wt-1;ge<Wt;re=ge++)Qt+=(Ae[ge][0]-Ae[re][0])*(Ae[re][1]+Ae[ge][1]);Qt>=0!=!!Me&&Ae.reverse()}l.prototype.loadTile=function(Ae,Me){var Qt=Ae.uid,ge=Ae.encoding,Wt=Ae.rawImageData,re=o&&Wt instanceof o?this.getImageData(Wt):Wt,Te=new t.DEMData(Qt,re,ge);this.loaded=this.loaded||{},this.loaded[Qt]=Te,Me(null,Te)},l.prototype.getImageData=function(Ae){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ae.width,Ae.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ae.width,this.offscreenCanvas.height=Ae.height,this.offscreenCanvasContext.drawImage(Ae,0,0,Ae.width,Ae.height);var Me=this.offscreenCanvasContext.getImageData(-1,-1,Ae.width+2,Ae.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:Me.width,height:Me.height},Me.data)},l.prototype.removeTile=function(Ae){var Me=this.loaded,Qt=Ae.uid;Me&&Me[Qt]&&delete Me[Qt]};var b=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,g=function(Me){this._feature=Me,this.extent=t.EXTENT,this.type=Me.type,this.properties=Me.tags,"id"in Me&&!isNaN(Me.id)&&(this.id=parseInt(Me.id,10))};g.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ae=[],Me=0,Qt=this._feature.geometry;Me<Qt.length;Me+=1){var ge=Qt[Me];Ae.push([new t.Point$1(ge[0],ge[1])])}return Ae}for(var Wt=[],re=0,Te=this._feature.geometry;re<Te.length;re+=1){for(var ue=[],be=0,Xe=Te[re];be<Xe.length;be+=1){var Rn=Xe[be];ue.push(new t.Point$1(Rn[0],Rn[1]))}Wt.push(ue)}return Wt},g.prototype.toGeoJSON=function(Ae,Me,Qt){return b.call(this,Ae,Me,Qt)};var m=function(Me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=Me.length,this._features=Me};m.prototype.feature=function(Ae){return new g(this._features[Ae])};var _=t.vectorTile.VectorTileFeature,M=x;function x(Ae,Me){this.options=Me||{},this.features=Ae,this.length=Ae.length}function y(Ae,Me){this.id=typeof Ae.id=="number"?Ae.id:void 0,this.type=Ae.type,this.rawGeometry=Ae.type===1?[Ae.geometry]:Ae.geometry,this.properties=Ae.tags,this.extent=Me||4096}x.prototype.feature=function(Ae){return new y(this.features[Ae],this.options.extent)},y.prototype.loadGeometry=function(){var Ae=this.rawGeometry;this.geometry=[];for(var Me=0;Me<Ae.length;Me++){for(var Qt=Ae[Me],ge=[],Wt=0;Wt<Qt.length;Wt++)ge.push(new t.Point$1(Qt[Wt][0],Qt[Wt][1]));this.geometry.push(ge)}return this.geometry},y.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ae=this.geometry,Me=1/0,Qt=-1/0,ge=1/0,Wt=-1/0,re=0;re<Ae.length;re++)for(var Te=Ae[re],ue=0;ue<Te.length;ue++){var be=Te[ue];Me=Math.min(Me,be.x),Qt=Math.max(Qt,be.x),ge=Math.min(ge,be.y),Wt=Math.max(Wt,be.y)}return[Me,ge,Qt,Wt]},y.prototype.toGeoJSON=_.prototype.toGeoJSON;var S=A,P=M;function A(Ae){var Me=new t.pbf;return function(Qt,ge){for(var Wt in Qt.layers)ge.writeMessage(3,O,Qt.layers[Wt])}(Ae,Me),Me.finish()}function O(Ae,Me){var Qt;Me.writeVarintField(15,Ae.version||1),Me.writeStringField(1,Ae.name||""),Me.writeVarintField(5,Ae.extent||4096);var ge={keys:[],values:[],keycache:{},valuecache:{}};for(Qt=0;Qt<Ae.length;Qt++)ge.feature=Ae.feature(Qt),Me.writeMessage(2,L,ge);var Wt=ge.keys;for(Qt=0;Qt<Wt.length;Qt++)Me.writeStringField(3,Wt[Qt]);var re=ge.values;for(Qt=0;Qt<re.length;Qt++)Me.writeMessage(4,U,re[Qt])}function L(Ae,Me){var Qt=Ae.feature;Qt.id!==void 0&&Me.writeVarintField(1,Qt.id),Me.writeMessage(2,H,Ae),Me.writeVarintField(3,Qt.type),Me.writeMessage(4,G,Qt)}function H(Ae,Me){var Qt=Ae.feature,ge=Ae.keys,Wt=Ae.values,re=Ae.keycache,Te=Ae.valuecache;for(var ue in Qt.properties){var be=re[ue];be===void 0&&(ge.push(ue),re[ue]=be=ge.length-1),Me.writeVarint(be);var Xe=Qt.properties[ue],Rn=typeof Xe;Rn!=="string"&&Rn!=="boolean"&&Rn!=="number"&&(Xe=JSON.stringify(Xe));var tr=Rn+":"+Xe,Mn=Te[tr];Mn===void 0&&(Wt.push(Xe),Te[tr]=Mn=Wt.length-1),Me.writeVarint(Mn)}}function F(Ae,Me){return(Me<<3)+(7&Ae)}function K(Ae){return Ae<<1^Ae>>31}function G(Ae,Me){for(var Qt=Ae.loadGeometry(),ge=Ae.type,Wt=0,re=0,Te=Qt.length,ue=0;ue<Te;ue++){var be=Qt[ue],Xe=1;ge===1&&(Xe=be.length),Me.writeVarint(F(1,Xe));for(var Rn=ge===3?be.length-1:be.length,tr=0;tr<Rn;tr++){tr===1&&ge!==1&&Me.writeVarint(F(2,Rn-1));var Mn=be[tr].x-Wt,vn=be[tr].y-re;Me.writeVarint(K(Mn)),Me.writeVarint(K(vn)),Wt+=Mn,re+=vn}ge===3&&Me.writeVarint(F(7,1))}}function U(Ae,Me){var Qt=typeof Ae;Qt==="string"?Me.writeStringField(1,Ae):Qt==="boolean"?Me.writeBooleanField(7,Ae):Qt==="number"&&(Ae%1!=0?Me.writeDoubleField(3,Ae):Ae<0?Me.writeSVarintField(6,Ae):Me.writeVarintField(5,Ae))}function Z(Ae,Me,Qt,ge){J(Ae,Qt,ge),J(Me,2*Qt,2*ge),J(Me,2*Qt+1,2*ge+1)}function J(Ae,Me,Qt){var ge=Ae[Me];Ae[Me]=Ae[Qt],Ae[Qt]=ge}function rt(Ae,Me,Qt,ge){var Wt=Ae-Qt,re=Me-ge;return Wt*Wt+re*re}S.fromVectorTileJs=A,S.fromGeojsonVt=function(Ae,Me){Me=Me||{};var Qt={};for(var ge in Ae)Qt[ge]=new M(Ae[ge].features,Me),Qt[ge].name=ge,Qt[ge].version=Me.version,Qt[ge].extent=Me.extent;return A({layers:Qt})},S.GeoJSONWrapper=P;var vt=function(Me){return Me[0]},mt=function(Me){return Me[1]},ut=function(Me,Qt,ge,Wt,re){Qt===void 0&&(Qt=vt),ge===void 0&&(ge=mt),Wt===void 0&&(Wt=64),re===void 0&&(re=Float64Array),this.nodeSize=Wt,this.points=Me;for(var Te=Me.length<65536?Uint16Array:Uint32Array,ue=this.ids=new Te(Me.length),be=this.coords=new re(2*Me.length),Xe=0;Xe<Me.length;Xe++)ue[Xe]=Xe,be[2*Xe]=Qt(Me[Xe]),be[2*Xe+1]=ge(Me[Xe]);(function Rn(tr,Mn,vn,Ar,or,cn){if(!(or-Ar<=vn)){var Pr=Ar+or>>1;(function Sr(De,$e,Ve,En,xn,Nn){for(;xn>En;){if(xn-En>600){var mn=xn-En+1,Dn=Ve-En+1,$n=Math.log(mn),Wn=.5*Math.exp(2*$n/3),_n=.5*Math.sqrt($n*Wn*(mn-Wn)/mn)*(Dn-mn/2<0?-1:1);Sr(De,$e,Ve,Math.max(En,Math.floor(Ve-Dn*Wn/mn+_n)),Math.min(xn,Math.floor(Ve+(mn-Dn)*Wn/mn+_n)),Nn)}var xr=$e[2*Ve+Nn],mr=En,Fr=xn;for(Z(De,$e,En,Ve),$e[2*xn+Nn]>xr&&Z(De,$e,En,xn);mr<Fr;){for(Z(De,$e,mr,Fr),mr++,Fr--;$e[2*mr+Nn]<xr;)mr++;for(;$e[2*Fr+Nn]>xr;)Fr--}$e[2*En+Nn]===xr?Z(De,$e,En,Fr):Z(De,$e,++Fr,xn),Fr<=Ve&&(En=Fr+1),Ve<=Fr&&(xn=Fr-1)}})(tr,Mn,Pr,Ar,or,cn%2),Rn(tr,Mn,vn,Ar,Pr-1,cn+1),Rn(tr,Mn,vn,Pr+1,or,cn+1)}})(ue,be,Wt,0,ue.length-1,0)};ut.prototype.range=function(Ae,Me,Qt,ge){return function(Wt,re,Te,ue,be,Xe,Rn){for(var tr,Mn,vn=[0,Wt.length-1,0],Ar=[];vn.length;){var or=vn.pop(),cn=vn.pop(),Pr=vn.pop();if(cn-Pr<=Rn)for(var Sr=Pr;Sr<=cn;Sr++)Mn=re[2*Sr+1],(tr=re[2*Sr])>=Te&&tr<=be&&Mn>=ue&&Mn<=Xe&&Ar.push(Wt[Sr]);else{var De=Math.floor((Pr+cn)/2);Mn=re[2*De+1],(tr=re[2*De])>=Te&&tr<=be&&Mn>=ue&&Mn<=Xe&&Ar.push(Wt[De]);var $e=(or+1)%2;(or===0?Te<=tr:ue<=Mn)&&(vn.push(Pr),vn.push(De-1),vn.push($e)),(or===0?be>=tr:Xe>=Mn)&&(vn.push(De+1),vn.push(cn),vn.push($e))}}return Ar}(this.ids,this.coords,Ae,Me,Qt,ge,this.nodeSize)},ut.prototype.within=function(Ae,Me,Qt){return function(ge,Wt,re,Te,ue,be){for(var Xe=[0,ge.length-1,0],Rn=[],tr=ue*ue;Xe.length;){var Mn=Xe.pop(),vn=Xe.pop(),Ar=Xe.pop();if(vn-Ar<=be)for(var or=Ar;or<=vn;or++)rt(Wt[2*or],Wt[2*or+1],re,Te)<=tr&&Rn.push(ge[or]);else{var cn=Math.floor((Ar+vn)/2),Pr=Wt[2*cn],Sr=Wt[2*cn+1];rt(Pr,Sr,re,Te)<=tr&&Rn.push(ge[cn]);var De=(Mn+1)%2;(Mn===0?re-ue<=Pr:Te-ue<=Sr)&&(Xe.push(Ar),Xe.push(cn-1),Xe.push(De)),(Mn===0?re+ue>=Pr:Te+ue>=Sr)&&(Xe.push(cn+1),Xe.push(vn),Xe.push(De))}}return Rn}(this.ids,this.coords,Ae,Me,Qt,this.nodeSize)};var Rt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Me){return Me}},Ft=function(Me){this.options=z(Object.create(Rt),Me),this.trees=new Array(this.options.maxZoom+1)};function wt(Ae,Me,Qt,ge,Wt){return{x:Ae,y:Me,zoom:1/0,id:Qt,parentId:-1,numPoints:ge,properties:Wt}}function Mt(Ae,Me){var Qt=Ae.geometry.coordinates,ge=Qt[1];return{x:nt(Qt[0]),y:Pt(ge),zoom:1/0,index:Me,parentId:-1}}function St(Ae){return{type:"Feature",id:Ae.id,properties:At(Ae),geometry:{type:"Point",coordinates:[(ge=Ae.x,360*(ge-.5)),(Me=Ae.y,Qt=(180-360*Me)*Math.PI/180,360*Math.atan(Math.exp(Qt))/Math.PI-90)]}};var Me,Qt,ge}function At(Ae){var Me=Ae.numPoints,Qt=Me>=1e4?Math.round(Me/1e3)+"k":Me>=1e3?Math.round(Me/100)/10+"k":Me;return z(z({},Ae.properties),{cluster:!0,cluster_id:Ae.id,point_count:Me,point_count_abbreviated:Qt})}function nt(Ae){return Ae/360+.5}function Pt(Ae){var Me=Math.sin(Ae*Math.PI/180),Qt=.5-.25*Math.log((1+Me)/(1-Me))/Math.PI;return Qt<0?0:Qt>1?1:Qt}function z(Ae,Me){for(var Qt in Me)Ae[Qt]=Me[Qt];return Ae}function q(Ae){return Ae.x}function gt(Ae){return Ae.y}function et(Ae,Me,Qt,ge,Wt,re){var Te=Wt-Qt,ue=re-ge;if(Te!==0||ue!==0){var be=((Ae-Qt)*Te+(Me-ge)*ue)/(Te*Te+ue*ue);be>1?(Qt=Wt,ge=re):be>0&&(Qt+=Te*be,ge+=ue*be)}return(Te=Ae-Qt)*Te+(ue=Me-ge)*ue}function at(Ae,Me,Qt,ge){var Wt={id:Ae===void 0?null:Ae,type:Me,geometry:Qt,tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(re){var Te=re.geometry,ue=re.type;if(ue==="Point"||ue==="MultiPoint"||ue==="LineString")xt(re,Te);else if(ue==="Polygon"||ue==="MultiLineString")for(var be=0;be<Te.length;be++)xt(re,Te[be]);else if(ue==="MultiPolygon")for(be=0;be<Te.length;be++)for(var Xe=0;Xe<Te[be].length;Xe++)xt(re,Te[be][Xe])}(Wt),Wt}function xt(Ae,Me){for(var Qt=0;Qt<Me.length;Qt+=3)Ae.minX=Math.min(Ae.minX,Me[Qt]),Ae.minY=Math.min(Ae.minY,Me[Qt+1]),Ae.maxX=Math.max(Ae.maxX,Me[Qt]),Ae.maxY=Math.max(Ae.maxY,Me[Qt+1])}function k(Ae,Me,Qt,ge){if(Me.geometry){var Wt=Me.geometry.coordinates,re=Me.geometry.type,Te=Math.pow(Qt.tolerance/((1<<Qt.maxZoom)*Qt.extent),2),ue=[],be=Me.id;if(Qt.promoteId?be=Me.properties[Qt.promoteId]:Qt.generateId&&(be=ge||0),re==="Point")ot(Wt,ue);else if(re==="MultiPoint")for(var Xe=0;Xe<Wt.length;Xe++)ot(Wt[Xe],ue);else if(re==="LineString")it(Wt,ue,Te,!1);else if(re==="MultiLineString"){if(Qt.lineMetrics){for(Xe=0;Xe<Wt.length;Xe++)it(Wt[Xe],ue=[],Te,!1),Ae.push(at(be,"LineString",ue,Me.properties));return}$(Wt,ue,Te,!1)}else if(re==="Polygon")$(Wt,ue,Te,!0);else{if(re!=="MultiPolygon"){if(re==="GeometryCollection"){for(Xe=0;Xe<Me.geometry.geometries.length;Xe++)k(Ae,{id:be,geometry:Me.geometry.geometries[Xe],properties:Me.properties},Qt,ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Xe=0;Xe<Wt.length;Xe++){var Rn=[];$(Wt[Xe],Rn,Te,!0),ue.push(Rn)}}Ae.push(at(be,re,ue,Me.properties))}}function ot(Ae,Me){Me.push(_t(Ae[0])),Me.push(yt(Ae[1])),Me.push(0)}function it(Ae,Me,Qt,ge){for(var Wt,re,Te=0,ue=0;ue<Ae.length;ue++){var be=_t(Ae[ue][0]),Xe=yt(Ae[ue][1]);Me.push(be),Me.push(Xe),Me.push(0),ue>0&&(Te+=ge?(Wt*Xe-be*re)/2:Math.sqrt(Math.pow(be-Wt,2)+Math.pow(Xe-re,2))),Wt=be,re=Xe}var Rn=Me.length-3;Me[2]=1,function tr(Mn,vn,Ar,or){for(var cn,Pr=or,Sr=Ar-vn>>1,De=Ar-vn,$e=Mn[vn],Ve=Mn[vn+1],En=Mn[Ar],xn=Mn[Ar+1],Nn=vn+3;Nn<Ar;Nn+=3){var mn=et(Mn[Nn],Mn[Nn+1],$e,Ve,En,xn);if(mn>Pr)cn=Nn,Pr=mn;else if(mn===Pr){var Dn=Math.abs(Nn-Sr);Dn<De&&(cn=Nn,De=Dn)}}Pr>or&&(cn-vn>3&&tr(Mn,vn,cn,or),Mn[cn+2]=Pr,Ar-cn>3&&tr(Mn,cn,Ar,or))}(Me,0,Rn,Qt),Me[Rn+2]=1,Me.size=Math.abs(Te),Me.start=0,Me.end=Me.size}function $(Ae,Me,Qt,ge){for(var Wt=0;Wt<Ae.length;Wt++){var re=[];it(Ae[Wt],re,Qt,ge),Me.push(re)}}function _t(Ae){return Ae/360+.5}function yt(Ae){var Me=Math.sin(Ae*Math.PI/180),Qt=.5-.25*Math.log((1+Me)/(1-Me))/Math.PI;return Qt<0?0:Qt>1?1:Qt}function Nt(Ae,Me,Qt,ge,Wt,re,Te,ue){if(ge/=Me,re>=(Qt/=Me)&&Te<ge)return Ae;if(Te<Qt||re>=ge)return null;for(var be=[],Xe=0;Xe<Ae.length;Xe++){var Rn=Ae[Xe],tr=Rn.geometry,Mn=Rn.type,vn=Wt===0?Rn.minX:Rn.minY,Ar=Wt===0?Rn.maxX:Rn.maxY;if(vn>=Qt&&Ar<ge)be.push(Rn);else if(!(Ar<Qt||vn>=ge)){var or=[];if(Mn==="Point"||Mn==="MultiPoint")$t(tr,or,Qt,ge,Wt);else if(Mn==="LineString")ee(tr,or,Qt,ge,Wt,!1,ue.lineMetrics);else if(Mn==="MultiLineString")Ht(tr,or,Qt,ge,Wt,!1);else if(Mn==="Polygon")Ht(tr,or,Qt,ge,Wt,!0);else if(Mn==="MultiPolygon")for(var cn=0;cn<tr.length;cn++){var Pr=[];Ht(tr[cn],Pr,Qt,ge,Wt,!0),Pr.length&&or.push(Pr)}if(or.length){if(ue.lineMetrics&&Mn==="LineString"){for(cn=0;cn<or.length;cn++)be.push(at(Rn.id,Mn,or[cn],Rn.tags));continue}Mn!=="LineString"&&Mn!=="MultiLineString"||(or.length===1?(Mn="LineString",or=or[0]):Mn="MultiLineString"),Mn!=="Point"&&Mn!=="MultiPoint"||(Mn=or.length===3?"Point":"MultiPoint"),be.push(at(Rn.id,Mn,or,Rn.tags))}}}return be.length?be:null}function $t(Ae,Me,Qt,ge,Wt){for(var re=0;re<Ae.length;re+=3){var Te=Ae[re+Wt];Te>=Qt&&Te<=ge&&(Me.push(Ae[re]),Me.push(Ae[re+1]),Me.push(Ae[re+2]))}}function ee(Ae,Me,Qt,ge,Wt,re,Te){for(var ue,be,Xe=Gt(Ae),Rn=Wt===0?le:Be,tr=Ae.start,Mn=0;Mn<Ae.length-3;Mn+=3){var vn=Ae[Mn],Ar=Ae[Mn+1],or=Ae[Mn+2],cn=Ae[Mn+3],Pr=Ae[Mn+4],Sr=Wt===0?vn:Ar,De=Wt===0?cn:Pr,$e=!1;Te&&(ue=Math.sqrt(Math.pow(vn-cn,2)+Math.pow(Ar-Pr,2))),Sr<Qt?De>Qt&&(be=Rn(Xe,vn,Ar,cn,Pr,Qt),Te&&(Xe.start=tr+ue*be)):Sr>ge?De<ge&&(be=Rn(Xe,vn,Ar,cn,Pr,ge),Te&&(Xe.start=tr+ue*be)):ae(Xe,vn,Ar,or),De<Qt&&Sr>=Qt&&(be=Rn(Xe,vn,Ar,cn,Pr,Qt),$e=!0),De>ge&&Sr<=ge&&(be=Rn(Xe,vn,Ar,cn,Pr,ge),$e=!0),!re&&$e&&(Te&&(Xe.end=tr+ue*be),Me.push(Xe),Xe=Gt(Ae)),Te&&(tr+=ue)}var Ve=Ae.length-3;vn=Ae[Ve],Ar=Ae[Ve+1],or=Ae[Ve+2],(Sr=Wt===0?vn:Ar)>=Qt&&Sr<=ge&&ae(Xe,vn,Ar,or),Ve=Xe.length-3,re&&Ve>=3&&(Xe[Ve]!==Xe[0]||Xe[Ve+1]!==Xe[1])&&ae(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&Me.push(Xe)}function Gt(Ae){var Me=[];return Me.size=Ae.size,Me.start=Ae.start,Me.end=Ae.end,Me}function Ht(Ae,Me,Qt,ge,Wt,re){for(var Te=0;Te<Ae.length;Te++)ee(Ae[Te],Me,Qt,ge,Wt,re,!1)}function ae(Ae,Me,Qt,ge){Ae.push(Me),Ae.push(Qt),Ae.push(ge)}function le(Ae,Me,Qt,ge,Wt,re){var Te=(re-Me)/(ge-Me);return Ae.push(re),Ae.push(Qt+(Wt-Qt)*Te),Ae.push(1),Te}function Be(Ae,Me,Qt,ge,Wt,re){var Te=(re-Qt)/(Wt-Qt);return Ae.push(Me+(ge-Me)*Te),Ae.push(re),Ae.push(1),Te}function Ce(Ae,Me){for(var Qt=[],ge=0;ge<Ae.length;ge++){var Wt,re=Ae[ge],Te=re.type;if(Te==="Point"||Te==="MultiPoint"||Te==="LineString")Wt=We(re.geometry,Me);else if(Te==="MultiLineString"||Te==="Polygon"){Wt=[];for(var ue=0;ue<re.geometry.length;ue++)Wt.push(We(re.geometry[ue],Me))}else if(Te==="MultiPolygon")for(Wt=[],ue=0;ue<re.geometry.length;ue++){for(var be=[],Xe=0;Xe<re.geometry[ue].length;Xe++)be.push(We(re.geometry[ue][Xe],Me));Wt.push(be)}Qt.push(at(re.id,Te,Wt,re.tags))}return Qt}function We(Ae,Me){var Qt=[];Qt.size=Ae.size,Ae.start!==void 0&&(Qt.start=Ae.start,Qt.end=Ae.end);for(var ge=0;ge<Ae.length;ge+=3)Qt.push(Ae[ge]+Me,Ae[ge+1],Ae[ge+2]);return Qt}function Ye(Ae,Me){if(Ae.transformed)return Ae;var Qt,ge,Wt,re=1<<Ae.z,Te=Ae.x,ue=Ae.y;for(Qt=0;Qt<Ae.features.length;Qt++){var be=Ae.features[Qt],Xe=be.geometry,Rn=be.type;if(be.geometry=[],Rn===1)for(ge=0;ge<Xe.length;ge+=2)be.geometry.push(wn(Xe[ge],Xe[ge+1],Me,re,Te,ue));else for(ge=0;ge<Xe.length;ge++){var tr=[];for(Wt=0;Wt<Xe[ge].length;Wt+=2)tr.push(wn(Xe[ge][Wt],Xe[ge][Wt+1],Me,re,Te,ue));be.geometry.push(tr)}}return Ae.transformed=!0,Ae}function wn(Ae,Me,Qt,ge,Wt,re){return[Math.round(Qt*(Ae*ge-Wt)),Math.round(Qt*(Me*ge-re))]}function er(Ae,Me,Qt,ge,Wt){for(var re=Me===Wt.maxZoom?0:Wt.tolerance/((1<<Me)*Wt.extent),Te={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Qt,y:ge,z:Me,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ue=0;ue<Ae.length;ue++){Te.numFeatures++,Lr(Te,Ae[ue],re,Wt);var be=Ae[ue].minX,Xe=Ae[ue].minY,Rn=Ae[ue].maxX,tr=Ae[ue].maxY;be<Te.minX&&(Te.minX=be),Xe<Te.minY&&(Te.minY=Xe),Rn>Te.maxX&&(Te.maxX=Rn),tr>Te.maxY&&(Te.maxY=tr)}return Te}function Lr(Ae,Me,Qt,ge){var Wt=Me.geometry,re=Me.type,Te=[];if(re==="Point"||re==="MultiPoint")for(var ue=0;ue<Wt.length;ue+=3)Te.push(Wt[ue]),Te.push(Wt[ue+1]),Ae.numPoints++,Ae.numSimplified++;else if(re==="LineString")on(Te,Wt,Ae,Qt,!1,!1);else if(re==="MultiLineString"||re==="Polygon")for(ue=0;ue<Wt.length;ue++)on(Te,Wt[ue],Ae,Qt,re==="Polygon",ue===0);else if(re==="MultiPolygon")for(var be=0;be<Wt.length;be++){var Xe=Wt[be];for(ue=0;ue<Xe.length;ue++)on(Te,Xe[ue],Ae,Qt,!0,ue===0)}if(Te.length){var Rn=Me.tags||null;if(re==="LineString"&&ge.lineMetrics){for(var tr in Rn={},Me.tags)Rn[tr]=Me.tags[tr];Rn.mapbox_clip_start=Wt.start/Wt.size,Rn.mapbox_clip_end=Wt.end/Wt.size}var Mn={geometry:Te,type:re==="Polygon"||re==="MultiPolygon"?3:re==="LineString"||re==="MultiLineString"?2:1,tags:Rn};Me.id!==null&&(Mn.id=Me.id),Ae.features.push(Mn)}}function on(Ae,Me,Qt,ge,Wt,re){var Te=ge*ge;if(ge>0&&Me.size<(Wt?Te:ge))Qt.numPoints+=Me.length/3;else{for(var ue=[],be=0;be<Me.length;be+=3)(ge===0||Me[be+2]>Te)&&(Qt.numSimplified++,ue.push(Me[be]),ue.push(Me[be+1])),Qt.numPoints++;Wt&&function(Xe,Rn){for(var tr=0,Mn=0,vn=Xe.length,Ar=vn-2;Mn<vn;Ar=Mn,Mn+=2)tr+=(Xe[Mn]-Xe[Ar])*(Xe[Mn+1]+Xe[Ar+1]);if(tr>0===Rn)for(Mn=0,vn=Xe.length;Mn<vn/2;Mn+=2){var or=Xe[Mn],cn=Xe[Mn+1];Xe[Mn]=Xe[vn-2-Mn],Xe[Mn+1]=Xe[vn-1-Mn],Xe[vn-2-Mn]=or,Xe[vn-1-Mn]=cn}}(ue,re),Ae.push(ue)}}function en(Ae,Me){var Qt=(Me=this.options=function(Wt,re){for(var Te in re)Wt[Te]=re[Te];return Wt}(Object.create(this.options),Me)).debug;if(Qt&&console.time("preprocess data"),Me.maxZoom<0||Me.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Me.promoteId&&Me.generateId)throw new Error("promoteId and generateId cannot be used together.");var ge=function(Wt,re){var Te=[];if(Wt.type==="FeatureCollection")for(var ue=0;ue<Wt.features.length;ue++)k(Te,Wt.features[ue],re,ue);else k(Te,Wt.type==="Feature"?Wt:{geometry:Wt},re);return Te}(Ae,Me);this.tiles={},this.tileCoords=[],Qt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Me.indexMaxZoom,Me.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(ge=function(Wt,re){var Te=re.buffer/re.extent,ue=Wt,be=Nt(Wt,1,-1-Te,Te,0,-1,2,re),Xe=Nt(Wt,1,1-Te,2+Te,0,-1,2,re);return(be||Xe)&&(ue=Nt(Wt,1,-Te,1+Te,0,-1,2,re)||[],be&&(ue=Ce(be,1).concat(ue)),Xe&&(ue=ue.concat(Ce(Xe,-1)))),ue}(ge,Me)).length&&this.splitTile(ge,0,0,0),Qt&&(ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function An(Ae,Me,Qt){return 32*((1<<Ae)*Qt+Me)+Ae}function Bn(Ae,Me){var Qt=Ae.tileID.canonical;if(!this._geoJSONIndex)return Me(null,null);var ge=this._geoJSONIndex.getTile(Qt.z,Qt.x,Qt.y);if(!ge)return Me(null,null);var Wt=new m(ge.features),re=S(Wt);re.byteOffset===0&&re.byteLength===re.buffer.byteLength||(re=new Uint8Array(re)),Me(null,{vectorTile:Wt,rawData:re.buffer})}Ft.prototype.load=function(Ae){var Me=this.options,Qt=Me.log,ge=Me.minZoom,Wt=Me.maxZoom,re=Me.nodeSize;Qt&&console.time("total time");var Te="prepare "+Ae.length+" points";Qt&&console.time(Te),this.points=Ae;for(var ue=[],be=0;be<Ae.length;be++)Ae[be].geometry&&ue.push(Mt(Ae[be],be));this.trees[Wt+1]=new ut(ue,q,gt,re,Float32Array),Qt&&console.timeEnd(Te);for(var Xe=Wt;Xe>=ge;Xe--){var Rn=+Date.now();ue=this._cluster(ue,Xe),this.trees[Xe]=new ut(ue,q,gt,re,Float32Array),Qt&&console.log("z%d: %d clusters in %dms",Xe,ue.length,+Date.now()-Rn)}return Qt&&console.timeEnd("total time"),this},Ft.prototype.getClusters=function(Ae,Me){var Qt=((Ae[0]+180)%360+360)%360-180,ge=Math.max(-90,Math.min(90,Ae[1])),Wt=Ae[2]===180?180:((Ae[2]+180)%360+360)%360-180,re=Math.max(-90,Math.min(90,Ae[3]));if(Ae[2]-Ae[0]>=360)Qt=-180,Wt=180;else if(Qt>Wt){var Te=this.getClusters([Qt,ge,180,re],Me),ue=this.getClusters([-180,ge,Wt,re],Me);return Te.concat(ue)}for(var be=this.trees[this._limitZoom(Me)],Xe=[],Rn=0,tr=be.range(nt(Qt),Pt(re),nt(Wt),Pt(ge));Rn<tr.length;Rn+=1){var Mn=be.points[tr[Rn]];Xe.push(Mn.numPoints?St(Mn):this.points[Mn.index])}return Xe},Ft.prototype.getChildren=function(Ae){var Me=this._getOriginId(Ae),Qt=this._getOriginZoom(Ae),ge="No cluster with the specified id.",Wt=this.trees[Qt];if(!Wt)throw new Error(ge);var re=Wt.points[Me];if(!re)throw new Error(ge);for(var Te=this.options.radius/(this.options.extent*Math.pow(2,Qt-1)),ue=[],be=0,Xe=Wt.within(re.x,re.y,Te);be<Xe.length;be+=1){var Rn=Wt.points[Xe[be]];Rn.parentId===Ae&&ue.push(Rn.numPoints?St(Rn):this.points[Rn.index])}if(ue.length===0)throw new Error(ge);return ue},Ft.prototype.getLeaves=function(Ae,Me,Qt){var ge=[];return this._appendLeaves(ge,Ae,Me=Me||10,Qt=Qt||0,0),ge},Ft.prototype.getTile=function(Ae,Me,Qt){var ge=this.trees[this._limitZoom(Ae)],Wt=Math.pow(2,Ae),re=this.options,Te=re.radius/re.extent,ue=(Qt-Te)/Wt,be=(Qt+1+Te)/Wt,Xe={features:[]};return this._addTileFeatures(ge.range((Me-Te)/Wt,ue,(Me+1+Te)/Wt,be),ge.points,Me,Qt,Wt,Xe),Me===0&&this._addTileFeatures(ge.range(1-Te/Wt,ue,1,be),ge.points,Wt,Qt,Wt,Xe),Me===Wt-1&&this._addTileFeatures(ge.range(0,ue,Te/Wt,be),ge.points,-1,Qt,Wt,Xe),Xe.features.length?Xe:null},Ft.prototype.getClusterExpansionZoom=function(Ae){for(var Me=this._getOriginZoom(Ae)-1;Me<=this.options.maxZoom;){var Qt=this.getChildren(Ae);if(Me++,Qt.length!==1)break;Ae=Qt[0].properties.cluster_id}return Me},Ft.prototype._appendLeaves=function(Ae,Me,Qt,ge,Wt){for(var re=0,Te=this.getChildren(Me);re<Te.length;re+=1){var ue=Te[re],be=ue.properties;if(be&&be.cluster?Wt+be.point_count<=ge?Wt+=be.point_count:Wt=this._appendLeaves(Ae,be.cluster_id,Qt,ge,Wt):Wt<ge?Wt++:Ae.push(ue),Ae.length===Qt)break}return Wt},Ft.prototype._addTileFeatures=function(Ae,Me,Qt,ge,Wt,re){for(var Te=0,ue=Ae;Te<ue.length;Te+=1){var be=Me[ue[Te]],Xe=be.numPoints,Rn={type:1,geometry:[[Math.round(this.options.extent*(be.x*Wt-Qt)),Math.round(this.options.extent*(be.y*Wt-ge))]],tags:Xe?At(be):this.points[be.index].properties},tr=void 0;Xe?tr=be.id:this.options.generateId?tr=be.index:this.points[be.index].id&&(tr=this.points[be.index].id),tr!==void 0&&(Rn.id=tr),re.features.push(Rn)}},Ft.prototype._limitZoom=function(Ae){return Math.max(this.options.minZoom,Math.min(+Ae,this.options.maxZoom+1))},Ft.prototype._cluster=function(Ae,Me){for(var Qt=[],ge=this.options,Wt=ge.reduce,re=ge.minPoints,Te=ge.radius/(ge.extent*Math.pow(2,Me)),ue=0;ue<Ae.length;ue++){var be=Ae[ue];if(!(be.zoom<=Me)){be.zoom=Me;for(var Xe=this.trees[Me+1],Rn=Xe.within(be.x,be.y,Te),tr=be.numPoints||1,Mn=tr,vn=0,Ar=Rn;vn<Ar.length;vn+=1){var or=Xe.points[Ar[vn]];or.zoom>Me&&(Mn+=or.numPoints||1)}if(Mn>=re){for(var cn=be.x*tr,Pr=be.y*tr,Sr=Wt&&tr>1?this._map(be,!0):null,De=(ue<<5)+(Me+1)+this.points.length,$e=0,Ve=Rn;$e<Ve.length;$e+=1){var En=Xe.points[Ve[$e]];if(!(En.zoom<=Me)){En.zoom=Me;var xn=En.numPoints||1;cn+=En.x*xn,Pr+=En.y*xn,En.parentId=De,Wt&&(Sr||(Sr=this._map(be,!0)),Wt(Sr,this._map(En)))}}be.parentId=De,Qt.push(wt(cn/Mn,Pr/Mn,De,Mn,Sr))}else if(Qt.push(be),Mn>1)for(var Nn=0,mn=Rn;Nn<mn.length;Nn+=1){var Dn=Xe.points[mn[Nn]];Dn.zoom<=Me||(Dn.zoom=Me,Qt.push(Dn))}}}return Qt},Ft.prototype._getOriginId=function(Ae){return Ae-this.points.length>>5},Ft.prototype._getOriginZoom=function(Ae){return(Ae-this.points.length)%32},Ft.prototype._map=function(Ae,Me){if(Ae.numPoints)return Me?z({},Ae.properties):Ae.properties;var Qt=this.points[Ae.index].properties,ge=this.options.map(Qt);return Me&&ge===Qt?z({},ge):ge},en.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},en.prototype.splitTile=function(Ae,Me,Qt,ge,Wt,re,Te){for(var ue=[Ae,Me,Qt,ge],be=this.options,Xe=be.debug;ue.length;){ge=ue.pop(),Qt=ue.pop(),Me=ue.pop(),Ae=ue.pop();var Rn=1<<Me,tr=An(Me,Qt,ge),Mn=this.tiles[tr];if(!Mn&&(Xe>1&&console.time("creation"),Mn=this.tiles[tr]=er(Ae,Me,Qt,ge,be),this.tileCoords.push({z:Me,x:Qt,y:ge}),Xe)){Xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Me,Qt,ge,Mn.numFeatures,Mn.numPoints,Mn.numSimplified),console.timeEnd("creation"));var vn="z"+Me;this.stats[vn]=(this.stats[vn]||0)+1,this.total++}if(Mn.source=Ae,Wt){if(Me===be.maxZoom||Me===Wt)continue;var Ar=1<<Wt-Me;if(Qt!==Math.floor(re/Ar)||ge!==Math.floor(Te/Ar))continue}else if(Me===be.indexMaxZoom||Mn.numPoints<=be.indexMaxPoints)continue;if(Mn.source=null,Ae.length!==0){Xe>1&&console.time("clipping");var or,cn,Pr,Sr,De,$e,Ve=.5*be.buffer/be.extent,En=.5-Ve,xn=.5+Ve,Nn=1+Ve;or=cn=Pr=Sr=null,De=Nt(Ae,Rn,Qt-Ve,Qt+xn,0,Mn.minX,Mn.maxX,be),$e=Nt(Ae,Rn,Qt+En,Qt+Nn,0,Mn.minX,Mn.maxX,be),Ae=null,De&&(or=Nt(De,Rn,ge-Ve,ge+xn,1,Mn.minY,Mn.maxY,be),cn=Nt(De,Rn,ge+En,ge+Nn,1,Mn.minY,Mn.maxY,be),De=null),$e&&(Pr=Nt($e,Rn,ge-Ve,ge+xn,1,Mn.minY,Mn.maxY,be),Sr=Nt($e,Rn,ge+En,ge+Nn,1,Mn.minY,Mn.maxY,be),$e=null),Xe>1&&console.timeEnd("clipping"),ue.push(or||[],Me+1,2*Qt,2*ge),ue.push(cn||[],Me+1,2*Qt,2*ge+1),ue.push(Pr||[],Me+1,2*Qt+1,2*ge),ue.push(Sr||[],Me+1,2*Qt+1,2*ge+1)}}},en.prototype.getTile=function(Ae,Me,Qt){var ge=this.options,Wt=ge.extent,re=ge.debug;if(Ae<0||Ae>24)return null;var Te=1<<Ae,ue=An(Ae,Me=(Me%Te+Te)%Te,Qt);if(this.tiles[ue])return Ye(this.tiles[ue],Wt);re>1&&console.log("drilling down to z%d-%d-%d",Ae,Me,Qt);for(var be,Xe=Ae,Rn=Me,tr=Qt;!be&&Xe>0;)Xe--,Rn=Math.floor(Rn/2),tr=Math.floor(tr/2),be=this.tiles[An(Xe,Rn,tr)];return be&&be.source?(re>1&&console.log("found parent tile z%d-%d-%d",Xe,Rn,tr),re>1&&console.time("drilling down"),this.splitTile(be.source,Xe,Rn,tr,Ae,Me,Qt),re>1&&console.timeEnd("drilling down"),this.tiles[ue]?Ye(this.tiles[ue],Wt):null):null};var gr=function(Ae){function Me(Qt,ge,Wt,re){Ae.call(this,Qt,ge,Wt,Bn),re&&(this.loadGeoJSON=re)}return Ae&&(Me.__proto__=Ae),(Me.prototype=Object.create(Ae&&Ae.prototype)).constructor=Me,Me.prototype.loadData=function(Qt,ge){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ge,this._pendingLoadDataParams=Qt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Me.prototype._loadData=function(){var Qt=this;if(this._pendingCallback&&this._pendingLoadDataParams){var ge=this._pendingCallback,Wt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var re=!!(Wt&&Wt.request&&Wt.request.collectResourceTiming)&&new t.RequestPerformance(Wt.request);this.loadGeoJSON(Wt,function(Te,ue){if(Te||!ue)return ge(Te);if(typeof ue!="object")return ge(new Error("Input data given to '"+Wt.source+"' is not a valid GeoJSON object."));(function Mn(vn,Ar){var or,cn=vn&&vn.type;if(cn==="FeatureCollection")for(or=0;or<vn.features.length;or++)Mn(vn.features[or],Ar);else if(cn==="GeometryCollection")for(or=0;or<vn.geometries.length;or++)Mn(vn.geometries[or],Ar);else if(cn==="Feature")Mn(vn.geometry,Ar);else if(cn==="Polygon")f(vn.coordinates,Ar);else if(cn==="MultiPolygon")for(or=0;or<vn.coordinates.length;or++)f(vn.coordinates[or],Ar);return vn})(ue,!0);try{if(Wt.filter){var be=t.createExpression(Wt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(be.result==="error")throw new Error(be.value.map(function(Mn){return Mn.key+": "+Mn.message}).join(", "));var Xe=ue.features.filter(function(Mn){return be.value.evaluate({zoom:0},Mn)});ue={type:"FeatureCollection",features:Xe}}Qt._geoJSONIndex=Wt.cluster?new Ft(function(Mn){var vn=Mn.superclusterOptions,Ar=Mn.clusterProperties;if(!Ar||!vn)return vn;for(var or={},cn={},Pr={accumulated:null,zoom:0},Sr={properties:null},De=Object.keys(Ar),$e=0,Ve=De;$e<Ve.length;$e+=1){var En=Ve[$e],xn=Ar[En],Nn=xn[0],mn=t.createExpression(xn[1]),Dn=t.createExpression(typeof Nn=="string"?[Nn,["accumulated"],["get",En]]:Nn);or[En]=mn.value,cn[En]=Dn.value}return vn.map=function($n){Sr.properties=$n;for(var Wn={},_n=0,xr=De;_n<xr.length;_n+=1){var mr=xr[_n];Wn[mr]=or[mr].evaluate(Pr,Sr)}return Wn},vn.reduce=function($n,Wn){Sr.properties=Wn;for(var _n=0,xr=De;_n<xr.length;_n+=1){var mr=xr[_n];Pr.accumulated=$n[mr],$n[mr]=cn[mr].evaluate(Pr,Sr)}},vn}(Wt)).load(ue.features):function(Mn,vn){return new en(Mn,vn)}(ue,Wt.geojsonVtOptions)}catch(Mn){return ge(Mn)}Qt.loaded={};var Rn={};if(re){var tr=re.finish();tr&&(Rn.resourceTiming={},Rn.resourceTiming[Wt.source]=JSON.parse(JSON.stringify(tr)))}ge(null,Rn)})}},Me.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Me.prototype.reloadTile=function(Qt,ge){var Wt=this.loaded;return Wt&&Wt[Qt.uid]?Ae.prototype.reloadTile.call(this,Qt,ge):this.loadTile(Qt,ge)},Me.prototype.loadGeoJSON=function(Qt,ge){if(Qt.request)t.getJSON(Qt.request,ge);else{if(typeof Qt.data!="string")return ge(new Error("Input data given to '"+Qt.source+"' is not a valid GeoJSON object."));try{return ge(null,JSON.parse(Qt.data))}catch(Wt){return ge(new Error("Input data given to '"+Qt.source+"' is not a valid GeoJSON object."))}}},Me.prototype.removeSource=function(Qt,ge){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ge()},Me.prototype.getClusterExpansionZoom=function(Qt,ge){try{ge(null,this._geoJSONIndex.getClusterExpansionZoom(Qt.clusterId))}catch(Wt){ge(Wt)}},Me.prototype.getClusterChildren=function(Qt,ge){try{ge(null,this._geoJSONIndex.getChildren(Qt.clusterId))}catch(Wt){ge(Wt)}},Me.prototype.getClusterLeaves=function(Qt,ge){try{ge(null,this._geoJSONIndex.getLeaves(Qt.clusterId,Qt.limit,Qt.offset))}catch(Wt){ge(Wt)}},Me}(a),hi=function(Me){var Qt=this;this.self=Me,this.actor=new t.Actor(Me,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:a,geojson:gr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ge,Wt){if(Qt.workerSourceTypes[ge])throw new Error('Worker source with name "'+ge+'" already registered.');Qt.workerSourceTypes[ge]=Wt},this.self.registerRTLTextPlugin=function(ge){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=ge.applyArabicShaping,t.plugin.processBidirectionalText=ge.processBidirectionalText,t.plugin.processStyledBidirectionalText=ge.processStyledBidirectionalText}};return hi.prototype.setReferrer=function(Ae,Me){this.referrer=Me},hi.prototype.setImages=function(Ae,Me,Qt){for(var ge in this.availableImages[Ae]=Me,this.workerSources[Ae]){var Wt=this.workerSources[Ae][ge];for(var re in Wt)Wt[re].availableImages=Me}Qt()},hi.prototype.setLayers=function(Ae,Me,Qt){this.getLayerIndex(Ae).replace(Me),Qt()},hi.prototype.updateLayers=function(Ae,Me,Qt){this.getLayerIndex(Ae).update(Me.layers,Me.removedIds),Qt()},hi.prototype.loadTile=function(Ae,Me,Qt){this.getWorkerSource(Ae,Me.type,Me.source).loadTile(Me,Qt)},hi.prototype.loadDEMTile=function(Ae,Me,Qt){this.getDEMWorkerSource(Ae,Me.source).loadTile(Me,Qt)},hi.prototype.reloadTile=function(Ae,Me,Qt){this.getWorkerSource(Ae,Me.type,Me.source).reloadTile(Me,Qt)},hi.prototype.abortTile=function(Ae,Me,Qt){this.getWorkerSource(Ae,Me.type,Me.source).abortTile(Me,Qt)},hi.prototype.removeTile=function(Ae,Me,Qt){this.getWorkerSource(Ae,Me.type,Me.source).removeTile(Me,Qt)},hi.prototype.removeDEMTile=function(Ae,Me){this.getDEMWorkerSource(Ae,Me.source).removeTile(Me)},hi.prototype.removeSource=function(Ae,Me,Qt){if(this.workerSources[Ae]&&this.workerSources[Ae][Me.type]&&this.workerSources[Ae][Me.type][Me.source]){var ge=this.workerSources[Ae][Me.type][Me.source];delete this.workerSources[Ae][Me.type][Me.source],ge.removeSource!==void 0?ge.removeSource(Me,Qt):Qt()}},hi.prototype.loadWorkerSource=function(Ae,Me,Qt){try{this.self.importScripts(Me.url),Qt()}catch(ge){Qt(ge.toString())}},hi.prototype.syncRTLPluginState=function(Ae,Me,Qt){try{t.plugin.setState(Me);var ge=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&ge!=null){this.self.importScripts(ge);var Wt=t.plugin.isParsed();Qt(Wt?void 0:new Error("RTL Text Plugin failed to import scripts from "+ge),Wt)}}catch(re){Qt(re.toString())}},hi.prototype.getAvailableImages=function(Ae){var Me=this.availableImages[Ae];return Me||(Me=[]),Me},hi.prototype.getLayerIndex=function(Ae){var Me=this.layerIndexes[Ae];return Me||(Me=this.layerIndexes[Ae]=new c),Me},hi.prototype.getWorkerSource=function(Ae,Me,Qt){var ge=this;return this.workerSources[Ae]||(this.workerSources[Ae]={}),this.workerSources[Ae][Me]||(this.workerSources[Ae][Me]={}),this.workerSources[Ae][Me][Qt]||(this.workerSources[Ae][Me][Qt]=new this.workerSourceTypes[Me]({send:function(re,Te,ue){ge.actor.send(re,Te,ue,Ae)}},this.getLayerIndex(Ae),this.getAvailableImages(Ae))),this.workerSources[Ae][Me][Qt]},hi.prototype.getDEMWorkerSource=function(Ae,Me){return this.demWorkerSources[Ae]||(this.demWorkerSources[Ae]={}),this.demWorkerSources[Ae][Me]||(this.demWorkerSources[Ae][Me]=new l),this.demWorkerSources[Ae][Me]},hi.prototype.enforceCacheSizeLimit=function(Ae,Me){t.enforceCacheSizeLimit(Me)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new hi(self)),hi}),e(["./shared"],function(t){"use strict";var u=t.createCommonjsModule(function(j){function I(D){return!w(D)}function w(D){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var tt,st,Ct=new Blob([""],{type:"text/javascript"}),It=URL.createObjectURL(Ct);try{st=new Worker(It),tt=!0}catch(Ut){tt=!1}return st&&st.terminate(),URL.revokeObjectURL(It),tt}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var tt=document.createElement("canvas");tt.width=tt.height=1;var st=tt.getContext("2d");if(!st)return!1;var Ct=st.getImageData(0,0,1,1);return Ct&&Ct.width===tt.width}()?(B[W=D&&D.failIfMajorPerformanceCaveat]===void 0&&(B[W]=function(tt){var st=function(It){var Ut=document.createElement("canvas"),Zt=Object.create(I.webGLContextAttributes);return Zt.failIfMajorPerformanceCaveat=It,Ut.probablySupportsContext?Ut.probablySupportsContext("webgl",Zt)||Ut.probablySupportsContext("experimental-webgl",Zt):Ut.supportsContext?Ut.supportsContext("webgl",Zt)||Ut.supportsContext("experimental-webgl",Zt):Ut.getContext("webgl",Zt)||Ut.getContext("experimental-webgl",Zt)}(tt);if(!st)return!1;var Ct=st.createShader(st.VERTEX_SHADER);return!(!Ct||st.isContextLost())&&(st.shaderSource(Ct,"void main() {}"),st.compileShader(Ct),st.getShaderParameter(Ct,st.COMPILE_STATUS)===!0)}(W)),B[W]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var W}j.exports?j.exports=I:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=I,window.mapboxgl.notSupportedReason=w);var B={};I.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),s={create:function(I,w,B){var D=t.window.document.createElement(I);return w!==void 0&&(D.className=w),B&&B.appendChild(D),D},createNS:function(I,w){return t.window.document.createElementNS(I,w)}},c=t.window.document&&t.window.document.documentElement.style;function r(j){if(!c)return j[0];for(var I=0;I<j.length;I++)if(j[I]in c)return j[I];return j[0]}var h,n=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);s.disableDrag=function(){c&&n&&(h=c[n],c[n]="none")},s.enableDrag=function(){c&&n&&(c[n]=h)};var i=r(["transform","WebkitTransform"]);s.setTransform=function(j,I){j.style[i]=I};var a=!1;try{var o=Object.defineProperty({},"passive",{get:function(){a=!0}});t.window.addEventListener("test",o,o),t.window.removeEventListener("test",o,o)}catch(j){a=!1}s.addEventListener=function(j,I,w,B){B===void 0&&(B={}),j.addEventListener(I,w,"passive"in B&&a?B:B.capture)},s.removeEventListener=function(j,I,w,B){B===void 0&&(B={}),j.removeEventListener(I,w,"passive"in B&&a?B:B.capture)};var l=function j(I){I.preventDefault(),I.stopPropagation(),t.window.removeEventListener("click",j,!0)};function f(j){var I=j.userImage;return!!(I&&I.render&&I.render())&&(j.data.replace(new Uint8Array(I.data.buffer)),!0)}s.suppressClick=function(){t.window.addEventListener("click",l,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",l,!0)},0)},s.mousePos=function(j,I){var w=j.getBoundingClientRect();return new t.Point(I.clientX-w.left-j.clientLeft,I.clientY-w.top-j.clientTop)},s.touchPos=function(j,I){for(var w=j.getBoundingClientRect(),B=[],D=0;D<I.length;D++)B.push(new t.Point(I[D].clientX-w.left-j.clientLeft,I[D].clientY-w.top-j.clientTop));return B},s.mouseButton=function(j){return t.window.InstallTrigger!==void 0&&j.button===2&&j.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:j.button},s.remove=function(j){j.parentNode&&j.parentNode.removeChild(j)};var v=function(j){function I(){j.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.isLoaded=function(){return this.loaded},I.prototype.setLoaded=function(w){if(this.loaded!==w&&(this.loaded=w,w)){for(var B=0,D=this.requestors;B<D.length;B+=1){var W=D[B];this._notify(W.ids,W.callback)}this.requestors=[]}},I.prototype.getImage=function(w){return this.images[w]},I.prototype.addImage=function(w,B){this._validate(w,B)&&(this.images[w]=B)},I.prototype._validate=function(w,B){var D=!0;return this._validateStretch(B.stretchX,B.data&&B.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "stretchX" value'))),D=!1),this._validateStretch(B.stretchY,B.data&&B.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "stretchY" value'))),D=!1),this._validateContent(B.content,B)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "content" value'))),D=!1),D},I.prototype._validateStretch=function(w,B){if(!w)return!0;for(var D=0,W=0,tt=w;W<tt.length;W+=1){var st=tt[W];if(st[0]<D||st[1]<st[0]||B<st[1])return!1;D=st[1]}return!0},I.prototype._validateContent=function(w,B){return!(w&&(w.length!==4||w[0]<0||B.data.width<w[0]||w[1]<0||B.data.height<w[1]||w[2]<0||B.data.width<w[2]||w[3]<0||B.data.height<w[3]||w[2]<w[0]||w[3]<w[1]))},I.prototype.updateImage=function(w,B){B.version=this.images[w].version+1,this.images[w]=B,this.updatedImages[w]=!0},I.prototype.removeImage=function(w){var B=this.images[w];delete this.images[w],delete this.patterns[w],B.userImage&&B.userImage.onRemove&&B.userImage.onRemove()},I.prototype.listImages=function(){return Object.keys(this.images)},I.prototype.getImages=function(w,B){var D=!0;if(!this.isLoaded())for(var W=0,tt=w;W<tt.length;W+=1)this.images[tt[W]]||(D=!1);this.isLoaded()||D?this._notify(w,B):this.requestors.push({ids:w,callback:B})},I.prototype._notify=function(w,B){for(var D={},W=0,tt=w;W<tt.length;W+=1){var st=tt[W];this.images[st]||this.fire(new t.Event("styleimagemissing",{id:st}));var Ct=this.images[st];Ct?D[st]={data:Ct.data.clone(),pixelRatio:Ct.pixelRatio,sdf:Ct.sdf,version:Ct.version,stretchX:Ct.stretchX,stretchY:Ct.stretchY,content:Ct.content,hasRenderCallback:Boolean(Ct.userImage&&Ct.userImage.render)}:t.warnOnce('Image "'+st+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}B(null,D)},I.prototype.getPixelSize=function(){var w=this.atlasImage;return{width:w.width,height:w.height}},I.prototype.getPattern=function(w){var B=this.patterns[w],D=this.getImage(w);if(!D)return null;if(B&&B.position.version===D.version)return B.position;if(B)B.position.version=D.version;else{var W={w:D.data.width+2,h:D.data.height+2,x:0,y:0},tt=new t.ImagePosition(W,D);this.patterns[w]={bin:W,position:tt}}return this._updatePatternAtlas(),this.patterns[w].position},I.prototype.bind=function(w){var B=w.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(w,this.atlasImage,B.RGBA),this.atlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE)},I.prototype._updatePatternAtlas=function(){var w=[];for(var B in this.patterns)w.push(this.patterns[B].bin);var D=t.potpack(w),W=D.w,tt=D.h,st=this.atlasImage;for(var Ct in st.resize({width:W||1,height:tt||1}),this.patterns){var It=this.patterns[Ct].bin,Ut=It.x+1,Zt=It.y+1,qt=this.images[Ct].data,de=qt.width,me=qt.height;t.RGBAImage.copy(qt,st,{x:0,y:0},{x:Ut,y:Zt},{width:de,height:me}),t.RGBAImage.copy(qt,st,{x:0,y:me-1},{x:Ut,y:Zt-1},{width:de,height:1}),t.RGBAImage.copy(qt,st,{x:0,y:0},{x:Ut,y:Zt+me},{width:de,height:1}),t.RGBAImage.copy(qt,st,{x:de-1,y:0},{x:Ut-1,y:Zt},{width:1,height:me}),t.RGBAImage.copy(qt,st,{x:0,y:0},{x:Ut+de,y:Zt},{width:1,height:me})}this.dirty=!0},I.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},I.prototype.dispatchRenderCallbacks=function(w){for(var B=0,D=w;B<D.length;B+=1){var W=D[B];if(!this.callbackDispatchedThisFrame[W]){this.callbackDispatchedThisFrame[W]=!0;var tt=this.images[W];f(tt)&&this.updateImage(W,tt)}}},I}(t.Evented),b=_,g=_,m=1e20;function _(j,I,w,B,D,W){this.fontSize=j||24,this.buffer=I===void 0?3:I,this.cutoff=B||.25,this.fontFamily=D||"sans-serif",this.fontWeight=W||"normal",this.radius=w||8;var tt=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=tt,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(tt*tt),this.gridInner=new Float64Array(tt*tt),this.f=new Float64Array(tt),this.d=new Float64Array(tt),this.z=new Float64Array(tt+1),this.v=new Int16Array(tt),this.middle=Math.round(tt/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function M(j,I,w,B,D,W,tt){for(var st=0;st<I;st++){for(var Ct=0;Ct<w;Ct++)B[Ct]=j[Ct*I+st];for(x(B,D,W,tt,w),Ct=0;Ct<w;Ct++)j[Ct*I+st]=D[Ct]}for(Ct=0;Ct<w;Ct++){for(st=0;st<I;st++)B[st]=j[Ct*I+st];for(x(B,D,W,tt,I),st=0;st<I;st++)j[Ct*I+st]=Math.sqrt(D[st])}}function x(j,I,w,B,D){w[0]=0,B[0]=-m,B[1]=+m;for(var W=1,tt=0;W<D;W++){for(var st=(j[W]+W*W-(j[w[tt]]+w[tt]*w[tt]))/(2*W-2*w[tt]);st<=B[tt];)tt--,st=(j[W]+W*W-(j[w[tt]]+w[tt]*w[tt]))/(2*W-2*w[tt]);w[++tt]=W,B[tt]=st,B[tt+1]=+m}for(W=0,tt=0;W<D;W++){for(;B[tt+1]<W;)tt++;I[W]=(W-w[tt])*(W-w[tt])+j[w[tt]]}}_.prototype.draw=function(j){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(j,this.buffer,this.middle);for(var I=this.ctx.getImageData(0,0,this.size,this.size),w=new Uint8ClampedArray(this.size*this.size),B=0;B<this.size*this.size;B++){var D=I.data[4*B+3]/255;this.gridOuter[B]=D===1?0:D===0?m:Math.pow(Math.max(0,.5-D),2),this.gridInner[B]=D===1?m:D===0?0:Math.pow(Math.max(0,D-.5),2)}for(M(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),M(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),B=0;B<this.size*this.size;B++)w[B]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[B]-this.gridInner[B])/this.radius+this.cutoff))));return w},b.default=g;var y=function(I,w){this.requestManager=I,this.localIdeographFontFamily=w,this.entries={}};y.prototype.setURL=function(j){this.url=j},y.prototype.getGlyphs=function(j,I){var w=this,B=[];for(var D in j)for(var W=0,tt=j[D];W<tt.length;W+=1)B.push({stack:D,id:tt[W]});t.asyncAll(B,function(st,Ct){var It=st.stack,Ut=st.id,Zt=w.entries[It];Zt||(Zt=w.entries[It]={glyphs:{},requests:{},ranges:{}});var qt=Zt.glyphs[Ut];if(qt===void 0){if(qt=w._tinySDF(Zt,It,Ut))return Zt.glyphs[Ut]=qt,void Ct(null,{stack:It,id:Ut,glyph:qt});var de=Math.floor(Ut/256);if(256*de>65535)Ct(new Error("glyphs > 65535 not supported"));else if(Zt.ranges[de])Ct(null,{stack:It,id:Ut,glyph:qt});else{var me=Zt.requests[de];me||(me=Zt.requests[de]=[],y.loadGlyphRange(It,de,w.url,w.requestManager,function(je,Oe){if(Oe){for(var ke in Oe)w._doesCharSupportLocalGlyph(+ke)||(Zt.glyphs[+ke]=Oe[+ke]);Zt.ranges[de]=!0}for(var qe=0,an=me;qe<an.length;qe+=1)(0,an[qe])(je,Oe);delete Zt.requests[de]})),me.push(function(je,Oe){je?Ct(je):Oe&&Ct(null,{stack:It,id:Ut,glyph:Oe[Ut]||null})})}}else Ct(null,{stack:It,id:Ut,glyph:qt})},function(st,Ct){if(st)I(st);else if(Ct){for(var It={},Ut=0,Zt=Ct;Ut<Zt.length;Ut+=1){var qt=Zt[Ut],de=qt.stack,me=qt.id,je=qt.glyph;(It[de]||(It[de]={}))[me]=je&&{id:je.id,bitmap:je.bitmap.clone(),metrics:je.metrics}}I(null,It)}})},y.prototype._doesCharSupportLocalGlyph=function(j){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](j)||t.isChar["Hangul Syllables"](j)||t.isChar.Hiragana(j)||t.isChar.Katakana(j))},y.prototype._tinySDF=function(j,I,w){var B=this.localIdeographFontFamily;if(B&&this._doesCharSupportLocalGlyph(w)){var D=j.tinySDF;if(!D){var W="400";/bold/i.test(I)?W="900":/medium/i.test(I)?W="500":/light/i.test(I)&&(W="200"),D=j.tinySDF=new y.TinySDF(24,3,8,.25,B,W)}return{id:w,bitmap:new t.AlphaImage({width:30,height:30},D.draw(String.fromCharCode(w))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(j,I,w,B,D){var W=256*I,tt=W+255,st=B.transformRequest(B.normalizeGlyphsURL(w).replace("{fontstack}",j).replace("{range}",W+"-"+tt),t.ResourceType.Glyphs);t.getArrayBuffer(st,function(Ct,It){if(Ct)D(Ct);else if(It){for(var Ut={},Zt=0,qt=t.parseGlyphPBF(It);Zt<qt.length;Zt+=1){var de=qt[Zt];Ut[de.id]=de}D(null,Ut)}})},y.TinySDF=b;var S=function(){this.specification=t.styleSpec.light.position};S.prototype.possiblyEvaluate=function(j,I){return t.sphericalToCartesian(j.expression.evaluate(I))},S.prototype.interpolate=function(j,I,w){return{x:t.number(j.x,I.x,w),y:t.number(j.y,I.y,w),z:t.number(j.z,I.z,w)}};var P=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new S,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),A=function(j){function I(w){j.call(this),this._transitionable=new t.Transitionable(P),this.setLight(w),this._transitioning=this._transitionable.untransitioned()}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getLight=function(){return this._transitionable.serialize()},I.prototype.setLight=function(w,B){if(B===void 0&&(B={}),!this._validate(t.validateLight,w,B))for(var D in w){var W=w[D];t.endsWith(D,"-transition")?this._transitionable.setTransition(D.slice(0,-"-transition".length),W):this._transitionable.setValue(D,W)}},I.prototype.updateTransitions=function(w){this._transitioning=this._transitionable.transitioned(w,this._transitioning)},I.prototype.hasTransition=function(){return this._transitioning.hasTransition()},I.prototype.recalculate=function(w){this.properties=this._transitioning.possiblyEvaluate(w)},I.prototype._validate=function(w,B,D){return(!D||D.validate!==!1)&&t.emitValidationErrors(this,w.call(t.validateStyle,t.extend({value:B,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},I}(t.Evented),O=function(I,w){this.width=I,this.height=w,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(j,I){var w=j.join(",")+String(I);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(j,I)),this.dashEntry[w]},O.prototype.getDashRanges=function(j,I,w){var B=[],D=j.length%2==1?-j[j.length-1]*w:0,W=j[0]*w,tt=!0;B.push({left:D,right:W,isDash:tt,zeroLength:j[0]===0});for(var st=j[0],Ct=1;Ct<j.length;Ct++){var It=j[Ct];B.push({left:D=st*w,right:W=(st+=It)*w,isDash:tt=!tt,zeroLength:It===0})}return B},O.prototype.addRoundDash=function(j,I,w){for(var B=I/2,D=-w;D<=w;D++)for(var W=this.width*(this.nextRow+w+D),tt=0,st=j[tt],Ct=0;Ct<this.width;Ct++){Ct/st.right>1&&(st=j[++tt]);var It=Math.abs(Ct-st.left),Ut=Math.abs(Ct-st.right),Zt=Math.min(It,Ut),qt=void 0,de=D/w*(B+1);if(st.isDash){var me=B-Math.abs(de);qt=Math.sqrt(Zt*Zt+me*me)}else qt=B-Math.sqrt(Zt*Zt+de*de);this.data[W+Ct]=Math.max(0,Math.min(255,qt+128))}},O.prototype.addRegularDash=function(j){for(var I=j.length-1;I>=0;--I){var w=j[I],B=j[I+1];w.zeroLength?j.splice(I,1):B&&B.isDash===w.isDash&&(B.left=w.left,j.splice(I,1))}var D=j[0],W=j[j.length-1];D.isDash===W.isDash&&(D.left=W.left-this.width,W.right=D.right+this.width);for(var tt=this.width*this.nextRow,st=0,Ct=j[st],It=0;It<this.width;It++){It/Ct.right>1&&(Ct=j[++st]);var Ut=Math.abs(It-Ct.left),Zt=Math.abs(It-Ct.right),qt=Math.min(Ut,Zt);this.data[tt+It]=Math.max(0,Math.min(255,(Ct.isDash?qt:-qt)+128))}},O.prototype.addDash=function(j,I){var w=I?7:0,B=2*w+1;if(this.nextRow+B>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var D=0,W=0;W<j.length;W++)D+=j[W];if(D!==0){var tt=this.width/D,st=this.getDashRanges(j,this.width,tt);I?this.addRoundDash(st,tt,w):this.addRegularDash(st)}var Ct={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:D};return this.nextRow+=B,this.dirty=!0,Ct},O.prototype.bind=function(j){var I=j.gl;this.texture?(I.bindTexture(I.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,I.texSubImage2D(I.TEXTURE_2D,0,0,0,this.width,this.height,I.ALPHA,I.UNSIGNED_BYTE,this.data))):(this.texture=I.createTexture(),I.bindTexture(I.TEXTURE_2D,this.texture),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,this.width,this.height,0,I.ALPHA,I.UNSIGNED_BYTE,this.data))};var L=function j(I,w){this.workerPool=I,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var B=this.workerPool.acquire(this.id),D=0;D<B.length;D++){var W=new j.Actor(B[D],w,this.id);W.name="Worker "+D,this.actors.push(W)}};function H(j,I,w){var B=function(W,tt){if(W)return w(W);if(tt){var st=t.pick(t.extend(tt,j),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);tt.vector_layers&&(st.vectorLayers=tt.vector_layers,st.vectorLayerIds=st.vectorLayers.map(function(Ct){return Ct.id})),st.tiles=I.canonicalizeTileset(st,j.url),w(null,st)}};return j.url?t.getJSON(I.transformRequest(I.normalizeSourceURL(j.url),t.ResourceType.Source),B):t.browser.frame(function(){return B(null,j)})}L.prototype.broadcast=function(j,I,w){t.asyncAll(this.actors,function(B,D){B.send(j,I,D)},w=w||function(){})},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(j){j.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=t.Actor;var F=function(I,w,B){this.bounds=t.LngLatBounds.convert(this.validateBounds(I)),this.minzoom=w||0,this.maxzoom=B||24};F.prototype.validateBounds=function(j){return Array.isArray(j)&&j.length===4?[Math.max(-180,j[0]),Math.max(-90,j[1]),Math.min(180,j[2]),Math.min(90,j[3])]:[-180,-90,180,90]},F.prototype.contains=function(j){var I=Math.pow(2,j.z),w=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*I),B=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*I),D=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*I),W=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*I);return j.x>=w&&j.x<D&&j.y>=B&&j.y<W};var K=function(j){function I(w,B,D,W){if(j.call(this),this.id=w,this.dispatcher=D,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(B,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},B),this._collectResourceTiming=B.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(W)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=H(this._options,this.map._requestManager,function(B,D){w._tileJSONRequest=null,w._loaded=!0,B?w.fire(new t.ErrorEvent(B)):D&&(t.extend(w,D),D.bounds&&(w.tileBounds=new F(D.bounds,w.minzoom,w.maxzoom)),t.postTurnstileEvent(D.tiles,w.map._requestManager._customAccessToken),t.postMapLoadEvent(D.tiles,w.map._getMapId(),w.map._requestManager._skuToken,w.map._requestManager._customAccessToken),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},I.prototype.loaded=function(){return this._loaded},I.prototype.hasTile=function(w){return!this.tileBounds||this.tileBounds.contains(w.canonical)},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setSourceProperty=function(w){this._tileJSONRequest&&this._tileJSONRequest.cancel(),w(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},I.prototype.setTiles=function(w){var B=this;return this.setSourceProperty(function(){B._options.tiles=w}),this},I.prototype.setUrl=function(w){var B=this;return this.setSourceProperty(function(){B.url=w,B._options.url=w}),this},I.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},I.prototype.serialize=function(){return t.extend({},this._options)},I.prototype.loadTile=function(w,B){var D=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme)),W={request:this.map._requestManager.transformRequest(D,t.ResourceType.Tile),uid:w.uid,tileID:w.tileID,zoom:w.tileID.overscaledZ,tileSize:this.tileSize*w.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function tt(st,Ct){return delete w.request,w.aborted?B(null):st&&st.status!==404?B(st):(Ct&&Ct.resourceTiming&&(w.resourceTiming=Ct.resourceTiming),this.map._refreshExpiredTiles&&Ct&&w.setExpiryData(Ct),w.loadVectorData(Ct,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),B(null),void(w.reloadCallback&&(this.loadTile(w,w.reloadCallback),w.reloadCallback=null)))}W.request.collectResourceTiming=this._collectResourceTiming,w.actor&&w.state!=="expired"?w.state==="loading"?w.reloadCallback=B:w.request=w.actor.send("reloadTile",W,tt.bind(this)):(w.actor=this.dispatcher.getActor(),w.request=w.actor.send("loadTile",W,tt.bind(this)))},I.prototype.abortTile=function(w){w.request&&(w.request.cancel(),delete w.request),w.actor&&w.actor.send("abortTile",{uid:w.uid,type:this.type,source:this.id},void 0)},I.prototype.unloadTile=function(w){w.unloadVectorData(),w.actor&&w.actor.send("removeTile",{uid:w.uid,type:this.type,source:this.id},void 0)},I.prototype.hasTransition=function(){return!1},I}(t.Evented),G=function(j){function I(w,B,D,W){j.call(this),this.id=w,this.dispatcher=D,this.setEventedParent(W),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},B),t.extend(this,t.pick(B,["url","scheme","tileSize"]))}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=H(this._options,this.map._requestManager,function(B,D){w._tileJSONRequest=null,w._loaded=!0,B?w.fire(new t.ErrorEvent(B)):D&&(t.extend(w,D),D.bounds&&(w.tileBounds=new F(D.bounds,w.minzoom,w.maxzoom)),t.postTurnstileEvent(D.tiles),t.postMapLoadEvent(D.tiles,w.map._getMapId(),w.map._requestManager._skuToken),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},I.prototype.loaded=function(){return this._loaded},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},I.prototype.serialize=function(){return t.extend({},this._options)},I.prototype.hasTile=function(w){return!this.tileBounds||this.tileBounds.contains(w.canonical)},I.prototype.loadTile=function(w,B){var D=this,W=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);w.request=t.getImage(this.map._requestManager.transformRequest(W,t.ResourceType.Tile),function(tt,st){if(delete w.request,w.aborted)w.state="unloaded",B(null);else if(tt)w.state="errored",B(tt);else if(st){D.map._refreshExpiredTiles&&w.setExpiryData(st),delete st.cacheControl,delete st.expires;var Ct=D.map.painter.context,It=Ct.gl;w.texture=D.map.painter.getTileTexture(st.width),w.texture?w.texture.update(st,{useMipmap:!0}):(w.texture=new t.Texture(Ct,st,It.RGBA,{useMipmap:!0}),w.texture.bind(It.LINEAR,It.CLAMP_TO_EDGE,It.LINEAR_MIPMAP_NEAREST),Ct.extTextureFilterAnisotropic&&It.texParameterf(It.TEXTURE_2D,Ct.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ct.extTextureFilterAnisotropicMax)),w.state="loaded",t.cacheEntryPossiblyAdded(D.dispatcher),B(null)}})},I.prototype.abortTile=function(w,B){w.request&&(w.request.cancel(),delete w.request),B()},I.prototype.unloadTile=function(w,B){w.texture&&this.map.painter.saveTileTexture(w.texture),B()},I.prototype.hasTransition=function(){return!1},I}(t.Evented),U=function(j){function I(w,B,D,W){j.call(this,w,B,D,W),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},B),this.encoding=B.encoding||"mapbox"}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},I.prototype.loadTile=function(w,B){var D=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function W(tt,st){tt&&(w.state="errored",B(tt)),st&&(w.dem=st,w.needsHillshadePrepare=!0,w.state="loaded",B(null))}w.request=t.getImage(this.map._requestManager.transformRequest(D,t.ResourceType.Tile),function(tt,st){if(delete w.request,w.aborted)w.state="unloaded",B(null);else if(tt)w.state="errored",B(tt);else if(st){this.map._refreshExpiredTiles&&w.setExpiryData(st),delete st.cacheControl,delete st.expires;var Ct=t.window.ImageBitmap&&st instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?st:t.browser.getImageData(st,1),It={uid:w.uid,coord:w.tileID,source:this.id,rawImageData:Ct,encoding:this.encoding};w.actor&&w.state!=="expired"||(w.actor=this.dispatcher.getActor(),w.actor.send("loadDEMTile",It,W.bind(this)))}}.bind(this)),w.neighboringTiles=this._getNeighboringTiles(w.tileID)},I.prototype._getNeighboringTiles=function(w){var B=w.canonical,D=Math.pow(2,B.z),W=(B.x-1+D)%D,tt=B.x===0?w.wrap-1:w.wrap,st=(B.x+1+D)%D,Ct=B.x+1===D?w.wrap+1:w.wrap,It={};return It[new t.OverscaledTileID(w.overscaledZ,tt,B.z,W,B.y).key]={backfilled:!1},It[new t.OverscaledTileID(w.overscaledZ,Ct,B.z,st,B.y).key]={backfilled:!1},B.y>0&&(It[new t.OverscaledTileID(w.overscaledZ,tt,B.z,W,B.y-1).key]={backfilled:!1},It[new t.OverscaledTileID(w.overscaledZ,w.wrap,B.z,B.x,B.y-1).key]={backfilled:!1},It[new t.OverscaledTileID(w.overscaledZ,Ct,B.z,st,B.y-1).key]={backfilled:!1}),B.y+1<D&&(It[new t.OverscaledTileID(w.overscaledZ,tt,B.z,W,B.y+1).key]={backfilled:!1},It[new t.OverscaledTileID(w.overscaledZ,w.wrap,B.z,B.x,B.y+1).key]={backfilled:!1},It[new t.OverscaledTileID(w.overscaledZ,Ct,B.z,st,B.y+1).key]={backfilled:!1}),It},I.prototype.unloadTile=function(w){w.demTexture&&this.map.painter.saveTileTexture(w.demTexture),w.fbo&&(w.fbo.destroy(),delete w.fbo),w.dem&&delete w.dem,delete w.neighboringTiles,w.state="unloaded",w.actor&&w.actor.send("removeDEMTile",{uid:w.uid,source:this.id})},I}(G),Z=function(j){function I(w,B,D,W){j.call(this),this.id=w,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=D.getActor(),this.setEventedParent(W),this._data=B.data,this._options=t.extend({},B),this._collectResourceTiming=B.collectResourceTiming,this._resourceTiming=[],B.maxzoom!==void 0&&(this.maxzoom=B.maxzoom),B.type&&(this.type=B.type),B.attribution&&(this.attribution=B.attribution),this.promoteId=B.promoteId;var tt=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:B.cluster||!1,geojsonVtOptions:{buffer:(B.buffer!==void 0?B.buffer:128)*tt,tolerance:(B.tolerance!==void 0?B.tolerance:.375)*tt,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:B.lineMetrics||!1,generateId:B.generateId||!1},superclusterOptions:{maxZoom:B.clusterMaxZoom!==void 0?Math.min(B.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,B.clusterMinPoints||2),extent:t.EXTENT,radius:(B.clusterRadius||50)*tt,log:!1,generateId:B.generateId||!1},clusterProperties:B.clusterProperties,filter:B.filter},B.workerOptions)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(B){if(B)w.fire(new t.ErrorEvent(B));else{var D={dataType:"source",sourceDataType:"metadata"};w._collectResourceTiming&&w._resourceTiming&&w._resourceTiming.length>0&&(D.resourceTiming=w._resourceTiming,w._resourceTiming=[]),w.fire(new t.Event("data",D))}})},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setData=function(w){var B=this;return this._data=w,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(D){if(D)B.fire(new t.ErrorEvent(D));else{var W={dataType:"source",sourceDataType:"content"};B._collectResourceTiming&&B._resourceTiming&&B._resourceTiming.length>0&&(W.resourceTiming=B._resourceTiming,B._resourceTiming=[]),B.fire(new t.Event("data",W))}}),this},I.prototype.getClusterExpansionZoom=function(w,B){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:w,source:this.id},B),this},I.prototype.getClusterChildren=function(w,B){return this.actor.send("geojson.getClusterChildren",{clusterId:w,source:this.id},B),this},I.prototype.getClusterLeaves=function(w,B,D,W){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:w,limit:B,offset:D},W),this},I.prototype._updateWorkerData=function(w){var B=this;this._loaded=!1;var D=t.extend({},this.workerOptions),W=this._data;typeof W=="string"?(D.request=this.map._requestManager.transformRequest(t.browser.resolveURL(W),t.ResourceType.Source),D.request.collectResourceTiming=this._collectResourceTiming):D.data=JSON.stringify(W),this.actor.send(this.type+".loadData",D,function(tt,st){B._removed||st&&st.abandoned||(B._loaded=!0,st&&st.resourceTiming&&st.resourceTiming[B.id]&&(B._resourceTiming=st.resourceTiming[B.id].slice(0)),B.actor.send(B.type+".coalesce",{source:D.source},null),w(tt))})},I.prototype.loaded=function(){return this._loaded},I.prototype.loadTile=function(w,B){var D=this,W=w.actor?"reloadTile":"loadTile";w.actor=this.actor,w.request=this.actor.send(W,{type:this.type,uid:w.uid,tileID:w.tileID,zoom:w.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(tt,st){return delete w.request,w.unloadVectorData(),w.aborted?B(null):tt?B(tt):(w.loadVectorData(st,D.map.painter,W==="reloadTile"),B(null))})},I.prototype.abortTile=function(w){w.request&&(w.request.cancel(),delete w.request),w.aborted=!0},I.prototype.unloadTile=function(w){w.unloadVectorData(),this.actor.send("removeTile",{uid:w.uid,type:this.type,source:this.id})},I.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},I.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},I.prototype.hasTransition=function(){return!1},I}(t.Evented),J=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),rt=function(j){function I(w,B,D,W){j.call(this),this.id=w,this.dispatcher=D,this.coordinates=B.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(W),this.options=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(w,B){var D=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(W,tt){D._loaded=!0,W?D.fire(new t.ErrorEvent(W)):tt&&(D.image=tt,w&&(D.coordinates=w),B&&B(),D._finishLoading())})},I.prototype.loaded=function(){return this._loaded},I.prototype.updateImage=function(w){var B=this;return this.image&&w.url?(this.options.url=w.url,this.load(w.coordinates,function(){B.texture=null}),this):this},I.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setCoordinates=function(w){var B=this;this.coordinates=w;var D=w.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(tt){for(var st=1/0,Ct=1/0,It=-1/0,Ut=-1/0,Zt=0,qt=tt;Zt<qt.length;Zt+=1){var de=qt[Zt];st=Math.min(st,de.x),Ct=Math.min(Ct,de.y),It=Math.max(It,de.x),Ut=Math.max(Ut,de.y)}var me=Math.max(It-st,Ut-Ct),je=Math.max(0,Math.floor(-Math.log(me)/Math.LN2)),Oe=Math.pow(2,je);return new t.CanonicalTileID(je,Math.floor((st+It)/2*Oe),Math.floor((Ct+Ut)/2*Oe))}(D),this.minzoom=this.maxzoom=this.tileID.z;var W=D.map(function(tt){return B.tileID.getTilePoint(tt)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(W[0].x,W[0].y,0,0),this._boundsArray.emplaceBack(W[1].x,W[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(W[3].x,W[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(W[2].x,W[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},I.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var w=this.map.painter.context,B=w.gl;for(var D in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(w,this.image,B.RGBA),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE)),this.tiles){var W=this.tiles[D];W.state!=="loaded"&&(W.state="loaded",W.texture=this.texture)}}},I.prototype.loadTile=function(w,B){this.tileID&&this.tileID.equals(w.tileID.canonical)?(this.tiles[String(w.tileID.wrap)]=w,w.buckets={},B(null)):(w.state="errored",B(null))},I.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},I.prototype.hasTransition=function(){return!1},I}(t.Evented),vt=function(j){function I(w,B,D,W){j.call(this,w,B,D,W),this.roundZoom=!0,this.type="video",this.options=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1;var B=this.options;this.urls=[];for(var D=0,W=B.urls;D<W.length;D+=1)this.urls.push(this.map._requestManager.transformRequest(W[D],t.ResourceType.Source).url);t.getVideo(this.urls,function(tt,st){w._loaded=!0,tt?w.fire(new t.ErrorEvent(tt)):st&&(w.video=st,w.video.loop=!0,w.video.addEventListener("playing",function(){w.map.triggerRepaint()}),w.map&&w.video.play(),w._finishLoading())})},I.prototype.pause=function(){this.video&&this.video.pause()},I.prototype.play=function(){this.video&&this.video.play()},I.prototype.seek=function(w){if(this.video){var B=this.video.seekable;w<B.start(0)||w>B.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+B.start(0)+" and "+B.end(0)+"-second mark."))):this.video.currentTime=w}},I.prototype.getVideo=function(){return this.video},I.prototype.onAdd=function(w){this.map||(this.map=w,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},I.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var w=this.map.painter.context,B=w.gl;for(var D in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE),B.texSubImage2D(B.TEXTURE_2D,0,0,0,B.RGBA,B.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(w,this.video,B.RGBA),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE)),this.tiles){var W=this.tiles[D];W.state!=="loaded"&&(W.state="loaded",W.texture=this.texture)}}},I.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},I.prototype.hasTransition=function(){return this.video&&!this.video.paused},I}(rt),mt=function(j){function I(w,B,D,W){j.call(this,w,B,D,W),B.coordinates?Array.isArray(B.coordinates)&&B.coordinates.length===4&&!B.coordinates.some(function(tt){return!Array.isArray(tt)||tt.length!==2||tt.some(function(st){return typeof st!="number"})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'missing required property "coordinates"'))),B.animate&&typeof B.animate!="boolean"&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'optional "animate" property must be a boolean value'))),B.canvas?typeof B.canvas=="string"||B.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'missing required property "canvas"'))),this.options=B,this.animate=B.animate===void 0||B.animate}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},I.prototype.getCanvas=function(){return this.canvas},I.prototype.onAdd=function(w){this.map=w,this.load(),this.canvas&&this.animate&&this.play()},I.prototype.onRemove=function(){this.pause()},I.prototype.prepare=function(){var w=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,w=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,w=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var B=this.map.painter.context,D=B.gl;for(var W in this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(w||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(B,this.canvas,D.RGBA,{premultiply:!0}),this.tiles){var tt=this.tiles[W];tt.state!=="loaded"&&(tt.state="loaded",tt.texture=this.texture)}}},I.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},I.prototype.hasTransition=function(){return this._playing},I.prototype._hasInvalidDimensions=function(){for(var w=0,B=[this.canvas.width,this.canvas.height];w<B.length;w+=1){var D=B[w];if(isNaN(D)||D<=0)return!0}return!1},I}(rt),ut={vector:K,raster:G,"raster-dem":U,geojson:Z,video:vt,image:rt,canvas:mt};function Rt(j,I){var w=t.identity([]);return t.translate(w,w,[1,1,0]),t.scale(w,w,[.5*j.width,.5*j.height,1]),t.multiply(w,w,j.calculatePosMatrix(I.toUnwrapped()))}function Ft(j,I,w,B,D,W){var tt=function(je,Oe,ke){if(je)for(var qe=0,an=je;qe<an.length;qe+=1){var Xn=Oe[an[qe]];if(Xn&&Xn.source===ke&&Xn.type==="fill-extrusion")return!0}else for(var kn in Oe){var fr=Oe[kn];if(fr.source===ke&&fr.type==="fill-extrusion")return!0}return!1}(D&&D.layers,I,j.id),st=W.maxPitchScaleFactor(),Ct=j.tilesIn(B,st,tt);Ct.sort(wt);for(var It=[],Ut=0,Zt=Ct;Ut<Zt.length;Ut+=1){var qt=Zt[Ut];It.push({wrappedTileID:qt.tileID.wrapped().key,queryResults:qt.tile.queryRenderedFeatures(I,w,j._state,qt.queryGeometry,qt.cameraQueryGeometry,qt.scale,D,W,st,Rt(j.transform,qt.tileID))})}var de=function(je){for(var Oe={},ke={},qe=0,an=je;qe<an.length;qe+=1){var Xn=an[qe],kn=Xn.queryResults,fr=Xn.wrappedTileID,Mr=ke[fr]=ke[fr]||{};for(var Qr in kn)for(var Zr=kn[Qr],Pi=Mr[Qr]=Mr[Qr]||{},Ri=Oe[Qr]=Oe[Qr]||[],Ki=0,Xi=Zr;Ki<Xi.length;Ki+=1){var Oa=Xi[Ki];Pi[Oa.featureIndex]||(Pi[Oa.featureIndex]=!0,Ri.push(Oa))}}return Oe}(It);for(var me in de)de[me].forEach(function(je){var Oe=je.feature,ke=j.getFeatureState(Oe.layer["source-layer"],Oe.id);Oe.source=Oe.layer.source,Oe.layer["source-layer"]&&(Oe.sourceLayer=Oe.layer["source-layer"]),Oe.state=ke});return de}function wt(j,I){var w=j.tileID,B=I.tileID;return w.overscaledZ-B.overscaledZ||w.canonical.y-B.canonical.y||w.wrap-B.wrap||w.canonical.x-B.canonical.x}var Mt=function(I,w){this.max=I,this.onRemove=w,this.reset()};Mt.prototype.reset=function(){for(var j in this.data)for(var I=0,w=this.data[j];I<w.length;I+=1){var B=w[I];B.timeout&&clearTimeout(B.timeout),this.onRemove(B.value)}return this.data={},this.order=[],this},Mt.prototype.add=function(j,I,w){var B=this,D=j.wrapped().key;this.data[D]===void 0&&(this.data[D]=[]);var W={value:I,timeout:void 0};if(w!==void 0&&(W.timeout=setTimeout(function(){B.remove(j,W)},w)),this.data[D].push(W),this.order.push(D),this.order.length>this.max){var tt=this._getAndRemoveByKey(this.order[0]);tt&&this.onRemove(tt)}return this},Mt.prototype.has=function(j){return j.wrapped().key in this.data},Mt.prototype.getAndRemove=function(j){return this.has(j)?this._getAndRemoveByKey(j.wrapped().key):null},Mt.prototype._getAndRemoveByKey=function(j){var I=this.data[j].shift();return I.timeout&&clearTimeout(I.timeout),this.data[j].length===0&&delete this.data[j],this.order.splice(this.order.indexOf(j),1),I.value},Mt.prototype.getByKey=function(j){var I=this.data[j];return I?I[0].value:null},Mt.prototype.get=function(j){return this.has(j)?this.data[j.wrapped().key][0].value:null},Mt.prototype.remove=function(j,I){if(!this.has(j))return this;var w=j.wrapped().key,B=I===void 0?0:this.data[w].indexOf(I),D=this.data[w][B];return this.data[w].splice(B,1),D.timeout&&clearTimeout(D.timeout),this.data[w].length===0&&delete this.data[w],this.onRemove(D.value),this.order.splice(this.order.indexOf(w),1),this},Mt.prototype.setMaxSize=function(j){for(this.max=j;this.order.length>this.max;){var I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this},Mt.prototype.filter=function(j){var I=[];for(var w in this.data)for(var B=0,D=this.data[w];B<D.length;B+=1){var W=D[B];j(W.value)||I.push(W)}for(var tt=0,st=I;tt<st.length;tt+=1){var Ct=st[tt];this.remove(Ct.value.tileID,Ct)}};var St=function(I,w,B){this.context=I;var D=I.gl;this.buffer=D.createBuffer(),this.dynamicDraw=Boolean(B),this.context.unbindVAO(),I.bindElementBuffer.set(this.buffer),D.bufferData(D.ELEMENT_ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer};St.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},St.prototype.updateData=function(j){var I=this.context.gl;this.context.unbindVAO(),this.bind(),I.bufferSubData(I.ELEMENT_ARRAY_BUFFER,0,j.arrayBuffer)},St.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var At={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},nt=function(I,w,B,D){this.length=w.length,this.attributes=B,this.itemSize=w.bytesPerElement,this.dynamicDraw=D,this.context=I;var W=I.gl;this.buffer=W.createBuffer(),I.bindVertexBuffer.set(this.buffer),W.bufferData(W.ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?W.DYNAMIC_DRAW:W.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer};nt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},nt.prototype.updateData=function(j){var I=this.context.gl;this.bind(),I.bufferSubData(I.ARRAY_BUFFER,0,j.arrayBuffer)},nt.prototype.enableAttributes=function(j,I){for(var w=0;w<this.attributes.length;w++){var B=I.attributes[this.attributes[w].name];B!==void 0&&j.enableVertexAttribArray(B)}},nt.prototype.setVertexAttribPointers=function(j,I,w){for(var B=0;B<this.attributes.length;B++){var D=this.attributes[B],W=I.attributes[D.name];W!==void 0&&j.vertexAttribPointer(W,D.components,j[At[D.type]],!1,this.itemSize,D.offset+this.itemSize*(w||0))}},nt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Pt=function(I){this.gl=I.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Pt.prototype.get=function(){return this.current},Pt.prototype.set=function(j){},Pt.prototype.getDefault=function(){return this.default},Pt.prototype.setDefault=function(){this.set(this.default)};var z=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return t.Color.transparent},I.prototype.set=function(w){var B=this.current;(w.r!==B.r||w.g!==B.g||w.b!==B.b||w.a!==B.a||this.dirty)&&(this.gl.clearColor(w.r,w.g,w.b,w.a),this.current=w,this.dirty=!1)},I}(Pt),q=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 1},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.clearDepth(w),this.current=w,this.dirty=!1)},I}(Pt),gt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.clearStencil(w),this.current=w,this.dirty=!1)},I}(Pt),et=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return[!0,!0,!0,!0]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||w[3]!==B[3]||this.dirty)&&(this.gl.colorMask(w[0],w[1],w[2],w[3]),this.current=w,this.dirty=!1)},I}(Pt),at=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.depthMask(w),this.current=w,this.dirty=!1)},I}(Pt),xt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 255},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.stencilMask(w),this.current=w,this.dirty=!1)},I}(Pt),k=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},I.prototype.set=function(w){var B=this.current;(w.func!==B.func||w.ref!==B.ref||w.mask!==B.mask||this.dirty)&&(this.gl.stencilFunc(w.func,w.ref,w.mask),this.current=w,this.dirty=!1)},I}(Pt),ot=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[w.KEEP,w.KEEP,w.KEEP]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||this.dirty)&&(this.gl.stencilOp(w[0],w[1],w[2]),this.current=w,this.dirty=!1)},I}(Pt),it=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.STENCIL_TEST):B.disable(B.STENCIL_TEST),this.current=w,this.dirty=!1}},I}(Pt),$=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return[0,1]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||this.dirty)&&(this.gl.depthRange(w[0],w[1]),this.current=w,this.dirty=!1)},I}(Pt),_t=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.DEPTH_TEST):B.disable(B.DEPTH_TEST),this.current=w,this.dirty=!1}},I}(Pt),yt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.LESS},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.depthFunc(w),this.current=w,this.dirty=!1)},I}(Pt),Nt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.BLEND):B.disable(B.BLEND),this.current=w,this.dirty=!1}},I}(Pt),$t=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[w.ONE,w.ZERO]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||this.dirty)&&(this.gl.blendFunc(w[0],w[1]),this.current=w,this.dirty=!1)},I}(Pt),ee=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return t.Color.transparent},I.prototype.set=function(w){var B=this.current;(w.r!==B.r||w.g!==B.g||w.b!==B.b||w.a!==B.a||this.dirty)&&(this.gl.blendColor(w.r,w.g,w.b,w.a),this.current=w,this.dirty=!1)},I}(Pt),Gt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.FUNC_ADD},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.blendEquation(w),this.current=w,this.dirty=!1)},I}(Pt),Ht=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.CULL_FACE):B.disable(B.CULL_FACE),this.current=w,this.dirty=!1}},I}(Pt),ae=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.BACK},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.cullFace(w),this.current=w,this.dirty=!1)},I}(Pt),le=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.CCW},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.frontFace(w),this.current=w,this.dirty=!1)},I}(Pt),Be=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.useProgram(w),this.current=w,this.dirty=!1)},I}(Pt),Ce=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.TEXTURE0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.activeTexture(w),this.current=w,this.dirty=!1)},I}(Pt),We=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[0,0,w.drawingBufferWidth,w.drawingBufferHeight]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||w[3]!==B[3]||this.dirty)&&(this.gl.viewport(w[0],w[1],w[2],w[3]),this.current=w,this.dirty=!1)},I}(Pt),Ye=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindFramebuffer(B.FRAMEBUFFER,w),this.current=w,this.dirty=!1}},I}(Pt),wn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindRenderbuffer(B.RENDERBUFFER,w),this.current=w,this.dirty=!1}},I}(Pt),er=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindTexture(B.TEXTURE_2D,w),this.current=w,this.dirty=!1}},I}(Pt),Lr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindBuffer(B.ARRAY_BUFFER,w),this.current=w,this.dirty=!1}},I}(Pt),on=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){var B=this.gl;B.bindBuffer(B.ELEMENT_ARRAY_BUFFER,w),this.current=w,this.dirty=!1},I}(Pt),en=function(j){function I(w){j.call(this,w),this.vao=w.extVertexArrayObject}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){this.vao&&(w!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(w),this.current=w,this.dirty=!1)},I}(Pt),An=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 4},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_ALIGNMENT,w),this.current=w,this.dirty=!1}},I}(Pt),Bn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w),this.current=w,this.dirty=!1}},I}(Pt),gr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,w),this.current=w,this.dirty=!1}},I}(Pt),hi=function(j){function I(w,B){j.call(this,w),this.context=w,this.parent=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I}(Pt),Ae=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.setDirty=function(){this.dirty=!0},I.prototype.set=function(w){if(w!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var B=this.gl;B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,w,0),this.current=w,this.dirty=!1}},I}(hi),Me=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.set=function(w){if(w!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var B=this.gl;B.framebufferRenderbuffer(B.FRAMEBUFFER,B.DEPTH_ATTACHMENT,B.RENDERBUFFER,w),this.current=w,this.dirty=!1}},I}(hi),Qt=function(I,w,B,D){this.context=I,this.width=w,this.height=B;var W=this.framebuffer=I.gl.createFramebuffer();this.colorAttachment=new Ae(I,W),D&&(this.depthAttachment=new Me(I,W))};Qt.prototype.destroy=function(){var j=this.context.gl,I=this.colorAttachment.get();if(I&&j.deleteTexture(I),this.depthAttachment){var w=this.depthAttachment.get();w&&j.deleteRenderbuffer(w)}j.deleteFramebuffer(this.framebuffer)};var ge=function(I,w,B){this.func=I,this.mask=w,this.range=B};ge.ReadOnly=!1,ge.ReadWrite=!0,ge.disabled=new ge(519,ge.ReadOnly,[0,1]);var Wt=function(I,w,B,D,W,tt){this.test=I,this.ref=w,this.mask=B,this.fail=D,this.depthFail=W,this.pass=tt};Wt.disabled=new Wt({func:519,mask:0},0,0,7680,7680,7680);var re=function(I,w,B){this.blendFunction=I,this.blendColor=w,this.mask=B};re.disabled=new re(re.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),re.unblended=new re(re.Replace,t.Color.transparent,[!0,!0,!0,!0]),re.alphaBlended=new re([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Te=function(I,w,B){this.enable=I,this.mode=w,this.frontFace=B};Te.disabled=new Te(!1,1029,2305),Te.backCCW=new Te(!0,1029,2305);var ue=function(I){this.gl=I,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new z(this),this.clearDepth=new q(this),this.clearStencil=new gt(this),this.colorMask=new et(this),this.depthMask=new at(this),this.stencilMask=new xt(this),this.stencilFunc=new k(this),this.stencilOp=new ot(this),this.stencilTest=new it(this),this.depthRange=new $(this),this.depthTest=new _t(this),this.depthFunc=new yt(this),this.blend=new Nt(this),this.blendFunc=new $t(this),this.blendColor=new ee(this),this.blendEquation=new Gt(this),this.cullFace=new Ht(this),this.cullFaceSide=new ae(this),this.frontFace=new le(this),this.program=new Be(this),this.activeTexture=new Ce(this),this.viewport=new We(this),this.bindFramebuffer=new Ye(this),this.bindRenderbuffer=new wn(this),this.bindTexture=new er(this),this.bindVertexBuffer=new Lr(this),this.bindElementBuffer=new on(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new en(this),this.pixelStoreUnpack=new An(this),this.pixelStoreUnpackPremultiplyAlpha=new Bn(this),this.pixelStoreUnpackFlipY=new gr(this),this.extTextureFilterAnisotropic=I.getExtension("EXT_texture_filter_anisotropic")||I.getExtension("MOZ_EXT_texture_filter_anisotropic")||I.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=I.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=I.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(I.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=I.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=I.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=I.getParameter(I.MAX_TEXTURE_SIZE)};ue.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},ue.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},ue.prototype.createIndexBuffer=function(j,I){return new St(this,j,I)},ue.prototype.createVertexBuffer=function(j,I,w){return new nt(this,j,I,w)},ue.prototype.createRenderbuffer=function(j,I,w){var B=this.gl,D=B.createRenderbuffer();return this.bindRenderbuffer.set(D),B.renderbufferStorage(B.RENDERBUFFER,j,I,w),this.bindRenderbuffer.set(null),D},ue.prototype.createFramebuffer=function(j,I,w){return new Qt(this,j,I,w)},ue.prototype.clear=function(j){var I=j.color,w=j.depth,B=this.gl,D=0;I&&(D|=B.COLOR_BUFFER_BIT,this.clearColor.set(I),this.colorMask.set([!0,!0,!0,!0])),w!==void 0&&(D|=B.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(w),this.depthMask.set(!0)),B.clear(D)},ue.prototype.setCullFace=function(j){j.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(j.mode),this.frontFace.set(j.frontFace))},ue.prototype.setDepthMode=function(j){j.func!==this.gl.ALWAYS||j.mask?(this.depthTest.set(!0),this.depthFunc.set(j.func),this.depthMask.set(j.mask),this.depthRange.set(j.range)):this.depthTest.set(!1)},ue.prototype.setStencilMode=function(j){j.test.func!==this.gl.ALWAYS||j.mask?(this.stencilTest.set(!0),this.stencilMask.set(j.mask),this.stencilOp.set([j.fail,j.depthFail,j.pass]),this.stencilFunc.set({func:j.test.func,ref:j.ref,mask:j.test.mask})):this.stencilTest.set(!1)},ue.prototype.setColorMode=function(j){t.deepEqual(j.blendFunction,re.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(j.blendFunction),this.blendColor.set(j.blendColor)),this.colorMask.set(j.mask)},ue.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var be=function(j){function I(w,B,D){var W=this;j.call(this),this.id=w,this.dispatcher=D,this.on("data",function(tt){tt.dataType==="source"&&tt.sourceDataType==="metadata"&&(W._sourceLoaded=!0),W._sourceLoaded&&!W._paused&&tt.dataType==="source"&&tt.sourceDataType==="content"&&(W.reload(),W.transform&&W.update(W.transform))}),this.on("error",function(){W._sourceErrored=!0}),this._source=function(tt,st,Ct,It){var Ut=new ut[st.type](tt,st,Ct,It);if(Ut.id!==tt)throw new Error("Expected Source id to be "+tt+" instead of "+Ut.id);return t.bindAll(["load","abort","unload","serialize","prepare"],Ut),Ut}(w,B,D,this),this._tiles={},this._cache=new Mt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.onAdd=function(w){this.map=w,this._maxTileCacheSize=w?w._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(w)},I.prototype.onRemove=function(w){this._source&&this._source.onRemove&&this._source.onRemove(w)},I.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var w in this._tiles){var B=this._tiles[w];if(B.state!=="loaded"&&B.state!=="errored")return!1}return!0},I.prototype.getSource=function(){return this._source},I.prototype.pause=function(){this._paused=!0},I.prototype.resume=function(){if(this._paused){var w=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,w&&this.reload(),this.transform&&this.update(this.transform)}},I.prototype._loadTile=function(w,B){return this._source.loadTile(w,B)},I.prototype._unloadTile=function(w){if(this._source.unloadTile)return this._source.unloadTile(w,function(){})},I.prototype._abortTile=function(w){if(this._source.abortTile)return this._source.abortTile(w,function(){})},I.prototype.serialize=function(){return this._source.serialize()},I.prototype.prepare=function(w){for(var B in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var D=this._tiles[B];D.upload(w),D.prepare(this.map.style.imageManager)}},I.prototype.getIds=function(){return t.values(this._tiles).map(function(w){return w.tileID}).sort(Xe).map(function(w){return w.key})},I.prototype.getRenderableIds=function(w){var B=this,D=[];for(var W in this._tiles)this._isIdRenderable(W,w)&&D.push(this._tiles[W]);return w?D.sort(function(tt,st){var Ct=tt.tileID,It=st.tileID,Ut=new t.Point(Ct.canonical.x,Ct.canonical.y)._rotate(B.transform.angle),Zt=new t.Point(It.canonical.x,It.canonical.y)._rotate(B.transform.angle);return Ct.overscaledZ-It.overscaledZ||Zt.y-Ut.y||Zt.x-Ut.x}).map(function(tt){return tt.tileID.key}):D.map(function(tt){return tt.tileID}).sort(Xe).map(function(tt){return tt.key})},I.prototype.hasRenderableParent=function(w){var B=this.findLoadedParent(w,0);return!!B&&this._isIdRenderable(B.tileID.key)},I.prototype._isIdRenderable=function(w,B){return this._tiles[w]&&this._tiles[w].hasData()&&!this._coveredTiles[w]&&(B||!this._tiles[w].holdingForFade())},I.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var w in this._cache.reset(),this._tiles)this._tiles[w].state!=="errored"&&this._reloadTile(w,"reloading")},I.prototype._reloadTile=function(w,B){var D=this._tiles[w];D&&(D.state!=="loading"&&(D.state=B),this._loadTile(D,this._tileLoaded.bind(this,D,w,B)))},I.prototype._tileLoaded=function(w,B,D,W){if(W)return w.state="errored",void(W.status!==404?this._source.fire(new t.ErrorEvent(W,{tile:w})):this.update(this.transform));w.timeAdded=t.browser.now(),D==="expired"&&(w.refreshedUponExpiration=!0),this._setTileReloadTimer(B,w),this.getSource().type==="raster-dem"&&w.dem&&this._backfillDEM(w),this._state.initializeTileState(w,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:w,coord:w.tileID}))},I.prototype._backfillDEM=function(w){for(var B=this.getRenderableIds(),D=0;D<B.length;D++){var W=B[D];if(w.neighboringTiles&&w.neighboringTiles[W]){var tt=this.getTileByID(W);st(w,tt),st(tt,w)}}function st(Ct,It){Ct.needsHillshadePrepare=!0;var Ut=It.tileID.canonical.x-Ct.tileID.canonical.x,Zt=It.tileID.canonical.y-Ct.tileID.canonical.y,qt=Math.pow(2,Ct.tileID.canonical.z),de=It.tileID.key;Ut===0&&Zt===0||Math.abs(Zt)>1||(Math.abs(Ut)>1&&(Math.abs(Ut+qt)===1?Ut+=qt:Math.abs(Ut-qt)===1&&(Ut-=qt)),It.dem&&Ct.dem&&(Ct.dem.backfillBorder(It.dem,Ut,Zt),Ct.neighboringTiles&&Ct.neighboringTiles[de]&&(Ct.neighboringTiles[de].backfilled=!0)))}},I.prototype.getTile=function(w){return this.getTileByID(w.key)},I.prototype.getTileByID=function(w){return this._tiles[w]},I.prototype._retainLoadedChildren=function(w,B,D,W){for(var tt in this._tiles){var st=this._tiles[tt];if(!(W[tt]||!st.hasData()||st.tileID.overscaledZ<=B||st.tileID.overscaledZ>D)){for(var Ct=st.tileID;st&&st.tileID.overscaledZ>B+1;){var It=st.tileID.scaledTo(st.tileID.overscaledZ-1);(st=this._tiles[It.key])&&st.hasData()&&(Ct=It)}for(var Ut=Ct;Ut.overscaledZ>B;)if(w[(Ut=Ut.scaledTo(Ut.overscaledZ-1)).key]){W[Ct.key]=Ct;break}}}},I.prototype.findLoadedParent=function(w,B){if(w.key in this._loadedParentTiles){var D=this._loadedParentTiles[w.key];return D&&D.tileID.overscaledZ>=B?D:null}for(var W=w.overscaledZ-1;W>=B;W--){var tt=w.scaledTo(W),st=this._getLoadedTile(tt);if(st)return st}},I.prototype._getLoadedTile=function(w){var B=this._tiles[w.key];return B&&B.hasData()?B:this._cache.getByKey(w.wrapped().key)},I.prototype.updateCacheSize=function(w){var B=Math.ceil(w.width/this._source.tileSize)+1,D=Math.ceil(w.height/this._source.tileSize)+1,W=Math.floor(B*D*5),tt=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,W):W;this._cache.setMaxSize(tt)},I.prototype.handleWrapJump=function(w){var B=Math.round((w-(this._prevLng===void 0?w:this._prevLng))/360);if(this._prevLng=w,B){var D={};for(var W in this._tiles){var tt=this._tiles[W];tt.tileID=tt.tileID.unwrapTo(tt.tileID.wrap+B),D[tt.tileID.key]=tt}for(var st in this._tiles=D,this._timers)clearTimeout(this._timers[st]),delete this._timers[st];for(var Ct in this._tiles)this._setTileReloadTimer(Ct,this._tiles[Ct])}},I.prototype.update=function(w){var B=this;if(this.transform=w,this._sourceLoaded&&!this._paused){var D;this.updateCacheSize(w),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?D=w.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Mr){return new t.OverscaledTileID(Mr.canonical.z,Mr.wrap,Mr.canonical.z,Mr.canonical.x,Mr.canonical.y)}):(D=w.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(D=D.filter(function(Mr){return B._source.hasTile(Mr)}))):D=[];var W=w.coveringZoomLevel(this._source),tt=Math.max(W-I.maxOverzooming,this._source.minzoom),st=Math.max(W+I.maxUnderzooming,this._source.minzoom),Ct=this._updateRetainedTiles(D,W);if(Rn(this._source.type)){for(var It={},Ut={},Zt=0,qt=Object.keys(Ct);Zt<qt.length;Zt+=1){var de=qt[Zt],me=Ct[de],je=this._tiles[de];if(je&&!(je.fadeEndTime&&je.fadeEndTime<=t.browser.now())){var Oe=this.findLoadedParent(me,tt);Oe&&(this._addTile(Oe.tileID),It[Oe.tileID.key]=Oe.tileID),Ut[de]=me}}for(var ke in this._retainLoadedChildren(Ut,W,st,Ct),It)Ct[ke]||(this._coveredTiles[ke]=!0,Ct[ke]=It[ke])}for(var qe in Ct)this._tiles[qe].clearFadeHold();for(var an=0,Xn=t.keysDifference(this._tiles,Ct);an<Xn.length;an+=1){var kn=Xn[an],fr=this._tiles[kn];fr.hasSymbolBuckets&&!fr.holdingForFade()?fr.setHoldDuration(this.map._fadeDuration):fr.hasSymbolBuckets&&!fr.symbolFadeFinished()||this._removeTile(kn)}this._updateLoadedParentTileCache()}},I.prototype.releaseSymbolFadeTiles=function(){for(var w in this._tiles)this._tiles[w].holdingForFade()&&this._removeTile(w)},I.prototype._updateRetainedTiles=function(w,B){for(var D={},W={},tt=Math.max(B-I.maxOverzooming,this._source.minzoom),st=Math.max(B+I.maxUnderzooming,this._source.minzoom),Ct={},It=0,Ut=w;It<Ut.length;It+=1){var Zt=Ut[It],qt=this._addTile(Zt);D[Zt.key]=Zt,qt.hasData()||B<this._source.maxzoom&&(Ct[Zt.key]=Zt)}this._retainLoadedChildren(Ct,B,st,D);for(var de=0,me=w;de<me.length;de+=1){var je=me[de],Oe=this._tiles[je.key];if(!Oe.hasData()){if(B+1>this._source.maxzoom){var ke=je.children(this._source.maxzoom)[0],qe=this.getTile(ke);if(qe&&qe.hasData()){D[ke.key]=ke;continue}}else{var an=je.children(this._source.maxzoom);if(D[an[0].key]&&D[an[1].key]&&D[an[2].key]&&D[an[3].key])continue}for(var Xn=Oe.wasRequested(),kn=je.overscaledZ-1;kn>=tt;--kn){var fr=je.scaledTo(kn);if(W[fr.key]||(W[fr.key]=!0,!(Oe=this.getTile(fr))&&Xn&&(Oe=this._addTile(fr)),Oe&&(D[fr.key]=fr,Xn=Oe.wasRequested(),Oe.hasData())))break}}}return D},I.prototype._updateLoadedParentTileCache=function(){for(var w in this._loadedParentTiles={},this._tiles){for(var B=[],D=void 0,W=this._tiles[w].tileID;W.overscaledZ>0;){if(W.key in this._loadedParentTiles){D=this._loadedParentTiles[W.key];break}B.push(W.key);var tt=W.scaledTo(W.overscaledZ-1);if(D=this._getLoadedTile(tt))break;W=tt}for(var st=0,Ct=B;st<Ct.length;st+=1)this._loadedParentTiles[Ct[st]]=D}},I.prototype._addTile=function(w){var B=this._tiles[w.key];if(B)return B;(B=this._cache.getAndRemove(w))&&(this._setTileReloadTimer(w.key,B),B.tileID=w,this._state.initializeTileState(B,this.map?this.map.painter:null),this._cacheTimers[w.key]&&(clearTimeout(this._cacheTimers[w.key]),delete this._cacheTimers[w.key],this._setTileReloadTimer(w.key,B)));var D=Boolean(B);return D||(B=new t.Tile(w,this._source.tileSize*w.overscaleFactor()),this._loadTile(B,this._tileLoaded.bind(this,B,w.key,B.state))),B?(B.uses++,this._tiles[w.key]=B,D||this._source.fire(new t.Event("dataloading",{tile:B,coord:B.tileID,dataType:"source"})),B):null},I.prototype._setTileReloadTimer=function(w,B){var D=this;w in this._timers&&(clearTimeout(this._timers[w]),delete this._timers[w]);var W=B.getExpiryTimeout();W&&(this._timers[w]=setTimeout(function(){D._reloadTile(w,"expired"),delete D._timers[w]},W))},I.prototype._removeTile=function(w){var B=this._tiles[w];B&&(B.uses--,delete this._tiles[w],this._timers[w]&&(clearTimeout(this._timers[w]),delete this._timers[w]),B.uses>0||(B.hasData()&&B.state!=="reloading"?this._cache.add(B.tileID,B,B.getExpiryTimeout()):(B.aborted=!0,this._abortTile(B),this._unloadTile(B))))},I.prototype.clearTiles=function(){for(var w in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(w);this._cache.reset()},I.prototype.tilesIn=function(w,B,D){var W=this,tt=[],st=this.transform;if(!st)return tt;for(var Ct=D?st.getCameraQueryGeometry(w):w,It=w.map(function(kn){return st.pointCoordinate(kn)}),Ut=Ct.map(function(kn){return st.pointCoordinate(kn)}),Zt=this.getIds(),qt=1/0,de=1/0,me=-1/0,je=-1/0,Oe=0,ke=Ut;Oe<ke.length;Oe+=1){var qe=ke[Oe];qt=Math.min(qt,qe.x),de=Math.min(de,qe.y),me=Math.max(me,qe.x),je=Math.max(je,qe.y)}for(var an=function(fr){var Mr=W._tiles[Zt[fr]];if(!Mr.holdingForFade()){var Qr=Mr.tileID,Zr=Math.pow(2,st.zoom-Mr.tileID.overscaledZ),Pi=B*Mr.queryPadding*t.EXTENT/Mr.tileSize/Zr,Ri=[Qr.getTilePoint(new t.MercatorCoordinate(qt,de)),Qr.getTilePoint(new t.MercatorCoordinate(me,je))];if(Ri[0].x-Pi<t.EXTENT&&Ri[0].y-Pi<t.EXTENT&&Ri[1].x+Pi>=0&&Ri[1].y+Pi>=0){var Ki=It.map(function(Oa){return Qr.getTilePoint(Oa)}),Xi=Ut.map(function(Oa){return Qr.getTilePoint(Oa)});tt.push({tile:Mr,tileID:Qr,queryGeometry:Ki,cameraQueryGeometry:Xi,scale:Zr})}}},Xn=0;Xn<Zt.length;Xn++)an(Xn);return tt},I.prototype.getVisibleCoordinates=function(w){for(var B=this,D=this.getRenderableIds(w).map(function(Ct){return B._tiles[Ct].tileID}),W=0,tt=D;W<tt.length;W+=1){var st=tt[W];st.posMatrix=this.transform.calculatePosMatrix(st.toUnwrapped())}return D},I.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Rn(this._source.type))for(var w in this._tiles){var B=this._tiles[w];if(B.fadeEndTime!==void 0&&B.fadeEndTime>=t.browser.now())return!0}return!1},I.prototype.setFeatureState=function(w,B,D){this._state.updateState(w=w||"_geojsonTileLayer",B,D)},I.prototype.removeFeatureState=function(w,B,D){this._state.removeFeatureState(w=w||"_geojsonTileLayer",B,D)},I.prototype.getFeatureState=function(w,B){return this._state.getState(w=w||"_geojsonTileLayer",B)},I.prototype.setDependencies=function(w,B,D){var W=this._tiles[w];W&&W.setDependencies(B,D)},I.prototype.reloadTilesForDependencies=function(w,B){for(var D in this._tiles)this._tiles[D].hasDependency(w,B)&&this._reloadTile(D,"reloading");this._cache.filter(function(W){return!W.hasDependency(w,B)})},I}(t.Evented);function Xe(j,I){var w=Math.abs(2*j.wrap)-+(j.wrap<0),B=Math.abs(2*I.wrap)-+(I.wrap<0);return j.overscaledZ-I.overscaledZ||B-w||I.canonical.y-j.canonical.y||I.canonical.x-j.canonical.x}function Rn(j){return j==="raster"||j==="image"||j==="video"}function tr(){return new t.window.Worker(xu.workerUrl)}be.maxOverzooming=10,be.maxUnderzooming=3;var Mn="mapboxgl_preloaded_worker_pool",vn=function(){this.active={}};vn.prototype.acquire=function(j){if(!this.workers)for(this.workers=[];this.workers.length<vn.workerCount;)this.workers.push(new tr);return this.active[j]=!0,this.workers.slice()},vn.prototype.release=function(j){delete this.active[j],this.numActive()===0&&(this.workers.forEach(function(I){I.terminate()}),this.workers=null)},vn.prototype.isPreloaded=function(){return!!this.active[Mn]},vn.prototype.numActive=function(){return Object.keys(this.active).length};var Ar,or=Math.floor(t.browser.hardwareConcurrency/2);function cn(){return Ar||(Ar=new vn),Ar}function Pr(j,I){var w={};for(var B in j)B!=="ref"&&(w[B]=j[B]);return t.refProperties.forEach(function(D){D in I&&(w[D]=I[D])}),w}function Sr(j){j=j.slice();for(var I=Object.create(null),w=0;w<j.length;w++)I[j[w].id]=j[w];for(var B=0;B<j.length;B++)"ref"in j[B]&&(j[B]=Pr(j[B],I[j[B].ref]));return j}vn.workerCount=Math.max(Math.min(or,6),1);var De={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function $e(j,I,w){w.push({command:De.addSource,args:[j,I[j]]})}function Ve(j,I,w){I.push({command:De.removeSource,args:[j]}),w[j]=!0}function En(j,I,w,B){Ve(j,w,B),$e(j,I,w)}function xn(j,I,w){var B;for(B in j[w])if(j[w].hasOwnProperty(B)&&B!=="data"&&!t.deepEqual(j[w][B],I[w][B]))return!1;for(B in I[w])if(I[w].hasOwnProperty(B)&&B!=="data"&&!t.deepEqual(j[w][B],I[w][B]))return!1;return!0}function Nn(j,I,w,B,D,W){var tt;for(tt in I=I||{},j=j||{})j.hasOwnProperty(tt)&&(t.deepEqual(j[tt],I[tt])||w.push({command:W,args:[B,tt,I[tt],D]}));for(tt in I)I.hasOwnProperty(tt)&&!j.hasOwnProperty(tt)&&(t.deepEqual(j[tt],I[tt])||w.push({command:W,args:[B,tt,I[tt],D]}))}function mn(j){return j.id}function Dn(j,I){return j[I.id]=I,j}var $n=function(I,w){this.reset(I,w)};$n.prototype.reset=function(j,I){this.points=j||[],this._distances=[0];for(var w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(I||0,.5*this.length),this.paddedLength=this.length-2*this.padding},$n.prototype.lerp=function(j){if(this.points.length===1)return this.points[0];j=t.clamp(j,0,1);for(var I=1,w=this._distances[I],B=j*this.paddedLength+this.padding;w<B&&I<this._distances.length;)w=this._distances[++I];var D=I-1,W=this._distances[D],tt=w-W,st=tt>0?(B-W)/tt:0;return this.points[D].mult(1-st).add(this.points[I].mult(st))};var Wn=function(I,w,B){var D=this.boxCells=[],W=this.circleCells=[];this.xCellCount=Math.ceil(I/B),this.yCellCount=Math.ceil(w/B);for(var tt=0;tt<this.xCellCount*this.yCellCount;tt++)D.push([]),W.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=I,this.height=w,this.xScale=this.xCellCount/I,this.yScale=this.yCellCount/w,this.boxUid=0,this.circleUid=0};function _n(j,I,w,B,D){var W=t.create();return I?(t.scale(W,W,[1/D,1/D,1]),w||t.rotateZ(W,W,B.angle)):t.multiply(W,B.labelPlaneMatrix,j),W}function xr(j,I,w,B,D){if(I){var W=t.clone(j);return t.scale(W,W,[D,D,1]),w||t.rotateZ(W,W,-B.angle),W}return B.glCoordMatrix}function mr(j,I){var w=[j.x,j.y,0,1];Do(w,w,I);var B=w[3];return{point:new t.Point(w[0]/B,w[1]/B),signedDistanceFromCamera:B}}function Fr(j,I){return .5+j/I*.5}function xi(j,I){var w=j[0]/j[3],B=j[1]/j[3];return w>=-I[0]&&w<=I[0]&&B>=-I[1]&&B<=I[1]}function Ta(j,I,w,B,D,W,tt,st){var Ct=B?j.textSizeData:j.iconSizeData,It=t.evaluateSizeForZoom(Ct,w.transform.zoom),Ut=[256/w.width*2+1,256/w.height*2+1],Zt=B?j.text.dynamicLayoutVertexArray:j.icon.dynamicLayoutVertexArray;Zt.clear();for(var qt=j.lineVertexArray,de=B?j.text.placedSymbolArray:j.icon.placedSymbolArray,me=w.transform.width/w.transform.height,je=!1,Oe=0;Oe<de.length;Oe++){var ke=de.get(Oe);if(ke.hidden||ke.writingMode===t.WritingMode.vertical&&!je)Jo(ke.numGlyphs,Zt);else{je=!1;var qe=[ke.anchorX,ke.anchorY,0,1];if(t.transformMat4(qe,qe,I),xi(qe,Ut)){var an=Fr(w.transform.cameraToCenterDistance,qe[3]),Xn=t.evaluateSizeForFeature(Ct,It,ke),kn=tt?Xn/an:Xn*an,fr=new t.Point(ke.anchorX,ke.anchorY),Mr=mr(fr,D).point,Qr={},Zr=Vo(ke,kn,!1,st,I,D,W,j.glyphOffsetArray,qt,Zt,Mr,fr,Qr,me);je=Zr.useVertical,(Zr.notEnoughRoom||je||Zr.needsFlipping&&Vo(ke,kn,!0,st,I,D,W,j.glyphOffsetArray,qt,Zt,Mr,fr,Qr,me).notEnoughRoom)&&Jo(ke.numGlyphs,Zt)}else Jo(ke.numGlyphs,Zt)}}B?j.text.dynamicLayoutVertexBuffer.updateData(Zt):j.icon.dynamicLayoutVertexBuffer.updateData(Zt)}function Aa(j,I,w,B,D,W,tt,st,Ct,It,Ut){var Zt=st.glyphStartIndex+st.numGlyphs,qt=st.lineStartIndex,de=st.lineStartIndex+st.lineLength,me=I.getoffsetX(st.glyphStartIndex),je=I.getoffsetX(Zt-1),Oe=ro(j*me,w,B,D,W,tt,st.segment,qt,de,Ct,It,Ut);if(!Oe)return null;var ke=ro(j*je,w,B,D,W,tt,st.segment,qt,de,Ct,It,Ut);return ke?{first:Oe,last:ke}:null}function to(j,I,w,B){return j===t.WritingMode.horizontal&&Math.abs(w.y-I.y)>Math.abs(w.x-I.x)*B?{useVertical:!0}:(j===t.WritingMode.vertical?I.y<w.y:I.x>w.x)?{needsFlipping:!0}:null}function Vo(j,I,w,B,D,W,tt,st,Ct,It,Ut,Zt,qt,de){var me,je=I/24,Oe=j.lineOffsetX*je,ke=j.lineOffsetY*je;if(j.numGlyphs>1){var qe=j.glyphStartIndex+j.numGlyphs,an=j.lineStartIndex,Xn=j.lineStartIndex+j.lineLength,kn=Aa(je,st,Oe,ke,w,Ut,Zt,j,Ct,W,qt);if(!kn)return{notEnoughRoom:!0};var fr=mr(kn.first.point,tt).point,Mr=mr(kn.last.point,tt).point;if(B&&!w){var Qr=to(j.writingMode,fr,Mr,de);if(Qr)return Qr}me=[kn.first];for(var Zr=j.glyphStartIndex+1;Zr<qe-1;Zr++)me.push(ro(je*st.getoffsetX(Zr),Oe,ke,w,Ut,Zt,j.segment,an,Xn,Ct,W,qt));me.push(kn.last)}else{if(B&&!w){var Pi=mr(Zt,D).point,Ri=j.lineStartIndex+j.segment+1,Ki=new t.Point(Ct.getx(Ri),Ct.gety(Ri)),Xi=mr(Ki,D),Oa=Xi.signedDistanceFromCamera>0?Xi.point:Ro(Zt,Ki,Pi,1,D),ja=to(j.writingMode,Pi,Oa,de);if(ja)return ja}var ki=ro(je*st.getoffsetX(j.glyphStartIndex),Oe,ke,w,Ut,Zt,j.segment,j.lineStartIndex,j.lineStartIndex+j.lineLength,Ct,W,qt);if(!ki)return{notEnoughRoom:!0};me=[ki]}for(var Sa=0,ga=me;Sa<ga.length;Sa+=1){var Yi=ga[Sa];t.addDynamicAttributes(It,Yi.point,Yi.angle)}return{}}function Ro(j,I,w,B,D){var W=mr(j.add(j.sub(I)._unit()),D).point,tt=w.sub(W);return w.add(tt._mult(B/tt.mag()))}function ro(j,I,w,B,D,W,tt,st,Ct,It,Ut,Zt){var qt=B?j-I:j+I,de=qt>0?1:-1,me=0;B&&(de*=-1,me=Math.PI),de<0&&(me+=Math.PI);for(var je=de>0?st+tt:st+tt+1,Oe=D,ke=D,qe=0,an=0,Xn=Math.abs(qt),kn=[];qe+an<=Xn;){if((je+=de)<st||je>=Ct)return null;if(ke=Oe,kn.push(Oe),(Oe=Zt[je])===void 0){var fr=new t.Point(It.getx(je),It.gety(je)),Mr=mr(fr,Ut);if(Mr.signedDistanceFromCamera>0)Oe=Zt[je]=Mr.point;else{var Qr=je-de;Oe=Ro(qe===0?W:new t.Point(It.getx(Qr),It.gety(Qr)),fr,ke,Xn-qe+1,Ut)}}qe+=an,an=ke.dist(Oe)}var Zr=(Xn-qe)/an,Pi=Oe.sub(ke),Ri=Pi.mult(Zr)._add(ke);Ri._add(Pi._unit()._perp()._mult(w*de));var Ki=me+Math.atan2(Oe.y-ke.y,Oe.x-ke.x);return kn.push(Ri),{point:Ri,angle:Ki,path:kn}}Wn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Wn.prototype.insert=function(j,I,w,B,D){this._forEachCell(I,w,B,D,this._insertBoxCell,this.boxUid++),this.boxKeys.push(j),this.bboxes.push(I),this.bboxes.push(w),this.bboxes.push(B),this.bboxes.push(D)},Wn.prototype.insertCircle=function(j,I,w,B){this._forEachCell(I-B,w-B,I+B,w+B,this._insertCircleCell,this.circleUid++),this.circleKeys.push(j),this.circles.push(I),this.circles.push(w),this.circles.push(B)},Wn.prototype._insertBoxCell=function(j,I,w,B,D,W){this.boxCells[D].push(W)},Wn.prototype._insertCircleCell=function(j,I,w,B,D,W){this.circleCells[D].push(W)},Wn.prototype._query=function(j,I,w,B,D,W){if(w<0||j>this.width||B<0||I>this.height)return!D&&[];var tt=[];if(j<=0&&I<=0&&this.width<=w&&this.height<=B){if(D)return!0;for(var st=0;st<this.boxKeys.length;st++)tt.push({key:this.boxKeys[st],x1:this.bboxes[4*st],y1:this.bboxes[4*st+1],x2:this.bboxes[4*st+2],y2:this.bboxes[4*st+3]});for(var Ct=0;Ct<this.circleKeys.length;Ct++){var It=this.circles[3*Ct],Ut=this.circles[3*Ct+1],Zt=this.circles[3*Ct+2];tt.push({key:this.circleKeys[Ct],x1:It-Zt,y1:Ut-Zt,x2:It+Zt,y2:Ut+Zt})}return W?tt.filter(W):tt}return this._forEachCell(j,I,w,B,this._queryCell,tt,{hitTest:D,seenUids:{box:{},circle:{}}},W),D?tt.length>0:tt},Wn.prototype._queryCircle=function(j,I,w,B,D){var W=j-w,tt=j+w,st=I-w,Ct=I+w;if(tt<0||W>this.width||Ct<0||st>this.height)return!B&&[];var It=[];return this._forEachCell(W,st,tt,Ct,this._queryCellCircle,It,{hitTest:B,circle:{x:j,y:I,radius:w},seenUids:{box:{},circle:{}}},D),B?It.length>0:It},Wn.prototype.query=function(j,I,w,B,D){return this._query(j,I,w,B,!1,D)},Wn.prototype.hitTest=function(j,I,w,B,D){return this._query(j,I,w,B,!0,D)},Wn.prototype.hitTestCircle=function(j,I,w,B){return this._queryCircle(j,I,w,!0,B)},Wn.prototype._queryCell=function(j,I,w,B,D,W,tt,st){var Ct=tt.seenUids,It=this.boxCells[D];if(It!==null)for(var Ut=this.bboxes,Zt=0,qt=It;Zt<qt.length;Zt+=1){var de=qt[Zt];if(!Ct.box[de]){Ct.box[de]=!0;var me=4*de;if(j<=Ut[me+2]&&I<=Ut[me+3]&&w>=Ut[me+0]&&B>=Ut[me+1]&&(!st||st(this.boxKeys[de]))){if(tt.hitTest)return W.push(!0),!0;W.push({key:this.boxKeys[de],x1:Ut[me],y1:Ut[me+1],x2:Ut[me+2],y2:Ut[me+3]})}}}var je=this.circleCells[D];if(je!==null)for(var Oe=this.circles,ke=0,qe=je;ke<qe.length;ke+=1){var an=qe[ke];if(!Ct.circle[an]){Ct.circle[an]=!0;var Xn=3*an;if(this._circleAndRectCollide(Oe[Xn],Oe[Xn+1],Oe[Xn+2],j,I,w,B)&&(!st||st(this.circleKeys[an]))){if(tt.hitTest)return W.push(!0),!0;var kn=Oe[Xn],fr=Oe[Xn+1],Mr=Oe[Xn+2];W.push({key:this.circleKeys[an],x1:kn-Mr,y1:fr-Mr,x2:kn+Mr,y2:fr+Mr})}}}},Wn.prototype._queryCellCircle=function(j,I,w,B,D,W,tt,st){var Ct=tt.circle,It=tt.seenUids,Ut=this.boxCells[D];if(Ut!==null)for(var Zt=this.bboxes,qt=0,de=Ut;qt<de.length;qt+=1){var me=de[qt];if(!It.box[me]){It.box[me]=!0;var je=4*me;if(this._circleAndRectCollide(Ct.x,Ct.y,Ct.radius,Zt[je+0],Zt[je+1],Zt[je+2],Zt[je+3])&&(!st||st(this.boxKeys[me])))return W.push(!0),!0}}var Oe=this.circleCells[D];if(Oe!==null)for(var ke=this.circles,qe=0,an=Oe;qe<an.length;qe+=1){var Xn=an[qe];if(!It.circle[Xn]){It.circle[Xn]=!0;var kn=3*Xn;if(this._circlesCollide(ke[kn],ke[kn+1],ke[kn+2],Ct.x,Ct.y,Ct.radius)&&(!st||st(this.circleKeys[Xn])))return W.push(!0),!0}}},Wn.prototype._forEachCell=function(j,I,w,B,D,W,tt,st){for(var Ct=this._convertToXCellCoord(j),It=this._convertToYCellCoord(I),Ut=this._convertToXCellCoord(w),Zt=this._convertToYCellCoord(B),qt=Ct;qt<=Ut;qt++)for(var de=It;de<=Zt;de++)if(D.call(this,j,I,w,B,this.xCellCount*de+qt,W,tt,st))return},Wn.prototype._convertToXCellCoord=function(j){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(j*this.xScale)))},Wn.prototype._convertToYCellCoord=function(j){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(j*this.yScale)))},Wn.prototype._circlesCollide=function(j,I,w,B,D,W){var tt=B-j,st=D-I,Ct=w+W;return Ct*Ct>tt*tt+st*st},Wn.prototype._circleAndRectCollide=function(j,I,w,B,D,W,tt){var st=(W-B)/2,Ct=Math.abs(j-(B+st));if(Ct>st+w)return!1;var It=(tt-D)/2,Ut=Math.abs(I-(D+It));if(Ut>It+w)return!1;if(Ct<=st||Ut<=It)return!0;var Zt=Ct-st,qt=Ut-It;return Zt*Zt+qt*qt<=w*w};var vs=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Jo(j,I){for(var w=0;w<j;w++){var B=I.length;I.resize(B+4),I.float32.set(vs,3*B)}}function Do(j,I,w){var B=I[0],D=I[1];return j[0]=w[0]*B+w[4]*D+w[12],j[1]=w[1]*B+w[5]*D+w[13],j[3]=w[3]*B+w[7]*D+w[15],j}var xs=function(I,w,B){w===void 0&&(w=new Wn(I.width+200,I.height+200,25)),B===void 0&&(B=new Wn(I.width+200,I.height+200,25)),this.transform=I,this.grid=w,this.ignoredGrid=B,this.pitchfactor=Math.cos(I._pitch)*I.cameraToCenterDistance,this.screenRightBoundary=I.width+100,this.screenBottomBoundary=I.height+100,this.gridRightBoundary=I.width+200,this.gridBottomBoundary=I.height+200};function Ra(j,I,w){return I*(t.EXTENT/(j.tileSize*Math.pow(2,w-j.tileID.overscaledZ)))}xs.prototype.placeCollisionBox=function(j,I,w,B,D){var W=this.projectAndGetPerspectiveRatio(B,j.anchorPointX,j.anchorPointY),tt=w*W.perspectiveRatio,st=j.x1*tt+W.point.x,Ct=j.y1*tt+W.point.y,It=j.x2*tt+W.point.x,Ut=j.y2*tt+W.point.y;return!this.isInsideGrid(st,Ct,It,Ut)||!I&&this.grid.hitTest(st,Ct,It,Ut,D)?{box:[],offscreen:!1}:{box:[st,Ct,It,Ut],offscreen:this.isOffscreen(st,Ct,It,Ut)}},xs.prototype.placeCollisionCircles=function(j,I,w,B,D,W,tt,st,Ct,It,Ut,Zt,qt){var de=[],me=new t.Point(I.anchorX,I.anchorY),je=mr(me,W),Oe=Fr(this.transform.cameraToCenterDistance,je.signedDistanceFromCamera),ke=(It?D/Oe:D*Oe)/t.ONE_EM,qe=mr(me,tt).point,an=Aa(ke,B,I.lineOffsetX*ke,I.lineOffsetY*ke,!1,qe,me,I,w,tt,{}),Xn=!1,kn=!1,fr=!0;if(an){for(var Mr=.5*Zt*Oe+qt,Qr=new t.Point(-100,-100),Zr=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),Pi=new $n,Ri=an.first,Ki=an.last,Xi=[],Oa=Ri.path.length-1;Oa>=1;Oa--)Xi.push(Ri.path[Oa]);for(var ja=1;ja<Ki.path.length;ja++)Xi.push(Ki.path[ja]);var ki=2.5*Mr;if(st){var Sa=Xi.map(function(ac){return mr(ac,st)});Xi=Sa.some(function(ac){return ac.signedDistanceFromCamera<=0})?[]:Sa.map(function(ac){return ac.point})}var ga=[];if(Xi.length>0){for(var Yi=Xi[0].clone(),_a=Xi[0].clone(),ra=1;ra<Xi.length;ra++)Yi.x=Math.min(Yi.x,Xi[ra].x),Yi.y=Math.min(Yi.y,Xi[ra].y),_a.x=Math.max(_a.x,Xi[ra].x),_a.y=Math.max(_a.y,Xi[ra].y);ga=Yi.x>=Qr.x&&_a.x<=Zr.x&&Yi.y>=Qr.y&&_a.y<=Zr.y?[Xi]:_a.x<Qr.x||Yi.x>Zr.x||_a.y<Qr.y||Yi.y>Zr.y?[]:t.clipLine([Xi],Qr.x,Qr.y,Zr.x,Zr.y)}for(var La=0,za=ga;La<za.length;La+=1){var Ps;Pi.reset(za[La],.25*Mr),Ps=Pi.length<=.5*Mr?1:Math.ceil(Pi.paddedLength/ki)+1;for(var ls=0;ls<Ps;ls++){var Ts=ls/Math.max(Ps-1,1),ms=Pi.lerp(Ts),nu=ms.x+100,Uu=ms.y+100;de.push(nu,Uu,Mr,0);var qu=nu-Mr,_c=Uu-Mr,Ic=nu+Mr,wl=Uu+Mr;if(fr=fr&&this.isOffscreen(qu,_c,Ic,wl),kn=kn||this.isInsideGrid(qu,_c,Ic,wl),!j&&this.grid.hitTestCircle(nu,Uu,Mr,Ut)&&(Xn=!0,!Ct))return{circles:[],offscreen:!1,collisionDetected:Xn}}}}return{circles:!Ct&&Xn||!kn?[]:de,offscreen:fr,collisionDetected:Xn}},xs.prototype.queryRenderedSymbols=function(j){if(j.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var I=[],w=1/0,B=1/0,D=-1/0,W=-1/0,tt=0,st=j;tt<st.length;tt+=1){var Ct=st[tt],It=new t.Point(Ct.x+100,Ct.y+100);w=Math.min(w,It.x),B=Math.min(B,It.y),D=Math.max(D,It.x),W=Math.max(W,It.y),I.push(It)}for(var Ut={},Zt={},qt=0,de=this.grid.query(w,B,D,W).concat(this.ignoredGrid.query(w,B,D,W));qt<de.length;qt+=1){var me=de[qt],je=me.key;if(Ut[je.bucketInstanceId]===void 0&&(Ut[je.bucketInstanceId]={}),!Ut[je.bucketInstanceId][je.featureIndex]){var Oe=[new t.Point(me.x1,me.y1),new t.Point(me.x2,me.y1),new t.Point(me.x2,me.y2),new t.Point(me.x1,me.y2)];t.polygonIntersectsPolygon(I,Oe)&&(Ut[je.bucketInstanceId][je.featureIndex]=!0,Zt[je.bucketInstanceId]===void 0&&(Zt[je.bucketInstanceId]=[]),Zt[je.bucketInstanceId].push(je.featureIndex))}}return Zt},xs.prototype.insertCollisionBox=function(j,I,w,B,D){(I?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:B,collisionGroupID:D},j[0],j[1],j[2],j[3])},xs.prototype.insertCollisionCircles=function(j,I,w,B,D){for(var W=I?this.ignoredGrid:this.grid,tt={bucketInstanceId:w,featureIndex:B,collisionGroupID:D},st=0;st<j.length;st+=4)W.insertCircle(tt,j[st],j[st+1],j[st+2])},xs.prototype.projectAndGetPerspectiveRatio=function(j,I,w){var B=[I,w,0,1];return Do(B,B,j),{point:new t.Point((B[0]/B[3]+1)/2*this.transform.width+100,(-B[1]/B[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B[3]*.5}},xs.prototype.isOffscreen=function(j,I,w,B){return w<100||j>=this.screenRightBoundary||B<100||I>this.screenBottomBoundary},xs.prototype.isInsideGrid=function(j,I,w,B){return w>=0&&j<this.gridRightBoundary&&B>=0&&I<this.gridBottomBoundary},xs.prototype.getViewportMatrix=function(){var j=t.identity([]);return t.translate(j,j,[-100,-100,0]),j};var $o=function(I,w,B,D){this.opacity=I?Math.max(0,Math.min(1,I.opacity+(I.placed?w:-w))):D&&B?1:0,this.placed=B};$o.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var jo=function(I,w,B,D,W){this.text=new $o(I?I.text:null,w,B,W),this.icon=new $o(I?I.icon:null,w,D,W)};jo.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Js=function(I,w,B){this.text=I,this.icon=w,this.skipFade=B},io=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},so=function(I,w,B,D,W){this.bucketInstanceId=I,this.featureIndex=w,this.sourceLayerIndex=B,this.bucketIndex=D,this.tileID=W},Gs=function(I){this.crossSourceCollisions=I,this.maxGroupID=0,this.collisionGroups={}};function Ne(j,I,w,B,D){var W=t.getAnchorAlignment(j),tt=-(W.horizontalAlign-.5)*I,st=-(W.verticalAlign-.5)*w,Ct=t.evaluateVariableOffset(j,B);return new t.Point(tt+Ct[0]*D,st+Ct[1]*D)}function se(j,I,w,B,D,W){var tt=j.x1,st=j.x2,Ct=j.y1,It=j.y2,Ut=j.anchorPointX,Zt=j.anchorPointY,qt=new t.Point(I,w);return B&&qt._rotate(D?W:-W),{x1:tt+qt.x,y1:Ct+qt.y,x2:st+qt.x,y2:It+qt.y,anchorPointX:Ut,anchorPointY:Zt}}Gs.prototype.get=function(j){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[j]){var I=++this.maxGroupID;this.collisionGroups[j]={ID:I,predicate:function(B){return B.collisionGroupID===I}}}return this.collisionGroups[j]};var Yt=function(I,w,B,D){this.transform=I.clone(),this.collisionIndex=new xs(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=w,this.retainedQueryData={},this.collisionGroups=new Gs(B),this.collisionCircleArrays={},this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}};function Ee(j,I,w,B,D){j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0)}Yt.prototype.getBucketParts=function(j,I,w,B){var D=w.getBucket(I),W=w.latestFeatureIndex;if(D&&W&&I.id===D.layerIds[0]){var tt=w.collisionBoxArray,st=D.layers[0].layout,Ct=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),It=w.tileSize/t.EXTENT,Ut=this.transform.calculatePosMatrix(w.tileID.toUnwrapped()),Zt=st.get("text-pitch-alignment")==="map",qt=st.get("text-rotation-alignment")==="map",de=Ra(w,1,this.transform.zoom),me=_n(Ut,Zt,qt,this.transform,de),je=null;if(Zt){var Oe=xr(Ut,Zt,qt,this.transform,de);je=t.multiply([],this.transform.labelPlaneMatrix,Oe)}this.retainedQueryData[D.bucketInstanceId]=new so(D.bucketInstanceId,W,D.sourceLayerIndex,D.index,w.tileID);var ke={bucket:D,layout:st,posMatrix:Ut,textLabelPlaneMatrix:me,labelToScreenMatrix:je,scale:Ct,textPixelRatio:It,holdingForFade:w.holdingForFade(),collisionBoxArray:tt,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(D.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(D.sourceID)};if(B)for(var qe=0,an=D.sortKeyRanges;qe<an.length;qe+=1){var Xn=an[qe];j.push({sortKey:Xn.sortKey,symbolInstanceStart:Xn.symbolInstanceStart,symbolInstanceEnd:Xn.symbolInstanceEnd,parameters:ke})}else j.push({symbolInstanceStart:0,symbolInstanceEnd:D.symbolInstances.length,parameters:ke})}},Yt.prototype.attemptAnchorPlacement=function(j,I,w,B,D,W,tt,st,Ct,It,Ut,Zt,qt,de,me){var je,Oe=[Zt.textOffset0,Zt.textOffset1],ke=Ne(j,w,B,Oe,D),qe=this.collisionIndex.placeCollisionBox(se(I,ke.x,ke.y,W,tt,this.transform.angle),Ut,st,Ct,It.predicate);if(!me||this.collisionIndex.placeCollisionBox(se(me,ke.x,ke.y,W,tt,this.transform.angle),Ut,st,Ct,It.predicate).box.length!==0)return qe.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Zt.crossTileID]&&this.prevPlacement.placements[Zt.crossTileID]&&this.prevPlacement.placements[Zt.crossTileID].text&&(je=this.prevPlacement.variableOffsets[Zt.crossTileID].anchor),this.variableOffsets[Zt.crossTileID]={textOffset:Oe,width:w,height:B,anchor:j,textBoxScale:D,prevAnchor:je},this.markUsedJustification(qt,j,Zt,de),qt.allowVerticalPlacement&&(this.markUsedOrientation(qt,de,Zt),this.placedOrientations[Zt.crossTileID]=de),{shift:ke,placedGlyphBoxes:qe}):void 0},Yt.prototype.placeLayerBucketPart=function(j,I,w){var B=this,D=j.parameters,W=D.bucket,tt=D.layout,st=D.posMatrix,Ct=D.textLabelPlaneMatrix,It=D.labelToScreenMatrix,Ut=D.textPixelRatio,Zt=D.holdingForFade,qt=D.collisionBoxArray,de=D.partiallyEvaluatedTextSize,me=D.collisionGroup,je=tt.get("text-optional"),Oe=tt.get("icon-optional"),ke=tt.get("text-allow-overlap"),qe=tt.get("icon-allow-overlap"),an=tt.get("text-rotation-alignment")==="map",Xn=tt.get("text-pitch-alignment")==="map",kn=tt.get("icon-text-fit")!=="none",fr=tt.get("symbol-z-order")==="viewport-y",Mr=ke&&(qe||!W.hasIconData()||Oe),Qr=qe&&(ke||!W.hasTextData()||je);!W.collisionArrays&&qt&&W.deserializeCollisionBoxes(qt);var Zr=function(ki,Sa){if(!I[ki.crossTileID])if(Zt)B.placements[ki.crossTileID]=new Js(!1,!1,!1);else{var ga,Yi=!1,_a=!1,ra=!0,La=null,za={box:null,offscreen:null},Ps={box:null,offscreen:null},ls=null,Ts=null,ms=0,nu=0,Uu=0;Sa.textFeatureIndex?ms=Sa.textFeatureIndex:ki.useRuntimeCollisionCircles&&(ms=ki.featureIndex),Sa.verticalTextFeatureIndex&&(nu=Sa.verticalTextFeatureIndex);var qu=Sa.textBox;if(qu){var _c=function(Eu){var Fl=t.WritingMode.horizontal;if(W.allowVerticalPlacement&&!Eu&&B.prevPlacement){var ll=B.prevPlacement.placedOrientations[ki.crossTileID];ll&&(B.placedOrientations[ki.crossTileID]=ll,B.markUsedOrientation(W,Fl=ll,ki))}return Fl},Ic=function(Eu,Fl){if(W.allowVerticalPlacement&&ki.numVerticalGlyphVertices>0&&Sa.verticalTextBox)for(var ll=0,Jl=W.writingModes;ll<Jl.length&&(Jl[ll]===t.WritingMode.vertical?(za=Fl(),Ps=za):za=Eu(),!(za&&za.box&&za.box.length));ll+=1);else za=Eu()};if(tt.get("text-variable-anchor")){var wl=tt.get("text-variable-anchor");if(B.prevPlacement&&B.prevPlacement.variableOffsets[ki.crossTileID]){var ac=B.prevPlacement.variableOffsets[ki.crossTileID];wl.indexOf(ac.anchor)>0&&(wl=wl.filter(function(bu){return bu!==ac.anchor})).unshift(ac.anchor)}var Gc=function(Eu,Fl,ll){for(var Jl=Eu.x2-Eu.x1,Nc=Eu.y2-Eu.y1,Zc=ki.textBoxScale,Fc=kn&&!qe?Fl:null,bl={box:[],offscreen:!1},rf=ke?2*wl.length:wl.length,zc=0;zc<rf;++zc){var oc=B.attemptAnchorPlacement(wl[zc%wl.length],Eu,Jl,Nc,Zc,an,Xn,Ut,st,me,zc>=wl.length,ki,W,ll,Fc);if(oc&&(bl=oc.placedGlyphBoxes)&&bl.box&&bl.box.length){Yi=!0,La=oc.shift;break}}return bl};Ic(function(){return Gc(qu,Sa.iconBox,t.WritingMode.horizontal)},function(){var bu=Sa.verticalTextBox;return W.allowVerticalPlacement&&!(za&&za.box&&za.box.length)&&ki.numVerticalGlyphVertices>0&&bu?Gc(bu,Sa.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),za&&(Yi=za.box,ra=za.offscreen);var ef=_c(za&&za.box);if(!Yi&&B.prevPlacement){var Bc=B.prevPlacement.variableOffsets[ki.crossTileID];Bc&&(B.variableOffsets[ki.crossTileID]=Bc,B.markUsedJustification(W,Bc.anchor,ki,ef))}}else{var Hc=function(Eu,Fl){var ll=B.collisionIndex.placeCollisionBox(Eu,ke,Ut,st,me.predicate);return ll&&ll.box&&ll.box.length&&(B.markUsedOrientation(W,Fl,ki),B.placedOrientations[ki.crossTileID]=Fl),ll};Ic(function(){return Hc(qu,t.WritingMode.horizontal)},function(){var bu=Sa.verticalTextBox;return W.allowVerticalPlacement&&ki.numVerticalGlyphVertices>0&&bu?Hc(bu,t.WritingMode.vertical):{box:null,offscreen:null}}),_c(za&&za.box&&za.box.length)}}if(Yi=(ga=za)&&ga.box&&ga.box.length>0,ra=ga&&ga.offscreen,ki.useRuntimeCollisionCircles){var nf=W.text.placedSymbolArray.get(ki.centerJustifiedTextSymbolIndex),Cc=t.evaluateSizeForFeature(W.textSizeData,de,nf),Yc=tt.get("text-padding");ls=B.collisionIndex.placeCollisionCircles(ke,nf,W.lineVertexArray,W.glyphOffsetArray,Cc,st,Ct,It,w,Xn,me.predicate,ki.collisionCircleDiameter,Yc),Yi=ke||ls.circles.length>0&&!ls.collisionDetected,ra=ra&&ls.offscreen}if(Sa.iconFeatureIndex&&(Uu=Sa.iconFeatureIndex),Sa.iconBox){var gc=function(Eu){var Fl=kn&&La?se(Eu,La.x,La.y,an,Xn,B.transform.angle):Eu;return B.collisionIndex.placeCollisionBox(Fl,qe,Ut,st,me.predicate)};_a=Ps&&Ps.box&&Ps.box.length&&Sa.verticalIconBox?(Ts=gc(Sa.verticalIconBox)).box.length>0:(Ts=gc(Sa.iconBox)).box.length>0,ra=ra&&Ts.offscreen}var lu=je||ki.numHorizontalGlyphVertices===0&&ki.numVerticalGlyphVertices===0,cu=Oe||ki.numIconVertices===0;if(lu||cu?cu?lu||(_a=_a&&Yi):Yi=_a&&Yi:_a=Yi=_a&&Yi,Yi&&ga&&ga.box&&B.collisionIndex.insertCollisionBox(ga.box,tt.get("text-ignore-placement"),W.bucketInstanceId,Ps&&Ps.box&&nu?nu:ms,me.ID),_a&&Ts&&B.collisionIndex.insertCollisionBox(Ts.box,tt.get("icon-ignore-placement"),W.bucketInstanceId,Uu,me.ID),ls&&(Yi&&B.collisionIndex.insertCollisionCircles(ls.circles,tt.get("text-ignore-placement"),W.bucketInstanceId,ms,me.ID),w)){var Hl=W.bucketInstanceId,ou=B.collisionCircleArrays[Hl];ou===void 0&&(ou=B.collisionCircleArrays[Hl]=new io);for(var fu=0;fu<ls.circles.length;fu+=4)ou.circles.push(ls.circles[fu+0]),ou.circles.push(ls.circles[fu+1]),ou.circles.push(ls.circles[fu+2]),ou.circles.push(ls.collisionDetected?1:0)}B.placements[ki.crossTileID]=new Js(Yi||Mr,_a||Qr,ra||W.justReloaded),I[ki.crossTileID]=!0}};if(fr)for(var Pi=W.getSortedSymbolIndexes(this.transform.angle),Ri=Pi.length-1;Ri>=0;--Ri){var Ki=Pi[Ri];Zr(W.symbolInstances.get(Ki),W.collisionArrays[Ki])}else for(var Xi=j.symbolInstanceStart;Xi<j.symbolInstanceEnd;Xi++)Zr(W.symbolInstances.get(Xi),W.collisionArrays[Xi]);if(w&&W.bucketInstanceId in this.collisionCircleArrays){var Oa=this.collisionCircleArrays[W.bucketInstanceId];t.invert(Oa.invProjMatrix,st),Oa.viewportMatrix=this.collisionIndex.getViewportMatrix()}W.justReloaded=!1},Yt.prototype.markUsedJustification=function(j,I,w,B){var D;D=B===t.WritingMode.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(I)];for(var W=0,tt=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];W<tt.length;W+=1){var st=tt[W];st>=0&&(j.text.placedSymbolArray.get(st).crossTileID=D>=0&&st!==D?0:w.crossTileID)}},Yt.prototype.markUsedOrientation=function(j,I,w){for(var B=I===t.WritingMode.horizontal||I===t.WritingMode.horizontalOnly?I:0,D=I===t.WritingMode.vertical?I:0,W=0,tt=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];W<tt.length;W+=1)j.text.placedSymbolArray.get(tt[W]).placedOrientation=B;w.verticalPlacedTextSymbolIndex&&(j.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=D)},Yt.prototype.commit=function(j){this.commitTime=j,this.zoomAtLastRecencyCheck=this.transform.zoom;var I=this.prevPlacement,w=!1;this.prevZoomAdjustment=I?I.zoomAdjustment(this.transform.zoom):0;var B=I?I.symbolFadeChange(j):1,D=I?I.opacities:{},W=I?I.variableOffsets:{},tt=I?I.placedOrientations:{};for(var st in this.placements){var Ct=this.placements[st],It=D[st];It?(this.opacities[st]=new jo(It,B,Ct.text,Ct.icon),w=w||Ct.text!==It.text.placed||Ct.icon!==It.icon.placed):(this.opacities[st]=new jo(null,B,Ct.text,Ct.icon,Ct.skipFade),w=w||Ct.text||Ct.icon)}for(var Ut in D){var Zt=D[Ut];if(!this.opacities[Ut]){var qt=new jo(Zt,B,!1,!1);qt.isHidden()||(this.opacities[Ut]=qt,w=w||Zt.text.placed||Zt.icon.placed)}}for(var de in W)this.variableOffsets[de]||!this.opacities[de]||this.opacities[de].isHidden()||(this.variableOffsets[de]=W[de]);for(var me in tt)this.placedOrientations[me]||!this.opacities[me]||this.opacities[me].isHidden()||(this.placedOrientations[me]=tt[me]);w?this.lastPlacementChangeTime=j:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=I?I.lastPlacementChangeTime:j)},Yt.prototype.updateLayerOpacities=function(j,I){for(var w={},B=0,D=I;B<D.length;B+=1){var W=D[B],tt=W.getBucket(j);tt&&W.latestFeatureIndex&&j.id===tt.layerIds[0]&&this.updateBucketOpacities(tt,w,W.collisionBoxArray)}},Yt.prototype.updateBucketOpacities=function(j,I,w){var B=this;j.hasTextData()&&j.text.opacityVertexArray.clear(),j.hasIconData()&&j.icon.opacityVertexArray.clear(),j.hasIconCollisionBoxData()&&j.iconCollisionBox.collisionVertexArray.clear(),j.hasTextCollisionBoxData()&&j.textCollisionBox.collisionVertexArray.clear();var D=j.layers[0].layout,W=new jo(null,0,!1,!1,!0),tt=D.get("text-allow-overlap"),st=D.get("icon-allow-overlap"),Ct=D.get("text-variable-anchor"),It=D.get("text-rotation-alignment")==="map",Ut=D.get("text-pitch-alignment")==="map",Zt=D.get("icon-text-fit")!=="none",qt=new jo(null,0,tt&&(st||!j.hasIconData()||D.get("icon-optional")),st&&(tt||!j.hasTextData()||D.get("text-optional")),!0);!j.collisionArrays&&w&&(j.hasIconCollisionBoxData()||j.hasTextCollisionBoxData())&&j.deserializeCollisionBoxes(w);for(var de=function(qe,an,Xn){for(var kn=0;kn<an/4;kn++)qe.opacityVertexArray.emplaceBack(Xn)},me=function(qe){var an=j.symbolInstances.get(qe),Xn=an.numHorizontalGlyphVertices,kn=an.numVerticalGlyphVertices,fr=an.crossTileID,Mr=B.opacities[fr];I[fr]?Mr=W:Mr||(B.opacities[fr]=Mr=qt),I[fr]=!0;var Qr=an.numIconVertices>0,Zr=B.placedOrientations[an.crossTileID],Pi=Zr===t.WritingMode.vertical,Ri=Zr===t.WritingMode.horizontal||Zr===t.WritingMode.horizontalOnly;if(Xn>0||kn>0){var Ki=Vi(Mr.text);de(j.text,Xn,Pi?sa:Ki),de(j.text,kn,Ri?sa:Ki);var Xi=Mr.text.isHidden();[an.rightJustifiedTextSymbolIndex,an.centerJustifiedTextSymbolIndex,an.leftJustifiedTextSymbolIndex].forEach(function(za){za>=0&&(j.text.placedSymbolArray.get(za).hidden=Xi||Pi?1:0)}),an.verticalPlacedTextSymbolIndex>=0&&(j.text.placedSymbolArray.get(an.verticalPlacedTextSymbolIndex).hidden=Xi||Ri?1:0);var Oa=B.variableOffsets[an.crossTileID];Oa&&B.markUsedJustification(j,Oa.anchor,an,Zr);var ja=B.placedOrientations[an.crossTileID];ja&&(B.markUsedJustification(j,"left",an,ja),B.markUsedOrientation(j,ja,an))}if(Qr){var ki=Vi(Mr.icon),Sa=!(Zt&&an.verticalPlacedIconSymbolIndex&&Pi);an.placedIconSymbolIndex>=0&&(de(j.icon,an.numIconVertices,Sa?ki:sa),j.icon.placedSymbolArray.get(an.placedIconSymbolIndex).hidden=Mr.icon.isHidden()),an.verticalPlacedIconSymbolIndex>=0&&(de(j.icon,an.numVerticalIconVertices,Sa?sa:ki),j.icon.placedSymbolArray.get(an.verticalPlacedIconSymbolIndex).hidden=Mr.icon.isHidden())}if(j.hasIconCollisionBoxData()||j.hasTextCollisionBoxData()){var ga=j.collisionArrays[qe];if(ga){var Yi=new t.Point(0,0);if(ga.textBox||ga.verticalTextBox){var _a=!0;if(Ct){var ra=B.variableOffsets[fr];ra?(Yi=Ne(ra.anchor,ra.width,ra.height,ra.textOffset,ra.textBoxScale),It&&Yi._rotate(Ut?B.transform.angle:-B.transform.angle)):_a=!1}ga.textBox&&Ee(j.textCollisionBox.collisionVertexArray,Mr.text.placed,!_a||Pi,Yi.x,Yi.y),ga.verticalTextBox&&Ee(j.textCollisionBox.collisionVertexArray,Mr.text.placed,!_a||Ri,Yi.x,Yi.y)}var La=Boolean(!Ri&&ga.verticalIconBox);ga.iconBox&&Ee(j.iconCollisionBox.collisionVertexArray,Mr.icon.placed,La,Zt?Yi.x:0,Zt?Yi.y:0),ga.verticalIconBox&&Ee(j.iconCollisionBox.collisionVertexArray,Mr.icon.placed,!La,Zt?Yi.x:0,Zt?Yi.y:0)}}},je=0;je<j.symbolInstances.length;je++)me(je);if(j.sortFeatures(this.transform.angle),this.retainedQueryData[j.bucketInstanceId]&&(this.retainedQueryData[j.bucketInstanceId].featureSortOrder=j.featureSortOrder),j.hasTextData()&&j.text.opacityVertexBuffer&&j.text.opacityVertexBuffer.updateData(j.text.opacityVertexArray),j.hasIconData()&&j.icon.opacityVertexBuffer&&j.icon.opacityVertexBuffer.updateData(j.icon.opacityVertexArray),j.hasIconCollisionBoxData()&&j.iconCollisionBox.collisionVertexBuffer&&j.iconCollisionBox.collisionVertexBuffer.updateData(j.iconCollisionBox.collisionVertexArray),j.hasTextCollisionBoxData()&&j.textCollisionBox.collisionVertexBuffer&&j.textCollisionBox.collisionVertexBuffer.updateData(j.textCollisionBox.collisionVertexArray),j.bucketInstanceId in this.collisionCircleArrays){var Oe=this.collisionCircleArrays[j.bucketInstanceId];j.placementInvProjMatrix=Oe.invProjMatrix,j.placementViewportMatrix=Oe.viewportMatrix,j.collisionCircleArray=Oe.circles,delete this.collisionCircleArrays[j.bucketInstanceId]}},Yt.prototype.symbolFadeChange=function(j){return this.fadeDuration===0?1:(j-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Yt.prototype.zoomAdjustment=function(j){return Math.max(0,(this.transform.zoom-j)/1.5)},Yt.prototype.hasTransitions=function(j){return this.stale||j-this.lastPlacementChangeTime<this.fadeDuration},Yt.prototype.stillRecent=function(j,I){var w=this.zoomAtLastRecencyCheck===I?1-this.zoomAdjustment(I):1;return this.zoomAtLastRecencyCheck=I,this.commitTime+this.fadeDuration*w>j},Yt.prototype.setStale=function(){this.stale=!0};var sn=Math.pow(2,25),Fn=Math.pow(2,24),rr=Math.pow(2,17),qn=Math.pow(2,16),$r=Math.pow(2,9),bi=Math.pow(2,8),wi=Math.pow(2,1);function Vi(j){if(j.opacity===0&&!j.placed)return 0;if(j.opacity===1&&j.placed)return 4294967295;var I=j.placed?1:0,w=Math.floor(127*j.opacity);return w*sn+I*Fn+w*rr+I*qn+w*$r+I*bi+w*wi+I}var sa=0,$a=function(I){this._sortAcrossTiles=I.layout.get("symbol-z-order")!=="viewport-y"&&I.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};$a.prototype.continuePlacement=function(j,I,w,B,D){for(var W=this._bucketParts;this._currentTileIndex<j.length;)if(I.getBucketParts(W,B,j[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,D())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,W.sort(function(tt,st){return tt.sortKey-st.sortKey}));this._currentPartIndex<W.length;)if(I.placeLayerBucketPart(W[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,D())return!0;return!1};var Ca=function(I,w,B,D,W,tt,st){this.placement=new Yt(I,W,tt,st),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=B,this._showCollisionBoxes=D,this._done=!1};Ca.prototype.isDone=function(){return this._done},Ca.prototype.continuePlacement=function(j,I,w){for(var B=this,D=t.browser.now(),W=function(){var It=t.browser.now()-D;return!B._forceFullPlacement&&It>2};this._currentPlacementIndex>=0;){var tt=I[j[this._currentPlacementIndex]],st=this.placement.collisionIndex.transform.zoom;if(tt.type==="symbol"&&(!tt.minzoom||tt.minzoom<=st)&&(!tt.maxzoom||tt.maxzoom>st)){if(this._inProgressLayer||(this._inProgressLayer=new $a(tt)),this._inProgressLayer.continuePlacement(w[tt.source],this.placement,this._showCollisionBoxes,tt,W))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ca.prototype.commit=function(j){return this.placement.commit(j),this.placement};var _o=512/t.EXTENT/2,Fa=function(I,w,B){this.tileID=I,this.indexedSymbolInstances={},this.bucketInstanceId=B;for(var D=0;D<w.length;D++){var W=w.get(D),tt=W.key;this.indexedSymbolInstances[tt]||(this.indexedSymbolInstances[tt]=[]),this.indexedSymbolInstances[tt].push({crossTileID:W.crossTileID,coord:this.getScaledCoordinates(W,I)})}};Fa.prototype.getScaledCoordinates=function(j,I){var w=_o/Math.pow(2,I.canonical.z-this.tileID.canonical.z);return{x:Math.floor((I.canonical.x*t.EXTENT+j.anchorX)*w),y:Math.floor((I.canonical.y*t.EXTENT+j.anchorY)*w)}},Fa.prototype.findMatches=function(j,I,w){for(var B=this.tileID.canonical.z<I.canonical.z?1:Math.pow(2,this.tileID.canonical.z-I.canonical.z),D=0;D<j.length;D++){var W=j.get(D);if(!W.crossTileID){var tt=this.indexedSymbolInstances[W.key];if(tt)for(var st=this.getScaledCoordinates(W,I),Ct=0,It=tt;Ct<It.length;Ct+=1){var Ut=It[Ct];if(Math.abs(Ut.coord.x-st.x)<=B&&Math.abs(Ut.coord.y-st.y)<=B&&!w[Ut.crossTileID]){w[Ut.crossTileID]=!0,W.crossTileID=Ut.crossTileID;break}}}}};var uo=function(){this.maxCrossTileID=0};uo.prototype.generate=function(){return++this.maxCrossTileID};var vo=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};vo.prototype.handleWrapJump=function(j){var I=Math.round((j-this.lng)/360);if(I!==0)for(var w in this.indexes){var B=this.indexes[w],D={};for(var W in B){var tt=B[W];tt.tileID=tt.tileID.unwrapTo(tt.tileID.wrap+I),D[tt.tileID.key]=tt}this.indexes[w]=D}this.lng=j},vo.prototype.addBucket=function(j,I,w){if(this.indexes[j.overscaledZ]&&this.indexes[j.overscaledZ][j.key]){if(this.indexes[j.overscaledZ][j.key].bucketInstanceId===I.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(j.overscaledZ,this.indexes[j.overscaledZ][j.key])}for(var B=0;B<I.symbolInstances.length;B++)I.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[j.overscaledZ]||(this.usedCrossTileIDs[j.overscaledZ]={});var D=this.usedCrossTileIDs[j.overscaledZ];for(var W in this.indexes){var tt=this.indexes[W];if(Number(W)>j.overscaledZ)for(var st in tt){var Ct=tt[st];Ct.tileID.isChildOf(j)&&Ct.findMatches(I.symbolInstances,j,D)}else{var It=tt[j.scaledTo(Number(W)).key];It&&It.findMatches(I.symbolInstances,j,D)}}for(var Ut=0;Ut<I.symbolInstances.length;Ut++){var Zt=I.symbolInstances.get(Ut);Zt.crossTileID||(Zt.crossTileID=w.generate(),D[Zt.crossTileID]=!0)}return this.indexes[j.overscaledZ]===void 0&&(this.indexes[j.overscaledZ]={}),this.indexes[j.overscaledZ][j.key]=new Fa(j,I.symbolInstances,I.bucketInstanceId),!0},vo.prototype.removeBucketCrossTileIDs=function(j,I){for(var w in I.indexedSymbolInstances)for(var B=0,D=I.indexedSymbolInstances[w];B<D.length;B+=1)delete this.usedCrossTileIDs[j][D[B].crossTileID]},vo.prototype.removeStaleBuckets=function(j){var I=!1;for(var w in this.indexes){var B=this.indexes[w];for(var D in B)j[B[D].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,B[D]),delete B[D],I=!0)}return I};var Ja=function(){this.layerIndexes={},this.crossTileIDs=new uo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ja.prototype.addLayer=function(j,I,w){var B=this.layerIndexes[j.id];B===void 0&&(B=this.layerIndexes[j.id]=new vo);var D=!1,W={};B.handleWrapJump(w);for(var tt=0,st=I;tt<st.length;tt+=1){var Ct=st[tt],It=Ct.getBucket(j);It&&j.id===It.layerIds[0]&&(It.bucketInstanceId||(It.bucketInstanceId=++this.maxBucketInstanceId),B.addBucket(Ct.tileID,It,this.crossTileIDs)&&(D=!0),W[It.bucketInstanceId]=!0)}return B.removeStaleBuckets(W)&&(D=!0),D},Ja.prototype.pruneUnusedLayers=function(j){var I={};for(var w in j.forEach(function(B){I[B]=!0}),this.layerIndexes)I[w]||delete this.layerIndexes[w]};var To=function(I,w){return t.emitValidationErrors(I,w&&w.filter(function(B){return B.identifier!=="source.canvas"}))},hs=t.pick(De,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),zo=t.pick(De,["setCenter","setZoom","setBearing","setPitch"]),bs=function(){var j={},I=t.styleSpec.$version;for(var w in t.styleSpec.$root){var B,D=t.styleSpec.$root[w];D.required&&(B=w==="version"?I:D.type==="array"?[]:{})!=null&&(j[w]=B)}return j}(),Ao=function(j){function I(w,B){var D=this;B===void 0&&(B={}),j.call(this),this.map=w,this.dispatcher=new L(cn(),this),this.imageManager=new v,this.imageManager.setEventedParent(this),this.glyphManager=new y(w._requestManager,B.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new Ja,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var W=this;this._rtlTextPluginCallback=I.registerForPluginStateChange(function(tt){W.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:tt.pluginStatus,pluginURL:tt.pluginURL},function(st,Ct){if(t.triggerPluginCompletionEvent(st),Ct&&Ct.every(function(Ut){return Ut}))for(var It in W.sourceCaches)W.sourceCaches[It].reload()})}),this.on("data",function(tt){if(tt.dataType==="source"&&tt.sourceDataType==="metadata"){var st=D.sourceCaches[tt.sourceId];if(st){var Ct=st.getSource();if(Ct&&Ct.vectorLayerIds)for(var It in D._layers){var Ut=D._layers[It];Ut.source===Ct.id&&D._validateLayer(Ut)}}}})}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.loadURL=function(w,B){var D=this;B===void 0&&(B={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var W=typeof B.validate=="boolean"?B.validate:!t.isMapboxURL(w);w=this.map._requestManager.normalizeStyleURL(w,B.accessToken);var tt=this.map._requestManager.transformRequest(w,t.ResourceType.Style);this._request=t.getJSON(tt,function(st,Ct){D._request=null,st?D.fire(new t.ErrorEvent(st)):Ct&&D._load(Ct,W)})},I.prototype.loadJSON=function(w,B){var D=this;B===void 0&&(B={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){D._request=null,D._load(w,B.validate!==!1)})},I.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(bs,!1)},I.prototype._load=function(w,B){if(!B||!To(this,t.validateStyle(w))){for(var D in this._loaded=!0,this.stylesheet=w,w.sources)this.addSource(D,w.sources[D],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs);var W=Sr(this.stylesheet.layers);this._order=W.map(function(It){return It.id}),this._layers={},this._serializedLayers={};for(var tt=0,st=W;tt<st.length;tt+=1){var Ct=st[tt];(Ct=t.createStyleLayer(Ct)).setEventedParent(this,{layer:{id:Ct.id}}),this._layers[Ct.id]=Ct,this._serializedLayers[Ct.id]=Ct.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new A(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},I.prototype._loadSprite=function(w){var B=this;this._spriteRequest=function(D,W,tt){var st,Ct,It,Ut=t.browser.devicePixelRatio>1?"@2x":"",Zt=t.getJSON(W.transformRequest(W.normalizeSpriteURL(D,Ut,".json"),t.ResourceType.SpriteJSON),function(me,je){Zt=null,It||(It=me,st=je,de())}),qt=t.getImage(W.transformRequest(W.normalizeSpriteURL(D,Ut,".png"),t.ResourceType.SpriteImage),function(me,je){qt=null,It||(It=me,Ct=je,de())});function de(){if(It)tt(It);else if(st&&Ct){var me=t.browser.getImageData(Ct),je={};for(var Oe in st){var ke=st[Oe],qe=ke.width,an=ke.height,Xn=ke.x,kn=ke.y,fr=ke.sdf,Mr=ke.pixelRatio,Qr=ke.stretchX,Zr=ke.stretchY,Pi=ke.content,Ri=new t.RGBAImage({width:qe,height:an});t.RGBAImage.copy(me,Ri,{x:Xn,y:kn},{x:0,y:0},{width:qe,height:an}),je[Oe]={data:Ri,pixelRatio:Mr,sdf:fr,stretchX:Qr,stretchY:Zr,content:Pi}}tt(null,je)}}return{cancel:function(){Zt&&(Zt.cancel(),Zt=null),qt&&(qt.cancel(),qt=null)}}}(w,this.map._requestManager,function(D,W){if(B._spriteRequest=null,D)B.fire(new t.ErrorEvent(D));else if(W)for(var tt in W)B.imageManager.addImage(tt,W[tt]);B.imageManager.setLoaded(!0),B._availableImages=B.imageManager.listImages(),B.dispatcher.broadcast("setImages",B._availableImages),B.fire(new t.Event("data",{dataType:"style"}))})},I.prototype._validateLayer=function(w){var B=this.sourceCaches[w.source];if(B){var D=w.sourceLayer;if(D){var W=B.getSource();(W.type==="geojson"||W.vectorLayerIds&&W.vectorLayerIds.indexOf(D)===-1)&&this.fire(new t.ErrorEvent(new Error('Source layer "'+D+'" does not exist on source "'+W.id+'" as specified by style layer "'+w.id+'"')))}}},I.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var w in this.sourceCaches)if(!this.sourceCaches[w].loaded())return!1;return!!this.imageManager.isLoaded()},I.prototype._serializeLayers=function(w){for(var B=[],D=0,W=w;D<W.length;D+=1){var tt=this._layers[W[D]];tt.type!=="custom"&&B.push(tt.serialize())}return B},I.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(var B in this._layers)if(this._layers[B].hasTransition())return!0;return!1},I.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},I.prototype.update=function(w){if(this._loaded){var B=this._changed;if(this._changed){var D=Object.keys(this._updatedLayers),W=Object.keys(this._removedLayers);for(var tt in(D.length||W.length)&&this._updateWorkerLayers(D,W),this._updatedSources){var st=this._updatedSources[tt];st==="reload"?this._reloadSource(tt):st==="clear"&&this._clearSource(tt)}for(var Ct in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ct].updateTransitions(w);this.light.updateTransitions(w),this._resetUpdates()}var It={};for(var Ut in this.sourceCaches){var Zt=this.sourceCaches[Ut];It[Ut]=Zt.used,Zt.used=!1}for(var qt=0,de=this._order;qt<de.length;qt+=1){var me=this._layers[de[qt]];me.recalculate(w,this._availableImages),!me.isHidden(w.zoom)&&me.source&&(this.sourceCaches[me.source].used=!0)}for(var je in It){var Oe=this.sourceCaches[je];It[je]!==Oe.used&&Oe.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:je}))}this.light.recalculate(w),this.z=w.zoom,B&&this.fire(new t.Event("data",{dataType:"style"}))}},I.prototype._updateTilesForChangedImages=function(){var w=Object.keys(this._changedImages);if(w.length){for(var B in this.sourceCaches)this.sourceCaches[B].reloadTilesForDependencies(["icons","patterns"],w);this._changedImages={}}},I.prototype._updateWorkerLayers=function(w,B){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(w),removedIds:B})},I.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},I.prototype.setState=function(w){var B=this;if(this._checkLoaded(),To(this,t.validateStyle(w)))return!1;(w=t.clone$1(w)).layers=Sr(w.layers);var D=function(tt,st){if(!tt)return[{command:De.setStyle,args:[st]}];var Ct=[];try{if(!t.deepEqual(tt.version,st.version))return[{command:De.setStyle,args:[st]}];t.deepEqual(tt.center,st.center)||Ct.push({command:De.setCenter,args:[st.center]}),t.deepEqual(tt.zoom,st.zoom)||Ct.push({command:De.setZoom,args:[st.zoom]}),t.deepEqual(tt.bearing,st.bearing)||Ct.push({command:De.setBearing,args:[st.bearing]}),t.deepEqual(tt.pitch,st.pitch)||Ct.push({command:De.setPitch,args:[st.pitch]}),t.deepEqual(tt.sprite,st.sprite)||Ct.push({command:De.setSprite,args:[st.sprite]}),t.deepEqual(tt.glyphs,st.glyphs)||Ct.push({command:De.setGlyphs,args:[st.glyphs]}),t.deepEqual(tt.transition,st.transition)||Ct.push({command:De.setTransition,args:[st.transition]}),t.deepEqual(tt.light,st.light)||Ct.push({command:De.setLight,args:[st.light]});var It={},Ut=[];(function(qt,de,me,je){var Oe;for(Oe in de=de||{},qt=qt||{})qt.hasOwnProperty(Oe)&&(de.hasOwnProperty(Oe)||Ve(Oe,me,je));for(Oe in de)de.hasOwnProperty(Oe)&&(qt.hasOwnProperty(Oe)?t.deepEqual(qt[Oe],de[Oe])||(qt[Oe].type==="geojson"&&de[Oe].type==="geojson"&&xn(qt,de,Oe)?me.push({command:De.setGeoJSONSourceData,args:[Oe,de[Oe].data]}):En(Oe,de,me,je)):$e(Oe,de,me))})(tt.sources,st.sources,Ut,It);var Zt=[];tt.layers&&tt.layers.forEach(function(qt){It[qt.source]?Ct.push({command:De.removeLayer,args:[qt.id]}):Zt.push(qt)}),Ct=Ct.concat(Ut),function(qt,de,me){de=de||[];var je,Oe,ke,qe,an,Xn,kn,fr=(qt=qt||[]).map(mn),Mr=de.map(mn),Qr=qt.reduce(Dn,{}),Zr=de.reduce(Dn,{}),Pi=fr.slice(),Ri=Object.create(null);for(je=0,Oe=0;je<fr.length;je++)Zr.hasOwnProperty(ke=fr[je])?Oe++:(me.push({command:De.removeLayer,args:[ke]}),Pi.splice(Pi.indexOf(ke,Oe),1));for(je=0,Oe=0;je<Mr.length;je++)Pi[Pi.length-1-je]!==(ke=Mr[Mr.length-1-je])&&(Qr.hasOwnProperty(ke)?(me.push({command:De.removeLayer,args:[ke]}),Pi.splice(Pi.lastIndexOf(ke,Pi.length-Oe),1)):Oe++,me.push({command:De.addLayer,args:[Zr[ke],Xn=Pi[Pi.length-je]]}),Pi.splice(Pi.length-je,0,ke),Ri[ke]=!0);for(je=0;je<Mr.length;je++)if(qe=Qr[ke=Mr[je]],an=Zr[ke],!Ri[ke]&&!t.deepEqual(qe,an))if(t.deepEqual(qe.source,an.source)&&t.deepEqual(qe["source-layer"],an["source-layer"])&&t.deepEqual(qe.type,an.type)){for(kn in Nn(qe.layout,an.layout,me,ke,null,De.setLayoutProperty),Nn(qe.paint,an.paint,me,ke,null,De.setPaintProperty),t.deepEqual(qe.filter,an.filter)||me.push({command:De.setFilter,args:[ke,an.filter]}),t.deepEqual(qe.minzoom,an.minzoom)&&t.deepEqual(qe.maxzoom,an.maxzoom)||me.push({command:De.setLayerZoomRange,args:[ke,an.minzoom,an.maxzoom]}),qe)qe.hasOwnProperty(kn)&&kn!=="layout"&&kn!=="paint"&&kn!=="filter"&&kn!=="metadata"&&kn!=="minzoom"&&kn!=="maxzoom"&&(kn.indexOf("paint.")===0?Nn(qe[kn],an[kn],me,ke,kn.slice(6),De.setPaintProperty):t.deepEqual(qe[kn],an[kn])||me.push({command:De.setLayerProperty,args:[ke,kn,an[kn]]}));for(kn in an)an.hasOwnProperty(kn)&&!qe.hasOwnProperty(kn)&&kn!=="layout"&&kn!=="paint"&&kn!=="filter"&&kn!=="metadata"&&kn!=="minzoom"&&kn!=="maxzoom"&&(kn.indexOf("paint.")===0?Nn(qe[kn],an[kn],me,ke,kn.slice(6),De.setPaintProperty):t.deepEqual(qe[kn],an[kn])||me.push({command:De.setLayerProperty,args:[ke,kn,an[kn]]}))}else me.push({command:De.removeLayer,args:[ke]}),Xn=Pi[Pi.lastIndexOf(ke)+1],me.push({command:De.addLayer,args:[an,Xn]})}(Zt,st.layers,Ct)}catch(qt){console.warn("Unable to compute style diff:",qt),Ct=[{command:De.setStyle,args:[st]}]}return Ct}(this.serialize(),w).filter(function(tt){return!(tt.command in zo)});if(D.length===0)return!1;var W=D.filter(function(tt){return!(tt.command in hs)});if(W.length>0)throw new Error("Unimplemented: "+W.map(function(tt){return tt.command}).join(", ")+".");return D.forEach(function(tt){tt.command!=="setTransition"&&B[tt.command].apply(B,tt.args)}),this.stylesheet=w,!0},I.prototype.addImage=function(w,B){if(this.getImage(w))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(w,B),this._afterImageUpdated(w)},I.prototype.updateImage=function(w,B){this.imageManager.updateImage(w,B)},I.prototype.getImage=function(w){return this.imageManager.getImage(w)},I.prototype.removeImage=function(w){if(!this.getImage(w))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(w),this._afterImageUpdated(w)},I.prototype._afterImageUpdated=function(w){this._availableImages=this.imageManager.listImages(),this._changedImages[w]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},I.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},I.prototype.addSource=function(w,B,D){var W=this;if(D===void 0&&(D={}),this._checkLoaded(),this.sourceCaches[w]!==void 0)throw new Error("There is already a source with this ID");if(!B.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(B).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(B.type)>=0&&this._validate(t.validateStyle.source,"sources."+w,B,null,D))){this.map&&this.map._collectResourceTiming&&(B.collectResourceTiming=!0);var tt=this.sourceCaches[w]=new be(w,B,this.dispatcher);tt.style=this,tt.setEventedParent(this,function(){return{isSourceLoaded:W.loaded(),source:tt.serialize(),sourceId:w}}),tt.onAdd(this.map),this._changed=!0}},I.prototype.removeSource=function(w){if(this._checkLoaded(),this.sourceCaches[w]===void 0)throw new Error("There is no source with this ID");for(var B in this._layers)if(this._layers[B].source===w)return this.fire(new t.ErrorEvent(new Error('Source "'+w+'" cannot be removed while layer "'+B+'" is using it.')));var D=this.sourceCaches[w];delete this.sourceCaches[w],delete this._updatedSources[w],D.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:w})),D.setEventedParent(null),D.clearTiles(),D.onRemove&&D.onRemove(this.map),this._changed=!0},I.prototype.setGeoJSONSourceData=function(w,B){this._checkLoaded(),this.sourceCaches[w].getSource().setData(B),this._changed=!0},I.prototype.getSource=function(w){return this.sourceCaches[w]&&this.sourceCaches[w].getSource()},I.prototype.addLayer=function(w,B,D){D===void 0&&(D={}),this._checkLoaded();var W=w.id;if(this.getLayer(W))this.fire(new t.ErrorEvent(new Error('Layer with id "'+W+'" already exists on this map')));else{var tt;if(w.type==="custom"){if(To(this,t.validateCustomStyleLayer(w)))return;tt=t.createStyleLayer(w)}else{if(typeof w.source=="object"&&(this.addSource(W,w.source),w=t.clone$1(w),w=t.extend(w,{source:W})),this._validate(t.validateStyle.layer,"layers."+W,w,{arrayIndex:-1},D))return;tt=t.createStyleLayer(w),this._validateLayer(tt),tt.setEventedParent(this,{layer:{id:W}}),this._serializedLayers[tt.id]=tt.serialize()}var st=B?this._order.indexOf(B):this._order.length;if(B&&st===-1)this.fire(new t.ErrorEvent(new Error('Layer with id "'+B+'" does not exist on this map.')));else{if(this._order.splice(st,0,W),this._layerOrderChanged=!0,this._layers[W]=tt,this._removedLayers[W]&&tt.source&&tt.type!=="custom"){var Ct=this._removedLayers[W];delete this._removedLayers[W],Ct.type!==tt.type?this._updatedSources[tt.source]="clear":(this._updatedSources[tt.source]="reload",this.sourceCaches[tt.source].pause())}this._updateLayer(tt),tt.onAdd&&tt.onAdd(this.map)}}},I.prototype.moveLayer=function(w,B){if(this._checkLoaded(),this._changed=!0,this._layers[w]){if(w!==B){var D=this._order.indexOf(w);this._order.splice(D,1);var W=B?this._order.indexOf(B):this._order.length;B&&W===-1?this.fire(new t.ErrorEvent(new Error('Layer with id "'+B+'" does not exist on this map.'))):(this._order.splice(W,0,w),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be moved.")))},I.prototype.removeLayer=function(w){this._checkLoaded();var B=this._layers[w];if(B){B.setEventedParent(null);var D=this._order.indexOf(w);this._order.splice(D,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[w]=B,delete this._layers[w],delete this._serializedLayers[w],delete this._updatedLayers[w],delete this._updatedPaintProps[w],B.onRemove&&B.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be removed.")))},I.prototype.getLayer=function(w){return this._layers[w]},I.prototype.hasLayer=function(w){return w in this._layers},I.prototype.setLayerZoomRange=function(w,B,D){this._checkLoaded();var W=this.getLayer(w);W?W.minzoom===B&&W.maxzoom===D||(B!=null&&(W.minzoom=B),D!=null&&(W.maxzoom=D),this._updateLayer(W)):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot have zoom extent.")))},I.prototype.setFilter=function(w,B,D){D===void 0&&(D={}),this._checkLoaded();var W=this.getLayer(w);if(W){if(!t.deepEqual(W.filter,B))return B==null?(W.filter=void 0,void this._updateLayer(W)):void(this._validate(t.validateStyle.filter,"layers."+W.id+".filter",B,null,D)||(W.filter=t.clone$1(B),this._updateLayer(W)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be filtered.")))},I.prototype.getFilter=function(w){return t.clone$1(this.getLayer(w).filter)},I.prototype.setLayoutProperty=function(w,B,D,W){W===void 0&&(W={}),this._checkLoaded();var tt=this.getLayer(w);tt?t.deepEqual(tt.getLayoutProperty(B),D)||(tt.setLayoutProperty(B,D,W),this._updateLayer(tt)):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be styled.")))},I.prototype.getLayoutProperty=function(w,B){var D=this.getLayer(w);if(D)return D.getLayoutProperty(B);this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style.")))},I.prototype.setPaintProperty=function(w,B,D,W){W===void 0&&(W={}),this._checkLoaded();var tt=this.getLayer(w);tt?t.deepEqual(tt.getPaintProperty(B),D)||(tt.setPaintProperty(B,D,W)&&this._updateLayer(tt),this._changed=!0,this._updatedPaintProps[w]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be styled.")))},I.prototype.getPaintProperty=function(w,B){return this.getLayer(w).getPaintProperty(B)},I.prototype.setFeatureState=function(w,B){this._checkLoaded();var D=w.source,W=w.sourceLayer,tt=this.sourceCaches[D];if(tt!==void 0){var st=tt.getSource().type;st==="geojson"&&W?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):st!=="vector"||W?(w.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),tt.setFeatureState(W,w.id,B)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+D+"' does not exist in the map's style.")))},I.prototype.removeFeatureState=function(w,B){this._checkLoaded();var D=w.source,W=this.sourceCaches[D];if(W!==void 0){var tt=W.getSource().type,st=tt==="vector"?w.sourceLayer:void 0;tt!=="vector"||st?B&&typeof w.id!="string"&&typeof w.id!="number"?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):W.removeFeatureState(st,w.id,B):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+D+"' does not exist in the map's style.")))},I.prototype.getFeatureState=function(w){this._checkLoaded();var B=w.source,D=w.sourceLayer,W=this.sourceCaches[B];if(W!==void 0){if(W.getSource().type!=="vector"||D)return w.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),W.getFeatureState(D,w.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+B+"' does not exist in the map's style.")))},I.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},I.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(w){return w.serialize()}),layers:this._serializeLayers(this._order)},function(w){return w!==void 0})},I.prototype._updateLayer=function(w){this._updatedLayers[w.id]=!0,w.source&&!this._updatedSources[w.source]&&this.sourceCaches[w.source].getSource().type!=="raster"&&(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause()),this._changed=!0},I.prototype._flattenAndSortRenderedFeatures=function(w){for(var B=this,D=function(Zr){return B._layers[Zr].type==="fill-extrusion"},W={},tt=[],st=this._order.length-1;st>=0;st--){var Ct=this._order[st];if(D(Ct)){W[Ct]=st;for(var It=0,Ut=w;It<Ut.length;It+=1){var Zt=Ut[It][Ct];if(Zt)for(var qt=0,de=Zt;qt<de.length;qt+=1)tt.push(de[qt])}}}tt.sort(function(Qr,Zr){return Zr.intersectionZ-Qr.intersectionZ});for(var me=[],je=this._order.length-1;je>=0;je--){var Oe=this._order[je];if(D(Oe))for(var ke=tt.length-1;ke>=0;ke--){var qe=tt[ke].feature;if(W[qe.layer.id]<je)break;me.push(qe),tt.pop()}else for(var an=0,Xn=w;an<Xn.length;an+=1){var kn=Xn[an][Oe];if(kn)for(var fr=0,Mr=kn;fr<Mr.length;fr+=1)me.push(Mr[fr].feature)}}return me},I.prototype.queryRenderedFeatures=function(w,B,D){B&&B.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",B.filter,null,B);var W={};if(B&&B.layers){if(!Array.isArray(B.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var tt=0,st=B.layers;tt<st.length;tt+=1){var Ct=st[tt],It=this._layers[Ct];if(!It)return this.fire(new t.ErrorEvent(new Error("The layer '"+Ct+"' does not exist in the map's style and cannot be queried for features."))),[];W[It.source]=!0}}var Ut=[];for(var Zt in B.availableImages=this._availableImages,this.sourceCaches)B.layers&&!W[Zt]||Ut.push(Ft(this.sourceCaches[Zt],this._layers,this._serializedLayers,w,B,D));return this.placement&&Ut.push(function(qt,de,me,je,Oe,ke,qe){for(var an={},Xn=ke.queryRenderedSymbols(je),kn=[],fr=0,Mr=Object.keys(Xn).map(Number);fr<Mr.length;fr+=1)kn.push(qe[Mr[fr]]);kn.sort(wt);for(var Qr=function(){var Oa=Pi[Zr],ja=Oa.featureIndex.lookupSymbolFeatures(Xn[Oa.bucketInstanceId],de,Oa.bucketIndex,Oa.sourceLayerIndex,Oe.filter,Oe.layers,Oe.availableImages,qt);for(var ki in ja){var Sa=an[ki]=an[ki]||[],ga=ja[ki];ga.sort(function(ra,La){var za=Oa.featureSortOrder;if(za){var Ps=za.indexOf(ra.featureIndex);return za.indexOf(La.featureIndex)-Ps}return La.featureIndex-ra.featureIndex});for(var Yi=0,_a=ga;Yi<_a.length;Yi+=1)Sa.push(_a[Yi])}},Zr=0,Pi=kn;Zr<Pi.length;Zr+=1)Qr();var Ri=function(Oa){an[Oa].forEach(function(ja){var ki=ja.feature,Sa=me[qt[Oa].source].getFeatureState(ki.layer["source-layer"],ki.id);ki.source=ki.layer.source,ki.layer["source-layer"]&&(ki.sourceLayer=ki.layer["source-layer"]),ki.state=Sa})};for(var Ki in an)Ri(Ki);return an}(this._layers,this._serializedLayers,this.sourceCaches,w,B,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ut)},I.prototype.querySourceFeatures=function(w,B){B&&B.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",B.filter,null,B);var D=this.sourceCaches[w];return D?function(W,tt){for(var st=W.getRenderableIds().map(function(de){return W.getTileByID(de)}),Ct=[],It={},Ut=0;Ut<st.length;Ut++){var Zt=st[Ut],qt=Zt.tileID.canonical.key;It[qt]||(It[qt]=!0,Zt.querySourceFeatures(Ct,tt))}return Ct}(D,B):[]},I.prototype.addSourceType=function(w,B,D){return I.getSourceType(w)?D(new Error('A source type called "'+w+'" already exists.')):(I.setSourceType(w,B),B.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:w,url:B.workerSourceURL},D):D(null,null))},I.prototype.getLight=function(){return this.light.getLight()},I.prototype.setLight=function(w,B){B===void 0&&(B={}),this._checkLoaded();var D=this.light.getLight(),W=!1;for(var tt in w)if(!t.deepEqual(w[tt],D[tt])){W=!0;break}if(W){var st={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(w,B),this.light.updateTransitions(st)}},I.prototype._validate=function(w,B,D,W,tt){return tt===void 0&&(tt={}),(!tt||tt.validate!==!1)&&To(this,w.call(t.validateStyle,t.extend({key:B,style:this.serialize(),value:D,styleSpec:t.styleSpec},W)))},I.prototype._remove=function(){for(var w in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[w].setEventedParent(null);for(var B in this.sourceCaches)this.sourceCaches[B].clearTiles(),this.sourceCaches[B].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},I.prototype._clearSource=function(w){this.sourceCaches[w].clearTiles()},I.prototype._reloadSource=function(w){this.sourceCaches[w].resume(),this.sourceCaches[w].reload()},I.prototype._updateSources=function(w){for(var B in this.sourceCaches)this.sourceCaches[B].update(w)},I.prototype._generateCollisionBoxes=function(){for(var w in this.sourceCaches)this._reloadSource(w)},I.prototype._updatePlacement=function(w,B,D,W,tt){tt===void 0&&(tt=!1);for(var st=!1,Ct=!1,It={},Ut=0,Zt=this._order;Ut<Zt.length;Ut+=1){var qt=this._layers[Zt[Ut]];if(qt.type==="symbol"){if(!It[qt.source]){var de=this.sourceCaches[qt.source];It[qt.source]=de.getRenderableIds(!0).map(function(qe){return de.getTileByID(qe)}).sort(function(qe,an){return an.tileID.overscaledZ-qe.tileID.overscaledZ||(qe.tileID.isLessThan(an.tileID)?-1:1)})}var me=this.crossTileSymbolIndex.addLayer(qt,It[qt.source],w.center.lng);st=st||me}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((tt=tt||this._layerOrderChanged||D===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),w.zoom))&&(this.pauseablePlacement=new Ca(w,this._order,tt,B,D,W,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,It),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),Ct=!0),st&&this.pauseablePlacement.placement.setStale()),Ct||st)for(var je=0,Oe=this._order;je<Oe.length;je+=1){var ke=this._layers[Oe[je]];ke.type==="symbol"&&this.placement.updateLayerOpacities(ke,It[ke.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},I.prototype._releaseSymbolFadeTiles=function(){for(var w in this.sourceCaches)this.sourceCaches[w].releaseSymbolFadeTiles()},I.prototype.getImages=function(w,B,D){this.imageManager.getImages(B.icons,D),this._updateTilesForChangedImages();var W=this.sourceCaches[B.source];W&&W.setDependencies(B.tileID.key,B.type,B.icons)},I.prototype.getGlyphs=function(w,B,D){this.glyphManager.getGlyphs(B.stacks,D)},I.prototype.getResource=function(w,B,D){return t.makeRequest(B,D)},I}(t.Evented);Ao.getSourceType=function(j){return ut[j]},Ao.setSourceType=function(j,I){ut[j]=I},Ao.registerForPluginStateChange=t.registerForPluginStateChange;var Wa=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Rs=Mo(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),ss=Mo(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ba=Mo(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),gn=Mo(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),cr=Mo("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Gr=Mo(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Ui=Mo(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ua=Mo("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),xo=Mo("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),po=Mo("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ea=Mo(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Qa=Mo(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ds=Mo(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Es=Mo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Za=Mo(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),ru=Mo(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Qo=Mo(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Os=Mo(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),$s=Mo(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ss=Mo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ps=Mo(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),rs=Mo(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),ws=Mo(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),_s=Mo(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Tu=Mo(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Ru=Mo(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Mo(j,I){var w=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,B=I.match(/attribute ([\w]+) ([\w]+)/g),D=j.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),W=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),tt=W?W.concat(D):D,st={};return{fragmentSource:j=j.replace(w,function(Ct,It,Ut,Zt,qt){return st[qt]=!0,It==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
varying `+Ut+" "+Zt+" "+qt+`;
#else
uniform `+Ut+" "+Zt+" u_"+qt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+qt+`
    `+Ut+" "+Zt+" "+qt+" = u_"+qt+`;
#endif
`}),vertexSource:I=I.replace(w,function(Ct,It,Ut,Zt,qt){var de=Zt==="float"?"vec2":"vec4",me=qt.match(/color/)?"color":de;return st[qt]?It==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
uniform lowp float u_`+qt+`_t;
attribute `+Ut+" "+de+" a_"+qt+`;
varying `+Ut+" "+Zt+" "+qt+`;
#else
uniform `+Ut+" "+Zt+" u_"+qt+`;
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+qt+" = a_"+qt+`;
#else
    `+Ut+" "+Zt+" "+qt+" = u_"+qt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+qt+" = unpack_mix_"+me+"(a_"+qt+", u_"+qt+`_t);
#else
    `+Ut+" "+Zt+" "+qt+" = u_"+qt+`;
#endif
`:It==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
uniform lowp float u_`+qt+`_t;
attribute `+Ut+" "+de+" a_"+qt+`;
#else
uniform `+Ut+" "+Zt+" u_"+qt+`;
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+Ut+" "+Zt+" "+qt+" = a_"+qt+`;
#else
    `+Ut+" "+Zt+" "+qt+" = u_"+qt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+Ut+" "+Zt+" "+qt+" = unpack_mix_"+me+"(a_"+qt+", u_"+qt+`_t);
#else
    `+Ut+" "+Zt+" "+qt+" = u_"+qt+`;
#endif
`}),staticAttributes:B,staticUniforms:tt}}var Qs=Object.freeze({__proto__:null,prelude:Rs,background:ss,backgroundPattern:Ba,circle:gn,clippingMask:cr,heatmap:Gr,heatmapTexture:Ui,collisionBox:Ua,collisionCircle:xo,debug:po,fill:ea,fillOutline:Qa,fillOutlinePattern:Ds,fillPattern:Es,fillExtrusion:Za,fillExtrusionPattern:ru,hillshadePrepare:Qo,hillshade:Os,line:$s,lineGradient:Ss,linePattern:ps,lineSDF:rs,raster:ws,symbolIcon:_s,symbolSDF:Tu,symbolTextAndIcon:Ru}),Du=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Wu(j){for(var I=[],w=0;w<j.length;w++)if(j[w]!==null){var B=j[w].split(" ");I.push(B.pop())}return I}Du.prototype.bind=function(j,I,w,B,D,W,tt,st){this.context=j;for(var Ct=this.boundPaintVertexBuffers.length!==B.length,It=0;!Ct&&It<B.length;It++)this.boundPaintVertexBuffers[It]!==B[It]&&(Ct=!0);j.extVertexArrayObject&&this.vao&&this.boundProgram===I&&this.boundLayoutVertexBuffer===w&&!Ct&&this.boundIndexBuffer===D&&this.boundVertexOffset===W&&this.boundDynamicVertexBuffer===tt&&this.boundDynamicVertexBuffer2===st?(j.bindVertexArrayOES.set(this.vao),tt&&tt.bind(),D&&D.dynamicDraw&&D.bind(),st&&st.bind()):this.freshBind(I,w,B,D,W,tt,st)},Du.prototype.freshBind=function(j,I,w,B,D,W,tt){var st,Ct=j.numAttributes,It=this.context,Ut=It.gl;if(It.extVertexArrayObject)this.vao&&this.destroy(),this.vao=It.extVertexArrayObject.createVertexArrayOES(),It.bindVertexArrayOES.set(this.vao),st=0,this.boundProgram=j,this.boundLayoutVertexBuffer=I,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=B,this.boundVertexOffset=D,this.boundDynamicVertexBuffer=W,this.boundDynamicVertexBuffer2=tt;else{st=It.currentNumAttributes||0;for(var Zt=Ct;Zt<st;Zt++)Ut.disableVertexAttribArray(Zt)}I.enableAttributes(Ut,j);for(var qt=0,de=w;qt<de.length;qt+=1)de[qt].enableAttributes(Ut,j);W&&W.enableAttributes(Ut,j),tt&&tt.enableAttributes(Ut,j),I.bind(),I.setVertexAttribPointers(Ut,j,D);for(var me=0,je=w;me<je.length;me+=1){var Oe=je[me];Oe.bind(),Oe.setVertexAttribPointers(Ut,j,D)}W&&(W.bind(),W.setVertexAttribPointers(Ut,j,D)),B&&B.bind(),tt&&(tt.bind(),tt.setVertexAttribPointers(Ut,j,D)),It.currentNumAttributes=Ct},Du.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var il=function(I,w,B,D,W,tt){var st=I.gl;this.program=st.createProgram();for(var Ct=Wu(B.staticAttributes),It=D?D.getBinderAttributes():[],Ut=Ct.concat(It),Zt=B.staticUniforms?Wu(B.staticUniforms):[],qt=D?D.getBinderUniforms():[],de=[],me=0,je=Zt.concat(qt);me<je.length;me+=1){var Oe=je[me];de.indexOf(Oe)<0&&de.push(Oe)}var ke=D?D.defines():[];tt&&ke.push("#define OVERDRAW_INSPECTOR;");var qe=ke.concat(Rs.fragmentSource,B.fragmentSource).join(`
`),an=ke.concat(Rs.vertexSource,B.vertexSource).join(`
`),Xn=st.createShader(st.FRAGMENT_SHADER);if(st.isContextLost())this.failedToCreate=!0;else{st.shaderSource(Xn,qe),st.compileShader(Xn),st.attachShader(this.program,Xn);var kn=st.createShader(st.VERTEX_SHADER);if(st.isContextLost())this.failedToCreate=!0;else{st.shaderSource(kn,an),st.compileShader(kn),st.attachShader(this.program,kn),this.attributes={};var fr={};this.numAttributes=Ut.length;for(var Mr=0;Mr<this.numAttributes;Mr++)Ut[Mr]&&(st.bindAttribLocation(this.program,Mr,Ut[Mr]),this.attributes[Ut[Mr]]=Mr);st.linkProgram(this.program),st.deleteShader(kn),st.deleteShader(Xn);for(var Qr=0;Qr<de.length;Qr++){var Zr=de[Qr];if(Zr&&!fr[Zr]){var Pi=st.getUniformLocation(this.program,Zr);Pi&&(fr[Zr]=Pi)}}this.fixedUniforms=W(I,fr),this.binderUniforms=D?D.getUniforms(I,fr):[]}}};function ju(j,I,w){var B=1/Ra(w,1,I.transform.tileZoom),D=Math.pow(2,w.tileID.overscaledZ),W=w.tileSize*Math.pow(2,I.transform.tileZoom)/D,tt=W*(w.tileID.canonical.x+w.tileID.wrap*D),st=W*w.tileID.canonical.y;return{u_image:0,u_texsize:w.imageAtlasTexture.size,u_scale:[B,j.fromScale,j.toScale],u_fade:j.t,u_pixel_coord_upper:[tt>>16,st>>16],u_pixel_coord_lower:[65535&tt,65535&st]}}il.prototype.draw=function(j,I,w,B,D,W,tt,st,Ct,It,Ut,Zt,qt,de,me,je){var Oe,ke=j.gl;if(!this.failedToCreate){for(var qe in j.program.set(this.program),j.setDepthMode(w),j.setStencilMode(B),j.setColorMode(D),j.setCullFace(W),this.fixedUniforms)this.fixedUniforms[qe].set(tt[qe]);de&&de.setUniforms(j,this.binderUniforms,Zt,{zoom:qt});for(var an=(Oe={},Oe[ke.LINES]=2,Oe[ke.TRIANGLES]=3,Oe[ke.LINE_STRIP]=1,Oe)[I],Xn=0,kn=Ut.get();Xn<kn.length;Xn+=1){var fr=kn[Xn],Mr=fr.vaos||(fr.vaos={});(Mr[st]||(Mr[st]=new Du)).bind(j,this,Ct,de?de.getPaintVertexBuffers():[],It,fr.vertexOffset,me,je),ke.drawElements(I,fr.primitiveLength*an,ke.UNSIGNED_SHORT,fr.primitiveOffset*an*2)}}};var Co=function(I,w,B,D){var W=w.style.light,tt=W.properties.get("position"),st=[tt.x,tt.y,tt.z],Ct=t.create$1();W.properties.get("anchor")==="viewport"&&t.fromRotation(Ct,-w.transform.angle),t.transformMat3(st,st,Ct);var It=W.properties.get("color");return{u_matrix:I,u_lightpos:st,u_lightintensity:W.properties.get("intensity"),u_lightcolor:[It.r,It.g,It.b],u_vertical_gradient:+B,u_opacity:D}},ka=function(I,w,B,D,W,tt,st){return t.extend(Co(I,w,B,D),ju(tt,w,st),{u_height_factor:-Math.pow(2,W.overscaledZ)/st.tileSize/8})},ba=function(I){return{u_matrix:I}},Bo=function(I,w,B,D){return t.extend(ba(I),ju(B,w,D))},uu=function(I,w){return{u_matrix:I,u_world:w}},Hu=function(I,w,B,D,W){return t.extend(Bo(I,w,B,D),{u_world:W})},gs=function(I,w,B,D){var W,tt,st=I.transform;if(D.paint.get("circle-pitch-alignment")==="map"){var Ct=Ra(B,1,st.zoom);W=!0,tt=[Ct,Ct]}else W=!1,tt=st.pixelsToGLUnits;return{u_camera_to_center_distance:st.cameraToCenterDistance,u_scale_with_map:+(D.paint.get("circle-pitch-scale")==="map"),u_matrix:I.translatePosMatrix(w.posMatrix,B,D.paint.get("circle-translate"),D.paint.get("circle-translate-anchor")),u_pitch_with_map:+W,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:tt}},qo=function(I,w,B){var D=Ra(B,1,w.zoom),W=Math.pow(2,w.zoom-B.tileID.overscaledZ),tt=B.tileID.overscaleFactor();return{u_matrix:I,u_camera_to_center_distance:w.cameraToCenterDistance,u_pixels_to_tile_units:D,u_extrude_scale:[w.pixelsToGLUnits[0]/(D*W),w.pixelsToGLUnits[1]/(D*W)],u_overscale_factor:tt}},Is=function(I,w,B){return{u_matrix:I,u_inv_matrix:w,u_camera_to_center_distance:B.cameraToCenterDistance,u_viewport_size:[B.width,B.height]}},iu=function(I,w,B){return B===void 0&&(B=1),{u_matrix:I,u_color:w,u_overlay:0,u_overlay_scale:B}},Fo=function(I){return{u_matrix:I}},Yu=function(I,w,B,D){return{u_matrix:I,u_extrude_scale:Ra(w,1,B),u_intensity:D}},Ys=function(I,w,B){var D=I.transform;return{u_matrix:Ec(I,w,B),u_ratio:1/Ra(w,1,D.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},Ka=function(I,w,B,D){return t.extend(Ys(I,w,B),{u_image:0,u_image_height:D})},pl=function(I,w,B,D){var W=I.transform,tt=gl(w,W);return{u_matrix:Ec(I,w,B),u_texsize:w.imageAtlasTexture.size,u_ratio:1/Ra(w,1,W.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[tt,D.fromScale,D.toScale],u_fade:D.t,u_units_to_pixels:[1/W.pixelsToGLUnits[0],1/W.pixelsToGLUnits[1]]}},Gl=function(I,w,B,D,W){var tt=I.lineAtlas,st=gl(w,I.transform),Ct=B.layout.get("line-cap")==="round",It=tt.getDash(D.from,Ct),Ut=tt.getDash(D.to,Ct),Zt=It.width*W.fromScale,qt=Ut.width*W.toScale;return t.extend(Ys(I,w,B),{u_patternscale_a:[st/Zt,-It.height/2],u_patternscale_b:[st/qt,-Ut.height/2],u_sdfgamma:tt.width/(256*Math.min(Zt,qt)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:It.y,u_tex_y_b:Ut.y,u_mix:W.t})};function gl(j,I){return 1/Ra(j,1,I.tileZoom)}function Ec(j,I,w){return j.translatePosMatrix(I.tileID.posMatrix,I,w.paint.get("line-translate"),w.paint.get("line-translate-anchor"))}var Ml=function(I,w,B,D,W){return{u_matrix:I,u_tl_parent:w,u_scale_parent:B,u_buffer_scale:1,u_fade_t:D.mix,u_opacity:D.opacity*W.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:W.paint.get("raster-brightness-min"),u_brightness_high:W.paint.get("raster-brightness-max"),u_saturation_factor:(st=W.paint.get("raster-saturation"),st>0?1-1/(1.001-st):-st),u_contrast_factor:(tt=W.paint.get("raster-contrast"),tt>0?1/(1-tt):1+tt),u_spin_weights:ao(W.paint.get("raster-hue-rotate"))};var tt,st};function ao(j){j*=Math.PI/180;var I=Math.sin(j),w=Math.cos(j);return[(2*w+1)/3,(-Math.sqrt(3)*I-w+1)/3,(Math.sqrt(3)*I-w+1)/3]}var Au,ml=function(I,w,B,D,W,tt,st,Ct,It,Ut){var Zt=W.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:w?w.uSizeT:0,u_size:w?w.uSize:0,u_camera_to_center_distance:Zt.cameraToCenterDistance,u_pitch:Zt.pitch/360*2*Math.PI,u_rotate_symbol:+B,u_aspect_ratio:Zt.width/Zt.height,u_fade_change:W.options.fadeDuration?W.symbolFadeChange:1,u_matrix:tt,u_label_plane_matrix:st,u_coord_matrix:Ct,u_is_text:+It,u_pitch_with_map:+D,u_texsize:Ut,u_texture:0}},qs=function(I,w,B,D,W,tt,st,Ct,It,Ut,Zt){var qt=W.transform;return t.extend(ml(I,w,B,D,W,tt,st,Ct,It,Ut),{u_gamma_scale:D?Math.cos(qt._pitch)*qt.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+Zt})},Bu=function(I,w,B,D,W,tt,st,Ct,It,Ut){return t.extend(qs(I,w,B,D,W,tt,st,Ct,!0,It,!0),{u_texsize_icon:Ut,u_texture_icon:1})},vu=function(I,w,B){return{u_matrix:I,u_opacity:w,u_color:B}},pu=function(I,w,B,D,W,tt){return t.extend(function(st,Ct,It,Ut){var Zt=It.imageManager.getPattern(st.from.toString()),qt=It.imageManager.getPattern(st.to.toString()),de=It.imageManager.getPixelSize(),me=de.width,je=de.height,Oe=Math.pow(2,Ut.tileID.overscaledZ),ke=Ut.tileSize*Math.pow(2,It.transform.tileZoom)/Oe,qe=ke*(Ut.tileID.canonical.x+Ut.tileID.wrap*Oe),an=ke*Ut.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Zt.tl,u_pattern_br_a:Zt.br,u_pattern_tl_b:qt.tl,u_pattern_br_b:qt.br,u_texsize:[me,je],u_mix:Ct.t,u_pattern_size_a:Zt.displaySize,u_pattern_size_b:qt.displaySize,u_scale_a:Ct.fromScale,u_scale_b:Ct.toScale,u_tile_units_to_pixels:1/Ra(Ut,1,It.transform.tileZoom),u_pixel_coord_upper:[qe>>16,an>>16],u_pixel_coord_lower:[65535&qe,65535&an]}}(D,tt,B,W),{u_matrix:I,u_opacity:w})},Zs={fillExtrusion:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_lightpos:new t.Uniform3f(I,w.u_lightpos),u_lightintensity:new t.Uniform1f(I,w.u_lightintensity),u_lightcolor:new t.Uniform3f(I,w.u_lightcolor),u_vertical_gradient:new t.Uniform1f(I,w.u_vertical_gradient),u_opacity:new t.Uniform1f(I,w.u_opacity)}},fillExtrusionPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_lightpos:new t.Uniform3f(I,w.u_lightpos),u_lightintensity:new t.Uniform1f(I,w.u_lightintensity),u_lightcolor:new t.Uniform3f(I,w.u_lightcolor),u_vertical_gradient:new t.Uniform1f(I,w.u_vertical_gradient),u_height_factor:new t.Uniform1f(I,w.u_height_factor),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade),u_opacity:new t.Uniform1f(I,w.u_opacity)}},fill:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},fillPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},fillOutline:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world)}},fillOutlinePattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},circle:function(I,w){return{u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(I,w.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(I,w.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},collisionBox:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(I,w.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(I,w.u_extrude_scale),u_overscale_factor:new t.Uniform1f(I,w.u_overscale_factor)}},collisionCircle:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_inv_matrix:new t.UniformMatrix4f(I,w.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(I,w.u_viewport_size)}},debug:function(I,w){return{u_color:new t.UniformColor(I,w.u_color),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_overlay:new t.Uniform1i(I,w.u_overlay),u_overlay_scale:new t.Uniform1f(I,w.u_overlay_scale)}},clippingMask:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},heatmap:function(I,w){return{u_extrude_scale:new t.Uniform1f(I,w.u_extrude_scale),u_intensity:new t.Uniform1f(I,w.u_intensity),u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},heatmapTexture:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world),u_image:new t.Uniform1i(I,w.u_image),u_color_ramp:new t.Uniform1i(I,w.u_color_ramp),u_opacity:new t.Uniform1f(I,w.u_opacity)}},hillshade:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_latrange:new t.Uniform2f(I,w.u_latrange),u_light:new t.Uniform2f(I,w.u_light),u_shadow:new t.UniformColor(I,w.u_shadow),u_highlight:new t.UniformColor(I,w.u_highlight),u_accent:new t.UniformColor(I,w.u_accent)}},hillshadePrepare:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_dimension:new t.Uniform2f(I,w.u_dimension),u_zoom:new t.Uniform1f(I,w.u_zoom),u_unpack:new t.Uniform4f(I,w.u_unpack)}},line:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels)}},lineGradient:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_image:new t.Uniform1i(I,w.u_image),u_image_height:new t.Uniform1f(I,w.u_image_height)}},linePattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_texsize:new t.Uniform2f(I,w.u_texsize),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_image:new t.Uniform1i(I,w.u_image),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},lineSDF:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(I,w.u_patternscale_a),u_patternscale_b:new t.Uniform2f(I,w.u_patternscale_b),u_sdfgamma:new t.Uniform1f(I,w.u_sdfgamma),u_image:new t.Uniform1i(I,w.u_image),u_tex_y_a:new t.Uniform1f(I,w.u_tex_y_a),u_tex_y_b:new t.Uniform1f(I,w.u_tex_y_b),u_mix:new t.Uniform1f(I,w.u_mix)}},raster:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_tl_parent:new t.Uniform2f(I,w.u_tl_parent),u_scale_parent:new t.Uniform1f(I,w.u_scale_parent),u_buffer_scale:new t.Uniform1f(I,w.u_buffer_scale),u_fade_t:new t.Uniform1f(I,w.u_fade_t),u_opacity:new t.Uniform1f(I,w.u_opacity),u_image0:new t.Uniform1i(I,w.u_image0),u_image1:new t.Uniform1i(I,w.u_image1),u_brightness_low:new t.Uniform1f(I,w.u_brightness_low),u_brightness_high:new t.Uniform1f(I,w.u_brightness_high),u_saturation_factor:new t.Uniform1f(I,w.u_saturation_factor),u_contrast_factor:new t.Uniform1f(I,w.u_contrast_factor),u_spin_weights:new t.Uniform3f(I,w.u_spin_weights)}},symbolIcon:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texture:new t.Uniform1i(I,w.u_texture)}},symbolSDF:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texture:new t.Uniform1i(I,w.u_texture),u_gamma_scale:new t.Uniform1f(I,w.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(I,w.u_is_halo)}},symbolTextAndIcon:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texsize_icon:new t.Uniform2f(I,w.u_texsize_icon),u_texture:new t.Uniform1i(I,w.u_texture),u_texture_icon:new t.Uniform1i(I,w.u_texture_icon),u_gamma_scale:new t.Uniform1f(I,w.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(I,w.u_is_halo)}},background:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_opacity:new t.Uniform1f(I,w.u_opacity),u_color:new t.UniformColor(I,w.u_color)}},backgroundPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_opacity:new t.Uniform1f(I,w.u_opacity),u_image:new t.Uniform1i(I,w.u_image),u_pattern_tl_a:new t.Uniform2f(I,w.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(I,w.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(I,w.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(I,w.u_pattern_br_b),u_texsize:new t.Uniform2f(I,w.u_texsize),u_mix:new t.Uniform1f(I,w.u_mix),u_pattern_size_a:new t.Uniform2f(I,w.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(I,w.u_pattern_size_b),u_scale_a:new t.Uniform1f(I,w.u_scale_a),u_scale_b:new t.Uniform1f(I,w.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(I,w.u_tile_units_to_pixels)}}};function ds(j,I,w,B,D,W,tt){for(var st=j.context,Ct=st.gl,It=j.useProgram("collisionBox"),Ut=[],Zt=0,qt=0,de=0;de<B.length;de++){var me=B[de],je=I.getTile(me),Oe=je.getBucket(w);if(Oe){var ke=me.posMatrix;D[0]===0&&D[1]===0||(ke=j.translatePosMatrix(me.posMatrix,je,D,W));var qe=tt?Oe.textCollisionBox:Oe.iconCollisionBox,an=Oe.collisionCircleArray;if(an.length>0){var Xn=t.create(),kn=ke;t.mul(Xn,Oe.placementInvProjMatrix,j.transform.glCoordMatrix),t.mul(Xn,Xn,Oe.placementViewportMatrix),Ut.push({circleArray:an,circleOffset:qt,transform:kn,invTransform:Xn}),qt=Zt+=an.length/4}qe&&It.draw(st,Ct.LINES,ge.disabled,Wt.disabled,j.colorModeForRenderPass(),Te.disabled,qo(ke,j.transform,je),w.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,null,j.transform.zoom,null,null,qe.collisionVertexBuffer)}}if(tt&&Ut.length){var fr=j.useProgram("collisionCircle"),Mr=new t.StructArrayLayout2f1f2i16;Mr.resize(4*Zt),Mr._trim();for(var Qr=0,Zr=0,Pi=Ut;Zr<Pi.length;Zr+=1)for(var Ri=Pi[Zr],Ki=0;Ki<Ri.circleArray.length/4;Ki++){var Xi=4*Ki,Oa=Ri.circleArray[Xi+0],ja=Ri.circleArray[Xi+1],ki=Ri.circleArray[Xi+2],Sa=Ri.circleArray[Xi+3];Mr.emplace(Qr++,Oa,ja,ki,Sa,0),Mr.emplace(Qr++,Oa,ja,ki,Sa,1),Mr.emplace(Qr++,Oa,ja,ki,Sa,2),Mr.emplace(Qr++,Oa,ja,ki,Sa,3)}(!Au||Au.length<2*Zt)&&(Au=function(Ps){var ls=2*Ps,Ts=new t.StructArrayLayout3ui6;Ts.resize(ls),Ts._trim();for(var ms=0;ms<ls;ms++){var nu=6*ms;Ts.uint16[nu+0]=4*ms+0,Ts.uint16[nu+1]=4*ms+1,Ts.uint16[nu+2]=4*ms+2,Ts.uint16[nu+3]=4*ms+2,Ts.uint16[nu+4]=4*ms+3,Ts.uint16[nu+5]=4*ms+0}return Ts}(Zt));for(var ga=st.createIndexBuffer(Au,!0),Yi=st.createVertexBuffer(Mr,t.collisionCircleLayout.members,!0),_a=0,ra=Ut;_a<ra.length;_a+=1){var La=ra[_a],za=Is(La.transform,La.invTransform,j.transform);fr.draw(st,Ct.TRIANGLES,ge.disabled,Wt.disabled,j.colorModeForRenderPass(),Te.disabled,za,w.id,Yi,ga,t.SegmentVector.simpleSegment(0,2*La.circleOffset,La.circleArray.length,La.circleArray.length/2),null,j.transform.zoom,null,null,null)}Yi.destroy(),ga.destroy()}}var Ms=t.identity(new Float32Array(16));function al(j,I,w,B,D,W){var tt=t.getAnchorAlignment(j),st=-(tt.horizontalAlign-.5)*I,Ct=-(tt.verticalAlign-.5)*w,It=t.evaluateVariableOffset(j,B);return new t.Point((st/D+It[0])*W,(Ct/D+It[1])*W)}function Pl(j,I,w,B,D,W,tt,st,Ct,It,Ut){var Zt=j.text.placedSymbolArray,qt=j.text.dynamicLayoutVertexArray,de=j.icon.dynamicLayoutVertexArray,me={};qt.clear();for(var je=0;je<Zt.length;je++){var Oe=Zt.get(je),ke=Oe.hidden||!Oe.crossTileID||j.allowVerticalPlacement&&!Oe.placedOrientation?null:B[Oe.crossTileID];if(ke){var qe=new t.Point(Oe.anchorX,Oe.anchorY),an=mr(qe,w?st:tt),Xn=Fr(W.cameraToCenterDistance,an.signedDistanceFromCamera),kn=D.evaluateSizeForFeature(j.textSizeData,It,Oe)*Xn/t.ONE_EM;w&&(kn*=j.tilePixelRatio/Ct);for(var fr=al(ke.anchor,ke.width,ke.height,ke.textOffset,ke.textBoxScale,kn),Mr=w?mr(qe.add(fr),tt).point:an.point.add(I?fr.rotate(-W.angle):fr),Qr=j.allowVerticalPlacement&&Oe.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,Zr=0;Zr<Oe.numGlyphs;Zr++)t.addDynamicAttributes(qt,Mr,Qr);Ut&&Oe.associatedIconIndex>=0&&(me[Oe.associatedIconIndex]={shiftedAnchor:Mr,angle:Qr})}else Jo(Oe.numGlyphs,qt)}if(Ut){de.clear();for(var Pi=j.icon.placedSymbolArray,Ri=0;Ri<Pi.length;Ri++){var Ki=Pi.get(Ri);if(Ki.hidden)Jo(Ki.numGlyphs,de);else{var Xi=me[Ri];if(Xi)for(var Oa=0;Oa<Ki.numGlyphs;Oa++)t.addDynamicAttributes(de,Xi.shiftedAnchor,Xi.angle);else Jo(Ki.numGlyphs,de)}}j.icon.dynamicLayoutVertexBuffer.updateData(de)}j.text.dynamicLayoutVertexBuffer.updateData(qt)}function jl(j,I,w){return w.iconsInText&&I?"symbolTextAndIcon":j?"symbolSDF":"symbolIcon"}function Nu(j,I,w,B,D,W,tt,st,Ct,It,Ut,Zt){for(var qt=j.context,de=qt.gl,me=j.transform,je=st==="map",Oe=Ct==="map",ke=je&&w.layout.get("symbol-placement")!=="point",qe=je&&!Oe&&!ke,an=w.layout.get("symbol-sort-key").constantOr(1)!==void 0,Xn=!1,kn=j.depthModeForSublayer(0,ge.ReadOnly),fr=w.layout.get("text-variable-anchor"),Mr=[],Qr=0,Zr=B;Qr<Zr.length;Qr+=1){var Pi=Zr[Qr],Ri=I.getTile(Pi),Ki=Ri.getBucket(w);if(Ki){var Xi=D?Ki.text:Ki.icon;if(Xi&&Xi.segments.get().length){var Oa=Xi.programConfigurations.get(w.id),ja=D||Ki.sdfIcons,ki=D?Ki.textSizeData:Ki.iconSizeData,Sa=Oe||me.pitch!==0,ga=j.useProgram(jl(ja,D,Ki),Oa),Yi=t.evaluateSizeForZoom(ki,me.zoom),_a=void 0,ra=[0,0],La=void 0,za=void 0,Ps=null,ls=void 0;if(D)La=Ri.glyphAtlasTexture,za=de.LINEAR,_a=Ri.glyphAtlasTexture.size,Ki.iconsInText&&(ra=Ri.imageAtlasTexture.size,Ps=Ri.imageAtlasTexture,ls=Sa||j.options.rotating||j.options.zooming||ki.kind==="composite"||ki.kind==="camera"?de.LINEAR:de.NEAREST);else{var Ts=w.layout.get("icon-size").constantOr(0)!==1||Ki.iconsNeedLinear;La=Ri.imageAtlasTexture,za=ja||j.options.rotating||j.options.zooming||Ts||Sa?de.LINEAR:de.NEAREST,_a=Ri.imageAtlasTexture.size}var ms=Ra(Ri,1,j.transform.zoom),nu=_n(Pi.posMatrix,Oe,je,j.transform,ms),Uu=xr(Pi.posMatrix,Oe,je,j.transform,ms),qu=fr&&Ki.hasTextData(),_c=w.layout.get("icon-text-fit")!=="none"&&qu&&Ki.hasIconData();ke&&Ta(Ki,Pi.posMatrix,j,D,nu,Uu,Oe,It);var Ic=j.translatePosMatrix(Pi.posMatrix,Ri,W,tt),wl=ke||D&&fr||_c?Ms:nu,ac=j.translatePosMatrix(Uu,Ri,W,tt,!0),Gc=ja&&w.paint.get(D?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ef={program:ga,buffers:Xi,uniformValues:ja?Ki.iconsInText?Bu(ki.kind,Yi,qe,Oe,j,Ic,wl,ac,_a,ra):qs(ki.kind,Yi,qe,Oe,j,Ic,wl,ac,D,_a,!0):ml(ki.kind,Yi,qe,Oe,j,Ic,wl,ac,D,_a),atlasTexture:La,atlasTextureIcon:Ps,atlasInterpolation:za,atlasInterpolationIcon:ls,isSDF:ja,hasHalo:Gc};if(an&&Ki.canOverlap){Xn=!0;for(var Bc=0,Hc=Xi.segments.get();Bc<Hc.length;Bc+=1){var nf=Hc[Bc];Mr.push({segments:new t.SegmentVector([nf]),sortKey:nf.sortKey,state:ef})}}else Mr.push({segments:Xi.segments,sortKey:0,state:ef})}}}Xn&&Mr.sort(function(Hl,ou){return Hl.sortKey-ou.sortKey});for(var Cc=0,Yc=Mr;Cc<Yc.length;Cc+=1){var gc=Yc[Cc],lu=gc.state;if(qt.activeTexture.set(de.TEXTURE0),lu.atlasTexture.bind(lu.atlasInterpolation,de.CLAMP_TO_EDGE),lu.atlasTextureIcon&&(qt.activeTexture.set(de.TEXTURE1),lu.atlasTextureIcon&&lu.atlasTextureIcon.bind(lu.atlasInterpolationIcon,de.CLAMP_TO_EDGE)),lu.isSDF){var cu=lu.uniformValues;lu.hasHalo&&(cu.u_is_halo=1,Zu(lu.buffers,gc.segments,w,j,lu.program,kn,Ut,Zt,cu)),cu.u_is_halo=0}Zu(lu.buffers,gc.segments,w,j,lu.program,kn,Ut,Zt,lu.uniformValues)}}function Zu(j,I,w,B,D,W,tt,st,Ct){var It=B.context;D.draw(It,It.gl.TRIANGLES,W,tt,st,Te.disabled,Ct,w.id,j.layoutVertexBuffer,j.indexBuffer,I,w.paint,B.transform.zoom,j.programConfigurations.get(w.id),j.dynamicLayoutVertexBuffer,j.opacityVertexBuffer)}function ol(j,I,w,B,D,W,tt){var st,Ct,It,Ut,Zt,qt=j.context.gl,de=w.paint.get("fill-pattern"),me=de&&de.constantOr(1),je=w.getCrossfadeParameters();tt?(Ct=me&&!w.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",st=qt.LINES):(Ct=me?"fillPattern":"fill",st=qt.TRIANGLES);for(var Oe=0,ke=B;Oe<ke.length;Oe+=1){var qe=ke[Oe],an=I.getTile(qe);if(!me||an.patternsLoaded()){var Xn=an.getBucket(w);if(Xn){var kn=Xn.programConfigurations.get(w.id),fr=j.useProgram(Ct,kn);me&&(j.context.activeTexture.set(qt.TEXTURE0),an.imageAtlasTexture.bind(qt.LINEAR,qt.CLAMP_TO_EDGE),kn.updatePaintBuffers(je));var Mr=de.constantOr(null);if(Mr&&an.imageAtlas){var Qr=an.imageAtlas,Zr=Qr.patternPositions[Mr.to.toString()],Pi=Qr.patternPositions[Mr.from.toString()];Zr&&Pi&&kn.setConstantPatternPositions(Zr,Pi)}var Ri=j.translatePosMatrix(qe.posMatrix,an,w.paint.get("fill-translate"),w.paint.get("fill-translate-anchor"));if(tt){Ut=Xn.indexBuffer2,Zt=Xn.segments2;var Ki=[qt.drawingBufferWidth,qt.drawingBufferHeight];It=Ct==="fillOutlinePattern"&&me?Hu(Ri,j,je,an,Ki):uu(Ri,Ki)}else Ut=Xn.indexBuffer,Zt=Xn.segments,It=me?Bo(Ri,j,je,an):ba(Ri);fr.draw(j.context,st,D,j.stencilModeForClipping(qe),W,Te.disabled,It,w.id,Xn.layoutVertexBuffer,Ut,Zt,w.paint,j.transform.zoom,kn)}}}}function gu(j,I,w,B,D,W,tt){for(var st=j.context,Ct=st.gl,It=w.paint.get("fill-extrusion-pattern"),Ut=It.constantOr(1),Zt=w.getCrossfadeParameters(),qt=w.paint.get("fill-extrusion-opacity"),de=0,me=B;de<me.length;de+=1){var je=me[de],Oe=I.getTile(je),ke=Oe.getBucket(w);if(ke){var qe=ke.programConfigurations.get(w.id),an=j.useProgram(Ut?"fillExtrusionPattern":"fillExtrusion",qe);Ut&&(j.context.activeTexture.set(Ct.TEXTURE0),Oe.imageAtlasTexture.bind(Ct.LINEAR,Ct.CLAMP_TO_EDGE),qe.updatePaintBuffers(Zt));var Xn=It.constantOr(null);if(Xn&&Oe.imageAtlas){var kn=Oe.imageAtlas,fr=kn.patternPositions[Xn.to.toString()],Mr=kn.patternPositions[Xn.from.toString()];fr&&Mr&&qe.setConstantPatternPositions(fr,Mr)}var Qr=j.translatePosMatrix(je.posMatrix,Oe,w.paint.get("fill-extrusion-translate"),w.paint.get("fill-extrusion-translate-anchor")),Zr=w.paint.get("fill-extrusion-vertical-gradient"),Pi=Ut?ka(Qr,j,Zr,qt,je,Zt,Oe):Co(Qr,j,Zr,qt);an.draw(st,st.gl.TRIANGLES,D,W,tt,Te.backCCW,Pi,w.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,w.paint,j.transform.zoom,qe)}}}function au(j,I,w,B,D,W){var tt=j.context,st=tt.gl,Ct=I.fbo;if(Ct){var It=j.useProgram("hillshade");tt.activeTexture.set(st.TEXTURE0),st.bindTexture(st.TEXTURE_2D,Ct.colorAttachment.get());var Ut=function(Zt,qt,de){var me=de.paint.get("hillshade-shadow-color"),je=de.paint.get("hillshade-highlight-color"),Oe=de.paint.get("hillshade-accent-color"),ke=de.paint.get("hillshade-illumination-direction")*(Math.PI/180);de.paint.get("hillshade-illumination-anchor")==="viewport"&&(ke-=Zt.transform.angle);var qe,an,Xn,kn=!Zt.options.moving;return{u_matrix:Zt.transform.calculatePosMatrix(qt.tileID.toUnwrapped(),kn),u_image:0,u_latrange:(qe=qt.tileID,an=Math.pow(2,qe.canonical.z),Xn=qe.canonical.y,[new t.MercatorCoordinate(0,Xn/an).toLngLat().lat,new t.MercatorCoordinate(0,(Xn+1)/an).toLngLat().lat]),u_light:[de.paint.get("hillshade-exaggeration"),ke],u_shadow:me,u_highlight:je,u_accent:Oe}}(j,I,w);It.draw(tt,st.TRIANGLES,B,D,W,Te.disabled,Ut,w.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments)}}function Ku(j,I,w,B,D,W){var tt=j.context,st=tt.gl,Ct=I.dem;if(Ct&&Ct.data){var It=Ct.dim,Ut=Ct.stride,Zt=Ct.getPixels();if(tt.activeTexture.set(st.TEXTURE1),tt.pixelStoreUnpackPremultiplyAlpha.set(!1),I.demTexture=I.demTexture||j.getTileTexture(Ut),I.demTexture){var qt=I.demTexture;qt.update(Zt,{premultiply:!1}),qt.bind(st.NEAREST,st.CLAMP_TO_EDGE)}else I.demTexture=new t.Texture(tt,Zt,st.RGBA,{premultiply:!1}),I.demTexture.bind(st.NEAREST,st.CLAMP_TO_EDGE);tt.activeTexture.set(st.TEXTURE0);var de=I.fbo;if(!de){var me=new t.Texture(tt,{width:It,height:It,data:null},st.RGBA);me.bind(st.LINEAR,st.CLAMP_TO_EDGE),(de=I.fbo=tt.createFramebuffer(It,It,!0)).colorAttachment.set(me.texture)}tt.bindFramebuffer.set(de.framebuffer),tt.viewport.set([0,0,It,It]),j.useProgram("hillshadePrepare").draw(tt,st.TRIANGLES,B,D,W,Te.disabled,function(je,Oe){var ke=Oe.stride,qe=t.create();return t.ortho(qe,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(qe,qe,[0,-t.EXTENT,0]),{u_matrix:qe,u_image:1,u_dimension:[ke,ke],u_zoom:je.overscaledZ,u_unpack:Oe.getUnpackVector()}}(I.tileID,Ct),w.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments),I.needsHillshadePrepare=!1}}function Ls(j,I,w,B,D){var W=B.paint.get("raster-fade-duration");if(W>0){var tt=t.browser.now(),st=(tt-j.timeAdded)/W,Ct=I?(tt-I.timeAdded)/W:-1,It=w.getSource(),Ut=D.coveringZoomLevel({tileSize:It.tileSize,roundZoom:It.roundZoom}),Zt=!I||Math.abs(I.tileID.overscaledZ-Ut)>Math.abs(j.tileID.overscaledZ-Ut),qt=Zt&&j.refreshedUponExpiration?1:t.clamp(Zt?st:1-Ct,0,1);return j.refreshedUponExpiration&&st>=1&&(j.refreshedUponExpiration=!1),I?{opacity:1,mix:1-qt}:{opacity:qt,mix:0}}return{opacity:1,mix:0}}var yl=new t.Color(1,0,0,1),ic=new t.Color(0,1,0,1),Tl=new t.Color(0,0,1,1),Bl=new t.Color(1,0,1,1),Vl=new t.Color(0,1,1,1);function pc(j,I,w,B){Al(j,0,I+w/2,j.transform.width,w,B)}function Xu(j,I,w,B){Al(j,I-w/2,0,w,j.transform.height,B)}function Al(j,I,w,B,D,W){var tt=j.context,st=tt.gl;st.enable(st.SCISSOR_TEST),st.scissor(I*t.browser.devicePixelRatio,w*t.browser.devicePixelRatio,B*t.browser.devicePixelRatio,D*t.browser.devicePixelRatio),tt.clear({color:W}),st.disable(st.SCISSOR_TEST)}function Nl(j,I,w){var B=j.context,D=B.gl,W=w.posMatrix,tt=j.useProgram("debug"),st=ge.disabled,Ct=Wt.disabled,It=j.colorModeForRenderPass();B.activeTexture.set(D.TEXTURE0),j.emptyTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),tt.draw(B,D.LINE_STRIP,st,Ct,It,Te.disabled,iu(W,t.Color.red),"$debug",j.debugBuffer,j.tileBorderIndexBuffer,j.debugSegments);var Ut=I.getTileByID(w.key).latestRawTileData,Zt=Math.floor((Ut&&Ut.byteLength||0)/1024),qt=I.getTile(w).tileSize,de=512/Math.min(qt,512)*(w.overscaledZ/j.transform.zoom)*.5,me=w.canonical.toString();w.overscaledZ!==w.canonical.z&&(me+=" => "+w.overscaledZ),function(je,Oe){je.initDebugOverlayCanvas();var ke=je.debugOverlayCanvas,qe=je.context.gl,an=je.debugOverlayCanvas.getContext("2d");an.clearRect(0,0,ke.width,ke.height),an.shadowColor="white",an.shadowBlur=2,an.lineWidth=1.5,an.strokeStyle="white",an.textBaseline="top",an.font="bold 36px Open Sans, sans-serif",an.fillText(Oe,5,5),an.strokeText(Oe,5,5),je.debugOverlayTexture.update(ke),je.debugOverlayTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE)}(j,me+" "+Zt+"kb"),tt.draw(B,D.TRIANGLES,st,Ct,re.alphaBlended,Te.disabled,iu(W,t.Color.transparent,de),"$debug",j.debugBuffer,j.quadTriangleIndexBuffer,j.debugSegments)}var Oo={symbol:function(I,w,B,D,W){if(I.renderPass==="translucent"){var tt=Wt.disabled,st=I.colorModeForRenderPass();B.layout.get("text-variable-anchor")&&function(Ct,It,Ut,Zt,qt,de,me){for(var je=It.transform,Oe=qt==="map",ke=de==="map",qe=0,an=Ct;qe<an.length;qe+=1){var Xn=an[qe],kn=Zt.getTile(Xn),fr=kn.getBucket(Ut);if(fr&&fr.text&&fr.text.segments.get().length){var Mr=t.evaluateSizeForZoom(fr.textSizeData,je.zoom),Qr=Ra(kn,1,It.transform.zoom),Zr=_n(Xn.posMatrix,ke,Oe,It.transform,Qr),Pi=Ut.layout.get("icon-text-fit")!=="none"&&fr.hasIconData();if(Mr){var Ri=Math.pow(2,je.zoom-kn.tileID.overscaledZ);Pl(fr,Oe,ke,me,t.symbolSize,je,Zr,Xn.posMatrix,Ri,Mr,Pi)}}}}(D,I,B,w,B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),W),B.paint.get("icon-opacity").constantOr(1)!==0&&Nu(I,w,B,D,!1,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),B.layout.get("icon-rotation-alignment"),B.layout.get("icon-pitch-alignment"),B.layout.get("icon-keep-upright"),tt,st),B.paint.get("text-opacity").constantOr(1)!==0&&Nu(I,w,B,D,!0,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.layout.get("text-keep-upright"),tt,st),w.map.showCollisionBoxes&&(ds(I,w,B,D,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),!0),ds(I,w,B,D,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),!1))}},circle:function(I,w,B,D){if(I.renderPass==="translucent"){var W=B.paint.get("circle-opacity"),tt=B.paint.get("circle-stroke-width"),st=B.paint.get("circle-stroke-opacity"),Ct=B.layout.get("circle-sort-key").constantOr(1)!==void 0;if(W.constantOr(1)!==0||tt.constantOr(1)!==0&&st.constantOr(1)!==0){for(var It=I.context,Ut=It.gl,Zt=I.depthModeForSublayer(0,ge.ReadOnly),qt=Wt.disabled,de=I.colorModeForRenderPass(),me=[],je=0;je<D.length;je++){var Oe=D[je],ke=w.getTile(Oe),qe=ke.getBucket(B);if(qe){var an=qe.programConfigurations.get(B.id),Xn={programConfiguration:an,program:I.useProgram("circle",an),layoutVertexBuffer:qe.layoutVertexBuffer,indexBuffer:qe.indexBuffer,uniformValues:gs(I,Oe,ke,B)};if(Ct)for(var kn=0,fr=qe.segments.get();kn<fr.length;kn+=1){var Mr=fr[kn];me.push({segments:new t.SegmentVector([Mr]),sortKey:Mr.sortKey,state:Xn})}else me.push({segments:qe.segments,sortKey:0,state:Xn})}}Ct&&me.sort(function(Ki,Xi){return Ki.sortKey-Xi.sortKey});for(var Qr=0,Zr=me;Qr<Zr.length;Qr+=1){var Pi=Zr[Qr],Ri=Pi.state;Ri.program.draw(It,Ut.TRIANGLES,Zt,qt,de,Te.disabled,Ri.uniformValues,B.id,Ri.layoutVertexBuffer,Ri.indexBuffer,Pi.segments,B.paint,I.transform.zoom,Ri.programConfiguration)}}}},heatmap:function(I,w,B,D){if(B.paint.get("heatmap-opacity")!==0)if(I.renderPass==="offscreen"){var W=I.context,tt=W.gl,st=Wt.disabled,Ct=new re([tt.ONE,tt.ONE],t.Color.transparent,[!0,!0,!0,!0]);(function(me,je,Oe){var ke=me.gl;me.activeTexture.set(ke.TEXTURE1),me.viewport.set([0,0,je.width/4,je.height/4]);var qe=Oe.heatmapFbo;if(qe)ke.bindTexture(ke.TEXTURE_2D,qe.colorAttachment.get()),me.bindFramebuffer.set(qe.framebuffer);else{var an=ke.createTexture();ke.bindTexture(ke.TEXTURE_2D,an),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_S,ke.CLAMP_TO_EDGE),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_T,ke.CLAMP_TO_EDGE),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MIN_FILTER,ke.LINEAR),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MAG_FILTER,ke.LINEAR),qe=Oe.heatmapFbo=me.createFramebuffer(je.width/4,je.height/4,!1),function(Xn,kn,fr,Mr){var Qr=Xn.gl;Qr.texImage2D(Qr.TEXTURE_2D,0,Qr.RGBA,kn.width/4,kn.height/4,0,Qr.RGBA,Xn.extRenderToTextureHalfFloat?Xn.extTextureHalfFloat.HALF_FLOAT_OES:Qr.UNSIGNED_BYTE,null),Mr.colorAttachment.set(fr)}(me,je,an,qe)}})(W,I,B),W.clear({color:t.Color.transparent});for(var It=0;It<D.length;It++){var Ut=D[It];if(!w.hasRenderableParent(Ut)){var Zt=w.getTile(Ut),qt=Zt.getBucket(B);if(qt){var de=qt.programConfigurations.get(B.id);I.useProgram("heatmap",de).draw(W,tt.TRIANGLES,ge.disabled,st,Ct,Te.disabled,Yu(Ut.posMatrix,Zt,I.transform.zoom,B.paint.get("heatmap-intensity")),B.id,qt.layoutVertexBuffer,qt.indexBuffer,qt.segments,B.paint,I.transform.zoom,de)}}}W.viewport.set([0,0,I.width,I.height])}else I.renderPass==="translucent"&&(I.context.setColorMode(I.colorModeForRenderPass()),function(me,je){var Oe=me.context,ke=Oe.gl,qe=je.heatmapFbo;if(qe){Oe.activeTexture.set(ke.TEXTURE0),ke.bindTexture(ke.TEXTURE_2D,qe.colorAttachment.get()),Oe.activeTexture.set(ke.TEXTURE1);var an=je.colorRampTexture;an||(an=je.colorRampTexture=new t.Texture(Oe,je.colorRamp,ke.RGBA)),an.bind(ke.LINEAR,ke.CLAMP_TO_EDGE),me.useProgram("heatmapTexture").draw(Oe,ke.TRIANGLES,ge.disabled,Wt.disabled,me.colorModeForRenderPass(),Te.disabled,function(Xn,kn,fr,Mr){var Qr=t.create();t.ortho(Qr,0,Xn.width,Xn.height,0,0,1);var Zr=Xn.context.gl;return{u_matrix:Qr,u_world:[Zr.drawingBufferWidth,Zr.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:kn.paint.get("heatmap-opacity")}}(me,je),je.id,me.viewportBuffer,me.quadTriangleIndexBuffer,me.viewportSegments,je.paint,me.transform.zoom)}}(I,B))},line:function(I,w,B,D){if(I.renderPass==="translucent"){var W=B.paint.get("line-opacity"),tt=B.paint.get("line-width");if(W.constantOr(1)!==0&&tt.constantOr(1)!==0)for(var st=I.depthModeForSublayer(0,ge.ReadOnly),Ct=I.colorModeForRenderPass(),It=B.paint.get("line-dasharray"),Ut=B.paint.get("line-pattern"),Zt=Ut.constantOr(1),qt=B.paint.get("line-gradient"),de=B.getCrossfadeParameters(),me=Zt?"linePattern":It?"lineSDF":qt?"lineGradient":"line",je=I.context,Oe=je.gl,ke=!0,qe=0,an=D;qe<an.length;qe+=1){var Xn=an[qe],kn=w.getTile(Xn);if(!Zt||kn.patternsLoaded()){var fr=kn.getBucket(B);if(fr){var Mr=fr.programConfigurations.get(B.id),Qr=I.context.program.get(),Zr=I.useProgram(me,Mr),Pi=ke||Zr.program!==Qr,Ri=Ut.constantOr(null);if(Ri&&kn.imageAtlas){var Ki=kn.imageAtlas,Xi=Ki.patternPositions[Ri.to.toString()],Oa=Ki.patternPositions[Ri.from.toString()];Xi&&Oa&&Mr.setConstantPatternPositions(Xi,Oa)}var ja=Zt?pl(I,kn,B,de):It?Gl(I,kn,B,It,de):qt?Ka(I,kn,B,fr.lineClipsArray.length):Ys(I,kn,B);if(Zt)je.activeTexture.set(Oe.TEXTURE0),kn.imageAtlasTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),Mr.updatePaintBuffers(de);else if(It&&(Pi||I.lineAtlas.dirty))je.activeTexture.set(Oe.TEXTURE0),I.lineAtlas.bind(je);else if(qt){var ki=fr.gradients[B.id],Sa=ki.texture;if(B.gradientVersion!==ki.version){var ga=256;if(B.stepInterpolant){var Yi=w.getSource().maxzoom,_a=Xn.canonical.z===Yi?Math.ceil(1<<I.transform.maxZoom-Xn.canonical.z):1;ga=t.clamp(t.nextPowerOfTwo(fr.maxLineLength/t.EXTENT*1024*_a),256,je.maxTextureSize)}ki.gradient=t.renderColorRamp({expression:B.gradientExpression(),evaluationKey:"lineProgress",resolution:ga,image:ki.gradient||void 0,clips:fr.lineClipsArray}),ki.texture?ki.texture.update(ki.gradient):ki.texture=new t.Texture(je,ki.gradient,Oe.RGBA),ki.version=B.gradientVersion,Sa=ki.texture}je.activeTexture.set(Oe.TEXTURE0),Sa.bind(B.stepInterpolant?Oe.NEAREST:Oe.LINEAR,Oe.CLAMP_TO_EDGE)}Zr.draw(je,Oe.TRIANGLES,st,I.stencilModeForClipping(Xn),Ct,Te.disabled,ja,B.id,fr.layoutVertexBuffer,fr.indexBuffer,fr.segments,B.paint,I.transform.zoom,Mr,fr.layoutVertexBuffer2),ke=!1}}}}},fill:function(I,w,B,D){var W=B.paint.get("fill-color"),tt=B.paint.get("fill-opacity");if(tt.constantOr(1)!==0){var st=I.colorModeForRenderPass(),Ct=B.paint.get("fill-pattern"),It=I.opaquePassEnabledForLayer()&&!Ct.constantOr(1)&&W.constantOr(t.Color.transparent).a===1&&tt.constantOr(0)===1?"opaque":"translucent";if(I.renderPass===It){var Ut=I.depthModeForSublayer(1,I.renderPass==="opaque"?ge.ReadWrite:ge.ReadOnly);ol(I,w,B,D,Ut,st,!1)}if(I.renderPass==="translucent"&&B.paint.get("fill-antialias")){var Zt=I.depthModeForSublayer(B.getPaintProperty("fill-outline-color")?2:0,ge.ReadOnly);ol(I,w,B,D,Zt,st,!0)}}},"fill-extrusion":function(I,w,B,D){var W=B.paint.get("fill-extrusion-opacity");if(W!==0&&I.renderPass==="translucent"){var tt=new ge(I.context.gl.LEQUAL,ge.ReadWrite,I.depthRangeFor3D);if(W!==1||B.paint.get("fill-extrusion-pattern").constantOr(1))gu(I,w,B,D,tt,Wt.disabled,re.disabled),gu(I,w,B,D,tt,I.stencilModeFor3D(),I.colorModeForRenderPass());else{var st=I.colorModeForRenderPass();gu(I,w,B,D,tt,Wt.disabled,st)}}},hillshade:function(I,w,B,D){if(I.renderPass==="offscreen"||I.renderPass==="translucent"){for(var W=I.context,tt=I.depthModeForSublayer(0,ge.ReadOnly),st=I.colorModeForRenderPass(),Ct=I.renderPass==="translucent"?I.stencilConfigForOverlap(D):[{},D],It=Ct[0],Ut=0,Zt=Ct[1];Ut<Zt.length;Ut+=1){var qt=Zt[Ut],de=w.getTile(qt);de.needsHillshadePrepare&&I.renderPass==="offscreen"?Ku(I,de,B,tt,Wt.disabled,st):I.renderPass==="translucent"&&au(I,de,B,tt,It[qt.overscaledZ],st)}W.viewport.set([0,0,I.width,I.height])}},raster:function(I,w,B,D){if(I.renderPass==="translucent"&&B.paint.get("raster-opacity")!==0&&D.length)for(var W=I.context,tt=W.gl,st=w.getSource(),Ct=I.useProgram("raster"),It=I.colorModeForRenderPass(),Ut=st instanceof rt?[{},D]:I.stencilConfigForOverlap(D),Zt=Ut[0],qt=Ut[1],de=qt[qt.length-1].overscaledZ,me=!I.options.moving,je=0,Oe=qt;je<Oe.length;je+=1){var ke=Oe[je],qe=I.depthModeForSublayer(ke.overscaledZ-de,B.paint.get("raster-opacity")===1?ge.ReadWrite:ge.ReadOnly,tt.LESS),an=w.getTile(ke),Xn=I.transform.calculatePosMatrix(ke.toUnwrapped(),me);an.registerFadeDuration(B.paint.get("raster-fade-duration"));var kn=w.findLoadedParent(ke,0),fr=Ls(an,kn,w,B,I.transform),Mr=void 0,Qr=void 0,Zr=B.paint.get("raster-resampling")==="nearest"?tt.NEAREST:tt.LINEAR;W.activeTexture.set(tt.TEXTURE0),an.texture.bind(Zr,tt.CLAMP_TO_EDGE,tt.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(tt.TEXTURE1),kn?(kn.texture.bind(Zr,tt.CLAMP_TO_EDGE,tt.LINEAR_MIPMAP_NEAREST),Mr=Math.pow(2,kn.tileID.overscaledZ-an.tileID.overscaledZ),Qr=[an.tileID.canonical.x*Mr%1,an.tileID.canonical.y*Mr%1]):an.texture.bind(Zr,tt.CLAMP_TO_EDGE,tt.LINEAR_MIPMAP_NEAREST);var Pi=Ml(Xn,Qr||[0,0],Mr||1,fr,B);st instanceof rt?Ct.draw(W,tt.TRIANGLES,qe,Wt.disabled,It,Te.disabled,Pi,B.id,st.boundsBuffer,I.quadTriangleIndexBuffer,st.boundsSegments):Ct.draw(W,tt.TRIANGLES,qe,Zt[ke.overscaledZ],It,Te.disabled,Pi,B.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments)}},background:function(I,w,B){var D=B.paint.get("background-color"),W=B.paint.get("background-opacity");if(W!==0){var tt=I.context,st=tt.gl,Ct=I.transform,It=Ct.tileSize,Ut=B.paint.get("background-pattern");if(!I.isPatternMissing(Ut)){var Zt=!Ut&&D.a===1&&W===1&&I.opaquePassEnabledForLayer()?"opaque":"translucent";if(I.renderPass===Zt){var qt=Wt.disabled,de=I.depthModeForSublayer(0,Zt==="opaque"?ge.ReadWrite:ge.ReadOnly),me=I.colorModeForRenderPass(),je=I.useProgram(Ut?"backgroundPattern":"background"),Oe=Ct.coveringTiles({tileSize:It});Ut&&(tt.activeTexture.set(st.TEXTURE0),I.imageManager.bind(I.context));for(var ke=B.getCrossfadeParameters(),qe=0,an=Oe;qe<an.length;qe+=1){var Xn=an[qe],kn=I.transform.calculatePosMatrix(Xn.toUnwrapped()),fr=Ut?pu(kn,W,I,Ut,{tileID:Xn,tileSize:It},ke):vu(kn,W,D);je.draw(tt,st.TRIANGLES,de,qt,me,Te.disabled,fr,B.id,I.tileExtentBuffer,I.quadTriangleIndexBuffer,I.tileExtentSegments)}}}}},debug:function(I,w,B){for(var D=0;D<B.length;D++)Nl(I,w,B[D])},custom:function(I,w,B){var D=I.context,W=B.implementation;if(I.renderPass==="offscreen"){var tt=W.prerender;tt&&(I.setCustomLayerDefaults(),D.setColorMode(I.colorModeForRenderPass()),tt.call(W,D.gl,I.transform.customLayerMatrix()),D.setDirty(),I.setBaseState())}else if(I.renderPass==="translucent"){I.setCustomLayerDefaults(),D.setColorMode(I.colorModeForRenderPass()),D.setStencilMode(Wt.disabled);var st=W.renderingMode==="3d"?new ge(I.context.gl.LEQUAL,ge.ReadWrite,I.depthRangeFor3D):I.depthModeForSublayer(0,ge.ReadOnly);D.setDepthMode(st),W.render(D.gl,I.transform.customLayerMatrix()),D.setDirty(),I.setBaseState(),D.bindFramebuffer.set(null)}}},go=function(I,w){this.context=new ue(I),this.transform=w,this._tileTextures={},this.setup(),this.numSublayers=be.maxUnderzooming+be.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ja,this.gpuTimers={}};go.prototype.resize=function(j,I){if(this.width=j*t.browser.devicePixelRatio,this.height=I*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var w=0,B=this.style._order;w<B.length;w+=1)this.style._layers[B[w]].resize()},go.prototype.setup=function(){var j=this.context,I=new t.StructArrayLayout2i4;I.emplaceBack(0,0),I.emplaceBack(t.EXTENT,0),I.emplaceBack(0,t.EXTENT),I.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=j.createVertexBuffer(I,Wa.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var w=new t.StructArrayLayout2i4;w.emplaceBack(0,0),w.emplaceBack(t.EXTENT,0),w.emplaceBack(0,t.EXTENT),w.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=j.createVertexBuffer(w,Wa.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var B=new t.StructArrayLayout4i8;B.emplaceBack(0,0,0,0),B.emplaceBack(t.EXTENT,0,t.EXTENT,0),B.emplaceBack(0,t.EXTENT,0,t.EXTENT),B.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=j.createVertexBuffer(B,J.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var D=new t.StructArrayLayout2i4;D.emplaceBack(0,0),D.emplaceBack(1,0),D.emplaceBack(0,1),D.emplaceBack(1,1),this.viewportBuffer=j.createVertexBuffer(D,Wa.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var W=new t.StructArrayLayout1ui2;W.emplaceBack(0),W.emplaceBack(1),W.emplaceBack(3),W.emplaceBack(2),W.emplaceBack(0),this.tileBorderIndexBuffer=j.createIndexBuffer(W);var tt=new t.StructArrayLayout3ui6;tt.emplaceBack(0,1,2),tt.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=j.createIndexBuffer(tt),this.emptyTexture=new t.Texture(j,{width:1,height:1,data:new Uint8Array([0,0,0,0])},j.gl.RGBA);var st=this.context.gl;this.stencilClearMode=new Wt({func:st.ALWAYS,mask:0},0,255,st.ZERO,st.ZERO,st.ZERO)},go.prototype.clearStencil=function(){var j=this.context,I=j.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var w=t.create();t.ortho(w,0,this.width,this.height,0,0,1),t.scale(w,w,[I.drawingBufferWidth,I.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(j,I.TRIANGLES,ge.disabled,this.stencilClearMode,re.disabled,Te.disabled,Fo(w),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},go.prototype._renderTileClippingMasks=function(j,I){if(this.currentStencilSource!==j.source&&j.isTileClipped()&&I&&I.length){this.currentStencilSource=j.source;var w=this.context,B=w.gl;this.nextStencilID+I.length>256&&this.clearStencil(),w.setColorMode(re.disabled),w.setDepthMode(ge.disabled);var D=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var W=0,tt=I;W<tt.length;W+=1){var st=tt[W],Ct=this._tileClippingMaskIDs[st.key]=this.nextStencilID++;D.draw(w,B.TRIANGLES,ge.disabled,new Wt({func:B.ALWAYS,mask:0},Ct,255,B.KEEP,B.KEEP,B.REPLACE),re.disabled,Te.disabled,Fo(st.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},go.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var j=this.nextStencilID++,I=this.context.gl;return new Wt({func:I.NOTEQUAL,mask:255},j,255,I.KEEP,I.KEEP,I.REPLACE)},go.prototype.stencilModeForClipping=function(j){var I=this.context.gl;return new Wt({func:I.EQUAL,mask:255},this._tileClippingMaskIDs[j.key],0,I.KEEP,I.KEEP,I.REPLACE)},go.prototype.stencilConfigForOverlap=function(j){var I,w=this.context.gl,B=j.sort(function(Ct,It){return It.overscaledZ-Ct.overscaledZ}),D=B[B.length-1].overscaledZ,W=B[0].overscaledZ-D+1;if(W>1){this.currentStencilSource=void 0,this.nextStencilID+W>256&&this.clearStencil();for(var tt={},st=0;st<W;st++)tt[st+D]=new Wt({func:w.GEQUAL,mask:255},st+this.nextStencilID,255,w.KEEP,w.KEEP,w.REPLACE);return this.nextStencilID+=W,[tt,B]}return[(I={},I[D]=Wt.disabled,I),B]},go.prototype.colorModeForRenderPass=function(){var j=this.context.gl;return this._showOverdrawInspector?new re([j.CONSTANT_COLOR,j.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?re.unblended:re.alphaBlended},go.prototype.depthModeForSublayer=function(j,I,w){if(!this.opaquePassEnabledForLayer())return ge.disabled;var B=1-((1+this.currentLayer)*this.numSublayers+j)*this.depthEpsilon;return new ge(w||this.context.gl.LEQUAL,I,[B,B])},go.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},go.prototype.render=function(j,I){var w=this;this.style=j,this.options=I,this.lineAtlas=j.lineAtlas,this.imageManager=j.imageManager,this.glyphManager=j.glyphManager,this.symbolFadeChange=j.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var B=this.style._order,D=this.style.sourceCaches;for(var W in D){var tt=D[W];tt.used&&tt.prepare(this.context)}var st,Ct,It={},Ut={},Zt={};for(var qt in D){var de=D[qt];It[qt]=de.getVisibleCoordinates(),Ut[qt]=It[qt].slice().reverse(),Zt[qt]=de.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var me=0;me<B.length;me++)if(this.style._layers[B[me]].is3D()){this.opaquePassCutoff=me;break}this.renderPass="offscreen";for(var je=0,Oe=B;je<Oe.length;je+=1){var ke=this.style._layers[Oe[je]];if(ke.hasOffscreenPass()&&!ke.isHidden(this.transform.zoom)){var qe=Ut[ke.source];(ke.type==="custom"||qe.length)&&this.renderLayer(this,D[ke.source],ke,qe)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:I.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=I.showOverdrawInspector,this.depthRangeFor3D=[0,1-(j._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=B.length-1;this.currentLayer>=0;this.currentLayer--){var an=this.style._layers[B[this.currentLayer]],Xn=D[an.source],kn=It[an.source];this._renderTileClippingMasks(an,kn),this.renderLayer(this,Xn,an,kn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<B.length;this.currentLayer++){var fr=this.style._layers[B[this.currentLayer]],Mr=D[fr.source],Qr=(fr.type==="symbol"?Zt:Ut)[fr.source];this._renderTileClippingMasks(fr,It[fr.source]),this.renderLayer(this,Mr,fr,Qr)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach(function(Zr){Zr.source&&!Zr.isHidden(w.transform.zoom)&&(Zr.source!==(Ct&&Ct.id)&&(Ct=w.style.sourceCaches[Zr.source]),(!st||st.getSource().maxzoom<Ct.getSource().maxzoom)&&(st=Ct))}),st&&Oo.debug(this,st,st.getVisibleCoordinates())),this.options.showPadding&&function(Zr){var Pi=Zr.transform.padding;pc(Zr,Zr.transform.height-(Pi.top||0),3,yl),pc(Zr,Pi.bottom||0,3,ic),Xu(Zr,Pi.left||0,3,Tl),Xu(Zr,Zr.transform.width-(Pi.right||0),3,Bl);var Ri=Zr.transform.centerPoint;(function(Ki,Xi,Oa,ja){Al(Ki,Xi-1,Oa-10,2,20,ja),Al(Ki,Xi-10,Oa-1,20,2,ja)})(Zr,Ri.x,Zr.transform.height-Ri.y,Vl)}(this),this.context.setDefault()},go.prototype.renderLayer=function(j,I,w,B){w.isHidden(this.transform.zoom)||(w.type==="background"||w.type==="custom"||B.length)&&(this.id=w.id,this.gpuTimingStart(w),Oo[w.type](j,I,w,B,this.style.placement.variableOffsets),this.gpuTimingEnd())},go.prototype.gpuTimingStart=function(j){if(this.options.gpuTiming){var I=this.context.extTimerQuery,w=this.gpuTimers[j.id];w||(w=this.gpuTimers[j.id]={calls:0,cpuTime:0,query:I.createQueryEXT()}),w.calls++,I.beginQueryEXT(I.TIME_ELAPSED_EXT,w.query)}},go.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var j=this.context.extTimerQuery;j.endQueryEXT(j.TIME_ELAPSED_EXT)}},go.prototype.collectGpuTimers=function(){var j=this.gpuTimers;return this.gpuTimers={},j},go.prototype.queryGpuTimers=function(j){var I={};for(var w in j){var B=j[w],D=this.context.extTimerQuery,W=D.getQueryObjectEXT(B.query,D.QUERY_RESULT_EXT)/1e6;D.deleteQueryEXT(B.query),I[w]=W}return I},go.prototype.translatePosMatrix=function(j,I,w,B,D){if(!w[0]&&!w[1])return j;var W=D?B==="map"?this.transform.angle:0:B==="viewport"?-this.transform.angle:0;if(W){var tt=Math.sin(W),st=Math.cos(W);w=[w[0]*st-w[1]*tt,w[0]*tt+w[1]*st]}var Ct=[D?w[0]:Ra(I,w[0],this.transform.zoom),D?w[1]:Ra(I,w[1],this.transform.zoom),0],It=new Float32Array(16);return t.translate(It,j,Ct),It},go.prototype.saveTileTexture=function(j){var I=this._tileTextures[j.size[0]];I?I.push(j):this._tileTextures[j.size[0]]=[j]},go.prototype.getTileTexture=function(j){var I=this._tileTextures[j];return I&&I.length>0?I.pop():null},go.prototype.isPatternMissing=function(j){if(!j)return!1;if(!j.from||!j.to)return!0;var I=this.imageManager.getPattern(j.from.toString()),w=this.imageManager.getPattern(j.to.toString());return!I||!w},go.prototype.useProgram=function(j,I){this.cache=this.cache||{};var w=""+j+(I?I.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[w]||(this.cache[w]=new il(this.context,j,Qs[j],I,Zs[j],this._showOverdrawInspector)),this.cache[w]},go.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},go.prototype.setBaseState=function(){var j=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(j.FUNC_ADD)},go.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},go.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var xl=function(I,w){this.points=I,this.planes=w};xl.fromInvProjectionMatrix=function(j,I,w){var B=Math.pow(2,w),D=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(tt){return t.transformMat4([],tt,j)}).map(function(tt){return t.scale$1([],tt,1/tt[3]/I*B)}),W=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(tt){var st=t.sub([],D[tt[0]],D[tt[1]]),Ct=t.sub([],D[tt[2]],D[tt[1]]),It=t.normalize([],t.cross([],st,Ct)),Ut=-t.dot(It,D[tt[1]]);return It.concat(Ut)});return new xl(D,W)};var sl=function(I,w){this.min=I,this.max=w,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};sl.prototype.quadrant=function(j){for(var I=[j%2==0,j<2],w=t.clone$2(this.min),B=t.clone$2(this.max),D=0;D<I.length;D++)w[D]=I[D]?this.min[D]:this.center[D],B[D]=I[D]?this.center[D]:this.max[D];return B[2]=this.max[2],new sl(w,B)},sl.prototype.distanceX=function(j){return Math.max(Math.min(this.max[0],j[0]),this.min[0])-j[0]},sl.prototype.distanceY=function(j){return Math.max(Math.min(this.max[1],j[1]),this.min[1])-j[1]},sl.prototype.intersects=function(j){for(var I=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],w=!0,B=0;B<j.planes.length;B++){for(var D=j.planes[B],W=0,tt=0;tt<I.length;tt++)W+=t.dot$1(D,I[tt])>=0;if(W===0)return 0;W!==I.length&&(w=!1)}if(w)return 2;for(var st=0;st<3;st++){for(var Ct=Number.MAX_VALUE,It=-Number.MAX_VALUE,Ut=0;Ut<j.points.length;Ut++){var Zt=j.points[Ut][st]-this.min[st];Ct=Math.min(Ct,Zt),It=Math.max(It,Zt)}if(It<0||Ct>this.max[st]-this.min[st])return 0}return 1};var Vs=function(I,w,B,D){if(I===void 0&&(I=0),w===void 0&&(w=0),B===void 0&&(B=0),D===void 0&&(D=0),isNaN(I)||I<0||isNaN(w)||w<0||isNaN(B)||B<0||isNaN(D)||D<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=I,this.bottom=w,this.left=B,this.right=D};Vs.prototype.interpolate=function(j,I,w){return I.top!=null&&j.top!=null&&(this.top=t.number(j.top,I.top,w)),I.bottom!=null&&j.bottom!=null&&(this.bottom=t.number(j.bottom,I.bottom,w)),I.left!=null&&j.left!=null&&(this.left=t.number(j.left,I.left,w)),I.right!=null&&j.right!=null&&(this.right=t.number(j.right,I.right,w)),this},Vs.prototype.getCenter=function(j,I){var w=t.clamp((this.left+j-this.right)/2,0,j),B=t.clamp((this.top+I-this.bottom)/2,0,I);return new t.Point(w,B)},Vs.prototype.equals=function(j){return this.top===j.top&&this.bottom===j.bottom&&this.left===j.left&&this.right===j.right},Vs.prototype.clone=function(){return new Vs(this.top,this.bottom,this.left,this.right)},Vs.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Da=function(I,w,B,D,W){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=W===void 0||W,this._minZoom=I||0,this._maxZoom=w||22,this._minPitch=B==null?0:B,this._maxPitch=D==null?60:D,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Vs,this._posMatrixCache={},this._alignedPosMatrixCache={}},bo={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Da.prototype.clone=function(){var j=new Da(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return j.tileSize=this.tileSize,j.latRange=this.latRange,j.width=this.width,j.height=this.height,j._center=this._center,j.zoom=this.zoom,j.angle=this.angle,j._fov=this._fov,j._pitch=this._pitch,j._unmodified=this._unmodified,j._edgeInsets=this._edgeInsets.clone(),j._calcMatrices(),j},bo.minZoom.get=function(){return this._minZoom},bo.minZoom.set=function(j){this._minZoom!==j&&(this._minZoom=j,this.zoom=Math.max(this.zoom,j))},bo.maxZoom.get=function(){return this._maxZoom},bo.maxZoom.set=function(j){this._maxZoom!==j&&(this._maxZoom=j,this.zoom=Math.min(this.zoom,j))},bo.minPitch.get=function(){return this._minPitch},bo.minPitch.set=function(j){this._minPitch!==j&&(this._minPitch=j,this.pitch=Math.max(this.pitch,j))},bo.maxPitch.get=function(){return this._maxPitch},bo.maxPitch.set=function(j){this._maxPitch!==j&&(this._maxPitch=j,this.pitch=Math.min(this.pitch,j))},bo.renderWorldCopies.get=function(){return this._renderWorldCopies},bo.renderWorldCopies.set=function(j){j===void 0?j=!0:j===null&&(j=!1),this._renderWorldCopies=j},bo.worldSize.get=function(){return this.tileSize*this.scale},bo.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},bo.size.get=function(){return new t.Point(this.width,this.height)},bo.bearing.get=function(){return-this.angle/Math.PI*180},bo.bearing.set=function(j){var I=-t.wrap(j,-180,180)*Math.PI/180;this.angle!==I&&(this._unmodified=!1,this.angle=I,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},bo.pitch.get=function(){return this._pitch/Math.PI*180},bo.pitch.set=function(j){var I=t.clamp(j,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==I&&(this._unmodified=!1,this._pitch=I,this._calcMatrices())},bo.fov.get=function(){return this._fov/Math.PI*180},bo.fov.set=function(j){j=Math.max(.01,Math.min(60,j)),this._fov!==j&&(this._unmodified=!1,this._fov=j/180*Math.PI,this._calcMatrices())},bo.zoom.get=function(){return this._zoom},bo.zoom.set=function(j){var I=Math.min(Math.max(j,this.minZoom),this.maxZoom);this._zoom!==I&&(this._unmodified=!1,this._zoom=I,this.scale=this.zoomScale(I),this.tileZoom=Math.floor(I),this.zoomFraction=I-this.tileZoom,this._constrain(),this._calcMatrices())},bo.center.get=function(){return this._center},bo.center.set=function(j){j.lat===this._center.lat&&j.lng===this._center.lng||(this._unmodified=!1,this._center=j,this._constrain(),this._calcMatrices())},bo.padding.get=function(){return this._edgeInsets.toJSON()},bo.padding.set=function(j){this._edgeInsets.equals(j)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,j,1),this._calcMatrices())},bo.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Da.prototype.isPaddingEqual=function(j){return this._edgeInsets.equals(j)},Da.prototype.interpolatePadding=function(j,I,w){this._unmodified=!1,this._edgeInsets.interpolate(j,I,w),this._constrain(),this._calcMatrices()},Da.prototype.coveringZoomLevel=function(j){var I=(j.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/j.tileSize));return Math.max(0,I)},Da.prototype.getVisibleUnwrappedCoordinates=function(j){var I=[new t.UnwrappedTileID(0,j)];if(this._renderWorldCopies)for(var w=this.pointCoordinate(new t.Point(0,0)),B=this.pointCoordinate(new t.Point(this.width,0)),D=this.pointCoordinate(new t.Point(this.width,this.height)),W=this.pointCoordinate(new t.Point(0,this.height)),tt=Math.floor(Math.min(w.x,B.x,D.x,W.x)),st=Math.floor(Math.max(w.x,B.x,D.x,W.x)),Ct=tt-1;Ct<=st+1;Ct++)Ct!==0&&I.push(new t.UnwrappedTileID(Ct,j));return I},Da.prototype.coveringTiles=function(j){var I=this.coveringZoomLevel(j),w=I;if(j.minzoom!==void 0&&I<j.minzoom)return[];j.maxzoom!==void 0&&I>j.maxzoom&&(I=j.maxzoom);var B=t.MercatorCoordinate.fromLngLat(this.center),D=Math.pow(2,I),W=[D*B.x,D*B.y,0],tt=xl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,I),st=j.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(st=I);var Ct=function(Pi){return{aabb:new sl([Pi*D,0,0],[(Pi+1)*D,D,0]),zoom:0,x:0,y:0,wrap:Pi,fullyVisible:!1}},It=[],Ut=[],Zt=I,qt=j.reparseOverscaled?w:I;if(this._renderWorldCopies)for(var de=1;de<=3;de++)It.push(Ct(-de)),It.push(Ct(de));for(It.push(Ct(0));It.length>0;){var me=It.pop(),je=me.x,Oe=me.y,ke=me.fullyVisible;if(!ke){var qe=me.aabb.intersects(tt);if(qe===0)continue;ke=qe===2}var an=me.aabb.distanceX(W),Xn=me.aabb.distanceY(W),kn=Math.max(Math.abs(an),Math.abs(Xn));if(me.zoom===Zt||kn>3+(1<<Zt-me.zoom)-2&&me.zoom>=st)Ut.push({tileID:new t.OverscaledTileID(me.zoom===Zt?qt:me.zoom,me.wrap,me.zoom,je,Oe),distanceSq:t.sqrLen([W[0]-.5-je,W[1]-.5-Oe])});else for(var fr=0;fr<4;fr++){var Mr=(je<<1)+fr%2,Qr=(Oe<<1)+(fr>>1);It.push({aabb:me.aabb.quadrant(fr),zoom:me.zoom+1,x:Mr,y:Qr,wrap:me.wrap,fullyVisible:ke})}}return Ut.sort(function(Zr,Pi){return Zr.distanceSq-Pi.distanceSq}).map(function(Zr){return Zr.tileID})},Da.prototype.resize=function(j,I){this.width=j,this.height=I,this.pixelsToGLUnits=[2/j,-2/I],this._constrain(),this._calcMatrices()},bo.unmodified.get=function(){return this._unmodified},Da.prototype.zoomScale=function(j){return Math.pow(2,j)},Da.prototype.scaleZoom=function(j){return Math.log(j)/Math.LN2},Da.prototype.project=function(j){var I=t.clamp(j.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(j.lng)*this.worldSize,t.mercatorYfromLat(I)*this.worldSize)},Da.prototype.unproject=function(j){return new t.MercatorCoordinate(j.x/this.worldSize,j.y/this.worldSize).toLngLat()},bo.point.get=function(){return this.project(this.center)},Da.prototype.setLocationAtPoint=function(j,I){var w=this.pointCoordinate(I),B=this.pointCoordinate(this.centerPoint),D=this.locationCoordinate(j),W=new t.MercatorCoordinate(D.x-(w.x-B.x),D.y-(w.y-B.y));this.center=this.coordinateLocation(W),this._renderWorldCopies&&(this.center=this.center.wrap())},Da.prototype.locationPoint=function(j){return this.coordinatePoint(this.locationCoordinate(j))},Da.prototype.pointLocation=function(j){return this.coordinateLocation(this.pointCoordinate(j))},Da.prototype.locationCoordinate=function(j){return t.MercatorCoordinate.fromLngLat(j)},Da.prototype.coordinateLocation=function(j){return j.toLngLat()},Da.prototype.pointCoordinate=function(j){var I=[j.x,j.y,0,1],w=[j.x,j.y,1,1];t.transformMat4(I,I,this.pixelMatrixInverse),t.transformMat4(w,w,this.pixelMatrixInverse);var B=I[3],D=w[3],W=I[1]/B,tt=w[1]/D,st=I[2]/B,Ct=w[2]/D,It=st===Ct?0:(0-st)/(Ct-st);return new t.MercatorCoordinate(t.number(I[0]/B,w[0]/D,It)/this.worldSize,t.number(W,tt,It)/this.worldSize)},Da.prototype.coordinatePoint=function(j){var I=[j.x*this.worldSize,j.y*this.worldSize,0,1];return t.transformMat4(I,I,this.pixelMatrix),new t.Point(I[0]/I[3],I[1]/I[3])},Da.prototype.getBounds=function(){return new t.LngLatBounds().extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Da.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Da.prototype.setMaxBounds=function(j){j?(this.lngRange=[j.getWest(),j.getEast()],this.latRange=[j.getSouth(),j.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Da.prototype.calculatePosMatrix=function(j,I){I===void 0&&(I=!1);var w=j.key,B=I?this._alignedPosMatrixCache:this._posMatrixCache;if(B[w])return B[w];var D=j.canonical,W=this.worldSize/this.zoomScale(D.z),tt=D.x+Math.pow(2,D.z)*j.wrap,st=t.identity(new Float64Array(16));return t.translate(st,st,[tt*W,D.y*W,0]),t.scale(st,st,[W/t.EXTENT,W/t.EXTENT,1]),t.multiply(st,I?this.alignedProjMatrix:this.projMatrix,st),B[w]=new Float32Array(st),B[w]},Da.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Da.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var j,I,w,B,D=-90,W=90,tt=-180,st=180,Ct=this.size,It=this._unmodified;if(this.latRange){var Ut=this.latRange;D=t.mercatorYfromLat(Ut[1])*this.worldSize,j=(W=t.mercatorYfromLat(Ut[0])*this.worldSize)-D<Ct.y?Ct.y/(W-D):0}if(this.lngRange){var Zt=this.lngRange;tt=t.mercatorXfromLng(Zt[0])*this.worldSize,I=(st=t.mercatorXfromLng(Zt[1])*this.worldSize)-tt<Ct.x?Ct.x/(st-tt):0}var qt=this.point,de=Math.max(I||0,j||0);if(de)return this.center=this.unproject(new t.Point(I?(st+tt)/2:qt.x,j?(W+D)/2:qt.y)),this.zoom+=this.scaleZoom(de),this._unmodified=It,void(this._constraining=!1);if(this.latRange){var me=qt.y,je=Ct.y/2;me-je<D&&(B=D+je),me+je>W&&(B=W-je)}if(this.lngRange){var Oe=qt.x,ke=Ct.x/2;Oe-ke<tt&&(w=tt+ke),Oe+ke>st&&(w=st-ke)}w===void 0&&B===void 0||(this.center=this.unproject(new t.Point(w!==void 0?w:qt.x,B!==void 0?B:qt.y))),this._unmodified=It,this._constraining=!1}},Da.prototype._calcMatrices=function(){if(this.height){var j=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var I=Math.PI/2+this._pitch,w=this._fov*(.5+j.y/this.height),B=Math.sin(w)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-I-w,.01,Math.PI-.01)),D=this.point,W=D.x,tt=D.y,st=1.01*(Math.cos(Math.PI/2-this._pitch)*B+this.cameraToCenterDistance),Ct=this.height/50,It=new Float64Array(16);t.perspective(It,this._fov,this.width/this.height,Ct,st),It[8]=2*-j.x/this.width,It[9]=2*j.y/this.height,t.scale(It,It,[1,-1,1]),t.translate(It,It,[0,0,-this.cameraToCenterDistance]),t.rotateX(It,It,this._pitch),t.rotateZ(It,It,this.angle),t.translate(It,It,[-W,-tt,0]),this.mercatorMatrix=t.scale([],It,[this.worldSize,this.worldSize,this.worldSize]),t.scale(It,It,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=It,this.invProjMatrix=t.invert([],this.projMatrix);var Ut=this.width%2/2,Zt=this.height%2/2,qt=Math.cos(this.angle),de=Math.sin(this.angle),me=W-Math.round(W)+qt*Ut+de*Zt,je=tt-Math.round(tt)+qt*Zt+de*Ut,Oe=new Float64Array(It);if(t.translate(Oe,Oe,[me>.5?me-1:me,je>.5?je-1:je,0]),this.alignedProjMatrix=Oe,It=t.create(),t.scale(It,It,[this.width/2,-this.height/2,1]),t.translate(It,It,[1,-1,0]),this.labelPlaneMatrix=It,It=t.create(),t.scale(It,It,[1,-1,1]),t.translate(It,It,[-1,-1,0]),t.scale(It,It,[2/this.width,2/this.height,1]),this.glCoordMatrix=It,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(It=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=It,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Da.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var j=this.pointCoordinate(new t.Point(0,0)),I=[j.x*this.worldSize,j.y*this.worldSize,0,1];return t.transformMat4(I,I,this.pixelMatrix)[3]/this.cameraToCenterDistance},Da.prototype.getCameraPoint=function(){var j=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,j))},Da.prototype.getCameraQueryGeometry=function(j){var I=this.getCameraPoint();if(j.length===1)return[j[0],I];for(var w=I.x,B=I.y,D=I.x,W=I.y,tt=0,st=j;tt<st.length;tt+=1){var Ct=st[tt];w=Math.min(w,Ct.x),B=Math.min(B,Ct.y),D=Math.max(D,Ct.x),W=Math.max(W,Ct.y)}return[new t.Point(w,B),new t.Point(D,B),new t.Point(D,W),new t.Point(w,W),new t.Point(w,B)]},Object.defineProperties(Da.prototype,bo);var Ns=function(I){var w,B,D,W;this._hashName=I&&encodeURIComponent(I),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(w=this._updateHashUnthrottled.bind(this),B=!1,D=null,W=function(){D=null,B&&(w(),D=setTimeout(W,300),B=!1)},function(){return B=!0,D||W(),D})};Ns.prototype.addTo=function(j){return this._map=j,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ns.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ns.prototype.getHashString=function(j){var I=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,B=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),D=Math.pow(10,B),W=Math.round(I.lng*D)/D,tt=Math.round(I.lat*D)/D,st=this._map.getBearing(),Ct=this._map.getPitch(),It="";if(It+=j?"/"+W+"/"+tt+"/"+w:w+"/"+tt+"/"+W,(st||Ct)&&(It+="/"+Math.round(10*st)/10),Ct&&(It+="/"+Math.round(Ct)),this._hashName){var Ut=this._hashName,Zt=!1,qt=t.window.location.hash.slice(1).split("&").map(function(de){var me=de.split("=")[0];return me===Ut?(Zt=!0,me+"="+It):de}).filter(function(de){return de});return Zt||qt.push(Ut+"="+It),"#"+qt.join("&")}return"#"+It},Ns.prototype._getCurrentHash=function(){var j,I=this,w=t.window.location.hash.replace("#","");return this._hashName?(w.split("&").map(function(B){return B.split("=")}).forEach(function(B){B[0]===I._hashName&&(j=B)}),(j&&j[1]||"").split("/")):w.split("/")},Ns.prototype._onHashChange=function(){var j=this._getCurrentHash();if(j.length>=3&&!j.some(function(w){return isNaN(w)})){var I=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(j[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+j[2],+j[1]],zoom:+j[0],bearing:I,pitch:+(j[4]||0)}),!0}return!1},Ns.prototype._updateHashUnthrottled=function(){var j=t.window.location.href.replace(/(#.+)?$/,this.getHashString());try{t.window.history.replaceState(t.window.history.state,null,j)}catch(I){}};var Cl={linearity:.3,easing:t.bezier(0,0,.3,1)},ul=t.extend({deceleration:2500,maxSpeed:1400},Cl),Ju=t.extend({deceleration:20,maxSpeed:1400},Cl),Sc=t.extend({deceleration:1e3,maxSpeed:360},Cl),Wl=t.extend({deceleration:1e3,maxSpeed:90},Cl),$u=function(I){this._map=I,this.clear()};function tu(j,I){(!j.duration||j.duration<I.duration)&&(j.duration=I.duration,j.easing=I.easing)}function Ws(j,I,w){var B=w.maxSpeed,D=w.linearity,W=w.deceleration,tt=t.clamp(j*D/(I/1e3),-B,B),st=Math.abs(tt)/(W*D);return{easing:w.easing,duration:1e3*st,amount:tt*(st/2)}}$u.prototype.clear=function(){this._inertiaBuffer=[]},$u.prototype.record=function(j){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:j})},$u.prototype._drainInertiaBuffer=function(){for(var j=this._inertiaBuffer,I=t.browser.now();j.length>0&&I-j[0].time>160;)j.shift()},$u.prototype._onMoveEnd=function(j){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var I={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},w=0,B=this._inertiaBuffer;w<B.length;w+=1){var D=B[w].settings;I.zoom+=D.zoomDelta||0,I.bearing+=D.bearingDelta||0,I.pitch+=D.pitchDelta||0,D.panDelta&&I.pan._add(D.panDelta),D.around&&(I.around=D.around),D.pinchAround&&(I.pinchAround=D.pinchAround)}var W=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,tt={};if(I.pan.mag()){var st=Ws(I.pan.mag(),W,t.extend({},ul,j||{}));tt.offset=I.pan.mult(st.amount/I.pan.mag()),tt.center=this._map.transform.center,tu(tt,st)}if(I.zoom){var Ct=Ws(I.zoom,W,Ju);tt.zoom=this._map.transform.zoom+Ct.amount,tu(tt,Ct)}if(I.bearing){var It=Ws(I.bearing,W,Sc);tt.bearing=this._map.transform.bearing+t.clamp(It.amount,-179,179),tu(tt,It)}if(I.pitch){var Ut=Ws(I.pitch,W,Wl);tt.pitch=this._map.transform.pitch+Ut.amount,tu(tt,Ut)}if(tt.zoom||tt.bearing){var Zt=I.pinchAround===void 0?I.around:I.pinchAround;tt.around=Zt?this._map.unproject(Zt):this._map.getCenter()}return this.clear(),t.extend(tt,{noMoveStart:!0})}};var is=function(j){function I(B,D,W,tt){tt===void 0&&(tt={});var st=s.mousePos(D.getCanvasContainer(),W),Ct=D.unproject(st);j.call(this,B,t.extend({point:st,lngLat:Ct,originalEvent:W},tt)),this._defaultPrevented=!1,this.target=D}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),eu=function(j){function I(B,D,W){var tt=B==="touchend"?W.changedTouches:W.touches,st=s.touchPos(D.getCanvasContainer(),tt),Ct=st.map(function(Zt){return D.unproject(Zt)}),It=st.reduce(function(Zt,qt,de,me){return Zt.add(qt.div(me.length))},new t.Point(0,0)),Ut=D.unproject(It);j.call(this,B,{points:st,point:It,lngLats:Ct,lngLat:Ut,originalEvent:W}),this._defaultPrevented=!1}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),Fu=function(j){function I(B,D,W){j.call(this,B,{originalEvent:W}),this._defaultPrevented=!1}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),us=function(I,w){this._map=I,this._clickTolerance=w.clickTolerance};us.prototype.reset=function(){delete this._mousedownPos},us.prototype.wheel=function(j){return this._firePreventable(new Fu(j.type,this._map,j))},us.prototype.mousedown=function(j,I){return this._mousedownPos=I,this._firePreventable(new is(j.type,this._map,j))},us.prototype.mouseup=function(j){this._map.fire(new is(j.type,this._map,j))},us.prototype.click=function(j,I){this._mousedownPos&&this._mousedownPos.dist(I)>=this._clickTolerance||this._map.fire(new is(j.type,this._map,j))},us.prototype.dblclick=function(j){return this._firePreventable(new is(j.type,this._map,j))},us.prototype.mouseover=function(j){this._map.fire(new is(j.type,this._map,j))},us.prototype.mouseout=function(j){this._map.fire(new is(j.type,this._map,j))},us.prototype.touchstart=function(j){return this._firePreventable(new eu(j.type,this._map,j))},us.prototype.touchmove=function(j){this._map.fire(new eu(j.type,this._map,j))},us.prototype.touchend=function(j){this._map.fire(new eu(j.type,this._map,j))},us.prototype.touchcancel=function(j){this._map.fire(new eu(j.type,this._map,j))},us.prototype._firePreventable=function(j){if(this._map.fire(j),j.defaultPrevented)return{}},us.prototype.isEnabled=function(){return!0},us.prototype.isActive=function(){return!1},us.prototype.enable=function(){},us.prototype.disable=function(){};var Wi=function(I){this._map=I};Wi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Wi.prototype.mousemove=function(j){this._map.fire(new is(j.type,this._map,j))},Wi.prototype.mousedown=function(){this._delayContextMenu=!0},Wi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new is("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Wi.prototype.contextmenu=function(j){this._delayContextMenu?this._contextMenuEvent=j:this._map.fire(new is(j.type,this._map,j)),this._map.listens("contextmenu")&&j.preventDefault()},Wi.prototype.isEnabled=function(){return!0},Wi.prototype.isActive=function(){return!1},Wi.prototype.enable=function(){},Wi.prototype.disable=function(){};var js=function(I,w){this._map=I,this._el=I.getCanvasContainer(),this._container=I.getContainer(),this._clickTolerance=w.clickTolerance||1};function Qu(j,I){for(var w={},B=0;B<j.length;B++)w[j[B].identifier]=I[B];return w}js.prototype.isEnabled=function(){return!!this._enabled},js.prototype.isActive=function(){return!!this._active},js.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},js.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},js.prototype.mousedown=function(j,I){this.isEnabled()&&j.shiftKey&&j.button===0&&(s.disableDrag(),this._startPos=this._lastPos=I,this._active=!0)},js.prototype.mousemoveWindow=function(j,I){if(this._active){var w=I;if(!(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)){var B=this._startPos;this._lastPos=w,this._box||(this._box=s.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",j));var D=Math.min(B.x,w.x),W=Math.max(B.x,w.x),tt=Math.min(B.y,w.y),st=Math.max(B.y,w.y);s.setTransform(this._box,"translate("+D+"px,"+tt+"px)"),this._box.style.width=W-D+"px",this._box.style.height=st-tt+"px"}}},js.prototype.mouseupWindow=function(j,I){var w=this;if(this._active&&j.button===0){var B=this._startPos,D=I;if(this.reset(),s.suppressClick(),B.x!==D.x||B.y!==D.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:j})),{cameraAnimation:function(tt){return tt.fitScreenCoordinates(B,D,w._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",j)}},js.prototype.keydown=function(j){this._active&&j.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",j))},js.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(s.remove(this._box),this._box=null),s.enableDrag(),delete this._startPos,delete this._lastPos},js.prototype._fireEvent=function(j,I){return this._map.fire(new t.Event(j,{originalEvent:I}))};var zu=function(I){this.reset(),this.numTouches=I.numTouches};zu.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},zu.prototype.touchstart=function(j,I,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=j.timeStamp),w.length===this.numTouches&&(this.centroid=function(B){for(var D=new t.Point(0,0),W=0,tt=B;W<tt.length;W+=1)D._add(tt[W]);return D.div(B.length)}(I),this.touches=Qu(w,I)))},zu.prototype.touchmove=function(j,I,w){if(!this.aborted&&this.centroid){var B=Qu(w,I);for(var D in this.touches){var W=B[D];(!W||W.dist(this.touches[D])>30)&&(this.aborted=!0)}}},zu.prototype.touchend=function(j,I,w){if((!this.centroid||j.timeStamp-this.startTime>500)&&(this.aborted=!0),w.length===0){var B=!this.aborted&&this.centroid;if(this.reset(),B)return B}};var Uo=function(I){this.singleTap=new zu(I),this.numTaps=I.numTaps,this.reset()};Uo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Uo.prototype.touchstart=function(j,I,w){this.singleTap.touchstart(j,I,w)},Uo.prototype.touchmove=function(j,I,w){this.singleTap.touchmove(j,I,w)},Uo.prototype.touchend=function(j,I,w){var B=this.singleTap.touchend(j,I,w);if(B){var D=j.timeStamp-this.lastTime<500,W=!this.lastTap||this.lastTap.dist(B)<30;if(D&&W||this.reset(),this.count++,this.lastTime=j.timeStamp,this.lastTap=B,this.count===this.numTaps)return this.reset(),B}};var Wo=function(){this._zoomIn=new Uo({numTouches:1,numTaps:2}),this._zoomOut=new Uo({numTouches:2,numTaps:1}),this.reset()};Wo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Wo.prototype.touchstart=function(j,I,w){this._zoomIn.touchstart(j,I,w),this._zoomOut.touchstart(j,I,w)},Wo.prototype.touchmove=function(j,I,w){this._zoomIn.touchmove(j,I,w),this._zoomOut.touchmove(j,I,w)},Wo.prototype.touchend=function(j,I,w){var B=this,D=this._zoomIn.touchend(j,I,w),W=this._zoomOut.touchend(j,I,w);return D?(this._active=!0,j.preventDefault(),setTimeout(function(){return B.reset()},0),{cameraAnimation:function(st){return st.easeTo({duration:300,zoom:st.getZoom()+1,around:st.unproject(D)},{originalEvent:j})}}):W?(this._active=!0,j.preventDefault(),setTimeout(function(){return B.reset()},0),{cameraAnimation:function(st){return st.easeTo({duration:300,zoom:st.getZoom()-1,around:st.unproject(W)},{originalEvent:j})}}):void 0},Wo.prototype.touchcancel=function(){this.reset()},Wo.prototype.enable=function(){this._enabled=!0},Wo.prototype.disable=function(){this._enabled=!1,this.reset()},Wo.prototype.isEnabled=function(){return this._enabled},Wo.prototype.isActive=function(){return this._active};var mu={0:1,2:2},_i=function(I){this.reset(),this._clickTolerance=I.clickTolerance||1};_i.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},_i.prototype._correctButton=function(j,I){return!1},_i.prototype._move=function(j,I){return{}},_i.prototype.mousedown=function(j,I){if(!this._lastPoint){var w=s.mouseButton(j);this._correctButton(j,w)&&(this._lastPoint=I,this._eventButton=w)}},_i.prototype.mousemoveWindow=function(j,I){var w=this._lastPoint;if(w){if(j.preventDefault(),function(B,D){var W=mu[D];return B.buttons===void 0||(B.buttons&W)!==W}(j,this._eventButton))this.reset();else if(this._moved||!(I.dist(w)<this._clickTolerance))return this._moved=!0,this._lastPoint=I,this._move(w,I)}},_i.prototype.mouseupWindow=function(j){this._lastPoint&&s.mouseButton(j)===this._eventButton&&(this._moved&&s.suppressClick(),this.reset())},_i.prototype.enable=function(){this._enabled=!0},_i.prototype.disable=function(){this._enabled=!1,this.reset()},_i.prototype.isEnabled=function(){return this._enabled},_i.prototype.isActive=function(){return this._active};var yu=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.mousedown=function(w,B){j.prototype.mousedown.call(this,w,B),this._lastPoint&&(this._active=!0)},I.prototype._correctButton=function(w,B){return B===0&&!w.ctrlKey},I.prototype._move=function(w,B){return{around:B,panDelta:B.sub(w)}},I}(_i),Cu=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype._correctButton=function(w,B){return B===0&&w.ctrlKey||B===2},I.prototype._move=function(w,B){var D=.8*(B.x-w.x);if(D)return this._active=!0,{bearingDelta:D}},I.prototype.contextmenu=function(w){w.preventDefault()},I}(_i),Ou=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype._correctButton=function(w,B){return B===0&&w.ctrlKey||B===2},I.prototype._move=function(w,B){var D=-.5*(B.y-w.y);if(D)return this._active=!0,{pitchDelta:D}},I.prototype.contextmenu=function(w){w.preventDefault()},I}(_i),Ks=function(I){this._minTouches=1,this._clickTolerance=I.clickTolerance||1,this.reset()};Ks.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Ks.prototype.touchstart=function(j,I,w){return this._calculateTransform(j,I,w)},Ks.prototype.touchmove=function(j,I,w){if(this._active&&!(w.length<this._minTouches))return j.preventDefault(),this._calculateTransform(j,I,w)},Ks.prototype.touchend=function(j,I,w){this._calculateTransform(j,I,w),this._active&&w.length<this._minTouches&&this.reset()},Ks.prototype.touchcancel=function(){this.reset()},Ks.prototype._calculateTransform=function(j,I,w){w.length>0&&(this._active=!0);var B=Qu(w,I),D=new t.Point(0,0),W=new t.Point(0,0),tt=0;for(var st in B){var Ct=B[st],It=this._touches[st];It&&(D._add(Ct),W._add(Ct.sub(It)),tt++,B[st]=Ct)}if(this._touches=B,!(tt<this._minTouches)&&W.mag()){var Ut=W.div(tt);if(this._sum._add(Ut),!(this._sum.mag()<this._clickTolerance))return{around:D.div(tt),panDelta:Ut}}},Ks.prototype.enable=function(){this._enabled=!0},Ks.prototype.disable=function(){this._enabled=!1,this.reset()},Ks.prototype.isEnabled=function(){return this._enabled},Ks.prototype.isActive=function(){return this._active};var we=function(){this.reset()};function Pe(j,I,w){for(var B=0;B<j.length;B++)if(j[B].identifier===w)return I[B]}function hn(j,I){return Math.log(j/I)/Math.LN2}we.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},we.prototype._start=function(j){},we.prototype._move=function(j,I,w){return{}},we.prototype.touchstart=function(j,I,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([I[0],I[1]]))},we.prototype.touchmove=function(j,I,w){if(this._firstTwoTouches){j.preventDefault();var B=this._firstTwoTouches,D=B[1],W=Pe(w,I,B[0]),tt=Pe(w,I,D);if(W&&tt){var st=this._aroundCenter?null:W.add(tt).div(2);return this._move([W,tt],st,j)}}},we.prototype.touchend=function(j,I,w){if(this._firstTwoTouches){var B=this._firstTwoTouches,D=B[1],W=Pe(w,I,B[0]),tt=Pe(w,I,D);W&&tt||(this._active&&s.suppressClick(),this.reset())}},we.prototype.touchcancel=function(){this.reset()},we.prototype.enable=function(j){this._enabled=!0,this._aroundCenter=!!j&&j.around==="center"},we.prototype.disable=function(){this._enabled=!1,this.reset()},we.prototype.isEnabled=function(){return this._enabled},we.prototype.isActive=function(){return this._active};var tn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),delete this._distance,delete this._startDistance},I.prototype._start=function(w){this._startDistance=this._distance=w[0].dist(w[1])},I.prototype._move=function(w,B){var D=this._distance;if(this._distance=w[0].dist(w[1]),this._active||!(Math.abs(hn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:hn(this._distance,D),pinchAround:B}},I}(we);function On(j,I){return 180*j.angleWith(I)/Math.PI}var hr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},I.prototype._start=function(w){this._startVector=this._vector=w[0].sub(w[1]),this._minDiameter=w[0].dist(w[1])},I.prototype._move=function(w,B){var D=this._vector;if(this._vector=w[0].sub(w[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:On(this._vector,D),pinchAround:B}},I.prototype._isBelowThreshold=function(w){this._minDiameter=Math.min(this._minDiameter,w.mag());var B=25/(Math.PI*this._minDiameter)*360,D=On(w,this._startVector);return Math.abs(D)<B},I}(we);function Rr(j){return Math.abs(j.y)>Math.abs(j.x)}var Xr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},I.prototype._start=function(w){this._lastPoints=w,Rr(w[0].sub(w[1]))&&(this._valid=!1)},I.prototype._move=function(w,B,D){var W=w[0].sub(this._lastPoints[0]),tt=w[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(W,tt,D.timeStamp),this._valid)return this._lastPoints=w,this._active=!0,{pitchDelta:(W.y+tt.y)/2*-.5}},I.prototype.gestureBeginsVertically=function(w,B,D){if(this._valid!==void 0)return this._valid;var W=w.mag()>=2,tt=B.mag()>=2;if(W||tt){if(!W||!tt)return this._firstMove===void 0&&(this._firstMove=D),D-this._firstMove<100&&void 0;var st=w.y>0==B.y>0;return Rr(w)&&Rr(B)&&st}},I}(we),ni={panStep:100,bearingStep:15,pitchStep:10},zr=function(){var I=ni;this._panStep=I.panStep,this._bearingStep=I.bearingStep,this._pitchStep=I.pitchStep,this._rotationDisabled=!1};function li(j){return j*(2-j)}zr.prototype.reset=function(){this._active=!1},zr.prototype.keydown=function(j){var I=this;if(!(j.altKey||j.ctrlKey||j.metaKey)){var w=0,B=0,D=0,W=0,tt=0;switch(j.keyCode){case 61:case 107:case 171:case 187:w=1;break;case 189:case 109:case 173:w=-1;break;case 37:j.shiftKey?B=-1:(j.preventDefault(),W=-1);break;case 39:j.shiftKey?B=1:(j.preventDefault(),W=1);break;case 38:j.shiftKey?D=1:(j.preventDefault(),tt=-1);break;case 40:j.shiftKey?D=-1:(j.preventDefault(),tt=1);break;default:return}return this._rotationDisabled&&(B=0,D=0),{cameraAnimation:function(Ct){var It=Ct.getZoom();Ct.easeTo({duration:300,easeId:"keyboardHandler",easing:li,zoom:w?Math.round(It)+w*(j.shiftKey?2:1):It,bearing:Ct.getBearing()+B*I._bearingStep,pitch:Ct.getPitch()+D*I._pitchStep,offset:[-W*I._panStep,-tt*I._panStep],center:Ct.getCenter()},{originalEvent:j})}}}},zr.prototype.enable=function(){this._enabled=!0},zr.prototype.disable=function(){this._enabled=!1,this.reset()},zr.prototype.isEnabled=function(){return this._enabled},zr.prototype.isActive=function(){return this._active},zr.prototype.disableRotation=function(){this._rotationDisabled=!0},zr.prototype.enableRotation=function(){this._rotationDisabled=!1};var yr=function(I,w){this._map=I,this._el=I.getCanvasContainer(),this._handler=w,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};yr.prototype.setZoomRate=function(j){this._defaultZoomRate=j},yr.prototype.setWheelZoomRate=function(j){this._wheelZoomRate=j},yr.prototype.isEnabled=function(){return!!this._enabled},yr.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},yr.prototype.isZooming=function(){return!!this._zooming},yr.prototype.enable=function(j){this.isEnabled()||(this._enabled=!0,this._aroundCenter=j&&j.around==="center")},yr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},yr.prototype.wheel=function(j){if(this.isEnabled()){var I=j.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*j.deltaY:j.deltaY,w=t.browser.now(),B=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,I!==0&&I%4.000244140625==0?this._type="wheel":I!==0&&Math.abs(I)<4?this._type="trackpad":B>400?(this._type=null,this._lastValue=I,this._timeout=setTimeout(this._onTimeout,40,j)):this._type||(this._type=Math.abs(B*I)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,I+=this._lastValue)),j.shiftKey&&I&&(I/=4),this._type&&(this._lastWheelEvent=j,this._delta-=I,this._active||this._start(j)),j.preventDefault()}},yr.prototype._onTimeout=function(j){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(j)},yr.prototype._start=function(j){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var I=s.mousePos(this._el,j);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(I)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},yr.prototype.renderFrame=function(){var j=this;if(this._frameId&&(this._frameId=null,this.isActive())){var I=this._map.transform;if(this._delta!==0){var w=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,B=2/(1+Math.exp(-Math.abs(this._delta*w)));this._delta<0&&B!==0&&(B=1/B);var D=typeof this._targetZoom=="number"?I.zoomScale(this._targetZoom):I.scale;this._targetZoom=Math.min(I.maxZoom,Math.max(I.minZoom,I.scaleZoom(D*B))),this._type==="wheel"&&(this._startZoom=I.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var W,tt=typeof this._targetZoom=="number"?this._targetZoom:I.zoom,st=this._startZoom,Ct=this._easing,It=!1;if(this._type==="wheel"&&st&&Ct){var Ut=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),Zt=Ct(Ut);W=t.number(st,tt,Zt),Ut<1?this._frameId||(this._frameId=!0):It=!0}else W=tt,It=!0;return this._active=!0,It&&(this._active=!1,this._finishTimeout=setTimeout(function(){j._zooming=!1,j._handler._triggerRenderFrame(),delete j._targetZoom,delete j._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!It,zoomDelta:W-I.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},yr.prototype._smoothOutEasing=function(j){var I=t.ease;if(this._prevEase){var w=this._prevEase,B=(t.browser.now()-w.start)/w.duration,D=w.easing(B+.01)-w.easing(B),W=.27/Math.sqrt(D*D+1e-4)*.01,tt=Math.sqrt(.0729-W*W);I=t.bezier(W,tt,.25,1)}return this._prevEase={start:t.browser.now(),duration:j,easing:I},I},yr.prototype.reset=function(){this._active=!1};var Kt=function(I,w){this._clickZoom=I,this._tapZoom=w};Kt.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Kt.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Kt.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Kt.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var te=function(){this.reset()};te.prototype.reset=function(){this._active=!1},te.prototype.dblclick=function(j,I){return j.preventDefault(),{cameraAnimation:function(B){B.easeTo({duration:300,zoom:B.getZoom()+(j.shiftKey?-1:1),around:B.unproject(I)},{originalEvent:j})}}},te.prototype.enable=function(){this._enabled=!0},te.prototype.disable=function(){this._enabled=!1,this.reset()},te.prototype.isEnabled=function(){return this._enabled},te.prototype.isActive=function(){return this._active};var Le=function(){this._tap=new Uo({numTouches:1,numTaps:1}),this.reset()};Le.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Le.prototype.touchstart=function(j,I,w){this._swipePoint||(this._tapTime&&j.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?w.length>0&&(this._swipePoint=I[0],this._swipeTouch=w[0].identifier):this._tap.touchstart(j,I,w))},Le.prototype.touchmove=function(j,I,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;var B=I[0],D=B.y-this._swipePoint.y;return this._swipePoint=B,j.preventDefault(),this._active=!0,{zoomDelta:D/128}}}else this._tap.touchmove(j,I,w)},Le.prototype.touchend=function(j,I,w){this._tapTime?this._swipePoint&&w.length===0&&this.reset():this._tap.touchend(j,I,w)&&(this._tapTime=j.timeStamp)},Le.prototype.touchcancel=function(){this.reset()},Le.prototype.enable=function(){this._enabled=!0},Le.prototype.disable=function(){this._enabled=!1,this.reset()},Le.prototype.isEnabled=function(){return this._enabled},Le.prototype.isActive=function(){return this._active};var Se=function(I,w,B){this._el=I,this._mousePan=w,this._touchPan=B};Se.prototype.enable=function(j){this._inertiaOptions=j||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Se.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Se.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Se.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Dt=function(I,w,B){this._pitchWithRotate=I.pitchWithRotate,this._mouseRotate=w,this._mousePitch=B};Dt.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Dt.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Dt.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Dt.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var zt=function(I,w,B,D){this._el=I,this._touchZoom=w,this._touchRotate=B,this._tapDragZoom=D,this._rotationDisabled=!1,this._enabled=!0};zt.prototype.enable=function(j){this._touchZoom.enable(j),this._rotationDisabled||this._touchRotate.enable(j),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},zt.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},zt.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},zt.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},zt.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},zt.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var oe=function(I){return I.zoom||I.drag||I.pitch||I.rotate},ne=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I}(t.Event);function he(j){return j.panDelta&&j.panDelta.mag()||j.zoomDelta||j.bearingDelta||j.pitchDelta}var Fe=function(I,w){this._map=I,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $u(I),this._bearingSnap=w.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(w),t.bindAll(["handleEvent","handleWindowEvent"],this);var B=this._el;this._listeners=[[B,"touchstart",{passive:!0}],[B,"touchmove",{passive:!1}],[B,"touchend",void 0],[B,"touchcancel",void 0],[B,"mousedown",void 0],[B,"mousemove",void 0],[B,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[B,"mouseover",void 0],[B,"mouseout",void 0],[B,"dblclick",void 0],[B,"click",void 0],[B,"keydown",{capture:!1}],[B,"keyup",void 0],[B,"wheel",{passive:!1}],[B,"contextmenu",void 0],[t.window,"blur",void 0]];for(var D=0,W=this._listeners;D<W.length;D+=1){var tt=W[D],st=tt[0];s.addEventListener(st,tt[1],st===t.window.document?this.handleWindowEvent:this.handleEvent,tt[2])}};Fe.prototype.destroy=function(){for(var j=0,I=this._listeners;j<I.length;j+=1){var w=I[j],B=w[0];s.removeEventListener(B,w[1],B===t.window.document?this.handleWindowEvent:this.handleEvent,w[2])}},Fe.prototype._addDefaultHandlers=function(j){var I=this._map,w=I.getCanvasContainer();this._add("mapEvent",new us(I,j));var B=I.boxZoom=new js(I,j);this._add("boxZoom",B);var D=new Wo,W=new te;I.doubleClickZoom=new Kt(W,D),this._add("tapZoom",D),this._add("clickZoom",W);var tt=new Le;this._add("tapDragZoom",tt);var st=I.touchPitch=new Xr;this._add("touchPitch",st);var Ct=new Cu(j),It=new Ou(j);I.dragRotate=new Dt(j,Ct,It),this._add("mouseRotate",Ct,["mousePitch"]),this._add("mousePitch",It,["mouseRotate"]);var Ut=new yu(j),Zt=new Ks(j);I.dragPan=new Se(w,Ut,Zt),this._add("mousePan",Ut),this._add("touchPan",Zt,["touchZoom","touchRotate"]);var qt=new hr,de=new tn;I.touchZoomRotate=new zt(w,de,qt,tt),this._add("touchRotate",qt,["touchPan","touchZoom"]),this._add("touchZoom",de,["touchPan","touchRotate"]);var me=I.scrollZoom=new yr(I,this);this._add("scrollZoom",me,["mousePan"]);var je=I.keyboard=new zr;this._add("keyboard",je),this._add("blockableMapEvent",new Wi(I));for(var Oe=0,ke=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Oe<ke.length;Oe+=1){var qe=ke[Oe];j.interactive&&j[qe]&&I[qe].enable(j[qe])}},Fe.prototype._add=function(j,I,w){this._handlers.push({handlerName:j,handler:I,allowed:w}),this._handlersById[j]=I},Fe.prototype.stop=function(j){if(!this._updatingCamera){for(var I=0,w=this._handlers;I<w.length;I+=1)w[I].handler.reset();this._inertia.clear(),this._fireEvents({},{},j),this._changes=[]}},Fe.prototype.isActive=function(){for(var j=0,I=this._handlers;j<I.length;j+=1)if(I[j].handler.isActive())return!0;return!1},Fe.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Fe.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Fe.prototype.isMoving=function(){return Boolean(oe(this._eventsInProgress))||this.isZooming()},Fe.prototype._blockedByActive=function(j,I,w){for(var B in j)if(B!==w&&(!I||I.indexOf(B)<0))return!0;return!1},Fe.prototype.handleWindowEvent=function(j){this.handleEvent(j,j.type+"Window")},Fe.prototype._getMapTouches=function(j){for(var I=[],w=0,B=j;w<B.length;w+=1){var D=B[w];this._el.contains(D.target)&&I.push(D)}return I},Fe.prototype.handleEvent=function(j,I){if(j.type!=="blur"){this._updatingCamera=!0;for(var w=j.type==="renderFrame"?void 0:j,B={needsRenderFrame:!1},D={},W={},tt=j.touches?this._getMapTouches(j.touches):void 0,st=tt?s.touchPos(this._el,tt):s.mousePos(this._el,j),Ct=0,It=this._handlers;Ct<It.length;Ct+=1){var Ut=It[Ct],Zt=Ut.handlerName,qt=Ut.handler,de=Ut.allowed;if(qt.isEnabled()){var me=void 0;this._blockedByActive(W,de,Zt)?qt.reset():qt[I||j.type]&&(me=qt[I||j.type](j,st,tt),this.mergeHandlerResult(B,D,me,Zt,w),me&&me.needsRenderFrame&&this._triggerRenderFrame()),(me||qt.isActive())&&(W[Zt]=qt)}}var je={};for(var Oe in this._previousActiveHandlers)W[Oe]||(je[Oe]=w);this._previousActiveHandlers=W,(Object.keys(je).length||he(B))&&(this._changes.push([B,D,je]),this._triggerRenderFrame()),(Object.keys(W).length||he(B))&&this._map._stop(!0),this._updatingCamera=!1;var ke=B.cameraAnimation;ke&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ke(this._map))}else this.stop(!0)},Fe.prototype.mergeHandlerResult=function(j,I,w,B,D){if(w){t.extend(j,w);var W={handlerName:B,originalEvent:w.originalEvent||D};w.zoomDelta!==void 0&&(I.zoom=W),w.panDelta!==void 0&&(I.drag=W),w.pitchDelta!==void 0&&(I.pitch=W),w.bearingDelta!==void 0&&(I.rotate=W)}},Fe.prototype._applyChanges=function(){for(var j={},I={},w={},B=0,D=this._changes;B<D.length;B+=1){var W=D[B],tt=W[0],st=W[1],Ct=W[2];tt.panDelta&&(j.panDelta=(j.panDelta||new t.Point(0,0))._add(tt.panDelta)),tt.zoomDelta&&(j.zoomDelta=(j.zoomDelta||0)+tt.zoomDelta),tt.bearingDelta&&(j.bearingDelta=(j.bearingDelta||0)+tt.bearingDelta),tt.pitchDelta&&(j.pitchDelta=(j.pitchDelta||0)+tt.pitchDelta),tt.around!==void 0&&(j.around=tt.around),tt.pinchAround!==void 0&&(j.pinchAround=tt.pinchAround),tt.noInertia&&(j.noInertia=tt.noInertia),t.extend(I,st),t.extend(w,Ct)}this._updateMapTransform(j,I,w),this._changes=[]},Fe.prototype._updateMapTransform=function(j,I,w){var B=this._map,D=B.transform;if(!he(j))return this._fireEvents(I,w,!0);var W=j.panDelta,tt=j.zoomDelta,st=j.bearingDelta,Ct=j.pitchDelta,It=j.around,Ut=j.pinchAround;Ut!==void 0&&(It=Ut),B._stop(!0),It=It||B.transform.centerPoint;var Zt=D.pointLocation(W?It.sub(W):It);st&&(D.bearing+=st),Ct&&(D.pitch+=Ct),tt&&(D.zoom+=tt),D.setLocationAtPoint(Zt,It),this._map._update(),j.noInertia||this._inertia.record(j),this._fireEvents(I,w,!0)},Fe.prototype._fireEvents=function(j,I,w){var B=this,D=oe(this._eventsInProgress),W=oe(j),tt={};for(var st in j)this._eventsInProgress[st]||(tt[st+"start"]=j[st].originalEvent),this._eventsInProgress[st]=j[st];for(var Ct in!D&&W&&this._fireEvent("movestart",W.originalEvent),tt)this._fireEvent(Ct,tt[Ct]);for(var It in W&&this._fireEvent("move",W.originalEvent),j)this._fireEvent(It,j[It].originalEvent);var Ut,Zt={};for(var qt in this._eventsInProgress){var de=this._eventsInProgress[qt],me=de.handlerName,je=de.originalEvent;this._handlersById[me].isActive()||(delete this._eventsInProgress[qt],Zt[qt+"end"]=Ut=I[me]||je)}for(var Oe in Zt)this._fireEvent(Oe,Zt[Oe]);var ke=oe(this._eventsInProgress);if(w&&(D||W)&&!ke){this._updatingCamera=!0;var qe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),an=function(kn){return kn!==0&&-B._bearingSnap<kn&&kn<B._bearingSnap};qe?(an(qe.bearing||this._map.getBearing())&&(qe.bearing=0),this._map.easeTo(qe,{originalEvent:Ut})):(this._map.fire(new t.Event("moveend",{originalEvent:Ut})),an(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Fe.prototype._fireEvent=function(j,I){this._map.fire(new t.Event(j,I?{originalEvent:I}:{}))},Fe.prototype._requestFrame=function(){var j=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(I){delete j._frameId,j.handleEvent(new ne("renderFrame",{timeStamp:I})),j._applyChanges()})},Fe.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Ze=function(j){function I(w,B){j.call(this),this._moving=!1,this._zooming=!1,this.transform=w,this._bearingSnap=B.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},I.prototype.setCenter=function(w,B){return this.jumpTo({center:w},B)},I.prototype.panBy=function(w,B,D){return w=t.Point.convert(w).mult(-1),this.panTo(this.transform.center,t.extend({offset:w},B),D)},I.prototype.panTo=function(w,B,D){return this.easeTo(t.extend({center:w},B),D)},I.prototype.getZoom=function(){return this.transform.zoom},I.prototype.setZoom=function(w,B){return this.jumpTo({zoom:w},B),this},I.prototype.zoomTo=function(w,B,D){return this.easeTo(t.extend({zoom:w},B),D)},I.prototype.zoomIn=function(w,B){return this.zoomTo(this.getZoom()+1,w,B),this},I.prototype.zoomOut=function(w,B){return this.zoomTo(this.getZoom()-1,w,B),this},I.prototype.getBearing=function(){return this.transform.bearing},I.prototype.setBearing=function(w,B){return this.jumpTo({bearing:w},B),this},I.prototype.getPadding=function(){return this.transform.padding},I.prototype.setPadding=function(w,B){return this.jumpTo({padding:w},B),this},I.prototype.rotateTo=function(w,B,D){return this.easeTo(t.extend({bearing:w},B),D)},I.prototype.resetNorth=function(w,B){return this.rotateTo(0,t.extend({duration:1e3},w),B),this},I.prototype.resetNorthPitch=function(w,B){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},w),B),this},I.prototype.snapToNorth=function(w,B){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(w,B):this},I.prototype.getPitch=function(){return this.transform.pitch},I.prototype.setPitch=function(w,B){return this.jumpTo({pitch:w},B),this},I.prototype.cameraForBounds=function(w,B){w=t.LngLatBounds.convert(w);var D=B&&B.bearing||0;return this._cameraForBoxAndBearing(w.getNorthWest(),w.getSouthEast(),D,B)},I.prototype._cameraForBoxAndBearing=function(w,B,D,W){var tt={top:0,bottom:0,right:0,left:0};if(typeof(W=t.extend({padding:tt,offset:[0,0],maxZoom:this.transform.maxZoom},W)).padding=="number"){var st=W.padding;W.padding={top:st,bottom:st,right:st,left:st}}W.padding=t.extend(tt,W.padding);var Ct=this.transform,It=Ct.padding,Ut=Ct.project(t.LngLat.convert(w)),Zt=Ct.project(t.LngLat.convert(B)),qt=Ut.rotate(-D*Math.PI/180),de=Zt.rotate(-D*Math.PI/180),me=new t.Point(Math.max(qt.x,de.x),Math.max(qt.y,de.y)),je=new t.Point(Math.min(qt.x,de.x),Math.min(qt.y,de.y)),Oe=me.sub(je),ke=(Ct.width-(It.left+It.right+W.padding.left+W.padding.right))/Oe.x,qe=(Ct.height-(It.top+It.bottom+W.padding.top+W.padding.bottom))/Oe.y;if(!(qe<0||ke<0)){var an=Math.min(Ct.scaleZoom(Ct.scale*Math.min(ke,qe)),W.maxZoom),Xn=typeof W.offset.x=="number"?new t.Point(W.offset.x,W.offset.y):t.Point.convert(W.offset),kn=new t.Point((W.padding.left-W.padding.right)/2,(W.padding.top-W.padding.bottom)/2).rotate(D*Math.PI/180),fr=Xn.add(kn).mult(Ct.scale/Ct.zoomScale(an));return{center:Ct.unproject(Ut.add(Zt).div(2).sub(fr)),zoom:an,bearing:D}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},I.prototype.fitBounds=function(w,B,D){return this._fitInternal(this.cameraForBounds(w,B),B,D)},I.prototype.fitScreenCoordinates=function(w,B,D,W,tt){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(w)),this.transform.pointLocation(t.Point.convert(B)),D,W),W,tt)},I.prototype._fitInternal=function(w,B,D){return w?(delete(B=t.extend(w,B)).padding,B.linear?this.easeTo(B,D):this.flyTo(B,D)):this},I.prototype.jumpTo=function(w,B){this.stop();var D=this.transform,W=!1,tt=!1,st=!1;return"zoom"in w&&D.zoom!==+w.zoom&&(W=!0,D.zoom=+w.zoom),w.center!==void 0&&(D.center=t.LngLat.convert(w.center)),"bearing"in w&&D.bearing!==+w.bearing&&(tt=!0,D.bearing=+w.bearing),"pitch"in w&&D.pitch!==+w.pitch&&(st=!0,D.pitch=+w.pitch),w.padding==null||D.isPaddingEqual(w.padding)||(D.padding=w.padding),this.fire(new t.Event("movestart",B)).fire(new t.Event("move",B)),W&&this.fire(new t.Event("zoomstart",B)).fire(new t.Event("zoom",B)).fire(new t.Event("zoomend",B)),tt&&this.fire(new t.Event("rotatestart",B)).fire(new t.Event("rotate",B)).fire(new t.Event("rotateend",B)),st&&this.fire(new t.Event("pitchstart",B)).fire(new t.Event("pitch",B)).fire(new t.Event("pitchend",B)),this.fire(new t.Event("moveend",B))},I.prototype.easeTo=function(w,B){var D=this;this._stop(!1,w.easeId),((w=t.extend({offset:[0,0],duration:500,easing:t.ease},w)).animate===!1||!w.essential&&t.browser.prefersReducedMotion)&&(w.duration=0);var W=this.transform,tt=this.getZoom(),st=this.getBearing(),Ct=this.getPitch(),It=this.getPadding(),Ut="zoom"in w?+w.zoom:tt,Zt="bearing"in w?this._normalizeBearing(w.bearing,st):st,qt="pitch"in w?+w.pitch:Ct,de="padding"in w?w.padding:W.padding,me=t.Point.convert(w.offset),je=W.centerPoint.add(me),Oe=W.pointLocation(je),ke=t.LngLat.convert(w.center||Oe);this._normalizeCenter(ke);var qe,an,Xn=W.project(Oe),kn=W.project(ke).sub(Xn),fr=W.zoomScale(Ut-tt);w.around&&(qe=t.LngLat.convert(w.around),an=W.locationPoint(qe));var Mr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ut!==tt,this._rotating=this._rotating||st!==Zt,this._pitching=this._pitching||qt!==Ct,this._padding=!W.isPaddingEqual(de),this._easeId=w.easeId,this._prepareEase(B,w.noMoveStart,Mr),this._ease(function(Qr){if(D._zooming&&(W.zoom=t.number(tt,Ut,Qr)),D._rotating&&(W.bearing=t.number(st,Zt,Qr)),D._pitching&&(W.pitch=t.number(Ct,qt,Qr)),D._padding&&(W.interpolatePadding(It,de,Qr),je=W.centerPoint.add(me)),qe)W.setLocationAtPoint(qe,an);else{var Zr=W.zoomScale(W.zoom-tt),Pi=Ut>tt?Math.min(2,fr):Math.max(.5,fr),Ri=Math.pow(Pi,1-Qr),Ki=W.unproject(Xn.add(kn.mult(Qr*Ri)).mult(Zr));W.setLocationAtPoint(W.renderWorldCopies?Ki.wrap():Ki,je)}D._fireMoveEvents(B)},function(Qr){D._afterEase(B,Qr)},w),this},I.prototype._prepareEase=function(w,B,D){D===void 0&&(D={}),this._moving=!0,B||D.moving||this.fire(new t.Event("movestart",w)),this._zooming&&!D.zooming&&this.fire(new t.Event("zoomstart",w)),this._rotating&&!D.rotating&&this.fire(new t.Event("rotatestart",w)),this._pitching&&!D.pitching&&this.fire(new t.Event("pitchstart",w))},I.prototype._fireMoveEvents=function(w){this.fire(new t.Event("move",w)),this._zooming&&this.fire(new t.Event("zoom",w)),this._rotating&&this.fire(new t.Event("rotate",w)),this._pitching&&this.fire(new t.Event("pitch",w))},I.prototype._afterEase=function(w,B){if(!this._easeId||!B||this._easeId!==B){delete this._easeId;var D=this._zooming,W=this._rotating,tt=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,D&&this.fire(new t.Event("zoomend",w)),W&&this.fire(new t.Event("rotateend",w)),tt&&this.fire(new t.Event("pitchend",w)),this.fire(new t.Event("moveend",w))}},I.prototype.flyTo=function(w,B){var D=this;if(!w.essential&&t.browser.prefersReducedMotion){var W=t.pick(w,["center","zoom","bearing","pitch","around"]);return this.jumpTo(W,B)}this.stop(),w=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},w);var tt=this.transform,st=this.getZoom(),Ct=this.getBearing(),It=this.getPitch(),Ut=this.getPadding(),Zt="zoom"in w?t.clamp(+w.zoom,tt.minZoom,tt.maxZoom):st,qt="bearing"in w?this._normalizeBearing(w.bearing,Ct):Ct,de="pitch"in w?+w.pitch:It,me="padding"in w?w.padding:tt.padding,je=tt.zoomScale(Zt-st),Oe=t.Point.convert(w.offset),ke=tt.centerPoint.add(Oe),qe=tt.pointLocation(ke),an=t.LngLat.convert(w.center||qe);this._normalizeCenter(an);var Xn=tt.project(qe),kn=tt.project(an).sub(Xn),fr=w.curve,Mr=Math.max(tt.width,tt.height),Qr=Mr/je,Zr=kn.mag();if("minZoom"in w){var Pi=t.clamp(Math.min(w.minZoom,st,Zt),tt.minZoom,tt.maxZoom),Ri=Mr/tt.zoomScale(Pi-st);fr=Math.sqrt(Ri/Zr*2)}var Ki=fr*fr;function Xi(ra){var La=(Qr*Qr-Mr*Mr+(ra?-1:1)*Ki*Ki*Zr*Zr)/(2*(ra?Qr:Mr)*Ki*Zr);return Math.log(Math.sqrt(La*La+1)-La)}function Oa(ra){return(Math.exp(ra)-Math.exp(-ra))/2}function ja(ra){return(Math.exp(ra)+Math.exp(-ra))/2}var ki=Xi(0),Sa=function(La){return ja(ki)/ja(ki+fr*La)},ga=function(La){return Mr*((ja(ki)*(Oa(za=ki+fr*La)/ja(za))-Oa(ki))/Ki)/Zr;var za},Yi=(Xi(1)-ki)/fr;if(Math.abs(Zr)<1e-6||!isFinite(Yi)){if(Math.abs(Mr-Qr)<1e-6)return this.easeTo(w,B);var _a=Qr<Mr?-1:1;Yi=Math.abs(Math.log(Qr/Mr))/fr,ga=function(){return 0},Sa=function(La){return Math.exp(_a*fr*La)}}return w.duration="duration"in w?+w.duration:1e3*Yi/("screenSpeed"in w?+w.screenSpeed/fr:+w.speed),w.maxDuration&&w.duration>w.maxDuration&&(w.duration=0),this._zooming=!0,this._rotating=Ct!==qt,this._pitching=de!==It,this._padding=!tt.isPaddingEqual(me),this._prepareEase(B,!1),this._ease(function(ra){var La=ra*Yi,za=1/Sa(La);tt.zoom=ra===1?Zt:st+tt.scaleZoom(za),D._rotating&&(tt.bearing=t.number(Ct,qt,ra)),D._pitching&&(tt.pitch=t.number(It,de,ra)),D._padding&&(tt.interpolatePadding(Ut,me,ra),ke=tt.centerPoint.add(Oe));var Ps=ra===1?an:tt.unproject(Xn.add(kn.mult(ga(La))).mult(za));tt.setLocationAtPoint(tt.renderWorldCopies?Ps.wrap():Ps,ke),D._fireMoveEvents(B)},function(){return D._afterEase(B)},w),this},I.prototype.isEasing=function(){return!!this._easeFrameId},I.prototype.stop=function(){return this._stop()},I.prototype._stop=function(w,B){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var D=this._onEaseEnd;delete this._onEaseEnd,D.call(this,B)}if(!w){var W=this.handlers;W&&W.stop(!1)}return this},I.prototype._ease=function(w,B,D){D.animate===!1||D.duration===0?(w(1),B()):(this._easeStart=t.browser.now(),this._easeOptions=D,this._onEaseFrame=w,this._onEaseEnd=B,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},I.prototype._renderFrameCallback=function(){var w=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},I.prototype._normalizeBearing=function(w,B){w=t.wrap(w,-180,180);var D=Math.abs(w-B);return Math.abs(w-360-B)<D&&(w-=360),Math.abs(w+360-B)<D&&(w+=360),w},I.prototype._normalizeCenter=function(w){var B=this.transform;if(B.renderWorldCopies&&!B.lngRange){var D=w.lng-B.center.lng;w.lng+=D>180?-360:D<-180?360:0}},I}(t.Evented),nn=function(I){I===void 0&&(I={}),this.options=I,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};nn.prototype.getDefaultPosition=function(){return"bottom-right"},nn.prototype.onAdd=function(j){var I=this.options&&this.options.compact;return this._map=j,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=s.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=s.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),I&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),I===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},nn.prototype.onRemove=function(){s.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},nn.prototype._setElementTitle=function(j,I){var w=this._map._getUIString("AttributionControl."+I);j.title=w,j.setAttribute("aria-label",w)},nn.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},nn.prototype._updateEditLink=function(){var j=this._editLink;j||(j=this._editLink=this._container.querySelector(".mapbox-improve-map"));var I=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(j){var w=I.reduce(function(B,D,W){return D.value&&(B+=D.key+"="+D.value+(W<I.length-1?"&":"")),B},"?");j.href=t.config.FEEDBACK_URL+"/"+w+(this._map._hash?this._map._hash.getHashString(!0):""),j.rel="noopener nofollow",this._setElementTitle(j,"MapFeedback")}},nn.prototype._updateData=function(j){!j||j.sourceDataType!=="metadata"&&j.sourceDataType!=="visibility"&&j.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},nn.prototype._updateAttributions=function(){if(this._map.style){var j=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?j=j.concat(this.options.customAttribution.map(function(st){return typeof st!="string"?"":st})):typeof this.options.customAttribution=="string"&&j.push(this.options.customAttribution)),this._map.style.stylesheet){var I=this._map.style.stylesheet;this.styleOwner=I.owner,this.styleId=I.id}var w=this._map.style.sourceCaches;for(var B in w){var D=w[B];if(D.used){var W=D.getSource();W.attribution&&j.indexOf(W.attribution)<0&&j.push(W.attribution)}}j.sort(function(st,Ct){return st.length-Ct.length});var tt=(j=j.filter(function(st,Ct){for(var It=Ct+1;It<j.length;It++)if(j[It].indexOf(st)>=0)return!1;return!0})).join(" | ");tt!==this._attribHTML&&(this._attribHTML=tt,j.length?(this._innerContainer.innerHTML=tt,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},nn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Je=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Je.prototype.onAdd=function(j){this._map=j,this._container=s.create("div","mapboxgl-ctrl");var I=s.create("a","mapboxgl-ctrl-logo");return I.target="_blank",I.rel="noopener nofollow",I.href="https://www.mapbox.com/",I.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),I.setAttribute("rel","noopener nofollow"),this._container.appendChild(I),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Je.prototype.onRemove=function(){s.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Je.prototype.getDefaultPosition=function(){return"bottom-left"},Je.prototype._updateLogo=function(j){j&&j.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Je.prototype._logoRequired=function(){if(this._map.style){var j=this._map.style.sourceCaches;for(var I in j)if(j[I].getSource().mapbox_logo)return!0;return!1}},Je.prototype._updateCompact=function(){var j=this._container.children;if(j.length){var I=j[0];this._map.getCanvasContainer().offsetWidth<250?I.classList.add("mapboxgl-compact"):I.classList.remove("mapboxgl-compact")}};var pn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};pn.prototype.add=function(j){var I=++this._id;return this._queue.push({callback:j,id:I,cancelled:!1}),I},pn.prototype.remove=function(j){for(var I=this._currentlyRunning,w=0,B=I?this._queue.concat(I):this._queue;w<B.length;w+=1){var D=B[w];if(D.id===j)return void(D.cancelled=!0)}},pn.prototype.run=function(j){j===void 0&&(j=0);var I=this._currentlyRunning=this._queue;this._queue=[];for(var w=0,B=I;w<B.length;w+=1){var D=B[w];if(!D.cancelled&&(D.callback(j),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},pn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var fn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Hn=t.window.HTMLImageElement,Un=t.window.HTMLElement,Vn=t.window.ImageBitmap,Gn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},dr=function(j){function I(B){var D=this;if((B=t.extend({},Gn,B)).minZoom!=null&&B.maxZoom!=null&&B.minZoom>B.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(B.minPitch!=null&&B.maxPitch!=null&&B.minPitch>B.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(B.minPitch!=null&&B.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(B.maxPitch!=null&&B.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var W=new Da(B.minZoom,B.maxZoom,B.minPitch,B.maxPitch,B.renderWorldCopies);if(j.call(this,W,B),this._interactive=B.interactive,this._maxTileCacheSize=B.maxTileCacheSize,this._failIfMajorPerformanceCaveat=B.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=B.preserveDrawingBuffer,this._antialias=B.antialias,this._trackResize=B.trackResize,this._bearingSnap=B.bearingSnap,this._refreshExpiredTiles=B.refreshExpiredTiles,this._fadeDuration=B.fadeDuration,this._crossSourceCollisions=B.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=B.collectResourceTiming,this._renderTaskQueue=new pn,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},fn,B.locale),this._clickTolerance=B.clickTolerance,this._requestManager=new t.RequestManager(B.transformRequest,B.accessToken),typeof B.container=="string"){if(this._container=t.window.document.getElementById(B.container),!this._container)throw new Error("Container '"+B.container+"' not found.")}else{if(!(B.container instanceof Un))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=B.container}if(B.maxBounds&&this.setMaxBounds(B.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return D._update(!1)}),this.on("moveend",function(){return D._update(!1)}),this.on("zoom",function(){return D._update(!0)}),t.window!==void 0&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Fe(this,B),this._hash=B.hash&&new Ns(typeof B.hash=="string"&&B.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:B.center,zoom:B.zoom,bearing:B.bearing,pitch:B.pitch}),B.bounds&&(this.resize(),this.fitBounds(B.bounds,t.extend({},B.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=B.localIdeographFontFamily,B.style&&this.setStyle(B.style,{localIdeographFontFamily:B.localIdeographFontFamily}),B.attributionControl&&this.addControl(new nn({customAttribution:B.customAttribution})),this.addControl(new Je,B.logoPosition),this.on("style.load",function(){D.transform.unmodified&&D.jumpTo(D.style.stylesheet)}),this.on("data",function(tt){D._update(tt.dataType==="style"),D.fire(new t.Event(tt.dataType+"data",tt))}),this.on("dataloading",function(tt){D.fire(new t.Event(tt.dataType+"dataloading",tt))})}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return I.prototype._getMapId=function(){return this._mapId},I.prototype.addControl=function(B,D){if(D===void 0&&(D=B.getDefaultPosition?B.getDefaultPosition():"top-right"),!B||!B.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var W=B.onAdd(this);this._controls.push(B);var tt=this._controlPositions[D];return D.indexOf("bottom")!==-1?tt.insertBefore(W,tt.firstChild):tt.appendChild(W),this},I.prototype.removeControl=function(B){if(!B||!B.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var D=this._controls.indexOf(B);return D>-1&&this._controls.splice(D,1),B.onRemove(this),this},I.prototype.hasControl=function(B){return this._controls.indexOf(B)>-1},I.prototype.resize=function(B){var D=this._containerDimensions(),W=D[0],tt=D[1];this._resizeCanvas(W,tt),this.transform.resize(W,tt),this.painter.resize(W,tt);var st=!this._moving;return st&&(this.stop(),this.fire(new t.Event("movestart",B)).fire(new t.Event("move",B))),this.fire(new t.Event("resize",B)),st&&this.fire(new t.Event("moveend",B)),this},I.prototype.getBounds=function(){return this.transform.getBounds()},I.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},I.prototype.setMaxBounds=function(B){return this.transform.setMaxBounds(t.LngLatBounds.convert(B)),this._update()},I.prototype.setMinZoom=function(B){if((B=B==null?-2:B)>=-2&&B<=this.transform.maxZoom)return this.transform.minZoom=B,this._update(),this.getZoom()<B&&this.setZoom(B),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},I.prototype.getMinZoom=function(){return this.transform.minZoom},I.prototype.setMaxZoom=function(B){if((B=B==null?22:B)>=this.transform.minZoom)return this.transform.maxZoom=B,this._update(),this.getZoom()>B&&this.setZoom(B),this;throw new Error("maxZoom must be greater than the current minZoom")},I.prototype.getMaxZoom=function(){return this.transform.maxZoom},I.prototype.setMinPitch=function(B){if((B=B==null?0:B)<0)throw new Error("minPitch must be greater than or equal to 0");if(B>=0&&B<=this.transform.maxPitch)return this.transform.minPitch=B,this._update(),this.getPitch()<B&&this.setPitch(B),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},I.prototype.getMinPitch=function(){return this.transform.minPitch},I.prototype.setMaxPitch=function(B){if((B=B==null?60:B)>60)throw new Error("maxPitch must be less than or equal to 60");if(B>=this.transform.minPitch)return this.transform.maxPitch=B,this._update(),this.getPitch()>B&&this.setPitch(B),this;throw new Error("maxPitch must be greater than the current minPitch")},I.prototype.getMaxPitch=function(){return this.transform.maxPitch},I.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},I.prototype.setRenderWorldCopies=function(B){return this.transform.renderWorldCopies=B,this._update()},I.prototype.project=function(B){return this.transform.locationPoint(t.LngLat.convert(B))},I.prototype.unproject=function(B){return this.transform.pointLocation(t.Point.convert(B))},I.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},I.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},I.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},I.prototype._createDelegatedListener=function(B,D,W){var tt,st=this;if(B==="mouseenter"||B==="mouseover"){var Ct=!1;return{layer:D,listener:W,delegates:{mousemove:function(Zt){var qt=st.getLayer(D)?st.queryRenderedFeatures(Zt.point,{layers:[D]}):[];qt.length?Ct||(Ct=!0,W.call(st,new is(B,st,Zt.originalEvent,{features:qt}))):Ct=!1},mouseout:function(){Ct=!1}}}}if(B==="mouseleave"||B==="mouseout"){var It=!1;return{layer:D,listener:W,delegates:{mousemove:function(Zt){(st.getLayer(D)?st.queryRenderedFeatures(Zt.point,{layers:[D]}):[]).length?It=!0:It&&(It=!1,W.call(st,new is(B,st,Zt.originalEvent)))},mouseout:function(Zt){It&&(It=!1,W.call(st,new is(B,st,Zt.originalEvent)))}}}}return{layer:D,listener:W,delegates:(tt={},tt[B]=function(Ut){var Zt=st.getLayer(D)?st.queryRenderedFeatures(Ut.point,{layers:[D]}):[];Zt.length&&(Ut.features=Zt,W.call(st,Ut),delete Ut.features)},tt)}},I.prototype.on=function(B,D,W){if(W===void 0)return j.prototype.on.call(this,B,D);var tt=this._createDelegatedListener(B,D,W);for(var st in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[B]=this._delegatedListeners[B]||[],this._delegatedListeners[B].push(tt),tt.delegates)this.on(st,tt.delegates[st]);return this},I.prototype.once=function(B,D,W){if(W===void 0)return j.prototype.once.call(this,B,D);var tt=this._createDelegatedListener(B,D,W);for(var st in tt.delegates)this.once(st,tt.delegates[st]);return this},I.prototype.off=function(B,D,W){var tt=this;return W===void 0?j.prototype.off.call(this,B,D):(this._delegatedListeners&&this._delegatedListeners[B]&&function(st){for(var Ct=st[B],It=0;It<Ct.length;It++){var Ut=Ct[It];if(Ut.layer===D&&Ut.listener===W){for(var Zt in Ut.delegates)tt.off(Zt,Ut.delegates[Zt]);return Ct.splice(It,1),tt}}}(this._delegatedListeners),this)},I.prototype.queryRenderedFeatures=function(B,D){if(!this.style)return[];var W;if(D!==void 0||B===void 0||B instanceof t.Point||Array.isArray(B)||(D=B,B=void 0),D=D||{},(B=B||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||typeof B[0]=="number")W=[t.Point.convert(B)];else{var tt=t.Point.convert(B[0]),st=t.Point.convert(B[1]);W=[tt,new t.Point(st.x,tt.y),st,new t.Point(tt.x,st.y),tt]}return this.style.queryRenderedFeatures(W,D,this.transform)},I.prototype.querySourceFeatures=function(B,D){return this.style.querySourceFeatures(B,D)},I.prototype.setStyle=function(B,D){return(D=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},D)).diff!==!1&&D.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&B?(this._diffStyle(B,D),this):(this._localIdeographFontFamily=D.localIdeographFontFamily,this._updateStyle(B,D))},I.prototype._getUIString=function(B){var D=this._locale[B];if(D==null)throw new Error("Missing UI string '"+B+"'");return D},I.prototype._updateStyle=function(B,D){return this.style&&(this.style.setEventedParent(null),this.style._remove()),B?(this.style=new Ao(this,D||{}),this.style.setEventedParent(this,{style:this.style}),typeof B=="string"?this.style.loadURL(B):this.style.loadJSON(B),this):(delete this.style,this)},I.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ao(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},I.prototype._diffStyle=function(B,D){var W=this;if(typeof B=="string"){var tt=this._requestManager.normalizeStyleURL(B),st=this._requestManager.transformRequest(tt,t.ResourceType.Style);t.getJSON(st,function(Ct,It){Ct?W.fire(new t.ErrorEvent(Ct)):It&&W._updateDiff(It,D)})}else typeof B=="object"&&this._updateDiff(B,D)},I.prototype._updateDiff=function(B,D){try{this.style.setState(B)&&this._update(!0)}catch(W){t.warnOnce("Unable to perform style diff: "+(W.message||W.error||W)+".  Rebuilding the style from scratch."),this._updateStyle(B,D)}},I.prototype.getStyle=function(){if(this.style)return this.style.serialize()},I.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},I.prototype.addSource=function(B,D){return this._lazyInitEmptyStyle(),this.style.addSource(B,D),this._update(!0)},I.prototype.isSourceLoaded=function(B){var D=this.style&&this.style.sourceCaches[B];if(D!==void 0)return D.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+B+"'")))},I.prototype.areTilesLoaded=function(){var B=this.style&&this.style.sourceCaches;for(var D in B){var W=B[D]._tiles;for(var tt in W){var st=W[tt];if(st.state!=="loaded"&&st.state!=="errored")return!1}}return!0},I.prototype.addSourceType=function(B,D,W){return this._lazyInitEmptyStyle(),this.style.addSourceType(B,D,W)},I.prototype.removeSource=function(B){return this.style.removeSource(B),this._update(!0)},I.prototype.getSource=function(B){return this.style.getSource(B)},I.prototype.addImage=function(B,D,W){W===void 0&&(W={});var tt=W.pixelRatio;tt===void 0&&(tt=1);var st=W.sdf;st===void 0&&(st=!1);var Ct=W.stretchX,It=W.stretchY,Ut=W.content;if(this._lazyInitEmptyStyle(),D instanceof Hn||Vn&&D instanceof Vn){var Zt=t.browser.getImageData(D);this.style.addImage(B,{data:new t.RGBAImage({width:Zt.width,height:Zt.height},Zt.data),pixelRatio:tt,stretchX:Ct,stretchY:It,content:Ut,sdf:st,version:0})}else{if(D.width===void 0||D.height===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var qt=D;this.style.addImage(B,{data:new t.RGBAImage({width:D.width,height:D.height},new Uint8Array(D.data)),pixelRatio:tt,stretchX:Ct,stretchY:It,content:Ut,sdf:st,version:0,userImage:qt}),qt.onAdd&&qt.onAdd(this,B)}},I.prototype.updateImage=function(B,D){var W=this.style.getImage(B);if(!W)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var tt=D instanceof Hn||Vn&&D instanceof Vn?t.browser.getImageData(D):D,st=tt.width,Ct=tt.height,It=tt.data;return st===void 0||Ct===void 0?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):st!==W.data.width||Ct!==W.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(W.data.replace(It,!(D instanceof Hn||Vn&&D instanceof Vn)),void this.style.updateImage(B,W))},I.prototype.hasImage=function(B){return B?!!this.style.getImage(B):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},I.prototype.removeImage=function(B){this.style.removeImage(B)},I.prototype.loadImage=function(B,D){t.getImage(this._requestManager.transformRequest(B,t.ResourceType.Image),D)},I.prototype.listImages=function(){return this.style.listImages()},I.prototype.addLayer=function(B,D){return this._lazyInitEmptyStyle(),this.style.addLayer(B,D),this._update(!0)},I.prototype.moveLayer=function(B,D){return this.style.moveLayer(B,D),this._update(!0)},I.prototype.removeLayer=function(B){return this.style.removeLayer(B),this._update(!0)},I.prototype.getLayer=function(B){return this.style.getLayer(B)},I.prototype.setLayerZoomRange=function(B,D,W){return this.style.setLayerZoomRange(B,D,W),this._update(!0)},I.prototype.setFilter=function(B,D,W){return W===void 0&&(W={}),this.style.setFilter(B,D,W),this._update(!0)},I.prototype.getFilter=function(B){return this.style.getFilter(B)},I.prototype.setPaintProperty=function(B,D,W,tt){return tt===void 0&&(tt={}),this.style.setPaintProperty(B,D,W,tt),this._update(!0)},I.prototype.getPaintProperty=function(B,D){return this.style.getPaintProperty(B,D)},I.prototype.setLayoutProperty=function(B,D,W,tt){return tt===void 0&&(tt={}),this.style.setLayoutProperty(B,D,W,tt),this._update(!0)},I.prototype.getLayoutProperty=function(B,D){return this.style.getLayoutProperty(B,D)},I.prototype.setLight=function(B,D){return D===void 0&&(D={}),this._lazyInitEmptyStyle(),this.style.setLight(B,D),this._update(!0)},I.prototype.getLight=function(){return this.style.getLight()},I.prototype.setFeatureState=function(B,D){return this.style.setFeatureState(B,D),this._update()},I.prototype.removeFeatureState=function(B,D){return this.style.removeFeatureState(B,D),this._update()},I.prototype.getFeatureState=function(B){return this.style.getFeatureState(B)},I.prototype.getContainer=function(){return this._container},I.prototype.getCanvasContainer=function(){return this._canvasContainer},I.prototype.getCanvas=function(){return this._canvas},I.prototype._containerDimensions=function(){var B=0,D=0;return this._container&&(B=this._container.clientWidth||400,D=this._container.clientHeight||300),[B,D]},I.prototype._detectMissingCSS=function(){t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},I.prototype._setupContainer=function(){var B=this._container;B.classList.add("mapboxgl-map"),(this._missingCSSCanary=s.create("div","mapboxgl-canary",B)).style.visibility="hidden",this._detectMissingCSS();var D=this._canvasContainer=s.create("div","mapboxgl-canvas-container",B);this._interactive&&D.classList.add("mapboxgl-interactive"),this._canvas=s.create("canvas","mapboxgl-canvas",D),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var W=this._containerDimensions();this._resizeCanvas(W[0],W[1]);var tt=this._controlContainer=s.create("div","mapboxgl-control-container",B),st=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ct){st[Ct]=s.create("div","mapboxgl-ctrl-"+Ct,tt)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},I.prototype._resizeCanvas=function(B,D){var W=t.browser.devicePixelRatio||1;this._canvas.width=W*B,this._canvas.height=W*D,this._canvas.style.width=B+"px",this._canvas.style.height=D+"px"},I.prototype._setupPainter=function(){var B=t.extend({},u.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),D=this._canvas.getContext("webgl",B)||this._canvas.getContext("experimental-webgl",B);D?(this.painter=new go(D,this.transform),t.webpSupported.testSupport(D)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},I.prototype._contextLost=function(B){B.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:B}))},I.prototype._contextRestored=function(B){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:B}))},I.prototype._onMapScroll=function(B){if(B.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},I.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},I.prototype._update=function(B){return this.style?(this._styleDirty=this._styleDirty||B,this._sourcesDirty=!0,this.triggerRepaint(),this):this},I.prototype._requestRenderFrame=function(B){return this._update(),this._renderTaskQueue.add(B)},I.prototype._cancelRenderFrame=function(B){this._renderTaskQueue.remove(B)},I.prototype._render=function(B){var D,W=this,tt=0,st=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(D=st.createQueryEXT(),st.beginQueryEXT(st.TIME_ELAPSED_EXT,D),tt=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(B),!this._removed){var Ct=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var It=this.transform.zoom,Ut=t.browser.now();this.style.zoomHistory.update(It,Ut);var Zt=new t.EvaluationParameters(It,{now:Ut,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),qt=Zt.crossFadingFactor();qt===1&&qt===this._crossFadingFactor||(Ct=!0,this._crossFadingFactor=qt),this.style.update(Zt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||Ct)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var de=t.browser.now()-tt;st.endQueryEXT(st.TIME_ELAPSED_EXT,D),setTimeout(function(){var Oe=st.getQueryObjectEXT(D,st.QUERY_RESULT_EXT)/1e6;st.deleteQueryEXT(D),W.fire(new t.Event("gpu-timing-frame",{cpuTime:de,gpuTime:Oe}))},50)}if(this.listens("gpu-timing-layer")){var me=this.painter.collectGpuTimers();setTimeout(function(){var Oe=W.painter.queryGpuTimers(me);W.fire(new t.Event("gpu-timing-layer",{layerTimes:Oe}))},50)}var je=this._sourcesDirty||this._styleDirty||this._placementDirty;return je||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||je||(this._fullyLoaded=!0),this}},I.prototype.remove=function(){this._hash&&this._hash.remove();for(var B=0,D=this._controls;B<D.length;B+=1)D[B].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),t.window!==void 0&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var W=this.painter.context.gl.getExtension("WEBGL_lose_context");W&&W.loseContext(),br(this._canvasContainer),br(this._controlContainer),br(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},I.prototype.triggerRepaint=function(){var B=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(D){B._frame=null,B._render(D)}))},I.prototype._onWindowOnline=function(){this._update()},I.prototype._onWindowResize=function(B){this._trackResize&&this.resize({originalEvent:B})._update()},w.showTileBoundaries.get=function(){return!!this._showTileBoundaries},w.showTileBoundaries.set=function(B){this._showTileBoundaries!==B&&(this._showTileBoundaries=B,this._update())},w.showPadding.get=function(){return!!this._showPadding},w.showPadding.set=function(B){this._showPadding!==B&&(this._showPadding=B,this._update())},w.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},w.showCollisionBoxes.set=function(B){this._showCollisionBoxes!==B&&(this._showCollisionBoxes=B,B?this.style._generateCollisionBoxes():this._update())},w.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},w.showOverdrawInspector.set=function(B){this._showOverdrawInspector!==B&&(this._showOverdrawInspector=B,this._update())},w.repaint.get=function(){return!!this._repaint},w.repaint.set=function(B){this._repaint!==B&&(this._repaint=B,this.triggerRepaint())},w.vertices.get=function(){return!!this._vertices},w.vertices.set=function(B){this._vertices=B,this._update()},I.prototype._setCacheLimits=function(B,D){t.setCacheLimits(B,D)},w.version.get=function(){return t.version},Object.defineProperties(I.prototype,w),I}(Ze);function br(j){j.parentNode&&j.parentNode.removeChild(j)}var Kr={showCompass:!0,showZoom:!0,visualizePitch:!1},mi=function(I){var w=this;this.options=t.extend({},Kr,I),this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(B){return B.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(B){return w._map.zoomIn({},{originalEvent:B})}),s.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(B){return w._map.zoomOut({},{originalEvent:B})}),s.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(B){w.options.visualizePitch?w._map.resetNorthPitch({},{originalEvent:B}):w._map.resetNorth({},{originalEvent:B})}),this._compassIcon=s.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};mi.prototype._updateZoomButtons=function(){var j=this._map.getZoom(),I=j===this._map.getMaxZoom(),w=j===this._map.getMinZoom();this._zoomInButton.disabled=I,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",I.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())},mi.prototype._rotateCompassArrow=function(){var j=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=j},mi.prototype.onAdd=function(j){return this._map=j,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jr(this._map,this._compass,this.options.visualizePitch)),this._container},mi.prototype.onRemove=function(){s.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},mi.prototype._createButton=function(j,I){var w=s.create("button",j,this._container);return w.type="button",w.addEventListener("click",I),w},mi.prototype._setButtonTitle=function(j,I){var w=this._map._getUIString("NavigationControl."+I);j.title=w,j.setAttribute("aria-label",w)};var jr=function(I,w,B){B===void 0&&(B=!1),this._clickTolerance=10,this.element=w,this.mouseRotate=new Cu({clickTolerance:I.dragRotate._mouseRotate._clickTolerance}),this.map=I,B&&(this.mousePitch=new Ou({clickTolerance:I.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),s.addEventListener(w,"mousedown",this.mousedown),s.addEventListener(w,"touchstart",this.touchstart,{passive:!1}),s.addEventListener(w,"touchmove",this.touchmove),s.addEventListener(w,"touchend",this.touchend),s.addEventListener(w,"touchcancel",this.reset)};function oi(j,I,w){if(j=new t.LngLat(j.lng,j.lat),I){var B=new t.LngLat(j.lng-360,j.lat),D=new t.LngLat(j.lng+360,j.lat),W=w.locationPoint(j).distSqr(I);w.locationPoint(B).distSqr(I)<W?j=B:w.locationPoint(D).distSqr(I)<W&&(j=D)}for(;Math.abs(j.lng-w.center.lng)>180;){var tt=w.locationPoint(j);if(tt.x>=0&&tt.y>=0&&tt.x<=w.width&&tt.y<=w.height)break;j.lng>w.center.lng?j.lng-=360:j.lng+=360}return j}jr.prototype.down=function(j,I){this.mouseRotate.mousedown(j,I),this.mousePitch&&this.mousePitch.mousedown(j,I),s.disableDrag()},jr.prototype.move=function(j,I){var w=this.map,B=this.mouseRotate.mousemoveWindow(j,I);if(B&&B.bearingDelta&&w.setBearing(w.getBearing()+B.bearingDelta),this.mousePitch){var D=this.mousePitch.mousemoveWindow(j,I);D&&D.pitchDelta&&w.setPitch(w.getPitch()+D.pitchDelta)}},jr.prototype.off=function(){var j=this.element;s.removeEventListener(j,"mousedown",this.mousedown),s.removeEventListener(j,"touchstart",this.touchstart,{passive:!1}),s.removeEventListener(j,"touchmove",this.touchmove),s.removeEventListener(j,"touchend",this.touchend),s.removeEventListener(j,"touchcancel",this.reset),this.offTemp()},jr.prototype.offTemp=function(){s.enableDrag(),s.removeEventListener(t.window,"mousemove",this.mousemove),s.removeEventListener(t.window,"mouseup",this.mouseup)},jr.prototype.mousedown=function(j){this.down(t.extend({},j,{ctrlKey:!0,preventDefault:function(){return j.preventDefault()}}),s.mousePos(this.element,j)),s.addEventListener(t.window,"mousemove",this.mousemove),s.addEventListener(t.window,"mouseup",this.mouseup)},jr.prototype.mousemove=function(j){this.move(j,s.mousePos(this.element,j))},jr.prototype.mouseup=function(j){this.mouseRotate.mouseupWindow(j),this.mousePitch&&this.mousePitch.mouseupWindow(j),this.offTemp()},jr.prototype.touchstart=function(j){j.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=s.touchPos(this.element,j.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return j.preventDefault()}},this._startPos))},jr.prototype.touchmove=function(j){j.targetTouches.length!==1?this.reset():(this._lastPos=s.touchPos(this.element,j.targetTouches)[0],this.move({preventDefault:function(){return j.preventDefault()}},this._lastPos))},jr.prototype.touchend=function(j){j.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},jr.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var fi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hi(j,I,w){var B=j.classList;for(var D in fi)B.remove("mapboxgl-"+w+"-anchor-"+D);B.add("mapboxgl-"+w+"-anchor-"+I)}var Di,Ma=function(j){function I(w,B){if(j.call(this),(w instanceof t.window.HTMLElement||B)&&(w=t.extend({element:w},B)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=w&&w.anchor||"center",this._color=w&&w.color||"#3FB1CE",this._scale=w&&w.scale||1,this._draggable=w&&w.draggable||!1,this._clickTolerance=w&&w.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=w&&w.rotation||0,this._rotationAlignment=w&&w.rotationAlignment||"auto",this._pitchAlignment=w&&w.pitchAlignment&&w.pitchAlignment!=="auto"?w.pitchAlignment:this._rotationAlignment,w&&w.element)this._element=w.element,this._offset=t.Point.convert(w&&w.offset||[0,0]);else{this._defaultMarker=!0,this._element=s.create("div"),this._element.setAttribute("aria-label","Map marker");var D=s.createNS("http://www.w3.org/2000/svg","svg");D.setAttributeNS(null,"display","block"),D.setAttributeNS(null,"height","41px"),D.setAttributeNS(null,"width","27px"),D.setAttributeNS(null,"viewBox","0 0 27 41");var W=s.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"stroke","none"),W.setAttributeNS(null,"stroke-width","1"),W.setAttributeNS(null,"fill","none"),W.setAttributeNS(null,"fill-rule","evenodd");var tt=s.createNS("http://www.w3.org/2000/svg","g");tt.setAttributeNS(null,"fill-rule","nonzero");var st=s.createNS("http://www.w3.org/2000/svg","g");st.setAttributeNS(null,"transform","translate(3.0, 29.0)"),st.setAttributeNS(null,"fill","#000000");for(var Ct=0,It=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ct<It.length;Ct+=1){var Ut=It[Ct],Zt=s.createNS("http://www.w3.org/2000/svg","ellipse");Zt.setAttributeNS(null,"opacity","0.04"),Zt.setAttributeNS(null,"cx","10.5"),Zt.setAttributeNS(null,"cy","5.80029008"),Zt.setAttributeNS(null,"rx",Ut.rx),Zt.setAttributeNS(null,"ry",Ut.ry),st.appendChild(Zt)}var qt=s.createNS("http://www.w3.org/2000/svg","g");qt.setAttributeNS(null,"fill",this._color);var de=s.createNS("http://www.w3.org/2000/svg","path");de.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),qt.appendChild(de);var me=s.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"fill","#000000");var je=s.createNS("http://www.w3.org/2000/svg","path");je.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),me.appendChild(je);var Oe=s.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Oe.setAttributeNS(null,"fill","#FFFFFF");var ke=s.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"transform","translate(8.0, 8.0)");var qe=s.createNS("http://www.w3.org/2000/svg","circle");qe.setAttributeNS(null,"fill","#000000"),qe.setAttributeNS(null,"opacity","0.25"),qe.setAttributeNS(null,"cx","5.5"),qe.setAttributeNS(null,"cy","5.5"),qe.setAttributeNS(null,"r","5.4999962");var an=s.createNS("http://www.w3.org/2000/svg","circle");an.setAttributeNS(null,"fill","#FFFFFF"),an.setAttributeNS(null,"cx","5.5"),an.setAttributeNS(null,"cy","5.5"),an.setAttributeNS(null,"r","5.4999962"),ke.appendChild(qe),ke.appendChild(an),tt.appendChild(st),tt.appendChild(qt),tt.appendChild(me),tt.appendChild(Oe),tt.appendChild(ke),D.appendChild(tt),D.setAttributeNS(null,"height",41*this._scale+"px"),D.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(D),this._offset=t.Point.convert(w&&w.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Xn){Xn.preventDefault()}),this._element.addEventListener("mousedown",function(Xn){Xn.preventDefault()}),Hi(this._element,this._anchor,"marker"),this._popup=null}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.addTo=function(w){return this.remove(),this._map=w,w.getCanvasContainer().appendChild(this._element),w.on("move",this._update),w.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},I.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),s.remove(this._element),this._popup&&this._popup.remove(),this},I.prototype.getLngLat=function(){return this._lngLat},I.prototype.setLngLat=function(w){return this._lngLat=t.LngLat.convert(w),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},I.prototype.getElement=function(){return this._element},I.prototype.setPopup=function(w){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),w){if(!("offset"in w.options)){var B=Math.sqrt(Math.pow(13.5,2)/2);w.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[B,-1*(24.6+B)],"bottom-right":[-B,-1*(24.6+B)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=w,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},I.prototype._onKeyPress=function(w){var B=w.code,D=w.charCode||w.keyCode;B!=="Space"&&B!=="Enter"&&D!==32&&D!==13||this.togglePopup()},I.prototype._onMapClick=function(w){var B=w.originalEvent.target,D=this._element;this._popup&&(B===D||D.contains(B))&&this.togglePopup()},I.prototype.getPopup=function(){return this._popup},I.prototype.togglePopup=function(){var w=this._popup;return w?(w.isOpen()?w.remove():w.addTo(this._map),this):this},I.prototype._update=function(w){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=oi(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var B="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?B="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(B="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D="rotateX("+this._map.getPitch()+"deg)"),w&&w.type!=="moveend"||(this._pos=this._pos.round()),s.setTransform(this._element,fi[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+D+" "+B)}},I.prototype.getOffset=function(){return this._offset},I.prototype.setOffset=function(w){return this._offset=t.Point.convert(w),this._update(),this},I.prototype._onMove=function(w){if(!this._isDragging){var B=this._clickTolerance||this._map._clickTolerance;this._isDragging=w.point.dist(this._pointerdownPos)>=B}this._isDragging&&(this._pos=w.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))},I.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new t.Event("dragend")),this._state="inactive"},I.prototype._addDragHandler=function(w){this._element.contains(w.originalEvent.target)&&(w.preventDefault(),this._positionDelta=w.point.sub(this._pos).add(this._offset),this._pointerdownPos=w.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},I.prototype.setDraggable=function(w){return this._draggable=!!w,this._map&&(w?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},I.prototype.isDraggable=function(){return this._draggable},I.prototype.setRotation=function(w){return this._rotation=w||0,this._update(),this},I.prototype.getRotation=function(){return this._rotation},I.prototype.setRotationAlignment=function(w){return this._rotationAlignment=w||"auto",this._update(),this},I.prototype.getRotationAlignment=function(){return this._rotationAlignment},I.prototype.setPitchAlignment=function(w){return this._pitchAlignment=w&&w!=="auto"?w:this._rotationAlignment,this._update(),this},I.prototype.getPitchAlignment=function(){return this._pitchAlignment},I}(t.Evented),xa={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Pa=0,ei=!1,Ea=function(j){function I(w){j.call(this),this.options=t.extend({},xa,w),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.onAdd=function(w){var B;return this._map=w,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),B=this._setupUI,Di!==void 0?B(Di):t.window.navigator.permissions!==void 0?t.window.navigator.permissions.query({name:"geolocation"}).then(function(D){B(Di=D.state!=="denied")}):B(Di=!!t.window.navigator.geolocation),this._container},I.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),s.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Pa=0,ei=!1},I.prototype._isOutOfMapMaxBounds=function(w){var B=this._map.getMaxBounds(),D=w.coords;return B&&(D.longitude<B.getWest()||D.longitude>B.getEast()||D.latitude<B.getSouth()||D.latitude>B.getNorth())},I.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},I.prototype._onSuccess=function(w){if(this._map){if(this._isOutOfMapMaxBounds(w))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",w)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=w,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(w),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(w),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",w)),this._finish()}},I.prototype._updateCamera=function(w){var B=new t.LngLat(w.coords.longitude,w.coords.latitude),D=w.coords.accuracy,W=this._map.getBearing(),tt=t.extend({bearing:W},this.options.fitBoundsOptions);this._map.fitBounds(B.toBounds(D),tt,{geolocateSource:!0})},I.prototype._updateMarker=function(w){if(w){var B=new t.LngLat(w.coords.longitude,w.coords.latitude);this._accuracyCircleMarker.setLngLat(B).addTo(this._map),this._userLocationDotMarker.setLngLat(B).addTo(this._map),this._accuracy=w.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},I.prototype._updateCircleRadius=function(){var w=this._map._container.clientHeight/2,B=this._map.unproject([0,w]),D=this._map.unproject([1,w]),W=B.distanceTo(D),tt=Math.ceil(2*this._accuracy/W);this._circleElement.style.width=tt+"px",this._circleElement.style.height=tt+"px"},I.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},I.prototype._onError=function(w){if(this._map){if(this.options.trackUserLocation)if(w.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var B=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=B,this._geolocateButton.setAttribute("aria-label",B),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(w.code===3&&ei)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",w)),this._finish()}},I.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},I.prototype._setupUI=function(w){var B=this;if(this._container.addEventListener("contextmenu",function(tt){return tt.preventDefault()}),this._geolocateButton=s.create("button","mapboxgl-ctrl-geolocate",this._container),s.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",w===!1){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var D=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=D,this._geolocateButton.setAttribute("aria-label",D)}else{var W=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=W,this._geolocateButton.setAttribute("aria-label",W)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=s.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ma(this._dotElement),this._circleElement=s.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ma({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(tt){tt.geolocateSource||B._watchState!=="ACTIVE_LOCK"||tt.originalEvent&&tt.originalEvent.type==="resize"||(B._watchState="BACKGROUND",B._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),B._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),B.fire(new t.Event("trackuserlocationend")))})},I.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Pa--,ei=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var w;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Pa>1?(w={maximumAge:6e5,timeout:0},ei=!0):(w=this.options.positionOptions,ei=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},I.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},I}(t.Evented),Ga={maxWidth:100,unit:"metric"},Ha=function(I){this.options=t.extend({},Ga,I),t.bindAll(["_onMove","setUnit"],this)};function Li(j,I,w){var B=w&&w.maxWidth||100,D=j._container.clientHeight/2,W=j.unproject([0,D]),tt=j.unproject([B,D]),st=W.distanceTo(tt);if(w&&w.unit==="imperial"){var Ct=3.2808*st;Ct>5280?Ia(I,B,Ct/5280,j._getUIString("ScaleControl.Miles")):Ia(I,B,Ct,j._getUIString("ScaleControl.Feet"))}else w&&w.unit==="nautical"?Ia(I,B,st/1852,j._getUIString("ScaleControl.NauticalMiles")):st>=1e3?Ia(I,B,st/1e3,j._getUIString("ScaleControl.Kilometers")):Ia(I,B,st,j._getUIString("ScaleControl.Meters"))}function Ia(j,I,w,B){var D,W,tt,st=(D=w,(W=Math.pow(10,(""+Math.floor(D)).length-1))*(tt=(tt=D/W)>=10?10:tt>=5?5:tt>=3?3:tt>=2?2:tt>=1?1:function(Ct){var It=Math.pow(10,Math.ceil(-Math.log(Ct)/Math.LN10));return Math.round(Ct*It)/It}(tt)));j.style.width=I*(st/w)+"px",j.innerHTML=st+"&nbsp;"+B}Ha.prototype.getDefaultPosition=function(){return"bottom-left"},Ha.prototype._onMove=function(){Li(this._map,this._container,this.options)},Ha.prototype.onAdd=function(j){return this._map=j,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",j.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ha.prototype.onRemove=function(){s.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ha.prototype.setUnit=function(j){this.options.unit=j,Li(this._map,this._container,this.options)};var Eo=function(I){this._fullscreen=!1,I&&I.container&&(I.container instanceof t.window.HTMLElement?this._container=I.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Eo.prototype.onAdd=function(j){return this._map=j,this._container||(this._container=this._map.getContainer()),this._controlContainer=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Eo.prototype.onRemove=function(){s.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Eo.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Eo.prototype._setupUI=function(){var j=this._fullscreenButton=s.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);s.create("span","mapboxgl-ctrl-icon",j).setAttribute("aria-hidden",!0),j.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Eo.prototype._updateTitle=function(){var j=this._getTitle();this._fullscreenButton.setAttribute("aria-label",j),this._fullscreenButton.title=j},Eo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Eo.prototype._isFullscreen=function(){return this._fullscreen},Eo.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Eo.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Hs={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Fs=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Ol=function(j){function I(w){j.call(this),this.options=t.extend(Object.create(Hs),w),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.addTo=function(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},I.prototype.isOpen=function(){return!!this._map},I.prototype.remove=function(){return this._content&&s.remove(this._content),this._container&&(s.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},I.prototype.getLngLat=function(){return this._lngLat},I.prototype.setLngLat=function(w){return this._lngLat=t.LngLat.convert(w),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},I.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},I.prototype.getElement=function(){return this._container},I.prototype.setText=function(w){return this.setDOMContent(t.window.document.createTextNode(w))},I.prototype.setHTML=function(w){var B,D=t.window.document.createDocumentFragment(),W=t.window.document.createElement("body");for(W.innerHTML=w;B=W.firstChild;)D.appendChild(B);return this.setDOMContent(D)},I.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},I.prototype.setMaxWidth=function(w){return this.options.maxWidth=w,this._update(),this},I.prototype.setDOMContent=function(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=s.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this},I.prototype.addClassName=function(w){this._container&&this._container.classList.add(w)},I.prototype.removeClassName=function(w){this._container&&this._container.classList.remove(w)},I.prototype.setOffset=function(w){return this.options.offset=w,this._update(),this},I.prototype.toggleClassName=function(w){if(this._container)return this._container.classList.toggle(w)},I.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=s.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},I.prototype._onMouseUp=function(w){this._update(w.point)},I.prototype._onMouseMove=function(w){this._update(w.point)},I.prototype._onDrag=function(w){this._update(w.point)},I.prototype._update=function(w){var B=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=s.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=s.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Zt){return B._container.classList.add(Zt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=oi(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||w)){var D=this._pos=this._trackPointer&&w?w:this._map.project(this._lngLat),W=this.options.anchor,tt=function Zt(qt){if(qt){if(typeof qt=="number"){var de=Math.round(Math.sqrt(.5*Math.pow(qt,2)));return{center:new t.Point(0,0),top:new t.Point(0,qt),"top-left":new t.Point(de,de),"top-right":new t.Point(-de,de),bottom:new t.Point(0,-qt),"bottom-left":new t.Point(de,-de),"bottom-right":new t.Point(-de,-de),left:new t.Point(qt,0),right:new t.Point(-qt,0)}}if(qt instanceof t.Point||Array.isArray(qt)){var me=t.Point.convert(qt);return{center:me,top:me,"top-left":me,"top-right":me,bottom:me,"bottom-left":me,"bottom-right":me,left:me,right:me}}return{center:t.Point.convert(qt.center||[0,0]),top:t.Point.convert(qt.top||[0,0]),"top-left":t.Point.convert(qt["top-left"]||[0,0]),"top-right":t.Point.convert(qt["top-right"]||[0,0]),bottom:t.Point.convert(qt.bottom||[0,0]),"bottom-left":t.Point.convert(qt["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(qt["bottom-right"]||[0,0]),left:t.Point.convert(qt.left||[0,0]),right:t.Point.convert(qt.right||[0,0])}}return Zt(new t.Point(0,0))}(this.options.offset);if(!W){var st,Ct=this._container.offsetWidth,It=this._container.offsetHeight;st=D.y+tt.bottom.y<It?["top"]:D.y>this._map.transform.height-It?["bottom"]:[],D.x<Ct/2?st.push("left"):D.x>this._map.transform.width-Ct/2&&st.push("right"),W=st.length===0?"bottom":st.join("-")}var Ut=D.add(tt[W]).round();s.setTransform(this._container,fi[W]+" translate("+Ut.x+"px,"+Ut.y+"px)"),Hi(this._container,W,"popup")}},I.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var w=this._container.querySelector(Fs);w&&w.focus()}},I.prototype._onClose=function(){this.remove()},I}(t.Evented),xu={version:t.version,supported:u,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:dr,NavigationControl:mi,GeolocateControl:Ea,AttributionControl:nn,ScaleControl:Ha,FullscreenControl:Eo,Popup:Ol,Marker:Ma,Style:Ao,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){cn().acquire(Mn)},clearPrewarmedResources:function(){var I=Ar;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(Mn),Ar=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(j){t.config.ACCESS_TOKEN=j},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(j){t.config.API_URL=j},get workerCount(){return vn.workerCount},set workerCount(j){vn.workerCount=j},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(j){t.config.MAX_PARALLEL_IMAGE_REQUESTS=j},clearStorage:function(I){t.clearTileCache(I)},workerUrl:""};return xu}),T})},"4cb6":function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.multiBindToService=dt.getServiceIdentifierAsString=dt.typeConstraint=dt.namedConstraint=dt.taggedConstraint=dt.traverseAncerstors=dt.decorate=dt.id=dt.MetadataReader=dt.postConstruct=dt.targetName=dt.multiInject=dt.unmanaged=dt.optional=dt.LazyServiceIdentifer=dt.inject=dt.named=dt.tagged=dt.injectable=dt.ContainerModule=dt.AsyncContainerModule=dt.TargetTypeEnum=dt.BindingTypeEnum=dt.BindingScopeEnum=dt.Container=dt.METADATA_KEY=void 0;var V=R("xfSm");dt.METADATA_KEY=V;var E=R("9Fde");Object.defineProperty(dt,"Container",{enumerable:!0,get:function(){return E.Container}});var T=R("FV85");Object.defineProperty(dt,"BindingScopeEnum",{enumerable:!0,get:function(){return T.BindingScopeEnum}}),Object.defineProperty(dt,"BindingTypeEnum",{enumerable:!0,get:function(){return T.BindingTypeEnum}}),Object.defineProperty(dt,"TargetTypeEnum",{enumerable:!0,get:function(){return T.TargetTypeEnum}});var e=R("dxzI");Object.defineProperty(dt,"AsyncContainerModule",{enumerable:!0,get:function(){return e.AsyncContainerModule}}),Object.defineProperty(dt,"ContainerModule",{enumerable:!0,get:function(){return e.ContainerModule}});var t=R("cZ5Q");Object.defineProperty(dt,"injectable",{enumerable:!0,get:function(){return t.injectable}});var u=R("0gSV");Object.defineProperty(dt,"tagged",{enumerable:!0,get:function(){return u.tagged}});var s=R("ZzCi");Object.defineProperty(dt,"named",{enumerable:!0,get:function(){return s.named}});var c=R("Yk9n");Object.defineProperty(dt,"inject",{enumerable:!0,get:function(){return c.inject}}),Object.defineProperty(dt,"LazyServiceIdentifer",{enumerable:!0,get:function(){return c.LazyServiceIdentifer}});var r=R("jYx5");Object.defineProperty(dt,"optional",{enumerable:!0,get:function(){return r.optional}});var h=R("n2J3");Object.defineProperty(dt,"unmanaged",{enumerable:!0,get:function(){return h.unmanaged}});var n=R("jIg/");Object.defineProperty(dt,"multiInject",{enumerable:!0,get:function(){return n.multiInject}});var i=R("oaX6");Object.defineProperty(dt,"targetName",{enumerable:!0,get:function(){return i.targetName}});var a=R("Sk89");Object.defineProperty(dt,"postConstruct",{enumerable:!0,get:function(){return a.postConstruct}});var o=R("wnjb");Object.defineProperty(dt,"MetadataReader",{enumerable:!0,get:function(){return o.MetadataReader}});var l=R("d9O0");Object.defineProperty(dt,"id",{enumerable:!0,get:function(){return l.id}});var f=R("Ztfv");Object.defineProperty(dt,"decorate",{enumerable:!0,get:function(){return f.decorate}});var v=R("RR/i");Object.defineProperty(dt,"traverseAncerstors",{enumerable:!0,get:function(){return v.traverseAncerstors}}),Object.defineProperty(dt,"taggedConstraint",{enumerable:!0,get:function(){return v.taggedConstraint}}),Object.defineProperty(dt,"namedConstraint",{enumerable:!0,get:function(){return v.namedConstraint}}),Object.defineProperty(dt,"typeConstraint",{enumerable:!0,get:function(){return v.typeConstraint}});var b=R("ujMp");Object.defineProperty(dt,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return b.getServiceIdentifierAsString}});var g=R("78VC");Object.defineProperty(dt,"multiBindToService",{enumerable:!0,get:function(){return g.multiBindToService}})},"4kj+":function(_e,dt){},"4qC0":function(_e,dt,R){var V=R("NykK"),E=R("Z0cm"),T=R("ExA7"),e="[object String]";function t(u){return typeof u=="string"||!E(u)&&T(u)&&V(u)==e}_e.exports=t},"5Tg0":function(_e,dt,R){(function(V){var E=R("Kz5y"),T=dt&&!dt.nodeType&&dt,e=T&&typeof V=="object"&&V&&!V.nodeType&&V,t=e&&e.exports===T,u=t?E.Buffer:void 0,s=u?u.allocUnsafe:void 0;function c(r,h){if(h)return r.slice();var n=r.length,i=s?s(n):new r.constructor(n);return r.copy(i),i}V.exports=c}).call(this,R("hOG+")(_e))},"5gLl":function(_e,dt,R){"use strict";R.d(dt,"a",function(){return G});var V=R("lSNA"),E=R.n(V),T=R("Aib3"),e=R.n(T),t=R("0wsv");function u(U){if(!U)throw new Error("coord is required");if(!Array.isArray(U)){if(U.type==="Feature"&&U.geometry!==null&&U.geometry.type==="Point")return U.geometry.coordinates;if(U.type==="Point")return U.coordinates}if(Array.isArray(U)&&U.length>=2&&!Array.isArray(U[0])&&!Array.isArray(U[1]))return U;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function s(U){if(Array.isArray(U))return U;if(U.type==="Feature"){if(U.geometry!==null)return U.geometry.coordinates}else if(U.coordinates)return U.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function c(U){if(U.length>1&&Object(t.c)(U[0])&&Object(t.c)(U[1]))return!0;if(Array.isArray(U[0])&&U[0].length)return c(U[0]);throw new Error("coordinates must only contain numbers")}function r(U,Z,J){if(!Z||!J)throw new Error("type and name required");if(!U||U.type!==Z)throw new Error("Invalid input to "+J+": must be a "+Z+", given "+U.type)}function h(U,Z,J){if(!U)throw new Error("No feature passed");if(!J)throw new Error(".featureOf() requires a name");if(!U||U.type!=="Feature"||!U.geometry)throw new Error("Invalid input to "+J+", Feature with geometry required");if(!U.geometry||U.geometry.type!==Z)throw new Error("Invalid input to "+J+": must be a "+Z+", given "+U.geometry.type)}function n(U,Z,J){if(!U)throw new Error("No featureCollection passed");if(!J)throw new Error(".collectionOf() requires a name");if(!U||U.type!=="FeatureCollection")throw new Error("Invalid input to "+J+", FeatureCollection required");for(var rt=0,vt=U.features;rt<vt.length;rt++){var mt=vt[rt];if(!mt||mt.type!=="Feature"||!mt.geometry)throw new Error("Invalid input to "+J+", Feature with geometry required");if(!mt.geometry||mt.geometry.type!==Z)throw new Error("Invalid input to "+J+": must be a "+Z+", given "+mt.geometry.type)}}function i(U){return U.type==="Feature"?U.geometry:U}function a(U,Z){return U.type==="FeatureCollection"?"FeatureCollection":U.type==="GeometryCollection"?"GeometryCollection":U.type==="Feature"&&U.geometry!==null?U.geometry.type:U.type}function o(U,Z,J){if(U!==null)for(var rt,vt,mt,ut,Rt,Ft,wt,Mt=0,St=0,At,nt=U.type,Pt=nt==="FeatureCollection",z=nt==="Feature",q=Pt?U.features.length:1,gt=0;gt<q;gt++){wt=Pt?U.features[gt].geometry:z?U.geometry:U,At=wt?wt.type==="GeometryCollection":!1,Rt=At?wt.geometries.length:1;for(var et=0;et<Rt;et++){var at=0,xt=0;if(ut=At?wt.geometries[et]:wt,ut!==null){Ft=ut.coordinates;var k=ut.type;switch(Mt=J&&(k==="Polygon"||k==="MultiPolygon")?1:0,k){case null:break;case"Point":if(Z(Ft,St,gt,at,xt)===!1)return!1;St++,at++;break;case"LineString":case"MultiPoint":for(rt=0;rt<Ft.length;rt++){if(Z(Ft[rt],St,gt,at,xt)===!1)return!1;St++,k==="MultiPoint"&&at++}k==="LineString"&&at++;break;case"Polygon":case"MultiLineString":for(rt=0;rt<Ft.length;rt++){for(vt=0;vt<Ft[rt].length-Mt;vt++){if(Z(Ft[rt][vt],St,gt,at,xt)===!1)return!1;St++}k==="MultiLineString"&&at++,k==="Polygon"&&xt++}k==="Polygon"&&at++;break;case"MultiPolygon":for(rt=0;rt<Ft.length;rt++){for(xt=0,vt=0;vt<Ft[rt].length;vt++){for(mt=0;mt<Ft[rt][vt].length-Mt;mt++){if(Z(Ft[rt][vt][mt],St,gt,at,xt)===!1)return!1;St++}xt++}at++}break;case"GeometryCollection":for(rt=0;rt<ut.geometries.length;rt++)if(o(ut.geometries[rt],Z,J)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(U,Z,J,rt){var vt=J;return o(U,function(mt,ut,Rt,Ft,wt){ut===0&&J===void 0?vt=mt:vt=Z(vt,mt,ut,Rt,Ft,wt)},rt),vt}function f(U,Z){var J;switch(U.type){case"FeatureCollection":for(J=0;J<U.features.length&&Z(U.features[J].properties,J)!==!1;J++);break;case"Feature":Z(U.properties,0);break}}function v(U,Z,J){var rt=J;return f(U,function(vt,mt){mt===0&&J===void 0?rt=vt:rt=Z(rt,vt,mt)}),rt}function b(U,Z){if(U.type==="Feature")Z(U,0);else if(U.type==="FeatureCollection")for(var J=0;J<U.features.length&&Z(U.features[J],J)!==!1;J++);}function g(U,Z,J){var rt=J;return b(U,function(vt,mt){mt===0&&J===void 0?rt=vt:rt=Z(rt,vt,mt)}),rt}function m(U){var Z=[];return o(U,function(J){Z.push(J)}),Z}function _(U,Z){var J,rt,vt,mt,ut,Rt,Ft,wt,Mt,St,At=0,nt=U.type==="FeatureCollection",Pt=U.type==="Feature",z=nt?U.features.length:1;for(J=0;J<z;J++){for(Rt=nt?U.features[J].geometry:Pt?U.geometry:U,wt=nt?U.features[J].properties:Pt?U.properties:{},Mt=nt?U.features[J].bbox:Pt?U.bbox:void 0,St=nt?U.features[J].id:Pt?U.id:void 0,Ft=Rt?Rt.type==="GeometryCollection":!1,ut=Ft?Rt.geometries.length:1,vt=0;vt<ut;vt++){if(mt=Ft?Rt.geometries[vt]:Rt,mt===null){if(Z(null,At,wt,Mt,St)===!1)return!1;continue}switch(mt.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Z(mt,At,wt,Mt,St)===!1)return!1;break}case"GeometryCollection":{for(rt=0;rt<mt.geometries.length;rt++)if(Z(mt.geometries[rt],At,wt,Mt,St)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}At++}}function M(U,Z,J){var rt=J;return _(U,function(vt,mt,ut,Rt,Ft){mt===0&&J===void 0?rt=vt:rt=Z(rt,vt,mt,ut,Rt,Ft)}),rt}function x(U,Z){_(U,function(J,rt,vt,mt,ut){var Rt=J===null?null:J.type;switch(Rt){case null:case"Point":case"LineString":case"Polygon":return Z(Object(t.b)(J,vt,{bbox:mt,id:ut}),rt,0)===!1?!1:void 0}var Ft;switch(Rt){case"MultiPoint":Ft="Point";break;case"MultiLineString":Ft="LineString";break;case"MultiPolygon":Ft="Polygon";break}for(var wt=0;wt<J.coordinates.length;wt++){var Mt=J.coordinates[wt],St={type:Ft,coordinates:Mt};if(Z(Object(t.b)(St,vt),rt,wt)===!1)return!1}})}function y(U,Z,J){var rt=J;return x(U,function(vt,mt,ut){mt===0&&ut===0&&J===void 0?rt=vt:rt=Z(rt,vt,mt,ut)}),rt}function S(U,Z){x(U,function(J,rt,vt){var mt=0;if(!!J.geometry){var ut=J.geometry.type;if(!(ut==="Point"||ut==="MultiPoint")){var Rt,Ft=0,wt=0,Mt=0;if(o(J,function(St,At,nt,Pt,z){if(Rt===void 0||rt>Ft||Pt>wt||z>Mt){Rt=St,Ft=rt,wt=Pt,Mt=z,mt=0;return}var q=Object(t.e)([Rt,St],J.properties);if(Z(q,rt,vt,z,mt)===!1)return!1;mt++,Rt=St})===!1)return!1}}})}function P(U,Z,J){var rt=J,vt=!1;return S(U,function(mt,ut,Rt,Ft,wt){vt===!1&&J===void 0?rt=mt:rt=Z(rt,mt,ut,Rt,Ft,wt),vt=!0}),rt}function A(U,Z){if(!U)throw new Error("geojson is required");x(U,function(J,rt,vt){if(J.geometry!==null){var mt=J.geometry.type,ut=J.geometry.coordinates;switch(mt){case"LineString":if(Z(J,rt,vt,0,0)===!1)return!1;break;case"Polygon":for(var Rt=0;Rt<ut.length;Rt++)if(Z(Object(t.e)(ut[Rt],J.properties),rt,vt,Rt)===!1)return!1;break}}})}function O(U,Z,J){var rt=J;return A(U,function(vt,mt,ut,Rt){mt===0&&J===void 0?rt=vt:rt=Z(rt,vt,mt,ut,Rt)}),rt}function L(U,Z){if(Z=Z||{},!Object(t.d)(Z))throw new Error("options is invalid");var J=Z.featureIndex||0,rt=Z.multiFeatureIndex||0,vt=Z.geometryIndex||0,mt=Z.segmentIndex||0,ut=Z.properties,Rt;switch(U.type){case"FeatureCollection":J<0&&(J=U.features.length+J),ut=ut||U.features[J].properties,Rt=U.features[J].geometry;break;case"Feature":ut=ut||U.properties,Rt=U.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Rt=U;break;default:throw new Error("geojson is invalid")}if(Rt===null)return null;var Ft=Rt.coordinates;switch(Rt.type){case"Point":case"MultiPoint":return null;case"LineString":return mt<0&&(mt=Ft.length+mt-1),Object(t.e)([Ft[mt],Ft[mt+1]],ut,Z);case"Polygon":return vt<0&&(vt=Ft.length+vt),mt<0&&(mt=Ft[vt].length+mt-1),Object(t.e)([Ft[vt][mt],Ft[vt][mt+1]],ut,Z);case"MultiLineString":return rt<0&&(rt=Ft.length+rt),mt<0&&(mt=Ft[rt].length+mt-1),Object(t.e)([Ft[rt][mt],Ft[rt][mt+1]],ut,Z);case"MultiPolygon":return rt<0&&(rt=Ft.length+rt),vt<0&&(vt=Ft[rt].length+vt),mt<0&&(mt=Ft[rt][vt].length-mt-1),Object(t.e)([Ft[rt][vt][mt],Ft[rt][vt][mt+1]],ut,Z)}throw new Error("geojson is invalid")}function H(U,Z){if(Z=Z||{},!Object(t.d)(Z))throw new Error("options is invalid");var J=Z.featureIndex||0,rt=Z.multiFeatureIndex||0,vt=Z.geometryIndex||0,mt=Z.coordIndex||0,ut=Z.properties,Rt;switch(U.type){case"FeatureCollection":J<0&&(J=U.features.length+J),ut=ut||U.features[J].properties,Rt=U.features[J].geometry;break;case"Feature":ut=ut||U.properties,Rt=U.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Rt=U;break;default:throw new Error("geojson is invalid")}if(Rt===null)return null;var Ft=Rt.coordinates;switch(Rt.type){case"Point":return Object(t.f)(Ft,ut,Z);case"MultiPoint":return rt<0&&(rt=Ft.length+rt),Object(t.f)(Ft[rt],ut,Z);case"LineString":return mt<0&&(mt=Ft.length+mt),Object(t.f)(Ft[mt],ut,Z);case"Polygon":return vt<0&&(vt=Ft.length+vt),mt<0&&(mt=Ft[vt].length+mt),Object(t.f)(Ft[vt][mt],ut,Z);case"MultiLineString":return rt<0&&(rt=Ft.length+rt),mt<0&&(mt=Ft[rt].length+mt),Object(t.f)(Ft[rt][mt],ut,Z);case"MultiPolygon":return rt<0&&(rt=Ft.length+rt),vt<0&&(vt=Ft[rt].length+vt),mt<0&&(mt=Ft[rt][vt].length-mt),Object(t.f)(Ft[rt][vt][mt],ut,Z)}throw new Error("geojson is invalid")}function F(U,Z){var J=Object.keys(U);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(U);Z&&(rt=rt.filter(function(vt){return Object.getOwnPropertyDescriptor(U,vt).enumerable})),J.push.apply(J,rt)}return J}function K(U){for(var Z=1;Z<arguments.length;Z++){var J=arguments[Z]!=null?arguments[Z]:{};Z%2?F(Object(J),!0).forEach(function(rt){E()(U,rt,J[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(J)):F(Object(J)).forEach(function(rt){Object.defineProperty(U,rt,Object.getOwnPropertyDescriptor(J,rt))})}return U}function G(U,Z){var J=[],rt={};if(U.features=U.features.filter(function(mt){var ut=mt.geometry;return mt!=null&&ut&&ut.type&&ut.coordinates&&ut.coordinates.length>0}),e()(U,!0),U.features.length===0)return{dataArray:[],featureKeys:rt};var vt=0;return x(U,function(mt,ut){var Rt=s(mt),Ft=ut,wt=K(K({},mt.properties),{},{coordinates:Rt,_id:Ft});J.push(wt)}),{dataArray:J,featureKeys:rt}}},"5ku3":function(_e,dt,R){"use strict";(function(V){R.d(dt,"a",function(){return e});var E=R("U8pU"),T=R("I0ug");function e(){var u=(typeof V=="undefined"?"undefined":Object(E.a)(V))==="object"&&String(V)==="[object process]"&&!V.browser;return!u||Object(T.a)()}function t(){return e()&&typeof document!="undefined"}}).call(this,R("Q2Ig"))},"5zYK":function(_e,dt,R){"use strict";R.d(dt,"a",function(){return r});var V=R("lSNA"),E=R.n(V),T=R("RIqP"),e=R.n(T),t=R("Aib3"),u=R.n(t);function s(h,n){var i=Object.keys(h);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(h);n&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(h,o).enumerable})),i.push.apply(i,a)}return i}function c(h){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?s(Object(i),!0).forEach(function(a){E()(h,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(a){Object.defineProperty(h,a,Object.getOwnPropertyDescriptor(i,a))})}return h}function r(h,n){var i=n.x,a=n.y,o=n.x1,l=n.y1,f=n.coordinates,v=[];return h.forEach(function(b,g){var m=[];if(i&&a&&(m=[parseFloat(b[i]),parseFloat(b[a])]),i&&a&&o&&l){var _=[parseFloat(b[i]),parseFloat(b[a])],M=[parseFloat(b[o]),parseFloat(b[l])];m=[_,M]}if(f){var x="Polygon";Array.isArray(f[0])||(x="Point"),Array.isArray(f[0])&&!Array.isArray(f[0][0])&&(x="LineString");var y={type:x,coordinates:e()(b[f])};u()(y,!0),m=y.coordinates}var S=c(c({},b),{},{_id:g,coordinates:m});v.push(S)}),{dataArray:v}}},"68d/":function(_e,dt,R){"use strict";R.d(dt,"b",function(){return Ui}),R.d(dt,"c",function(){return Ho}),R.d(dt,"a",function(){return wo});var V=R("q1tI"),E=R.n(V),T=Object(V.createContext)({});function e(){return Object(V.useContext)(T)}var t=R("8ml+"),u=R("lwsE"),s=R.n(u),c=R("W8MJ"),r=R.n(c),h=R("7W2i"),n=R.n(h),i=R("a1gu"),a=R.n(i),o=R("Nsbk"),l=R.n(o),f=R("lSNA"),v=R.n(f),b=R("yG8O"),g=R.n(b),m=R("U+yc"),_=R.n(m),M=R("1ABj"),x=R("h1nZ"),y,S,P,A,O;function L(jt,bt){var X=Object.keys(jt);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(jt);bt&&(Et=Et.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),X.push.apply(X,Et)}return X}function H(jt){for(var bt=1;bt<arguments.length;bt++){var X=arguments[bt]!=null?arguments[bt]:{};bt%2?L(Object(X),!0).forEach(function(Et){v()(jt,Et,X[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(X)):L(Object(X)).forEach(function(Et){Object.defineProperty(jt,Et,Object.getOwnPropertyDescriptor(X,Et))})}return jt}var F=(y=Object(x.lazyInject)(x.TYPES.ILogService),S=Object(x.lazyInject)(x.TYPES.IGlobalConfigService),P=function(){function jt(bt){s()(this,jt),g()(this,"logger",A,this),g()(this,"configService",O,this),this.config=void 0,this.config=bt}return r()(jt,[{key:"setContainer",value:function(X,Et){X.bind(x.TYPES.MapConfig).toConstantValue(H(H({},this.config),{},{id:Et})),X.bind(x.TYPES.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),jt}(),A=_()(P.prototype,"logger",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=_()(P.prototype,"configService",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P),K=R("QILm"),G=R.n(K),U=R("yXPU"),Z=R.n(U),J=R("J4zp"),rt=R.n(J),vt=R("o0o1"),mt=R.n(vt),ut=R("hi0z"),Rt=R.n(ut),Ft=R("Hel2"),wt=R("IOcx"),Mt=R("4cb6");function St(jt,bt){var X=Object.keys(jt);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(jt);bt&&(Et=Et.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),X.push.apply(X,Et)}return X}function At(jt){for(var bt=1;bt<arguments.length;bt++){var X=arguments[bt]!=null?arguments[bt]:{};bt%2?St(Object(X),!0).forEach(function(Et){v()(jt,Et,X[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(X)):St(Object(X)).forEach(function(Et){Object.defineProperty(jt,Et,Object.getOwnPropertyDescriptor(X,Et))})}return jt}function nt(){var jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},bt={top:0,right:0,bottom:0,left:0};if(typeof jt=="number")return{top:jt,right:jt,bottom:jt,left:jt};if(Array.isArray(jt)){if(jt.length===4)return{top:jt[0],right:jt[1],bottom:jt[2],left:jt[3]};if(jt.length===2)return{top:jt[0],right:jt[1],bottom:jt[0],left:jt[1]}}return At(At({},bt),jt)}var Pt={dark:"amap://styles/2a09079c3daac9420ee53b67307a8006?isPublic=true",light:"amap://styles/1fd9f8ef9751298f11f5c56968312c70?isPublic=true",normal:"amap://styles/normal",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true"},z=Math.PI/180,q=function(){function jt(){s()(this,jt),this.projectionMatrix=wt.b.create(),this.viewMatrix=wt.b.create(),this.viewProjectionMatrix=wt.b.create(),this.ViewProjectionMatrixUncentered=wt.b.create(),this.viewUncenteredMatrix=wt.b.create(),this.zoom=void 0,this.center=void 0}return r()(jt,[{key:"syncWithMapCamera",value:function(X){var Et=X.zoom,Lt=Et===void 0?1:Et,ie=X.pitch,ze=ie===void 0?0:ie,yn=X.bearing,dn=yn===void 0?0:yn,Pn=X.center,Br=Pn===void 0?[0,0]:Pn,ce=X.offsetOrigin,xe=ce===void 0?[0,0]:ce,Ke=X.cameraHeight,zn=Ke===void 0?1:Ke,lr=X.aspect,pr=lr===void 0?1:lr,Qn=X.near,Jr=Qn===void 0?.1:Qn,qr=X.far,ri=qr===void 0?1e3:qr,ui=X.fov,yi=ui===void 0?0:ui;this.zoom=Lt,this.center=Br;var Ti=ze*z,pi=(360-dn)*z;wt.b.perspective(this.projectionMatrix,yi,pr,Jr,ri);var gi=wt.d.fromValues(zn*Math.sin(Ti)*Math.sin(pi),-zn*Math.sin(Ti)*Math.cos(pi),zn*Math.cos(Ti)),Cr=wt.d.fromValues(-Math.cos(Ti)*Math.sin(pi),Math.cos(Ti)*Math.cos(pi),Math.sin(Ti));wt.b.lookAt(this.viewMatrix,gi,wt.d.fromValues(0,0,0),Cr),this.viewUncenteredMatrix=wt.b.clone(this.viewMatrix),wt.b.translate(this.viewMatrix,this.viewMatrix,wt.d.fromValues(-xe[0],xe[1],0)),wt.b.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),wt.b.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var X=rt()(this.center,2),Et=X[0],Lt=X[1];return[Et,Lt]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(X,Et){var Lt=85.0511287798,ie=Math.max(Math.min(Lt,X[1]),-Lt),ze=256<<20,yn=Math.PI/180,dn=X[0]*yn,Pn=ie*yn;Pn=Math.log(Math.tan(Math.PI/4+Pn/2));var Br=.5/Math.PI,ce=.5,xe=-.5/Math.PI;return yn=.5,dn=ze*(Br*dn+ce)-215440491,Pn=-(ze*(xe*Pn+yn)-106744817),[dn,Pn]}}]),jt}(),gt,et,at,xt,k,ot,it,$,_t,yt,Nt,$t,ee;function Gt(jt,bt){var X=Object.keys(jt);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(jt);bt&&(Et=Et.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),X.push.apply(X,Et)}return X}function Ht(jt){for(var bt=1;bt<arguments.length;bt++){var X=arguments[bt]!=null?arguments[bt]:{};bt%2?Gt(Object(X),!0).forEach(function(Et){v()(jt,Et,X[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(X)):Gt(Object(X)).forEach(function(Et){Object.defineProperty(jt,Et,Object.getOwnPropertyDescriptor(X,Et))})}return jt}R("BGjm")(`/* @antv/l7-maps */
.amap-logo{
 display: none !important;
}
`);var ae=0;window.forceWebGL=!0;var le="15cd8a57710d40c9b7c0e3cc120f1200",Be="1.4.15",Ce="amap-script",We=!1,Ye=[],wn=12,er=(gt=Object(Mt.injectable)(),et=Object(Mt.inject)(x.TYPES.IGlobalConfigService),at=Object(Mt.inject)(x.TYPES.ILogService),xt=Object(Mt.inject)(x.TYPES.MapConfig),k=Object(Mt.inject)(x.TYPES.ICoordinateSystemService),ot=Object(Mt.inject)(x.TYPES.IEventEmitter),gt(it=($=function(){function jt(){var bt=this;s()(this,jt),this.map=void 0,g()(this,"configService",_t,this),g()(this,"logger",yt,this),g()(this,"config",Nt,this),g()(this,"coordinateSystemService",$t,this),g()(this,"eventEmitter",ee,this),this.markerContainer=void 0,this.$mapContainer=void 0,this.viewport=void 0,this.cameraChangedCallback=void 0,this.handleCameraChanged=function(X){var Et=X.camera,Lt=Et.fov,ie=Et.near,ze=Et.far,yn=Et.height,dn=Et.pitch,Pn=Et.rotation,Br=Et.aspect,ce=Et.position,xe=bt.getCenter(),Ke=xe.lng,zn=xe.lat;if(bt.cameraChangedCallback){bt.viewport.syncWithMapCamera({aspect:Br,bearing:360-Pn,far:ze,fov:Lt,cameraHeight:yn,near:ie,pitch:dn,zoom:bt.map.getZoom()-1,center:[Ke,zn],offsetOrigin:[ce.x,ce.y]});var lr=bt.config.offsetZoom,pr=lr===void 0?wn:lr;bt.viewport.getZoom()>pr?bt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.P20_OFFSET):bt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.P20),bt.cameraChangedCallback(bt.viewport)}}}return r()(jt,[{key:"addMarkerContainer",value:function(){var X=this.map.getContainer();if(X!==null){var Et=X.getElementsByClassName("amap-maps")[0];this.markerContainer=Ft.a.create("div","l7-marker-container",Et)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(X,Et){x.MapServiceEvent.indexOf(X)!==-1?this.eventEmitter.on(X,Et):this.map.on(X,Et)}},{key:"off",value:function(X,Et){x.MapServiceEvent.indexOf(X)!==-1?this.eventEmitter.off(X,Et):this.map.off(X,Et)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var X;return(X=this.map.getContainer())===null||X===void 0?void 0:X.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var X=this.map.getSize();return[X.getWidth(),X.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(X){return this.map.setZoom(X)}},{key:"getCenter",value:function(X){if(X!=null&&X.padding){var Et=this.getCenter(),Lt=this.getSize(),ie=rt()(Lt,2),ze=ie[0],yn=ie[1],dn=nt(X.padding),Pn=this.lngLatToPixel([Et.lng,Et.lat]),Br=[(dn.right-dn.left)/2,(dn.bottom-dn.top)/2],ce=this.pixelToLngLat([Pn.x-Br[0],Pn.y-Br[1]]);return ce}var xe=this.map.getCenter();return{lng:xe.getLng(),lat:xe.getLat()}}},{key:"setCenter",value:function(X,Et){if(Et!=null&&Et.padding){var Lt=nt(Et.padding),ie=this.lngLatToPixel(X),ze=[(Lt.right-Lt.left)/2,(Lt.bottom-Lt.top)/2],yn=this.pixelToLngLat([ie.x+ze[0],ie.y+ze[1]]);this.map.setCenter([yn.lng,yn.lat])}else this.map.setCenter(X)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var X=this.map.getBounds().toBounds(),Et=X.getNorthEast(),Lt=X.getSouthWest(),ie=this.getCenter(),ze=ie.lng>Et.getLng()||ie.lng<Lt.getLng()?180-Et.getLng():Et.getLng(),yn=ie.lng<Lt.getLng()?Lt.getLng()-180:Lt.getLng();return[[yn,Lt.getLat()],[ze,Et.getLat()]]}},{key:"getMinZoom",value:function(){var X=this.map.get("zooms");return X[0]-1}},{key:"getMaxZoom",value:function(){var X=this.map.get("zooms");return X[1]-1}},{key:"setRotation",value:function(X){return this.map.setRotation(X)}},{key:"setPitch",value:function(X){return this.map.setPitch(X)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(X){this.map.panTo(X)}},{key:"panBy",value:function(X){this.map.panTo(X)}},{key:"fitBounds",value:function(X){this.map.setBounds(new AMap.Bounds([X[0][0],X[0][1],X[1][0],X[1][1]]))}},{key:"setZoomAndCenter",value:function(X,Et){this.map.setZoomAndCenter(X,Et)}},{key:"setMapStyle",value:function(X){this.map.setMapStyle(this.getMapStyle(X))}},{key:"setMapStatus",value:function(X){this.map.setStatus(X)}},{key:"pixelToLngLat",value:function(X){var Et=this.map.pixelToLngLat(new AMap.Pixel(X[0],X[1]));return{lng:Et.getLng(),lat:Et.getLat()}}},{key:"lngLatToPixel",value:function(X){var Et=this.map.lnglatToPixel(new AMap.LngLat(X[0],X[1]));return{x:Et.getX(),y:Et.getY()}}},{key:"containerToLngLat",value:function(X){var Et=new AMap.Pixel(X[0],X[1]),Lt=this.map.containerToLngLat(Et);return{lng:Lt==null?void 0:Lt.getLng(),lat:Lt==null?void 0:Lt.getLat()}}},{key:"lngLatToContainer",value:function(X){var Et=new AMap.LngLat(X[0],X[1]),Lt=this.map.lngLatToContainer(Et);return{x:Lt.getX(),y:Lt.getY()}}},{key:"lngLatToMercator",value:function(X,Et){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(X,Et,Lt){var ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],ze=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},yn=this.viewport.projectFlat(X),dn=wt.b.create();return wt.b.translate(dn,dn,wt.d.fromValues(yn[0],yn[1],Et)),wt.b.scale(dn,dn,wt.d.fromValues(ie[0],ie[1],ie[2])),wt.b.rotateX(dn,dn,Lt[0]),wt.b.rotateY(dn,dn,Lt[1]),wt.b.rotateZ(dn,dn,Lt[2]),dn}},{key:"init",value:function(){var bt=Z()(mt.a.mark(function Et(){var Lt=this,ie,ze,yn,dn,Pn,Br,ce,xe,Ke,zn,lr,pr,Qn,Jr;return mt.a.wrap(function(ri){for(;;)switch(ri.prev=ri.next){case 0:return ie=this.config,ze=ie.id,yn=ie.style,dn=yn===void 0?"light":yn,Pn=ie.minZoom,Br=Pn===void 0?0:Pn,ce=ie.maxZoom,xe=ce===void 0?18:ce,Ke=ie.token,zn=Ke===void 0?le:Ke,lr=ie.mapInstance,pr=ie.plugin,Qn=pr===void 0?[]:pr,Jr=G()(ie,["id","style","minZoom","maxZoom","token","mapInstance","plugin"]),ri.next=3,new Promise(function(ui){var yi=function(){if(lr)Lt.map=lr,Lt.$mapContainer=Lt.map.getContainer(),setTimeout(function(){Lt.map.on("camerachange",Lt.handleCameraChanged),ui()},30);else{Lt.$mapContainer=Lt.creatAmapContainer(ze);var pi=new AMap.Map(Lt.$mapContainer,Ht({mapStyle:Lt.getMapStyle(dn),zooms:[Br,xe],viewMode:"3D"},Jr));pi.on("camerachange",Lt.handleCameraChanged),Lt.map=pi,setTimeout(function(){ui()},10)}};!We&&!lr?(zn===le&&Lt.logger.warn(Lt.configService.getSceneWarninfo("MapToken")),We=!0,Qn.push("Map3D"),Rt.a.load({key:zn,version:Be,plugins:Qn}).then(function(Ti){yi(),Ye.length&&(Ye.forEach(function(pi){return pi()}),Ye=[])}).catch(function(Ti){throw new Error(Ti)})):We&&window.AMap||lr?yi():Ye.push(yi)});case 3:this.viewport=new q;case 4:case"end":return ri.stop()}},Et,this)}));function X(){return bt.apply(this,arguments)}return X}()},{key:"exportMap",value:function(X){var Et,Lt=(Et=this.getContainer())===null||Et===void 0?void 0:Et.getElementsByClassName("amap-layer")[0],ie=X==="jpg"?Lt==null?void 0:Lt.toDataURL("image/jpeg"):Lt==null?void 0:Lt.toDataURL("image/png");return ie}},{key:"emit",value:function(X){for(var Et,Lt=arguments.length,ie=new Array(Lt>1?Lt-1:0),ze=1;ze<Lt;ze++)ie[ze-1]=arguments[ze];(Et=this.eventEmitter).emit.apply(Et,[X].concat(ie))}},{key:"once",value:function(X){for(var Et,Lt=arguments.length,ie=new Array(Lt>1?Lt-1:0),ze=1;ze<Lt;ze++)ie[ze-1]=arguments[ze];(Et=this.eventEmitter).once.apply(Et,[X].concat(ie))}},{key:"destroy",value:function(){this.map.destroy(),delete window.initAMap;var X=document.getElementById(Ce);X&&document.head.removeChild(X)}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(X){this.cameraChangedCallback=X}},{key:"getMapStyle",value:function(X){return Pt[X]?Pt[X]:X}},{key:"creatAmapContainer",value:function(X){var Et=X;typeof X=="string"&&(Et=document.getElementById(X));var Lt=document.createElement("div");return Lt.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,Lt.id="l7_amap_div"+ae++,Et.appendChild(Lt),Lt}}]),jt}(),_t=_()($.prototype,"configService",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=_()($.prototype,"logger",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt=_()($.prototype,"config",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t=_()($.prototype,"coordinateSystemService",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=_()($.prototype,"eventEmitter",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$))||it);function Lr(jt){var bt=on();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function on(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var en=function(jt){n()(X,jt);var bt=Lr(X);function X(){return s()(this,X),bt.apply(this,arguments)}return r()(X,[{key:"getServiceConstructor",value:function(){return er}}]),X}(F);function An(jt,bt){var X=Object.keys(jt);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(jt);bt&&(Et=Et.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),X.push.apply(X,Et)}return X}function Bn(jt){for(var bt=1;bt<arguments.length;bt++){var X=arguments[bt]!=null?arguments[bt]:{};bt%2?An(Object(X),!0).forEach(function(Et){gr(jt,Et,X[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(X)):An(Object(X)).forEach(function(Et){Object.defineProperty(jt,Et,Object.getOwnPropertyDescriptor(X,Et))})}return jt}function gr(jt,bt,X){return bt in jt?Object.defineProperty(jt,bt,{value:X,enumerable:!0,configurable:!0,writable:!0}):jt[bt]=X,jt}function hi(jt,bt){return Wt(jt)||ge(jt,bt)||Me(jt,bt)||Ae()}function Ae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Me(jt,bt){if(!!jt){if(typeof jt=="string")return Qt(jt,bt);var X=Object.prototype.toString.call(jt).slice(8,-1);if(X==="Object"&&jt.constructor&&(X=jt.constructor.name),X==="Map"||X==="Set")return Array.from(jt);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return Qt(jt,bt)}}function Qt(jt,bt){(bt==null||bt>jt.length)&&(bt=jt.length);for(var X=0,Et=new Array(bt);X<bt;X++)Et[X]=jt[X];return Et}function ge(jt,bt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var X=[],Et=!0,Lt=!1,ie=void 0;try{for(var ze=jt[Symbol.iterator](),yn;!(Et=(yn=ze.next()).done)&&(X.push(yn.value),!(bt&&X.length===bt));Et=!0);}catch(dn){Lt=!0,ie=dn}finally{try{!Et&&ze.return!=null&&ze.return()}finally{if(Lt)throw ie}}return X}}function Wt(jt){if(Array.isArray(jt))return jt}var re=E.a.memo(function(jt){var bt=jt.style,X=jt.className,Et=jt.map,Lt=jt.option,ie=jt.onSceneLoaded,ze=jt.children,yn=Object(V.useRef)(null),dn=Object(V.useState)(),Pn=hi(dn,2),Br=Pn[0],ce=Pn[1];return Object(V.useEffect)(function(){var xe=new t.Scene(Bn(Bn({id:yn.current},Lt),{},{map:new en(Et)}));return xe.on("loaded",function(){ce(xe),ie&&ie(xe)}),function(){xe.destroy()}},[]),Object(V.useEffect)(function(){Br&&Et.style&&Br.setMapStyle(Et.style)},[JSON.stringify(Et.style)]),Object(V.useEffect)(function(){Br&&Et.zoom&&Br.setZoom(Et.zoom)},[Et.zoom]),Object(V.useEffect)(function(){Br&&Et.center&&Br.setCenter(Et.center)},[JSON.stringify(Et.center)]),Object(V.useEffect)(function(){Br&&Et.pitch&&Br.setPitch(Et.pitch)},[Et.pitch]),Object(V.useEffect)(function(){Br&&Et.rotation&&Br.setRotation(Et.rotation)},[Et.rotation]),E.a.createElement(T.Provider,{value:Br},E.a.createElement("div",{ref:yn,className:X,style:bt},Br&&ze))}),Te=re,ue=R("4ZJM"),be=R.n(ue),Xe=R("1OyB"),Rn=R("vuIU"),tr=R("md7G"),Mn=R("foSv"),vn=R("Ji7U"),Ar=R("JX7q"),or=R("ODXe"),cn=R("bl9R");function Pr(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Sr(jt,bt){var X=cn.transformMat4([],bt,jt);return cn.scale(X,X,1/X[3]),X}function De(jt,bt){var X=jt%bt;return X<0?bt+X:X}function $e(jt,bt,X){return X*bt+(1-X)*jt}var Ve=R("ZaHm"),En=R("ZxFD"),xn=R("n+fv");function Nn(jt,bt){if(!jt)throw new Error(bt||"viewport-mercator-project: assertion failed.")}var mn=Math.PI,Dn=mn/4,$n=mn/180,Wn=180/mn,_n=512,xr=4003e4,mr=1.5;function Fr(jt){return Math.pow(2,jt)}function xi(jt){return Math.log2(jt)}function Ta(jt,bt){var X=Object(or.a)(jt,2),Et=X[0],Lt=X[1];Nn(Number.isFinite(Et)&&Number.isFinite(bt)),Nn(Number.isFinite(Lt)&&Lt>=-90&&Lt<=90,"invalid latitude"),bt*=_n;var ie=Et*$n,ze=Lt*$n,yn=bt*(ie+mn)/(2*mn),dn=bt*(mn-Math.log(Math.tan(Dn+ze*.5)))/(2*mn);return[yn,dn]}function Aa(jt,bt){var X=Object(or.a)(jt,2),Et=X[0],Lt=X[1];bt*=_n;var ie=Et/bt*(2*mn)-mn,ze=2*(Math.atan(Math.exp(mn-Lt/bt*(2*mn)))-Dn);return[ie*Wn,ze*Wn]}function to(jt){var bt=jt.latitude;Nn(Number.isFinite(bt));var X=Math.cos(bt*$n);return xi(xr*X)-9}function Vo(jt){var bt=jt.latitude,X=jt.longitude,Et=jt.zoom,Lt=jt.scale,ie=jt.highPrecision,ze=ie===void 0?!1:ie;Lt=Lt!==void 0?Lt:Fr(Et),Nn(Number.isFinite(bt)&&Number.isFinite(X)&&Number.isFinite(Lt));var yn={},dn=_n*Lt,Pn=Math.cos(bt*$n),Br=dn/360,ce=Br/Pn,xe=dn/xr/Pn;if(yn.pixelsPerMeter=[xe,-xe,xe],yn.metersPerPixel=[1/xe,-1/xe,1/xe],yn.pixelsPerDegree=[Br,-ce,xe],yn.degreesPerPixel=[1/Br,-1/ce,1/xe],ze){var Ke=$n*Math.tan(bt*$n)/Pn,zn=Br*Ke/2,lr=dn/xr*Ke,pr=lr/ce*xe;yn.pixelsPerDegree2=[0,-zn,lr],yn.pixelsPerMeter2=[pr,0,pr]}return yn}function Ro(jt,bt){var X=Object(or.a)(jt,3),Et=X[0],Lt=X[1],ie=X[2],ze=Object(or.a)(bt,3),yn=ze[0],dn=ze[1],Pn=ze[2],Br=1,ce=Vo({longitude:Et,latitude:Lt,scale:Br,highPrecision:!0}),xe=ce.pixelsPerMeter,Ke=ce.pixelsPerMeter2,zn=Ta(jt,Br);zn[0]+=yn*(xe[0]+Ke[0]*dn),zn[1]+=dn*(xe[1]+Ke[1]*dn);var lr=Aa(zn,Br),pr=(ie||0)+(Pn||0);return Number.isFinite(ie)||Number.isFinite(Pn)?[lr[0],lr[1],pr]:lr}function ro(jt){var bt=jt.height,X=jt.pitch,Et=jt.bearing,Lt=jt.altitude,ie=jt.center,ze=ie===void 0?null:ie,yn=jt.flipY,dn=yn===void 0?!1:yn,Pn=Pr();return Ve.translate(Pn,Pn,[0,0,-Lt]),Ve.scale(Pn,Pn,[1,1,1/bt]),Ve.rotateX(Pn,Pn,-X*$n),Ve.rotateZ(Pn,Pn,Et*$n),dn&&Ve.scale(Pn,Pn,[1,-1,1]),ze&&Ve.translate(Pn,Pn,xn.negate([],ze)),Pn}function vs(jt){var bt=jt.width,X=jt.height,Et=jt.altitude,Lt=Et===void 0?mr:Et,ie=jt.pitch,ze=ie===void 0?0:ie,yn=jt.nearZMultiplier,dn=yn===void 0?1:yn,Pn=jt.farZMultiplier,Br=Pn===void 0?1:Pn,ce=ze*$n,xe=Math.atan(.5/Lt),Ke=Math.sin(xe)*Lt/Math.sin(Math.PI/2-ce-xe),zn=Math.cos(Math.PI/2-ce)*Ke+Lt;return{fov:2*Math.atan(X/2/Lt),aspect:bt/X,focalDistance:Lt,near:dn,far:zn*Br}}function Jo(jt){var bt=jt.width,X=jt.height,Et=jt.pitch,Lt=jt.altitude,ie=jt.nearZMultiplier,ze=jt.farZMultiplier,yn=vs({width:bt,height:X,altitude:Lt,pitch:Et,nearZMultiplier:ie,farZMultiplier:ze}),dn=yn.fov,Pn=yn.aspect,Br=yn.near,ce=yn.far,xe=Ve.perspective([],dn,Pn,Br,ce);return xe}function Do(jt,bt){var X=Object(or.a)(jt,3),Et=X[0],Lt=X[1],ie=X[2],ze=ie===void 0?0:ie;return Nn(Number.isFinite(Et)&&Number.isFinite(Lt)&&Number.isFinite(ze)),Sr(bt,[Et,Lt,ze,1])}function xs(jt,bt){var X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Et=Object(or.a)(jt,3),Lt=Et[0],ie=Et[1],ze=Et[2];if(Nn(Number.isFinite(Lt)&&Number.isFinite(ie),"invalid pixel coordinate"),Number.isFinite(ze)){var yn=Sr(bt,[Lt,ie,ze,1]);return yn}var dn=Sr(bt,[Lt,ie,0,1]),Pn=Sr(bt,[Lt,ie,1,1]),Br=dn[2],ce=Pn[2],xe=Br===ce?0:((X||0)-Br)/(ce-Br);return En.lerp([],dn,Pn,xe)}var Ra=Pr(),$o=function(){function jt(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=bt.width,Et=bt.height,Lt=bt.viewMatrix,ie=Lt===void 0?Ra:Lt,ze=bt.projectionMatrix,yn=ze===void 0?Ra:ze;Object(Xe.a)(this,jt),this.width=X||1,this.height=Et||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=ie,this.projectionMatrix=yn;var dn=Pr();Ve.multiply(dn,dn,this.projectionMatrix),Ve.multiply(dn,dn,this.viewMatrix),this.viewProjectionMatrix=dn;var Pn=Pr();Ve.scale(Pn,Pn,[this.width/2,-this.height/2,1]),Ve.translate(Pn,Pn,[1,-1,0]),Ve.multiply(Pn,Pn,this.viewProjectionMatrix);var Br=Ve.invert(Pr(),Pn);if(!Br)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=Pn,this.pixelUnprojectionMatrix=Br,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(Rn.a)(jt,[{key:"equals",value:function(X){return X instanceof jt?X.width===this.width&&X.height===this.height&&Ve.equals(X.projectionMatrix,this.projectionMatrix)&&Ve.equals(X.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(X){var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Lt=Et.topLeft,ie=Lt===void 0?!0:Lt,ze=this.projectPosition(X),yn=Do(ze,this.pixelProjectionMatrix),dn=Object(or.a)(yn,2),Pn=dn[0],Br=dn[1],ce=ie?Br:this.height-Br;return X.length===2?[Pn,ce]:[Pn,ce,yn[2]]}},{key:"unproject",value:function(X){var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Lt=Et.topLeft,ie=Lt===void 0?!0:Lt,ze=Et.targetZ,yn=Object(or.a)(X,3),dn=yn[0],Pn=yn[1],Br=yn[2],ce=ie?Pn:this.height-Pn,xe=ze&&ze*this.pixelsPerMeter,Ke=xs([dn,ce,Br],this.pixelUnprojectionMatrix,xe),zn=this.unprojectPosition(Ke),lr=Object(or.a)(zn,3),pr=lr[0],Qn=lr[1],Jr=lr[2];return Number.isFinite(Br)?[pr,Qn,Jr]:Number.isFinite(ze)?[pr,Qn,ze]:[pr,Qn]}},{key:"projectPosition",value:function(X){var Et=this.projectFlat(X),Lt=Object(or.a)(Et,2),ie=Lt[0],ze=Lt[1],yn=(X[2]||0)*this.pixelsPerMeter;return[ie,ze,yn]}},{key:"unprojectPosition",value:function(X){var Et=this.unprojectFlat(X),Lt=Object(or.a)(Et,2),ie=Lt[0],ze=Lt[1],yn=(X[2]||0)/this.pixelsPerMeter;return[ie,ze,yn]}},{key:"projectFlat",value:function(X){var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return X}},{key:"unprojectFlat",value:function(X){var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return X}}]),jt}();function jo(jt){var bt=jt.width,X=jt.height,Et=jt.bounds,Lt=jt.minExtent,ie=Lt===void 0?0:Lt,ze=jt.maxZoom,yn=ze===void 0?24:ze,dn=jt.padding,Pn=dn===void 0?0:dn,Br=jt.offset,ce=Br===void 0?[0,0]:Br,xe=Object(or.a)(Et,2),Ke=Object(or.a)(xe[0],2),zn=Ke[0],lr=Ke[1],pr=Object(or.a)(xe[1],2),Qn=pr[0],Jr=pr[1];if(Number.isFinite(Pn)){var qr=Pn;Pn={top:qr,bottom:qr,left:qr,right:qr}}else Nn(Number.isFinite(Pn.top)&&Number.isFinite(Pn.bottom)&&Number.isFinite(Pn.left)&&Number.isFinite(Pn.right));var ri=new Js({width:bt,height:X,longitude:0,latitude:0,zoom:0}),ui=ri.project([zn,Jr]),yi=ri.project([Qn,lr]),Ti=[Math.max(Math.abs(yi[0]-ui[0]),ie),Math.max(Math.abs(yi[1]-ui[1]),ie)],pi=[bt-Pn.left-Pn.right-Math.abs(ce[0])*2,X-Pn.top-Pn.bottom-Math.abs(ce[1])*2];Nn(pi[0]>0&&pi[1]>0);var gi=pi[0]/Ti[0],Cr=pi[1]/Ti[1],Ir=(Pn.right-Pn.left)/2/gi,Mi=(Pn.bottom-Pn.top)/2/Cr,Gi=[(yi[0]+ui[0])/2+Ir,(yi[1]+ui[1])/2+Mi],kr=ri.unproject(Gi),ca=ri.zoom+Math.log2(Math.abs(Math.min(gi,Cr)));return{longitude:kr[0],latitude:kr[1],zoom:Math.min(ca,yn)}}var Js=function(jt){Object(vn.a)(bt,jt);function bt(){var X,Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Lt=Et.width,ie=Et.height,ze=Et.latitude,yn=ze===void 0?0:ze,dn=Et.longitude,Pn=dn===void 0?0:dn,Br=Et.zoom,ce=Br===void 0?0:Br,xe=Et.pitch,Ke=xe===void 0?0:xe,zn=Et.bearing,lr=zn===void 0?0:zn,pr=Et.altitude,Qn=pr===void 0?1.5:pr,Jr=Et.nearZMultiplier,qr=Et.farZMultiplier;Object(Xe.a)(this,bt),Lt=Lt||1,ie=ie||1;var ri=Fr(ce);Qn=Math.max(.75,Qn);var ui=Ta([Pn,yn],ri);ui[2]=0;var yi=Jo({width:Lt,height:ie,pitch:Ke,bearing:lr,altitude:Qn,nearZMultiplier:Jr||1/ie,farZMultiplier:qr||1.01}),Ti=ro({height:ie,center:ui,pitch:Ke,bearing:lr,altitude:Qn,flipY:!0});return X=Object(tr.a)(this,Object(Mn.a)(bt).call(this,{width:Lt,height:ie,viewMatrix:Ti,projectionMatrix:yi})),X.latitude=yn,X.longitude=Pn,X.zoom=ce,X.pitch=Ke,X.bearing=lr,X.altitude=Qn,X.scale=ri,X.center=ui,X.pixelsPerMeter=Vo(Object(Ar.a)(Object(Ar.a)(X))).pixelsPerMeter[2],Object.freeze(Object(Ar.a)(Object(Ar.a)(X))),X}return Object(Rn.a)(bt,[{key:"projectFlat",value:function(Et){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Ta(Et,Lt)}},{key:"unprojectFlat",value:function(Et){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Aa(Et,Lt)}},{key:"getMapCenterByLngLatPosition",value:function(Et){var Lt=Et.lngLat,ie=Et.pos,ze=xs(ie,this.pixelUnprojectionMatrix),yn=Ta(Lt,this.scale),dn=En.add([],yn,En.negate([],ze)),Pn=En.add([],this.center,dn);return Aa(Pn,this.scale)}},{key:"getLocationAtPoint",value:function(Et){var Lt=Et.lngLat,ie=Et.pos;return this.getMapCenterByLngLatPosition({lngLat:Lt,pos:ie})}},{key:"fitBounds",value:function(Et){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie=this.width,ze=this.height,yn=jo(Object.assign({width:ie,height:ze,bounds:Et},Lt)),dn=yn.longitude,Pn=yn.latitude,Br=yn.zoom;return new bt({width:ie,height:ze,longitude:dn,latitude:Pn,zoom:Br})}}]),bt}($o),io=function(){function jt(){s()(this,jt),this.viewport=void 0}return r()(jt,[{key:"syncWithMapCamera",value:function(X){var Et=X.center,Lt=X.zoom,ie=X.pitch,ze=X.bearing,yn=X.viewportHeight,dn=X.viewportWidth;this.viewport=new Js({width:dn,height:yn,longitude:Et&&Et[0],latitude:Et&&Et[1],zoom:Lt,pitch:ie,bearing:ze})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(X,Et){return this.viewport.projectFlat(X,Et)}}]),jt}(),so={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},Gs,Ne,se,Yt,Ee,sn,Fn,rr,qn,$r,bi,wi,Vi;function sa(jt,bt){var X=Object.keys(jt);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(jt);bt&&(Et=Et.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),X.push.apply(X,Et)}return X}function $a(jt){for(var bt=1;bt<arguments.length;bt++){var X=arguments[bt]!=null?arguments[bt]:{};bt%2?sa(Object(X),!0).forEach(function(Et){v()(jt,Et,X[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(X)):sa(Object(X)).forEach(function(Et){Object.defineProperty(jt,Et,Object.getOwnPropertyDescriptor(X,Et))})}return jt}R("BGjm")(`/* @antv/l7-maps */
.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=be.a;var Ca={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},_o=0,Fa=12,uo="pk.eyJ1IjoibHp4dWUiLCJhIjoiYnhfTURyRSJ9.Ugm314vAKPHBzcPmY1p4KQ",vo=(Gs=Object(Mt.injectable)(),Ne=Object(Mt.inject)(x.TYPES.MapConfig),se=Object(Mt.inject)(x.TYPES.IGlobalConfigService),Yt=Object(Mt.inject)(x.TYPES.ILogService),Ee=Object(Mt.inject)(x.TYPES.ICoordinateSystemService),sn=Object(Mt.inject)(x.TYPES.IEventEmitter),Gs(Fn=(rr=function(){function jt(){var bt=this;s()(this,jt),this.map=void 0,g()(this,"config",qn,this),g()(this,"configService",$r,this),g()(this,"logger",bi,this),g()(this,"coordinateSystemService",wi,this),g()(this,"eventEmitter",Vi,this),this.viewport=void 0,this.markerContainer=void 0,this.cameraChangedCallback=void 0,this.$mapContainer=void 0,this.handleCameraChanged=function(){var X=bt.map.getCenter().wrap(),Et=X.lat,Lt=X.lng;bt.viewport.syncWithMapCamera({bearing:bt.map.getBearing(),center:[Lt,Et],viewportHeight:bt.map.transform.height,pitch:bt.map.getPitch(),viewportWidth:bt.map.transform.width,zoom:bt.map.getZoom(),cameraHeight:0});var ie=bt.config.offsetZoom,ze=ie===void 0?Fa:ie;bt.viewport.getZoom()>ze?bt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT_OFFSET):bt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT),bt.cameraChangedCallback(bt.viewport)}}return r()(jt,[{key:"addMarkerContainer",value:function(){var X=this.map.getCanvasContainer();this.markerContainer=Ft.a.create("div","l7-marker-container",X),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(X,Et){x.MapServiceEvent.indexOf(X)!==-1?this.eventEmitter.on(X,Et):this.map.on(Ca[X]||X,Et)}},{key:"off",value:function(X,Et){this.map.off(Ca[X]||X,Et)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var X=this.map.transform;return[X.width,X.height]}},{key:"getType",value:function(){return"mapbox"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(X){return this.map.setZoom(X)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(X){this.map.setCenter(X)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(X){this.map.setBearing(X)}},{key:"zoomIn",value:function(X,Et){this.map.zoomIn(X,Et)}},{key:"zoomOut",value:function(X,Et){this.map.zoomOut(X,Et)}},{key:"setPitch",value:function(X){return this.map.setPitch(X)}},{key:"panTo",value:function(X){this.map.panTo(X)}},{key:"panBy",value:function(X){this.panTo(X)}},{key:"fitBounds",value:function(X,Et){this.map.fitBounds(X,Et)}},{key:"setMaxZoom",value:function(X){this.map.setMaxZoom(X)}},{key:"setMinZoom",value:function(X){this.map.setMinZoom(X)}},{key:"setMapStatus",value:function(X){X.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),X.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),X.dragEnable===!1&&this.map.dragPan.disable(),X.dragEnable===!0&&this.map.dragPan.enable(),X.rotateEnable===!1&&this.map.dragRotate.disable(),X.rotateEnable===!0&&this.map.dragRotate.enable(),X.keyboardEnable===!1&&this.map.keyboard.disable(),X.keyboardEnable===!0&&this.map.keyboard.enable(),X.zoomEnable===!1&&this.map.scrollZoom.disable(),X.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(X,Et){this.map.flyTo({zoom:X,center:Et})}},{key:"setMapStyle",value:function(X){this.map.setStyle(this.getMapStyle(X))}},{key:"pixelToLngLat",value:function(X){return this.map.unproject(X)}},{key:"lngLatToPixel",value:function(X){return this.map.project(X)}},{key:"containerToLngLat",value:function(X){return this.map.unproject(X)}},{key:"lngLatToContainer",value:function(X){return this.map.project(X)}},{key:"lngLatToMercator",value:function(X,Et){var Lt=window.mapboxgl.MercatorCoordinate.fromLngLat(X,Et),ie=Lt.x,ze=ie===void 0?0:ie,yn=Lt.y,dn=yn===void 0?0:yn,Pn=Lt.z,Br=Pn===void 0?0:Pn;return{x:ze,y:dn,z:Br}}},{key:"getModelMatrix",value:function(X,Et,Lt){var ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],ze=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},yn=window.mapboxgl.MercatorCoordinate.fromLngLat(X,Et),dn=yn.meterInMercatorCoordinateUnits(),Pn=wt.b.create();return wt.b.translate(Pn,Pn,wt.d.fromValues(yn.x-ze.x,yn.y-ze.y,yn.z||0-ze.z)),wt.b.scale(Pn,Pn,wt.d.fromValues(dn*ie[0],-dn*ie[1],dn*ie[2])),wt.b.rotateX(Pn,Pn,Lt[0]),wt.b.rotateY(Pn,Pn,Lt[1]),wt.b.rotateZ(Pn,Pn,Lt[2]),Pn}},{key:"init",value:function(){var bt=Z()(mt.a.mark(function Et(){var Lt,ie,ze,yn,dn,Pn,Br,ce,xe,Ke,zn,lr,pr;return mt.a.wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:Lt=this.config,ie=Lt.id,ze=ie===void 0?"map":ie,yn=Lt.attributionControl,dn=yn===void 0?!1:yn,Pn=Lt.style,Br=Pn===void 0?"light":Pn,ce=Lt.token,xe=ce===void 0?uo:ce,Ke=Lt.rotation,zn=Ke===void 0?0:Ke,lr=Lt.mapInstance,pr=G()(Lt,["id","attributionControl","style","token","rotation","mapInstance"]),this.viewport=new io,!lr&&!window.mapboxgl&&this.logger.error(this.configService.getSceneWarninfo("SDK")),xe===uo&&Br!=="blank"&&!window.mapboxgl.accessToken&&!lr&&this.logger.warn(this.configService.getSceneWarninfo("MapToken")),!lr&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=xe),lr?(this.map=lr,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(ze),this.map=new window.mapboxgl.Map($a({container:this.$mapContainer,style:this.getMapStyle(Br),attributionControl:dn,bearing:zn},pr))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return Jr.stop()}},Et,this)}));function X(){return bt.apply(this,arguments)}return X}()},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(X){for(var Et,Lt=arguments.length,ie=new Array(Lt>1?Lt-1:0),ze=1;ze<Lt;ze++)ie[ze-1]=arguments[ze];(Et=this.eventEmitter).emit.apply(Et,[X].concat(ie))}},{key:"once",value:function(X){for(var Et,Lt=arguments.length,ie=new Array(Lt>1?Lt-1:0),ze=1;ze<Lt;ze++)ie[ze-1]=arguments[ze];(Et=this.eventEmitter).once.apply(Et,[X].concat(ie))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(X){var Et=this.map.getCanvas(),Lt=X==="jpg"?Et==null?void 0:Et.toDataURL("image/jpeg"):Et==null?void 0:Et.toDataURL("image/png");return Lt}},{key:"onCameraChanged",value:function(X){this.cameraChangedCallback=X}},{key:"creatAmapContainer",value:function(X){var Et=X;typeof X=="string"&&(Et=document.getElementById(X));var Lt=document.createElement("div");return Lt.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,Lt.id="l7_mapbox_div"+_o++,Et.appendChild(Lt),Lt}},{key:"getMapStyle",value:function(X){return typeof X!="string"?X:so[X]?so[X]:X}}]),jt}(),qn=_()(rr.prototype,"config",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$r=_()(rr.prototype,"configService",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bi=_()(rr.prototype,"logger",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wi=_()(rr.prototype,"coordinateSystemService",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vi=_()(rr.prototype,"eventEmitter",[sn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rr))||Fn);function Ja(jt){var bt=To();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function To(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}R("BGjm")(`/* @antv/l7-maps */
.mapboxgl-ctrl-logo {
 display: none !important;
}
`);var hs=function(jt){n()(X,jt);var bt=Ja(X);function X(){return s()(this,X),bt.apply(this,arguments)}return r()(X,[{key:"getServiceConstructor",value:function(){return vo}}]),X}(F);function zo(jt,bt){var X=Object.keys(jt);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(jt);bt&&(Et=Et.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),X.push.apply(X,Et)}return X}function bs(jt){for(var bt=1;bt<arguments.length;bt++){var X=arguments[bt]!=null?arguments[bt]:{};bt%2?zo(Object(X),!0).forEach(function(Et){Ao(jt,Et,X[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(X)):zo(Object(X)).forEach(function(Et){Object.defineProperty(jt,Et,Object.getOwnPropertyDescriptor(X,Et))})}return jt}function Ao(jt,bt,X){return bt in jt?Object.defineProperty(jt,bt,{value:X,enumerable:!0,configurable:!0,writable:!0}):jt[bt]=X,jt}function Wa(jt,bt){return cr(jt)||gn(jt,bt)||ss(jt,bt)||Rs()}function Rs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ss(jt,bt){if(!!jt){if(typeof jt=="string")return Ba(jt,bt);var X=Object.prototype.toString.call(jt).slice(8,-1);if(X==="Object"&&jt.constructor&&(X=jt.constructor.name),X==="Map"||X==="Set")return Array.from(jt);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return Ba(jt,bt)}}function Ba(jt,bt){(bt==null||bt>jt.length)&&(bt=jt.length);for(var X=0,Et=new Array(bt);X<bt;X++)Et[X]=jt[X];return Et}function gn(jt,bt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var X=[],Et=!0,Lt=!1,ie=void 0;try{for(var ze=jt[Symbol.iterator](),yn;!(Et=(yn=ze.next()).done)&&(X.push(yn.value),!(bt&&X.length===bt));Et=!0);}catch(dn){Lt=!0,ie=dn}finally{try{!Et&&ze.return!=null&&ze.return()}finally{if(Lt)throw ie}}return X}}function cr(jt){if(Array.isArray(jt))return jt}var Gr=E.a.memo(function(jt){var bt=jt.style,X=jt.className,Et=jt.map,Lt=jt.option,ie=jt.onSceneLoaded,ze=Object(V.createRef)(),yn=Object(V.useState)(),dn=Wa(yn,2),Pn=dn[0],Br=dn[1];return Object(V.useEffect)(function(){var ce=new t.Scene(bs(bs({id:ze.current},Lt),{},{map:new hs(Et)}));return ce.on("loaded",function(){Br(ce),ie&&ie(ce)}),function(){ce.destroy()}},[]),Object(V.useEffect)(function(){Pn&&Et.style&&Pn.setMapStyle(Et.style)},[JSON.stringify(Et.style)]),Object(V.useEffect)(function(){Pn&&Et.zoom&&Pn.setZoom(Et.zoom)},[Et.zoom]),Object(V.useEffect)(function(){Pn&&Et.center&&Pn.setCenter(Et.center)},[JSON.stringify(Et.center)]),Object(V.useEffect)(function(){Pn&&Et.pitch!==void 0&&Pn.setPitch(Et.pitch||0)},[Et.pitch]),Object(V.useEffect)(function(){Pn&&Et.rotation&&Pn.setRotation(Et.rotation)},[Et.rotation]),E.a.createElement(T.Provider,{value:Pn},Object(V.createElement)("div",{ref:ze,style:bt,className:X},Pn&&jt.children))}),Ui=Gr,Ua=R("PJYZ"),xo=R.n(Ua),po=R("QkVN"),ea=R.n(po),Qa=R("uhBA"),Ds=R("cDf5"),Es=R.n(Ds),Za=R("zvhG"),ru=R.n(Za);function Qo(jt,bt){var X=typeof Symbol!="undefined"&&jt[Symbol.iterator]||jt["@@iterator"];if(!X){if(Array.isArray(jt)||(X=Os(jt))||bt&&jt&&typeof jt.length=="number"){X&&(jt=X);var Et=0,Lt=function(){};return{s:Lt,n:function(){return Et>=jt.length?{done:!0}:{done:!1,value:jt[Et++]}},e:function(Pn){throw Pn},f:Lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,ze=!1,yn;return{s:function(){X=X.call(jt)},n:function(){var Pn=X.next();return ie=Pn.done,Pn},e:function(Pn){ze=!0,yn=Pn},f:function(){try{!ie&&X.return!=null&&X.return()}finally{if(ze)throw yn}}}}function Os(jt,bt){if(!!jt){if(typeof jt=="string")return $s(jt,bt);var X=Object.prototype.toString.call(jt).slice(8,-1);if(X==="Object"&&jt.constructor&&(X=jt.constructor.name),X==="Map"||X==="Set")return Array.from(jt);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return $s(jt,bt)}}function $s(jt,bt){(bt==null||bt>jt.length)&&(bt=jt.length);for(var X=0,Et=new Array(bt);X<bt;X++)Et[X]=jt[X];return Et}var Ss;function ps(jt,bt,X){var Et=X-bt,Lt=((jt-bt)%Et+Et)%Et+bt;return Lt===bt?X:Lt}function rs(jt,bt,X){return Math.min(X,Math.max(bt,jt))}function ws(jt,bt,X){return jt*(1-X)+bt*X}function _s(jt,bt,X,Et){var Lt=new ru.a(jt,bt,X,Et);return function(ie){return Lt.solve(ie)}}var Tu=_s(.25,.1,.25,1);function Ru(){return window.matchMedia?(Ss==null&&(Ss=window.matchMedia("(prefers-reduced-motion: reduce)")),Ss.matches):!1}function Mo(jt,bt){var X={},Et=Qo(bt),Lt;try{for(Et.s();!(Lt=Et.n()).done;){var ie=Lt.value;ie in jt&&(X[ie]=jt[ie])}}catch(ze){Et.e(ze)}finally{Et.f()}return X}var Qs=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date),Du=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Wu=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;function il(jt){var bt=Du(jt);return{cancel:function(){return Wu(bt)}}}var ju=function(){function jt(bt,X){s()(this,jt),this.ne=void 0,this.sw=void 0,bt&&(X?this.setSouthWest(bt).setNorthEast(X):bt.length===4?this.setSouthWest([bt[0],bt[1]]).setNorthEast([bt[2],bt[3]]):this.setSouthWest(bt[0]).setNorthEast(bt[1]))}return r()(jt,[{key:"setNorthEast",value:function(X){return this.ne=X instanceof ka?new ka(X.lng,X.lat):ka.convert(X),this}},{key:"setSouthWest",value:function(X){return this.sw=X instanceof ka?new ka(X.lng,X.lat):ka.convert(X),this}},{key:"extend",value:function(X){var Et=this.sw,Lt=this.ne,ie,ze;if(X instanceof ka)ie=X,ze=X;else if(X instanceof jt){if(ie=X.sw,ze=X.ne,!ie||!ze)return this}else{if(Array.isArray(X))if(X.length===4||X.every(Array.isArray)){var yn=X;return this.extend(jt.convert(yn))}else{var dn=X;return this.extend(ka.convert(dn))}return this}return!Et&&!Lt?(this.sw=new ka(ie.lng,ie.lat),this.ne=new ka(ze.lng,ze.lat)):(Et.lng=Math.min(ie.lng,Et.lng),Et.lat=Math.min(ie.lat,Et.lat),Lt.lng=Math.max(ze.lng,Lt.lng),Lt.lat=Math.max(ze.lat,Lt.lat)),this}},{key:"getCenter",value:function(){return new ka((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new ka(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new ka(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(X){var Et=ka.convert(X),Lt=Et.lng,ie=Et.lat,ze=this.sw.lat<=ie&&ie<=this.ne.lat,yn=this.sw.lng<=Lt&&Lt<=this.ne.lng;return this.sw.lng>this.ne.lng&&(yn=this.sw.lng>=Lt&&Lt>=this.ne.lng),ze&&yn}}],[{key:"convert",value:function(X){return X instanceof jt?X:new jt(X)}}]),jt}(),Co=63710088e-1,ka=function(){function jt(bt,X){if(s()(this,jt),this.lng=void 0,this.lat=void 0,isNaN(bt)||isNaN(X))throw new Error("Invalid LngLat object: (".concat(bt,", ").concat(X,")"));if(this.lng=+bt,this.lat=+X,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return r()(jt,[{key:"wrap",value:function(){return new jt(ps(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toBounds",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Et=40075017,Lt=360*X/Et,ie=Lt/Math.cos(Math.PI/180*this.lat);return new ju(new jt(this.lng-ie,this.lat-Lt),new jt(this.lng+ie,this.lat+Lt))}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(X){var Et=Math.PI/180,Lt=this.lat*Et,ie=X.lat*Et,ze=Math.sin(Lt)*Math.sin(ie)+Math.cos(Lt)*Math.cos(ie)*Math.cos((X.lng-this.lng)*Et),yn=Co*Math.acos(Math.min(ze,1));return yn}}],[{key:"convert",value:function(X){if(X instanceof jt)return X;if(Array.isArray(X)&&(X.length===2||X.length===3))return new jt(Number(X[0]),Number(X[1]));if(!Array.isArray(X)&&Es()(X)==="object"&&X!==null){var Et="lng"in X?X.lng:X.lon;return new jt(Number(Et),Number(X.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),jt}(),ba=function(){function jt(bt,X){s()(this,jt),this.x=void 0,this.y=void 0,this.x=bt,this.y=X}return r()(jt,[{key:"clone",value:function(){return new jt(this.x,this.y)}},{key:"_add",value:function(X){return this.x+=X.x,this.y+=X.y,this}},{key:"add",value:function(X){return this.clone()._add(X)}},{key:"_sub",value:function(X){return this.x-=X.x,this.y-=X.y,this}},{key:"sub",value:function(X){return this.clone()._sub(X)}},{key:"_multByPoint",value:function(X){return this.x*=X.x,this.y*=X.y,this}},{key:"multByPoint",value:function(X){return this.clone()._multByPoint(X)}},{key:"_divByPoint",value:function(X){return this.x/=X.x,this.y/=X.y,this}},{key:"divByPoint",value:function(X){return this.clone()._divByPoint(X)}},{key:"_mult",value:function(X){return this.x*=X,this.y*=X,this}},{key:"mult",value:function(X){return this.clone()._mult(X)}},{key:"_div",value:function(X){return this.x/=X,this.y/=X,this}},{key:"div",value:function(X){return this.clone()._div(X)}},{key:"_rotate",value:function(X){var Et=Math.cos(X),Lt=Math.sin(X),ie=Et*this.x-Lt*this.y,ze=Lt*this.x+Et*this.y;return this.x=ie,this.y=ze,this}},{key:"rotate",value:function(X){return this.clone()._rotate(X)}},{key:"_rotateAround",value:function(X,Et){var Lt=Math.cos(X),ie=Math.sin(X),ze=Et.x+Lt*(this.x-Et.x)-ie*(this.y-Et.y),yn=Et.y+ie*(this.x-Et.x)+Lt*(this.y-Et.y);return this.x=ze,this.y=yn,this}},{key:"roateAround",value:function(X,Et){return this.clone()._rotateAround(X,Et)}},{key:"_matMult",value:function(X){var Et=X[0]*this.x+X[1]*this.y,Lt=X[2]*this.x+X[3]*this.y;return this.x=Et,this.y=Lt,this}},{key:"matMult",value:function(X){return this.clone()._matMult(X)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var X=this.y;return this.y=this.x,this.x=-X,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(X){return this.x===X.x&&this.y===X.y}},{key:"dist",value:function(X){return Math.sqrt(this.distSqr(X))}},{key:"distSqr",value:function(X){var Et=X.x-this.x,Lt=X.y-this.y;return Et*Et+Lt*Lt}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(X){return Math.atan2(this.y-X.y,this.x-X.x)}},{key:"angleWith",value:function(X){return this.angleWithSep(X.x,X.y)}},{key:"angleWithSep",value:function(X,Et){return Math.atan2(this.x*Et-this.y*X,this.x*X+this.y*Et)}}],[{key:"convert",value:function(X){return X instanceof jt?X:Array.isArray(X)?new jt(X[0],X[1]):X}}]),jt}(),Bo=function(){function jt(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(s()(this,jt),this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,isNaN(bt)||bt<0||isNaN(X)||X<0||isNaN(Et)||Et<0||isNaN(Lt)||Lt<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=bt,this.bottom=X,this.left=Et,this.right=Lt}return r()(jt,[{key:"interpolate",value:function(X,Et,Lt){return Et.top!=null&&X.top!=null&&(this.top=ws(X.top,Et.top,Lt)),Et.bottom!=null&&X.bottom!=null&&(this.bottom=ws(X.bottom,Et.bottom,Lt)),Et.left!=null&&X.left!=null&&(this.left=ws(X.left,Et.left,Lt)),Et.right!=null&&X.right!=null&&(this.right=ws(X.right,Et.right,Lt)),this}},{key:"getCenter",value:function(X,Et){var Lt=rs((this.left+X-this.right)/2,0,X),ie=rs((this.top+Et-this.bottom)/2,0,Et);return new ba(Lt,ie)}},{key:"equals",value:function(X){return this.top===X.top&&this.bottom===X.bottom&&this.left===X.left&&this.right===X.right}},{key:"clone",value:function(){return new jt(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),jt}(),uu=2*Math.PI*Co;function Hu(jt){return uu*Math.cos(jt*Math.PI/180)}function gs(jt){return(180+jt)/360}function qo(jt){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+jt*Math.PI/360)))/360}function Is(jt,bt){return jt/Hu(bt)}function iu(jt){return jt*360-180}function Fo(jt){var bt=180-jt*360;return 360/Math.PI*Math.atan(Math.exp(bt*Math.PI/180))-90}function Yu(jt,bt){return jt*Hu(Fo(bt))}function Ys(jt){return 1/Math.cos(jt*Math.PI/180)}var Ka=function(){function jt(bt,X){var Et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;s()(this,jt),this.x=void 0,this.y=void 0,this.z=void 0,this.x=+bt,this.y=+X,this.z=+Et}return r()(jt,[{key:"toLngLat",value:function(){return new ka(iu(this.x),Fo(this.y))}},{key:"toAltitude",value:function(){return Yu(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/uu*Ys(Fo(this.y))}}],[{key:"fromLngLat",value:function(X){var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Lt=ka.convert(X);return new jt(gs(Lt.lng),qo(Lt.lat),Is(Et,Lt.lat))}}]),jt}();function pl(jt,bt){var X=typeof Symbol!="undefined"&&jt[Symbol.iterator]||jt["@@iterator"];if(!X){if(Array.isArray(jt)||(X=Gl(jt))||bt&&jt&&typeof jt.length=="number"){X&&(jt=X);var Et=0,Lt=function(){};return{s:Lt,n:function(){return Et>=jt.length?{done:!0}:{done:!1,value:jt[Et++]}},e:function(Pn){throw Pn},f:Lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,ze=!1,yn;return{s:function(){X=X.call(jt)},n:function(){var Pn=X.next();return ie=Pn.done,Pn},e:function(Pn){ze=!0,yn=Pn},f:function(){try{!ie&&X.return!=null&&X.return()}finally{if(ze)throw yn}}}}function Gl(jt,bt){if(!!jt){if(typeof jt=="string")return gl(jt,bt);var X=Object.prototype.toString.call(jt).slice(8,-1);if(X==="Object"&&jt.constructor&&(X=jt.constructor.name),X==="Map"||X==="Set")return Array.from(jt);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return gl(jt,bt)}}function gl(jt,bt){(bt==null||bt>jt.length)&&(bt=jt.length);for(var X=0,Et=new Array(bt);X<bt;X++)Et[X]=jt[X];return Et}var Ec=8192,Ml=function(){function jt(bt,X,Et,Lt,ie){s()(this,jt),this.tileSize=void 0,this.tileZoom=void 0,this.lngRange=void 0,this.latRange=void 0,this.maxValidLatitude=void 0,this.scale=void 0,this.width=void 0,this.height=void 0,this.angle=void 0,this.rotationMatrix=void 0,this.pixelsToGLUnits=void 0,this.cameraToCenterDistance=void 0,this.mercatorMatrix=void 0,this.projMatrix=void 0,this.invProjMatrix=void 0,this.alignedProjMatrix=void 0,this.pixelMatrix=void 0,this.pixelMatrixInverse=void 0,this.glCoordMatrix=void 0,this.labelPlaneMatrix=void 0,this._fov=void 0,this._pitch=void 0,this._zoom=void 0,this._renderWorldCopies=void 0,this._minZoom=void 0,this._maxZoom=void 0,this._minPitch=void 0,this._maxPitch=void 0,this._center=void 0,this.zoomFraction=void 0,this.unmodified=void 0,this.edgeInsets=void 0,this.constraining=void 0,this.posMatrixCache=void 0,this.alignedPosMatrixCache=void 0,this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=ie===void 0?!0:ie,this._minZoom=bt||0,this._maxZoom=X||22,this._minPitch=Et==null?0:Et,this._maxPitch=Lt==null?60:Lt,this.setMaxBounds(),this.width=0,this.height=0,this._center=new ka(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new Bo,this.posMatrixCache={},this.alignedPosMatrixCache={}}return r()(jt,[{key:"minZoom",get:function(){return this._minZoom},set:function(X){this._minZoom!==X&&(this._minZoom=X,this.zoom=Math.max(this.zoom,X))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(X){this._maxZoom!==X&&(this._maxZoom=X,this.zoom=Math.min(this.zoom,X))}},{key:"minPitch",get:function(){return this._minPitch},set:function(X){this._minPitch!==X&&(this._minPitch=X,this._pitch=Math.max(this._pitch,X))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(X){this._maxPitch!==X&&(this._maxPitch=X,this._pitch=Math.min(this._pitch,X))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(X){X===void 0?X=!0:X===null&&(X=!1),this._renderWorldCopies=X}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new ba(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(X){var Et=-ps(X,-180,180)*Math.PI/180;this.angle!==Et&&(this.unmodified=!1,this.angle=Et,this.calcMatrices(),this.rotationMatrix=wt.a.create(),wt.a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(X){var Et=rs(X,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==Et&&(this.unmodified=!1,this._pitch=Et,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(X){X=Math.max(.01,Math.min(60,X)),this._fov!==X&&(this.unmodified=!1,this._fov=X/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(X){var Et=Math.min(Math.max(X,this._minZoom),this._maxZoom);this._zoom!==Et&&(this.unmodified=!1,this._zoom=Et,this.scale=this.zoomScale(Et),this.tileZoom=Math.floor(Et),this.zoomFraction=Et-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(X){X.lat===this._center.lat&&X.lng===this._center.lng||(this.unmodified=!1,this._center=X,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(X){this.edgeInsets.equals(X)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,X,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var X=new jt(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return X.tileSize=this.tileSize,X.latRange=this.latRange,X.width=this.width,X.height=this.height,X.center=this._center,X.zoom=this.zoom,X.angle=this.angle,X.fov=this._fov,X.pitch=this._pitch,X.unmodified=this.unmodified,X.edgeInsets=this.edgeInsets.clone(),X.calcMatrices(),X}},{key:"isPaddingEqual",value:function(X){return this.edgeInsets.equals(X)}},{key:"interpolatePadding",value:function(X,Et,Lt){this.unmodified=!1,this.edgeInsets.interpolate(X,Et,Lt),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(X){var Et=(X.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/X.tileSize));return Math.max(0,Et)}},{key:"resize",value:function(X,Et){this.width=X,this.height=Et,this.pixelsToGLUnits=[2/X,-2/Et],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(X){return Math.pow(2,X)}},{key:"scaleZoom",value:function(X){return Math.log(X)/Math.LN2}},{key:"project",value:function(X){var Et=rs(X.lat,-this.maxValidLatitude,this.maxValidLatitude);return new ba(gs(X.lng)*this.worldSize,qo(Et)*this.worldSize)}},{key:"unproject",value:function(X){return new Ka(X.x/this.worldSize,X.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(X,Et){var Lt=this.pointCoordinate(Et),ie=this.pointCoordinate(this.centerPoint),ze=this.locationCoordinate(X),yn=new Ka(ze.x-(Lt.x-ie.x),ze.y-(Lt.y-ie.y));this.center=this.coordinateLocation(yn),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(X){var Et=0,Lt=new Float32Array([X.x,X.y,0,1]),ie=new Float32Array([X.x,X.y,1,1]);wt.e.transformMat4(Lt,Lt,this.pixelMatrixInverse),wt.e.transformMat4(ie,ie,this.pixelMatrixInverse);var ze=Lt[3],yn=ie[3],dn=Lt[0]/ze,Pn=ie[0]/yn,Br=Lt[1]/ze,ce=ie[1]/yn,xe=Lt[2]/ze,Ke=ie[2]/yn,zn=xe===Ke?0:(Et-xe)/(Ke-xe);return new Ka(ws(dn,Pn,zn)/this.worldSize,ws(Br,ce,zn)/this.worldSize)}},{key:"getBounds",value:function(){return new ju().extend(this.pointLocation(new ba(0,0))).extend(this.pointLocation(new ba(this.width,0))).extend(this.pointLocation(new ba(this.width,this.height))).extend(this.pointLocation(new ba(0,this.height)))}},{key:"getMaxBounds",value:function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new ju([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])}},{key:"setMaxBounds",value:function(X){X?(this.lngRange=[X.getWest(),X.getEast()],this.latRange=[X.getSouth(),X.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var X=this.pointCoordinate(new ba(0,0)),Et=new Float32Array([X.x*this.worldSize,X.y*this.worldSize,0,1]),Lt=wt.e.transformMat4(Et,Et,this.pixelMatrix);return Lt[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var X=this._pitch,Et=Math.tan(X)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new ba(0,Et))}},{key:"getCameraQueryGeometry",value:function(X){var Et=this.getCameraPoint();if(X.length===1)return[X[0],Et];var Lt=Et.x,ie=Et.y,ze=Et.x,yn=Et.y,dn=pl(X),Pn;try{for(dn.s();!(Pn=dn.n()).done;){var Br=Pn.value;Lt=Math.min(Lt,Br.x),ie=Math.min(ie,Br.y),ze=Math.max(ze,Br.x),yn=Math.max(yn,Br.y)}}catch(ce){dn.e(ce)}finally{dn.f()}return[new ba(Lt,ie),new ba(ze,ie),new ba(ze,yn),new ba(Lt,yn),new ba(Lt,ie)]}},{key:"coordinatePoint",value:function(X){var Et=wt.e.fromValues(X.x*this.worldSize,X.y*this.worldSize,0,1);return wt.e.transformMat4(Et,Et,this.pixelMatrix),new ba(Et[0]/Et[3],Et[1]/Et[3])}},{key:"locationPoint",value:function(X){return this.coordinatePoint(this.locationCoordinate(X))}},{key:"pointLocation",value:function(X){return this.coordinateLocation(this.pointCoordinate(X))}},{key:"locationCoordinate",value:function(X){return Ka.fromLngLat(X)}},{key:"coordinateLocation",value:function(X){return X.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(!(!this.center||!this.width||!this.height||this.constraining)){this.constraining=!0;var X=-90,Et=90,Lt=-180,ie=180,ze,yn,dn,Pn,Br=this.size,ce=this.unmodified;if(this.latRange){var xe=this.latRange;X=qo(xe[1])*this.worldSize,Et=qo(xe[0])*this.worldSize,ze=Et-X<Br.y?Br.y/(Et-X):0}if(this.lngRange){var Ke=this.lngRange;Lt=gs(Ke[0])*this.worldSize,ie=gs(Ke[1])*this.worldSize,yn=ie-Lt<Br.x?Br.x/(ie-Lt):0}var zn=this.point,lr=Math.max(yn||0,ze||0);if(lr){this.center=this.unproject(new ba(yn?(ie+Lt)/2:zn.x,ze?(Et+X)/2:zn.y)),this.zoom+=this.scaleZoom(lr),this.unmodified=ce,this.constraining=!1;return}if(this.latRange){var pr=zn.y,Qn=Br.y/2;pr-Qn<X&&(Pn=X+Qn),pr+Qn>Et&&(Pn=Et-Qn)}if(this.lngRange){var Jr=zn.x,qr=Br.x/2;Jr-qr<Lt&&(dn=Lt+qr),Jr+qr>ie&&(dn=ie-qr)}(dn!==void 0||Pn!==void 0)&&(this.center=this.unproject(new ba(dn!==void 0?dn:zn.x,Pn!==void 0?Pn:zn.y))),this.unmodified=ce,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(!!this.height){var X=this._fov/2,Et=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(X)*this.height;var Lt=Math.PI/2+this._pitch,ie=this._fov*(.5+Et.y/this.height),ze=Math.sin(ie)*this.cameraToCenterDistance/Math.sin(rs(Math.PI-Lt-ie,.01,Math.PI-.01)),yn=this.point,dn=yn.x,Pn=yn.y,Br=Math.cos(Math.PI/2-this._pitch)*ze+this.cameraToCenterDistance,ce=Br*1.01,xe=this.height/50,Ke=wt.b.create();wt.b.perspective(Ke,this._fov,this.width/this.height,xe,ce),Ke[8]=-Et.x*2/this.width,Ke[9]=Et.y*2/this.height,wt.b.scale(Ke,Ke,[1,-1,1]),wt.b.translate(Ke,Ke,[0,0,-this.cameraToCenterDistance]),wt.b.rotateX(Ke,Ke,this._pitch),wt.b.rotateZ(Ke,Ke,this.angle),wt.b.translate(Ke,Ke,[-dn,-Pn,0]),this.mercatorMatrix=wt.b.scale(wt.b.create(),Ke,[this.worldSize,this.worldSize,this.worldSize]),wt.b.scale(Ke,Ke,wt.d.fromValues(1,1,Is(1,this.center.lat)*this.worldSize)),this.projMatrix=Ke,this.invProjMatrix=wt.b.invert(wt.b.create(),this.projMatrix);var zn=this.width%2/2,lr=this.height%2/2,pr=Math.cos(this.angle),Qn=Math.sin(this.angle),Jr=dn-Math.round(dn)+pr*zn+Qn*lr,qr=Pn-Math.round(Pn)+pr*lr+Qn*zn,ri=wt.b.clone(Ke);if(wt.b.translate(ri,ri,[Jr>.5?Jr-1:Jr,qr>.5?qr-1:qr,0]),this.alignedProjMatrix=ri,Ke=wt.b.create(),wt.b.scale(Ke,Ke,[this.width/2,-this.height/2,1]),wt.b.translate(Ke,Ke,[1,-1,0]),this.labelPlaneMatrix=Ke,Ke=wt.b.create(),wt.b.scale(Ke,Ke,[1,-1,1]),wt.b.translate(Ke,Ke,[-1,-1,0]),wt.b.scale(Ke,Ke,[2/this.width,2/this.height,1]),this.glCoordMatrix=Ke,this.pixelMatrix=wt.b.multiply(wt.b.create(),this.labelPlaneMatrix,this.projMatrix),Ke=wt.b.invert(wt.b.create(),this.pixelMatrix),!Ke)throw new Error("failed to invert matrix");this.pixelMatrixInverse=Ke,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),jt}(),ao=function jt(bt){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s()(this,jt),this.type=void 0,ea()(this,X),this.type=bt};function Au(jt){var bt=ml();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function ml(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var qs=function(jt){n()(X,jt);var bt=Au(X);function X(Et){var Lt;s()(this,X),Lt=bt.call(this),Lt.transform=void 0,Lt.options=void 0,Lt.moving=void 0,Lt.zooming=void 0,Lt.rotating=void 0,Lt.pitching=void 0,Lt.padding=void 0,Lt.bearingSnap=void 0,Lt.easeEndTimeoutID=void 0,Lt.easeStart=void 0,Lt.easeOptions=void 0,Lt.easeId=void 0,Lt.onEaseFrame=void 0,Lt.onEaseEnd=void 0,Lt.easeFrameId=void 0,Lt.renderFrameCallback=function(){var Br=Math.min((Qs()-Lt.easeStart)/Lt.easeOptions.duration,1);Lt.onEaseFrame(Lt.easeOptions.easing(Br)),Br<1?Lt.easeFrameId=Lt.requestRenderFrame(Lt.renderFrameCallback):Lt.stop()},Lt.options=Et;var ie=Et.minZoom,ze=Et.maxZoom,yn=Et.minPitch,dn=Et.maxPitch,Pn=Et.renderWorldCopies;return Lt.moving=!1,Lt.zooming=!1,Lt.bearingSnap=Et.bearingSnap,Lt.transform=new Ml(ie,ze,yn,dn,Pn),Lt}return r()(X,[{key:"requestRenderFrame",value:function(Lt){return 0}},{key:"cancelRenderFrame",value:function(Lt){}},{key:"getCenter",value:function(){var Lt=this.transform.center,ie=Lt.lng,ze=Lt.lat;return new ka(ie,ze)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(Lt,ie){return this.jumpTo({center:Lt},ie)}},{key:"setPitch",value:function(Lt,ie){return this.jumpTo({pitch:Lt},ie),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(Lt,ie,ze){return this.easeTo(ea()({center:Lt},ie),ze)}},{key:"zoomOut",value:function(Lt,ie){return this.zoomTo(this.getZoom()-1,Lt,ie),this}},{key:"setBearing",value:function(Lt,ie){return this.jumpTo({bearing:Lt},ie),this}},{key:"setZoom",value:function(Lt,ie){return this.jumpTo({zoom:Lt},ie),this}},{key:"zoomIn",value:function(Lt,ie){return this.zoomTo(this.getZoom()+1,Lt,ie),this}},{key:"zoomTo",value:function(Lt,ie,ze){return this.easeTo(ea()({zoom:Lt},ie),ze)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(Lt,ie){return this.jumpTo({padding:Lt},ie),this}},{key:"rotateTo",value:function(Lt,ie,ze){return this.easeTo(ea()({bearing:Lt},ie),ze)}},{key:"resetNorth",value:function(Lt,ie){return this.rotateTo(0,ea()({duration:1e3},Lt),ie),this}},{key:"resetNorthPitch",value:function(Lt,ie){return this.easeTo(ea()({bearing:0,pitch:0,duration:1e3},Lt),ie),this}},{key:"fitBounds",value:function(Lt,ie,ze){return this.fitInternal(this.cameraForBounds(Lt,ie),ie,ze)}},{key:"cameraForBounds",value:function(Lt,ie){return Lt=ju.convert(Lt),this.cameraForBoxAndBearing(Lt.getNorthWest(),Lt.getSouthEast(),0,ie)}},{key:"snapToNorth",value:function(Lt,ie){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(Lt,ie):this}},{key:"jumpTo",value:function(){var Lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=arguments.length>1?arguments[1]:void 0;this.stop();var ze=this.transform,yn=!1,dn=!1,Pn=!1;return Lt.zoom&&ze.zoom!==+Lt.zoom&&(yn=!0,ze.zoom=+Lt.zoom),Lt.center!==void 0&&(ze.center=ka.convert(Lt.center)),Lt.bearing&&ze.bearing!==+Lt.bearing&&(dn=!0,ze.bearing=+Lt.bearing),Lt.pitch&&ze.pitch!==+Lt.pitch&&(Pn=!0,ze.pitch=+Lt.pitch),Lt.padding!=null&&!ze.isPaddingEqual(Lt.padding)&&(ze.padding=Lt.padding),this.emit("movestart",new ao("movestart",ie)),this.emit("move",new ao("move",ie)),yn&&(this.emit("zoomstart",new ao("zoomstart",ie)),this.emit("zoom",new ao("zoom",ie)),this.emit("zoomend",new ao("zoomend",ie))),dn&&(this.emit("rotatestart",new ao("rotatestart",ie)),this.emit("rotate",new ao("rotate",ie)),this.emit("rotateend",new ao("rotateend",ie))),Pn&&(this.emit("pitchstart",new ao("pitchstart",ie)),this.emit("pitch",new ao("pitch",ie)),this.emit("pitchend",new ao("pitchend",ie))),this.emit("moveend",new ao("moveend",ie))}},{key:"easeTo",value:function(){var Lt=this,ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=arguments.length>1?arguments[1]:void 0;ie=ea()({offset:[0,0],duration:500,easing:Tu},ie),(ie.animate===!1||!ie.essential&&Ru())&&(ie.duration=0);var yn=this.transform,dn=this.getZoom(),Pn=this.getBearing(),Br=this.getPitch(),ce=this.getPadding(),xe=ie.zoom?+ie.zoom:dn,Ke=ie.bearing?this.normalizeBearing(ie.bearing,Pn):Pn,zn=ie.pitch?+ie.pitch:Br,lr=ie.padding?ie.padding:yn.padding,pr=ba.convert(ie.offset),Qn=yn.centerPoint.add(pr),Jr=yn.pointLocation(Qn),qr=ka.convert(ie.center||Jr);this.normalizeCenter(qr);var ri=yn.project(Jr),ui=yn.project(qr).sub(ri),yi=yn.zoomScale(xe-dn),Ti,pi;ie.around&&(Ti=ka.convert(ie.around),pi=yn.locationPoint(Ti));var gi={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||xe!==dn,this.rotating=this.rotating||Pn!==Ke,this.pitching=this.pitching||zn!==Br,this.padding=!yn.isPaddingEqual(lr),this.easeId=ie.easeId,this.prepareEase(ze,ie.noMoveStart,gi),clearTimeout(this.easeEndTimeoutID),this.ease(function(Cr){if(Lt.zooming&&(yn.zoom=ws(dn,xe,Cr)),Lt.rotating&&(yn.bearing=ws(Pn,Ke,Cr)),Lt.pitching&&(yn.pitch=ws(Br,zn,Cr)),Lt.padding&&(yn.interpolatePadding(ce,lr,Cr),Qn=yn.centerPoint.add(pr)),Ti)yn.setLocationAtPoint(Ti,pi);else{var Ir=yn.zoomScale(yn.zoom-dn),Mi=xe>dn?Math.min(2,yi):Math.max(.5,yi),Gi=Math.pow(Mi,1-Cr),kr=yn.unproject(ri.add(ui.mult(Cr*Gi)).mult(Ir));yn.setLocationAtPoint(yn.renderWorldCopies?kr.wrap():kr,Qn)}Lt.fireMoveEvents(ze)},function(Cr){Lt.afterEase(ze,Cr)},ie),this}},{key:"flyTo",value:function(){var Lt=this,ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=arguments.length>1?arguments[1]:void 0;if(!ie.essential&&Ru()){var yn=Mo(ie,["center","zoom","bearing","pitch","around"]);return this.jumpTo(yn,ze)}this.stop(),ie=ea()({offset:[0,0],speed:1.2,curve:1.42,easing:Tu},ie);var dn=this.transform,Pn=this.getZoom(),Br=this.getBearing(),ce=this.getPitch(),xe=this.getPadding(),Ke=ie.zoom?rs(+ie.zoom,dn.minZoom,dn.maxZoom):Pn,zn=ie.bearing?this.normalizeBearing(ie.bearing,Br):Br,lr=ie.pitch?+ie.pitch:ce,pr="padding"in ie?ie.padding:dn.padding,Qn=dn.zoomScale(Ke-Pn),Jr=ba.convert(ie.offset),qr=dn.centerPoint.add(Jr),ri=dn.pointLocation(qr),ui=ka.convert(ie.center||ri);this.normalizeCenter(ui);var yi=dn.project(ri),Ti=dn.project(ui).sub(yi),pi=ie.curve,gi=Math.max(dn.width,dn.height),Cr=gi/Qn,Ir=Ti.mag();if("minZoom"in ie){var Mi=rs(Math.min(ie.minZoom,Pn,Ke),dn.minZoom,dn.maxZoom),Gi=gi/dn.zoomScale(Mi-Pn);pi=Math.sqrt(Gi/Ir*2)}var kr=pi*pi;function ca(Qi){var aa=(Cr*Cr-gi*gi+(Qi?-1:1)*kr*kr*Ir*Ir)/(2*(Qi?Cr:gi)*kr*Ir);return Math.log(Math.sqrt(aa*aa+1)-aa)}function Oi(Qi){return(Math.exp(Qi)-Math.exp(-Qi))/2}function Ai(Qi){return(Math.exp(Qi)+Math.exp(-Qi))/2}function Ei(Qi){return Oi(Qi)/Ai(Qi)}var Ii=ca(0),fa=function(aa){return Ai(Ii)/Ai(Ii+pi*aa)},ma=function(aa){return gi*((Ai(Ii)*Ei(Ii+pi*aa)-Oi(Ii))/kr)/Ir},ji=(ca(1)-Ii)/pi;if(Math.abs(Ir)<1e-6||!isFinite(ji)){if(Math.abs(gi-Cr)<1e-6)return this.easeTo(ie,ze);var Si=Cr<gi?-1:1;ji=Math.abs(Math.log(Cr/gi))/pi,ma=function(){return 0},fa=function(aa){return Math.exp(Si*pi*aa)}}if("duration"in ie)ie.duration=+ie.duration;else{var di="screenSpeed"in ie?+ie.screenSpeed/pi:+ie.speed;ie.duration=1e3*ji/di}return ie.maxDuration&&ie.duration>ie.maxDuration&&(ie.duration=0),this.zooming=!0,this.rotating=Br!==zn,this.pitching=lr!==ce,this.padding=!dn.isPaddingEqual(pr),this.prepareEase(ze,!1),this.ease(function(Qi){var aa=Qi*ji,$i=1/fa(aa);dn.zoom=Qi===1?Ke:Pn+dn.scaleZoom($i),Lt.rotating&&(dn.bearing=ws(Br,zn,Qi)),Lt.pitching&&(dn.pitch=ws(ce,lr,Qi)),Lt.padding&&(dn.interpolatePadding(xe,pr,Qi),qr=dn.centerPoint.add(Jr));var co=Qi===1?ui:dn.unproject(yi.add(Ti.mult(ma(aa))).mult($i));dn.setLocationAtPoint(dn.renderWorldCopies?co.wrap():co,qr),Lt.fireMoveEvents(ze)},function(){return Lt.afterEase(ze)},ie),this}},{key:"fitScreenCoordinates",value:function(Lt,ie,ze,yn,dn){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(ba.convert(Lt)),this.transform.pointLocation(ba.convert(ie)),ze,yn),yn,dn)}},{key:"stop",value:function(Lt,ie){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var ze=this.onEaseEnd;delete this.onEaseEnd,ze.call(this,ie)}return this}},{key:"normalizeBearing",value:function(Lt,ie){Lt=ps(Lt,-180,180);var ze=Math.abs(Lt-ie);return Math.abs(Lt-360-ie)<ze&&(Lt-=360),Math.abs(Lt+360-ie)<ze&&(Lt+=360),Lt}},{key:"normalizeCenter",value:function(Lt){var ie=this.transform;if(!(!ie.renderWorldCopies||ie.lngRange)){var ze=Lt.lng-ie.center.lng;Lt.lng+=ze>180?-360:ze<-180?360:0}}},{key:"fireMoveEvents",value:function(Lt){this.emit("move",new ao("move",Lt)),this.zooming&&this.emit("zoom",new ao("zoom",Lt)),this.rotating&&this.emit("rotate",new ao("rotate",Lt)),this.pitching&&this.emit("rotate",new ao("pitch",Lt))}},{key:"prepareEase",value:function(Lt){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.moving=!0,!ie&&!ze.moving&&this.emit("movestart",new ao("movestart",Lt)),this.zooming&&!ze.zooming&&this.emit("zoomstart",new ao("zoomstart",Lt)),this.rotating&&!ze.rotating&&this.emit("rotatestart",new ao("rotatestart",Lt)),this.pitching&&!ze.pitching&&this.emit("pitchstart",new ao("pitchstart",Lt))}},{key:"afterEase",value:function(Lt,ie){if(!(this.easeId&&ie&&this.easeId===ie)){delete this.easeId;var ze=this.zooming,yn=this.rotating,dn=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,ze&&this.emit("zoomend",new ao("zoomend",Lt)),yn&&this.emit("rotateend",new ao("rotateend",Lt)),dn&&this.emit("pitchend",new ao("pitchend",Lt)),this.emit("moveend",new ao("moveend",Lt))}}},{key:"ease",value:function(Lt,ie,ze){ze.animate===!1||ze.duration===0?(Lt(1),ie()):(this.easeStart=Qs(),this.easeOptions=ze,this.onEaseFrame=Lt,this.onEaseEnd=ie,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(Lt,ie,ze,yn){var dn={top:0,bottom:0,right:0,left:0};if(yn=ea()({padding:dn,offset:[0,0],maxZoom:this.transform.maxZoom},yn),typeof yn.padding=="number"){var Pn=yn.padding;yn.padding={top:Pn,bottom:Pn,right:Pn,left:Pn}}yn.padding=ea()(dn,yn.padding);var Br=this.transform,ce=Br.padding,xe=Br.project(ka.convert(Lt)),Ke=Br.project(ka.convert(ie)),zn=xe.rotate(-ze*Math.PI/180),lr=Ke.rotate(-ze*Math.PI/180),pr=new ba(Math.max(zn.x,lr.x),Math.max(zn.y,lr.y)),Qn=new ba(Math.min(zn.x,lr.x),Math.min(zn.y,lr.y)),Jr=pr.sub(Qn),qr=(Br.width-(ce.left+ce.right+yn.padding.left+yn.padding.right))/Jr.x,ri=(Br.height-(ce.top+ce.bottom+yn.padding.top+yn.padding.bottom))/Jr.y;if(!(ri<0||qr<0)){var ui=Math.min(Br.scaleZoom(Br.scale*Math.min(qr,ri)),yn.maxZoom),yi=ba.convert(yn.offset),Ti=(yn.padding.left-yn.padding.right)/2,pi=(yn.padding.top-yn.padding.bottom)/2,gi=new ba(yi.x+Ti,yi.y+pi),Cr=gi.mult(Br.scale/Br.zoomScale(ui)),Ir=Br.unproject(xe.add(Ke).div(2).sub(Cr));return{center:Ir,zoom:ui,bearing:ze}}}},{key:"fitInternal",value:function(Lt,ie,ze){return Lt?(ie=ea()(Lt,ie),delete ie.padding,ie.linear?this.easeTo(ie,ze):this.flyTo(ie,ze)):this}}]),X}(Qa.EventEmitter);function Bu(jt,bt){var X=typeof Symbol!="undefined"&&jt[Symbol.iterator]||jt["@@iterator"];if(!X){if(Array.isArray(jt)||(X=vu(jt))||bt&&jt&&typeof jt.length=="number"){X&&(jt=X);var Et=0,Lt=function(){};return{s:Lt,n:function(){return Et>=jt.length?{done:!0}:{done:!1,value:jt[Et++]}},e:function(Pn){throw Pn},f:Lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,ze=!1,yn;return{s:function(){X=X.call(jt)},n:function(){var Pn=X.next();return ie=Pn.done,Pn},e:function(Pn){ze=!0,yn=Pn},f:function(){try{!ie&&X.return!=null&&X.return()}finally{if(ze)throw yn}}}}function vu(jt,bt){if(!!jt){if(typeof jt=="string")return pu(jt,bt);var X=Object.prototype.toString.call(jt).slice(8,-1);if(X==="Object"&&jt.constructor&&(X=jt.constructor.name),X==="Map"||X==="Set")return Array.from(jt);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return pu(jt,bt)}}function pu(jt,bt){(bt==null||bt>jt.length)&&(bt=jt.length);for(var X=0,Et=new Array(bt);X<bt;X++)Et[X]=jt[X];return Et}var Zs={},ds=Zs;Zs.create=function(jt,bt,X){var Et=window.document.createElement(jt);return bt!==void 0&&(Et.className=bt),X&&X.appendChild(Et),Et},Zs.createNS=function(jt,bt){var X=window.document.createElementNS(jt,bt);return X};var Ms=window.document&&window.document.documentElement.style;function al(jt){if(!Ms)return jt[0];var bt=Bu(jt),X;try{for(bt.s();!(X=bt.n()).done;){var Et=X.value;if(Et in Ms)return Et}}catch(Lt){bt.e(Lt)}finally{bt.f()}return jt[0]}var Pl=al(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),jl;Zs.disableDrag=function(){Ms&&Pl&&(jl=Ms[Pl],Ms[Pl]="none")},Zs.enableDrag=function(){Ms&&Pl&&(Ms[Pl]=jl)};var Nu=al(["transform","WebkitTransform"]);Zs.setTransform=function(jt,bt){jt.style[Nu]=bt};var Zu=!1;try{var ol=Object.defineProperty({},"passive",{get:function(){Zu=!0}});window.addEventListener("test",ol,ol),window.removeEventListener("test",ol,ol)}catch(jt){Zu=!1}Zs.addEventListener=function(jt,bt,X){var Et=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in Et&&Zu?jt.addEventListener(bt,X,Et):jt.addEventListener(bt,X,Et.capture)},Zs.removeEventListener=function(jt,bt,X){var Et=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in Et&&Zu?jt.removeEventListener(bt,X,Et):jt.removeEventListener(bt,X,Et.capture)};var gu=function jt(bt){bt.preventDefault(),bt.stopPropagation(),window.removeEventListener("click",jt,!0)};Zs.suppressClick=function(){window.addEventListener("click",gu,!0),window.setTimeout(function(){window.removeEventListener("click",gu,!0)},0)},Zs.mousePos=function(jt,bt){var X=jt.getBoundingClientRect();return new ba(bt.clientX-X.left-jt.clientLeft,bt.clientY-X.top-jt.clientTop)},Zs.touchPos=function(jt,bt){var X=jt.getBoundingClientRect(),Et=[],Lt=Bu(bt),ie;try{for(Lt.s();!(ie=Lt.n()).done;){var ze=ie.value;Et.push(new ba(ze.clientX-X.left-jt.clientLeft,ze.clientY-X.top-jt.clientTop))}}catch(yn){Lt.e(yn)}finally{Lt.f()}return Et},Zs.mouseButton=function(jt){return typeof window.InstallTrigger!="undefined"&&jt.button===2&&jt.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:jt.button},Zs.remove=function(jt){jt.parentNode&&jt.parentNode.removeChild(jt)};function au(jt){var bt=Ku();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function Ku(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Ls=function(jt){n()(X,jt);var bt=au(X);function X(Et,Lt,ie){var ze,yn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};s()(this,X);var dn=ds.mousePos(Lt.getCanvasContainer(),ie),Pn=Lt.unproject(dn);return ze=bt.call(this,Et,ea()({point:dn,lngLat:Pn,originalEvent:ie},yn)),ze.type=void 0,ze.target=void 0,ze.originalEvent=void 0,ze.point=void 0,ze.lngLat=void 0,ze.defaultPrevented=void 0,ze.defaultPrevented=!1,ze.target=Lt,ze}return r()(X,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),X}(ao);function yl(jt){var bt=ic();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function ic(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Tl=function(jt){n()(X,jt);var bt=yl(X);function X(Et,Lt,ie){var ze;s()(this,X);var yn=Et==="touchend"?ie.changedTouches:ie.touches,dn=ds.touchPos(Lt.getCanvasContainer(),yn),Pn=dn.map(function(xe){return Lt.unproject(xe)}),Br=dn.reduce(function(xe,Ke,zn,lr){return xe.add(Ke.div(lr.length))},new ba(0,0)),ce=Lt.unproject(Br);return ze=bt.call(this,Et,{points:dn,point:Br,lngLats:Pn,lngLat:ce,originalEvent:ie}),ze.type=void 0,ze.target=void 0,ze.originalEvent=void 0,ze.lngLat=void 0,ze.point=void 0,ze.points=void 0,ze.lngLats=void 0,ze.defaultPrevented=void 0,ze.defaultPrevented=!1,ze}return r()(X,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),X}(ao);function Bl(jt){var bt=Vl();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function Vl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var pc=function(jt){n()(X,jt);var bt=Bl(X);function X(Et,Lt,ie){var ze;return s()(this,X),ze=bt.call(this,Et,{originalEvent:ie}),ze.type=void 0,ze.originalEvent=void 0,ze.defaultPrevented=void 0,ze.target=void 0,ze.defaultPrevented=!1,ze}return r()(X,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),X}(ao),Xu=function(){function jt(bt){s()(this,jt),this.map=void 0,this.delayContextMenu=void 0,this.contextMenuEvent=void 0,this.map=bt}return r()(jt,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(X){this.map.emit(X.type,new Ls(X.type,this.map,X))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new Ls("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(X){this.delayContextMenu?this.contextMenuEvent=X:this.map.emit(X.type,new Ls(X.type,this.map,X)),this.map.listeners("contextmenu")&&X.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),jt}(),Al=function(){function jt(bt,X){s()(this,jt),this.map=void 0,this.el=void 0,this.container=void 0,this.enabled=void 0,this.active=void 0,this.startPos=void 0,this.lastPos=void 0,this.box=void 0,this.clickTolerance=void 0,this.map=bt,this.el=bt.getCanvasContainer(),this.container=bt.getContainer(),this.clickTolerance=X.clickTolerance||1}return r()(jt,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){!this.isEnabled()||(this.enabled=!1)}},{key:"mousedown",value:function(X,Et){!this.isEnabled()||!(X.shiftKey&&X.button===0)||(ds.disableDrag(),this.startPos=this.lastPos=Et,this.active=!0)}},{key:"mousemoveWindow",value:function(X,Et){if(!!this.active){var Lt=Et;if(!(this.lastPos.equals(Lt)||!this.box&&Lt.dist(this.startPos)<this.clickTolerance)){var ie=this.startPos;this.lastPos=Lt,this.box||(this.box=ds.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",X));var ze=Math.min(ie.x,Lt.x),yn=Math.max(ie.x,Lt.x),dn=Math.min(ie.y,Lt.y),Pn=Math.max(ie.y,Lt.y);ds.setTransform(this.box,"translate(".concat(ze,"px,").concat(dn,"px)")),this.box&&(this.box.style.width="".concat(yn-ze,"px"),this.box.style.height="".concat(Pn-dn,"px"))}}}},{key:"mouseupWindow",value:function(X,Et){var Lt=this;if(!!this.active&&X.button===0){var ie=this.startPos,ze=Et;if(this.reset(),ds.suppressClick(),ie.x===ze.x&&ie.y===ze.y)this.fireEvent("boxzoomcancel",X);else return this.map.emit("boxzoomend",new ao("boxzoomend",{originalEvent:X})),{cameraAnimation:function(dn){return dn.fitScreenCoordinates(ie,ze,Lt.map.getBearing(),{linear:!0})}}}}},{key:"keydown",value:function(X){!this.active||X.keyCode===27&&(this.reset(),this.fireEvent("boxzoomcancel",X))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&(ds.remove(this.box),this.box=null),ds.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(X,Et){return this.map.emit(X,new ao(X,{originalEvent:Et}))}}]),jt}(),Nl=Al,Oo=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(X,Et){return X.preventDefault(),{cameraAnimation:function(ie){ie.easeTo({duration:300,zoom:ie.getZoom()+(X.shiftKey?-1:1),around:ie.unproject(Et)},{originalEvent:X})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}();function go(jt){var bt=xl();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function xl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var sl=function(jt){n()(X,jt);var bt=go(X);function X(){var Et;s()(this,X);for(var Lt=arguments.length,ie=new Array(Lt),ze=0;ze<Lt;ze++)ie[ze]=arguments[ze];return Et=bt.call.apply(bt,[this].concat(ie)),Et.type="renderFrame",Et.timeStamp=void 0,Et}return X}(ao);function Vs(jt,bt){var X=typeof Symbol!="undefined"&&jt[Symbol.iterator]||jt["@@iterator"];if(!X){if(Array.isArray(jt)||(X=Da(jt))||bt&&jt&&typeof jt.length=="number"){X&&(jt=X);var Et=0,Lt=function(){};return{s:Lt,n:function(){return Et>=jt.length?{done:!0}:{done:!1,value:jt[Et++]}},e:function(Pn){throw Pn},f:Lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,ze=!1,yn;return{s:function(){X=X.call(jt)},n:function(){var Pn=X.next();return ie=Pn.done,Pn},e:function(Pn){ze=!0,yn=Pn},f:function(){try{!ie&&X.return!=null&&X.return()}finally{if(ze)throw yn}}}}function Da(jt,bt){if(!!jt){if(typeof jt=="string")return bo(jt,bt);var X=Object.prototype.toString.call(jt).slice(8,-1);if(X==="Object"&&jt.constructor&&(X=jt.constructor.name),X==="Map"||X==="Set")return Array.from(jt);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return bo(jt,bt)}}function bo(jt,bt){(bt==null||bt>jt.length)&&(bt=jt.length);for(var X=0,Et=new Array(bt);X<bt;X++)Et[X]=jt[X];return Et}var Ns={linearity:.3,easing:_s(0,0,.3,1)},Cl=ea()({deceleration:2500,maxSpeed:1400},Ns),ul=ea()({deceleration:20,maxSpeed:1400},Ns),Ju=ea()({deceleration:1e3,maxSpeed:360},Ns),Sc=ea()({deceleration:1e3,maxSpeed:90},Ns),Wl=function(){function jt(bt){s()(this,jt),this.map=void 0,this.inertiaBuffer=void 0,this.map=bt,this.clear()}return r()(jt,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(X){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:Qs(),settings:X})}},{key:"drainInertiaBuffer",value:function(){for(var X=this.inertiaBuffer,Et=Qs(),Lt=160;X.length>0&&Et-X[0].time>Lt;)X.shift()}},{key:"onMoveEnd",value:function(X){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var Et={zoom:0,bearing:0,pitch:0,pan:new ba(0,0),pinchAround:void 0,around:void 0},Lt=Vs(this.inertiaBuffer),ie;try{for(Lt.s();!(ie=Lt.n()).done;){var ze=ie.value.settings;Et.zoom+=ze.zoomDelta||0,Et.bearing+=ze.bearingDelta||0,Et.pitch+=ze.pitchDelta||0,ze.panDelta&&Et.pan._add(ze.panDelta),ze.around&&(Et.around=ze.around),ze.pinchAround&&(Et.pinchAround=ze.pinchAround)}}catch(lr){Lt.e(lr)}finally{Lt.f()}var yn=this.inertiaBuffer[this.inertiaBuffer.length-1],dn=yn.time-this.inertiaBuffer[0].time,Pn={};if(Et.pan.mag()){var Br=tu(Et.pan.mag(),dn,ea()({},Cl,X||{}));Pn.offset=Et.pan.mult(Br.amount/Et.pan.mag()),Pn.center=this.map.transform.center,$u(Pn,Br)}if(Et.zoom){var ce=tu(Et.zoom,dn,ul);Pn.zoom=this.map.transform.zoom+ce.amount,$u(Pn,ce)}if(Et.bearing){var xe=tu(Et.bearing,dn,Ju);Pn.bearing=this.map.transform.bearing+rs(xe.amount,-179,179),$u(Pn,xe)}if(Et.pitch){var Ke=tu(Et.pitch,dn,Sc);Pn.pitch=this.map.transform.pitch+Ke.amount,$u(Pn,Ke)}if(Pn.zoom||Pn.bearing){var zn=Et.pinchAround===void 0?Et.around:Et.pinchAround;Pn.around=zn?this.map.unproject(zn):this.map.getCenter()}return this.clear(),ea()(Pn,{noMoveStart:!0})}}}]),jt}();function $u(jt,bt){(!jt.duration||jt.duration<bt.duration)&&(jt.duration=bt.duration,jt.easing=bt.easing)}function tu(jt,bt,X){var Et=X.maxSpeed,Lt=X.linearity,ie=X.deceleration,ze=rs(jt*Lt/(bt/1e3),-Et,Et),yn=Math.abs(ze)/(ie*Lt);return{easing:X.easing,duration:yn*1e3,amount:ze*(yn/2)}}var Ws={panStep:100,bearingStep:15,pitchStep:10},is=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.panStep=void 0,this.bearingStep=void 0,this.pitchStep=void 0;var bt=Ws;this.panStep=bt.panStep,this.bearingStep=bt.bearingStep,this.pitchStep=bt.pitchStep}return r()(jt,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(X){var Et=this;if(!(X.altKey||X.ctrlKey||X.metaKey)){var Lt=0,ie=0,ze=0,yn=0,dn=0;switch(X.keyCode){case 61:case 107:case 171:case 187:Lt=1;break;case 189:case 109:case 173:Lt=-1;break;case 37:X.shiftKey?ie=-1:(X.preventDefault(),yn=-1);break;case 39:X.shiftKey?ie=1:(X.preventDefault(),yn=1);break;case 38:X.shiftKey?ze=1:(X.preventDefault(),dn=-1);break;case 40:X.shiftKey?ze=-1:(X.preventDefault(),dn=1);break;default:return}return{cameraAnimation:function(Br){var ce=Br.getZoom();Br.easeTo({duration:300,easeId:"keyboardHandler",easing:eu,zoom:Lt?Math.round(ce)+Lt*(X.shiftKey?2:1):ce,bearing:Br.getBearing()+ie*Et.bearingStep,pitch:Br.getPitch()+ze*Et.pitchStep,offset:[-yn*Et.panStep,-dn*Et.panStep],center:Br.getCenter()},{originalEvent:X})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}();function eu(jt){return jt*(2-jt)}var Fu=is,us=function(){function jt(bt,X){s()(this,jt),this.mousedownPos=void 0,this.clickTolerance=void 0,this.map=void 0,this.map=bt,this.clickTolerance=X.clickTolerance}return r()(jt,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(X){return this.firePreventable(new pc(X.type,this.map,X))}},{key:"mousedown",value:function(X,Et){return this.mousedownPos=Et,this.firePreventable(new Ls(X.type,this.map,X))}},{key:"mouseup",value:function(X){this.map.emit(X.type,new Ls(X.type,this.map,X))}},{key:"click",value:function(X,Et){this.mousedownPos&&this.mousedownPos.dist(Et)>=this.clickTolerance||this.map.emit(X.type,new Ls(X.type,this.map,X))}},{key:"dblclick",value:function(X){return this.firePreventable(new Ls(X.type,this.map,X))}},{key:"mouseover",value:function(X){this.map.emit(X.type,new Ls(X.type,this.map,X))}},{key:"mouseout",value:function(X){this.map.emit(X.type,new Ls(X.type,this.map,X))}},{key:"touchstart",value:function(X){return this.firePreventable(new Tl(X.type,this.map,X))}},{key:"touchmove",value:function(X){this.map.emit(X.type,new Tl(X.type,this.map,X))}},{key:"touchend",value:function(X){this.map.emit(X.type,new Tl(X.type,this.map,X))}},{key:"touchcancel",value:function(X){this.map.emit(X.type,new Tl(X.type,this.map,X))}},{key:"firePreventable",value:function(X){if(this.map.emit(X.type,X),X.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),jt}(),Wi=R("iWIM"),js=R.n(Wi),Qu,zu=0,Uo=2,Wo=(Qu={},v()(Qu,zu,1),v()(Qu,Uo,2),Qu);function mu(jt,bt){var X=Wo[bt];return jt.buttons===void 0||(jt.buttons&X)!==X}var _i=function(){function jt(bt){s()(this,jt),this.enabled=void 0,this.active=void 0,this.lastPoint=void 0,this.eventButton=void 0,this.moved=void 0,this.clickTolerance=void 0,this.reset(),this.clickTolerance=bt.clickTolerance||1}return r()(jt,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(X,Et){if(!this.lastPoint){var Lt=ds.mouseButton(X);!this.correctButton(X,Lt)||(this.lastPoint=Et,this.eventButton=Lt)}}},{key:"mousemoveWindow",value:function(X,Et){var Lt=this.lastPoint;if(!!Lt){if(X.preventDefault(),mu(X,this.eventButton)){this.reset();return}if(!(!this.moved&&Et.dist(Lt)<this.clickTolerance))return this.moved=!0,this.lastPoint=Et,this.move(Lt,Et)}}},{key:"mouseupWindow",value:function(X){if(!!this.lastPoint){var Et=ds.mouseButton(X);Et===this.eventButton&&(this.moved&&ds.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(X,Et){return!1}},{key:"move",value:function(X,Et){}}]),jt}();function yu(jt){var bt=Cu();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function Cu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Ou=function(jt){n()(X,jt);var bt=yu(X);function X(){return s()(this,X),bt.apply(this,arguments)}return r()(X,[{key:"mousedown",value:function(Lt,ie){js()(l()(X.prototype),"mousedown",this).call(this,Lt,ie),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(Lt,ie){return{around:ie,panDelta:ie.sub(Lt)}}},{key:"correctButton",value:function(Lt,ie){return ie===zu&&!Lt.ctrlKey}}]),X}(_i);function Ks(jt){var bt=we();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function we(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Pe=function(jt){n()(X,jt);var bt=Ks(X);function X(){return s()(this,X),bt.apply(this,arguments)}return r()(X,[{key:"correctButton",value:function(Lt,ie){return ie===zu&&Lt.ctrlKey||ie===Uo}},{key:"move",value:function(Lt,ie){var ze=-.5,yn=(ie.y-Lt.y)*ze;if(yn)return this.active=!0,{pitchDelta:yn}}},{key:"contextmenu",value:function(Lt){Lt.preventDefault()}}]),X}(_i);function hn(jt){var bt=tn();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function tn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var On=function(jt){n()(X,jt);var bt=hn(X);function X(){return s()(this,X),bt.apply(this,arguments)}return r()(X,[{key:"contextmenu",value:function(Lt){Lt.preventDefault()}},{key:"correctButton",value:function(Lt,ie){return ie===zu&&Lt.ctrlKey||ie===Uo}},{key:"move",value:function(Lt,ie){var ze=.8,yn=(ie.x-Lt.x)*ze;if(yn)return this.active=!0,{bearingDelta:yn}}}]),X}(_i),hr=4.000244140625,Rr=1/100,Xr=1/450,ni=2,zr=function(){function jt(bt,X){var Et=this;s()(this,jt),this.map=void 0,this.el=void 0,this.enabled=void 0,this.active=void 0,this.zooming=void 0,this.aroundCenter=void 0,this.around=void 0,this.aroundPoint=void 0,this.type=void 0,this.lastValue=void 0,this.timeout=void 0,this.finishTimeout=void 0,this.lastWheelEvent=void 0,this.lastWheelEventTime=void 0,this.startZoom=void 0,this.targetZoom=void 0,this.delta=void 0,this.easing=void 0,this.prevEase=void 0,this.frameId=void 0,this.handler=void 0,this.defaultZoomRate=void 0,this.wheelZoomRate=void 0,this.onScrollFrame=function(){if(!!Et.frameId&&(Et.frameId=null,!!Et.isActive())){var Lt=Et.map.transform;if(Et.delta!==0){var ie=Et.type==="wheel"&&Math.abs(Et.delta)>hr?Et.wheelZoomRate:Et.defaultZoomRate,ze=ni/(1+Math.exp(-Math.abs(Et.delta*ie)));Et.delta<0&&ze!==0&&(ze=1/ze);var yn=typeof Et.targetZoom=="number"?Lt.zoomScale(Et.targetZoom):Lt.scale;Et.targetZoom=Math.min(Lt.maxZoom,Math.max(Lt.minZoom,Lt.scaleZoom(yn*ze))),Et.type==="wheel"&&(Et.startZoom=Lt.zoom,Et.easing=Et.smoothOutEasing(200)),Et.delta=0}var dn=typeof Et.targetZoom=="number"?Et.targetZoom:Lt.zoom,Pn=Et.startZoom,Br=Et.easing,ce=!1,xe;if(Et.type==="wheel"&&Pn&&Br){var Ke=Math.min((Qs()-Et.lastWheelEventTime)/200,1),zn=Br(Ke);xe=ws(Pn,dn,zn),Ke<1?Et.frameId||(Et.frameId=!0):ce=!0}else xe=dn,ce=!0;return Et.active=!0,ce&&(Et.active=!1,Et.finishTimeout=setTimeout(function(){Et.zooming=!1,Et.handler.triggerRenderFrame(),delete Et.targetZoom,delete Et.finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ce,zoomDelta:xe-Lt.zoom,around:Et.aroundPoint,originalEvent:Et.lastWheelEvent}}},this.map=bt,this.el=bt.getCanvasContainer(),this.handler=X,this.delta=0,this.defaultZoomRate=Rr,this.wheelZoomRate=Xr}return r()(jt,[{key:"setZoomRate",value:function(X){this.defaultZoomRate=X}},{key:"setWheelZoomRate",value:function(X){this.wheelZoomRate=X}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||this.finishTimeout!==void 0}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(X){this.isEnabled()||(this.enabled=!0,this.aroundCenter=X&&X.around==="center")}},{key:"disable",value:function(){!this.isEnabled()||(this.enabled=!1)}},{key:"wheel",value:function(X){if(!!this.isEnabled()){var Et=X.deltaMode===window.WheelEvent.DOM_DELTA_LINE?X.deltaY*40:X.deltaY,Lt=Qs(),ie=Lt-(this.lastWheelEventTime||0);this.lastWheelEventTime=Lt,Et!==0&&Et%hr==0?this.type="wheel":Et!==0&&Math.abs(Et)<4?this.type="trackpad":ie>400?(this.type=null,this.lastValue=Et,this.timeout=setTimeout(this.onTimeout,40,X)):this.type||(this.type=Math.abs(ie*Et)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,Et+=this.lastValue)),X.shiftKey&&Et&&(Et=Et/4),this.type&&(this.lastWheelEvent=X,this.delta-=Et,this.active||this.start(X)),X.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(X){this.type="wheel",this.delta-=this.lastValue,this.active||this.start(X)}},{key:"start",value:function(X){if(!!this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var Et=ds.mousePos(this.el,X);this.around=ka.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(Et)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(X){var Et=Tu;if(this.prevEase){var Lt=this.prevEase,ie=(Qs()-Lt.start)/Lt.duration,ze=Lt.easing(ie+.01)-Lt.easing(ie),yn=.27/Math.sqrt(ze*ze+1e-4)*.01,dn=Math.sqrt(.27*.27-yn*yn);Et=_s(yn,dn,.25,1)}return this.prevEase={start:Qs(),duration:X,easing:Et},Et}}]),jt}(),li=zr,yr=function(){function jt(bt,X){s()(this,jt),this.clickZoom=void 0,this.tapZoom=void 0,this.clickZoom=bt,this.tapZoom=X}return r()(jt,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),jt}(),Kt=function(){function jt(bt,X,Et){s()(this,jt),this.inertiaOptions=void 0,this.el=void 0,this.mousePan=void 0,this.touchPan=void 0,this.el=bt,this.mousePan=X,this.touchPan=Et}return r()(jt,[{key:"enable",value:function(X){this.inertiaOptions=X||{},this.mousePan.enable(),this.touchPan.enable(),this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),jt}(),te=function(){function jt(bt,X,Et){s()(this,jt),this.mouseRotate=void 0,this.mousePitch=void 0,this.pitchWithRotate=void 0,this.pitchWithRotate=bt.pitchWithRotate,this.mouseRotate=X,this.mousePitch=Et}return r()(jt,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),jt}(),Le=function(){function jt(bt,X,Et,Lt){s()(this,jt),this.el=void 0,this.touchZoom=void 0,this.touchRotate=void 0,this.tapDragZoom=void 0,this.rotationDisabled=void 0,this.enabled=void 0,this.el=bt,this.touchZoom=X,this.touchRotate=Et,this.tapDragZoom=Lt,this.rotationDisabled=!1,this.enabled=!0}return r()(jt,[{key:"enable",value:function(X){this.touchZoom.enable(X),this.rotationDisabled||this.touchRotate.enable(X),this.tapDragZoom.enable(),this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),jt}();function Se(jt,bt){for(var X={},Et=0;Et<jt.length;Et++)X[jt[Et].identifier]=bt[Et];return X}function Dt(jt,bt){var X=typeof Symbol!="undefined"&&jt[Symbol.iterator]||jt["@@iterator"];if(!X){if(Array.isArray(jt)||(X=zt(jt))||bt&&jt&&typeof jt.length=="number"){X&&(jt=X);var Et=0,Lt=function(){};return{s:Lt,n:function(){return Et>=jt.length?{done:!0}:{done:!1,value:jt[Et++]}},e:function(Pn){throw Pn},f:Lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,ze=!1,yn;return{s:function(){X=X.call(jt)},n:function(){var Pn=X.next();return ie=Pn.done,Pn},e:function(Pn){ze=!0,yn=Pn},f:function(){try{!ie&&X.return!=null&&X.return()}finally{if(ze)throw yn}}}}function zt(jt,bt){if(!!jt){if(typeof jt=="string")return oe(jt,bt);var X=Object.prototype.toString.call(jt).slice(8,-1);if(X==="Object"&&jt.constructor&&(X=jt.constructor.name),X==="Map"||X==="Set")return Array.from(jt);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return oe(jt,bt)}}function oe(jt,bt){(bt==null||bt>jt.length)&&(bt=jt.length);for(var X=0,Et=new Array(bt);X<bt;X++)Et[X]=jt[X];return Et}function ne(jt){var bt=new ba(0,0),X=Dt(jt),Et;try{for(X.s();!(Et=X.n()).done;){var Lt=Et.value;bt._add(Lt)}}catch(ie){X.e(ie)}finally{X.f()}return bt.div(jt.length)}var he=500,Fe=500,Ze=30,nn=function(){function jt(bt){s()(this,jt),this.numTouches=void 0,this.centroid=void 0,this.startTime=void 0,this.aborted=void 0,this.touches=void 0,this.reset(),this.numTouches=bt.numTouches}return r()(jt,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(X,Et,Lt){(this.centroid||Lt.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=X.timeStamp),Lt.length===this.numTouches&&(this.centroid=ne(Et),this.touches=Se(Lt,Et)))}},{key:"touchmove",value:function(X,Et,Lt){if(!(this.aborted||!this.centroid)){var ie=Se(Lt,Et);for(var ze in this.touches)if(this.touches[ze]){var yn=this.touches[ze],dn=ie[ze];(!dn||dn.dist(yn)>Ze)&&(this.aborted=!0)}}}},{key:"touchend",value:function(X,Et,Lt){if((!this.centroid||X.timeStamp-this.startTime>Fe)&&(this.aborted=!0),Lt.length===0){var ie=!this.aborted&&this.centroid;if(this.reset(),ie)return ie}}}]),jt}(),Je=function(){function jt(bt){s()(this,jt),this.singleTap=void 0,this.numTaps=void 0,this.lastTime=void 0,this.lastTap=void 0,this.count=void 0,this.singleTap=new nn(bt),this.numTaps=bt.numTaps,this.reset()}return r()(jt,[{key:"reset",value:function(){this.lastTime=Infinity,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(X,Et,Lt){this.singleTap.touchstart(X,Et,Lt)}},{key:"touchmove",value:function(X,Et,Lt){this.singleTap.touchmove(X,Et,Lt)}},{key:"touchend",value:function(X,Et,Lt){var ie=this.singleTap.touchend(X,Et,Lt);if(ie){var ze=X.timeStamp-this.lastTime<he,yn=!this.lastTap||this.lastTap.dist(ie)<Ze;if((!ze||!yn)&&this.reset(),this.count++,this.lastTime=X.timeStamp,this.lastTap=ie,this.count===this.numTaps)return this.reset(),ie}}}]),jt}(),pn=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.swipePoint=void 0,this.swipeTouch=void 0,this.tapTime=void 0,this.tap=void 0,this.tap=new Je({numTouches:1,numTaps:1}),this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(X,Et,Lt){this.swipePoint||(this.tapTime&&X.timeStamp-this.tapTime>he&&this.reset(),this.tapTime?Lt.length>0&&(this.swipePoint=Et[0],this.swipeTouch=Lt[0].identifier):this.tap.touchstart(X,Et,Lt))}},{key:"touchmove",value:function(X,Et,Lt){if(!this.tapTime)this.tap.touchmove(X,Et,Lt);else if(this.swipePoint){if(Lt[0].identifier!==this.swipeTouch)return;var ie=Et[0],ze=ie.y-this.swipePoint.y;return this.swipePoint=ie,X.preventDefault(),this.active=!0,{zoomDelta:ze/128}}}},{key:"touchend",value:function(X,Et,Lt){if(this.tapTime)this.swipePoint&&Lt.length===0&&this.reset();else{var ie=this.tap.touchend(X,Et,Lt);ie&&(this.tapTime=X.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}(),fn=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.zoomIn=void 0,this.zoomOut=void 0,this.zoomIn=new Je({numTouches:1,numTaps:2}),this.zoomOut=new Je({numTouches:2,numTaps:1}),this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(X,Et,Lt){this.zoomIn.touchstart(X,Et,Lt),this.zoomOut.touchstart(X,Et,Lt)}},{key:"touchmove",value:function(X,Et,Lt){this.zoomIn.touchmove(X,Et,Lt),this.zoomOut.touchmove(X,Et,Lt)}},{key:"touchend",value:function(X,Et,Lt){var ie=this,ze=this.zoomIn.touchend(X,Et,Lt),yn=this.zoomOut.touchend(X,Et,Lt);if(ze)return this.active=!0,X.preventDefault(),setTimeout(function(){return ie.reset()},0),{cameraAnimation:function(Pn){return Pn.easeTo({duration:300,zoom:Pn.getZoom()+1,around:Pn.unproject(ze)},{originalEvent:X})}};if(yn)return this.active=!0,X.preventDefault(),setTimeout(function(){return ie.reset()},0),{cameraAnimation:function(Pn){return Pn.easeTo({duration:300,zoom:Pn.getZoom()-1,around:Pn.unproject(yn)},{originalEvent:X})}}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}(),Hn=function(){function jt(bt){s()(this,jt),this.enabled=void 0,this.active=void 0,this.touches=void 0,this.minTouches=void 0,this.clickTolerance=void 0,this.sum=void 0,this.minTouches=1,this.clickTolerance=bt.clickTolerance||1,this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new ba(0,0)}},{key:"touchstart",value:function(X,Et,Lt){return this.calculateTransform(X,Et,Lt)}},{key:"touchmove",value:function(X,Et,Lt){if(!!this.active)return X.preventDefault(),this.calculateTransform(X,Et,Lt)}},{key:"touchend",value:function(X,Et,Lt){this.calculateTransform(X,Et,Lt),this.active&&Lt.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(X,Et,Lt){Lt.length>0&&(this.active=!0);var ie=Se(Lt,Et),ze=new ba(0,0),yn=new ba(0,0),dn=0;for(var Pn in ie)if(ie[Pn]){var Br=ie[Pn],ce=this.touches[Pn];ce&&(ze._add(Br),yn._add(Br.sub(ce)),dn++,ie[Pn]=Br)}if(this.touches=ie,!(dn<this.minTouches||!yn.mag())){var xe=yn.div(dn);if(this.sum._add(xe),!(this.sum.mag()<this.clickTolerance)){var Ke=ze.div(dn);return{around:Ke,panDelta:xe}}}}}]),jt}(),Un=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.firstTwoTouches=void 0,this.vector=void 0,this.startVector=void 0,this.aroundCenter=void 0,this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(X){}},{key:"move",value:function(X,Et,Lt){}},{key:"touchstart",value:function(X,Et,Lt){this.firstTwoTouches||Lt.length<2||(this.firstTwoTouches=[Lt[0].identifier,Lt[1].identifier],this.start([Et[0],Et[1]]))}},{key:"touchmove",value:function(X,Et,Lt){if(!!this.firstTwoTouches){X.preventDefault();var ie=rt()(this.firstTwoTouches,2),ze=ie[0],yn=ie[1],dn=Vn(Lt,Et,ze),Pn=Vn(Lt,Et,yn);if(!(!dn||!Pn)){var Br=this.aroundCenter?null:dn.add(Pn).div(2);return this.move([dn,Pn],Br,X)}}}},{key:"touchend",value:function(X,Et,Lt){if(!!this.firstTwoTouches){var ie=rt()(this.firstTwoTouches,2),ze=ie[0],yn=ie[1],dn=Vn(Lt,Et,ze),Pn=Vn(Lt,Et,yn);dn&&Pn||(this.active&&ds.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(X){this.enabled=!0,this.aroundCenter=!!X&&X.around==="center"}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}();function Vn(jt,bt,X){for(var Et=0;Et<jt.length;Et++)if(jt[Et].identifier===X)return bt[Et]}function Gn(jt){var bt=dr();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function dr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}function br(jt){return Math.abs(jt.y)>Math.abs(jt.x)}var Kr=100,mi=function(jt){n()(X,jt);var bt=Gn(X);function X(){var Et;s()(this,X);for(var Lt=arguments.length,ie=new Array(Lt),ze=0;ze<Lt;ze++)ie[ze]=arguments[ze];return Et=bt.call.apply(bt,[this].concat(ie)),Et.valid=void 0,Et.firstMove=void 0,Et.lastPoints=void 0,Et}return r()(X,[{key:"reset",value:function(){js()(l()(X.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(Lt){this.lastPoints=Lt,br(Lt[0].sub(Lt[1]))&&(this.valid=!1)}},{key:"move",value:function(Lt,ie,ze){var yn=Lt[0].sub(this.lastPoints[0]),dn=Lt[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(yn,dn,ze.timeStamp),!!this.valid){this.lastPoints=Lt,this.active=!0;var Pn=(yn.y+dn.y)/2,Br=-.5;return{pitchDelta:Pn*Br}}}},{key:"gestureBeginsVertically",value:function(Lt,ie,ze){if(this.valid!==void 0)return this.valid;var yn=2,dn=Lt.mag()>=yn,Pn=ie.mag()>=yn;if(!(!dn&&!Pn)){if(!dn||!Pn)return this.firstMove===void 0&&(this.firstMove=ze),ze-this.firstMove<Kr?void 0:!1;var Br=Lt.y>0==ie.y>0;return br(Lt)&&br(ie)&&Br}}}]),X}(Un);function jr(jt){var bt=oi();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function oi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var fi=25;function Hi(jt,bt){return jt.angleWith(bt)*180/Math.PI}var Di=function(jt){n()(X,jt);var bt=jr(X);function X(){var Et;s()(this,X);for(var Lt=arguments.length,ie=new Array(Lt),ze=0;ze<Lt;ze++)ie[ze]=arguments[ze];return Et=bt.call.apply(bt,[this].concat(ie)),Et.minDiameter=void 0,Et}return r()(X,[{key:"reset",value:function(){js()(l()(X.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(Lt){this.startVector=this.vector=Lt[0].sub(Lt[1]),this.minDiameter=Lt[0].dist(Lt[1])}},{key:"move",value:function(Lt,ie){var ze=this.vector;if(this.vector=Lt[0].sub(Lt[1]),!(!this.active&&this.isBelowThreshold(this.vector)))return this.active=!0,{bearingDelta:Hi(this.vector,ze),pinchAround:ie}}},{key:"isBelowThreshold",value:function(Lt){this.minDiameter=Math.min(this.minDiameter,Lt.mag());var ie=Math.PI*this.minDiameter,ze=fi/ie*360,yn=Hi(Lt,this.startVector);return Math.abs(yn)<ze}}]),X}(Un);function Ma(jt){var bt=xa();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function xa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Pa=.1;function ei(jt,bt){return Math.log(jt/bt)/Math.LN2}var Ea=function(jt){n()(X,jt);var bt=Ma(X);function X(){var Et;s()(this,X);for(var Lt=arguments.length,ie=new Array(Lt),ze=0;ze<Lt;ze++)ie[ze]=arguments[ze];return Et=bt.call.apply(bt,[this].concat(ie)),Et.distance=void 0,Et.startDistance=void 0,Et}return r()(X,[{key:"reset",value:function(){js()(l()(X.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(Lt){this.startDistance=this.distance=Lt[0].dist(Lt[1])}},{key:"move",value:function(Lt,ie){var ze=this.distance;if(this.distance=Lt[0].dist(Lt[1]),!(!this.active&&Math.abs(ei(this.distance,this.startDistance))<Pa))return this.active=!0,{zoomDelta:ei(this.distance,ze),pinchAround:ie}}}]),X}(Un);function Ga(jt,bt){var X=typeof Symbol!="undefined"&&jt[Symbol.iterator]||jt["@@iterator"];if(!X){if(Array.isArray(jt)||(X=Ha(jt))||bt&&jt&&typeof jt.length=="number"){X&&(jt=X);var Et=0,Lt=function(){};return{s:Lt,n:function(){return Et>=jt.length?{done:!0}:{done:!1,value:jt[Et++]}},e:function(Pn){throw Pn},f:Lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,ze=!1,yn;return{s:function(){X=X.call(jt)},n:function(){var Pn=X.next();return ie=Pn.done,Pn},e:function(Pn){ze=!0,yn=Pn},f:function(){try{!ie&&X.return!=null&&X.return()}finally{if(ze)throw yn}}}}function Ha(jt,bt){if(!!jt){if(typeof jt=="string")return Li(jt,bt);var X=Object.prototype.toString.call(jt).slice(8,-1);if(X==="Object"&&jt.constructor&&(X=jt.constructor.name),X==="Map"||X==="Set")return Array.from(jt);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return Li(jt,bt)}}function Li(jt,bt){(bt==null||bt>jt.length)&&(bt=jt.length);for(var X=0,Et=new Array(bt);X<bt;X++)Et[X]=jt[X];return Et}var Ia=function(bt){return bt.zoom||bt.drag||bt.pitch||bt.rotate};function Eo(jt){return jt.panDelta&&jt.panDelta.mag()||jt.zoomDelta||jt.bearingDelta||jt.pitchDelta}var Hs=function(){function jt(bt,X){var Et=this;s()(this,jt),this.map=void 0,this.el=void 0,this.handlers=void 0,this.eventsInProgress=void 0,this.frameId=void 0,this.inertia=void 0,this.bearingSnap=void 0,this.handlersById=void 0,this.updatingCamera=void 0,this.changes=void 0,this.previousActiveHandlers=void 0,this.bearingChanged=void 0,this.listeners=void 0,this.handleWindowEvent=function(ce){Et.handleEvent(ce,"".concat(ce.type,"Window"))},this.handleEvent=function(ce,xe){if(ce.type==="blur"){Et.stop();return}Et.updatingCamera=!0;var Ke=ce.type==="renderFrame"?void 0:ce,zn={needsRenderFrame:!1},lr={},pr={},Qn=ce.touches?Et.getMapTouches(ce.touches):void 0,Jr=Qn?ds.touchPos(Et.el,Qn):ds.mousePos(Et.el,ce),qr=Ga(Et.handlers),ri;try{for(qr.s();!(ri=qr.n()).done;){var ui=ri.value,yi=ui.handlerName,Ti=ui.handler,pi=ui.allowed;if(!!Ti.isEnabled()){var gi=void 0;if(Et.blockedByActive(pr,pi,yi))Ti.reset();else{var Cr=xe||ce.type;Ti&&Ti[Cr]&&(gi=Ti[Cr](ce,Jr,Qn),Et.mergeIHandlerResult(zn,lr,gi,yi,Ke),gi&&gi.needsRenderFrame&&Et.triggerRenderFrame())}(gi||Ti.isActive())&&(pr[yi]=Ti)}}}catch(kr){qr.e(kr)}finally{qr.f()}var Ir={};for(var Mi in Et.previousActiveHandlers)pr[Mi]||(Ir[Mi]=Ke);Et.previousActiveHandlers=pr,(Object.keys(Ir).length||Eo(zn))&&(Et.changes.push([zn,lr,Ir]),Et.triggerRenderFrame()),(Object.keys(pr).length||Eo(zn))&&Et.map.stop(!0),Et.updatingCamera=!1;var Gi=zn.cameraAnimation;Gi&&(Et.inertia.clear(),Et.fireEvents({},{}),Et.changes=[],Gi(Et.map))},this.map=bt,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new Wl(bt),this.bearingSnap=X.bearingSnap,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(X);var Lt=this.el;this.listeners=[[Lt,"touchstart",{passive:!1}],[Lt,"touchmove",{passive:!1}],[Lt,"touchend",void 0],[Lt,"touchcancel",void 0],[Lt,"mousedown",void 0],[Lt,"mousemove",void 0],[Lt,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[Lt,"mouseover",void 0],[Lt,"mouseout",void 0],[Lt,"dblclick",void 0],[Lt,"click",void 0],[Lt,"keydown",{capture:!1}],[Lt,"keyup",void 0],[Lt,"wheel",{passive:!1}],[Lt,"contextmenu",void 0],[window,"blur",void 0]];var ie=Ga(this.listeners),ze;try{for(ie.s();!(ze=ie.n()).done;){var yn=rt()(ze.value,3),dn=yn[0],Pn=yn[1],Br=yn[2];ds.addEventListener(dn,Pn,dn===window.document?this.handleWindowEvent:this.handleEvent,Br)}}catch(ce){ie.e(ce)}finally{ie.f()}}return r()(jt,[{key:"destroy",value:function(){var X=Ga(this.listeners),Et;try{for(X.s();!(Et=X.n()).done;){var Lt=rt()(Et.value,3),ie=Lt[0],ze=Lt[1],yn=Lt[2];ds.removeEventListener(ie,ze,ie===window.document?this.handleWindowEvent:this.handleEvent,yn)}}catch(dn){X.e(dn)}finally{X.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var X=Ga(this.handlers),Et;try{for(X.s();!(Et=X.n()).done;){var Lt=Et.value.handler;Lt.reset()}}catch(ie){X.e(ie)}finally{X.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var X=Ga(this.handlers),Et;try{for(X.s();!(Et=X.n()).done;){var Lt=Et.value.handler;if(Lt.isActive())return!0}}catch(ie){X.e(ie)}finally{X.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(Ia(this.eventsInProgress))||this.isZooming()}},{key:"mergeIHandlerResult",value:function(X,Et,Lt,ie,ze){if(!!Lt){ea()(X,Lt);var yn={handlerName:ie,originalEvent:Lt.originalEvent||ze};Lt.zoomDelta!==void 0&&(Et.zoom=yn),Lt.panDelta!==void 0&&(Et.drag=yn),Lt.pitchDelta!==void 0&&(Et.pitch=yn),Lt.bearingDelta!==void 0&&(Et.rotate=yn)}}},{key:"triggerRenderFrame",value:function(){var X=this;this.frameId===void 0&&(this.frameId=this.map.requestRenderFrame(function(Et){delete X.frameId,X.handleEvent(new sl("renderFrame",{timeStamp:Et})),X.applyChanges()}))}},{key:"addDefaultHandlers",value:function(X){var Et=this.map,Lt=Et.getCanvasContainer();this.add("mapEvent",new us(Et,X));var ie=Et.boxZoom=new Nl(Et,X);this.add("boxZoom",ie);var ze=new fn,yn=new Oo;Et.doubleClickZoom=new yr(yn,ze),this.add("tapZoom",ze),this.add("clickZoom",yn);var dn=new pn;this.add("tapDragZoom",dn);var Pn=Et.touchPitch=new mi;this.add("touchPitch",Pn);var Br=new Pe(X),ce=new On(X);Et.dragRotate=new te(X,Br,ce),this.add("mouseRotate",Br,["mousePitch"]),this.add("mousePitch",ce,["mouseRotate"]);var xe=new Ou(X),Ke=new Hn(X);Et.dragPan=new Kt(Lt,xe,Ke),this.add("mousePan",xe),this.add("touchPan",Ke,["touchZoom","touchRotate"]);var zn=new Di,lr=new Ea;Et.touchZoomRotate=new Le(Lt,lr,zn,dn),this.add("touchRotate",zn,["touchPan","touchZoom"]),this.add("touchZoom",lr,["touchPan","touchRotate"]);var pr=Et.scrollZoom=new li(Et,this);this.add("scrollZoom",pr,["mousePan"]);var Qn=Et.keyboard=new Fu;this.add("keyboard",Qn),this.add("blockableMapEvent",new Xu(Et));for(var Jr=0,qr=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Jr<qr.length;Jr++){var ri=qr[Jr];X.interactive&&X[ri]&&Et[ri].enable(X[ri])}}},{key:"add",value:function(X,Et,Lt){this.handlers.push({handlerName:X,handler:Et,allowed:Lt}),this.handlersById[X]=Et}},{key:"blockedByActive",value:function(X,Et,Lt){for(var ie in X)if(ie!==Lt&&(!Et||Et.indexOf(ie)<0))return!0;return!1}},{key:"getMapTouches",value:function(X){var Et=[],Lt=Ga(X),ie;try{for(Lt.s();!(ie=Lt.n()).done;){var ze=ie.value,yn=ze.target;this.el.contains(yn)&&Et.push(ze)}}catch(dn){Lt.e(dn)}finally{Lt.f()}return Et}},{key:"applyChanges",value:function(){var X={},Et={},Lt={},ie=Ga(this.changes),ze;try{for(ie.s();!(ze=ie.n()).done;){var yn=rt()(ze.value,3),dn=yn[0],Pn=yn[1],Br=yn[2];dn.panDelta&&(X.panDelta=(X.panDelta||new ba(0,0))._add(dn.panDelta)),dn.zoomDelta&&(X.zoomDelta=(X.zoomDelta||0)+dn.zoomDelta),dn.bearingDelta&&(X.bearingDelta=(X.bearingDelta||0)+dn.bearingDelta),dn.pitchDelta&&(X.pitchDelta=(X.pitchDelta||0)+dn.pitchDelta),dn.around!==void 0&&(X.around=dn.around),dn.pinchAround!==void 0&&(X.pinchAround=dn.pinchAround),dn.noInertia&&(X.noInertia=dn.noInertia),ea()(Et,Pn),ea()(Lt,Br)}}catch(ce){ie.e(ce)}finally{ie.f()}this.updateMapTransform(X,Et,Lt),this.changes=[]}},{key:"updateMapTransform",value:function(X,Et,Lt){var ie=this.map,ze=ie.transform;if(!Eo(X))return this.fireEvents(Et,Lt);var yn=X.panDelta,dn=X.zoomDelta,Pn=X.bearingDelta,Br=X.pitchDelta,ce=X.pinchAround,xe=X.around;ce!==void 0&&(xe=ce),ie.stop(!0),xe=xe||ie.transform.centerPoint;var Ke=ze.pointLocation(yn?xe.sub(yn):xe);Pn&&(ze.bearing+=Pn),Br&&(ze.pitch+=Br),dn&&(ze.zoom+=dn),ze.setLocationAtPoint(Ke,xe),this.map.update(),X.noInertia||this.inertia.record(X),this.fireEvents(Et,Lt)}},{key:"fireEvents",value:function(X,Et){var Lt=this,ie=Ia(this.eventsInProgress),ze=Ia(X),yn={};for(var dn in X)if(X[dn]){var Pn=X[dn].originalEvent;this.eventsInProgress[dn]||(yn["".concat(dn,"start")]=Pn),this.eventsInProgress[dn]=X[dn]}!ie&&ze&&this.fireEvent("movestart",ze.originalEvent);for(var Br in yn)yn[Br]&&this.fireEvent(Br,yn[Br]);X.rotate&&(this.bearingChanged=!0),ze&&this.fireEvent("move",ze.originalEvent);for(var ce in X)if(X[ce]){var xe=X[ce].originalEvent;this.fireEvent(ce,xe)}var Ke={},zn;for(var lr in this.eventsInProgress)if(this.eventsInProgress[lr]){var pr=this.eventsInProgress[lr],Qn=pr.handlerName,Jr=pr.originalEvent;this.handlersById[Qn].isActive()||(delete this.eventsInProgress[lr],zn=Et[Qn]||Jr,Ke["".concat(lr,"end")]=zn)}for(var qr in Ke)Ke[qr]&&this.fireEvent(qr,Ke[qr]);var ri=Ia(this.eventsInProgress);if((ie||ze)&&!ri){this.updatingCamera=!0;var ui=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),yi=function(pi){return pi!==0&&-Lt.bearingSnap<pi&&pi<Lt.bearingSnap};ui?(yi(ui.bearing||this.map.getBearing())&&(ui.bearing=0),this.map.easeTo(ui,{originalEvent:zn})):(this.map.emit("moveend",new ao("moveend",{originalEvent:zn})),yi(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(X,Et){this.map.emit(X,new ao(X,Et?{originalEvent:Et}:{}))}}]),jt}(),Fs=Hs,Ol=R("DzJC"),xu=R.n(Ol),j=function(){function jt(bt){var X=this;s()(this,jt),this.map=void 0,this.updateHash=void 0,this.hashName=void 0,this.onHashChange=function(){var Et=X.getCurrentHash();if(Et.length>=3&&!Et.some(function(ie){return isNaN(+ie)})){var Lt=X.map.dragRotate.isEnabled()&&X.map.touchZoomRotate.isEnabled()?+(Et[3]||0):X.map.getBearing();return X.map.jumpTo({center:[+Et[2],+Et[1]],zoom:+Et[0],bearing:Lt,pitch:+(Et[4]||0)}),!0}return!1},this.getCurrentHash=function(){var Et=window.location.hash.replace("#","");if(X.hashName){var Lt;return Et.split("&").map(function(ie){return ie.split("=")}).forEach(function(ie){ie[0]===X.hashName&&(Lt=ie)}),(Lt&&Lt[1]||"").split("/")}return Et.split("/")},this.updateHashUnthrottled=function(){var Et=X.getHashString();try{window.history.replaceState(window.history.state,"",Et)}catch(Lt){}},this.hashName=bt&&encodeURIComponent(bt),this.updateHash=xu()(this.updateHashUnthrottled,30*1e3/100)}return r()(jt,[{key:"addTo",value:function(X){return this.map=X,window.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return window.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(X){var Et=this.map.getCenter(),Lt=Math.round(this.map.getZoom()*100)/100,ie=Math.ceil((Lt*Math.LN2+Math.log(512/360/.5))/Math.LN10),ze=Math.pow(10,ie),yn=Math.round(Et.lng*ze)/ze,dn=Math.round(Et.lat*ze)/ze,Pn=this.map.getBearing(),Br=this.map.getPitch(),ce="";if(X?ce+="/".concat(yn,"/").concat(dn,"/").concat(Lt):ce+="".concat(Lt,"/").concat(dn,"/").concat(yn),(Pn||Br)&&(ce+="/".concat(Math.round(Pn*10)/10)),Br&&(ce+="/".concat(Math.round(Br))),this.hashName){var xe=this.hashName,Ke=!1,zn=window.location.hash.slice(1).split("&").map(function(lr){var pr=lr.split("=")[0];return pr===xe?(Ke=!0,"".concat(pr,"=").concat(ce)):lr}).filter(function(lr){return lr});return Ke||zn.push("".concat(xe,"=").concat(ce)),"#".concat(zn.join("&"))}return"#".concat(ce)}}]),jt}(),I=j,w=null,B=[],D=30,W=1e3/D,tt=window.performance,st={create:"create",load:"load",fullLoad:"fullLoad"},Ct={mark:function(bt){tt.mark(bt)},frame:function(bt){var X=bt;if(w!=null){var Et=X-w;B.push(Et)}w=X},clearMetrics:function(){w=null,B=[],tt.clearMeasures("loadTime"),tt.clearMeasures("fullLoadTime");for(var bt in st)tt.clearMarks(st[bt])},getPerformanceMetrics:function(){var bt=tt.measure("loadTime",st.create,st.load).duration,X=tt.measure("fullLoadTime",st.create,st.fullLoad).duration,Et=B.length,Lt=B.reduce(function(dn,Pn){return dn+Pn},0)/Et/1e3,ie=1/Lt,ze=B.filter(function(dn){return dn>W}).reduce(function(dn,Pn){return dn+(Pn-W)/W},0),yn=ze/(Et+ze)*100;return{loadTime:bt,fullLoadTime:X,fps:ie,percentDroppedFrames:yn}}};function It(jt,bt){var X=typeof Symbol!="undefined"&&jt[Symbol.iterator]||jt["@@iterator"];if(!X){if(Array.isArray(jt)||(X=Ut(jt))||bt&&jt&&typeof jt.length=="number"){X&&(jt=X);var Et=0,Lt=function(){};return{s:Lt,n:function(){return Et>=jt.length?{done:!0}:{done:!1,value:jt[Et++]}},e:function(Pn){throw Pn},f:Lt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,ze=!1,yn;return{s:function(){X=X.call(jt)},n:function(){var Pn=X.next();return ie=Pn.done,Pn},e:function(Pn){ze=!0,yn=Pn},f:function(){try{!ie&&X.return!=null&&X.return()}finally{if(ze)throw yn}}}}function Ut(jt,bt){if(!!jt){if(typeof jt=="string")return Zt(jt,bt);var X=Object.prototype.toString.call(jt).slice(8,-1);if(X==="Object"&&jt.constructor&&(X=jt.constructor.name),X==="Map"||X==="Set")return Array.from(jt);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return Zt(jt,bt)}}function Zt(jt,bt){(bt==null||bt>jt.length)&&(bt=jt.length);for(var X=0,Et=new Array(bt);X<bt;X++)Et[X]=jt[X];return Et}var qt=function(){function jt(){s()(this,jt),this.queue=void 0,this.id=void 0,this.cleared=void 0,this.currentlyRunning=void 0,this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return r()(jt,[{key:"add",value:function(X){var Et=++this.id,Lt=this.queue;return Lt.push({callback:X,id:Et,cancelled:!1}),Et}},{key:"remove",value:function(X){var Et=this.currentlyRunning,Lt=Et?this.queue.concat(Et):this.queue,ie=It(Lt),ze;try{for(ie.s();!(ze=ie.n()).done;){var yn=ze.value;if(yn.id===X){yn.cancelled=!0;return}}}catch(dn){ie.e(dn)}finally{ie.f()}}},{key:"run",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Et=this.currentlyRunning=this.queue;this.queue=[];var Lt=It(Et),ie;try{for(Lt.s();!(ie=Lt.n()).done;){var ze=ie.value;if(!ze.cancelled&&(ze.callback(X),this.cleared))break}}catch(yn){Lt.e(yn)}finally{Lt.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),jt}(),de=qt;function me(jt){var bt=je();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function je(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}R("BGjm")(`/* @antv/l7-map */
.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var Oe=-2,ke=22,qe=0,an=60,Xn={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:Oe,maxZoom:ke,minPitch:qe,maxPitch:an,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0},kn=function(jt){n()(X,jt);var bt=me(X);function X(Et){var Lt;s()(this,X),Lt=bt.call(this,ea()({},Xn,Et)),Lt.doubleClickZoom=void 0,Lt.dragRotate=void 0,Lt.dragPan=void 0,Lt.touchZoomRotate=void 0,Lt.scrollZoom=void 0,Lt.keyboard=void 0,Lt.touchPitch=void 0,Lt.boxZoom=void 0,Lt.handlers=void 0,Lt.container=void 0,Lt.canvas=void 0,Lt.canvasContainer=void 0,Lt.renderTaskQueue=new de,Lt.frame=void 0,Lt.trackResize=!0,Lt.hash=void 0,Lt.onWindowOnline=function(){Lt.update()},Lt.onWindowResize=function(ze){Lt.trackResize&&Lt.resize({originalEvent:ze}).update()},Lt.initContainer(),Lt.resize(),Lt.handlers=new Fs(xo()(Lt),Lt.options),typeof window!="undefined"&&(window.addEventListener("online",Lt.onWindowOnline,!1),window.addEventListener("resize",Lt.onWindowResize,!1),window.addEventListener("orientationchange",Lt.onWindowResize,!1));var ie=typeof Et.hash=="string"&&Et.hash||void 0;return Et.hash&&(Lt.hash=new I(ie).addTo(xo()(Lt))),(!Lt.hash||!Lt.hash.onHashChange())&&(Lt.jumpTo({center:Et.center,zoom:Et.zoom,bearing:Et.bearing,pitch:Et.pitch}),Et.bounds&&(Lt.resize(),Lt.fitBounds(Et.bounds,ea()({},Et.fitBoundsOptions,{duration:0})))),Lt}return r()(X,[{key:"resize",value:function(Lt){var ie=this.containerDimensions(),ze=ie[0],yn=ie[1];this.transform.resize(ze,yn);var dn=!this.moving;return dn&&(this.stop(),this.emit("movestart",new Event("movestart",Lt)),this.emit("move",new Event("move",Lt))),this.emit("resize",new Event("resize",Lt)),dn&&this.emit("moveend",new Event("moveend",Lt)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(Lt){return this.transform.locationPoint(ka.convert(Lt))}},{key:"unproject",value:function(Lt){return this.transform.pointLocation(ba.convert(Lt))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(Lt){this.transform.setMaxBounds(ju.convert(Lt))}},{key:"setStyle",value:function(Lt){}},{key:"setMinZoom",value:function(Lt){if(Lt=Lt==null?Oe:Lt,Lt>=Oe&&Lt<=this.transform.maxZoom)return this.transform.minZoom=Lt,this.getZoom()<Lt&&this.setZoom(Lt),this;throw new Error("minZoom must be between ".concat(Oe," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(Lt){if(Lt=Lt==null?ke:Lt,Lt>=this.transform.minZoom)return this.transform.maxZoom=Lt,this.getZoom()>Lt&&this.setZoom(Lt),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(Lt){if(Lt=Lt==null?qe:Lt,Lt<qe)throw new Error("minPitch must be greater than or equal to ".concat(qe));if(Lt>=qe&&Lt<=this.transform.maxPitch)return this.transform.minPitch=Lt,this.getPitch()<Lt&&this.setPitch(Lt),this;throw new Error("minPitch must be between ".concat(qe," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(Lt){if(Lt=Lt==null?an:Lt,Lt>an)throw new Error("maxPitch must be less than or equal to ".concat(an));if(Lt>=this.transform.minPitch)return this.transform.maxPitch=Lt,this.getPitch()>Lt&&this.setPitch(Lt),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(Lt){this.transform.renderWorldCopies=!!Lt}},{key:"remove",value:function(){this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(Lt){return this.update(),this.renderTaskQueue.add(Lt)}},{key:"cancelRenderFrame",value:function(Lt){return this.renderTaskQueue.remove(Lt)}},{key:"triggerRepaint",value:function(){var Lt=this;this.frame||(this.frame=il(function(ie){Ct.frame(ie),Lt.frame=null,Lt.update(ie)}))}},{key:"update",value:function(Lt){var ie=this;this.frame||(this.frame=il(function(ze){Ct.frame(ze),ie.frame=null,ie.renderTaskQueue.run(Lt)}))}},{key:"initContainer",value:function(){if(typeof this.options.container=="string"){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else if(this.options.container instanceof HTMLElement)this.container=this.options.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");var Lt=this.container;Lt.classList.add("l7-map");var ie=this.canvasContainer=Ft.a.create("div","l7-canvas-container",Lt);this.options.interactive&&ie.classList.add("l7-interactive")}},{key:"containerDimensions",value:function(){var Lt=0,ie=0;return this.container&&(Lt=this.container.clientWidth||400,ie=this.container.clientHeight||300),[Lt,ie]}},{key:"resizeCanvas",value:function(Lt,ie){var ze=Ft.a.DPR||1;this.canvas.width=ze*Lt,this.canvas.height=ze*ie,this.canvas.style.width="".concat(Lt,"px"),this.canvas.style.height="".concat(ie,"px")}}]),X}(qs),fr=function(){function jt(){s()(this,jt),this.viewport=void 0}return r()(jt,[{key:"syncWithMapCamera",value:function(X){var Et=X.center,Lt=X.zoom,ie=X.pitch,ze=X.bearing,yn=X.viewportHeight,dn=X.viewportWidth;this.viewport=new Js({width:dn,height:yn,longitude:Et&&Et[0],latitude:Et&&Et[1],zoom:Lt,pitch:ie,bearing:ze})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(X,Et){return this.viewport.projectFlat(X,Et)}}]),jt}(),Mr={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},Qr,Zr,Pi,Ri,Ki,Xi,Oa,ja,ki,Sa,ga,Yi,_a;function ra(jt,bt){var X=Object.keys(jt);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(jt);bt&&(Et=Et.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),X.push.apply(X,Et)}return X}function La(jt){for(var bt=1;bt<arguments.length;bt++){var X=arguments[bt]!=null?arguments[bt]:{};bt%2?ra(Object(X),!0).forEach(function(Et){v()(jt,Et,X[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(X)):ra(Object(X)).forEach(function(Et){Object.defineProperty(jt,Et,Object.getOwnPropertyDescriptor(X,Et))})}return jt}var za={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},Ps=12,ls=(Qr=Object(Mt.injectable)(),Zr=Object(Mt.inject)(x.TYPES.MapConfig),Pi=Object(Mt.inject)(x.TYPES.IGlobalConfigService),Ri=Object(Mt.inject)(x.TYPES.ILogService),Ki=Object(Mt.inject)(x.TYPES.ICoordinateSystemService),Xi=Object(Mt.inject)(x.TYPES.IEventEmitter),Qr(Oa=(ja=function(){function jt(){var bt=this;s()(this,jt),this.map=void 0,g()(this,"config",ki,this),g()(this,"configService",Sa,this),g()(this,"logger",ga,this),g()(this,"coordinateSystemService",Yi,this),g()(this,"eventEmitter",_a,this),this.viewport=void 0,this.markerContainer=void 0,this.cameraChangedCallback=void 0,this.$mapContainer=void 0,this.handleCameraChanged=function(){var X=bt.map.getCenter(),Et=X.lat,Lt=X.lng,ie=bt.config.offsetCoordinate,ze=ie===void 0?!0:ie;bt.viewport.syncWithMapCamera({bearing:bt.map.getBearing(),center:[Lt,Et],viewportHeight:bt.map.transform.height,pitch:bt.map.getPitch(),viewportWidth:bt.map.transform.width,zoom:bt.map.getZoom(),cameraHeight:0}),bt.viewport.getZoom()>Ps&&ze?bt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT_OFFSET):bt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT),bt.cameraChangedCallback(bt.viewport)}}return r()(jt,[{key:"addMarkerContainer",value:function(){var X=this.map.getCanvasContainer();this.markerContainer=Ft.a.create("div","l7-marker-container",X),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(X,Et){x.MapServiceEvent.indexOf(X)!==-1?this.eventEmitter.on(X,Et):this.map.on(za[X]||X,Et)}},{key:"off",value:function(X,Et){this.map.off(za[X]||X,Et)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var X=this.map.transform;return[X.width,X.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(X){return this.map.setZoom(X)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(X){this.map.setCenter(X)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(X){this.map.setBearing(X)}},{key:"zoomIn",value:function(X,Et){this.map.zoomIn(X,Et)}},{key:"zoomOut",value:function(X,Et){this.map.zoomOut(X,Et)}},{key:"setPitch",value:function(X){return this.map.setPitch(X)}},{key:"panTo",value:function(X){this.map.panTo(X)}},{key:"panBy",value:function(X){this.panTo(X)}},{key:"fitBounds",value:function(X,Et){this.map.fitBounds(X,Et)}},{key:"setMaxZoom",value:function(X){this.map.setMaxZoom(X)}},{key:"setMinZoom",value:function(X){this.map.setMinZoom(X)}},{key:"setMapStatus",value:function(X){X.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),X.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),X.dragEnable===!1&&this.map.dragPan.disable(),X.dragEnable===!0&&this.map.dragPan.enable(),X.rotateEnable===!1&&this.map.dragRotate.disable(),X.dragEnable===!0&&this.map.dragRotate.enable(),X.keyboardEnable===!1&&this.map.keyboard.disable(),X.keyboardEnable===!0&&this.map.keyboard.enable(),X.zoomEnable===!1&&this.map.scrollZoom.disable(),X.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(X,Et){this.map.flyTo({zoom:X,center:Et})}},{key:"setMapStyle",value:function(X){this.map.setStyle(this.getMapStyle(X))}},{key:"pixelToLngLat",value:function(X){return this.map.unproject(X)}},{key:"lngLatToPixel",value:function(X){return this.map.project(X)}},{key:"containerToLngLat",value:function(X){return this.map.unproject(X)}},{key:"lngLatToContainer",value:function(X){return this.map.project(X)}},{key:"lngLatToMercator",value:function(X,Et){throw new Error("not implement")}},{key:"getModelMatrix",value:function(X,Et,Lt){var ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],ze=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0};throw new Error("not implement")}},{key:"init",value:function(){var bt=Z()(mt.a.mark(function Et(){var Lt,ie,ze,yn,dn,Pn,Br,ce,xe,Ke,zn;return mt.a.wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:Lt=this.config,ie=Lt.id,ze=ie===void 0?"map":ie,yn=Lt.attributionControl,dn=yn===void 0?!1:yn,Pn=Lt.style,Br=Pn===void 0?"light":Pn,ce=Lt.rotation,xe=ce===void 0?0:ce,Ke=Lt.mapInstance,zn=G()(Lt,["id","attributionControl","style","rotation","mapInstance"]),this.viewport=new fr,Ke?(this.map=Ke,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(ze),this.map=new kn(La({container:this.$mapContainer,style:this.getMapStyle(Br),bearing:xe},zn))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 6:case"end":return pr.stop()}},Et,this)}));function X(){return bt.apply(this,arguments)}return X}()},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(X){for(var Et,Lt=arguments.length,ie=new Array(Lt>1?Lt-1:0),ze=1;ze<Lt;ze++)ie[ze-1]=arguments[ze];(Et=this.eventEmitter).emit.apply(Et,[X].concat(ie))}},{key:"once",value:function(X){for(var Et,Lt=arguments.length,ie=new Array(Lt>1?Lt-1:0),ze=1;ze<Lt;ze++)ie[ze-1]=arguments[ze];(Et=this.eventEmitter).once.apply(Et,[X].concat(ie))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(X){var Et=this.map.getCanvas(),Lt=X==="jpg"?Et==null?void 0:Et.toDataURL("image/jpeg"):Et==null?void 0:Et.toDataURL("image/png");return Lt}},{key:"onCameraChanged",value:function(X){this.cameraChangedCallback=X}},{key:"creatAmapContainer",value:function(X){var Et=X;return typeof X=="string"&&(Et=document.getElementById(X)),Et}},{key:"getMapStyle",value:function(X){return typeof X!="string"?X:Mr[X]?Mr[X]:X}}]),jt}(),ki=_()(ja.prototype,"config",[Zr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sa=_()(ja.prototype,"configService",[Pi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ga=_()(ja.prototype,"logger",[Ri],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yi=_()(ja.prototype,"coordinateSystemService",[Ki],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_a=_()(ja.prototype,"eventEmitter",[Xi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ja))||Oa);function Ts(jt){var bt=ms();return function(){var Et=l()(jt),Lt;if(bt){var ie=l()(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return a()(this,Lt)}}function ms(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var nu=function(jt){n()(X,jt);var bt=Ts(X);function X(){return s()(this,X),bt.apply(this,arguments)}return r()(X,[{key:"getServiceConstructor",value:function(){return ls}}]),X}(F);function Uu(jt,bt){var X=Object.keys(jt);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(jt);bt&&(Et=Et.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),X.push.apply(X,Et)}return X}function qu(jt){for(var bt=1;bt<arguments.length;bt++){var X=arguments[bt]!=null?arguments[bt]:{};bt%2?Uu(Object(X),!0).forEach(function(Et){_c(jt,Et,X[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(X)):Uu(Object(X)).forEach(function(Et){Object.defineProperty(jt,Et,Object.getOwnPropertyDescriptor(X,Et))})}return jt}function _c(jt,bt,X){return bt in jt?Object.defineProperty(jt,bt,{value:X,enumerable:!0,configurable:!0,writable:!0}):jt[bt]=X,jt}function Ic(jt,bt){return Bc(jt)||ef(jt,bt)||ac(jt,bt)||wl()}function wl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ac(jt,bt){if(!!jt){if(typeof jt=="string")return Gc(jt,bt);var X=Object.prototype.toString.call(jt).slice(8,-1);if(X==="Object"&&jt.constructor&&(X=jt.constructor.name),X==="Map"||X==="Set")return Array.from(jt);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return Gc(jt,bt)}}function Gc(jt,bt){(bt==null||bt>jt.length)&&(bt=jt.length);for(var X=0,Et=new Array(bt);X<bt;X++)Et[X]=jt[X];return Et}function ef(jt,bt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var X=[],Et=!0,Lt=!1,ie=void 0;try{for(var ze=jt[Symbol.iterator](),yn;!(Et=(yn=ze.next()).done)&&(X.push(yn.value),!(bt&&X.length===bt));Et=!0);}catch(dn){Lt=!0,ie=dn}finally{try{!Et&&ze.return!=null&&ze.return()}finally{if(Lt)throw ie}}return X}}function Bc(jt){if(Array.isArray(jt))return jt}var Hc=E.a.memo(function(jt){var bt=jt.style,X=jt.className,Et=jt.map,Lt=jt.option,ie=jt.onSceneLoaded,ze=jt.children,yn=Object(V.useRef)(null),dn=Object(V.useState)(),Pn=Ic(dn,2),Br=Pn[0],ce=Pn[1];return Object(V.useEffect)(function(){var xe=new t.Scene(qu(qu({id:yn.current},Lt),{},{map:new nu(Et)}));return xe.on("loaded",function(){ce(xe),ie&&ie(xe)}),function(){xe.destroy()}},[]),Object(V.useEffect)(function(){Br&&Et.style&&Br.setMapStyle(Et.style)},[JSON.stringify(Et.style)]),Object(V.useEffect)(function(){Br&&Et.zoom&&Br.setZoom(Et.zoom)},[Et.zoom]),Object(V.useEffect)(function(){Br&&Et.center&&Br.setCenter(Et.center)},[JSON.stringify(Et.center)]),Object(V.useEffect)(function(){Br&&Et.pitch&&Br.setPitch(Et.pitch)},[Et.pitch]),Object(V.useEffect)(function(){Br&&Et.rotation&&Br.setRotation(Et.rotation)},[Et.rotation]),E.a.createElement(T.Provider,{value:Br},E.a.createElement("div",{ref:yn,className:X,style:bt},Br&&ze))}),nf=Hc;function Cc(jt,bt){return Hl(jt)||cu(jt,bt)||gc(jt,bt)||Yc()}function Yc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gc(jt,bt){if(!!jt){if(typeof jt=="string")return lu(jt,bt);var X=Object.prototype.toString.call(jt).slice(8,-1);if(X==="Object"&&jt.constructor&&(X=jt.constructor.name),X==="Map"||X==="Set")return Array.from(jt);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return lu(jt,bt)}}function lu(jt,bt){(bt==null||bt>jt.length)&&(bt=jt.length);for(var X=0,Et=new Array(bt);X<bt;X++)Et[X]=jt[X];return Et}function cu(jt,bt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var X=[],Et=!0,Lt=!1,ie=void 0;try{for(var ze=jt[Symbol.iterator](),yn;!(Et=(yn=ze.next()).done)&&(X.push(yn.value),!(bt&&X.length===bt));Et=!0);}catch(dn){Lt=!0,ie=dn}finally{try{!Et&&ze.return!=null&&ze.return()}finally{if(Lt)throw ie}}return X}}function Hl(jt){if(Array.isArray(jt))return jt}var ou=E.a.memo(function(jt){var bt=jt.style,X=jt.className,Et=jt.map,Lt=jt.children,ie=Object(V.useRef)(null),ze=Object(V.useState)(),yn=Cc(ze,2),dn=yn[0],Pn=yn[1];return Object(V.useEffect)(function(){var Br=new t.Scene({id:ie.current,map:Et});return Br.on("loaded",function(){Pn(Br)}),function(){Br.destroy()}},[]),E.a.createElement(T.Provider,{value:dn},E.a.createElement("div",{ref:ie,className:X,style:bt},dn&&Lt))}),fu=E.a.memo(function(bt){var X=e(),Et=Object(V.useRef)(),Lt=bt.type,ie=bt.position;return Object(V.useEffect)(function(){var ze;switch(Lt){case"scale":ze=new t.Scale({position:ie||"bottomright"});break;case"zoom":ze=new t.Zoom({position:ie||"topright"});break;case"logo":ze=new t.Logo({position:ie||"bottomleft"})}return Et.current=ze,X.addControl(ze),function(){Et.current=void 0,X.removeControl(ze)}},[Lt]),Object(V.useEffect)(function(){Et.current&&Et.current.setPosition(ie)},[ie]),null}),bu=R("i8i4");function Eu(jt,bt){return Zc(jt)||Nc(jt,bt)||ll(jt,bt)||Fl()}function Fl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ll(jt,bt){if(!!jt){if(typeof jt=="string")return Jl(jt,bt);var X=Object.prototype.toString.call(jt).slice(8,-1);if(X==="Object"&&jt.constructor&&(X=jt.constructor.name),X==="Map"||X==="Set")return Array.from(jt);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return Jl(jt,bt)}}function Jl(jt,bt){(bt==null||bt>jt.length)&&(bt=jt.length);for(var X=0,Et=new Array(bt);X<bt;X++)Et[X]=jt[X];return Et}function Nc(jt,bt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var X=[],Et=!0,Lt=!1,ie=void 0;try{for(var ze=jt[Symbol.iterator](),yn;!(Et=(yn=ze.next()).done)&&(X.push(yn.value),!(bt&&X.length===bt));Et=!0);}catch(dn){Lt=!0,ie=dn}finally{try{!Et&&ze.return!=null&&ze.return()}finally{if(Lt)throw ie}}return X}}function Zc(jt){if(Array.isArray(jt))return jt}var Fc=V.useEffect,bl=V.useState;function rf(jt){var bt=jt.className,X=jt.style,Et=jt.children,Lt=jt.position,ie=e(),ze=bl(function(){return document.createElement("div")}),yn=Eu(ze,1),dn=yn[0];return Fc(function(){var Pn=new t.Control({position:Lt});return Pn.onAdd=function(){if(bt&&(dn.className=bt),X){var Br=Object.keys(X).map(function(ce){return"".concat(ce,":").concat(X[ce])}).join(";");dn.style.cssText=Br}return dn},ie.addControl(Pn),function(){ie.removeControl(Pn)}},[]),Object(bu.createPortal)(Et,dn)}var zc=Object(V.createContext)({});function oc(){return Object(V.useContext)(zc)}var El=V.useEffect,ph=V.memo(function(bt){var X=bt.layer,Et=bt.active;return El(function(){X.active(Et.option)},[JSON.stringify(Et)]),null}),Cf=V.useEffect,vf=V.memo(function(bt){var X=bt.layer,Et=bt.animate;return Cf(function(){X.animate(Et)},[JSON.stringify(Et)]),null}),Kc=V.useEffect,Of=V.memo(function(bt){var X=bt.layer,Et=bt.color;return Kc(function(){Et.field?X.color(Et.field,Et.values):X.color(Et.values)},[Et.field,Et.scale,JSON.stringify(Et.values),JSON.stringify(Et.options)]),null}),cf=V.useEffect,Xc=V.memo(function(bt){var X=bt.layer,Et=bt.filter;return cf(function(){Et.field&&X.filter(Et.field,Et.values)},[Et.field,Et.values,JSON.stringify(Et.values),JSON.stringify(Et.options)]),null}),Gf=V.useEffect,Jc=V.memo(function(bt){var X=bt.layer,Et=bt.scale;return Gf(function(){X.scale(Et.values)},[Et.values]),null}),af=V.useEffect,Vc=V.memo(function(bt){var X=bt.layer,Et=bt.select;return af(function(){X.select(Et.option)},[JSON.stringify(Et)]),null}),Ef=V.useEffect,gh=V.memo(function(bt){var X=bt.layer,Et=bt.shape;return Ef(function(){Et.field?X.shape(Et.field,Et.values):X.shape(Et.values)},[Et.field,JSON.stringify(Et.values),JSON.stringify(Et.options)]),null}),Sf=V.useEffect,Vf=V.memo(function(bt){var X=bt.layer,Et=bt.size;return Sf(function(){Et.field?X.size(Et.field,Et.values):X.size(Et.values)},[Et.field,Et.scale,JSON.stringify(Et.values),JSON.stringify(Et.options)]),null});function Qf(jt,bt){if(jt==null)return{};var X=pe(jt,bt),Et,Lt;if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(jt);for(Lt=0;Lt<ie.length;Lt++)Et=ie[Lt],!(bt.indexOf(Et)>=0)&&(!Object.prototype.propertyIsEnumerable.call(jt,Et)||(X[Et]=jt[Et]))}return X}function pe(jt,bt){if(jt==null)return{};var X={},Et=Object.keys(jt),Lt,ie;for(ie=0;ie<Et.length;ie++)Lt=Et[ie],!(bt.indexOf(Lt)>=0)&&(X[Lt]=jt[Lt]);return X}var ye=V.useEffect,Vt=V.memo(function(bt){var X=bt.layer,Et=bt.source,Lt=Et.data,ie=Qf(Et,["data"]);return ye(function(){X.inited?X.setData(Lt,ie):X.source(Lt,ie),ie.autoFit&&X.fitBounds(ie&&ie.fitBoundsOptions)},[Lt,JSON.stringify(ie)]),null}),Xt=V.useEffect,Ue=V.memo(function(bt){var X=bt.layer,Et=bt.style;return Xt(function(){X.style(Et)},Object.keys(Et).map(function(Lt){return Et[Lt]})),null});function un(jt,bt){return Ci(jt)||ti(jt,bt)||ir(jt,bt)||Zn()}function Zn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ir(jt,bt){if(!!jt){if(typeof jt=="string")return vr(jt,bt);var X=Object.prototype.toString.call(jt).slice(8,-1);if(X==="Object"&&jt.constructor&&(X=jt.constructor.name),X==="Map"||X==="Set")return Array.from(jt);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return vr(jt,bt)}}function vr(jt,bt){(bt==null||bt>jt.length)&&(bt=jt.length);for(var X=0,Et=new Array(bt);X<bt;X++)Et[X]=jt[X];return Et}function ti(jt,bt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var X=[],Et=!0,Lt=!1,ie=void 0;try{for(var ze=jt[Symbol.iterator](),yn;!(Et=(yn=ze.next()).done)&&(X.push(yn.value),!(bt&&X.length===bt));Et=!0);}catch(dn){Lt=!0,ie=dn}finally{try{!Et&&ze.return!=null&&ze.return()}finally{if(Lt)throw ie}}return X}}function Ci(jt){if(Array.isArray(jt))return jt}var Ji=V.useEffect,ua=V.useState;function la(jt,bt){var X=bt.source,Et=bt.color,Lt=bt.shape,ie=bt.style,ze=bt.size,yn=bt.scale,dn=bt.active,Pn=bt.select,Br=bt.filter,ce=bt.animate,xe=bt.options,Ke=bt.onLayerLoaded,zn=e(),lr=ua(),pr=un(lr,2),Qn=pr[0],Jr=pr[1];if(!Qn){var qr;switch(jt){case"polygonLayer":qr=new t.PolygonLayer(xe);break;case"lineLayer":qr=new t.LineLayer(xe);break;case"pointLayer":qr=new t.PointLayer(xe);break;case"heatmapLayer":qr=new t.HeatmapLayer(xe);break;case"rasterLayer":qr=new t.RasterLayer(xe);break;case"imageLayer":qr=new t.ImageLayer(xe);break;case"citybuildingLayer":qr=new t.CityBuildingLayer(xe);break;default:qr=new t.PolygonLayer(xe)}qr.on("inited",function(){Ke&&Ke(qr,zn)}),Jr(qr)}return Ji(function(){if(Qn!==void 0)return zn.addLayer(Qn),function(){zn.removeLayer(Qn)}},[]),Ji(function(){Qn&&Qn.inited&&xe&&(Qn.updateLayerConfig(xe),zn.render())},[xe==null?void 0:xe.minZoom,xe==null?void 0:xe.maxZoom,xe==null?void 0:xe.visible]),Ji(function(){Qn&&Qn.inited&&xe&&xe.zIndex&&Qn.setIndex(xe.zIndex)},[xe==null?void 0:xe.zIndex]),Ji(function(){Qn&&Qn.inited&&xe&&xe.blend&&Qn.setBlend(xe.blend)},[xe==null?void 0:xe.blend]),Ji(function(){Qn&&zn.render()},[]),Qn!=null?V.createElement(zc.Provider,{value:Qn},V.createElement(Vt,{layer:Qn,source:X}),yn&&V.createElement(Jc,{layer:Qn,scale:yn}),Et&&V.createElement(Of,{layer:Qn,color:Et}),ze&&V.createElement(Vf,{layer:Qn,size:ze}),Lt&&V.createElement(gh,{layer:Qn,shape:Lt}),ie&&V.createElement(Ue,{layer:Qn,style:ie}),dn&&V.createElement(ph,{layer:Qn,active:dn}),Pn&&V.createElement(Vc,{layer:Qn,select:Pn}),Br&&V.createElement(Xc,{layer:Qn,filter:Br}),ce&&V.createElement(vf,{layer:Qn,animate:ce}),bt.children):null}var qa=V.memo(function(bt){return la("polygonLayer",bt)}),Xa=V.memo(function(bt){return la("lineLayer",bt)}),Ho=V.memo(function(bt){return la("pointLayer",bt)}),wo=V.memo(function(bt){return la("heatmapLayer",bt)}),Su=V.memo(function(bt){return la("rasterLayer",bt)}),Xs=V.memo(function(bt){return la("imageLayer",bt)}),ku=V.memo(function(bt){return la("citybuildingLayer",bt)}),hu=V.useEffect,Gu=V.memo(function(jt){var bt=jt.type,X=jt.handler,Et=oc();return hu(function(){return Et.off(bt,X),Et.on(bt,X),function(){Et.off(bt,X)}},[bt,X]),null}),Zo=V.memo(function(jt){var bt=[{title:"1",color:"rgb(239,243,255)"},{title:"10",color:"rgb(198,219,239)"},{title:"30",color:"rgb(158,202,225)"},{title:"50",color:"rgb(107,174,214)"},{title:"60",color:"rgb(49,130,189)"},{title:"100",color:"rgb(8,81,156)"}],X=jt.items,Et=X===void 0?bt:X;return V.createElement("div",null,V.createElement("div",null,Et.map(function(Lt,ie){return V.createElement("div",{key:ie,style:{background:Lt.color,height:"100%",display:"inline-block",cursor:"pointer",width:""+(100-Et.length)/Et.length+"%",marginRight:"1%",padding:5}})})),V.createElement("div",null,Et.map(function(Lt,ie){return V.createElement("div",{key:ie,style:{background:"#fff",height:"100%",display:"inline-block",textAlign:"left",cursor:"pointer",width:""+(100-Et.length)/Et.length+"%",marginRight:"1%"}},Lt.title)})))});function lo(jt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lo=function(X){return typeof X}:lo=function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},lo(jt)}function Bs(jt,bt){var X=Object.keys(jt);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(jt);bt&&(Et=Et.filter(function(Lt){return Object.getOwnPropertyDescriptor(jt,Lt).enumerable})),X.push.apply(X,Et)}return X}function _u(jt){for(var bt=1;bt<arguments.length;bt++){var X=arguments[bt]!=null?arguments[bt]:{};bt%2?Bs(Object(X),!0).forEach(function(Et){Sl(jt,Et,X[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(X)):Bs(Object(X)).forEach(function(Et){Object.defineProperty(jt,Et,Object.getOwnPropertyDescriptor(X,Et))})}return jt}function Sl(jt,bt,X){return bt in jt?Object.defineProperty(jt,bt,{value:X,enumerable:!0,configurable:!0,writable:!0}):jt[bt]=X,jt}function Yl(jt,bt){if(!(jt instanceof bt))throw new TypeError("Cannot call a class as a function")}function Mc(jt,bt){for(var X=0;X<bt.length;X++){var Et=bt[X];Et.enumerable=Et.enumerable||!1,Et.configurable=!0,"value"in Et&&(Et.writable=!0),Object.defineProperty(jt,Et.key,Et)}}function Pc(jt,bt,X){return bt&&Mc(jt.prototype,bt),X&&Mc(jt,X),jt}function Uc(jt,bt){if(typeof bt!="function"&&bt!==null)throw new TypeError("Super expression must either be null or a function");jt.prototype=Object.create(bt&&bt.prototype,{constructor:{value:jt,writable:!0,configurable:!0}}),bt&&wf(jt,bt)}function wf(jt,bt){return wf=Object.setPrototypeOf||function(Et,Lt){return Et.__proto__=Lt,Et},wf(jt,bt)}function ff(jt){var bt=Hf();return function(){var Et=sc(jt),Lt;if(bt){var ie=sc(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return Wf(this,Lt)}}function Wf(jt,bt){return bt&&(lo(bt)==="object"||typeof bt=="function")?bt:qf(jt)}function qf(jt){if(jt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt}function Hf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(jt){return!1}}function sc(jt){return sc=Object.setPrototypeOf?Object.getPrototypeOf:function(X){return X.__proto__||Object.getPrototypeOf(X)},sc(jt)}var _f=function(jt){Uc(X,jt);var bt=ff(X);function X(Et){var Lt;return Yl(this,X),Lt=bt.call(this,Et),Lt.el=document.createElement("div"),Lt}return Pc(X,[{key:"componentDidMount",value:function(){var Lt,ie=this.props,ze=ie.lnglat,yn=ie.children,dn=ie.option,Pn=ie.lngLat,Br=new t.Popup(_u(_u({},dn),{},{stopPropagation:(Lt=this.props.option)===null||Lt===void 0?void 0:Lt.stopPropagation}));ze&&Br.setLnglat(ze),Pn&&Br.setLnglat(Pn),yn&&Br.setDOMContent(this.el),this.popup=Br,this.scene.addPopup(Br)}},{key:"componentDidUpdate",value:function(Lt){var ie,ze,yn,dn,Pn,Br,ce=Array.isArray(Lt.lnglat)?Lt.lnglat:[Lt==null||(ie=Lt.lnglat)===null||ie===void 0?void 0:ie.lng,Lt==null||(ze=Lt.lnglat)===null||ze===void 0?void 0:ze.lat],xe=Array.isArray(this.props.lnglat)?this.props.lnglat:[(yn=this.props)===null||yn===void 0||(dn=yn.lnglat)===null||dn===void 0?void 0:dn.lng,(Pn=this.props)===null||Pn===void 0||(Br=Pn.lnglat)===null||Br===void 0?void 0:Br.lat],Ke=ce.toString()!==xe.toString();if(Ke){var zn;this.popup.remove(),this.popup=new t.Popup(_u(_u({},this.props.option),{},{stopPropagation:(zn=this.props.option)===null||zn===void 0?void 0:zn.stopPropagation})),this.popup.setLnglat(this.props.lnglat),this.popup.setDOMContent(this.el),this.scene.addPopup(this.popup)}}},{key:"componentWillUnmount",value:function(){this.popup.remove()}},{key:"render",value:function(){var Lt=this;return V.createElement(T.Consumer,{},function(ie){return ie&&(Lt.scene=ie),Object(bu.createPortal)(Lt.props.children,Lt.el)})}}]),X}(V.PureComponent);function of(jt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?of=function(X){return typeof X}:of=function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},of(jt)}function qc(jt,bt){if(!(jt instanceof bt))throw new TypeError("Cannot call a class as a function")}function pf(jt,bt){for(var X=0;X<bt.length;X++){var Et=bt[X];Et.enumerable=Et.enumerable||!1,Et.configurable=!0,"value"in Et&&(Et.writable=!0),Object.defineProperty(jt,Et.key,Et)}}function Lc(jt,bt,X){return bt&&pf(jt.prototype,bt),X&&pf(jt,X),jt}function Yf(jt,bt){if(typeof bt!="function"&&bt!==null)throw new TypeError("Super expression must either be null or a function");jt.prototype=Object.create(bt&&bt.prototype,{constructor:{value:jt,writable:!0,configurable:!0}}),bt&&If(jt,bt)}function If(jt,bt){return If=Object.setPrototypeOf||function(Et,Lt){return Et.__proto__=Lt,Et},If(jt,bt)}function Tc(jt){var bt=Oc();return function(){var Et=Lf(jt),Lt;if(bt){var ie=Lf(this).constructor;Lt=Reflect.construct(Et,arguments,ie)}else Lt=Et.apply(this,arguments);return kc(this,Lt)}}function kc(jt,bt){return bt&&(of(bt)==="object"||typeof bt=="function")?bt:cl(jt)}function cl(jt){if(jt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt}function Oc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(jt){return!1}}function Lf(jt){return Lf=Object.setPrototypeOf?Object.getPrototypeOf:function(X){return X.__proto__||Object.getPrototypeOf(X)},Lf(jt)}var th=function(jt){Yf(X,jt);var bt=Tc(X);function X(Et){var Lt;return qc(this,X),Lt=bt.call(this,Et),Lt.el=document.createElement("div"),Lt}return Lc(X,[{key:"componentDidMount",value:function(){var Lt=this.props,ie=Lt.lnglat,ze=Lt.children,yn=Lt.option,dn=Lt.onMarkerLoaded,Pn=new t.Marker(yn);ie&&Pn.setLnglat(ie),ze&&Pn.setElement(this.el),this.marker=Pn,dn&&dn(Pn),this.scene.addMarker(Pn)}},{key:"componentDidUpdate",value:function(Lt){var ie,ze=(Lt==null?void 0:Lt.lnglat.toString())!==((ie=this.props)===null||ie===void 0?void 0:ie.lnglat.toString());ze&&this.marker.setLnglat(this.props.lnglat)}},{key:"componentWillUnmount",value:function(){this.marker&&this.marker.remove()}},{key:"render",value:function(){var Lt=this;return V.createElement(T.Consumer,{},function(ie){return ie&&(Lt.scene=ie),Object(bu.createPortal)(Lt.props.children,Lt.el)})}}]),X}(V.PureComponent),eh=V.useEffect,nh=V.memo(function(jt){var bt=jt.type,X=jt.handler,Et=e();return eh(function(){return Et.on(bt,X),function(){Et.off(bt,X)}},[bt]),null}),Ac=nh,mh=V.useEffect,Ih=V.memo(function(bt){var X=bt.name,Et=bt.url,Lt=e();return mh(function(){Lt.addImage(X,Et)},[X,Et]),null})},"6AGu":function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.BindingInSyntax=void 0;var V=R("FV85"),E=R("LKzl"),T=function(){function e(t){this._binding=t}return e.prototype.inRequestScope=function(){return this._binding.scope=V.BindingScopeEnum.Request,new E.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=V.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=V.BindingScopeEnum.Transient,new E.BindingWhenOnSyntax(this._binding)},e}();dt.BindingInSyntax=T},"6D9b":function(_e,dt,R){},"6NqC":function(_e,dt){},"6acW":function(_e,dt,R){var V=R("dt0z"),E=R("gQMU");function T(e){return E(V(e).toLowerCase())}_e.exports=T},"6nK8":function(_e,dt,R){var V=R("dVn5"),E=R("fo6e"),T=R("dt0z"),e=R("9NmV");function t(u,s,c){return u=T(u),s=c?void 0:s,s===void 0?E(u)?e(u):V(u):u.match(s)||[]}_e.exports=t},"711d":function(_e,dt){function R(V){return function(E){return E==null?void 0:E[V]}}_e.exports=R},"78VC":function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.multiBindToService=void 0;var V=function(T){return function(e){return function(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];return t.forEach(function(s){return T.bind(s).toService(e)})}}};dt.multiBindToService=V},"7Ix3":function(_e,dt){function R(V){var E=[];if(V!=null)for(var T in Object(V))E.push(T);return E}_e.exports=R},"7W2i":function(_e,dt,R){var V=R("SksO");function E(T,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(e&&e.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),e&&V(T,e)}_e.exports=E,_e.exports.default=_e.exports,_e.exports.__esModule=!0},"7tbW":function(_e,dt,R){var V=R("LGYb");function E(T){return T&&T.length?V(T):[]}_e.exports=E},"8/Fi":function(_e,dt,R){"use strict";var V=R("J4zp"),E=R.n(V),T=R("9nhX"),e=R.n(T),t=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];function u(L){return t.indexOf(L)}var s=2,c=4,r=64,h=128,n=256,i=512,a=8192,o=16384,l=32768,f=32768*2,v=131072,b=262144,g=524288,m=1048576,_=2097152,M=4194304,x=8388608,y=16777216,S=16777216*2;function P(L,H){return L=e()(Math.floor(L),0,255),H=e()(Math.floor(H),0,255),256*L+H}function A(L){var H=L.color,F=L.radius,K=L.tileX,G=L.tileY,U=L.shape,Z=L.opacity,J=L.stroke,rt=L.strokeWidth,vt=L.strokeOpacity,mt=[],ut=[],Rt=[],Ft=[P(H[0],H[1]),P(H[2],H[3])],wt=[P(J[0],J[1]),P(J[2],J[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(Mt){var St=E()(Mt,2),At=St[0],nt=St[1];mt.push([].concat(Ft,[(At+1)*x+(nt+1)*_+u(U)*v+F,(K+512)*g+(G+512)*r])),ut.push([].concat(wt,[rt,vt])),Rt.push([Z,0,0,0])}),{packedBuffer:mt,packedBuffer2:ut,packedBuffer3:Rt}}function O(L,H){if(L===0&&!H)return 0;if(L===1&&H)return 4294967295;var F=H?1:0,K=Math.floor(L*127);return K*S+F*y+K*v+F*f+K*i+F*n+K*s+F}},"88Gu":function(_e,dt){var R=800,V=16,E=Date.now;function T(e){var t=0,u=0;return function(){var s=E(),c=V-(s-u);if(u=s,c>0){if(++t>=R)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}_e.exports=T},"8ml+":function(_e,dt,R){"use strict";var V=R("h1nZ");R.o(V,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return V.CityBuildingLayer}),R.o(V,"Control")&&R.d(dt,"Control",function(){return V.Control}),R.o(V,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return V.HeatmapLayer}),R.o(V,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return V.ImageLayer}),R.o(V,"LineLayer")&&R.d(dt,"LineLayer",function(){return V.LineLayer}),R.o(V,"Logo")&&R.d(dt,"Logo",function(){return V.Logo}),R.o(V,"Marker")&&R.d(dt,"Marker",function(){return V.Marker}),R.o(V,"PointLayer")&&R.d(dt,"PointLayer",function(){return V.PointLayer}),R.o(V,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return V.PolygonLayer}),R.o(V,"Popup")&&R.d(dt,"Popup",function(){return V.Popup}),R.o(V,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return V.RasterLayer}),R.o(V,"Scale")&&R.d(dt,"Scale",function(){return V.Scale}),R.o(V,"Scene")&&R.d(dt,"Scene",function(){return V.Scene}),R.o(V,"Zoom")&&R.d(dt,"Zoom",function(){return V.Zoom});var E=R("kQ+U");R.d(dt,"Scene",function(){return E.a});var T=R("sxDa");R.d(dt,"CityBuildingLayer",function(){return T.a}),R.d(dt,"HeatmapLayer",function(){return T.b}),R.d(dt,"ImageLayer",function(){return T.c}),R.d(dt,"LineLayer",function(){return T.d}),R.d(dt,"PointLayer",function(){return T.e}),R.d(dt,"PolygonLayer",function(){return T.f}),R.d(dt,"RasterLayer",function(){return T.g});var e=R("k5/I");R.d(dt,"Control",function(){return e.a}),R.d(dt,"Logo",function(){return e.b}),R.d(dt,"Marker",function(){return e.c}),R.d(dt,"Popup",function(){return e.d}),R.d(dt,"Scale",function(){return e.e}),R.d(dt,"Zoom",function(){return e.f});var t=R("Hel2"),u=R("RL2/")},"8uyu":function(_e,dt){},"9Fde":function(_e,dt,R){"use strict";var V=this&&this.__awaiter||function(v,b,g,m){function _(M){return M instanceof g?M:new g(function(x){x(M)})}return new(g||(g=Promise))(function(M,x){function y(A){try{P(m.next(A))}catch(O){x(O)}}function S(A){try{P(m.throw(A))}catch(O){x(O)}}function P(A){A.done?M(A.value):_(A.value).then(y,S)}P((m=m.apply(v,b||[])).next())})},E=this&&this.__generator||function(v,b){var g={label:0,sent:function(){if(M[0]&1)throw M[1];return M[1]},trys:[],ops:[]},m,_,M,x;return x={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function y(P){return function(A){return S([P,A])}}function S(P){if(m)throw new TypeError("Generator is already executing.");for(;g;)try{if(m=1,_&&(M=P[0]&2?_.return:P[0]?_.throw||((M=_.return)&&M.call(_),0):_.next)&&!(M=M.call(_,P[1])).done)return M;switch(_=0,M&&(P=[P[0]&2,M.value]),P[0]){case 0:case 1:M=P;break;case 4:return g.label++,{value:P[1],done:!1};case 5:g.label++,_=P[1],P=[0];continue;case 7:P=g.ops.pop(),g.trys.pop();continue;default:if(M=g.trys,!(M=M.length>0&&M[M.length-1])&&(P[0]===6||P[0]===2)){g=0;continue}if(P[0]===3&&(!M||P[1]>M[0]&&P[1]<M[3])){g.label=P[1];break}if(P[0]===6&&g.label<M[1]){g.label=M[1],M=P;break}if(M&&g.label<M[2]){g.label=M[2],g.ops.push(P);break}M[2]&&g.ops.pop(),g.trys.pop();continue}P=b.call(v,g)}catch(A){P=[6,A],_=0}finally{m=M=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},T=this&&this.__spreadArray||function(v,b){for(var g=0,m=b.length,_=v.length;g<m;g++,_++)v[_]=b[g];return v};Object.defineProperty(dt,"__esModule",{value:!0}),dt.Container=void 0;var e=R("LgvC"),t=R("MON2"),u=R("FV85"),s=R("xfSm"),c=R("wnjb"),r=R("h7MG"),h=R("aPG5"),n=R("gzZq"),i=R("d9O0"),a=R("ujMp"),o=R("HpQ9"),l=R("AwBQ"),f=function(){function v(b){this._appliedMiddleware=[];var g=b||{};if(typeof g!="object")throw new Error(""+t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(g.defaultScope===void 0)g.defaultScope=u.BindingScopeEnum.Transient;else if(g.defaultScope!==u.BindingScopeEnum.Singleton&&g.defaultScope!==u.BindingScopeEnum.Transient&&g.defaultScope!==u.BindingScopeEnum.Request)throw new Error(""+t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(g.autoBindInjectable===void 0)g.autoBindInjectable=!1;else if(typeof g.autoBindInjectable!="boolean")throw new Error(""+t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(g.skipBaseClassChecks===void 0)g.skipBaseClassChecks=!1;else if(typeof g.skipBaseClassChecks!="boolean")throw new Error(""+t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:g.autoBindInjectable,defaultScope:g.defaultScope,skipBaseClassChecks:g.skipBaseClassChecks},this.id=i.id(),this._bindingDictionary=new l.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new c.MetadataReader}return v.merge=function(b,g){for(var m=[],_=2;_<arguments.length;_++)m[_-2]=arguments[_];var M=new v,x=T([b,g],m).map(function(P){return r.getBindingDictionary(P)}),y=r.getBindingDictionary(M);function S(P,A){P.traverse(function(O,L){L.forEach(function(H){A.add(H.serviceIdentifier,H.clone())})})}return x.forEach(function(P){S(P,y)}),M},v.prototype.load=function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];for(var m=this._getContainerModuleHelpersFactory(),_=0,M=b;_<M.length;_++){var x=M[_],y=m(x.id);x.registry(y.bindFunction,y.unbindFunction,y.isboundFunction,y.rebindFunction)}},v.prototype.loadAsync=function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];return V(this,void 0,void 0,function(){var m,_,M,x,y;return E(this,function(S){switch(S.label){case 0:m=this._getContainerModuleHelpersFactory(),_=0,M=b,S.label=1;case 1:return _<M.length?(x=M[_],y=m(x.id),[4,x.registry(y.bindFunction,y.unbindFunction,y.isboundFunction,y.rebindFunction)]):[3,4];case 2:S.sent(),S.label=3;case 3:return _++,[3,1];case 4:return[2]}})})},v.prototype.unload=function(){for(var b=this,g=[],m=0;m<arguments.length;m++)g[m]=arguments[m];var _=function(x){return function(y){return y.moduleId===x}};g.forEach(function(M){var x=_(M.id);b._bindingDictionary.removeByCondition(x)})},v.prototype.bind=function(b){var g=this.options.defaultScope||u.BindingScopeEnum.Transient,m=new e.Binding(b,g);return this._bindingDictionary.add(b,m),new n.BindingToSyntax(m)},v.prototype.rebind=function(b){return this.unbind(b),this.bind(b)},v.prototype.unbind=function(b){try{this._bindingDictionary.remove(b)}catch(g){throw new Error(t.CANNOT_UNBIND+" "+a.getServiceIdentifierAsString(b))}},v.prototype.unbindAll=function(){this._bindingDictionary=new l.Lookup},v.prototype.isBound=function(b){var g=this._bindingDictionary.hasKey(b);return!g&&this.parent&&(g=this.parent.isBound(b)),g},v.prototype.isBoundNamed=function(b,g){return this.isBoundTagged(b,s.NAMED_TAG,g)},v.prototype.isBoundTagged=function(b,g,m){var _=!1;if(this._bindingDictionary.hasKey(b)){var M=this._bindingDictionary.get(b),x=r.createMockRequest(this,b,g,m);_=M.some(function(y){return y.constraint(x)})}return!_&&this.parent&&(_=this.parent.isBoundTagged(b,g,m)),_},v.prototype.snapshot=function(){this._snapshots.push(o.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},v.prototype.restore=function(){var b=this._snapshots.pop();if(b===void 0)throw new Error(t.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=b.bindings,this._middleware=b.middleware},v.prototype.createChild=function(b){var g=new v(b||this.options);return g.parent=this,g},v.prototype.applyMiddleware=function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];this._appliedMiddleware=this._appliedMiddleware.concat(b);var m=this._middleware?this._middleware:this._planAndResolve();this._middleware=b.reduce(function(_,M){return M(_)},m)},v.prototype.applyCustomMetadataReader=function(b){this._metadataReader=b},v.prototype.get=function(b){return this._get(!1,!1,u.TargetTypeEnum.Variable,b)},v.prototype.getTagged=function(b,g,m){return this._get(!1,!1,u.TargetTypeEnum.Variable,b,g,m)},v.prototype.getNamed=function(b,g){return this.getTagged(b,s.NAMED_TAG,g)},v.prototype.getAll=function(b){return this._get(!0,!0,u.TargetTypeEnum.Variable,b)},v.prototype.getAllTagged=function(b,g,m){return this._get(!1,!0,u.TargetTypeEnum.Variable,b,g,m)},v.prototype.getAllNamed=function(b,g){return this.getAllTagged(b,s.NAMED_TAG,g)},v.prototype.resolve=function(b){var g=this.createChild();return g.bind(b).toSelf(),this._appliedMiddleware.forEach(function(m){g.applyMiddleware(m)}),g.get(b)},v.prototype._getContainerModuleHelpersFactory=function(){var b=this,g=function(S,P){S._binding.moduleId=P},m=function(S){return function(P){var A=b.bind.bind(b),O=A(P);return g(O,S),O}},_=function(S){return function(P){var A=b.unbind.bind(b);A(P)}},M=function(S){return function(P){var A=b.isBound.bind(b);return A(P)}},x=function(S){return function(P){var A=b.rebind.bind(b),O=A(P);return g(O,S),O}};return function(y){return{bindFunction:m(y),isboundFunction:M(y),rebindFunction:x(y),unbindFunction:_(y)}}},v.prototype._get=function(b,g,m,_,M,x){var y=null,S={avoidConstraints:b,contextInterceptor:function(A){return A},isMultiInject:g,key:M,serviceIdentifier:_,targetType:m,value:x};if(this._middleware){if(y=this._middleware(S),y==null)throw new Error(t.INVALID_MIDDLEWARE_RETURN)}else y=this._planAndResolve()(S);return y},v.prototype._planAndResolve=function(){var b=this;return function(g){var m=r.plan(b._metadataReader,b,g.isMultiInject,g.targetType,g.serviceIdentifier,g.key,g.value,g.avoidConstraints);m=g.contextInterceptor(m);var _=h.resolve(m);return _}},v}();dt.Container=f},"9NmV":function(_e,dt){var R="\\ud800-\\udfff",V="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=V+E+T,t="\\u2700-\\u27bf",u="a-z\\xdf-\\xf6\\xf8-\\xff",s="\\xac\\xb1\\xd7\\xf7",c="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",r="\\u2000-\\u206f",h=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",n="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\ufe0e\\ufe0f",a=s+c+r+h,o="['\u2019]",l="["+a+"]",f="["+e+"]",v="\\d+",b="["+t+"]",g="["+u+"]",m="[^"+R+a+v+t+u+n+"]",_="\\ud83c[\\udffb-\\udfff]",M="(?:"+f+"|"+_+")",x="[^"+R+"]",y="(?:\\ud83c[\\udde6-\\uddff]){2}",S="[\\ud800-\\udbff][\\udc00-\\udfff]",P="["+n+"]",A="\\u200d",O="(?:"+g+"|"+m+")",L="(?:"+P+"|"+m+")",H="(?:"+o+"(?:d|ll|m|re|s|t|ve))?",F="(?:"+o+"(?:D|LL|M|RE|S|T|VE))?",K=M+"?",G="["+i+"]?",U="(?:"+A+"(?:"+[x,y,S].join("|")+")"+G+K+")*",Z="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",J="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rt=G+K+U,vt="(?:"+[b,y,S].join("|")+")"+rt,mt=RegExp([P+"?"+g+"+"+H+"(?="+[l,P,"$"].join("|")+")",L+"+"+F+"(?="+[l,P+O,"$"].join("|")+")",P+"?"+O+"+"+H,P+"+"+F,J,Z,v,vt].join("|"),"g");function ut(Rt){return Rt.match(mt)||[]}_e.exports=ut},"9lTW":function(_e,dt,R){"use strict";(function(V){var E=R("MgzW");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function T(O,L){if(O===L)return 0;for(var H=O.length,F=L.length,K=0,G=Math.min(H,F);K<G;++K)if(O[K]!==L[K]){H=O[K],F=L[K];break}return H<F?-1:F<H?1:0}function e(O){return V.Buffer&&typeof V.Buffer.isBuffer=="function"?V.Buffer.isBuffer(O):!!(O!=null&&O._isBuffer)}var t=R("MCLT"),u=Object.prototype.hasOwnProperty,s=Array.prototype.slice,c=function(){return function(){}.name==="foo"}();function r(O){return Object.prototype.toString.call(O)}function h(O){return e(O)||typeof V.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(O):O?!!(O instanceof DataView||O.buffer&&O.buffer instanceof ArrayBuffer):!1}var n=_e.exports=b,i=/\s*function\s+([^\(\s]*)\s*/;function a(O){if(!!t.isFunction(O)){if(c)return O.name;var L=O.toString(),H=L.match(i);return H&&H[1]}}n.AssertionError=function(L){this.name="AssertionError",this.actual=L.actual,this.expected=L.expected,this.operator=L.operator,L.message?(this.message=L.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var H=L.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,H);else{var F=new Error;if(F.stack){var K=F.stack,G=a(H),U=K.indexOf(`
`+G);if(U>=0){var Z=K.indexOf(`
`,U+1);K=K.substring(Z+1)}this.stack=K}}},t.inherits(n.AssertionError,Error);function o(O,L){return typeof O=="string"?O.length<L?O:O.slice(0,L):O}function l(O){if(c||!t.isFunction(O))return t.inspect(O);var L=a(O),H=L?": "+L:"";return"[Function"+H+"]"}function f(O){return o(l(O.actual),128)+" "+O.operator+" "+o(l(O.expected),128)}function v(O,L,H,F,K){throw new n.AssertionError({message:H,actual:O,expected:L,operator:F,stackStartFunction:K})}n.fail=v;function b(O,L){O||v(O,!0,L,"==",n.ok)}n.ok=b,n.equal=function(L,H,F){L!=H&&v(L,H,F,"==",n.equal)},n.notEqual=function(L,H,F){L==H&&v(L,H,F,"!=",n.notEqual)},n.deepEqual=function(L,H,F){g(L,H,!1)||v(L,H,F,"deepEqual",n.deepEqual)},n.deepStrictEqual=function(L,H,F){g(L,H,!0)||v(L,H,F,"deepStrictEqual",n.deepStrictEqual)};function g(O,L,H,F){if(O===L)return!0;if(e(O)&&e(L))return T(O,L)===0;if(t.isDate(O)&&t.isDate(L))return O.getTime()===L.getTime();if(t.isRegExp(O)&&t.isRegExp(L))return O.source===L.source&&O.global===L.global&&O.multiline===L.multiline&&O.lastIndex===L.lastIndex&&O.ignoreCase===L.ignoreCase;if((O===null||typeof O!="object")&&(L===null||typeof L!="object"))return H?O===L:O==L;if(h(O)&&h(L)&&r(O)===r(L)&&!(O instanceof Float32Array||O instanceof Float64Array))return T(new Uint8Array(O.buffer),new Uint8Array(L.buffer))===0;if(e(O)!==e(L))return!1;F=F||{actual:[],expected:[]};var K=F.actual.indexOf(O);return K!==-1&&K===F.expected.indexOf(L)?!0:(F.actual.push(O),F.expected.push(L),_(O,L,H,F))}function m(O){return Object.prototype.toString.call(O)=="[object Arguments]"}function _(O,L,H,F){if(O==null||L===null||L===void 0)return!1;if(t.isPrimitive(O)||t.isPrimitive(L))return O===L;if(H&&Object.getPrototypeOf(O)!==Object.getPrototypeOf(L))return!1;var K=m(O),G=m(L);if(K&&!G||!K&&G)return!1;if(K)return O=s.call(O),L=s.call(L),g(O,L,H);var U=A(O),Z=A(L),J,rt;if(U.length!==Z.length)return!1;for(U.sort(),Z.sort(),rt=U.length-1;rt>=0;rt--)if(U[rt]!==Z[rt])return!1;for(rt=U.length-1;rt>=0;rt--)if(J=U[rt],!g(O[J],L[J],H,F))return!1;return!0}n.notDeepEqual=function(L,H,F){g(L,H,!1)&&v(L,H,F,"notDeepEqual",n.notDeepEqual)},n.notDeepStrictEqual=M;function M(O,L,H){g(O,L,!0)&&v(O,L,H,"notDeepStrictEqual",M)}n.strictEqual=function(L,H,F){L!==H&&v(L,H,F,"===",n.strictEqual)},n.notStrictEqual=function(L,H,F){L===H&&v(L,H,F,"!==",n.notStrictEqual)};function x(O,L){if(!O||!L)return!1;if(Object.prototype.toString.call(L)=="[object RegExp]")return L.test(O);try{if(O instanceof L)return!0}catch(H){}return Error.isPrototypeOf(L)?!1:L.call({},O)===!0}function y(O){var L;try{O()}catch(H){L=H}return L}function S(O,L,H,F){var K;if(typeof L!="function")throw new TypeError('"block" argument must be a function');typeof H=="string"&&(F=H,H=null),K=y(L),F=(H&&H.name?" ("+H.name+").":".")+(F?" "+F:"."),O&&!K&&v(K,H,"Missing expected exception"+F);var G=typeof F=="string",U=!O&&t.isError(K),Z=!O&&K&&!H;if((U&&G&&x(K,H)||Z)&&v(K,H,"Got unwanted exception"+F),O&&K&&H&&!x(K,H)||!O&&K)throw K}n.throws=function(O,L,H){S(!0,O,L,H)},n.doesNotThrow=function(O,L,H){S(!1,O,L,H)},n.ifError=function(O){if(O)throw O};function P(O,L){O||v(O,!0,L,"==",P)}n.strict=E(P,n,{equal:n.strictEqual,deepEqual:n.deepStrictEqual,notEqual:n.notStrictEqual,notDeepEqual:n.notDeepStrictEqual}),n.strict.strict=n.strict;var A=Object.keys||function(O){var L=[];for(var H in O)u.call(O,H)&&L.push(H);return L}}).call(this,R("IyRk"))},"9nhX":function(_e,dt,R){var V=R("g4R6"),E=R("tLB3");function T(e,t,u){return u===void 0&&(u=t,t=void 0),u!==void 0&&(u=E(u),u=u===u?u:0),t!==void 0&&(t=E(t),t=t===t?t:0),V(E(e),t,u)}_e.exports=T},AFH1:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return V});var V;(function(E){E.TOPRIGHT="topright",E.TOPLEFT="topleft",E.BOTTOMRIGHT="bottomright",E.BOTTOMLEFT="bottomleft"})(V||(V={}))},APxj:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0});var V=R("Ucsi");function E(T,e){e===void 0&&(e=!0);var t=V.makePropertyInjectDecorator(T,e),u=V.makePropertyInjectNamedDecorator(T,e),s=V.makePropertyInjectTaggedDecorator(T,e),c=V.makePropertyMultiInjectDecorator(T,e);return{lazyInject:t,lazyInjectNamed:u,lazyInjectTagged:s,lazyMultiInject:c}}dt.default=E},Aib3:function(_e,dt,R){var V=R("mhV4");_e.exports=E;function E(c,r){switch(c&&c.type||null){case"FeatureCollection":return c.features=c.features.map(T(E,r)),c;case"GeometryCollection":return c.geometries=c.geometries.map(T(E,r)),c;case"Feature":return c.geometry=E(c.geometry,r),c;case"Polygon":case"MultiPolygon":return e(c,r);default:return c}}function T(c,r){return function(h){return c(h,r)}}function e(c,r){return c.type==="Polygon"?c.coordinates=t(c.coordinates,r):c.type==="MultiPolygon"&&(c.coordinates=c.coordinates.map(T(t,r))),c}function t(c,r){r=!!r,c[0]=u(c[0],r);for(var h=1;h<c.length;h++)c[h]=u(c[h],!r);return c}function u(c,r){return s(c)===r?c:c.reverse()}function s(c){return V.ring(c)>=0}},AwBQ:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.Lookup=void 0;var V=R("MON2"),E=function(){function T(){this._map=new Map}return T.prototype.getMap=function(){return this._map},T.prototype.add=function(e,t){if(e==null)throw new Error(V.NULL_ARGUMENT);if(t==null)throw new Error(V.NULL_ARGUMENT);var u=this._map.get(e);u!==void 0?(u.push(t),this._map.set(e,u)):this._map.set(e,[t])},T.prototype.get=function(e){if(e==null)throw new Error(V.NULL_ARGUMENT);var t=this._map.get(e);if(t!==void 0)return t;throw new Error(V.KEY_NOT_FOUND)},T.prototype.remove=function(e){if(e==null)throw new Error(V.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(V.KEY_NOT_FOUND)},T.prototype.removeByCondition=function(e){var t=this;this._map.forEach(function(u,s){var c=u.filter(function(r){return!e(r)});c.length>0?t._map.set(s,c):t._map.delete(s)})},T.prototype.hasKey=function(e){if(e==null)throw new Error(V.NULL_ARGUMENT);return this._map.has(e)},T.prototype.clone=function(){var e=new T;return this._map.forEach(function(t,u){t.forEach(function(s){return e.add(u,s.clone())})}),e},T.prototype.traverse=function(e){this._map.forEach(function(t,u){e(u,t)})},T}();dt.Lookup=E},"B6l+":function(_e,dt,R){var V=R("Sq3C"),E=R("Z1HP"),T=R("Sxd8"),e=R("dt0z");function t(u,s,c){u=e(u),s=T(s);var r=s?E(u):0;return s&&r<s?u+V(s-r,c):u}_e.exports=t},BGjm:function(_e,dt){_e.exports=R;function R(V,E){E||(E=document);var T=E.head||E.getElementsByTagName("head")[0];if(!T){T=E.createElement("head");var e=E.body||E.getElementsByTagName("body")[0];e?e.parentNode.insertBefore(T,e):E.documentElement.appendChild(T)}var t=E.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=V:t.appendChild(E.createTextNode(V)),T.appendChild(t),t}},BMrR:function(_e,dt,R){"use strict";var V=R("qrJ5");dt.a=V.a},BkRI:function(_e,dt,R){var V=R("OBhP"),E=1,T=4;function e(t){return V(t,E|T)}_e.exports=e},Bnag:function(_e,dt){function R(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}_e.exports=R,_e.exports.default=_e.exports,_e.exports.__esModule=!0},BpBL:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return E});var V=R("Hel2");function E(e,t){var u=t.extent,s=new Promise(function(r){T(e,function(h){r(h)})}),c={images:s,_id:1,dataArray:[{_id:0,coordinates:[[u[0],u[1]],[u[2],u[3]]]}]};return c}function T(e,t){var u=e,s=[];if(typeof u=="string")Object(V.o)({url:u},function(h,n){s.push(n),t(s)});else{var c=u.length,r=0;u.forEach(function(h){Object(V.o)({url:h},function(n,i){r++,s.push(i),r===c&&t(s)})})}return E}},CZoQ:function(_e,dt){function R(V,E,T){for(var e=T-1,t=V.length;++e<t;)if(V[e]===E)return e;return-1}_e.exports=R},"D+ow":function(_e,dt){},D9lx:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.BindingInWhenOnSyntax=void 0;var V=R("6AGu"),E=R("406g"),T=R("z4Hk"),e=function(){function t(u){this._binding=u,this._bindingWhenSyntax=new T.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new E.BindingOnSyntax(this._binding),this._bindingInSyntax=new V.BindingInSyntax(u)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(u){return this._bindingWhenSyntax.when(u)},t.prototype.whenTargetNamed=function(u){return this._bindingWhenSyntax.whenTargetNamed(u)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(u,s){return this._bindingWhenSyntax.whenTargetTagged(u,s)},t.prototype.whenInjectedInto=function(u){return this._bindingWhenSyntax.whenInjectedInto(u)},t.prototype.whenParentNamed=function(u){return this._bindingWhenSyntax.whenParentNamed(u)},t.prototype.whenParentTagged=function(u,s){return this._bindingWhenSyntax.whenParentTagged(u,s)},t.prototype.whenAnyAncestorIs=function(u){return this._bindingWhenSyntax.whenAnyAncestorIs(u)},t.prototype.whenNoAncestorIs=function(u){return this._bindingWhenSyntax.whenNoAncestorIs(u)},t.prototype.whenAnyAncestorNamed=function(u){return this._bindingWhenSyntax.whenAnyAncestorNamed(u)},t.prototype.whenAnyAncestorTagged=function(u,s){return this._bindingWhenSyntax.whenAnyAncestorTagged(u,s)},t.prototype.whenNoAncestorNamed=function(u){return this._bindingWhenSyntax.whenNoAncestorNamed(u)},t.prototype.whenNoAncestorTagged=function(u,s){return this._bindingWhenSyntax.whenNoAncestorTagged(u,s)},t.prototype.whenAnyAncestorMatches=function(u){return this._bindingWhenSyntax.whenAnyAncestorMatches(u)},t.prototype.whenNoAncestorMatches=function(u){return this._bindingWhenSyntax.whenNoAncestorMatches(u)},t.prototype.onActivation=function(u){return this._bindingOnSyntax.onActivation(u)},t}();dt.BindingInWhenOnSyntax=e},DnfT:function(_e,dt,R){},"Dw+G":function(_e,dt,R){var V=R("juv8"),E=R("mTTR");function T(e,t){return e&&V(t,E(t),e)}_e.exports=T},DzJC:function(_e,dt,R){var V=R("sEfC"),E=R("GoyQ"),T="Expected a function";function e(t,u,s){var c=!0,r=!0;if(typeof t!="function")throw new TypeError(T);return E(s)&&(c="leading"in s?!!s.leading:c,r="trailing"in s?!!s.trailing:r),V(t,u,{leading:c,maxWait:u,trailing:r})}_e.exports=e},EA7m:function(_e,dt,R){var V=R("zZ0H"),E=R("Ioao"),T=R("wclG");function e(t,u){return T(E(t,u,V),t+"")}_e.exports=e},EEGq:function(_e,dt,R){var V=R("juv8"),E=R("oCl/");function T(e,t){return V(e,E(e),t)}_e.exports=T},EbDI:function(_e,dt){function R(V){if(typeof Symbol!="undefined"&&V[Symbol.iterator]!=null||V["@@iterator"]!=null)return Array.from(V)}_e.exports=R,_e.exports.default=_e.exports,_e.exports.__esModule=!0},EfZ0:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return V});var V={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"}},Em2t:function(_e,dt,R){var V=R("bahg"),E=R("quyA"),T=R("0JQy");function e(t){return E(t)?T(t):V(t)}_e.exports=e},FI6e:function(_e,dt){},FRQA:function(_e,dt,R){"use strict";var V=R("GNNt"),E=R("wEI+"),T=R("DnfT"),e=R.n(T),t=R("q1tI"),u=R.n(t),s=R("TSYQ"),c=R.n(s),r=R("jYQm"),h=function(i){var a=Object(t.useContext)(r.a),o=i.children,l=i.contentWidth,f=i.className,v=i.style,b=Object(t.useContext)(E.b.ConfigContext),g=b.getPrefixCls,m=i.prefixCls||g("pro"),_=l||a.contentWidth,M="".concat(m,"-grid-content");return u.a.createElement("div",{className:c()(M,f,{wide:_==="Fixed"}),style:v},u.a.createElement("div",{className:"".concat(m,"-grid-content-children")},o))};dt.a=h},FV85:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.TargetTypeEnum=dt.BindingTypeEnum=dt.BindingScopeEnum=void 0;var V={Request:"Request",Singleton:"Singleton",Transient:"Transient"};dt.BindingScopeEnum=V;var E={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};dt.BindingTypeEnum=E;var T={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};dt.TargetTypeEnum=T},FmoU:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return m}),R.d(dt,"b",function(){return y});var V=function(U,Z,J){U.prototype=Z.prototype=J,J.constructor=U};function E(U,Z){var J=Object.create(U.prototype);for(var rt in Z)J[rt]=Z[rt];return J}function T(){}var e=.7,t=1/e,u="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),n=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),i=new RegExp("^rgba\\("+[u,u,u,s]+"\\)$"),a=new RegExp("^rgba\\("+[c,c,c,s]+"\\)$"),o=new RegExp("^hsl\\("+[s,c,c]+"\\)$"),l=new RegExp("^hsla\\("+[s,c,c,s]+"\\)$"),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};V(T,m,{copy:function(Z){return Object.assign(new this.constructor,this,Z)},displayable:function(){return this.rgb().displayable()},hex:v,formatHex:v,formatHsl:b,formatRgb:g,toString:g});function v(){return this.rgb().formatHex()}function b(){return H(this).formatHsl()}function g(){return this.rgb().formatRgb()}function m(U){var Z,J;return U=(U+"").trim().toLowerCase(),(Z=r.exec(U))?(J=Z[1].length,Z=parseInt(Z[1],16),J===6?_(Z):J===3?new S(Z>>8&15|Z>>4&240,Z>>4&15|Z&240,(Z&15)<<4|Z&15,1):J===8?M(Z>>24&255,Z>>16&255,Z>>8&255,(Z&255)/255):J===4?M(Z>>12&15|Z>>8&240,Z>>8&15|Z>>4&240,Z>>4&15|Z&240,((Z&15)<<4|Z&15)/255):null):(Z=h.exec(U))?new S(Z[1],Z[2],Z[3],1):(Z=n.exec(U))?new S(Z[1]*255/100,Z[2]*255/100,Z[3]*255/100,1):(Z=i.exec(U))?M(Z[1],Z[2],Z[3],Z[4]):(Z=a.exec(U))?M(Z[1]*255/100,Z[2]*255/100,Z[3]*255/100,Z[4]):(Z=o.exec(U))?L(Z[1],Z[2]/100,Z[3]/100,1):(Z=l.exec(U))?L(Z[1],Z[2]/100,Z[3]/100,Z[4]):f.hasOwnProperty(U)?_(f[U]):U==="transparent"?new S(NaN,NaN,NaN,0):null}function _(U){return new S(U>>16&255,U>>8&255,U&255,1)}function M(U,Z,J,rt){return rt<=0&&(U=Z=J=NaN),new S(U,Z,J,rt)}function x(U){return U instanceof T||(U=m(U)),U?(U=U.rgb(),new S(U.r,U.g,U.b,U.opacity)):new S}function y(U,Z,J,rt){return arguments.length===1?x(U):new S(U,Z,J,rt==null?1:rt)}function S(U,Z,J,rt){this.r=+U,this.g=+Z,this.b=+J,this.opacity=+rt}V(S,y,E(T,{brighter:function(Z){return Z=Z==null?t:Math.pow(t,Z),new S(this.r*Z,this.g*Z,this.b*Z,this.opacity)},darker:function(Z){return Z=Z==null?e:Math.pow(e,Z),new S(this.r*Z,this.g*Z,this.b*Z,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:P,formatHex:P,formatRgb:A,toString:A}));function P(){return"#"+O(this.r)+O(this.g)+O(this.b)}function A(){var U=this.opacity;return U=isNaN(U)?1:Math.max(0,Math.min(1,U)),(U===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(U===1?")":", "+U+")")}function O(U){return U=Math.max(0,Math.min(255,Math.round(U)||0)),(U<16?"0":"")+U.toString(16)}function L(U,Z,J,rt){return rt<=0?U=Z=J=NaN:J<=0||J>=1?U=Z=NaN:Z<=0&&(U=NaN),new K(U,Z,J,rt)}function H(U){if(U instanceof K)return new K(U.h,U.s,U.l,U.opacity);if(U instanceof T||(U=m(U)),!U)return new K;if(U instanceof K)return U;U=U.rgb();var Z=U.r/255,J=U.g/255,rt=U.b/255,vt=Math.min(Z,J,rt),mt=Math.max(Z,J,rt),ut=NaN,Rt=mt-vt,Ft=(mt+vt)/2;return Rt?(Z===mt?ut=(J-rt)/Rt+(J<rt)*6:J===mt?ut=(rt-Z)/Rt+2:ut=(Z-J)/Rt+4,Rt/=Ft<.5?mt+vt:2-mt-vt,ut*=60):Rt=Ft>0&&Ft<1?0:ut,new K(ut,Rt,Ft,U.opacity)}function F(U,Z,J,rt){return arguments.length===1?H(U):new K(U,Z,J,rt==null?1:rt)}function K(U,Z,J,rt){this.h=+U,this.s=+Z,this.l=+J,this.opacity=+rt}V(K,F,E(T,{brighter:function(Z){return Z=Z==null?t:Math.pow(t,Z),new K(this.h,this.s,this.l*Z,this.opacity)},darker:function(Z){return Z=Z==null?e:Math.pow(e,Z),new K(this.h,this.s,this.l*Z,this.opacity)},rgb:function(){var Z=this.h%360+(this.h<0)*360,J=isNaN(Z)||isNaN(this.s)?0:this.s,rt=this.l,vt=rt+(rt<.5?rt:1-rt)*J,mt=2*rt-vt;return new S(G(Z>=240?Z-240:Z+120,mt,vt),G(Z,mt,vt),G(Z<120?Z+240:Z-120,mt,vt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Z=this.opacity;return Z=isNaN(Z)?1:Math.max(0,Math.min(1,Z)),(Z===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Z===1?")":", "+Z+")")}}));function G(U,Z,J){return(U<60?Z+(J-Z)*U/60:U<180?J:U<240?Z+(J-Z)*(240-U)/60:Z)*255}},G6z8:function(_e,dt,R){var V=R("fR/l"),E=R("oCl/"),T=R("mTTR");function e(t){return V(t,T,E)}_e.exports=e},GXnB:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.Metadata=void 0;var V=R("xfSm"),E=function(){function T(e,t){this.key=e,this.value=t}return T.prototype.toString=function(){return this.key===V.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},T}();dt.Metadata=E},Gi0A:function(_e,dt,R){var V=R("QqLw"),E=R("ExA7"),T="[object Map]";function e(t){return E(t)&&V(t)==T}_e.exports=e},Hel2:function(_e,dt,R){"use strict";R.d(dt,"o",function(){return At}),R.d(dt,"m",function(){return z}),R.d(dt,"p",function(){return at}),R.d(dt,"d",function(){return $}),R.d(dt,"q",function(){return yt}),R.d(dt,"r",function(){return $t}),R.d(dt,"j",function(){return ee}),R.d(dt,"h",function(){return Gt}),R.d(dt,"b",function(){return Ht}),R.d(dt,"i",function(){return ae}),R.d(dt,"s",function(){return Be}),R.d(dt,"k",function(){return Ce}),R.d(dt,"l",function(){return We}),R.d(dt,"n",function(){return Ye}),R.d(dt,"f",function(){return wn}),R.d(dt,"e",function(){return er}),R.d(dt,"g",function(){return Lr}),R.d(dt,"a",function(){return V}),R.d(dt,"c",function(){return E});var V={};R.r(V),R.d(V,"getContainer",function(){return c}),R.d(V,"trim",function(){return r}),R.d(V,"splitWords",function(){return h}),R.d(V,"create",function(){return i}),R.d(V,"remove",function(){return a}),R.d(V,"addClass",function(){return o}),R.d(V,"removeClass",function(){return l}),R.d(V,"hasClass",function(){return f}),R.d(V,"setClass",function(){return v}),R.d(V,"getClass",function(){return b}),R.d(V,"empty",function(){return g}),R.d(V,"setTransform",function(){return _}),R.d(V,"triggerResize",function(){return M}),R.d(V,"printCanvas",function(){return x}),R.d(V,"getViewPortScale",function(){return y}),R.d(V,"DPR",function(){return S});var E={};R.r(E),R.d(E,"sum",function(){return An}),R.d(E,"max",function(){return on}),R.d(E,"min",function(){return en}),R.d(E,"mean",function(){return Bn}),R.d(E,"mode",function(){return gr}),R.d(E,"statMap",function(){return hi}),R.d(E,"getColumn",function(){return Ae}),R.d(E,"getSatByColumn",function(){return Me});function T(Qt){var ge=131,Wt=137,re=0;Qt+="x";for(var Te=Math.floor(9007199254740991/Wt),ue=0;ue<Qt.length;ue++)re>Te&&(re=Math.floor(re/Wt)),re=re*ge+Qt.charCodeAt(ue);return re}function e(Qt){Qt=Qt.toString();for(var ge=5381,Wt=Qt.length;Wt;)ge=ge*33^Qt.charCodeAt(--Wt);return ge>>>0}var t=R("J4zp"),u=R.n(t),s=window.document.documentElement.style;function c(Qt){var ge=Qt;return typeof Qt=="string"&&(ge=document.getElementById(Qt)),ge}function r(Qt){return Qt.trim?Qt.trim():Qt.replace(/^\s+|\s+$/g,"")}function h(Qt){return r(Qt).split(/\s+/)}function n(Qt){if(!s)return Qt[0];for(var ge in Qt)if(Qt[ge]&&Qt[ge]in s)return Qt[ge];return Qt[0]}function i(Qt,ge,Wt){var re=document.createElement(Qt);return re.className=ge||"",Wt&&Wt.appendChild(re),re}function a(Qt){var ge=Qt.parentNode;ge&&ge.removeChild(Qt)}function o(Qt,ge){if(Qt.classList!==void 0)for(var Wt=h(ge),re=0,Te=Wt.length;re<Te;re++)Qt.classList.add(Wt[re]);else if(!f(Qt,ge)){var ue=b(Qt);v(Qt,(ue?ue+" ":"")+ge)}}function l(Qt,ge){Qt.classList!==void 0?Qt.classList.remove(ge):v(Qt,r((" "+b(Qt)+" ").replace(" "+ge+" "," ")))}function f(Qt,ge){if(Qt.classList!==void 0)return Qt.classList.contains(ge);var Wt=b(Qt);return Wt.length>0&&new RegExp("(^|\\s)"+ge+"(\\s|$)").test(Wt)}function v(Qt,ge){Qt instanceof HTMLElement?Qt.className=ge:Qt.className.baseVal=ge}function b(Qt){return Qt instanceof SVGElement&&(Qt=Qt.correspondingElement),Qt.className.baseVal===void 0?Qt.className:Qt.className.baseVal}function g(Qt){for(;Qt&&Qt.firstChild;)Qt.removeChild(Qt.firstChild)}var m=n(["transform","WebkitTransform"]);function _(Qt,ge){Qt.style[m]=ge}function M(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{var Qt=window.document.createEvent("UIEvents");Qt.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(Qt)}}function x(Qt){var ge=["padding: "+(Qt.height/2-8)+"px "+Qt.width/2+"px;","line-height: "+Qt.height+"px;","background-image: url("+Qt.toDataURL()+");"];console.log(`%c
`,ge.join(""))}function y(){var Qt,ge=document.querySelector('meta[name="viewport"]');if(!ge)return 1;var Wt=(Qt=ge.content)===null||Qt===void 0?void 0:Qt.split(","),re=Wt.find(function(Te){var ue=Te.split("="),be=u()(ue,2),Xe=be[0],Rn=be[1];return Xe==="initial-scale"});return re?re.split("=")[1]*1:1}var S=y()<1?1:window.devicePixelRatio,P=R("lwsE"),A=R.n(P),O=R("W8MJ"),L=R.n(O),H=R("7W2i"),F=R.n(H),K=R("a1gu"),G=R.n(K),U=R("Nsbk"),Z=R.n(U),J=R("oShl"),rt=R.n(J);function vt(Qt){var ge=mt();return function(){var re=Z()(Qt),Te;if(ge){var ue=Z()(this).constructor;Te=Reflect.construct(re,arguments,ue)}else Te=re.apply(this,arguments);return G()(this,Te)}}function mt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Qt){return!1}}var ut=function(Qt){F()(Wt,Qt);var ge=vt(Wt);function Wt(re,Te,ue){var be;return A()(this,Wt),be=ge.call(this,re),be.status=void 0,be.url=void 0,be.status=Te,be.url=ue,be.name=be.constructor.name,be.message=re,be}return L()(Wt,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),Wt}(rt()(Error));function Rt(Qt){var ge=new XMLHttpRequest;ge.open("GET",Qt.url,!0);for(var Wt in Qt.headers)Qt.headers.hasOwnProperty(Wt)&&ge.setRequestHeader(Wt,Qt.headers[Wt]);return ge.withCredentials=Qt.credentials==="include",ge}var Ft=function(ge,Wt){var re=Rt(ge);return re.setRequestHeader("Accept","application/json"),re.onerror=function(){Wt(new Error(re.statusText))},re.onload=function(){if(re.status>=200&&re.status<300&&re.response){var Te;try{Te=JSON.parse(re.response)}catch(ue){return Wt(ue)}Wt(null,Te)}else re.status===401?Wt(new ut("".concat(re.statusText),re.status,ge.url)):Wt(new ut(re.statusText,re.status,ge.url))},re.send(),re},wt=function(ge,Wt){var re=Rt(ge);return re.responseType="arraybuffer",re.onerror=function(){Wt(new Error(re.statusText))},re.onload=function(){var Te=re.response;if(Te.byteLength===0&&re.status===200)return Wt(new Error("http status 200 returned without content."));re.status>=200&&re.status<300&&re.response?Wt(null,{data:Te,cacheControl:re.getResponseHeader("Cache-Control"),expires:re.getResponseHeader("Expires")}):Wt(new ut(re.statusText,re.status,ge.url))},re.send(),re};function Mt(Qt){var ge=window.document.createElement("a");return ge.href=Qt,ge.protocol===window.document.location.protocol&&ge.host===window.document.location.host}var St="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",At=function(ge,Wt){return wt(ge,function(re,Te){if(re)Wt(re);else if(Te){var ue=new window.Image;ue.crossOrigin="anonymous";var be=window.URL||window.webkitURL;ue.onload=function(){Wt(null,ue),be.revokeObjectURL(ue.src)};var Xe=new window.Blob([new Uint8Array(Te.data)],{type:"image/png"});ue.src=Te.data.byteLength?be.createObjectURL(Xe):St}})},nt=R("0wsv"),Pt=2*Math.PI*6378137/2;function z(Qt){var ge=[Infinity,Infinity,-Infinity,-Infinity];return Qt.forEach(function(Wt){var re=Wt.coordinates;q(ge,re)}),ge}function q(Qt,ge){return Array.isArray(ge[0])?ge.forEach(function(Wt){q(Qt,Wt)}):(Qt[0]>ge[0]&&(Qt[0]=ge[0]),Qt[1]>ge[1]&&(Qt[1]=ge[1]),Qt[2]<ge[0]&&(Qt[2]=ge[0]),Qt[3]<ge[1]&&(Qt[3]=ge[1])),Qt}function gt(Qt,ge){return et(Qt,ge)}function et(Qt,ge){return Array.isArray(Qt[0])?Qt.map(function(Wt){return et(Wt,ge)}):ge(Qt)}function at(Qt){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Wt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};Qt=it(Qt,ge);var re=Qt[0],Te=Qt[1],ue=re*Pt/180,be=Math.log(Math.tan((90+Te)*Math.PI/360))/(Math.PI/180);return be=be*Pt/180,Wt.enable&&(ue=Number(ue.toFixed(Wt.decimal)),be=Number(be.toFixed(Wt.decimal))),Qt.length===3?[ue,be,Qt[2]]:[ue,be]}function xt(Qt){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,Wt=Qt[0],re=Qt[1],Te=Wt/Pt*180,ue=re/Pt*180;return ue=180/Math.PI*(2*Math.atan(Math.exp(ue*Math.PI/180))-Math.PI/2),ge!=null&&(Te=Number(Te.toFixed(ge)),ue=Number(ue.toFixed(ge))),Qt.length===3?[Te,ue,Qt[2]]:[Te,ue]}function k(Qt){if(Qt==null)throw new Error("lng is required");return(Qt>180||Qt<-180)&&(Qt=Qt%360,Qt>180&&(Qt=-360+Qt),Qt<-180&&(Qt=360+Qt),Qt===0&&(Qt=0)),Qt}function ot(Qt){if(Qt==null)throw new Error("lat is required");return(Qt>90||Qt<-90)&&(Qt=Qt%180,Qt>90&&(Qt=-180+Qt),Qt<-90&&(Qt=180+Qt),Qt===0&&(Qt=0)),Qt}function it(Qt,ge){if(ge===!1)return Qt;var Wt=k(Qt[0]),re=ot(Qt[1]);return re>85&&(re=85),re<-85&&(re=-85),Qt.length===3?[Wt,re,Qt[2]]:[Wt,re]}function $(Qt){var ge=85.0511287798,Wt=Math.max(Math.min(ge,Qt[1]),-ge),re=256<<20,Te=Math.PI/180,ue=Qt[0]*Te,be=Wt*Te;be=Math.log(Math.tan(Math.PI/4+be/2));var Xe=.5/Math.PI,Rn=.5,tr=-.5/Math.PI;return Te=.5,ue=re*(Xe*ue+Rn),be=re*(tr*be+Te),[Math.floor(ue),Math.floor(be)]}function _t(Qt){var ge=.5/Math.PI,Wt=.5,re=-.5/Math.PI,Te=.5,ue=256<<20,be=u()(Qt,2),Xe=be[0],Rn=be[1];Xe=(Xe/ue-Wt)/ge,Rn=(Rn/ue-Te)/re,Rn=(Math.atan(Math.pow(Math.E,Rn))-Math.PI/4)*2,Te=Math.PI/180;var tr=Rn/Te,Mn=Xe/Te;return[Mn,tr]}function yt(Qt,ge,Wt){var re=Object(nt.a)(ge[1]-Qt[1]),Te=Object(nt.a)(ge[0]-Qt[0]),ue=Object(nt.a)(Qt[1]),be=Object(nt.a)(ge[1]),Xe=Math.pow(Math.sin(re/2),2)+Math.pow(Math.sin(Te/2),2)*Math.cos(ue)*Math.cos(be);return Object(nt.g)(2*Math.atan2(Math.sqrt(Xe),Math.sqrt(1-Xe)),Wt="meters")}function Nt(Qt){var ge=Math.PI/180,Wt=85.0511287798,re=6378137,Te=Math.max(Math.min(Wt,Qt[1]),-Wt),ue=Math.sin(Te*ge),be=re*Qt[0]*ge,Xe=re*Math.log((1+ue)/(1-ue))/2;return[be,Xe]}function $t(Qt,ge){var Wt=Math.abs(Qt[1][1]-Qt[0][1])*ge,re=Math.abs(Qt[1][0]-Qt[0][0])*ge;return[[Qt[0][0]-re,Qt[0][1]-Wt],[Qt[1][0]+re,Qt[1][1]+Wt]]}function ee(Qt,ge){return Qt[0][0]<=ge[0][0]&&Qt[0][1]<=ge[0][1]&&Qt[1][0]>=ge[1][0]&&Qt[1][1]>=ge[1][1]}function Gt(Qt){return[[Qt[0],Qt[1]],[Qt[2],Qt[3]]]}var Ht=function(){function Qt(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,Wt=arguments.length>1?arguments[1]:void 0;A()(this,Qt),this.limit=void 0,this.cache=void 0,this.destroy=void 0,this.order=void 0,this.limit=ge,this.destroy=Wt||this.defaultDestroy,this.order=[],this.clear()}return L()(Qt,[{key:"clear",value:function(){var Wt=this;this.order.forEach(function(re){Wt.delete(re)}),this.cache={},this.order=[]}},{key:"get",value:function(Wt){var re=this.cache[Wt];return re&&(this.deleteOrder(Wt),this.appendOrder(Wt)),re}},{key:"set",value:function(Wt,re){this.cache[Wt]?(this.delete(Wt),this.cache[Wt]=re,this.appendOrder(Wt)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[Wt]=re,this.appendOrder(Wt))}},{key:"delete",value:function(Wt){var re=this.cache[Wt];re&&(this.deleteCache(Wt),this.deleteOrder(Wt),this.destroy(re,Wt))}},{key:"deleteCache",value:function(Wt){delete this.cache[Wt]}},{key:"deleteOrder",value:function(Wt){var re=this.order.findIndex(function(Te){return Te===Wt});re>=0&&this.order.splice(re,1)}},{key:"appendOrder",value:function(Wt){this.order.push(Wt)}},{key:"defaultDestroy",value:function(Wt,re){return null}}]),Qt}();function ae(Qt,ge){Qt.forEach(function(Wt){!ge[Wt]||(ge[Wt]=ge[Wt].bind(ge))})}var le=R("FmoU");function Be(Qt){var ge=le.a(Qt),Wt=[0,0,0,0];return ge!=null&&(Wt[0]=ge.r/255,Wt[1]=ge.g/255,Wt[2]=ge.b/255,Wt[3]=ge.opacity),Wt}function Ce(Qt){var ge=Qt&&Qt[0],Wt=Qt&&Qt[1],re=Qt&&Qt[2],Te=ge+Wt*256+re*65536-1;return Te}function We(Qt){return[Qt+1&255,Qt+1>>8&255,Qt+1>>8>>8&255]}function Ye(Qt){var ge=document.createElement("canvas"),Wt=ge.getContext("2d");ge.width=256,ge.height=1;for(var re=Wt.createLinearGradient(0,0,256,1),Te=null,ue=Qt.positions[0],be=Qt.positions[Qt.positions.length-1],Xe=0;Xe<Qt.colors.length;++Xe){var Rn=(Qt.positions[Xe]-ue)/(be-ue);re.addColorStop(Rn,Qt.colors[Xe])}return Wt.fillStyle=re,Wt.fillRect(0,0,256,1),Te=new Uint8ClampedArray(Wt.getImageData(0,0,256,1).data),new ImageData(Te,256,1)}var wn;(function(Qt){Qt.CENTER="center",Qt.TOP="top",Qt["TOP-LEFT"]="top-left",Qt["TOP-RIGHT"]="top-right",Qt.BOTTOM="bottom",Qt["BOTTOM-LEFT"]="bottom-left",Qt.LEFT="left",Qt.RIGHT="right"})(wn||(wn={}));var er={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Lr(Qt,ge,Wt){var re=Qt.classList;for(var Te in er)er.hasOwnProperty(Te)&&re.remove("l7-".concat(Wt,"-anchor-").concat(Te));re.add("l7-".concat(Wt,"-anchor-").concat(ge))}function on(Qt){if(Qt.length===0)throw new Error("max requires at least one data point");for(var ge=Qt[0],Wt=1;Wt<Qt.length;Wt++)Qt[Wt]>ge&&(ge=Qt[Wt]);return ge*1}function en(Qt){if(Qt.length===0)throw new Error("min requires at least one data point");for(var ge=Qt[0],Wt=1;Wt<Qt.length;Wt++)Qt[Wt]<ge&&(ge=Qt[Wt]);return ge*1}function An(Qt){if(Qt.length===0)return 0;for(var ge=Qt[0]*1,Wt=1;Wt<Qt.length;Wt++)ge+=Qt[Wt]*1;return ge}function Bn(Qt){if(Qt.length===0)throw new Error("mean requires at least one data point");return An(Qt)/Qt.length}function gr(Qt){if(Qt.length===0)throw new Error("mean requires at least one data point");if(Qt.length<3)return Qt[0];Qt.sort();for(var ge=Qt[0],Wt=NaN,re=0,Te=1,ue=1;ue<Qt.length+1;ue++)Qt[ue]!==ge?(Te>re&&(re=Te,Wt=ge),Te=1,ge=Qt[ue]):Te++;return Wt*1}var hi={min:en,max:on,mean:Bn,sum:An,mode:gr};function Ae(Qt,ge){return Qt.map(function(Wt){return Wt[ge]})}function Me(Qt,ge){return hi[Qt](ge)}},HpQ9:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.ContainerSnapshot=void 0;var V=function(){function E(){}return E.of=function(T,e){var t=new E;return t.bindings=T,t.middleware=e,t},E}();dt.ContainerSnapshot=V},HthE:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return V}),R.d(dt,"b",function(){return E});var V;(function(T){T[T.LNGLAT=1]="LNGLAT",T[T.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",T[T.VECTOR_TILE=3]="VECTOR_TILE",T[T.IDENTITY=4]="IDENTITY",T[T.P20=5]="P20",T[T.P20_OFFSET=6]="P20_OFFSET",T[T.METER_OFFSET=7]="METER_OFFSET"})(V||(V={}));var E={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter"}},I0ug:function(_e,dt,R){"use strict";(function(V){R.d(dt,"a",function(){return T});var E=R("U8pU");function T(e){if(typeof window!="undefined"&&Object(E.a)(window.process)==="object"&&window.process.type==="renderer"||typeof V!="undefined"&&Object(E.a)(V.versions)==="object"&&Boolean(V.versions.electron))return!0;var t=(typeof navigator=="undefined"?"undefined":Object(E.a)(navigator))==="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,u=e||t;return!!(u&&u.indexOf("Electron")>=0)}}).call(this,R("Q2Ig"))},IOcx:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return V}),R.d(dt,"b",function(){return L}),R.d(dt,"c",function(){return H}),R.d(dt,"d",function(){return F}),R.d(dt,"e",function(){return K});var V={};R.r(V),R.d(V,"create",function(){return T}),R.d(V,"clone",function(){return e}),R.d(V,"copy",function(){return t}),R.d(V,"identity",function(){return u}),R.d(V,"fromValues",function(){return s}),R.d(V,"set",function(){return c}),R.d(V,"transpose",function(){return r}),R.d(V,"invert",function(){return h}),R.d(V,"adjoint",function(){return n}),R.d(V,"determinant",function(){return i}),R.d(V,"multiply",function(){return a}),R.d(V,"rotate",function(){return o}),R.d(V,"scale",function(){return l}),R.d(V,"fromRotation",function(){return f}),R.d(V,"fromScaling",function(){return v}),R.d(V,"str",function(){return b}),R.d(V,"frob",function(){return g}),R.d(V,"LDU",function(){return m}),R.d(V,"add",function(){return _}),R.d(V,"subtract",function(){return M}),R.d(V,"exactEquals",function(){return x}),R.d(V,"equals",function(){return y}),R.d(V,"multiplyScalar",function(){return S}),R.d(V,"multiplyScalarAndAdd",function(){return P}),R.d(V,"mul",function(){return A}),R.d(V,"sub",function(){return O});var E=R("yU0y");function T(){var G=new E.a(4);return E.a!=Float32Array&&(G[1]=0,G[2]=0),G[0]=1,G[3]=1,G}function e(G){var U=new E.a(4);return U[0]=G[0],U[1]=G[1],U[2]=G[2],U[3]=G[3],U}function t(G,U){return G[0]=U[0],G[1]=U[1],G[2]=U[2],G[3]=U[3],G}function u(G){return G[0]=1,G[1]=0,G[2]=0,G[3]=1,G}function s(G,U,Z,J){var rt=new E.a(4);return rt[0]=G,rt[1]=U,rt[2]=Z,rt[3]=J,rt}function c(G,U,Z,J,rt){return G[0]=U,G[1]=Z,G[2]=J,G[3]=rt,G}function r(G,U){if(G===U){var Z=U[1];G[1]=U[2],G[2]=Z}else G[0]=U[0],G[1]=U[2],G[2]=U[1],G[3]=U[3];return G}function h(G,U){var Z=U[0],J=U[1],rt=U[2],vt=U[3],mt=Z*vt-rt*J;return mt?(mt=1/mt,G[0]=vt*mt,G[1]=-J*mt,G[2]=-rt*mt,G[3]=Z*mt,G):null}function n(G,U){var Z=U[0];return G[0]=U[3],G[1]=-U[1],G[2]=-U[2],G[3]=Z,G}function i(G){return G[0]*G[3]-G[2]*G[1]}function a(G,U,Z){var J=U[0],rt=U[1],vt=U[2],mt=U[3],ut=Z[0],Rt=Z[1],Ft=Z[2],wt=Z[3];return G[0]=J*ut+vt*Rt,G[1]=rt*ut+mt*Rt,G[2]=J*Ft+vt*wt,G[3]=rt*Ft+mt*wt,G}function o(G,U,Z){var J=U[0],rt=U[1],vt=U[2],mt=U[3],ut=Math.sin(Z),Rt=Math.cos(Z);return G[0]=J*Rt+vt*ut,G[1]=rt*Rt+mt*ut,G[2]=J*-ut+vt*Rt,G[3]=rt*-ut+mt*Rt,G}function l(G,U,Z){var J=U[0],rt=U[1],vt=U[2],mt=U[3],ut=Z[0],Rt=Z[1];return G[0]=J*ut,G[1]=rt*ut,G[2]=vt*Rt,G[3]=mt*Rt,G}function f(G,U){var Z=Math.sin(U),J=Math.cos(U);return G[0]=J,G[1]=Z,G[2]=-Z,G[3]=J,G}function v(G,U){return G[0]=U[0],G[1]=0,G[2]=0,G[3]=U[1],G}function b(G){return"mat2("+G[0]+", "+G[1]+", "+G[2]+", "+G[3]+")"}function g(G){return Math.hypot(G[0],G[1],G[2],G[3])}function m(G,U,Z,J){return G[2]=J[2]/J[0],Z[0]=J[0],Z[1]=J[1],Z[3]=J[3]-G[2]*Z[1],[G,U,Z]}function _(G,U,Z){return G[0]=U[0]+Z[0],G[1]=U[1]+Z[1],G[2]=U[2]+Z[2],G[3]=U[3]+Z[3],G}function M(G,U,Z){return G[0]=U[0]-Z[0],G[1]=U[1]-Z[1],G[2]=U[2]-Z[2],G[3]=U[3]-Z[3],G}function x(G,U){return G[0]===U[0]&&G[1]===U[1]&&G[2]===U[2]&&G[3]===U[3]}function y(G,U){var Z=G[0],J=G[1],rt=G[2],vt=G[3],mt=U[0],ut=U[1],Rt=U[2],Ft=U[3];return Math.abs(Z-mt)<=E.b*Math.max(1,Math.abs(Z),Math.abs(mt))&&Math.abs(J-ut)<=E.b*Math.max(1,Math.abs(J),Math.abs(ut))&&Math.abs(rt-Rt)<=E.b*Math.max(1,Math.abs(rt),Math.abs(Rt))&&Math.abs(vt-Ft)<=E.b*Math.max(1,Math.abs(vt),Math.abs(Ft))}function S(G,U,Z){return G[0]=U[0]*Z,G[1]=U[1]*Z,G[2]=U[2]*Z,G[3]=U[3]*Z,G}function P(G,U,Z,J){return G[0]=U[0]+Z[0]*J,G[1]=U[1]+Z[1]*J,G[2]=U[2]+Z[2]*J,G[3]=U[3]+Z[3]*J,G}var A=a,O=M,L=R("ZaHm"),H=R("ZxFD"),F=R("n+fv"),K=R("bl9R")},ISu3:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return T}),R.d(dt,"c",function(){return e}),R.d(dt,"b",function(){return t}),R.d(dt,"d",function(){return u});var V={},E={},T=function(c){return E[c]},e=function(c,r){E[c]=r},t=function(c){return V[c]},u=function(c,r){V[c]=r}},Ijbi:function(_e,dt,R){var V=R("WkPL");function E(T){if(Array.isArray(T))return V(T)}_e.exports=E,_e.exports.default=_e.exports,_e.exports.__esModule=!0},Ioao:function(_e,dt,R){var V=R("heNW"),E=Math.max;function T(e,t,u){return t=E(t===void 0?e.length-1:t,0),function(){for(var s=arguments,c=-1,r=E(s.length-t,0),h=Array(r);++c<r;)h[c]=s[t+c];c=-1;for(var n=Array(t+1);++c<t;)n[c]=s[c];return n[t]=u(h),V(e,this,n)}}_e.exports=T},IzEo:function(_e,dt,R){"use strict";var V=R("cIOH"),E=R.n(V),T=R("lnY3"),e=R.n(T),t=R("Znn+"),u=R("14J3"),s=R("jCWc")},J2iB:function(_e,dt){function R(V){return V==null}_e.exports=R},J7lC:function(_e,dt){},JBE3:function(_e,dt,R){var V=R("+Qka"),E=R("LsHQ"),T=E(function(e,t,u,s){V(e,t,u,s)});_e.exports=T},Jssm:function(_e,dt,R){"use strict";var V=R("q1tI"),E=R("i8i4"),T=R("17x9"),e=R("fhzG");_e.exports=e({displayName:"ReactFitText",propTypes:{children:T.element.isRequired,compressor:T.number,minFontSize:T.number,maxFontSize:T.number},getDefaultProps:function(){return{compressor:1,minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY}},componentDidMount:function(){window.addEventListener("resize",this._onBodyResize),this._onBodyResize()},componentWillUnmount:function(){window.removeEventListener("resize",this._onBodyResize)},componentDidUpdate:function(){this._onBodyResize()},_onBodyResize:function(){var u=E.findDOMNode(this),s=u.offsetWidth;u.style.fontSize=Math.max(Math.min(s/(this.props.compressor*10),parseFloat(this.props.maxFontSize)),parseFloat(this.props.minFontSize))+"px"},_renderChildren:function(){var u=this;return V.Children.map(this.props.children,function(s){return V.cloneElement(s,{ref:function(r){return u._childRef=r}})})},render:function(){return this._renderChildren()[0]}})},K9nA:function(_e,dt,R){"use strict";(function(V,E){R.d(dt,"b",function(){return u}),R.d(dt,"a",function(){return r});var T=R("U8pU"),e={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof V!="undefined"&&V,document:typeof document!="undefined"&&document,process:(typeof E=="undefined"?"undefined":Object(T.a)(E))==="object"&&E},t=e.self||e.window||e.global,u=e.window||e.self||e.global,s=e.global||e.self||e.window,c=e.document||{},r=e.process||{},h=console}).call(this,R("IyRk"),R("Q2Ig"))},KKCa:function(_e,dt){typeof Object.create=="function"?_e.exports=function(V,E){V.super_=E,V.prototype=Object.create(E.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}})}:_e.exports=function(V,E){V.super_=E;var T=function(){};T.prototype=E.prototype,V.prototype=new T,V.prototype.constructor=V}},KwMD:function(_e,dt){function R(V,E,T,e){for(var t=V.length,u=T+(e?1:-1);e?u--:++u<t;)if(E(V[u],u,V))return u;return-1}_e.exports=R},KxBF:function(_e,dt){function R(V,E,T){var e=-1,t=V.length;E<0&&(E=-E>t?0:t+E),T=T>t?t:T,T<0&&(T+=t),t=E>T?0:T-E>>>0,E>>>=0;for(var u=Array(t);++e<t;)u[e]=V[e+E];return u}_e.exports=R},L56e:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return V});var V=["mapload"]},LGYb:function(_e,dt,R){var V=R("1hJj"),E=R("jbM+"),T=R("Xt/L"),e=R("xYSL"),t=R("dQpi"),u=R("rEGp"),s=200;function c(r,h,n){var i=-1,a=E,o=r.length,l=!0,f=[],v=f;if(n)l=!1,a=T;else if(o>=s){var b=h?null:t(r);if(b)return u(b);l=!1,a=e,v=new V}else v=h?[]:f;t:for(;++i<o;){var g=r[i],m=h?h(g):g;if(g=n||g!==0?g:0,l&&m===m){for(var _=v.length;_--;)if(v[_]===m)continue t;h&&v.push(m),f.push(g)}else a(v,m,n)||(v!==f&&v.push(m),f.push(g))}return f}_e.exports=c},LKzl:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.BindingWhenOnSyntax=void 0;var V=R("406g"),E=R("z4Hk"),T=function(){function e(t){this._binding=t,this._bindingWhenSyntax=new E.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new V.BindingOnSyntax(this._binding)}return e.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},e.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(t,u){return this._bindingWhenSyntax.whenTargetTagged(t,u)},e.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},e.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},e.prototype.whenParentTagged=function(t,u){return this._bindingWhenSyntax.whenParentTagged(t,u)},e.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},e.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},e.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},e.prototype.whenAnyAncestorTagged=function(t,u){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,u)},e.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},e.prototype.whenNoAncestorTagged=function(t,u){return this._bindingWhenSyntax.whenNoAncestorTagged(t,u)},e.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},e.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},e.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e}();dt.BindingWhenOnSyntax=T},LcsW:function(_e,dt,R){var V=R("kekF"),E=V(Object.getPrototypeOf,Object);_e.exports=E},LgvC:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.Binding=void 0;var V=R("FV85"),E=R("d9O0"),T=function(){function e(t,u){this.id=E.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=u,this.type=V.BindingTypeEnum.Invalid,this.constraint=function(s){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===V.BindingScopeEnum.Singleton?this.activated:!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();dt.Binding=T},LsHQ:function(_e,dt,R){var V=R("EA7m"),E=R("mv/X");function T(e){return V(function(t,u){var s=-1,c=u.length,r=c>1?u[c-1]:void 0,h=c>2?u[2]:void 0;for(r=e.length>3&&typeof r=="function"?(c--,r):void 0,h&&E(u[0],u[1],h)&&(r=c<3?void 0:r,c=1),t=Object(t);++s<c;){var n=u[s];n&&e(t,n,s,r)}return t})}_e.exports=T},MCLT:function(_e,dt,R){(function(V){var E=Object.getOwnPropertyDescriptors||function(mt){for(var ut=Object.keys(mt),Rt={},Ft=0;Ft<ut.length;Ft++)Rt[ut[Ft]]=Object.getOwnPropertyDescriptor(mt,ut[Ft]);return Rt},T=/%[sdj%]/g;dt.format=function(vt){if(!_(vt)){for(var mt=[],ut=0;ut<arguments.length;ut++)mt.push(u(arguments[ut]));return mt.join(" ")}for(var ut=1,Rt=arguments,Ft=Rt.length,wt=String(vt).replace(T,function(St){if(St==="%%")return"%";if(ut>=Ft)return St;switch(St){case"%s":return String(Rt[ut++]);case"%d":return Number(Rt[ut++]);case"%j":try{return JSON.stringify(Rt[ut++])}catch(At){return"[Circular]"}default:return St}}),Mt=Rt[ut];ut<Ft;Mt=Rt[++ut])b(Mt)||!S(Mt)?wt+=" "+Mt:wt+=" "+u(Mt);return wt},dt.deprecate=function(vt,mt){if(typeof V!="undefined"&&V.noDeprecation===!0)return vt;if(typeof V=="undefined")return function(){return dt.deprecate(vt,mt).apply(this,arguments)};var ut=!1;function Rt(){if(!ut){if(V.throwDeprecation)throw new Error(mt);V.traceDeprecation?console.trace(mt):console.error(mt),ut=!0}return vt.apply(this,arguments)}return Rt};var e={},t;dt.debuglog=function(vt){if(x(t)&&(t=Object({NODE_ENV:"production"}).NODE_DEBUG||""),vt=vt.toUpperCase(),!e[vt])if(new RegExp("\\b"+vt+"\\b","i").test(t)){var mt=V.pid;e[vt]=function(){var ut=dt.format.apply(dt,arguments);console.error("%s %d: %s",vt,mt,ut)}}else e[vt]=function(){};return e[vt]};function u(vt,mt){var ut={seen:[],stylize:c};return arguments.length>=3&&(ut.depth=arguments[2]),arguments.length>=4&&(ut.colors=arguments[3]),v(mt)?ut.showHidden=mt:mt&&dt._extend(ut,mt),x(ut.showHidden)&&(ut.showHidden=!1),x(ut.depth)&&(ut.depth=2),x(ut.colors)&&(ut.colors=!1),x(ut.customInspect)&&(ut.customInspect=!0),ut.colors&&(ut.stylize=s),h(ut,vt,ut.depth)}dt.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function s(vt,mt){var ut=u.styles[mt];return ut?"["+u.colors[ut][0]+"m"+vt+"["+u.colors[ut][1]+"m":vt}function c(vt,mt){return vt}function r(vt){var mt={};return vt.forEach(function(ut,Rt){mt[ut]=!0}),mt}function h(vt,mt,ut){if(vt.customInspect&&mt&&O(mt.inspect)&&mt.inspect!==dt.inspect&&!(mt.constructor&&mt.constructor.prototype===mt)){var Rt=mt.inspect(ut,vt);return _(Rt)||(Rt=h(vt,Rt,ut)),Rt}var Ft=n(vt,mt);if(Ft)return Ft;var wt=Object.keys(mt),Mt=r(wt);if(vt.showHidden&&(wt=Object.getOwnPropertyNames(mt)),A(mt)&&(wt.indexOf("message")>=0||wt.indexOf("description")>=0))return i(mt);if(wt.length===0){if(O(mt)){var St=mt.name?": "+mt.name:"";return vt.stylize("[Function"+St+"]","special")}if(y(mt))return vt.stylize(RegExp.prototype.toString.call(mt),"regexp");if(P(mt))return vt.stylize(Date.prototype.toString.call(mt),"date");if(A(mt))return i(mt)}var At="",nt=!1,Pt=["{","}"];if(f(mt)&&(nt=!0,Pt=["[","]"]),O(mt)){var z=mt.name?": "+mt.name:"";At=" [Function"+z+"]"}if(y(mt)&&(At=" "+RegExp.prototype.toString.call(mt)),P(mt)&&(At=" "+Date.prototype.toUTCString.call(mt)),A(mt)&&(At=" "+i(mt)),wt.length===0&&(!nt||mt.length==0))return Pt[0]+At+Pt[1];if(ut<0)return y(mt)?vt.stylize(RegExp.prototype.toString.call(mt),"regexp"):vt.stylize("[Object]","special");vt.seen.push(mt);var q;return nt?q=a(vt,mt,ut,Mt,wt):q=wt.map(function(gt){return o(vt,mt,ut,Mt,gt,nt)}),vt.seen.pop(),l(q,At,Pt)}function n(vt,mt){if(x(mt))return vt.stylize("undefined","undefined");if(_(mt)){var ut="'"+JSON.stringify(mt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return vt.stylize(ut,"string")}if(m(mt))return vt.stylize(""+mt,"number");if(v(mt))return vt.stylize(""+mt,"boolean");if(b(mt))return vt.stylize("null","null")}function i(vt){return"["+Error.prototype.toString.call(vt)+"]"}function a(vt,mt,ut,Rt,Ft){for(var wt=[],Mt=0,St=mt.length;Mt<St;++Mt)U(mt,String(Mt))?wt.push(o(vt,mt,ut,Rt,String(Mt),!0)):wt.push("");return Ft.forEach(function(At){At.match(/^\d+$/)||wt.push(o(vt,mt,ut,Rt,At,!0))}),wt}function o(vt,mt,ut,Rt,Ft,wt){var Mt,St,At;if(At=Object.getOwnPropertyDescriptor(mt,Ft)||{value:mt[Ft]},At.get?At.set?St=vt.stylize("[Getter/Setter]","special"):St=vt.stylize("[Getter]","special"):At.set&&(St=vt.stylize("[Setter]","special")),U(Rt,Ft)||(Mt="["+Ft+"]"),St||(vt.seen.indexOf(At.value)<0?(b(ut)?St=h(vt,At.value,null):St=h(vt,At.value,ut-1),St.indexOf(`
`)>-1&&(wt?St=St.split(`
`).map(function(nt){return"  "+nt}).join(`
`).substr(2):St=`
`+St.split(`
`).map(function(nt){return"   "+nt}).join(`
`))):St=vt.stylize("[Circular]","special")),x(Mt)){if(wt&&Ft.match(/^\d+$/))return St;Mt=JSON.stringify(""+Ft),Mt.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Mt=Mt.substr(1,Mt.length-2),Mt=vt.stylize(Mt,"name")):(Mt=Mt.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Mt=vt.stylize(Mt,"string"))}return Mt+": "+St}function l(vt,mt,ut){var Rt=0,Ft=vt.reduce(function(wt,Mt){return Rt++,Mt.indexOf(`
`)>=0&&Rt++,wt+Mt.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Ft>60?ut[0]+(mt===""?"":mt+`
 `)+" "+vt.join(`,
  `)+" "+ut[1]:ut[0]+mt+" "+vt.join(", ")+" "+ut[1]}function f(vt){return Array.isArray(vt)}dt.isArray=f;function v(vt){return typeof vt=="boolean"}dt.isBoolean=v;function b(vt){return vt===null}dt.isNull=b;function g(vt){return vt==null}dt.isNullOrUndefined=g;function m(vt){return typeof vt=="number"}dt.isNumber=m;function _(vt){return typeof vt=="string"}dt.isString=_;function M(vt){return typeof vt=="symbol"}dt.isSymbol=M;function x(vt){return vt===void 0}dt.isUndefined=x;function y(vt){return S(vt)&&H(vt)==="[object RegExp]"}dt.isRegExp=y;function S(vt){return typeof vt=="object"&&vt!==null}dt.isObject=S;function P(vt){return S(vt)&&H(vt)==="[object Date]"}dt.isDate=P;function A(vt){return S(vt)&&(H(vt)==="[object Error]"||vt instanceof Error)}dt.isError=A;function O(vt){return typeof vt=="function"}dt.isFunction=O;function L(vt){return vt===null||typeof vt=="boolean"||typeof vt=="number"||typeof vt=="string"||typeof vt=="symbol"||typeof vt=="undefined"}dt.isPrimitive=L,dt.isBuffer=R("1gqn");function H(vt){return Object.prototype.toString.call(vt)}function F(vt){return vt<10?"0"+vt.toString(10):vt.toString(10)}var K=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function G(){var vt=new Date,mt=[F(vt.getHours()),F(vt.getMinutes()),F(vt.getSeconds())].join(":");return[vt.getDate(),K[vt.getMonth()],mt].join(" ")}dt.log=function(){console.log("%s - %s",G(),dt.format.apply(dt,arguments))},dt.inherits=R("KKCa"),dt._extend=function(vt,mt){if(!mt||!S(mt))return vt;for(var ut=Object.keys(mt),Rt=ut.length;Rt--;)vt[ut[Rt]]=mt[ut[Rt]];return vt};function U(vt,mt){return Object.prototype.hasOwnProperty.call(vt,mt)}var Z=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;dt.promisify=function(mt){if(typeof mt!="function")throw new TypeError('The "original" argument must be of type Function');if(Z&&mt[Z]){var ut=mt[Z];if(typeof ut!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ut,Z,{value:ut,enumerable:!1,writable:!1,configurable:!0}),ut}function ut(){for(var Rt,Ft,wt=new Promise(function(At,nt){Rt=At,Ft=nt}),Mt=[],St=0;St<arguments.length;St++)Mt.push(arguments[St]);Mt.push(function(At,nt){At?Ft(At):Rt(nt)});try{mt.apply(this,Mt)}catch(At){Ft(At)}return wt}return Object.setPrototypeOf(ut,Object.getPrototypeOf(mt)),Z&&Object.defineProperty(ut,Z,{value:ut,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ut,E(mt))},dt.promisify.custom=Z;function J(vt,mt){if(!vt){var ut=new Error("Promise was rejected with a falsy value");ut.reason=vt,vt=ut}return mt(vt)}function rt(vt){if(typeof vt!="function")throw new TypeError('The "original" argument must be of type Function');function mt(){for(var ut=[],Rt=0;Rt<arguments.length;Rt++)ut.push(arguments[Rt]);var Ft=ut.pop();if(typeof Ft!="function")throw new TypeError("The last argument must be of type Function");var wt=this,Mt=function(){return Ft.apply(wt,arguments)};vt.apply(this,ut).then(function(St){V.nextTick(Mt,null,St)},function(St){V.nextTick(J,St,Mt)})}return Object.setPrototypeOf(mt,Object.getPrototypeOf(vt)),Object.defineProperties(mt,E(vt)),mt}dt.callbackify=rt}).call(this,R("Q2Ig"))},MON2:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.STACK_OVERFLOW=dt.CIRCULAR_DEPENDENCY_IN_FACTORY=dt.POST_CONSTRUCT_ERROR=dt.MULTIPLE_POST_CONSTRUCT_METHODS=dt.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=dt.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=dt.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=dt.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=dt.ARGUMENTS_LENGTH_MISMATCH=dt.INVALID_DECORATOR_OPERATION=dt.INVALID_TO_SELF_VALUE=dt.INVALID_FUNCTION_BINDING=dt.INVALID_MIDDLEWARE_RETURN=dt.NO_MORE_SNAPSHOTS_AVAILABLE=dt.INVALID_BINDING_TYPE=dt.NOT_IMPLEMENTED=dt.CIRCULAR_DEPENDENCY=dt.UNDEFINED_INJECT_ANNOTATION=dt.MISSING_INJECT_ANNOTATION=dt.MISSING_INJECTABLE_ANNOTATION=dt.NOT_REGISTERED=dt.CANNOT_UNBIND=dt.AMBIGUOUS_MATCH=dt.KEY_NOT_FOUND=dt.NULL_ARGUMENT=dt.DUPLICATED_METADATA=dt.DUPLICATED_INJECTABLE_DECORATOR=void 0,dt.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",dt.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",dt.NULL_ARGUMENT="NULL argument",dt.KEY_NOT_FOUND="Key Not Found",dt.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",dt.CANNOT_UNBIND="Could not unbind serviceIdentifier:",dt.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",dt.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",dt.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var V=function(u){return"@inject called with undefined this could mean that the class "+u+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};dt.UNDEFINED_INJECT_ANNOTATION=V,dt.CIRCULAR_DEPENDENCY="Circular dependency found:",dt.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",dt.INVALID_BINDING_TYPE="Invalid binding type:",dt.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",dt.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",dt.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",dt.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",dt.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var E=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return"The number of constructor arguments in the derived class "+(u[0]+" must be >= than the number of constructor arguments of its base class.")};dt.ARGUMENTS_LENGTH_MISMATCH=E,dt.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",dt.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",dt.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",dt.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",dt.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var T=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return"@postConstruct error in class "+u[0]+": "+u[1]};dt.POST_CONSTRUCT_ERROR=T;var e=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return"It looks like there is a circular dependency "+("in one of the '"+u[0]+"' bindings. Please investigate bindings with")+("service identifier '"+u[1]+"'.")};dt.CIRCULAR_DEPENDENCY_IN_FACTORY=e,dt.STACK_OVERFLOW="Maximum call stack size exceeded"},MrPd:function(_e,dt,R){var V=R("hypo"),E=R("ljhN"),T=Object.prototype,e=T.hasOwnProperty;function t(u,s,c){var r=u[s];(!(e.call(u,s)&&E(r,c))||c===void 0&&!(s in u))&&V(u,s,c)}_e.exports=t},Nsbk:function(_e,dt){function R(V){return _e.exports=R=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},_e.exports.default=_e.exports,_e.exports.__esModule=!0,R(V)}_e.exports=R,_e.exports.default=_e.exports,_e.exports.__esModule=!0},O0oS:function(_e,dt,R){var V=R("Cwc5"),E=function(){try{var T=V(Object,"defineProperty");return T({},"",{}),T}catch(e){}}();_e.exports=E},O1je:function(_e,dt){},OBhP:function(_e,dt,R){var V=R("fmRc"),E=R("gFfm"),T=R("MrPd"),e=R("WwFo"),t=R("Dw+G"),u=R("5Tg0"),s=R("Q1l4"),c=R("VOtZ"),r=R("EEGq"),h=R("qZTm"),n=R("G6z8"),i=R("QqLw"),a=R("yHx3"),o=R("wrZu"),l=R("+iFO"),f=R("Z0cm"),v=R("DSRE"),b=R("zEVN"),g=R("GoyQ"),m=R("1+5i"),_=R("7GkX"),M=R("mTTR"),x=1,y=2,S=4,P="[object Arguments]",A="[object Array]",O="[object Boolean]",L="[object Date]",H="[object Error]",F="[object Function]",K="[object GeneratorFunction]",G="[object Map]",U="[object Number]",Z="[object Object]",J="[object RegExp]",rt="[object Set]",vt="[object String]",mt="[object Symbol]",ut="[object WeakMap]",Rt="[object ArrayBuffer]",Ft="[object DataView]",wt="[object Float32Array]",Mt="[object Float64Array]",St="[object Int8Array]",At="[object Int16Array]",nt="[object Int32Array]",Pt="[object Uint8Array]",z="[object Uint8ClampedArray]",q="[object Uint16Array]",gt="[object Uint32Array]",et={};et[P]=et[A]=et[Rt]=et[Ft]=et[O]=et[L]=et[wt]=et[Mt]=et[St]=et[At]=et[nt]=et[G]=et[U]=et[Z]=et[J]=et[rt]=et[vt]=et[mt]=et[Pt]=et[z]=et[q]=et[gt]=!0,et[H]=et[F]=et[ut]=!1;function at(xt,k,ot,it,$,_t){var yt,Nt=k&x,$t=k&y,ee=k&S;if(ot&&(yt=$?ot(xt,it,$,_t):ot(xt)),yt!==void 0)return yt;if(!g(xt))return xt;var Gt=f(xt);if(Gt){if(yt=a(xt),!Nt)return s(xt,yt)}else{var Ht=i(xt),ae=Ht==F||Ht==K;if(v(xt))return u(xt,Nt);if(Ht==Z||Ht==P||ae&&!$){if(yt=$t||ae?{}:l(xt),!Nt)return $t?r(xt,t(yt,xt)):c(xt,e(yt,xt))}else{if(!et[Ht])return $?xt:{};yt=o(xt,Ht,Nt)}}_t||(_t=new V);var le=_t.get(xt);if(le)return le;_t.set(xt,yt),m(xt)?xt.forEach(function(We){yt.add(at(We,k,ot,We,xt,_t))}):b(xt)&&xt.forEach(function(We,Ye){yt.set(Ye,at(We,k,ot,Ye,xt,_t))});var Be=ee?$t?n:h:$t?M:_,Ce=Gt?void 0:Be(xt);return E(Ce||xt,function(We,Ye){Ce&&(Ye=We,We=xt[Ye]),T(yt,Ye,at(We,k,ot,Ye,xt,_t))}),yt}_e.exports=at},PArb:function(_e,dt,R){"use strict";var V=R("wx14"),E=R("rePB"),T=R("q1tI"),e=R.n(T),t=R("TSYQ"),u=R.n(t),s=R("H84U"),c=function(h,n){var i={};for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&n.indexOf(a)<0&&(i[a]=h[a]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(h);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(h,a[o])&&(i[a[o]]=h[a[o]]);return i},r=function(n){return T.createElement(s.a,null,function(i){var a,o=i.getPrefixCls,l=i.direction,f=n.prefixCls,v=n.type,b=v===void 0?"horizontal":v,g=n.orientation,m=g===void 0?"center":g,_=n.className,M=n.children,x=n.dashed,y=n.plain,S=c(n,["prefixCls","type","orientation","className","children","dashed","plain"]),P=o("divider",f),A=m.length>0?"-".concat(m):m,O=!!M,L=u()(P,"".concat(P,"-").concat(b),(a={},Object(E.a)(a,"".concat(P,"-with-text"),O),Object(E.a)(a,"".concat(P,"-with-text").concat(A),O),Object(E.a)(a,"".concat(P,"-dashed"),!!x),Object(E.a)(a,"".concat(P,"-plain"),!!y),Object(E.a)(a,"".concat(P,"-rtl"),l==="rtl"),a),_);return T.createElement("div",Object(V.a)({className:L},S,{role:"separator"}),M&&T.createElement("span",{className:"".concat(P,"-inner-text")},M))})};dt.a=r},PJYZ:function(_e,dt){function R(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}_e.exports=R,_e.exports.default=_e.exports,_e.exports.__esModule=!0},PSsN:function(_e,dt){},PUg6:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return V});var V;(function(E){E.normal="normal",E.additive="additive",E.subtractive="subtractive",E.min="min",E.max="max",E.none="none"})(V||(V={}))},Q1l4:function(_e,dt){function R(V,E){var T=-1,e=V.length;for(E||(E=Array(e));++T<e;)E[T]=V[T];return E}_e.exports=R},QGbF:function(_e,dt){},"QQZ/":function(_e,dt,R){var V=R("Sq3C"),E=R("Z1HP"),T=R("Sxd8"),e=R("dt0z");function t(u,s,c){u=e(u),s=T(s);var r=s?E(u):0;return s&&r<s?V(s-r,c)+u:u}_e.exports=t},QcOe:function(_e,dt,R){var V=R("GoyQ"),E=R("6sVZ"),T=R("7Ix3"),e=Object.prototype,t=e.hasOwnProperty;function u(s){if(!V(s))return T(s);var c=E(s),r=[];for(var h in s)h=="constructor"&&(c||!t.call(s,h))||r.push(h);return r}_e.exports=u},QkVN:function(_e,dt,R){var V=R("+Qka"),E=R("LsHQ"),T=E(function(e,t,u){V(e,t,u)});_e.exports=T},"R/W3":function(_e,dt,R){var V=R("KwMD"),E=R("2ajD"),T=R("CZoQ");function e(t,u,s){return u===u?T(t,u,s):V(t,E,s)}_e.exports=e},RIqP:function(_e,dt,R){var V=R("Ijbi"),E=R("EbDI"),T=R("ZhPi"),e=R("Bnag");function t(u){return V(u)||E(u)||T(u)||e()}_e.exports=t,_e.exports.default=_e.exports,_e.exports.__esModule=!0},"RL2/":function(_e,dt,R){"use strict";var V="2.3.9"},RMtq:function(_e,dt){},"RR/i":function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.typeConstraint=dt.namedConstraint=dt.taggedConstraint=dt.traverseAncerstors=void 0;var V=R("xfSm"),E=R("GXnB"),T=function s(c,r){var h=c.parentRequest;return h!==null?r(h)?!0:s(h,r):!1};dt.traverseAncerstors=T;var e=function(c){return function(r){var h=function(i){return i!==null&&i.target!==null&&i.target.matchesTag(c)(r)};return h.metaData=new E.Metadata(c,r),h}};dt.taggedConstraint=e;var t=e(V.NAMED_TAG);dt.namedConstraint=t;var u=function(c){return function(r){var h=null;if(r!==null)if(h=r.bindings[0],typeof c=="string"){var n=h.serviceIdentifier;return n===c}else{var i=r.bindings[0].implementationType;return c===i}return!1}};dt.typeConstraint=u},Sk89:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.postConstruct=void 0;var V=R("MON2"),E=R("xfSm"),T=R("GXnB");function e(){return function(t,u,s){var c=new T.Metadata(E.POST_CONSTRUCT,u);if(Reflect.hasOwnMetadata(E.POST_CONSTRUCT,t.constructor))throw new Error(V.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(E.POST_CONSTRUCT,c,t.constructor)}}dt.postConstruct=e},SksO:function(_e,dt){function R(V,E){return _e.exports=R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_e.exports.default=_e.exports,_e.exports.__esModule=!0,R(V,E)}_e.exports=R,_e.exports.default=_e.exports,_e.exports.__esModule=!0},Sq3C:function(_e,dt,R){var V=R("sKgW"),E=R("zoYe"),T=R("wy8a"),e=R("quyA"),t=R("Z1HP"),u=R("Em2t"),s=Math.ceil;function c(r,h){h=h===void 0?" ":E(h);var n=h.length;if(n<2)return n?V(h,r):h;var i=V(h,s(r/t(h)));return e(h)?T(u(i),0,r).join(""):i.slice(0,r)}_e.exports=c},Sxd8:function(_e,dt,R){var V=R("ZCgT");function E(T){var e=V(T),t=e%1;return e===e?t?e-t:e:0}_e.exports=E},T1AV:function(_e,dt,R){var V=R("t2Dn"),E=R("5Tg0"),T=R("yP5f"),e=R("Q1l4"),t=R("+iFO"),u=R("03A+"),s=R("Z0cm"),c=R("3L66"),r=R("DSRE"),h=R("lSCD"),n=R("GoyQ"),i=R("YO3V"),a=R("c6wG"),o=R("itsj"),l=R("jeLo");function f(v,b,g,m,_,M,x){var y=o(v,g),S=o(b,g),P=x.get(S);if(P){V(v,g,P);return}var A=M?M(y,S,g+"",v,b,x):void 0,O=A===void 0;if(O){var L=s(S),H=!L&&r(S),F=!L&&!H&&a(S);A=S,L||H||F?s(y)?A=y:c(y)?A=e(y):H?(O=!1,A=E(S,!0)):F?(O=!1,A=T(S,!0)):A=[]:i(S)||u(S)?(A=y,u(y)?A=l(y):(!n(y)||h(y))&&(A=t(S))):O=!1}O&&(x.set(S,A),_(A,S,m,M,x),x.delete(S)),V(v,g,A)}_e.exports=f},TKrE:function(_e,dt,R){var V=R("qRkn"),E=R("dt0z"),T=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",u="\\u20d0-\\u20ff",s=e+t+u,c="["+s+"]",r=RegExp(c,"g");function h(n){return n=E(n),n&&n.replace(T,V).replace(r,"")}_e.exports=h},"U+yc":function(_e,dt){function R(V,E,T,e,t){var u={};return Object.keys(e).forEach(function(s){u[s]=e[s]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=T.slice().reverse().reduce(function(s,c){return c(V,E,s)||s},u),t&&u.initializer!==void 0&&(u.value=u.initializer?u.initializer.call(t):void 0,u.initializer=void 0),u.initializer===void 0&&(Object.defineProperty(V,E,u),u=null),u}_e.exports=R,_e.exports.default=_e.exports,_e.exports.__esModule=!0},U1ZX:function(_e,dt){},UB5X:function(_e,dt,R){var V=R("NykK"),E=R("ExA7"),T="[object Number]";function e(t){return typeof t=="number"||E(t)&&V(t)==T}_e.exports=e},Ucsi:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0});var V=Symbol.for("INJECTION");function E(s,c,r,h){function n(){return h&&!Reflect.hasMetadata(V,this,c)&&Reflect.defineMetadata(V,r(),this,c),Reflect.hasMetadata(V,this,c)?Reflect.getMetadata(V,this,c):r()}function i(a){Reflect.defineMetadata(V,a,this,c)}Object.defineProperty(s,c,{configurable:!0,enumerable:!0,get:n,set:i})}function T(s,c){return function(r){return function(h,n){var i=function(){return s.get(r)};E(h,n,i,c)}}}dt.makePropertyInjectDecorator=T;function e(s,c){return function(r,h){return function(n,i){var a=function(){return s.getNamed(r,h)};E(n,i,a,c)}}}dt.makePropertyInjectNamedDecorator=e;function t(s,c){return function(r,h,n){return function(i,a){var o=function(){return s.getTagged(r,h,n)};E(i,a,o,c)}}}dt.makePropertyInjectTaggedDecorator=t;function u(s,c){return function(r){return function(h,n){var i=function(){return s.getAll(r)};E(h,n,i,c)}}}dt.makePropertyMultiInjectDecorator=u},V1cb:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return V});var V;(function(E){E.Hover="hover",E.Click="click",E.Select="select",E.Active="active",E.Drag="drag"})(V||(V={}))},VIsB:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return u});var V=R("Hel2");function E(i,a){var o=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!o){if(Array.isArray(i)||(o=T(i))||a&&i&&typeof i.length=="number"){o&&(i=o);var l=0,f=function(){};return{s:f,n:function(){return l>=i.length?{done:!0}:{done:!1,value:i[l++]}},e:function(_){throw _},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=!0,b=!1,g;return{s:function(){o=o.call(i)},n:function(){var _=o.next();return v=_.done,_},e:function(_){b=!0,g=_},f:function(){try{!v&&o.return!=null&&o.return()}finally{if(b)throw g}}}}function T(i,a){if(!!i){if(typeof i=="string")return e(i,a);var o=Object.prototype.toString.call(i).slice(8,-1);if(o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set")return Array.from(i);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return e(i,a)}}function e(i,a){(a==null||a>i.length)&&(a=i.length);for(var o=0,l=new Array(a);o<a;o++)l[o]=i[o];return l}var t=6378e3;function u(i,a){var o=i.dataArray,l=a.size,f=l===void 0?10:l,v=f/(2*Math.PI*t)*(256<<20)/2,b=s(o,f),g=b.gridHash,m=b.gridOffset,_=n(g,m,a);return{yOffset:v,xOffset:v,radius:v,type:"grid",dataArray:_}}function s(i,a){var o=Infinity,l=-Infinity,f,v=E(i),b;try{for(v.s();!(b=v.n()).done;){var g=b.value;f=g.coordinates[1],Number.isFinite(f)&&(o=f<o?f:o,l=f>l?f:l)}}catch(F){v.e(F)}finally{v.f()}var m=(o+l)/2,_=c(a,m);if(_.xOffset<=0||_.yOffset<=0)return{gridHash:{},gridOffset:_};var M={},x=E(i),y;try{for(x.s();!(y=x.n()).done;){var S=y.value,P=S.coordinates[1],A=S.coordinates[0];if(Number.isFinite(P)&&Number.isFinite(A)){var O=Math.floor((P+90)/_.yOffset),L=Math.floor((A+180)/_.xOffset),H="".concat(O,"-").concat(L);M[H]=M[H]||{count:0,points:[]},M[H].count+=1,M[H].points.push(S)}}}catch(F){x.e(F)}finally{x.f()}return{gridHash:M,gridOffset:_}}function c(i,a){var o=r(i),l=h(a,i);return{yOffset:o,xOffset:l}}function r(i){return i/t*(180/Math.PI)}function h(i,a){return a/t*(180/Math.PI)/Math.cos(i*Math.PI/180)}function n(i,a,o){return Object.keys(i).reduce(function(l,f,v){var b=f.split("-"),g=parseInt(b[0],10),m=parseInt(b[1],10),_={};if(o.field&&o.method){var M=V.c.getColumn(i[f].points,o.field);_[o.method]=V.c.statMap[o.method](M)}return Object.assign(_,{_id:v,coordinates:Object(V.d)([-180+a.xOffset*(m+.5),-90+a.yOffset*(g+.5)]),rawData:i[f].points,count:i[f].count}),l.push(_),l},[])}},VOtZ:function(_e,dt,R){var V=R("juv8"),E=R("MvSz");function T(e,t){return V(e,E(e),t)}_e.exports=T},VmRL:function(_e,dt,R){"use strict";_e.exports=V,_e.exports.default=V;function V(G,U,Z){Z=Z||2;var J=U&&U.length,rt=J?U[0]*Z:G.length,vt=E(G,0,rt,Z,!0),mt=[];if(!vt||vt.next===vt.prev)return mt;var ut,Rt,Ft,wt,Mt,St,At;if(J&&(vt=r(G,U,vt,Z)),G.length>80*Z){ut=Ft=G[0],Rt=wt=G[1];for(var nt=Z;nt<rt;nt+=Z)Mt=G[nt],St=G[nt+1],Mt<ut&&(ut=Mt),St<Rt&&(Rt=St),Mt>Ft&&(Ft=Mt),St>wt&&(wt=St);At=Math.max(Ft-ut,wt-Rt),At=At!==0?1/At:0}return e(vt,mt,Z,ut,Rt,At),mt}function E(G,U,Z,J,rt){var vt,mt;if(rt===K(G,U,Z,J)>0)for(vt=U;vt<Z;vt+=J)mt=L(vt,G[vt],G[vt+1],mt);else for(vt=Z-J;vt>=U;vt-=J)mt=L(vt,G[vt],G[vt+1],mt);return mt&&_(mt,mt.next)&&(H(mt),mt=mt.next),mt}function T(G,U){if(!G)return G;U||(U=G);var Z=G,J;do if(J=!1,!Z.steiner&&(_(Z,Z.next)||m(Z.prev,Z,Z.next)===0)){if(H(Z),Z=U=Z.prev,Z===Z.next)break;J=!0}else Z=Z.next;while(J||Z!==U);return U}function e(G,U,Z,J,rt,vt,mt){if(!!G){!mt&&vt&&o(G,J,rt,vt);for(var ut=G,Rt,Ft;G.prev!==G.next;){if(Rt=G.prev,Ft=G.next,vt?u(G,J,rt,vt):t(G)){U.push(Rt.i/Z),U.push(G.i/Z),U.push(Ft.i/Z),H(G),G=Ft.next,ut=Ft.next;continue}if(G=Ft,G===ut){mt?mt===1?(G=s(T(G),U,Z),e(G,U,Z,J,rt,vt,2)):mt===2&&c(G,U,Z,J,rt,vt):e(T(G),U,Z,J,rt,vt,1);break}}}}function t(G){var U=G.prev,Z=G,J=G.next;if(m(U,Z,J)>=0)return!1;for(var rt=G.next.next;rt!==G.prev;){if(b(U.x,U.y,Z.x,Z.y,J.x,J.y,rt.x,rt.y)&&m(rt.prev,rt,rt.next)>=0)return!1;rt=rt.next}return!0}function u(G,U,Z,J){var rt=G.prev,vt=G,mt=G.next;if(m(rt,vt,mt)>=0)return!1;for(var ut=rt.x<vt.x?rt.x<mt.x?rt.x:mt.x:vt.x<mt.x?vt.x:mt.x,Rt=rt.y<vt.y?rt.y<mt.y?rt.y:mt.y:vt.y<mt.y?vt.y:mt.y,Ft=rt.x>vt.x?rt.x>mt.x?rt.x:mt.x:vt.x>mt.x?vt.x:mt.x,wt=rt.y>vt.y?rt.y>mt.y?rt.y:mt.y:vt.y>mt.y?vt.y:mt.y,Mt=f(ut,Rt,U,Z,J),St=f(Ft,wt,U,Z,J),At=G.prevZ,nt=G.nextZ;At&&At.z>=Mt&&nt&&nt.z<=St;){if(At!==G.prev&&At!==G.next&&b(rt.x,rt.y,vt.x,vt.y,mt.x,mt.y,At.x,At.y)&&m(At.prev,At,At.next)>=0||(At=At.prevZ,nt!==G.prev&&nt!==G.next&&b(rt.x,rt.y,vt.x,vt.y,mt.x,mt.y,nt.x,nt.y)&&m(nt.prev,nt,nt.next)>=0))return!1;nt=nt.nextZ}for(;At&&At.z>=Mt;){if(At!==G.prev&&At!==G.next&&b(rt.x,rt.y,vt.x,vt.y,mt.x,mt.y,At.x,At.y)&&m(At.prev,At,At.next)>=0)return!1;At=At.prevZ}for(;nt&&nt.z<=St;){if(nt!==G.prev&&nt!==G.next&&b(rt.x,rt.y,vt.x,vt.y,mt.x,mt.y,nt.x,nt.y)&&m(nt.prev,nt,nt.next)>=0)return!1;nt=nt.nextZ}return!0}function s(G,U,Z){var J=G;do{var rt=J.prev,vt=J.next.next;!_(rt,vt)&&M(rt,J,J.next,vt)&&P(rt,vt)&&P(vt,rt)&&(U.push(rt.i/Z),U.push(J.i/Z),U.push(vt.i/Z),H(J),H(J.next),J=G=vt),J=J.next}while(J!==G);return T(J)}function c(G,U,Z,J,rt,vt){var mt=G;do{for(var ut=mt.next.next;ut!==mt.prev;){if(mt.i!==ut.i&&g(mt,ut)){var Rt=O(mt,ut);mt=T(mt,mt.next),Rt=T(Rt,Rt.next),e(mt,U,Z,J,rt,vt),e(Rt,U,Z,J,rt,vt);return}ut=ut.next}mt=mt.next}while(mt!==G)}function r(G,U,Z,J){var rt=[],vt,mt,ut,Rt,Ft;for(vt=0,mt=U.length;vt<mt;vt++)ut=U[vt]*J,Rt=vt<mt-1?U[vt+1]*J:G.length,Ft=E(G,ut,Rt,J,!1),Ft===Ft.next&&(Ft.steiner=!0),rt.push(v(Ft));for(rt.sort(h),vt=0;vt<rt.length;vt++)n(rt[vt],Z),Z=T(Z,Z.next);return Z}function h(G,U){return G.x-U.x}function n(G,U){if(U=i(G,U),U){var Z=O(U,G);T(U,U.next),T(Z,Z.next)}}function i(G,U){var Z=U,J=G.x,rt=G.y,vt=-Infinity,mt;do{if(rt<=Z.y&&rt>=Z.next.y&&Z.next.y!==Z.y){var ut=Z.x+(rt-Z.y)*(Z.next.x-Z.x)/(Z.next.y-Z.y);if(ut<=J&&ut>vt){if(vt=ut,ut===J){if(rt===Z.y)return Z;if(rt===Z.next.y)return Z.next}mt=Z.x<Z.next.x?Z:Z.next}}Z=Z.next}while(Z!==U);if(!mt)return null;if(J===vt)return mt;var Rt=mt,Ft=mt.x,wt=mt.y,Mt=Infinity,St;Z=mt;do J>=Z.x&&Z.x>=Ft&&J!==Z.x&&b(rt<wt?J:vt,rt,Ft,wt,rt<wt?vt:J,rt,Z.x,Z.y)&&(St=Math.abs(rt-Z.y)/(J-Z.x),P(Z,G)&&(St<Mt||St===Mt&&(Z.x>mt.x||Z.x===mt.x&&a(mt,Z)))&&(mt=Z,Mt=St)),Z=Z.next;while(Z!==Rt);return mt}function a(G,U){return m(G.prev,G,U.prev)<0&&m(U.next,G,G.next)<0}function o(G,U,Z,J){var rt=G;do rt.z===null&&(rt.z=f(rt.x,rt.y,U,Z,J)),rt.prevZ=rt.prev,rt.nextZ=rt.next,rt=rt.next;while(rt!==G);rt.prevZ.nextZ=null,rt.prevZ=null,l(rt)}function l(G){var U,Z,J,rt,vt,mt,ut,Rt,Ft=1;do{for(Z=G,G=null,vt=null,mt=0;Z;){for(mt++,J=Z,ut=0,U=0;U<Ft&&(ut++,J=J.nextZ,!!J);U++);for(Rt=Ft;ut>0||Rt>0&&J;)ut!==0&&(Rt===0||!J||Z.z<=J.z)?(rt=Z,Z=Z.nextZ,ut--):(rt=J,J=J.nextZ,Rt--),vt?vt.nextZ=rt:G=rt,rt.prevZ=vt,vt=rt;Z=J}vt.nextZ=null,Ft*=2}while(mt>1);return G}function f(G,U,Z,J,rt){return G=32767*(G-Z)*rt,U=32767*(U-J)*rt,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,G|U<<1}function v(G){var U=G,Z=G;do(U.x<Z.x||U.x===Z.x&&U.y<Z.y)&&(Z=U),U=U.next;while(U!==G);return Z}function b(G,U,Z,J,rt,vt,mt,ut){return(rt-mt)*(U-ut)-(G-mt)*(vt-ut)>=0&&(G-mt)*(J-ut)-(Z-mt)*(U-ut)>=0&&(Z-mt)*(vt-ut)-(rt-mt)*(J-ut)>=0}function g(G,U){return G.next.i!==U.i&&G.prev.i!==U.i&&!S(G,U)&&(P(G,U)&&P(U,G)&&A(G,U)&&(m(G.prev,G,U.prev)||m(G,U.prev,U))||_(G,U)&&m(G.prev,G,G.next)>0&&m(U.prev,U,U.next)>0)}function m(G,U,Z){return(U.y-G.y)*(Z.x-U.x)-(U.x-G.x)*(Z.y-U.y)}function _(G,U){return G.x===U.x&&G.y===U.y}function M(G,U,Z,J){var rt=y(m(G,U,Z)),vt=y(m(G,U,J)),mt=y(m(Z,J,G)),ut=y(m(Z,J,U));return!!(rt!==vt&&mt!==ut||rt===0&&x(G,Z,U)||vt===0&&x(G,J,U)||mt===0&&x(Z,G,J)||ut===0&&x(Z,U,J))}function x(G,U,Z){return U.x<=Math.max(G.x,Z.x)&&U.x>=Math.min(G.x,Z.x)&&U.y<=Math.max(G.y,Z.y)&&U.y>=Math.min(G.y,Z.y)}function y(G){return G>0?1:G<0?-1:0}function S(G,U){var Z=G;do{if(Z.i!==G.i&&Z.next.i!==G.i&&Z.i!==U.i&&Z.next.i!==U.i&&M(Z,Z.next,G,U))return!0;Z=Z.next}while(Z!==G);return!1}function P(G,U){return m(G.prev,G,G.next)<0?m(G,U,G.next)>=0&&m(G,G.prev,U)>=0:m(G,U,G.prev)<0||m(G,G.next,U)<0}function A(G,U){var Z=G,J=!1,rt=(G.x+U.x)/2,vt=(G.y+U.y)/2;do Z.y>vt!=Z.next.y>vt&&Z.next.y!==Z.y&&rt<(Z.next.x-Z.x)*(vt-Z.y)/(Z.next.y-Z.y)+Z.x&&(J=!J),Z=Z.next;while(Z!==G);return J}function O(G,U){var Z=new F(G.i,G.x,G.y),J=new F(U.i,U.x,U.y),rt=G.next,vt=U.prev;return G.next=U,U.prev=G,Z.next=rt,rt.prev=Z,J.next=Z,Z.prev=J,vt.next=J,J.prev=vt,J}function L(G,U,Z,J){var rt=new F(G,U,Z);return J?(rt.next=J.next,rt.prev=J,J.next.prev=rt,J.next=rt):(rt.prev=rt,rt.next=rt),rt}function H(G){G.next.prev=G.prev,G.prev.next=G.next,G.prevZ&&(G.prevZ.nextZ=G.nextZ),G.nextZ&&(G.nextZ.prevZ=G.prevZ)}function F(G,U,Z){this.i=G,this.x=U,this.y=Z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}V.deviation=function(G,U,Z,J){var rt=U&&U.length,vt=rt?U[0]*Z:G.length,mt=Math.abs(K(G,0,vt,Z));if(rt)for(var ut=0,Rt=U.length;ut<Rt;ut++){var Ft=U[ut]*Z,wt=ut<Rt-1?U[ut+1]*Z:G.length;mt-=Math.abs(K(G,Ft,wt,Z))}var Mt=0;for(ut=0;ut<J.length;ut+=3){var St=J[ut]*Z,At=J[ut+1]*Z,nt=J[ut+2]*Z;Mt+=Math.abs((G[St]-G[nt])*(G[At+1]-G[St+1])-(G[St]-G[At])*(G[nt+1]-G[St+1]))}return mt===0&&Mt===0?0:Math.abs((Mt-mt)/mt)};function K(G,U,Z,J){for(var rt=0,vt=U,mt=Z-J;vt<Z;vt+=J)rt+=(G[mt]-G[vt])*(G[vt+1]+G[mt+1]),mt=vt;return rt}V.flatten=function(G){for(var U=G[0][0].length,Z={vertices:[],holes:[],dimensions:U},J=0,rt=0;rt<G.length;rt++){for(var vt=0;vt<G[rt].length;vt++)for(var mt=0;mt<U;mt++)Z.vertices.push(G[rt][vt][mt]);rt>0&&(J+=G[rt-1].length,Z.holes.push(J))}return Z}},W8MJ:function(_e,dt){function R(E,T){for(var e=0;e<T.length;e++){var t=T[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(E,t.key,t)}}function V(E,T,e){return T&&R(E.prototype,T),e&&R(E,e),E}_e.exports=V,_e.exports.default=_e.exports,_e.exports.__esModule=!0},WFAs:function(_e,dt){var R=Array.isArray;_e.exports=R},WwFo:function(_e,dt,R){var V=R("juv8"),E=R("7GkX");function T(e,t){return e&&V(t,E(t),e)}_e.exports=T},XYm9:function(_e,dt,R){var V=R("+K+b");function E(T,e){var t=e?V(T.buffer):T.buffer;return new T.constructor(t,T.byteOffset,T.byteLength)}_e.exports=E},"Xt/L":function(_e,dt){function R(V,E,T){for(var e=-1,t=V==null?0:V.length;++e<t;)if(T(E,V[e]))return!0;return!1}_e.exports=R},Y8BV:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return V});function V(E,T){var e=T.callback;return e&&(E.dataArray=E.dataArray.filter(e)),E}},YO3V:function(_e,dt,R){var V=R("NykK"),E=R("LcsW"),T=R("ExA7"),e="[object Object]",t=Function.prototype,u=Object.prototype,s=t.toString,c=u.hasOwnProperty,r=s.call(Object);function h(n){if(!T(n)||V(n)!=e)return!1;var i=E(n);if(i===null)return!0;var a=c.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&s.call(a)==r}_e.exports=h},Yk9n:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.inject=dt.LazyServiceIdentifer=void 0;var V=R("MON2"),E=R("xfSm"),T=R("GXnB"),e=R("Ztfv"),t=function(){function s(c){this._cb=c}return s.prototype.unwrap=function(){return this._cb()},s}();dt.LazyServiceIdentifer=t;function u(s){return function(c,r,h){if(s===void 0)throw new Error(V.UNDEFINED_INJECT_ANNOTATION(c.name));var n=new T.Metadata(E.INJECT_TAG,s);typeof h=="number"?e.tagParameter(c,r,h,n):e.tagProperty(c,r,n)}}dt.inject=u},Z1HP:function(_e,dt,R){var V=R("ycre"),E=R("quyA"),T=R("q4HE");function e(t){return E(t)?T(t):V(t)}_e.exports=e},ZCgT:function(_e,dt,R){var V=R("tLB3"),E=1/0,T=17976931348623157e292;function e(t){if(!t)return t===0?t:0;if(t=V(t),t===E||t===-E){var u=t<0?-1:1;return u*T}return t===t?t:0}_e.exports=e},ZK94:function(_e,dt){_e.exports.RADIUS=6378137,_e.exports.FLATTENING=1/298.257223563,_e.exports.POLAR_RADIUS=63567523142e-4},ZaHm:function(_e,dt,R){"use strict";R.r(dt),R.d(dt,"create",function(){return E}),R.d(dt,"clone",function(){return T}),R.d(dt,"copy",function(){return e}),R.d(dt,"fromValues",function(){return t}),R.d(dt,"set",function(){return u}),R.d(dt,"identity",function(){return s}),R.d(dt,"transpose",function(){return c}),R.d(dt,"invert",function(){return r}),R.d(dt,"adjoint",function(){return h}),R.d(dt,"determinant",function(){return n}),R.d(dt,"multiply",function(){return i}),R.d(dt,"translate",function(){return a}),R.d(dt,"scale",function(){return o}),R.d(dt,"rotate",function(){return l}),R.d(dt,"rotateX",function(){return f}),R.d(dt,"rotateY",function(){return v}),R.d(dt,"rotateZ",function(){return b}),R.d(dt,"fromTranslation",function(){return g}),R.d(dt,"fromScaling",function(){return m}),R.d(dt,"fromRotation",function(){return _}),R.d(dt,"fromXRotation",function(){return M}),R.d(dt,"fromYRotation",function(){return x}),R.d(dt,"fromZRotation",function(){return y}),R.d(dt,"fromRotationTranslation",function(){return S}),R.d(dt,"fromQuat2",function(){return P}),R.d(dt,"getTranslation",function(){return A}),R.d(dt,"getScaling",function(){return O}),R.d(dt,"getRotation",function(){return L}),R.d(dt,"fromRotationTranslationScale",function(){return H}),R.d(dt,"fromRotationTranslationScaleOrigin",function(){return F}),R.d(dt,"fromQuat",function(){return K}),R.d(dt,"frustum",function(){return G}),R.d(dt,"perspective",function(){return U}),R.d(dt,"perspectiveFromFieldOfView",function(){return Z}),R.d(dt,"ortho",function(){return J}),R.d(dt,"lookAt",function(){return rt}),R.d(dt,"targetTo",function(){return vt}),R.d(dt,"str",function(){return mt}),R.d(dt,"frob",function(){return ut}),R.d(dt,"add",function(){return Rt}),R.d(dt,"subtract",function(){return Ft}),R.d(dt,"multiplyScalar",function(){return wt}),R.d(dt,"multiplyScalarAndAdd",function(){return Mt}),R.d(dt,"exactEquals",function(){return St}),R.d(dt,"equals",function(){return At}),R.d(dt,"mul",function(){return nt}),R.d(dt,"sub",function(){return Pt});var V=R("yU0y");function E(){var z=new V.a(16);return V.a!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=0,z[12]=0,z[13]=0,z[14]=0),z[0]=1,z[5]=1,z[10]=1,z[15]=1,z}function T(z){var q=new V.a(16);return q[0]=z[0],q[1]=z[1],q[2]=z[2],q[3]=z[3],q[4]=z[4],q[5]=z[5],q[6]=z[6],q[7]=z[7],q[8]=z[8],q[9]=z[9],q[10]=z[10],q[11]=z[11],q[12]=z[12],q[13]=z[13],q[14]=z[14],q[15]=z[15],q}function e(z,q){return z[0]=q[0],z[1]=q[1],z[2]=q[2],z[3]=q[3],z[4]=q[4],z[5]=q[5],z[6]=q[6],z[7]=q[7],z[8]=q[8],z[9]=q[9],z[10]=q[10],z[11]=q[11],z[12]=q[12],z[13]=q[13],z[14]=q[14],z[15]=q[15],z}function t(z,q,gt,et,at,xt,k,ot,it,$,_t,yt,Nt,$t,ee,Gt){var Ht=new V.a(16);return Ht[0]=z,Ht[1]=q,Ht[2]=gt,Ht[3]=et,Ht[4]=at,Ht[5]=xt,Ht[6]=k,Ht[7]=ot,Ht[8]=it,Ht[9]=$,Ht[10]=_t,Ht[11]=yt,Ht[12]=Nt,Ht[13]=$t,Ht[14]=ee,Ht[15]=Gt,Ht}function u(z,q,gt,et,at,xt,k,ot,it,$,_t,yt,Nt,$t,ee,Gt,Ht){return z[0]=q,z[1]=gt,z[2]=et,z[3]=at,z[4]=xt,z[5]=k,z[6]=ot,z[7]=it,z[8]=$,z[9]=_t,z[10]=yt,z[11]=Nt,z[12]=$t,z[13]=ee,z[14]=Gt,z[15]=Ht,z}function s(z){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function c(z,q){if(z===q){var gt=q[1],et=q[2],at=q[3],xt=q[6],k=q[7],ot=q[11];z[1]=q[4],z[2]=q[8],z[3]=q[12],z[4]=gt,z[6]=q[9],z[7]=q[13],z[8]=et,z[9]=xt,z[11]=q[14],z[12]=at,z[13]=k,z[14]=ot}else z[0]=q[0],z[1]=q[4],z[2]=q[8],z[3]=q[12],z[4]=q[1],z[5]=q[5],z[6]=q[9],z[7]=q[13],z[8]=q[2],z[9]=q[6],z[10]=q[10],z[11]=q[14],z[12]=q[3],z[13]=q[7],z[14]=q[11],z[15]=q[15];return z}function r(z,q){var gt=q[0],et=q[1],at=q[2],xt=q[3],k=q[4],ot=q[5],it=q[6],$=q[7],_t=q[8],yt=q[9],Nt=q[10],$t=q[11],ee=q[12],Gt=q[13],Ht=q[14],ae=q[15],le=gt*ot-et*k,Be=gt*it-at*k,Ce=gt*$-xt*k,We=et*it-at*ot,Ye=et*$-xt*ot,wn=at*$-xt*it,er=_t*Gt-yt*ee,Lr=_t*Ht-Nt*ee,on=_t*ae-$t*ee,en=yt*Ht-Nt*Gt,An=yt*ae-$t*Gt,Bn=Nt*ae-$t*Ht,gr=le*Bn-Be*An+Ce*en+We*on-Ye*Lr+wn*er;return gr?(gr=1/gr,z[0]=(ot*Bn-it*An+$*en)*gr,z[1]=(at*An-et*Bn-xt*en)*gr,z[2]=(Gt*wn-Ht*Ye+ae*We)*gr,z[3]=(Nt*Ye-yt*wn-$t*We)*gr,z[4]=(it*on-k*Bn-$*Lr)*gr,z[5]=(gt*Bn-at*on+xt*Lr)*gr,z[6]=(Ht*Ce-ee*wn-ae*Be)*gr,z[7]=(_t*wn-Nt*Ce+$t*Be)*gr,z[8]=(k*An-ot*on+$*er)*gr,z[9]=(et*on-gt*An-xt*er)*gr,z[10]=(ee*Ye-Gt*Ce+ae*le)*gr,z[11]=(yt*Ce-_t*Ye-$t*le)*gr,z[12]=(ot*Lr-k*en-it*er)*gr,z[13]=(gt*en-et*Lr+at*er)*gr,z[14]=(Gt*Be-ee*We-Ht*le)*gr,z[15]=(_t*We-yt*Be+Nt*le)*gr,z):null}function h(z,q){var gt=q[0],et=q[1],at=q[2],xt=q[3],k=q[4],ot=q[5],it=q[6],$=q[7],_t=q[8],yt=q[9],Nt=q[10],$t=q[11],ee=q[12],Gt=q[13],Ht=q[14],ae=q[15];return z[0]=ot*(Nt*ae-$t*Ht)-yt*(it*ae-$*Ht)+Gt*(it*$t-$*Nt),z[1]=-(et*(Nt*ae-$t*Ht)-yt*(at*ae-xt*Ht)+Gt*(at*$t-xt*Nt)),z[2]=et*(it*ae-$*Ht)-ot*(at*ae-xt*Ht)+Gt*(at*$-xt*it),z[3]=-(et*(it*$t-$*Nt)-ot*(at*$t-xt*Nt)+yt*(at*$-xt*it)),z[4]=-(k*(Nt*ae-$t*Ht)-_t*(it*ae-$*Ht)+ee*(it*$t-$*Nt)),z[5]=gt*(Nt*ae-$t*Ht)-_t*(at*ae-xt*Ht)+ee*(at*$t-xt*Nt),z[6]=-(gt*(it*ae-$*Ht)-k*(at*ae-xt*Ht)+ee*(at*$-xt*it)),z[7]=gt*(it*$t-$*Nt)-k*(at*$t-xt*Nt)+_t*(at*$-xt*it),z[8]=k*(yt*ae-$t*Gt)-_t*(ot*ae-$*Gt)+ee*(ot*$t-$*yt),z[9]=-(gt*(yt*ae-$t*Gt)-_t*(et*ae-xt*Gt)+ee*(et*$t-xt*yt)),z[10]=gt*(ot*ae-$*Gt)-k*(et*ae-xt*Gt)+ee*(et*$-xt*ot),z[11]=-(gt*(ot*$t-$*yt)-k*(et*$t-xt*yt)+_t*(et*$-xt*ot)),z[12]=-(k*(yt*Ht-Nt*Gt)-_t*(ot*Ht-it*Gt)+ee*(ot*Nt-it*yt)),z[13]=gt*(yt*Ht-Nt*Gt)-_t*(et*Ht-at*Gt)+ee*(et*Nt-at*yt),z[14]=-(gt*(ot*Ht-it*Gt)-k*(et*Ht-at*Gt)+ee*(et*it-at*ot)),z[15]=gt*(ot*Nt-it*yt)-k*(et*Nt-at*yt)+_t*(et*it-at*ot),z}function n(z){var q=z[0],gt=z[1],et=z[2],at=z[3],xt=z[4],k=z[5],ot=z[6],it=z[7],$=z[8],_t=z[9],yt=z[10],Nt=z[11],$t=z[12],ee=z[13],Gt=z[14],Ht=z[15],ae=q*k-gt*xt,le=q*ot-et*xt,Be=q*it-at*xt,Ce=gt*ot-et*k,We=gt*it-at*k,Ye=et*it-at*ot,wn=$*ee-_t*$t,er=$*Gt-yt*$t,Lr=$*Ht-Nt*$t,on=_t*Gt-yt*ee,en=_t*Ht-Nt*ee,An=yt*Ht-Nt*Gt;return ae*An-le*en+Be*on+Ce*Lr-We*er+Ye*wn}function i(z,q,gt){var et=q[0],at=q[1],xt=q[2],k=q[3],ot=q[4],it=q[5],$=q[6],_t=q[7],yt=q[8],Nt=q[9],$t=q[10],ee=q[11],Gt=q[12],Ht=q[13],ae=q[14],le=q[15],Be=gt[0],Ce=gt[1],We=gt[2],Ye=gt[3];return z[0]=Be*et+Ce*ot+We*yt+Ye*Gt,z[1]=Be*at+Ce*it+We*Nt+Ye*Ht,z[2]=Be*xt+Ce*$+We*$t+Ye*ae,z[3]=Be*k+Ce*_t+We*ee+Ye*le,Be=gt[4],Ce=gt[5],We=gt[6],Ye=gt[7],z[4]=Be*et+Ce*ot+We*yt+Ye*Gt,z[5]=Be*at+Ce*it+We*Nt+Ye*Ht,z[6]=Be*xt+Ce*$+We*$t+Ye*ae,z[7]=Be*k+Ce*_t+We*ee+Ye*le,Be=gt[8],Ce=gt[9],We=gt[10],Ye=gt[11],z[8]=Be*et+Ce*ot+We*yt+Ye*Gt,z[9]=Be*at+Ce*it+We*Nt+Ye*Ht,z[10]=Be*xt+Ce*$+We*$t+Ye*ae,z[11]=Be*k+Ce*_t+We*ee+Ye*le,Be=gt[12],Ce=gt[13],We=gt[14],Ye=gt[15],z[12]=Be*et+Ce*ot+We*yt+Ye*Gt,z[13]=Be*at+Ce*it+We*Nt+Ye*Ht,z[14]=Be*xt+Ce*$+We*$t+Ye*ae,z[15]=Be*k+Ce*_t+We*ee+Ye*le,z}function a(z,q,gt){var et=gt[0],at=gt[1],xt=gt[2],k,ot,it,$,_t,yt,Nt,$t,ee,Gt,Ht,ae;return q===z?(z[12]=q[0]*et+q[4]*at+q[8]*xt+q[12],z[13]=q[1]*et+q[5]*at+q[9]*xt+q[13],z[14]=q[2]*et+q[6]*at+q[10]*xt+q[14],z[15]=q[3]*et+q[7]*at+q[11]*xt+q[15]):(k=q[0],ot=q[1],it=q[2],$=q[3],_t=q[4],yt=q[5],Nt=q[6],$t=q[7],ee=q[8],Gt=q[9],Ht=q[10],ae=q[11],z[0]=k,z[1]=ot,z[2]=it,z[3]=$,z[4]=_t,z[5]=yt,z[6]=Nt,z[7]=$t,z[8]=ee,z[9]=Gt,z[10]=Ht,z[11]=ae,z[12]=k*et+_t*at+ee*xt+q[12],z[13]=ot*et+yt*at+Gt*xt+q[13],z[14]=it*et+Nt*at+Ht*xt+q[14],z[15]=$*et+$t*at+ae*xt+q[15]),z}function o(z,q,gt){var et=gt[0],at=gt[1],xt=gt[2];return z[0]=q[0]*et,z[1]=q[1]*et,z[2]=q[2]*et,z[3]=q[3]*et,z[4]=q[4]*at,z[5]=q[5]*at,z[6]=q[6]*at,z[7]=q[7]*at,z[8]=q[8]*xt,z[9]=q[9]*xt,z[10]=q[10]*xt,z[11]=q[11]*xt,z[12]=q[12],z[13]=q[13],z[14]=q[14],z[15]=q[15],z}function l(z,q,gt,et){var at=et[0],xt=et[1],k=et[2],ot=Math.hypot(at,xt,k),it,$,_t,yt,Nt,$t,ee,Gt,Ht,ae,le,Be,Ce,We,Ye,wn,er,Lr,on,en,An,Bn,gr,hi;return ot<V.b?null:(ot=1/ot,at*=ot,xt*=ot,k*=ot,it=Math.sin(gt),$=Math.cos(gt),_t=1-$,yt=q[0],Nt=q[1],$t=q[2],ee=q[3],Gt=q[4],Ht=q[5],ae=q[6],le=q[7],Be=q[8],Ce=q[9],We=q[10],Ye=q[11],wn=at*at*_t+$,er=xt*at*_t+k*it,Lr=k*at*_t-xt*it,on=at*xt*_t-k*it,en=xt*xt*_t+$,An=k*xt*_t+at*it,Bn=at*k*_t+xt*it,gr=xt*k*_t-at*it,hi=k*k*_t+$,z[0]=yt*wn+Gt*er+Be*Lr,z[1]=Nt*wn+Ht*er+Ce*Lr,z[2]=$t*wn+ae*er+We*Lr,z[3]=ee*wn+le*er+Ye*Lr,z[4]=yt*on+Gt*en+Be*An,z[5]=Nt*on+Ht*en+Ce*An,z[6]=$t*on+ae*en+We*An,z[7]=ee*on+le*en+Ye*An,z[8]=yt*Bn+Gt*gr+Be*hi,z[9]=Nt*Bn+Ht*gr+Ce*hi,z[10]=$t*Bn+ae*gr+We*hi,z[11]=ee*Bn+le*gr+Ye*hi,q!==z&&(z[12]=q[12],z[13]=q[13],z[14]=q[14],z[15]=q[15]),z)}function f(z,q,gt){var et=Math.sin(gt),at=Math.cos(gt),xt=q[4],k=q[5],ot=q[6],it=q[7],$=q[8],_t=q[9],yt=q[10],Nt=q[11];return q!==z&&(z[0]=q[0],z[1]=q[1],z[2]=q[2],z[3]=q[3],z[12]=q[12],z[13]=q[13],z[14]=q[14],z[15]=q[15]),z[4]=xt*at+$*et,z[5]=k*at+_t*et,z[6]=ot*at+yt*et,z[7]=it*at+Nt*et,z[8]=$*at-xt*et,z[9]=_t*at-k*et,z[10]=yt*at-ot*et,z[11]=Nt*at-it*et,z}function v(z,q,gt){var et=Math.sin(gt),at=Math.cos(gt),xt=q[0],k=q[1],ot=q[2],it=q[3],$=q[8],_t=q[9],yt=q[10],Nt=q[11];return q!==z&&(z[4]=q[4],z[5]=q[5],z[6]=q[6],z[7]=q[7],z[12]=q[12],z[13]=q[13],z[14]=q[14],z[15]=q[15]),z[0]=xt*at-$*et,z[1]=k*at-_t*et,z[2]=ot*at-yt*et,z[3]=it*at-Nt*et,z[8]=xt*et+$*at,z[9]=k*et+_t*at,z[10]=ot*et+yt*at,z[11]=it*et+Nt*at,z}function b(z,q,gt){var et=Math.sin(gt),at=Math.cos(gt),xt=q[0],k=q[1],ot=q[2],it=q[3],$=q[4],_t=q[5],yt=q[6],Nt=q[7];return q!==z&&(z[8]=q[8],z[9]=q[9],z[10]=q[10],z[11]=q[11],z[12]=q[12],z[13]=q[13],z[14]=q[14],z[15]=q[15]),z[0]=xt*at+$*et,z[1]=k*at+_t*et,z[2]=ot*at+yt*et,z[3]=it*at+Nt*et,z[4]=$*at-xt*et,z[5]=_t*at-k*et,z[6]=yt*at-ot*et,z[7]=Nt*at-it*et,z}function g(z,q){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=q[0],z[13]=q[1],z[14]=q[2],z[15]=1,z}function m(z,q){return z[0]=q[0],z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=q[1],z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=q[2],z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function _(z,q,gt){var et=gt[0],at=gt[1],xt=gt[2],k=Math.hypot(et,at,xt),ot,it,$;return k<V.b?null:(k=1/k,et*=k,at*=k,xt*=k,ot=Math.sin(q),it=Math.cos(q),$=1-it,z[0]=et*et*$+it,z[1]=at*et*$+xt*ot,z[2]=xt*et*$-at*ot,z[3]=0,z[4]=et*at*$-xt*ot,z[5]=at*at*$+it,z[6]=xt*at*$+et*ot,z[7]=0,z[8]=et*xt*$+at*ot,z[9]=at*xt*$-et*ot,z[10]=xt*xt*$+it,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z)}function M(z,q){var gt=Math.sin(q),et=Math.cos(q);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=et,z[6]=gt,z[7]=0,z[8]=0,z[9]=-gt,z[10]=et,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function x(z,q){var gt=Math.sin(q),et=Math.cos(q);return z[0]=et,z[1]=0,z[2]=-gt,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=gt,z[9]=0,z[10]=et,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function y(z,q){var gt=Math.sin(q),et=Math.cos(q);return z[0]=et,z[1]=gt,z[2]=0,z[3]=0,z[4]=-gt,z[5]=et,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function S(z,q,gt){var et=q[0],at=q[1],xt=q[2],k=q[3],ot=et+et,it=at+at,$=xt+xt,_t=et*ot,yt=et*it,Nt=et*$,$t=at*it,ee=at*$,Gt=xt*$,Ht=k*ot,ae=k*it,le=k*$;return z[0]=1-($t+Gt),z[1]=yt+le,z[2]=Nt-ae,z[3]=0,z[4]=yt-le,z[5]=1-(_t+Gt),z[6]=ee+Ht,z[7]=0,z[8]=Nt+ae,z[9]=ee-Ht,z[10]=1-(_t+$t),z[11]=0,z[12]=gt[0],z[13]=gt[1],z[14]=gt[2],z[15]=1,z}function P(z,q){var gt=new V.a(3),et=-q[0],at=-q[1],xt=-q[2],k=q[3],ot=q[4],it=q[5],$=q[6],_t=q[7],yt=et*et+at*at+xt*xt+k*k;return yt>0?(gt[0]=(ot*k+_t*et+it*xt-$*at)*2/yt,gt[1]=(it*k+_t*at+$*et-ot*xt)*2/yt,gt[2]=($*k+_t*xt+ot*at-it*et)*2/yt):(gt[0]=(ot*k+_t*et+it*xt-$*at)*2,gt[1]=(it*k+_t*at+$*et-ot*xt)*2,gt[2]=($*k+_t*xt+ot*at-it*et)*2),S(z,q,gt),z}function A(z,q){return z[0]=q[12],z[1]=q[13],z[2]=q[14],z}function O(z,q){var gt=q[0],et=q[1],at=q[2],xt=q[4],k=q[5],ot=q[6],it=q[8],$=q[9],_t=q[10];return z[0]=Math.hypot(gt,et,at),z[1]=Math.hypot(xt,k,ot),z[2]=Math.hypot(it,$,_t),z}function L(z,q){var gt=new V.a(3);O(gt,q);var et=1/gt[0],at=1/gt[1],xt=1/gt[2],k=q[0]*et,ot=q[1]*at,it=q[2]*xt,$=q[4]*et,_t=q[5]*at,yt=q[6]*xt,Nt=q[8]*et,$t=q[9]*at,ee=q[10]*xt,Gt=k+_t+ee,Ht=0;return Gt>0?(Ht=Math.sqrt(Gt+1)*2,z[3]=.25*Ht,z[0]=(yt-$t)/Ht,z[1]=(Nt-it)/Ht,z[2]=(ot-$)/Ht):k>_t&&k>ee?(Ht=Math.sqrt(1+k-_t-ee)*2,z[3]=(yt-$t)/Ht,z[0]=.25*Ht,z[1]=(ot+$)/Ht,z[2]=(Nt+it)/Ht):_t>ee?(Ht=Math.sqrt(1+_t-k-ee)*2,z[3]=(Nt-it)/Ht,z[0]=(ot+$)/Ht,z[1]=.25*Ht,z[2]=(yt+$t)/Ht):(Ht=Math.sqrt(1+ee-k-_t)*2,z[3]=(ot-$)/Ht,z[0]=(Nt+it)/Ht,z[1]=(yt+$t)/Ht,z[2]=.25*Ht),z}function H(z,q,gt,et){var at=q[0],xt=q[1],k=q[2],ot=q[3],it=at+at,$=xt+xt,_t=k+k,yt=at*it,Nt=at*$,$t=at*_t,ee=xt*$,Gt=xt*_t,Ht=k*_t,ae=ot*it,le=ot*$,Be=ot*_t,Ce=et[0],We=et[1],Ye=et[2];return z[0]=(1-(ee+Ht))*Ce,z[1]=(Nt+Be)*Ce,z[2]=($t-le)*Ce,z[3]=0,z[4]=(Nt-Be)*We,z[5]=(1-(yt+Ht))*We,z[6]=(Gt+ae)*We,z[7]=0,z[8]=($t+le)*Ye,z[9]=(Gt-ae)*Ye,z[10]=(1-(yt+ee))*Ye,z[11]=0,z[12]=gt[0],z[13]=gt[1],z[14]=gt[2],z[15]=1,z}function F(z,q,gt,et,at){var xt=q[0],k=q[1],ot=q[2],it=q[3],$=xt+xt,_t=k+k,yt=ot+ot,Nt=xt*$,$t=xt*_t,ee=xt*yt,Gt=k*_t,Ht=k*yt,ae=ot*yt,le=it*$,Be=it*_t,Ce=it*yt,We=et[0],Ye=et[1],wn=et[2],er=at[0],Lr=at[1],on=at[2],en=(1-(Gt+ae))*We,An=($t+Ce)*We,Bn=(ee-Be)*We,gr=($t-Ce)*Ye,hi=(1-(Nt+ae))*Ye,Ae=(Ht+le)*Ye,Me=(ee+Be)*wn,Qt=(Ht-le)*wn,ge=(1-(Nt+Gt))*wn;return z[0]=en,z[1]=An,z[2]=Bn,z[3]=0,z[4]=gr,z[5]=hi,z[6]=Ae,z[7]=0,z[8]=Me,z[9]=Qt,z[10]=ge,z[11]=0,z[12]=gt[0]+er-(en*er+gr*Lr+Me*on),z[13]=gt[1]+Lr-(An*er+hi*Lr+Qt*on),z[14]=gt[2]+on-(Bn*er+Ae*Lr+ge*on),z[15]=1,z}function K(z,q){var gt=q[0],et=q[1],at=q[2],xt=q[3],k=gt+gt,ot=et+et,it=at+at,$=gt*k,_t=et*k,yt=et*ot,Nt=at*k,$t=at*ot,ee=at*it,Gt=xt*k,Ht=xt*ot,ae=xt*it;return z[0]=1-yt-ee,z[1]=_t+ae,z[2]=Nt-Ht,z[3]=0,z[4]=_t-ae,z[5]=1-$-ee,z[6]=$t+Gt,z[7]=0,z[8]=Nt+Ht,z[9]=$t-Gt,z[10]=1-$-yt,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function G(z,q,gt,et,at,xt,k){var ot=1/(gt-q),it=1/(at-et),$=1/(xt-k);return z[0]=xt*2*ot,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=xt*2*it,z[6]=0,z[7]=0,z[8]=(gt+q)*ot,z[9]=(at+et)*it,z[10]=(k+xt)*$,z[11]=-1,z[12]=0,z[13]=0,z[14]=k*xt*2*$,z[15]=0,z}function U(z,q,gt,et,at){var xt=1/Math.tan(q/2),k;return z[0]=xt/gt,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=xt,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=-1,z[12]=0,z[13]=0,z[15]=0,at!=null&&at!==Infinity?(k=1/(et-at),z[10]=(at+et)*k,z[14]=2*at*et*k):(z[10]=-1,z[14]=-2*et),z}function Z(z,q,gt,et){var at=Math.tan(q.upDegrees*Math.PI/180),xt=Math.tan(q.downDegrees*Math.PI/180),k=Math.tan(q.leftDegrees*Math.PI/180),ot=Math.tan(q.rightDegrees*Math.PI/180),it=2/(k+ot),$=2/(at+xt);return z[0]=it,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=$,z[6]=0,z[7]=0,z[8]=-((k-ot)*it*.5),z[9]=(at-xt)*$*.5,z[10]=et/(gt-et),z[11]=-1,z[12]=0,z[13]=0,z[14]=et*gt/(gt-et),z[15]=0,z}function J(z,q,gt,et,at,xt,k){var ot=1/(q-gt),it=1/(et-at),$=1/(xt-k);return z[0]=-2*ot,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*it,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=2*$,z[11]=0,z[12]=(q+gt)*ot,z[13]=(at+et)*it,z[14]=(k+xt)*$,z[15]=1,z}function rt(z,q,gt,et){var at,xt,k,ot,it,$,_t,yt,Nt,$t,ee=q[0],Gt=q[1],Ht=q[2],ae=et[0],le=et[1],Be=et[2],Ce=gt[0],We=gt[1],Ye=gt[2];return Math.abs(ee-Ce)<V.b&&Math.abs(Gt-We)<V.b&&Math.abs(Ht-Ye)<V.b?s(z):(_t=ee-Ce,yt=Gt-We,Nt=Ht-Ye,$t=1/Math.hypot(_t,yt,Nt),_t*=$t,yt*=$t,Nt*=$t,at=le*Nt-Be*yt,xt=Be*_t-ae*Nt,k=ae*yt-le*_t,$t=Math.hypot(at,xt,k),$t?($t=1/$t,at*=$t,xt*=$t,k*=$t):(at=0,xt=0,k=0),ot=yt*k-Nt*xt,it=Nt*at-_t*k,$=_t*xt-yt*at,$t=Math.hypot(ot,it,$),$t?($t=1/$t,ot*=$t,it*=$t,$*=$t):(ot=0,it=0,$=0),z[0]=at,z[1]=ot,z[2]=_t,z[3]=0,z[4]=xt,z[5]=it,z[6]=yt,z[7]=0,z[8]=k,z[9]=$,z[10]=Nt,z[11]=0,z[12]=-(at*ee+xt*Gt+k*Ht),z[13]=-(ot*ee+it*Gt+$*Ht),z[14]=-(_t*ee+yt*Gt+Nt*Ht),z[15]=1,z)}function vt(z,q,gt,et){var at=q[0],xt=q[1],k=q[2],ot=et[0],it=et[1],$=et[2],_t=at-gt[0],yt=xt-gt[1],Nt=k-gt[2],$t=_t*_t+yt*yt+Nt*Nt;$t>0&&($t=1/Math.sqrt($t),_t*=$t,yt*=$t,Nt*=$t);var ee=it*Nt-$*yt,Gt=$*_t-ot*Nt,Ht=ot*yt-it*_t;return $t=ee*ee+Gt*Gt+Ht*Ht,$t>0&&($t=1/Math.sqrt($t),ee*=$t,Gt*=$t,Ht*=$t),z[0]=ee,z[1]=Gt,z[2]=Ht,z[3]=0,z[4]=yt*Ht-Nt*Gt,z[5]=Nt*ee-_t*Ht,z[6]=_t*Gt-yt*ee,z[7]=0,z[8]=_t,z[9]=yt,z[10]=Nt,z[11]=0,z[12]=at,z[13]=xt,z[14]=k,z[15]=1,z}function mt(z){return"mat4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+", "+z[9]+", "+z[10]+", "+z[11]+", "+z[12]+", "+z[13]+", "+z[14]+", "+z[15]+")"}function ut(z){return Math.hypot(z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7],z[8],z[9],z[10],z[11],z[12],z[13],z[14],z[15])}function Rt(z,q,gt){return z[0]=q[0]+gt[0],z[1]=q[1]+gt[1],z[2]=q[2]+gt[2],z[3]=q[3]+gt[3],z[4]=q[4]+gt[4],z[5]=q[5]+gt[5],z[6]=q[6]+gt[6],z[7]=q[7]+gt[7],z[8]=q[8]+gt[8],z[9]=q[9]+gt[9],z[10]=q[10]+gt[10],z[11]=q[11]+gt[11],z[12]=q[12]+gt[12],z[13]=q[13]+gt[13],z[14]=q[14]+gt[14],z[15]=q[15]+gt[15],z}function Ft(z,q,gt){return z[0]=q[0]-gt[0],z[1]=q[1]-gt[1],z[2]=q[2]-gt[2],z[3]=q[3]-gt[3],z[4]=q[4]-gt[4],z[5]=q[5]-gt[5],z[6]=q[6]-gt[6],z[7]=q[7]-gt[7],z[8]=q[8]-gt[8],z[9]=q[9]-gt[9],z[10]=q[10]-gt[10],z[11]=q[11]-gt[11],z[12]=q[12]-gt[12],z[13]=q[13]-gt[13],z[14]=q[14]-gt[14],z[15]=q[15]-gt[15],z}function wt(z,q,gt){return z[0]=q[0]*gt,z[1]=q[1]*gt,z[2]=q[2]*gt,z[3]=q[3]*gt,z[4]=q[4]*gt,z[5]=q[5]*gt,z[6]=q[6]*gt,z[7]=q[7]*gt,z[8]=q[8]*gt,z[9]=q[9]*gt,z[10]=q[10]*gt,z[11]=q[11]*gt,z[12]=q[12]*gt,z[13]=q[13]*gt,z[14]=q[14]*gt,z[15]=q[15]*gt,z}function Mt(z,q,gt,et){return z[0]=q[0]+gt[0]*et,z[1]=q[1]+gt[1]*et,z[2]=q[2]+gt[2]*et,z[3]=q[3]+gt[3]*et,z[4]=q[4]+gt[4]*et,z[5]=q[5]+gt[5]*et,z[6]=q[6]+gt[6]*et,z[7]=q[7]+gt[7]*et,z[8]=q[8]+gt[8]*et,z[9]=q[9]+gt[9]*et,z[10]=q[10]+gt[10]*et,z[11]=q[11]+gt[11]*et,z[12]=q[12]+gt[12]*et,z[13]=q[13]+gt[13]*et,z[14]=q[14]+gt[14]*et,z[15]=q[15]+gt[15]*et,z}function St(z,q){return z[0]===q[0]&&z[1]===q[1]&&z[2]===q[2]&&z[3]===q[3]&&z[4]===q[4]&&z[5]===q[5]&&z[6]===q[6]&&z[7]===q[7]&&z[8]===q[8]&&z[9]===q[9]&&z[10]===q[10]&&z[11]===q[11]&&z[12]===q[12]&&z[13]===q[13]&&z[14]===q[14]&&z[15]===q[15]}function At(z,q){var gt=z[0],et=z[1],at=z[2],xt=z[3],k=z[4],ot=z[5],it=z[6],$=z[7],_t=z[8],yt=z[9],Nt=z[10],$t=z[11],ee=z[12],Gt=z[13],Ht=z[14],ae=z[15],le=q[0],Be=q[1],Ce=q[2],We=q[3],Ye=q[4],wn=q[5],er=q[6],Lr=q[7],on=q[8],en=q[9],An=q[10],Bn=q[11],gr=q[12],hi=q[13],Ae=q[14],Me=q[15];return Math.abs(gt-le)<=V.b*Math.max(1,Math.abs(gt),Math.abs(le))&&Math.abs(et-Be)<=V.b*Math.max(1,Math.abs(et),Math.abs(Be))&&Math.abs(at-Ce)<=V.b*Math.max(1,Math.abs(at),Math.abs(Ce))&&Math.abs(xt-We)<=V.b*Math.max(1,Math.abs(xt),Math.abs(We))&&Math.abs(k-Ye)<=V.b*Math.max(1,Math.abs(k),Math.abs(Ye))&&Math.abs(ot-wn)<=V.b*Math.max(1,Math.abs(ot),Math.abs(wn))&&Math.abs(it-er)<=V.b*Math.max(1,Math.abs(it),Math.abs(er))&&Math.abs($-Lr)<=V.b*Math.max(1,Math.abs($),Math.abs(Lr))&&Math.abs(_t-on)<=V.b*Math.max(1,Math.abs(_t),Math.abs(on))&&Math.abs(yt-en)<=V.b*Math.max(1,Math.abs(yt),Math.abs(en))&&Math.abs(Nt-An)<=V.b*Math.max(1,Math.abs(Nt),Math.abs(An))&&Math.abs($t-Bn)<=V.b*Math.max(1,Math.abs($t),Math.abs(Bn))&&Math.abs(ee-gr)<=V.b*Math.max(1,Math.abs(ee),Math.abs(gr))&&Math.abs(Gt-hi)<=V.b*Math.max(1,Math.abs(Gt),Math.abs(hi))&&Math.abs(Ht-Ae)<=V.b*Math.max(1,Math.abs(Ht),Math.abs(Ae))&&Math.abs(ae-Me)<=V.b*Math.max(1,Math.abs(ae),Math.abs(Me))}var nt=i,Pt=Ft},ZhIB:function(_e,dt,R){var V,E;/*! @preserve
* numeral.js
* version : 2.0.6
* author : Adam Draper
* license : MIT
* http://adamwdraper.github.com/Numeral-js/
*/(function(T,e){V=e,E=typeof V=="function"?V.call(dt,R,dt,_e):V,E!==void 0&&(_e.exports=E)})(this,function(){var T,e,t="2.0.6",u={},s={},c={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},r={currentLocale:c.currentLocale,zeroFormat:c.zeroFormat,nullFormat:c.nullFormat,defaultFormat:c.defaultFormat,scalePercentBy100:c.scalePercentBy100};function h(n,i){this._input=n,this._value=i}return T=function(i){var a,o,l,f;if(T.isNumeral(i))a=i.value();else if(i===0||typeof i=="undefined")a=0;else if(i===null||e.isNaN(i))a=null;else if(typeof i=="string")if(r.zeroFormat&&i===r.zeroFormat)a=0;else if(r.nullFormat&&i===r.nullFormat||!i.replace(/[^0-9]+/g,"").length)a=null;else{for(o in u)if(f=typeof u[o].regexps.unformat=="function"?u[o].regexps.unformat():u[o].regexps.unformat,f&&i.match(f)){l=u[o].unformat;break}l=l||T._.stringToNumber,a=l(i)}else a=Number(i)||null;return new h(i,a)},T.version=t,T.isNumeral=function(n){return n instanceof h},T._=e={numberToFormat:function(i,a,o){var l=s[T.options.currentLocale],f=!1,v=!1,b=0,g="",m=1e12,_=1e9,M=1e6,x=1e3,y="",S=!1,P,A,O,L,H,F,K,G,U,Z;if(i=i||0,A=Math.abs(i),T._.includes(a,"(")?(f=!0,a=a.replace(/[\(|\)]/g,"")):(T._.includes(a,"+")||T._.includes(a,"-"))&&(G=T._.includes(a,"+")?a.indexOf("+"):i<0?a.indexOf("-"):-1,a=a.replace(/[\+|\-]/g,"")),T._.includes(a,"a")&&(P=a.match(/a(k|m|b|t)?/),P=P?P[1]:!1,T._.includes(a," a")&&(g=" "),a=a.replace(new RegExp(g+"a[kmbt]?"),""),A>=m&&!P||P==="t"?(g+=l.abbreviations.trillion,i=i/m):A<m&&A>=_&&!P||P==="b"?(g+=l.abbreviations.billion,i=i/_):A<_&&A>=M&&!P||P==="m"?(g+=l.abbreviations.million,i=i/M):(A<M&&A>=x&&!P||P==="k")&&(g+=l.abbreviations.thousand,i=i/x)),T._.includes(a,"[.]")&&(v=!0,a=a.replace("[.]",".")),F=i.toString().split(".")[0],K=a.split(".")[1],U=a.indexOf(","),b=(a.split(".")[0].split(",")[0].match(/0/g)||[]).length,K?(T._.includes(K,"[")?(K=K.replace("]",""),K=K.split("["),y=T._.toFixed(i,K[0].length+K[1].length,o,K[1].length)):y=T._.toFixed(i,K.length,o),F=y.split(".")[0],T._.includes(y,".")?y=l.delimiters.decimal+y.split(".")[1]:y="",v&&Number(y.slice(1))===0&&(y="")):F=T._.toFixed(i,0,o),g&&!P&&Number(F)>=1e3&&g!==l.abbreviations.trillion)switch(F=String(Number(F)/1e3),g){case l.abbreviations.thousand:g=l.abbreviations.million;break;case l.abbreviations.million:g=l.abbreviations.billion;break;case l.abbreviations.billion:g=l.abbreviations.trillion;break}if(T._.includes(F,"-")&&(F=F.slice(1),S=!0),F.length<b)for(var J=b-F.length;J>0;J--)F="0"+F;return U>-1&&(F=F.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+l.delimiters.thousands)),a.indexOf(".")===0&&(F=""),Z=F+y+(g||""),f?Z=(f&&S?"(":"")+Z+(f&&S?")":""):G>=0?Z=G===0?(S?"-":"+")+Z:Z+(S?"-":"+"):S&&(Z="-"+Z),Z},stringToNumber:function(i){var a=s[r.currentLocale],o=i,l={thousand:3,million:6,billion:9,trillion:12},f,v,b,g;if(r.zeroFormat&&i===r.zeroFormat)v=0;else if(r.nullFormat&&i===r.nullFormat||!i.replace(/[^0-9]+/g,"").length)v=null;else{v=1,a.delimiters.decimal!=="."&&(i=i.replace(/\./g,"").replace(a.delimiters.decimal,"."));for(f in l)if(g=new RegExp("[^a-zA-Z]"+a.abbreviations[f]+"(?:\\)|(\\"+a.currency.symbol+")?(?:\\))?)?$"),o.match(g)){v*=Math.pow(10,l[f]);break}v*=(i.split("-").length+Math.min(i.split("(").length-1,i.split(")").length-1))%2?1:-1,i=i.replace(/[^0-9\.]+/g,""),v*=Number(i)}return v},isNaN:function(n){function i(a){return n.apply(this,arguments)}return i.toString=function(){return n.toString()},i}(function(n){return typeof n=="number"&&isNaN(n)}),includes:function(i,a){return i.indexOf(a)!==-1},insert:function(i,a,o){return i.slice(0,o)+a+i.slice(o)},reduce:function(i,a){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof a!="function")throw new TypeError(a+" is not a function");var o=Object(i),l=o.length>>>0,f=0,v;if(arguments.length===3)v=arguments[2];else{for(;f<l&&!(f in o);)f++;if(f>=l)throw new TypeError("Reduce of empty array with no initial value");v=o[f++]}for(;f<l;f++)f in o&&(v=a(v,o[f],f,o));return v},multiplier:function(i){var a=i.toString().split(".");return a.length<2?1:Math.pow(10,a[1].length)},correctionFactor:function(){var i=Array.prototype.slice.call(arguments);return i.reduce(function(a,o){var l=e.multiplier(o);return a>l?a:l},1)},toFixed:function(i,a,o,l){var f=i.toString().split("."),v=a-(l||0),b,g,m,_;return f.length===2?b=Math.min(Math.max(f[1].length,v),a):b=v,m=Math.pow(10,b),_=(o(i+"e+"+b)/m).toFixed(b),l>a-b&&(g=new RegExp("\\.?0{1,"+(l-(a-b))+"}$"),_=_.replace(g,"")),_}},T.options=r,T.formats=u,T.locales=s,T.locale=function(n){return n&&(r.currentLocale=n.toLowerCase()),r.currentLocale},T.localeData=function(n){if(!n)return s[r.currentLocale];if(n=n.toLowerCase(),!s[n])throw new Error("Unknown locale : "+n);return s[n]},T.reset=function(){for(var n in c)r[n]=c[n]},T.zeroFormat=function(n){r.zeroFormat=typeof n=="string"?n:null},T.nullFormat=function(n){r.nullFormat=typeof n=="string"?n:null},T.defaultFormat=function(n){r.defaultFormat=typeof n=="string"?n:"0.0"},T.register=function(n,i,a){if(i=i.toLowerCase(),this[n+"s"][i])throw new TypeError(i+" "+n+" already registered.");return this[n+"s"][i]=a,a},T.validate=function(n,i){var a,o,l,f,v,b,g,m;if(typeof n!="string"&&(n+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",n)),n=n.trim(),n.match(/^\d+$/))return!0;if(n==="")return!1;try{g=T.localeData(i)}catch(_){g=T.localeData(T.locale())}return l=g.currency.symbol,v=g.abbreviations,a=g.delimiters.decimal,g.delimiters.thousands==="."?o="\\.":o=g.delimiters.thousands,m=n.match(/^[^\d]+/),m!==null&&(n=n.substr(1),m[0]!==l)||(m=n.match(/[^\d]+$/),m!==null&&(n=n.slice(0,-1),m[0]!==v.thousand&&m[0]!==v.million&&m[0]!==v.billion&&m[0]!==v.trillion))?!1:(b=new RegExp(o+"{2}"),n.match(/[^\d.,]/g)?!1:(f=n.split(a),f.length>2?!1:f.length<2?!!f[0].match(/^\d+.*\d$/)&&!f[0].match(b):f[0].length===1?!!f[0].match(/^\d+$/)&&!f[0].match(b)&&!!f[1].match(/^\d+$/):!!f[0].match(/^\d+.*\d$/)&&!f[0].match(b)&&!!f[1].match(/^\d+$/)))},T.fn=h.prototype={clone:function(){return T(this)},format:function(i,a){var o=this._value,l=i||r.defaultFormat,f,v,b;if(a=a||Math.round,o===0&&r.zeroFormat!==null)v=r.zeroFormat;else if(o===null&&r.nullFormat!==null)v=r.nullFormat;else{for(f in u)if(l.match(u[f].regexps.format)){b=u[f].format;break}b=b||T._.numberToFormat,v=b(o,l,a)}return v},value:function(){return this._value},input:function(){return this._input},set:function(i){return this._value=Number(i),this},add:function(i){var a=e.correctionFactor.call(null,this._value,i);function o(l,f,v,b){return l+Math.round(a*f)}return this._value=e.reduce([this._value,i],o,0)/a,this},subtract:function(i){var a=e.correctionFactor.call(null,this._value,i);function o(l,f,v,b){return l-Math.round(a*f)}return this._value=e.reduce([i],o,Math.round(this._value*a))/a,this},multiply:function(i){function a(o,l,f,v){var b=e.correctionFactor(o,l);return Math.round(o*b)*Math.round(l*b)/Math.round(b*b)}return this._value=e.reduce([this._value,i],a,1),this},divide:function(i){function a(o,l,f,v){var b=e.correctionFactor(o,l);return Math.round(o*b)/Math.round(l*b)}return this._value=e.reduce([this._value,i],a),this},difference:function(i){return Math.abs(T(this._value).subtract(i).value())}},T.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(i){var a=i%10;return~~(i%100/10)==1?"th":a===1?"st":a===2?"nd":a===3?"rd":"th"},currency:{symbol:"$"}}),function(){T.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(i,a,o){var l=T._.includes(a," BPS")?" ":"",f;return i=i*1e4,a=a.replace(/\s?BPS/,""),f=T._.numberToFormat(i,a,o),T._.includes(f,")")?(f=f.split(""),f.splice(-1,0,l+"BPS"),f=f.join("")):f=f+l+"BPS",f},unformat:function(i){return+(T._.stringToNumber(i)*1e-4).toFixed(15)}})}(),function(){var n={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},i={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},a=n.suffixes.concat(i.suffixes.filter(function(l){return n.suffixes.indexOf(l)<0})),o=a.join("|");o="("+o.replace("B","B(?!PS)")+")",T.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(o)},format:function(f,v,b){var g,m=T._.includes(v,"ib")?i:n,_=T._.includes(v," b")||T._.includes(v," ib")?" ":"",M,x,y;for(v=v.replace(/\s?i?b/,""),M=0;M<=m.suffixes.length;M++)if(x=Math.pow(m.base,M),y=Math.pow(m.base,M+1),f===null||f===0||f>=x&&f<y){_+=m.suffixes[M],x>0&&(f=f/x);break}return g=T._.numberToFormat(f,v,b),g+_},unformat:function(f){var v=T._.stringToNumber(f),b,g;if(v){for(b=n.suffixes.length-1;b>=0;b--){if(T._.includes(f,n.suffixes[b])){g=Math.pow(n.base,b);break}if(T._.includes(f,i.suffixes[b])){g=Math.pow(i.base,b);break}}v*=g||1}return v}})}(),function(){T.register("format","currency",{regexps:{format:/(\$)/},format:function(i,a,o){var l=T.locales[T.options.currentLocale],f={before:a.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:a.match(/([\+|\-|\)|\s|\$]*)$/)[0]},v,b,g;for(a=a.replace(/\s?\$\s?/,""),v=T._.numberToFormat(i,a,o),i>=0?(f.before=f.before.replace(/[\-\(]/,""),f.after=f.after.replace(/[\-\)]/,"")):i<0&&!T._.includes(f.before,"-")&&!T._.includes(f.before,"(")&&(f.before="-"+f.before),g=0;g<f.before.length;g++)switch(b=f.before[g],b){case"$":v=T._.insert(v,l.currency.symbol,g);break;case" ":v=T._.insert(v," ",g+l.currency.symbol.length-1);break}for(g=f.after.length-1;g>=0;g--)switch(b=f.after[g],b){case"$":v=g===f.after.length-1?v+l.currency.symbol:T._.insert(v,l.currency.symbol,-(f.after.length-(1+g)));break;case" ":v=g===f.after.length-1?v+" ":T._.insert(v," ",-(f.after.length-(1+g)+l.currency.symbol.length-1));break}return v}})}(),function(){T.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(i,a,o){var l,f=typeof i=="number"&&!T._.isNaN(i)?i.toExponential():"0e+0",v=f.split("e");return a=a.replace(/e[\+|\-]{1}0/,""),l=T._.numberToFormat(Number(v[0]),a,o),l+"e"+v[1]},unformat:function(i){var a=T._.includes(i,"e+")?i.split("e+"):i.split("e-"),o=Number(a[0]),l=Number(a[1]);l=T._.includes(i,"e-")?l*=-1:l;function f(v,b,g,m){var _=T._.correctionFactor(v,b),M=v*_*(b*_)/(_*_);return M}return T._.reduce([o,Math.pow(10,l)],f,1)}})}(),function(){T.register("format","ordinal",{regexps:{format:/(o)/},format:function(i,a,o){var l=T.locales[T.options.currentLocale],f,v=T._.includes(a," o")?" ":"";return a=a.replace(/\s?o/,""),v+=l.ordinal(i),f=T._.numberToFormat(i,a,o),f+v}})}(),function(){T.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(i,a,o){var l=T._.includes(a," %")?" ":"",f;return T.options.scalePercentBy100&&(i=i*100),a=a.replace(/\s?\%/,""),f=T._.numberToFormat(i,a,o),T._.includes(f,")")?(f=f.split(""),f.splice(-1,0,l+"%"),f=f.join("")):f=f+l+"%",f},unformat:function(i){var a=T._.stringToNumber(i);return T.options.scalePercentBy100?a*.01:a}})}(),function(){T.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(i,a,o){var l=Math.floor(i/60/60),f=Math.floor((i-l*60*60)/60),v=Math.round(i-l*60*60-f*60);return l+":"+(f<10?"0"+f:f)+":"+(v<10?"0"+v:v)},unformat:function(i){var a=i.split(":"),o=0;return a.length===3?(o=o+Number(a[0])*60*60,o=o+Number(a[1])*60,o=o+Number(a[2])):a.length===2&&(o=o+Number(a[0])*60,o=o+Number(a[1])),Number(o)}})}(),T})},Ztfv:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.tagProperty=dt.tagParameter=dt.decorate=void 0;var V=R("MON2"),E=R("xfSm");function T(r,h,n,i){var a=E.TAGGED;t(a,r,h,i,n)}dt.tagParameter=T;function e(r,h,n){var i=E.TAGGED_PROP;t(i,r.constructor,h,n)}dt.tagProperty=e;function t(r,h,n,i,a){var o={},l=typeof a=="number",f=a!==void 0&&l?a.toString():n;if(l&&n!==void 0)throw new Error(V.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(r,h)&&(o=Reflect.getMetadata(r,h));var v=o[f];if(!Array.isArray(v))v=[];else for(var b=0,g=v;b<g.length;b++){var m=g[b];if(m.key===i.key)throw new Error(V.DUPLICATED_METADATA+" "+m.key.toString())}v.push(i),o[f]=v,Reflect.defineMetadata(r,o,h)}function u(r,h){Reflect.decorate(r,h)}function s(r,h){return function(n,i){h(n,i,r)}}function c(r,h,n){typeof n=="number"?u([s(n,r)],h):typeof n=="string"?Reflect.decorate([r],h,n):u([r],h)}dt.decorate=c},ZxFD:function(_e,dt,R){"use strict";R.r(dt),R.d(dt,"create",function(){return E}),R.d(dt,"clone",function(){return T}),R.d(dt,"fromValues",function(){return e}),R.d(dt,"copy",function(){return t}),R.d(dt,"set",function(){return u}),R.d(dt,"add",function(){return s}),R.d(dt,"subtract",function(){return c}),R.d(dt,"multiply",function(){return r}),R.d(dt,"divide",function(){return h}),R.d(dt,"ceil",function(){return n}),R.d(dt,"floor",function(){return i}),R.d(dt,"min",function(){return a}),R.d(dt,"max",function(){return o}),R.d(dt,"round",function(){return l}),R.d(dt,"scale",function(){return f}),R.d(dt,"scaleAndAdd",function(){return v}),R.d(dt,"distance",function(){return b}),R.d(dt,"squaredDistance",function(){return g}),R.d(dt,"length",function(){return m}),R.d(dt,"squaredLength",function(){return _}),R.d(dt,"negate",function(){return M}),R.d(dt,"inverse",function(){return x}),R.d(dt,"normalize",function(){return y}),R.d(dt,"dot",function(){return S}),R.d(dt,"cross",function(){return P}),R.d(dt,"lerp",function(){return A}),R.d(dt,"random",function(){return O}),R.d(dt,"transformMat2",function(){return L}),R.d(dt,"transformMat2d",function(){return H}),R.d(dt,"transformMat3",function(){return F}),R.d(dt,"transformMat4",function(){return K}),R.d(dt,"rotate",function(){return G}),R.d(dt,"angle",function(){return U}),R.d(dt,"zero",function(){return Z}),R.d(dt,"str",function(){return J}),R.d(dt,"exactEquals",function(){return rt}),R.d(dt,"equals",function(){return vt}),R.d(dt,"len",function(){return mt}),R.d(dt,"sub",function(){return ut}),R.d(dt,"mul",function(){return Rt}),R.d(dt,"div",function(){return Ft}),R.d(dt,"dist",function(){return wt}),R.d(dt,"sqrDist",function(){return Mt}),R.d(dt,"sqrLen",function(){return St}),R.d(dt,"forEach",function(){return At});var V=R("yU0y");function E(){var nt=new V.a(2);return V.a!=Float32Array&&(nt[0]=0,nt[1]=0),nt}function T(nt){var Pt=new V.a(2);return Pt[0]=nt[0],Pt[1]=nt[1],Pt}function e(nt,Pt){var z=new V.a(2);return z[0]=nt,z[1]=Pt,z}function t(nt,Pt){return nt[0]=Pt[0],nt[1]=Pt[1],nt}function u(nt,Pt,z){return nt[0]=Pt,nt[1]=z,nt}function s(nt,Pt,z){return nt[0]=Pt[0]+z[0],nt[1]=Pt[1]+z[1],nt}function c(nt,Pt,z){return nt[0]=Pt[0]-z[0],nt[1]=Pt[1]-z[1],nt}function r(nt,Pt,z){return nt[0]=Pt[0]*z[0],nt[1]=Pt[1]*z[1],nt}function h(nt,Pt,z){return nt[0]=Pt[0]/z[0],nt[1]=Pt[1]/z[1],nt}function n(nt,Pt){return nt[0]=Math.ceil(Pt[0]),nt[1]=Math.ceil(Pt[1]),nt}function i(nt,Pt){return nt[0]=Math.floor(Pt[0]),nt[1]=Math.floor(Pt[1]),nt}function a(nt,Pt,z){return nt[0]=Math.min(Pt[0],z[0]),nt[1]=Math.min(Pt[1],z[1]),nt}function o(nt,Pt,z){return nt[0]=Math.max(Pt[0],z[0]),nt[1]=Math.max(Pt[1],z[1]),nt}function l(nt,Pt){return nt[0]=Math.round(Pt[0]),nt[1]=Math.round(Pt[1]),nt}function f(nt,Pt,z){return nt[0]=Pt[0]*z,nt[1]=Pt[1]*z,nt}function v(nt,Pt,z,q){return nt[0]=Pt[0]+z[0]*q,nt[1]=Pt[1]+z[1]*q,nt}function b(nt,Pt){var z=Pt[0]-nt[0],q=Pt[1]-nt[1];return Math.hypot(z,q)}function g(nt,Pt){var z=Pt[0]-nt[0],q=Pt[1]-nt[1];return z*z+q*q}function m(nt){var Pt=nt[0],z=nt[1];return Math.hypot(Pt,z)}function _(nt){var Pt=nt[0],z=nt[1];return Pt*Pt+z*z}function M(nt,Pt){return nt[0]=-Pt[0],nt[1]=-Pt[1],nt}function x(nt,Pt){return nt[0]=1/Pt[0],nt[1]=1/Pt[1],nt}function y(nt,Pt){var z=Pt[0],q=Pt[1],gt=z*z+q*q;return gt>0&&(gt=1/Math.sqrt(gt)),nt[0]=Pt[0]*gt,nt[1]=Pt[1]*gt,nt}function S(nt,Pt){return nt[0]*Pt[0]+nt[1]*Pt[1]}function P(nt,Pt,z){var q=Pt[0]*z[1]-Pt[1]*z[0];return nt[0]=nt[1]=0,nt[2]=q,nt}function A(nt,Pt,z,q){var gt=Pt[0],et=Pt[1];return nt[0]=gt+q*(z[0]-gt),nt[1]=et+q*(z[1]-et),nt}function O(nt,Pt){Pt=Pt||1;var z=V.c()*2*Math.PI;return nt[0]=Math.cos(z)*Pt,nt[1]=Math.sin(z)*Pt,nt}function L(nt,Pt,z){var q=Pt[0],gt=Pt[1];return nt[0]=z[0]*q+z[2]*gt,nt[1]=z[1]*q+z[3]*gt,nt}function H(nt,Pt,z){var q=Pt[0],gt=Pt[1];return nt[0]=z[0]*q+z[2]*gt+z[4],nt[1]=z[1]*q+z[3]*gt+z[5],nt}function F(nt,Pt,z){var q=Pt[0],gt=Pt[1];return nt[0]=z[0]*q+z[3]*gt+z[6],nt[1]=z[1]*q+z[4]*gt+z[7],nt}function K(nt,Pt,z){var q=Pt[0],gt=Pt[1];return nt[0]=z[0]*q+z[4]*gt+z[12],nt[1]=z[1]*q+z[5]*gt+z[13],nt}function G(nt,Pt,z,q){var gt=Pt[0]-z[0],et=Pt[1]-z[1],at=Math.sin(q),xt=Math.cos(q);return nt[0]=gt*xt-et*at+z[0],nt[1]=gt*at+et*xt+z[1],nt}function U(nt,Pt){var z=nt[0],q=nt[1],gt=Pt[0],et=Pt[1],at=Math.sqrt(z*z+q*q)*Math.sqrt(gt*gt+et*et),xt=at&&(z*gt+q*et)/at;return Math.acos(Math.min(Math.max(xt,-1),1))}function Z(nt){return nt[0]=0,nt[1]=0,nt}function J(nt){return"vec2("+nt[0]+", "+nt[1]+")"}function rt(nt,Pt){return nt[0]===Pt[0]&&nt[1]===Pt[1]}function vt(nt,Pt){var z=nt[0],q=nt[1],gt=Pt[0],et=Pt[1];return Math.abs(z-gt)<=V.b*Math.max(1,Math.abs(z),Math.abs(gt))&&Math.abs(q-et)<=V.b*Math.max(1,Math.abs(q),Math.abs(et))}var mt=m,ut=c,Rt=r,Ft=h,wt=b,Mt=g,St=_,At=function(){var nt=E();return function(Pt,z,q,gt,et,at){var xt,k;for(z||(z=2),q||(q=0),gt?k=Math.min(gt*z+q,Pt.length):k=Pt.length,xt=q;xt<k;xt+=z)nt[0]=Pt[xt],nt[1]=Pt[xt+1],et(nt,nt,at),Pt[xt]=nt[0],Pt[xt+1]=nt[1];return Pt}}()},ZzCi:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.named=void 0;var V=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(t){return function(u,s,c){var r=new E.Metadata(V.NAMED_TAG,t);typeof c=="number"?T.tagParameter(u,s,c,r):T.tagProperty(u,s,r)}}dt.named=e},a1gu:function(_e,dt,R){var V=R("cDf5").default,E=R("PJYZ");function T(e,t){return t&&(V(t)==="object"||typeof t=="function")?t:E(e)}_e.exports=T,_e.exports.default=_e.exports,_e.exports.__esModule=!0},aF1E:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return t});var V=R("lSNA"),E=R.n(V);function T(u,s){var c=Object.keys(u);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(u);s&&(r=r.filter(function(h){return Object.getOwnPropertyDescriptor(u,h).enumerable})),c.push.apply(c,r)}return c}function e(u){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?T(Object(c),!0).forEach(function(r){E()(u,r,c[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(c)):T(Object(c)).forEach(function(r){Object.defineProperty(u,r,Object.getOwnPropertyDescriptor(c,r))})}return u}function t(u,s){var c=s.sourceField,r=s.targetField,h=s.data,n={};return h.forEach(function(i){n[i[c]]=i}),u.dataArray=u.dataArray.map(function(i){var a=i[r];return e(e({},i),n[a])}),u}},aHsQ:function(_e,dt,R){"use strict";var V=R("cIOH"),E=R.n(V),T=R("6D9b"),e=R.n(T),t=R("cWXX")},aPG5:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.resolve=void 0;var V=R("MON2"),E=R("FV85"),T=R("qK8v"),e=R("ujMp"),t=R("cSJO"),u=function(h,n,i){try{return i()}catch(a){throw T.isStackOverflowExeption(a)?new Error(V.CIRCULAR_DEPENDENCY_IN_FACTORY(h,n.toString())):a}},s=function r(h){return function(n){n.parentContext.setCurrentRequest(n);var i=n.bindings,a=n.childRequests,o=n.target&&n.target.isArray(),l=!n.parentRequest||!n.parentRequest.target||!n.target||!n.parentRequest.target.matchesArray(n.target.serviceIdentifier);if(o&&l)return a.map(function(_){var M=r(h);return M(_)});var f=null;if(n.target.isOptional()&&i.length===0)return;var v=i[0],b=v.scope===E.BindingScopeEnum.Singleton,g=v.scope===E.BindingScopeEnum.Request;if(b&&v.activated)return v.cache;if(g&&h!==null&&h.has(v.id))return h.get(v.id);if(v.type===E.BindingTypeEnum.ConstantValue)f=v.cache,v.activated=!0;else if(v.type===E.BindingTypeEnum.Function)f=v.cache,v.activated=!0;else if(v.type===E.BindingTypeEnum.Constructor)f=v.implementationType;else if(v.type===E.BindingTypeEnum.DynamicValue&&v.dynamicValue!==null)f=u("toDynamicValue",v.serviceIdentifier,function(){return v.dynamicValue(n.parentContext)});else if(v.type===E.BindingTypeEnum.Factory&&v.factory!==null)f=u("toFactory",v.serviceIdentifier,function(){return v.factory(n.parentContext)});else if(v.type===E.BindingTypeEnum.Provider&&v.provider!==null)f=u("toProvider",v.serviceIdentifier,function(){return v.provider(n.parentContext)});else if(v.type===E.BindingTypeEnum.Instance&&v.implementationType!==null)f=t.resolveInstance(v.implementationType,a,r(h));else{var m=e.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(V.INVALID_BINDING_TYPE+" "+m)}return typeof v.onActivation=="function"&&(f=v.onActivation(n.parentContext,f)),b&&(v.cache=f,v.activated=!0),g&&h!==null&&!h.has(v.id)&&h.set(v.id,f),f}};function c(r){var h=s(r.plan.rootRequest.requestScope);return h(r.plan.rootRequest)}dt.resolve=c},asDA:function(_e,dt){function R(V,E,T,e){var t=-1,u=V==null?0:V.length;for(e&&u&&(T=V[++t]);++t<u;)T=E(T,V[t],t,V);return T}_e.exports=R},b2z7:function(_e,dt){var R=/\w*$/;function V(E){var T=new E.constructor(E.source,R.exec(E));return T.lastIndex=E.lastIndex,T}_e.exports=V},b48C:function(_e,dt){function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(V){return!1}}_e.exports=R,_e.exports.default=_e.exports,_e.exports.__esModule=!0},bB6j:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return V});var V={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),ILogService:Symbol.for("ILogService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")}},bE4E:function(_e,dt,R){},bPkA:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return V});var V;(function(E){E.Normal="normal",E.PostProcessing="post-processing"})(V||(V={}))},bTtR:function(_e,dt){},bYl4:function(_e,dt){},bahg:function(_e,dt){function R(V){return V.split("")}_e.exports=R},bl9R:function(_e,dt,R){"use strict";R.r(dt),R.d(dt,"create",function(){return E}),R.d(dt,"clone",function(){return T}),R.d(dt,"fromValues",function(){return e}),R.d(dt,"copy",function(){return t}),R.d(dt,"set",function(){return u}),R.d(dt,"add",function(){return s}),R.d(dt,"subtract",function(){return c}),R.d(dt,"multiply",function(){return r}),R.d(dt,"divide",function(){return h}),R.d(dt,"ceil",function(){return n}),R.d(dt,"floor",function(){return i}),R.d(dt,"min",function(){return a}),R.d(dt,"max",function(){return o}),R.d(dt,"round",function(){return l}),R.d(dt,"scale",function(){return f}),R.d(dt,"scaleAndAdd",function(){return v}),R.d(dt,"distance",function(){return b}),R.d(dt,"squaredDistance",function(){return g}),R.d(dt,"length",function(){return m}),R.d(dt,"squaredLength",function(){return _}),R.d(dt,"negate",function(){return M}),R.d(dt,"inverse",function(){return x}),R.d(dt,"normalize",function(){return y}),R.d(dt,"dot",function(){return S}),R.d(dt,"cross",function(){return P}),R.d(dt,"lerp",function(){return A}),R.d(dt,"random",function(){return O}),R.d(dt,"transformMat4",function(){return L}),R.d(dt,"transformQuat",function(){return H}),R.d(dt,"zero",function(){return F}),R.d(dt,"str",function(){return K}),R.d(dt,"exactEquals",function(){return G}),R.d(dt,"equals",function(){return U}),R.d(dt,"sub",function(){return Z}),R.d(dt,"mul",function(){return J}),R.d(dt,"div",function(){return rt}),R.d(dt,"dist",function(){return vt}),R.d(dt,"sqrDist",function(){return mt}),R.d(dt,"len",function(){return ut}),R.d(dt,"sqrLen",function(){return Rt}),R.d(dt,"forEach",function(){return Ft});var V=R("yU0y");function E(){var wt=new V.a(4);return V.a!=Float32Array&&(wt[0]=0,wt[1]=0,wt[2]=0,wt[3]=0),wt}function T(wt){var Mt=new V.a(4);return Mt[0]=wt[0],Mt[1]=wt[1],Mt[2]=wt[2],Mt[3]=wt[3],Mt}function e(wt,Mt,St,At){var nt=new V.a(4);return nt[0]=wt,nt[1]=Mt,nt[2]=St,nt[3]=At,nt}function t(wt,Mt){return wt[0]=Mt[0],wt[1]=Mt[1],wt[2]=Mt[2],wt[3]=Mt[3],wt}function u(wt,Mt,St,At,nt){return wt[0]=Mt,wt[1]=St,wt[2]=At,wt[3]=nt,wt}function s(wt,Mt,St){return wt[0]=Mt[0]+St[0],wt[1]=Mt[1]+St[1],wt[2]=Mt[2]+St[2],wt[3]=Mt[3]+St[3],wt}function c(wt,Mt,St){return wt[0]=Mt[0]-St[0],wt[1]=Mt[1]-St[1],wt[2]=Mt[2]-St[2],wt[3]=Mt[3]-St[3],wt}function r(wt,Mt,St){return wt[0]=Mt[0]*St[0],wt[1]=Mt[1]*St[1],wt[2]=Mt[2]*St[2],wt[3]=Mt[3]*St[3],wt}function h(wt,Mt,St){return wt[0]=Mt[0]/St[0],wt[1]=Mt[1]/St[1],wt[2]=Mt[2]/St[2],wt[3]=Mt[3]/St[3],wt}function n(wt,Mt){return wt[0]=Math.ceil(Mt[0]),wt[1]=Math.ceil(Mt[1]),wt[2]=Math.ceil(Mt[2]),wt[3]=Math.ceil(Mt[3]),wt}function i(wt,Mt){return wt[0]=Math.floor(Mt[0]),wt[1]=Math.floor(Mt[1]),wt[2]=Math.floor(Mt[2]),wt[3]=Math.floor(Mt[3]),wt}function a(wt,Mt,St){return wt[0]=Math.min(Mt[0],St[0]),wt[1]=Math.min(Mt[1],St[1]),wt[2]=Math.min(Mt[2],St[2]),wt[3]=Math.min(Mt[3],St[3]),wt}function o(wt,Mt,St){return wt[0]=Math.max(Mt[0],St[0]),wt[1]=Math.max(Mt[1],St[1]),wt[2]=Math.max(Mt[2],St[2]),wt[3]=Math.max(Mt[3],St[3]),wt}function l(wt,Mt){return wt[0]=Math.round(Mt[0]),wt[1]=Math.round(Mt[1]),wt[2]=Math.round(Mt[2]),wt[3]=Math.round(Mt[3]),wt}function f(wt,Mt,St){return wt[0]=Mt[0]*St,wt[1]=Mt[1]*St,wt[2]=Mt[2]*St,wt[3]=Mt[3]*St,wt}function v(wt,Mt,St,At){return wt[0]=Mt[0]+St[0]*At,wt[1]=Mt[1]+St[1]*At,wt[2]=Mt[2]+St[2]*At,wt[3]=Mt[3]+St[3]*At,wt}function b(wt,Mt){var St=Mt[0]-wt[0],At=Mt[1]-wt[1],nt=Mt[2]-wt[2],Pt=Mt[3]-wt[3];return Math.hypot(St,At,nt,Pt)}function g(wt,Mt){var St=Mt[0]-wt[0],At=Mt[1]-wt[1],nt=Mt[2]-wt[2],Pt=Mt[3]-wt[3];return St*St+At*At+nt*nt+Pt*Pt}function m(wt){var Mt=wt[0],St=wt[1],At=wt[2],nt=wt[3];return Math.hypot(Mt,St,At,nt)}function _(wt){var Mt=wt[0],St=wt[1],At=wt[2],nt=wt[3];return Mt*Mt+St*St+At*At+nt*nt}function M(wt,Mt){return wt[0]=-Mt[0],wt[1]=-Mt[1],wt[2]=-Mt[2],wt[3]=-Mt[3],wt}function x(wt,Mt){return wt[0]=1/Mt[0],wt[1]=1/Mt[1],wt[2]=1/Mt[2],wt[3]=1/Mt[3],wt}function y(wt,Mt){var St=Mt[0],At=Mt[1],nt=Mt[2],Pt=Mt[3],z=St*St+At*At+nt*nt+Pt*Pt;return z>0&&(z=1/Math.sqrt(z)),wt[0]=St*z,wt[1]=At*z,wt[2]=nt*z,wt[3]=Pt*z,wt}function S(wt,Mt){return wt[0]*Mt[0]+wt[1]*Mt[1]+wt[2]*Mt[2]+wt[3]*Mt[3]}function P(wt,Mt,St,At){var nt=St[0]*At[1]-St[1]*At[0],Pt=St[0]*At[2]-St[2]*At[0],z=St[0]*At[3]-St[3]*At[0],q=St[1]*At[2]-St[2]*At[1],gt=St[1]*At[3]-St[3]*At[1],et=St[2]*At[3]-St[3]*At[2],at=Mt[0],xt=Mt[1],k=Mt[2],ot=Mt[3];return wt[0]=xt*et-k*gt+ot*q,wt[1]=-(at*et)+k*z-ot*Pt,wt[2]=at*gt-xt*z+ot*nt,wt[3]=-(at*q)+xt*Pt-k*nt,wt}function A(wt,Mt,St,At){var nt=Mt[0],Pt=Mt[1],z=Mt[2],q=Mt[3];return wt[0]=nt+At*(St[0]-nt),wt[1]=Pt+At*(St[1]-Pt),wt[2]=z+At*(St[2]-z),wt[3]=q+At*(St[3]-q),wt}function O(wt,Mt){Mt=Mt||1;var St,At,nt,Pt,z,q;do St=V.c()*2-1,At=V.c()*2-1,z=St*St+At*At;while(z>=1);do nt=V.c()*2-1,Pt=V.c()*2-1,q=nt*nt+Pt*Pt;while(q>=1);var gt=Math.sqrt((1-z)/q);return wt[0]=Mt*St,wt[1]=Mt*At,wt[2]=Mt*nt*gt,wt[3]=Mt*Pt*gt,wt}function L(wt,Mt,St){var At=Mt[0],nt=Mt[1],Pt=Mt[2],z=Mt[3];return wt[0]=St[0]*At+St[4]*nt+St[8]*Pt+St[12]*z,wt[1]=St[1]*At+St[5]*nt+St[9]*Pt+St[13]*z,wt[2]=St[2]*At+St[6]*nt+St[10]*Pt+St[14]*z,wt[3]=St[3]*At+St[7]*nt+St[11]*Pt+St[15]*z,wt}function H(wt,Mt,St){var At=Mt[0],nt=Mt[1],Pt=Mt[2],z=St[0],q=St[1],gt=St[2],et=St[3],at=et*At+q*Pt-gt*nt,xt=et*nt+gt*At-z*Pt,k=et*Pt+z*nt-q*At,ot=-z*At-q*nt-gt*Pt;return wt[0]=at*et+ot*-z+xt*-gt-k*-q,wt[1]=xt*et+ot*-q+k*-z-at*-gt,wt[2]=k*et+ot*-gt+at*-q-xt*-z,wt[3]=Mt[3],wt}function F(wt){return wt[0]=0,wt[1]=0,wt[2]=0,wt[3]=0,wt}function K(wt){return"vec4("+wt[0]+", "+wt[1]+", "+wt[2]+", "+wt[3]+")"}function G(wt,Mt){return wt[0]===Mt[0]&&wt[1]===Mt[1]&&wt[2]===Mt[2]&&wt[3]===Mt[3]}function U(wt,Mt){var St=wt[0],At=wt[1],nt=wt[2],Pt=wt[3],z=Mt[0],q=Mt[1],gt=Mt[2],et=Mt[3];return Math.abs(St-z)<=V.b*Math.max(1,Math.abs(St),Math.abs(z))&&Math.abs(At-q)<=V.b*Math.max(1,Math.abs(At),Math.abs(q))&&Math.abs(nt-gt)<=V.b*Math.max(1,Math.abs(nt),Math.abs(gt))&&Math.abs(Pt-et)<=V.b*Math.max(1,Math.abs(Pt),Math.abs(et))}var Z=c,J=r,rt=h,vt=b,mt=g,ut=m,Rt=_,Ft=function(){var wt=E();return function(Mt,St,At,nt,Pt,z){var q,gt;for(St||(St=4),At||(At=0),nt?gt=Math.min(nt*St+At,Mt.length):gt=Mt.length,q=At;q<gt;q+=St)wt[0]=Mt[q],wt[1]=Mt[q+1],wt[2]=Mt[q+2],wt[3]=Mt[q+3],Pt(wt,wt,z),Mt[q]=wt[0],Mt[q+1]=wt[1],Mt[q+2]=wt[2],Mt[q+3]=wt[3];return Mt}}()},bx4M:function(_e,dt,R){"use strict";var V=R("rePB"),E=R("wx14"),T=R("q1tI"),e=R("TSYQ"),t=R.n(e),u=R("bT9E"),s=R("H84U"),c=function(M,x){var y={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(y[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(y[S[P]]=M[S[P]]);return y},r=function(x){var y=x.prefixCls,S=x.className,P=x.hoverable,A=P===void 0?!0:P,O=c(x,["prefixCls","className","hoverable"]);return T.createElement(s.a,null,function(L){var H=L.getPrefixCls,F=H("card",y),K=t()("".concat(F,"-grid"),S,Object(V.a)({},"".concat(F,"-grid-hoverable"),A));return T.createElement("div",Object(E.a)({},O,{className:K}))})},h=r,n=function(M,x){var y={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(y[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(y[S[P]]=M[S[P]]);return y},i=function(x){return T.createElement(s.a,null,function(y){var S=y.getPrefixCls,P=x.prefixCls,A=x.className,O=x.avatar,L=x.title,H=x.description,F=n(x,["prefixCls","className","avatar","title","description"]),K=S("card",P),G=t()("".concat(K,"-meta"),A),U=O?T.createElement("div",{className:"".concat(K,"-meta-avatar")},O):null,Z=L?T.createElement("div",{className:"".concat(K,"-meta-title")},L):null,J=H?T.createElement("div",{className:"".concat(K,"-meta-description")},H):null,rt=Z||J?T.createElement("div",{className:"".concat(K,"-meta-detail")},Z,J):null;return T.createElement("div",Object(E.a)({},F,{className:G}),U,rt)})},a=i,o=R("ZTPi"),l=R("BMrR"),f=R("kPKH"),v=R("3Nzz"),b=function(M,x){var y={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(y[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(y[S[P]]=M[S[P]]);return y};function g(M){var x=M.map(function(y,S){return T.createElement("li",{style:{width:"".concat(100/M.length,"%")},key:"action-".concat(S)},T.createElement("span",null,y))});return x}var m=function(x){var y,S,P=T.useContext(s.b),A=P.getPrefixCls,O=P.direction,L=T.useContext(v.b),H=function(Ye){var wn;(wn=x.onTabChange)===null||wn===void 0||wn.call(x,Ye)},F=function(){var Ye;return T.Children.forEach(x.children,function(wn){wn&&wn.type&&wn.type===h&&(Ye=!0)}),Ye},K=x.prefixCls,G=x.className,U=x.extra,Z=x.headStyle,J=Z===void 0?{}:Z,rt=x.bodyStyle,vt=rt===void 0?{}:rt,mt=x.title,ut=x.loading,Rt=x.bordered,Ft=Rt===void 0?!0:Rt,wt=x.size,Mt=x.type,St=x.cover,At=x.actions,nt=x.tabList,Pt=x.children,z=x.activeTabKey,q=x.defaultActiveTabKey,gt=x.tabBarExtraContent,et=x.hoverable,at=x.tabProps,xt=at===void 0?{}:at,k=b(x,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),ot=A("card",K),it=vt.padding===0||vt.padding==="0px"?{padding:24}:void 0,$=T.createElement("div",{className:"".concat(ot,"-loading-block")}),_t=T.createElement("div",{className:"".concat(ot,"-loading-content"),style:it},T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:22},$)),T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:8},$),T.createElement(f.a,{span:15},$)),T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:6},$),T.createElement(f.a,{span:18},$)),T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:13},$),T.createElement(f.a,{span:9},$)),T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:4},$),T.createElement(f.a,{span:3},$),T.createElement(f.a,{span:16},$))),yt=z!==void 0,Nt=Object(E.a)(Object(E.a)({},xt),(y={},Object(V.a)(y,yt?"activeKey":"defaultActiveKey",yt?z:q),Object(V.a)(y,"tabBarExtraContent",gt),y)),$t,ee=nt&&nt.length?T.createElement(o.a,Object(E.a)({size:"large"},Nt,{className:"".concat(ot,"-head-tabs"),onChange:H}),nt.map(function(We){return T.createElement(o.a.TabPane,{tab:We.tab,disabled:We.disabled,key:We.key})})):null;(mt||U||ee)&&($t=T.createElement("div",{className:"".concat(ot,"-head"),style:J},T.createElement("div",{className:"".concat(ot,"-head-wrapper")},mt&&T.createElement("div",{className:"".concat(ot,"-head-title")},mt),U&&T.createElement("div",{className:"".concat(ot,"-extra")},U)),ee));var Gt=St?T.createElement("div",{className:"".concat(ot,"-cover")},St):null,Ht=T.createElement("div",{className:"".concat(ot,"-body"),style:vt},ut?_t:Pt),ae=At&&At.length?T.createElement("ul",{className:"".concat(ot,"-actions")},g(At)):null,le=Object(u.a)(k,["onTabChange"]),Be=wt||L,Ce=t()(ot,(S={},Object(V.a)(S,"".concat(ot,"-loading"),ut),Object(V.a)(S,"".concat(ot,"-bordered"),Ft),Object(V.a)(S,"".concat(ot,"-hoverable"),et),Object(V.a)(S,"".concat(ot,"-contain-grid"),F()),Object(V.a)(S,"".concat(ot,"-contain-tabs"),nt&&nt.length),Object(V.a)(S,"".concat(ot,"-").concat(Be),Be),Object(V.a)(S,"".concat(ot,"-type-").concat(Mt),!!Mt),Object(V.a)(S,"".concat(ot,"-rtl"),O==="rtl"),S),G);return T.createElement("div",Object(E.a)({},le,{className:Ce}),$t,Gt,Ht,ae)};m.Grid=h,m.Meta=a;var _=dt.a=m},bzyH:function(_e,dt){},cQSq:function(_e,dt,R){(function(E,T){_e.exports=T()})(window,function(){return function(V){var E={};function T(e){if(E[e])return E[e].exports;var t=E[e]={i:e,l:!1,exports:{}};return V[e].call(t.exports,t,t.exports,T),t.l=!0,t.exports}return T.m=V,T.c=E,T.d=function(e,t,u){T.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:u})},T.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},T.t=function(e,t){if(t&1&&(e=T(e)),t&8||t&4&&typeof e=="object"&&e&&e.__esModule)return e;var u=Object.create(null);if(T.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:e}),t&2&&typeof e!="string")for(var s in e)T.d(u,s,function(c){return e[c]}.bind(null,s));return u},T.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return T.d(t,"a",t),t},T.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},T.p="",T(T.s="./src/index.ts")}({"./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js":function(E,T,e){(function(u,s){E.exports=s()})(typeof self!="undefined"?self:this,function(){return function(t){var u={};function s(c){if(u[c])return u[c].exports;var r=u[c]={i:c,l:!1,exports:{}};return t[c].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=u,s.d=function(c,r,h){s.o(c,r)||Object.defineProperty(c,r,{configurable:!1,enumerable:!0,get:h})},s.n=function(c){var r=c&&c.__esModule?function(){return c.default}:function(){return c};return s.d(r,"a",r),r},s.o=function(c,r){return Object.prototype.hasOwnProperty.call(c,r)},s.p="",s(s.s=31)}([function(t,u,s){"use strict";var c=s(4);u.a=function(r){return Array.isArray?Array.isArray(r):Object(c.a)(r,"Array")}},function(t,u,s){"use strict";var c=function(h){return h!==null&&typeof h!="function"&&isFinite(h.length)};u.a=c},function(t,u,s){"use strict";var c=s(0),r=s(13);function h(n,i){if(!!n){var a;if(Object(c.a)(n))for(var o=0,l=n.length;o<l&&(a=i(n[o],o),a!==!1);o++);else if(Object(r.a)(n)){for(var f in n)if(n.hasOwnProperty(f)&&(a=i(n[f],f),a===!1))break}}}u.a=h},function(t,u,s){"use strict";var c=s(4);u.a=function(r){return Object(c.a)(r,"Function")}},function(t,u,s){"use strict";var c={}.toString,r=function(n,i){return c.call(n)==="[object "+i+"]"};u.a=r},function(t,u,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Number")};u.a=r},function(t,u,s){"use strict";var c=function(h){return h==null};u.a=c},function(t,u,s){var c=s(33),r=c.mix;t.exports={assign:r}},function(t,u,s){"use strict";var c=s(4);u.a=function(r){return Object(c.a)(r,"String")}},function(t,u,s){"use strict";var c=s(15),r=s(4),h=function(i){if(!Object(c.a)(i)||!Object(r.a)(i,"Object"))return!1;if(Object.getPrototypeOf(i)===null)return!0;for(var a=i;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(i)===a};u.a=h},function(t,u,s){"use strict";var c=s(6);u.a=function(r){return Object(c.a)(r)?"":r.toString()}},function(t,u,s){var c=s(18),r=function(){function h(i,a){a===void 0&&(a={});var o=this;o.options=a,o.rootNode=c(i,a)}var n=h.prototype;return n.execute=function(){throw new Error("please override this method")},h}();t.exports=r},function(t,u,s){"use strict";var c=s(1),r=function(n,i){return Object(c.a)(n)?n.indexOf(i)>-1:!1};u.a=r},function(t,u,s){"use strict";u.a=function(c){var r=typeof c;return c!==null&&r==="object"||r==="function"}},function(t,u,s){"use strict";var c=s(2),r=s(1),h=function(i,a){if(!Object(r.a)(i))return i;var o=[];return Object(c.a)(i,function(l,f){a(l,f)&&o.push(l)}),o};u.a=h},function(t,u,s){"use strict";var c=function(h){return typeof h=="object"&&h!==null};u.a=c},function(t,u,s){"use strict";u.a=r;function c(h,n){for(var i in n)n.hasOwnProperty(i)&&i!=="constructor"&&n[i]!==void 0&&(h[i]=n[i])}function r(h,n,i,a){return n&&c(h,n),i&&c(h,i),a&&c(h,a),h}},function(t,u,s){var c=s(30),r=["LR","RL","TB","BT","H","V"],h=["LR","RL","H"],n=function(o){return h.indexOf(o)>-1},i=r[0];t.exports=function(a,o,l){var f=o.direction||i;if(o.isHorizontal=n(f),f&&r.indexOf(f)===-1)throw new TypeError("Invalid direction: "+f);if(f===r[0])l(a,o);else if(f===r[1])l(a,o),a.right2left();else if(f===r[2])l(a,o);else if(f===r[3])l(a,o),a.bottom2top();else if(f===r[4]||f===r[5]){var v=c(a,o),b=v.left,g=v.right;l(b,o),l(g,o),o.isHorizontal?b.right2left():b.bottom2top(),g.translate(b.x-g.x,b.y-g.y),a.x=b.x,a.y=g.y;var m=a.getBoundingBox();o.isHorizontal?m.top<0&&a.translate(0,-m.top):m.left<0&&a.translate(-m.left,0)}var _=o.fixedRoot;return _===void 0&&(_=!0),_&&a.translate(-(a.x+a.width/2+a.hgap),-(a.y+a.height/2+a.vgap)),a}},function(t,u,s){var c=s(7),r=18,h=r*2,n=r,i={getId:function(f){return f.id||f.name},getHGap:function(f){return f.hgap||n},getVGap:function(f){return f.vgap||n},getChildren:function(f){return f.children},getHeight:function(f){return f.height||h},getWidth:function(f){var v=f.label||" ";return f.width||v.split("").length*r}};function a(l,f){var v=this;if(v.vgap=v.hgap=0,l instanceof a)return l;v.data=l;var b=f.getHGap(l),g=f.getVGap(l);return v.width=f.getWidth(l),v.height=f.getHeight(l),v.id=f.getId(l),v.x=v.y=0,v.depth=0,v.children||(v.children=[]),v.addGap(b,g),v}c.assign(a.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(f,v){var b=this;b.hgap+=f,b.vgap+=v,b.width+=2*f,b.height+=2*v},eachNode:function(f){for(var v=this,b=[v],g;g=b.shift();)f(g),b=g.children.concat(b)},DFTraverse:function(f){this.eachNode(f)},BFTraverse:function(f){for(var v=this,b=[v],g;g=b.shift();)f(g),b=b.concat(g.children)},getBoundingBox:function(){var f={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(v){f.left=Math.min(f.left,v.x),f.top=Math.min(f.top,v.y),f.width=Math.max(f.width,v.x+v.width),f.height=Math.max(f.height,v.y+v.height)}),f},translate:function(f,v){f===void 0&&(f=0),v===void 0&&(v=0),this.eachNode(function(b){b.x+=f,b.y+=v})},right2left:function(){var f=this,v=f.getBoundingBox();f.eachNode(function(b){b.x=b.x-(b.x-v.left)*2-b.width}),f.translate(v.width,0)},bottom2top:function(){var f=this,v=f.getBoundingBox();f.eachNode(function(b){b.y=b.y-(b.y-v.top)*2-b.height}),f.translate(0,v.height)}});function o(l,f,v){f===void 0&&(f={}),f=c.assign({},i,f);var b=new a(l,f),g=[b],m;if(!v&&!l.collapsed){for(;m=g.shift();)if(!m.data.collapsed){var _=f.getChildren(m.data),M=_?_.length:0;if(m.children=new Array(M),_&&M)for(var x=0;x<M;x++){var y=new a(_[x],f);m.children[x]=y,g.push(y),y.parent=m,y.depth=m.depth+1}}}return b}t.exports=o},function(t,u,s){"use strict";var c=s(6),r=s(20);function h(n,i){var a=Object(r.a)(i),o=a.length;if(Object(c.a)(n))return!o;for(var l=0;l<o;l+=1){var f=a[l];if(i[f]!==n[f]||!(f in n))return!1}return!0}u.a=h},function(t,u,s){"use strict";var c=s(2),r=s(3),h=Object.keys?function(n){return Object.keys(n)}:function(n){var i=[];return Object(c.a)(n,function(a,o){Object(r.a)(n)&&o==="prototype"||i.push(o)}),i};u.a=h},function(t,u,s){"use strict";var c=s(1),r=Array.prototype.splice,h=function(i,a){if(!Object(c.a)(i))return[];for(var o=i?a.length:0,l=o-1;o--;){var f=void 0,v=a[o];(o===l||v!==f)&&(f=v,r.call(i,v,1))}return i};u.a=h},function(t,u,s){"use strict";var c=s(12),r=s(2),h=function(i){var a=[];return Object(r.a)(i,function(o){Object(c.a)(a,o)||a.push(o)}),a};u.a=h},function(t,u,s){"use strict";var c=s(0),r=s(3),h=s(24),n=function(a,o){if(!o)return{0:a};if(!Object(r.a)(o)){var l=Object(c.a)(o)?o:o.replace(/\s+/g,"").split("*");o=function(b){for(var g="_",m=0,_=l.length;m<_;m++)g+=b[l[m]]&&b[l[m]].toString();return g}}var f=Object(h.a)(a,o);return f};u.a=n},function(t,u,s){"use strict";var c=s(2),r=s(0),h=s(3),n=Object.prototype.hasOwnProperty;function i(a,o){if(!o||!Object(r.a)(a))return{};var l={},f=Object(h.a)(o)?o:function(b){return b[o]},v;return Object(c.a)(a,function(b){v=f(b),n.call(l,v)?l[v].push(b):l[v]=[b]}),l}u.a=i},function(t,u,s){"use strict";u.a=function(c,r){return c.hasOwnProperty(r)}},function(t,u,s){"use strict";var c=s(2),r=s(3),h=Object.values?function(n){return Object.values(n)}:function(n){var i=[];return Object(c.a)(n,function(a,o){Object(r.a)(n)&&o==="prototype"||i.push(a)}),i};u.a=h},function(t,u,s){"use strict";var c={}.toString,r=function(n){return c.call(n).replace(/^\[object /,"").replace(/]$/,"")};u.a=r},function(t,u,s){"use strict";var c=Object.prototype,r=function(n){var i=n&&n.constructor,a=typeof i=="function"&&i.prototype||c;return n===a};u.a=r},function(t,u,s){"use strict";var c=s(15),r=s(1),h=s(8),n=function i(a,o){if(a===o)return!0;if(!a||!o||Object(h.a)(a)||Object(h.a)(o))return!1;if(Object(r.a)(a)||Object(r.a)(o)){if(a.length!==o.length)return!1;for(var l=!0,f=0;f<a.length&&(l=i(a[f],o[f]),!!l);f++);return l}if(Object(c.a)(a)||Object(c.a)(o)){var v=Object.keys(a),b=Object.keys(o);if(v.length!==b.length)return!1;for(var l=!0,f=0;f<v.length&&(l=i(a[v[f]],o[v[f]]),!!l);f++);return l}return!1};u.a=n},function(t,u,s){var c=s(18);t.exports=function(r,h){for(var n=c(r.data,h,!0),i=c(r.data,h,!0),a=r.children.length,o=Math.round(a/2),l=h.getSide||function(g,m){return m<o?"right":"left"},f=0;f<a;f++){var v=r.children[f],b=l(v,f);b==="right"?i.children.push(v):n.children.push(v)}return n.eachNode(function(g){g.isRoot()||(g.side="left")}),i.eachNode(function(g){g.isRoot()||(g.side="right")}),{left:n,right:i}}},function(t,u,s){var c={compactBox:s(32),dendrogram:s(114),indented:s(116),mindmap:s(118)};t.exports=c},function(t,u,s){function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),h=s(113),n=s(17),i=s(7),a=function(f){c(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var m=this;return n(m.rootNode,m.options,h)},v}(r),o={};function l(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=l},function(t,u,s){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=s(12);s.d(u,"contains",function(){return c.a}),s.d(u,"includes",function(){return c.a});var r=s(34);s.d(u,"difference",function(){return r.a});var h=s(35);s.d(u,"find",function(){return h.a});var n=s(36);s.d(u,"findIndex",function(){return n.a});var i=s(37);s.d(u,"firstValue",function(){return i.a});var a=s(38);s.d(u,"flatten",function(){return a.a});var o=s(39);s.d(u,"flattenDeep",function(){return o.a});var l=s(40);s.d(u,"getRange",function(){return l.a});var f=s(41);s.d(u,"pull",function(){return f.a});var v=s(21);s.d(u,"pullAt",function(){return v.a});var b=s(42);s.d(u,"reduce",function(){return b.a});var g=s(43);s.d(u,"remove",function(){return g.a});var m=s(44);s.d(u,"sortBy",function(){return m.a});var _=s(45);s.d(u,"union",function(){return _.a});var M=s(22);s.d(u,"uniq",function(){return M.a});var x=s(46);s.d(u,"valuesOfKey",function(){return x.a});var y=s(47);s.d(u,"head",function(){return y.a});var S=s(48);s.d(u,"last",function(){return S.a});var P=s(49);s.d(u,"startsWith",function(){return P.a});var A=s(50);s.d(u,"endsWith",function(){return A.a});var O=s(14);s.d(u,"filter",function(){return O.a});var L=s(51);s.d(u,"every",function(){return L.a});var H=s(52);s.d(u,"some",function(){return H.a});var F=s(53);s.d(u,"group",function(){return F.a});var K=s(24);s.d(u,"groupBy",function(){return K.a});var G=s(23);s.d(u,"groupToMap",function(){return G.a});var U=s(54);s.d(u,"getWrapBehavior",function(){return U.a});var Z=s(55);s.d(u,"wrapBehavior",function(){return Z.a});var J=s(56);s.d(u,"number2color",function(){return J.a});var rt=s(57);s.d(u,"parseRadius",function(){return rt.a});var vt=s(58);s.d(u,"clamp",function(){return vt.a});var mt=s(59);s.d(u,"fixedBase",function(){return mt.a});var ut=s(60);s.d(u,"isDecimal",function(){return ut.a});var Rt=s(61);s.d(u,"isEven",function(){return Rt.a});var Ft=s(62);s.d(u,"isInteger",function(){return Ft.a});var wt=s(63);s.d(u,"isNegative",function(){return wt.a});var Mt=s(64);s.d(u,"isNumberEqual",function(){return Mt.a});var St=s(65);s.d(u,"isOdd",function(){return St.a});var At=s(66);s.d(u,"isPositive",function(){return At.a});var nt=s(67);s.d(u,"maxBy",function(){return nt.a});var Pt=s(68);s.d(u,"minBy",function(){return Pt.a});var z=s(69);s.d(u,"mod",function(){return z.a});var q=s(70);s.d(u,"toDegree",function(){return q.a});var gt=s(71);s.d(u,"toInteger",function(){return gt.a});var et=s(72);s.d(u,"toRadian",function(){return et.a});var at=s(73);s.d(u,"forIn",function(){return at.a});var xt=s(25);s.d(u,"has",function(){return xt.a});var k=s(74);s.d(u,"hasKey",function(){return k.a});var ot=s(75);s.d(u,"hasValue",function(){return ot.a});var it=s(20);s.d(u,"keys",function(){return it.a});var $=s(19);s.d(u,"isMatch",function(){return $.a});var _t=s(26);s.d(u,"values",function(){return _t.a});var yt=s(76);s.d(u,"lowerCase",function(){return yt.a});var Nt=s(77);s.d(u,"lowerFirst",function(){return Nt.a});var $t=s(78);s.d(u,"substitute",function(){return $t.a});var ee=s(79);s.d(u,"upperCase",function(){return ee.a});var Gt=s(80);s.d(u,"upperFirst",function(){return Gt.a});var Ht=s(27);s.d(u,"getType",function(){return Ht.a});var ae=s(81);s.d(u,"isArguments",function(){return ae.a});var le=s(0);s.d(u,"isArray",function(){return le.a});var Be=s(1);s.d(u,"isArrayLike",function(){return Be.a});var Ce=s(82);s.d(u,"isBoolean",function(){return Ce.a});var We=s(83);s.d(u,"isDate",function(){return We.a});var Ye=s(84);s.d(u,"isError",function(){return Ye.a});var wn=s(3);s.d(u,"isFunction",function(){return wn.a});var er=s(85);s.d(u,"isFinite",function(){return er.a});var Lr=s(6);s.d(u,"isNil",function(){return Lr.a});var on=s(86);s.d(u,"isNull",function(){return on.a});var en=s(5);s.d(u,"isNumber",function(){return en.a});var An=s(13);s.d(u,"isObject",function(){return An.a});var Bn=s(15);s.d(u,"isObjectLike",function(){return Bn.a});var gr=s(9);s.d(u,"isPlainObject",function(){return gr.a});var hi=s(28);s.d(u,"isPrototype",function(){return hi.a});var Ae=s(87);s.d(u,"isRegExp",function(){return Ae.a});var Me=s(8);s.d(u,"isString",function(){return Me.a});var Qt=s(4);s.d(u,"isType",function(){return Qt.a});var ge=s(88);s.d(u,"isUndefined",function(){return ge.a});var Wt=s(89);s.d(u,"isElement",function(){return Wt.a});var re=s(90);s.d(u,"requestAnimationFrame",function(){return re.a});var Te=s(91);s.d(u,"clearAnimationFrame",function(){return Te.a});var ue=s(92);s.d(u,"augment",function(){return ue.a});var be=s(93);s.d(u,"clone",function(){return be.a});var Xe=s(94);s.d(u,"debounce",function(){return Xe.a});var Rn=s(95);s.d(u,"memoize",function(){return Rn.a});var tr=s(96);s.d(u,"deepMix",function(){return tr.a});var Mn=s(2);s.d(u,"each",function(){return Mn.a});var vn=s(97);s.d(u,"extend",function(){return vn.a});var Ar=s(98);s.d(u,"indexOf",function(){return Ar.a});var or=s(99);s.d(u,"isEmpty",function(){return or.a});var cn=s(29);s.d(u,"isEqual",function(){return cn.a});var Pr=s(100);s.d(u,"isEqualWith",function(){return Pr.a});var Sr=s(101);s.d(u,"map",function(){return Sr.a});var De=s(102);s.d(u,"mapValues",function(){return De.a});var $e=s(16);s.d(u,"mix",function(){return $e.a}),s.d(u,"assign",function(){return $e.a});var Ve=s(103);s.d(u,"get",function(){return Ve.a});var En=s(104);s.d(u,"set",function(){return En.a});var xn=s(105);s.d(u,"pick",function(){return xn.a});var Nn=s(106);s.d(u,"throttle",function(){return Nn.a});var mn=s(107);s.d(u,"toArray",function(){return mn.a});var Dn=s(10);s.d(u,"toString",function(){return Dn.a});var $n=s(108);s.d(u,"uniqueId",function(){return $n.a});var Wn=s(109);s.d(u,"noop",function(){return Wn.a});var _n=s(110);s.d(u,"identity",function(){return _n.a});var xr=s(111);s.d(u,"size",function(){return xr.a});var mr=s(112);s.d(u,"Cache",function(){return mr.a})},function(t,u,s){"use strict";var c=s(14),r=s(12),h=function(i,a){return a===void 0&&(a=[]),Object(c.a)(i,function(o){return!Object(r.a)(a,o)})};u.a=h},function(t,u,s){"use strict";var c=s(3),r=s(19),h=s(0),n=s(9);function i(a,o){if(!Object(h.a)(a))return null;var l;if(Object(c.a)(o)&&(l=o),Object(n.a)(o)&&(l=function(b){return Object(r.a)(b,o)}),l){for(var f=0;f<a.length;f+=1)if(l(a[f]))return a[f]}return null}u.a=i},function(t,u,s){"use strict";function c(r,h,n){n===void 0&&(n=0);for(var i=n;i<r.length;i++)if(h(r[i],i))return i;return-1}u.a=c},function(t,u,s){"use strict";var c=s(6),r=s(0),h=function(i,a){for(var o=null,l=0;l<i.length;l++){var f=i[l],v=f[a];if(!Object(c.a)(v)){Object(r.a)(v)?o=v[0]:o=v;break}}return o};u.a=h},function(t,u,s){"use strict";var c=s(0),r=function(n){if(!Object(c.a)(n))return[];for(var i=[],a=0;a<n.length;a++)i=i.concat(n[a]);return i};u.a=r},function(t,u,s){"use strict";var c=s(0),r=function h(n,i){if(i===void 0&&(i=[]),!Object(c.a)(n))i.push(n);else for(var a=0;a<n.length;a+=1)h(n[a],i);return i};u.a=r},function(t,u,s){"use strict";var c=s(0),r=s(14),h=function(i){if(i=Object(r.a)(i,function(v){return!isNaN(v)}),!i.length)return{min:0,max:0};if(Object(c.a)(i[0])){for(var a=[],o=0;o<i.length;o++)a=a.concat(i[o]);i=a}var l=Math.max.apply(null,i),f=Math.min.apply(null,i);return{min:f,max:l}};u.a=h},function(t,u,s){"use strict";var c=Array.prototype,r=c.splice,h=c.indexOf,n=function(a){for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];for(var f=0;f<o.length;f++)for(var v=o[f],b=-1;(b=h.call(a,v))>-1;)r.call(a,b,1);return a};u.a=n},function(t,u,s){"use strict";var c=s(2),r=s(0),h=s(9),n=function(a,o,l){if(!Object(r.a)(a)&&!Object(h.a)(a))return a;var f=l;return Object(c.a)(a,function(v,b){f=o(f,v,b)}),f};u.a=n},function(t,u,s){"use strict";var c=s(1),r=s(21),h=function(i,a){var o=[];if(!Object(c.a)(i))return o;for(var l=-1,f=[],v=i.length;++l<v;){var b=i[l];a(b,l,i)&&(o.push(b),f.push(l))}return Object(r.a)(i,f),o};u.a=h},function(t,u,s){"use strict";var c=s(0),r=s(8),h=s(3);function n(i,a){var o;if(Object(h.a)(a))o=function(v,b){return a(v)-a(b)};else{var l=[];Object(r.a)(a)?l.push(a):Object(c.a)(a)&&(l=a),o=function(v,b){for(var g=0;g<l.length;g+=1){var m=l[g];if(v[m]>b[m])return 1;if(v[m]<b[m])return-1}return 0}}return i.sort(o),i}u.a=n},function(t,u,s){"use strict";var c=s(22),r=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Object(c.a)([].concat.apply([],n))};u.a=r},function(t,u,s){"use strict";var c=s(2),r=s(0),h=s(6);u.a=function(n,i){var a=[],o={};return n.forEach(function(l){var f=l[i];Object(h.a)(f)||(Object(r.a)(f)||(f=[f]),Object(c.a)(f,function(v){o[v]||(a.push(v),o[v]=!0)}))}),a}},function(t,u,s){"use strict";u.a=r;var c=s(1);function r(h){if(Object(c.a)(h))return h[0]}},function(t,u,s){"use strict";u.a=r;var c=s(1);function r(h){if(Object(c.a)(h)){var n=h;return n[n.length-1]}}},function(t,u,s){"use strict";var c=s(0),r=s(8);function h(n,i){return Object(c.a)(n)||Object(r.a)(n)?n[0]===i:!1}u.a=h},function(t,u,s){"use strict";var c=s(0),r=s(8);function h(n,i){return Object(c.a)(n)||Object(r.a)(n)?n[n.length-1]===i:!1}u.a=h},function(t,u,s){"use strict";var c=function(h,n){for(var i=0;i<h.length;i++)if(!n(h[i],i))return!1;return!0};u.a=c},function(t,u,s){"use strict";var c=function(h,n){for(var i=0;i<h.length;i++)if(n(h[i],i))return!0;return!1};u.a=c},function(t,u,s){"use strict";var c=s(23);u.a=function(r,h){if(!h)return[r];var n=Object(c.a)(r,h),i=[];for(var a in n)i.push(n[a]);return i}},function(t,u,s){"use strict";function c(r,h){return r["_wrap_"+h]}u.a=c},function(t,u,s){"use strict";function c(r,h){if(r["_wrap_"+h])return r["_wrap_"+h];var n=function(a){r[h](a)};return r["_wrap_"+h]=n,n}u.a=c},function(t,u,s){"use strict";var c={};function r(h){var n=c[h];if(!n){for(var i=h.toString(16),a=i.length;a<6;a++)i="0"+i;n="#"+i,c[h]=n}return n}u.a=r},function(t,u,s){"use strict";var c=s(0);function r(h){var n=0,i=0,a=0,o=0;return Object(c.a)(h)?h.length===1?n=i=a=o=h[0]:h.length===2?(n=a=h[0],i=o=h[1]):h.length===3?(n=h[0],i=o=h[1],a=h[2]):(n=h[0],i=h[1],a=h[2],o=h[3]):n=i=a=o=h,{r1:n,r2:i,r3:a,r4:o}}u.a=r},function(t,u,s){"use strict";var c=function(h,n,i){return h<n?n:h>i?i:h};u.a=c},function(t,u,s){"use strict";var c=function(h,n){var i=n.toString(),a=i.indexOf(".");if(a===-1)return Math.round(h);var o=i.substr(a+1).length;return o>20&&(o=20),parseFloat(h.toFixed(o))};u.a=c},function(t,u,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n%1!=0};u.a=r},function(t,u,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n%2==0};u.a=r},function(t,u,s){"use strict";var c=s(5),r=Number.isInteger?Number.isInteger:function(h){return Object(c.a)(h)&&h%1==0};u.a=r},function(t,u,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n<0};u.a=r},function(t,u,s){"use strict";u.a=r;var c=1e-5;function r(h,n,i){return i===void 0&&(i=c),Math.abs(h-n)<i}},function(t,u,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n%2!=0};u.a=r},function(t,u,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n>0};u.a=r},function(t,u,s){"use strict";var c=s(2),r=s(0),h=s(3);u.a=function(n,i){if(!!Object(r.a)(n)){var a=n[0],o;Object(h.a)(i)?o=i(n[0]):o=n[0][i];var l;return Object(c.a)(n,function(f){Object(h.a)(i)?l=i(f):l=f[i],l>o&&(a=f,o=l)}),a}}},function(t,u,s){"use strict";var c=s(2),r=s(0),h=s(3);u.a=function(n,i){if(!!Object(r.a)(n)){var a=n[0],o;Object(h.a)(i)?o=i(n[0]):o=n[0][i];var l;return Object(c.a)(n,function(f){Object(h.a)(i)?l=i(f):l=f[i],l<o&&(a=f,o=l)}),a}}},function(t,u,s){"use strict";var c=function(h,n){return(h%n+n)%n};u.a=c},function(t,u,s){"use strict";var c=180/Math.PI,r=function(n){return c*n};u.a=r},function(t,u,s){"use strict";u.a=parseInt},function(t,u,s){"use strict";var c=Math.PI/180,r=function(n){return c*n};u.a=r},function(t,u,s){"use strict";var c=s(2);u.a=c.a},function(t,u,s){"use strict";var c=s(25);u.a=c.a},function(t,u,s){"use strict";var c=s(12),r=s(26);u.a=function(h,n){return Object(c.a)(Object(r.a)(h),n)}},function(t,u,s){"use strict";var c=s(10),r=function(n){return Object(c.a)(n).toLowerCase()};u.a=r},function(t,u,s){"use strict";var c=s(10),r=function(n){var i=Object(c.a)(n);return i.charAt(0).toLowerCase()+i.substring(1)};u.a=r},function(t,u,s){"use strict";function c(r,h){return!r||!h?r:r.replace(/\\?\{([^{}]+)\}/g,function(n,i){return n.charAt(0)==="\\"?n.slice(1):h[i]===void 0?"":h[i]})}u.a=c},function(t,u,s){"use strict";var c=s(10),r=function(n){return Object(c.a)(n).toUpperCase()};u.a=r},function(t,u,s){"use strict";var c=s(10),r=function(n){var i=Object(c.a)(n);return i.charAt(0).toUpperCase()+i.substring(1)};u.a=r},function(t,u,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Arguments")};u.a=r},function(t,u,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Boolean")};u.a=r},function(t,u,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Date")};u.a=r},function(t,u,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Error")};u.a=r},function(t,u,s){"use strict";var c=s(5);u.a=function(r){return Object(c.a)(r)&&isFinite(r)}},function(t,u,s){"use strict";var c=function(h){return h===null};u.a=c},function(t,u,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"RegExp")};u.a=r},function(t,u,s){"use strict";var c=function(h){return h===void 0};u.a=c},function(t,u,s){"use strict";var c=function(h){return h instanceof Element||h instanceof HTMLDocument};u.a=c},function(t,u,s){"use strict";u.a=c;function c(r){var h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(n){return setTimeout(n,16)};return h(r)}},function(t,u,s){"use strict";u.a=c;function c(r){var h=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;h(r)}},function(t,u,s){"use strict";var c=s(16),r=s(3),h=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];for(var o=i[0],l=1;l<i.length;l++){var f=i[l];Object(r.a)(f)&&(f=f.prototype),Object(c.a)(o.prototype,f)}};u.a=h},function(t,u,s){"use strict";var c=s(0),r=function h(n){if(typeof n!="object"||n===null)return n;var i;if(Object(c.a)(n)){i=[];for(var a=0,o=n.length;a<o;a++)typeof n[a]=="object"&&n[a]!=null?i[a]=h(n[a]):i[a]=n[a]}else{i={};for(var l in n)typeof n[l]=="object"&&n[l]!=null?i[l]=h(n[l]):i[l]=n[l]}return i};u.a=r},function(t,u,s){"use strict";function c(r,h,n){var i;return function(){var a=this,o=arguments,l=function(){i=null,n||r.apply(a,o)},f=n&&!i;clearTimeout(i),i=setTimeout(l,h),f&&r.apply(a,o)}}u.a=c},function(t,u,s){"use strict";var c=s(3);u.a=function(r,h){if(!Object(c.a)(r))throw new TypeError("Expected a function");var n=function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var l=h?h.apply(this,a):a[0],f=i.cache;if(f.has(l))return f.get(l);var v=r.apply(this,a);return f.set(l,v),v};return n.cache=new Map,n}},function(t,u,s){"use strict";var c=s(0),r=s(9),h=5;function n(a,o,l,f){l=l||0,f=f||h;for(var v in o)if(o.hasOwnProperty(v)){var b=o[v];b!==null&&Object(r.a)(b)?(Object(r.a)(a[v])||(a[v]={}),l<f?n(a[v],b,l+1,f):a[v]=o[v]):Object(c.a)(b)?(a[v]=[],a[v]=a[v].concat(b)):b!==void 0&&(a[v]=b)}}var i=function(o){for(var l=[],f=1;f<arguments.length;f++)l[f-1]=arguments[f];for(var v=0;v<l.length;v+=1)n(o,l[v]);return o};u.a=i},function(t,u,s){"use strict";var c=s(16),r=s(3),h=function(i,a,o,l){Object(r.a)(a)||(o=a,a=i,i=function(){});var f=Object.create?function(b,g){return Object.create(b,{constructor:{value:g}})}:function(b,g){function m(){}m.prototype=b;var _=new m;return _.constructor=g,_},v=f(a.prototype,i);return i.prototype=Object(c.a)(v,i.prototype),i.superclass=f(a.prototype,a),Object(c.a)(v,o),Object(c.a)(i,l),i};u.a=h},function(t,u,s){"use strict";var c=s(1),r=function(n,i){if(!Object(c.a)(n))return-1;var a=Array.prototype.indexOf;if(a)return a.call(n,i);for(var o=-1,l=0;l<n.length;l++)if(n[l]===i){o=l;break}return o};u.a=r},function(t,u,s){"use strict";var c=s(6),r=s(1),h=s(27),n=s(28),i=Object.prototype.hasOwnProperty;function a(o){if(Object(c.a)(o))return!0;if(Object(r.a)(o))return!o.length;var l=Object(h.a)(o);if(l==="Map"||l==="Set")return!o.size;if(Object(n.a)(o))return!Object.keys(o).length;for(var f in o)if(i.call(o,f))return!1;return!0}u.a=a},function(t,u,s){"use strict";var c=s(3),r=s(29);u.a=function(h,n,i){return Object(c.a)(i)?!!i(h,n):Object(r.a)(h,n)}},function(t,u,s){"use strict";var c=s(2),r=s(1),h=function(i,a){if(!Object(r.a)(i))return i;var o=[];return Object(c.a)(i,function(l,f){o.push(a(l,f))}),o};u.a=h},function(t,u,s){"use strict";var c=s(6),r=s(13),h=function(i){return i};u.a=function(n,i){i===void 0&&(i=h);var a={};return Object(r.a)(n)&&!Object(c.a)(n)&&Object.keys(n).forEach(function(o){a[o]=i(n[o],o)}),a}},function(t,u,s){"use strict";var c=s(8);u.a=function(r,h,n){for(var i=0,a=Object(c.a)(h)?h.split("."):h;r&&i<a.length;)r=r[a[i++]];return r===void 0||i<a.length?n:r}},function(t,u,s){"use strict";var c=s(13),r=s(8),h=s(5);u.a=function(n,i,a){var o=n,l=Object(r.a)(i)?i.split("."):i;return l.forEach(function(f,v){v<l.length-1?(Object(c.a)(o[f])||(o[f]=Object(h.a)(l[v+1])?[]:{}),o=o[f]):o[f]=a}),n}},function(t,u,s){"use strict";var c=s(2),r=s(9),h=Object.prototype.hasOwnProperty;u.a=function(n,i){if(n===null||!Object(r.a)(n))return{};var a={};return Object(c.a)(i,function(o){h.call(n,o)&&(a[o]=n[o])}),a}},function(t,u,s){"use strict";u.a=function(c,r,h){var n,i,a,o,l=0;h||(h={});var f=function(){l=h.leading===!1?0:Date.now(),n=null,o=c.apply(i,a),n||(i=a=null)},v=function(){var g=Date.now();!l&&h.leading===!1&&(l=g);var m=r-(g-l);return i=this,a=arguments,m<=0||m>r?(n&&(clearTimeout(n),n=null),l=g,o=c.apply(i,a),n||(i=a=null)):!n&&h.trailing!==!1&&(n=setTimeout(f,m)),o};return v.cancel=function(){clearTimeout(n),l=0,n=i=a=null},v}},function(t,u,s){"use strict";var c=s(1);u.a=function(r){return Object(c.a)(r)?Array.prototype.slice.call(r):[]}},function(t,u,s){"use strict";var c={};u.a=function(r){return r=r||"g",c[r]?c[r]+=1:c[r]=1,r+c[r]}},function(t,u,s){"use strict";u.a=function(){}},function(t,u,s){"use strict";u.a=function(c){return c}},function(t,u,s){"use strict";u.a=h;var c=s(6),r=s(1);function h(n){return Object(c.a)(n)?0:Object(r.a)(n)?n.length:Object.keys(n).length}},function(t,u,s){"use strict";var c=function(){function r(){this.map={}}return r.prototype.has=function(h){return this.map[h]!==void 0},r.prototype.get=function(h,n){var i=this.map[h];return i===void 0?n:i},r.prototype.set=function(h,n){this.map[h]=n},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(h){delete this.map[h]},r.prototype.size=function(){return Object.keys(this.map).length},r}();u.a=c},function(t,u){function s(a,o,l,f){f===void 0&&(f=[]);var v=this;v.w=a||0,v.h=o||0,v.y=l||0,v.x=0,v.c=f||[],v.cs=f.length,v.prelim=0,v.mod=0,v.shift=0,v.change=0,v.tl=null,v.tr=null,v.el=null,v.er=null,v.msel=0,v.mser=0}s.fromNode=function(a,o){if(!a)return null;var l=[];return a.children.forEach(function(f){l.push(s.fromNode(f,o))}),o?new s(a.height,a.width,a.x,l):new s(a.width,a.height,a.y,l)};function c(a,o,l){l?a.y+=o:a.x+=o,a.children.forEach(function(f){c(f,o,l)})}function r(a,o){var l=o?a.y:a.x;return a.children.forEach(function(f){l=Math.min(r(f,o),l)}),l}function h(a,o){var l=r(a,o);c(a,-l,o)}function n(a,o,l){l?o.y=a.x:o.x=a.x,a.c.forEach(function(f,v){n(f,o.children[v],l)})}function i(a,o,l){l===void 0&&(l=0),o?(a.x=l,l+=a.width):(a.y=l,l+=a.height),a.children.forEach(function(f){i(f,o,l)})}t.exports=function(a,o){o===void 0&&(o={});var l=o.isHorizontal;function f(F){if(F.cs===0){v(F);return}f(F.c[0]);for(var K=L(M(F.c[0].el),0,null),G=1;G<F.cs;++G){f(F.c[G]);var U=M(F.c[G].er);b(F,G,K),K=L(U,G,K)}S(F),v(F)}function v(F){F.cs===0?(F.el=F,F.er=F,F.msel=F.mser=0):(F.el=F.c[0].el,F.msel=F.c[0].msel,F.er=F.c[F.cs-1].er,F.mser=F.c[F.cs-1].mser)}function b(F,K,G){for(var U=F.c[K-1],Z=U.mod,J=F.c[K],rt=J.mod;U!==null&&J!==null;){M(U)>G.low&&(G=G.nxt);var vt=Z+U.prelim+U.w-(rt+J.prelim);vt>0&&(rt+=vt,g(F,K,G.index,vt));var mt=M(U),ut=M(J);mt<=ut&&(U=_(U),U!==null&&(Z+=U.mod)),mt>=ut&&(J=m(J),J!==null&&(rt+=J.mod))}!U&&!!J?x(F,K,J,rt):!!U&&!J&&y(F,K,U,Z)}function g(F,K,G,U){F.c[K].mod+=U,F.c[K].msel+=U,F.c[K].mser+=U,A(F,K,G,U)}function m(F){return F.cs===0?F.tl:F.c[0]}function _(F){return F.cs===0?F.tr:F.c[F.cs-1]}function M(F){return F.y+F.h}function x(F,K,G,U){var Z=F.c[0].el;Z.tl=G;var J=U-G.mod-F.c[0].msel;Z.mod+=J,Z.prelim-=J,F.c[0].el=F.c[K].el,F.c[0].msel=F.c[K].msel}function y(F,K,G,U){var Z=F.c[K].er;Z.tr=G;var J=U-G.mod-F.c[K].mser;Z.mod+=J,Z.prelim-=J,F.c[K].er=F.c[K-1].er,F.c[K].mser=F.c[K-1].mser}function S(F){F.prelim=(F.c[0].prelim+F.c[0].mod+F.c[F.cs-1].mod+F.c[F.cs-1].prelim+F.c[F.cs-1].w)/2-F.w/2}function P(F,K){K+=F.mod,F.x=F.prelim+K,O(F);for(var G=0;G<F.cs;G++)P(F.c[G],K)}function A(F,K,G,U){if(G!==K-1){var Z=K-G;F.c[G+1].shift+=U/Z,F.c[K].shift-=U/Z,F.c[K].change-=U-U/Z}}function O(F){for(var K=0,G=0,U=0;U<F.cs;U++)K+=F.c[U].shift,G+=K+F.c[U].change,F.c[U].mod+=G}function L(F,K,G){for(;G!==null&&F>=G.low;)G=G.nxt;return{low:F,index:K,nxt:G}}i(a,l);var H=s.fromNode(a,l);return f(H),P(H,0),n(H,a,l),h(a,l),a}},function(t,u,s){function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),h=s(115),n=s(17),i=s(7),a=function(f){c(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var m=this;return m.rootNode.width=0,n(m.rootNode,m.options,h)},v}(r),o={};function l(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=l},function(t,u,s){var c=s(7);function r(i,a){i===void 0&&(i=0),a===void 0&&(a=[]);var o=this;o.x=o.y=0,o.leftChild=o.rightChild=null,o.height=0,o.children=a}var h={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function n(i,a,o){o?(a.x=i.x,a.y=i.y):(a.x=i.y,a.y=i.x),i.children.forEach(function(l,f){n(l,a.children[f],o)})}t.exports=function(i,a){a===void 0&&(a={}),a=c.assign({},h,a);var o=0;function l(m){if(!m)return null;m.width=0,m.depth&&m.depth>o&&(o=m.depth);var _=m.children,M=_.length,x=new r(m.height,[]);return _.forEach(function(y,S){var P=l(y);x.children.push(P),S===0&&(x.leftChild=P),S===M-1&&(x.rightChild=P)}),x.originNode=m,x.isLeaf=m.isLeaf(),x}function f(m){if(m.isLeaf||m.children.length===0)m.drawingDepth=o;else{var _=m.children.map(function(x){return f(x)}),M=Math.min.apply(null,_);m.drawingDepth=M-1}return m.drawingDepth}var v;function b(m){m.x=m.drawingDepth*a.rankSep,m.isLeaf?(m.y=0,v&&(m.y=v.y+v.height+a.nodeSep,m.originNode.parent!==v.originNode.parent&&(m.y+=a.subTreeSep)),v=m):(m.children.forEach(function(_){b(_)}),m.y=(m.leftChild.y+m.rightChild.y)/2)}var g=l(i);return f(g),b(g),n(g,i,a.isHorizontal),i}},function(t,u,s){function c(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var r=s(11),h=s(117),n=s(30),i=s(7),a=["LR","RL","H"],o=a[0],l=function(b){c(g,b);function g(){return b.apply(this,arguments)||this}var m=g.prototype;return m.execute=function(){var M=this,x=M.options,y=M.rootNode;x.isHorizontal=!0;var S=x.indent,P=S===void 0?20:S,A=x.dropCap,O=A===void 0?!0:A,L=x.direction||o;if(L&&a.indexOf(L)===-1)throw new TypeError("Invalid direction: "+L);if(L===a[0])h(y,P,O);else if(L===a[1])h(y,P,O),y.right2left();else if(L===a[2]){var H=n(y,x),F=H.left,K=H.right;h(F,P,O),F.right2left(),h(K,P,O);var G=F.getBoundingBox();K.translate(G.width,0),y.x=K.x-y.width/2}return y},g}(r),f={};function v(b,g){return g=i.assign({},f,g),new l(b,g).execute()}t.exports=v},function(t,u){function s(c,r,h,n){if(!n)try{if(c.id===c.parent.children[0].id){c.x+=h*c.depth,c.y=r?r.y:0;return}}catch(i){}c.x+=h*c.depth,c.y=r?r.y+r.height:0}t.exports=function(c,r,h){var n=null;c.eachNode(function(i){s(i,n,r,h),n=i})}},function(t,u,s){function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),h=s(119),n=s(17),i=s(7),a=function(f){c(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var m=this;return n(m.rootNode,m.options,h)},v}(r),o={};function l(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=l},function(t,u,s){var c=s(7);function r(i,a){var o=0;return i.children.length?i.children.forEach(function(l){o+=r(l,a)}):o=i.height,i._subTreeSep=a.getSubTreeSep(i.data),i.totalHeight=Math.max(i.height,o)+2*i._subTreeSep,i.totalHeight}function h(i){var a=i.children,o=a.length;if(o){a.forEach(function(m){h(m)});var l=a[0],f=a[o-1],v=f.y-l.y+f.height,b=0;if(a.forEach(function(m){b+=m.totalHeight}),v>i.height)i.y=l.y+v/2-i.height/2;else if(a.length!==1||i.height>b){var g=i.y+(i.height-v)/2-l.y;a.forEach(function(m){m.translate(0,g)})}else i.y=(l.y+l.height/2+f.y+f.height/2)/2-i.height/2}}var n={getSubTreeSep:function(){return 0}};t.exports=function(i,a){a===void 0&&(a={}),a=c.assign({},n,a),i.parent={x:0,width:0,height:0,y:0},i.BFTraverse(function(o){o.x=o.parent.x+o.parent.width}),i.parent=null,r(i,a),i.startY=0,i.y=i.totalHeight/2-i.height/2,i.eachNode(function(o){var l=o.children,f=l.length;if(f){var v=l[0];if(v.startY=o.startY+o._subTreeSep,f===1)v.y=o.y+o.height/2-v.height/2;else{v.y=v.startY+v.totalHeight/2-v.height/2;for(var b=1;b<f;b++){var g=l[b];g.startY=l[b-1].startY+l[b-1].totalHeight,g.y=g.startY+g.totalHeight/2-g.height/2}}}}),h(i)}}])})},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/augment.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=function(){for(var r=[],h=0;h<arguments.length;h++)r[h]=arguments[h];for(var n=r[0],i=1;i<r.length;i++){var a=r[i];u.default(a)&&(a=a.prototype),t.default(n.prototype,a)}};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/cache.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function u(){this.map={}}return u.prototype.has=function(s){return this.map[s]!==void 0},u.prototype.get=function(s,c){var r=this.map[s];return r===void 0?c:r},u.prototype.set=function(s,c){this.map[s]=c},u.prototype.clear=function(){this.map={}},u.prototype.delete=function(s){delete this.map[s]},u.prototype.size=function(){return Object.keys(this.map).length},u}();T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clamp.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c,r){return s<c?c:s>r?r:s};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clear-animation-frame.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u){var s=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;s(u)}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clone.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=function s(c){if(typeof c!="object"||c===null)return c;var r;if(t.default(c)){r=[];for(var h=0,n=c.length;h<n;h++)typeof c[h]=="object"&&c[h]!=null?r[h]=s(c[h]):r[h]=c[h]}else{r={};for(var i in c)typeof c[i]=="object"&&c[i]!=null?r[i]=s(c[i]):r[i]=c[i]}return r};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=function(c,r){return t.default(c)?c.indexOf(r)>-1:!1};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/debounce.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s,c){var r;return function(){var h=this,n=arguments,i=function(){r=null,c||u.apply(h,n)},a=c&&!r;clearTimeout(r),r=setTimeout(i,s),a&&u.apply(h,n)}}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/deep-mix.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),s=5;function c(h,n,i,a){i=i||0,a=a||s;for(var o in n)if(n.hasOwnProperty(o)){var l=n[o];l!==null&&u.default(l)?(u.default(h[o])||(h[o]={}),i<a?c(h[o],l,i+1,a):h[o]=n[o]):t.default(l)?(h[o]=[],h[o]=h[o].concat(l)):l!==void 0&&(h[o]=l)}}var r=function(n){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];for(var o=0;o<i.length;o+=1)c(n,i[o]);return n};T.default=r},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/difference.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),s=function(r,h){return h===void 0&&(h=[]),t.default(r,function(n){return!u.default(h,n)})};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js");function s(c,r){if(!!c){var h;if(t.default(c))for(var n=0,i=c.length;n<i&&(h=r(c[n],n),h!==!1);n++);else if(u.default(c)){for(var a in c)if(c.hasOwnProperty(a)&&(h=r(c[a],a),h===!1))break}}}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/ends-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");function s(c,r){return t.default(c)||u.default(c)?c[c.length-1]===r:!1}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/every.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){for(var r=0;r<s.length;r++)if(!c(s[r],r))return!1;return!0};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/extend.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=function(r,h,n,i){u.default(h)||(n=h,h=r,r=function(){});var a=Object.create?function(l,f){return Object.create(l,{constructor:{value:f}})}:function(l,f){function v(){}v.prototype=l;var b=new v;return b.constructor=f,b},o=a(h.prototype,r);return r.prototype=t.default(o,r.prototype),r.superclass=a(h.prototype,h),t.default(o,n),t.default(r,i),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=function(c,r){if(!t.default(c))return c;for(var h=[],n=0;n<c.length;n++){var i=c[n];r(i,n)&&h.push(i)}return h};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/find-index.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s,c){c===void 0&&(c=0);for(var r=c;r<u.length;r++)if(s(u[r],r))return r;return-1}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/find.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),c=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js");function r(h,n){if(!s.default(h))return null;var i;if(t.default(n)&&(i=n),c.default(n)&&(i=function(l){return u.default(l,n)}),i){for(var a=0;a<h.length;a+=1)if(i(h[a]))return h[a]}return null}T.default=r},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/first-value.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=function(r,h){for(var n=null,i=0;i<r.length;i++){var a=r[i],o=a[h];if(!t.default(o)){u.default(o)?n=o[0]:n=o;break}}return n};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/fixed-base.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){var r=c.toString(),h=r.indexOf(".");if(h===-1)return Math.round(s);var n=r.substr(h+1).length;return n>20&&(n=20),parseFloat(s.toFixed(n))};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten-deep.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=function s(c,r){if(r===void 0&&(r=[]),!t.default(c))r.push(c);else for(var h=0;h<c.length;h+=1)s(c[h],r);return r};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=function(c){if(!t.default(c))return[];for(var r=[],h=0;h<c.length;h++)r=r.concat(c[h]);return r};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/for-in.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js");T.default=t.default},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-range.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=function(c){var r=c.filter(function(o){return!isNaN(o)});if(!r.length)return{min:0,max:0};if(t.default(c[0])){for(var h=[],n=0;n<c.length;n++)h=h.concat(c[n]);r=h}var i=Math.max.apply(null,r),a=Math.min.apply(null,r);return{min:a,max:i}};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={}.toString,u=function(c){return t.call(c).replace(/^\[object /,"").replace(/]$/,"")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-wrap-behavior.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s){return u["_wrap_"+s]}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");T.default=function(u,s,c){for(var r=0,h=t.default(s)?s.split("."):s;u&&r<h.length;)u=u[h[r++]];return u===void 0||r<h.length?c:u}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.prototype.hasOwnProperty;function c(r,h){if(!h||!t.default(r))return{};for(var n={},i=u.default(h)?h:function(f){return f[h]},a,o=0;o<r.length;o++){var l=r[o];a=i(l),s.call(n,a)?n[a].push(l):n[a]=[l]}return n}T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js"),c=function(h,n){if(!n)return{0:h};if(!u.default(n)){var i=t.default(n)?n:n.replace(/\s+/g,"").split("*");n=function(l){for(var f="_",v=0,b=i.length;v<b;v++)f+=l[i[v]]&&l[i[v]].toString();return f}}var a=s.default(h,n);return a};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js");T.default=function(u,s){if(!s)return[u];var c=t.default(u,s),r=[];for(var h in c)r.push(c[h]);return r}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-key.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js");T.default=t.default},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-value.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js");T.default=function(s,c){return t.default(u.default(s),c)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t,u){return t.hasOwnProperty(u)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/head.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function u(s){if(t.default(s))return s[0]}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/identity.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){return t}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/index-of.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=function(c,r){if(!t.default(c))return-1;var h=Array.prototype.indexOf;if(h)return h.call(c,r);for(var n=-1,i=0;i<c.length;i++)if(c[i]===r){n=i;break}return n};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js");Object.defineProperty(T,"contains",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(T,"includes",{enumerable:!0,get:function(){return t.default}});var u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/difference.js");Object.defineProperty(T,"difference",{enumerable:!0,get:function(){return u.default}});var s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/find.js");Object.defineProperty(T,"find",{enumerable:!0,get:function(){return s.default}});var c=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/find-index.js");Object.defineProperty(T,"findIndex",{enumerable:!0,get:function(){return c.default}});var r=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/first-value.js");Object.defineProperty(T,"firstValue",{enumerable:!0,get:function(){return r.default}});var h=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten.js");Object.defineProperty(T,"flatten",{enumerable:!0,get:function(){return h.default}});var n=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten-deep.js");Object.defineProperty(T,"flattenDeep",{enumerable:!0,get:function(){return n.default}});var i=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-range.js");Object.defineProperty(T,"getRange",{enumerable:!0,get:function(){return i.default}});var a=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull.js");Object.defineProperty(T,"pull",{enumerable:!0,get:function(){return a.default}});var o=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js");Object.defineProperty(T,"pullAt",{enumerable:!0,get:function(){return o.default}});var l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/reduce.js");Object.defineProperty(T,"reduce",{enumerable:!0,get:function(){return l.default}});var f=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/remove.js");Object.defineProperty(T,"remove",{enumerable:!0,get:function(){return f.default}});var v=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/sort-by.js");Object.defineProperty(T,"sortBy",{enumerable:!0,get:function(){return v.default}});var b=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/union.js");Object.defineProperty(T,"union",{enumerable:!0,get:function(){return b.default}});var g=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js");Object.defineProperty(T,"uniq",{enumerable:!0,get:function(){return g.default}});var m=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values-of-key.js");Object.defineProperty(T,"valuesOfKey",{enumerable:!0,get:function(){return m.default}});var _=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/head.js");Object.defineProperty(T,"head",{enumerable:!0,get:function(){return _.default}});var M=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/last.js");Object.defineProperty(T,"last",{enumerable:!0,get:function(){return M.default}});var x=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/starts-with.js");Object.defineProperty(T,"startsWith",{enumerable:!0,get:function(){return x.default}});var y=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/ends-with.js");Object.defineProperty(T,"endsWith",{enumerable:!0,get:function(){return y.default}});var S=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js");Object.defineProperty(T,"filter",{enumerable:!0,get:function(){return S.default}});var P=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/every.js");Object.defineProperty(T,"every",{enumerable:!0,get:function(){return P.default}});var A=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/some.js");Object.defineProperty(T,"some",{enumerable:!0,get:function(){return A.default}});var O=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group.js");Object.defineProperty(T,"group",{enumerable:!0,get:function(){return O.default}});var L=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js");Object.defineProperty(T,"groupBy",{enumerable:!0,get:function(){return L.default}});var H=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js");Object.defineProperty(T,"groupToMap",{enumerable:!0,get:function(){return H.default}});var F=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-wrap-behavior.js");Object.defineProperty(T,"getWrapBehavior",{enumerable:!0,get:function(){return F.default}});var K=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/wrap-behavior.js");Object.defineProperty(T,"wrapBehavior",{enumerable:!0,get:function(){return K.default}});var G=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/number2color.js");Object.defineProperty(T,"number2color",{enumerable:!0,get:function(){return G.default}});var U=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/parse-radius.js");Object.defineProperty(T,"parseRadius",{enumerable:!0,get:function(){return U.default}});var Z=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clamp.js");Object.defineProperty(T,"clamp",{enumerable:!0,get:function(){return Z.default}});var J=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/fixed-base.js");Object.defineProperty(T,"fixedBase",{enumerable:!0,get:function(){return J.default}});var rt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-decimal.js");Object.defineProperty(T,"isDecimal",{enumerable:!0,get:function(){return rt.default}});var vt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-even.js");Object.defineProperty(T,"isEven",{enumerable:!0,get:function(){return vt.default}});var mt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-integer.js");Object.defineProperty(T,"isInteger",{enumerable:!0,get:function(){return mt.default}});var ut=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-negative.js");Object.defineProperty(T,"isNegative",{enumerable:!0,get:function(){return ut.default}});var Rt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number-equal.js");Object.defineProperty(T,"isNumberEqual",{enumerable:!0,get:function(){return Rt.default}});var Ft=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-odd.js");Object.defineProperty(T,"isOdd",{enumerable:!0,get:function(){return Ft.default}});var wt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-positive.js");Object.defineProperty(T,"isPositive",{enumerable:!0,get:function(){return wt.default}});var Mt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/max-by.js");Object.defineProperty(T,"maxBy",{enumerable:!0,get:function(){return Mt.default}});var St=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/min-by.js");Object.defineProperty(T,"minBy",{enumerable:!0,get:function(){return St.default}});var At=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mod.js");Object.defineProperty(T,"mod",{enumerable:!0,get:function(){return At.default}});var nt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-degree.js");Object.defineProperty(T,"toDegree",{enumerable:!0,get:function(){return nt.default}});var Pt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-integer.js");Object.defineProperty(T,"toInteger",{enumerable:!0,get:function(){return Pt.default}});var z=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-radian.js");Object.defineProperty(T,"toRadian",{enumerable:!0,get:function(){return z.default}});var q=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/for-in.js");Object.defineProperty(T,"forIn",{enumerable:!0,get:function(){return q.default}});var gt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js");Object.defineProperty(T,"has",{enumerable:!0,get:function(){return gt.default}});var et=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-key.js");Object.defineProperty(T,"hasKey",{enumerable:!0,get:function(){return et.default}});var at=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-value.js");Object.defineProperty(T,"hasValue",{enumerable:!0,get:function(){return at.default}});var xt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js");Object.defineProperty(T,"keys",{enumerable:!0,get:function(){return xt.default}});var k=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js");Object.defineProperty(T,"isMatch",{enumerable:!0,get:function(){return k.default}});var ot=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js");Object.defineProperty(T,"values",{enumerable:!0,get:function(){return ot.default}});var it=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-case.js");Object.defineProperty(T,"lowerCase",{enumerable:!0,get:function(){return it.default}});var $=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-first.js");Object.defineProperty(T,"lowerFirst",{enumerable:!0,get:function(){return $.default}});var _t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/substitute.js");Object.defineProperty(T,"substitute",{enumerable:!0,get:function(){return _t.default}});var yt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-case.js");Object.defineProperty(T,"upperCase",{enumerable:!0,get:function(){return yt.default}});var Nt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-first.js");Object.defineProperty(T,"upperFirst",{enumerable:!0,get:function(){return Nt.default}});var $t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js");Object.defineProperty(T,"getType",{enumerable:!0,get:function(){return $t.default}});var ee=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-arguments.js");Object.defineProperty(T,"isArguments",{enumerable:!0,get:function(){return ee.default}});var Gt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js");Object.defineProperty(T,"isArray",{enumerable:!0,get:function(){return Gt.default}});var Ht=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");Object.defineProperty(T,"isArrayLike",{enumerable:!0,get:function(){return Ht.default}});var ae=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-boolean.js");Object.defineProperty(T,"isBoolean",{enumerable:!0,get:function(){return ae.default}});var le=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-date.js");Object.defineProperty(T,"isDate",{enumerable:!0,get:function(){return le.default}});var Be=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-error.js");Object.defineProperty(T,"isError",{enumerable:!0,get:function(){return Be.default}});var Ce=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");Object.defineProperty(T,"isFunction",{enumerable:!0,get:function(){return Ce.default}});var We=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-finite.js");Object.defineProperty(T,"isFinite",{enumerable:!0,get:function(){return We.default}});var Ye=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");Object.defineProperty(T,"isNil",{enumerable:!0,get:function(){return Ye.default}});var wn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-null.js");Object.defineProperty(T,"isNull",{enumerable:!0,get:function(){return wn.default}});var er=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");Object.defineProperty(T,"isNumber",{enumerable:!0,get:function(){return er.default}});var Lr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js");Object.defineProperty(T,"isObject",{enumerable:!0,get:function(){return Lr.default}});var on=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js");Object.defineProperty(T,"isObjectLike",{enumerable:!0,get:function(){return on.default}});var en=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js");Object.defineProperty(T,"isPlainObject",{enumerable:!0,get:function(){return en.default}});var An=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js");Object.defineProperty(T,"isPrototype",{enumerable:!0,get:function(){return An.default}});var Bn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-reg-exp.js");Object.defineProperty(T,"isRegExp",{enumerable:!0,get:function(){return Bn.default}});var gr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");Object.defineProperty(T,"isString",{enumerable:!0,get:function(){return gr.default}});var hi=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");Object.defineProperty(T,"isType",{enumerable:!0,get:function(){return hi.default}});var Ae=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-undefined.js");Object.defineProperty(T,"isUndefined",{enumerable:!0,get:function(){return Ae.default}});var Me=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-element.js");Object.defineProperty(T,"isElement",{enumerable:!0,get:function(){return Me.default}});var Qt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/request-animation-frame.js");Object.defineProperty(T,"requestAnimationFrame",{enumerable:!0,get:function(){return Qt.default}});var ge=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clear-animation-frame.js");Object.defineProperty(T,"clearAnimationFrame",{enumerable:!0,get:function(){return ge.default}});var Wt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/augment.js");Object.defineProperty(T,"augment",{enumerable:!0,get:function(){return Wt.default}});var re=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clone.js");Object.defineProperty(T,"clone",{enumerable:!0,get:function(){return re.default}});var Te=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/debounce.js");Object.defineProperty(T,"debounce",{enumerable:!0,get:function(){return Te.default}});var ue=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/memoize.js");Object.defineProperty(T,"memoize",{enumerable:!0,get:function(){return ue.default}});var be=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/deep-mix.js");Object.defineProperty(T,"deepMix",{enumerable:!0,get:function(){return be.default}});var Xe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js");Object.defineProperty(T,"each",{enumerable:!0,get:function(){return Xe.default}});var Rn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/extend.js");Object.defineProperty(T,"extend",{enumerable:!0,get:function(){return Rn.default}});var tr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index-of.js");Object.defineProperty(T,"indexOf",{enumerable:!0,get:function(){return tr.default}});var Mn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-empty.js");Object.defineProperty(T,"isEmpty",{enumerable:!0,get:function(){return Mn.default}});var vn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js");Object.defineProperty(T,"isEqual",{enumerable:!0,get:function(){return vn.default}});var Ar=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal-with.js");Object.defineProperty(T,"isEqualWith",{enumerable:!0,get:function(){return Ar.default}});var or=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/map.js");Object.defineProperty(T,"map",{enumerable:!0,get:function(){return or.default}});var cn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/map-values.js");Object.defineProperty(T,"mapValues",{enumerable:!0,get:function(){return cn.default}});var Pr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js");Object.defineProperty(T,"mix",{enumerable:!0,get:function(){return Pr.default}}),Object.defineProperty(T,"assign",{enumerable:!0,get:function(){return Pr.default}});var Sr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get.js");Object.defineProperty(T,"get",{enumerable:!0,get:function(){return Sr.default}});var De=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/set.js");Object.defineProperty(T,"set",{enumerable:!0,get:function(){return De.default}});var $e=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pick.js");Object.defineProperty(T,"pick",{enumerable:!0,get:function(){return $e.default}});var Ve=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/throttle.js");Object.defineProperty(T,"throttle",{enumerable:!0,get:function(){return Ve.default}});var En=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-array.js");Object.defineProperty(T,"toArray",{enumerable:!0,get:function(){return En.default}});var xn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js");Object.defineProperty(T,"toString",{enumerable:!0,get:function(){return xn.default}});var Nn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/unique-id.js");Object.defineProperty(T,"uniqueId",{enumerable:!0,get:function(){return Nn.default}});var mn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/noop.js");Object.defineProperty(T,"noop",{enumerable:!0,get:function(){return mn.default}});var Dn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/identity.js");Object.defineProperty(T,"identity",{enumerable:!0,get:function(){return Dn.default}});var $n=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/size.js");Object.defineProperty(T,"size",{enumerable:!0,get:function(){return $n.default}});var Wn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/cache.js");Object.defineProperty(T,"Cache",{enumerable:!0,get:function(){return Wn.default}})},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-arguments.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(c){return t.default(c,"Arguments")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s!==null&&typeof s!="function"&&isFinite(s.length)};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(u){return Array.isArray?Array.isArray(u):t.default(u,"Array")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-boolean.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(c){return t.default(c,"Boolean")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-date.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(c){return t.default(c,"Date")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-decimal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(c){return t.default(c)&&c%1!=0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-element.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s instanceof Element||s instanceof HTMLDocument};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-empty.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js"),c=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js"),r=Object.prototype.hasOwnProperty;function h(n){if(t.default(n))return!0;if(u.default(n))return!n.length;var i=s.default(n);if(i==="Map"||i==="Set")return!n.size;if(c.default(n))return!Object.keys(n).length;for(var a in n)if(r.call(n,a))return!1;return!0}T.default=h},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js");T.default=function(s,c,r){return t.default(r)?!!r(s,c):u.default(s,c)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),c=function r(h,n){if(h===n)return!0;if(!h||!n||s.default(h)||s.default(n))return!1;if(u.default(h)||u.default(n)){if(h.length!==n.length)return!1;for(var i=!0,a=0;a<h.length&&(i=r(h[a],n[a]),!!i);a++);return i}if(t.default(h)||t.default(n)){var o=Object.keys(h),l=Object.keys(n);if(o.length!==l.length)return!1;for(var i=!0,a=0;a<o.length&&(i=r(h[o[a]],n[o[a]]),!!i);a++);return i}return!1};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-error.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(c){return t.default(c,"Error")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-even.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(c){return t.default(c)&&c%2==0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-finite.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");function u(s){return t.default(s)&&isFinite(s)}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(u){return t.default(u,"Function")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-integer.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=Number.isInteger?Number.isInteger:function(s){return t.default(s)&&s%1==0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js");function s(c,r){var h=u.default(r),n=h.length;if(t.default(c))return!n;for(var i=0;i<n;i+=1){var a=h[i];if(r[a]!==c[a]||!(a in c))return!1}return!0}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-negative.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(c){return t.default(c)&&c<0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s==null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-null.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s===null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number-equal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=1e-5;function u(s,c,r){return r===void 0&&(r=t),Math.abs(s-c)<r}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(c){return t.default(c,"Number")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return typeof s=="object"&&s!==null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){var u=typeof t;return t!==null&&u==="object"||u==="function"}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-odd.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(c){return t.default(c)&&c%2!=0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),s=function(r){if(!t.default(r)||!u.default(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var h=r;Object.getPrototypeOf(h)!==null;)h=Object.getPrototypeOf(h);return Object.getPrototypeOf(r)===h};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-positive.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(c){return t.default(c)&&c>0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.prototype,u=function(c){var r=c&&c.constructor,h=typeof r=="function"&&r.prototype||t;return c===h};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-reg-exp.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(c){return t.default(c,"RegExp")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(u){return t.default(u,"String")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={}.toString,u=function(c,r){return t.call(c)==="[object "+r+"]"};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-undefined.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s===void 0};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.keys?function(c){return Object.keys(c)}:function(c){var r=[];return t.default(c,function(h,n){u.default(c)&&n==="prototype"||r.push(n)}),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/last.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function u(s){if(t.default(s)){var c=s;return c[c.length-1]}}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-case.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),u=function(c){return t.default(c).toLowerCase()};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-first.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),u=function(c){var r=t.default(c);return r.charAt(0).toLowerCase()+r.substring(1)};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/map-values.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js"),s=function(r){return r};T.default=function(c,r){r===void 0&&(r=s);var h={};return u.default(c)&&!t.default(c)&&Object.keys(c).forEach(function(n){h[n]=r(c[n],n)}),h}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/map.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=function(c,r){if(!t.default(c))return c;for(var h=[],n=0;n<c.length;n++){var i=c[n];h.push(r(i,n))}return h};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/max-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(c,r){if(!!u.default(c)){var h=c[0],n;s.default(r)?n=r(c[0]):n=c[0][r];var i;return t.default(c,function(a){s.default(r)?i=r(a):i=a[r],i>n&&(h=a,n=i)}),h}}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/memoize.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(u,s){if(!t.default(u))throw new TypeError("Expected a function");var c=function r(){for(var h=[],n=0;n<arguments.length;n++)h[n]=arguments[n];var i=s?s.apply(this,h):h[0],a=r.cache;if(a.has(i))return a.get(i);var o=u.apply(this,h);return a.set(i,o),o};return c.cache=new Map,c}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/min-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(c,r){if(!!u.default(c)){var h=c[0],n;s.default(r)?n=r(c[0]):n=c[0][r];var i;return t.default(c,function(a){s.default(r)?i=r(a):i=a[r],i<n&&(h=a,n=i)}),h}}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(s,c){for(var r in c)c.hasOwnProperty(r)&&r!=="constructor"&&c[r]!==void 0&&(s[r]=c[r])}function u(s,c,r,h){return c&&t(s,c),r&&t(s,r),h&&t(s,h),s}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/mod.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){return(s%c+c)%c};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/noop.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/number2color.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={};function u(s){var c=t[s];if(!c){for(var r=s.toString(16),h=r.length;h<6;h++)r="0"+r;c="#"+r,t[s]=c}return c}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/parse-radius.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js");function u(s){var c=0,r=0,h=0,n=0;return t.default(s)?s.length===1?c=r=h=n=s[0]:s.length===2?(c=h=s[0],r=n=s[1]):s.length===3?(c=s[0],r=n=s[1],h=s[2]):(c=s[0],r=s[1],h=s[2],n=s[3]):c=r=h=n=s,{r1:c,r2:r,r3:h,r4:n}}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pick.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),s=Object.prototype.hasOwnProperty;T.default=function(c,r){if(c===null||!u.default(c))return{};var h={};return t.default(r,function(n){s.call(c,n)&&(h[n]=c[n])}),h}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=Array.prototype.splice,s=function(r,h){if(!t.default(r))return[];for(var n=r?h.length:0,i=n-1;n--;){var a=void 0,o=h[n];(n===i||o!==a)&&(a=o,u.call(r,o,1))}return r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Array.prototype,u=t.splice,s=t.indexOf,c=function(h){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];for(var a=0;a<n.length;a++)for(var o=n[a],l=-1;(l=s.call(h,o))>-1;)u.call(h,l,1);return h};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/reduce.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),c=function(h,n,i){if(!u.default(h)&&!s.default(h))return h;var a=i;return t.default(h,function(o,l){a=n(a,o,l)}),a};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/remove.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js"),s=function(r,h){var n=[];if(!t.default(r))return n;for(var i=-1,a=[],o=r.length;++i<o;){var l=r[i];h(l,i,r)&&(n.push(l),a.push(i))}return u.default(r,a),n};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/request-animation-frame.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u){var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(c){return setTimeout(c,16)};return s(u)}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/set.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");T.default=function(c,r,h){var n=c,i=u.default(r)?r.split("."):r;return i.forEach(function(a,o){o<i.length-1?(t.default(n[a])||(n[a]=s.default(i[o+1])?[]:{}),n=n[a]):n[a]=h}),c}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/size.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function s(c){return t.default(c)?0:u.default(c)?c.length:Object.keys(c).length}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/some.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){for(var r=0;r<s.length;r++)if(c(s[r],r))return!0;return!1};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/sort-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");function c(r,h){var n;if(s.default(h))n=function(o,l){return h(o)-h(l)};else{var i=[];u.default(h)?i.push(h):t.default(h)&&(i=h),n=function(o,l){for(var f=0;f<i.length;f+=1){var v=i[f];if(o[v]>l[v])return 1;if(o[v]<l[v])return-1}return 0}}return r.sort(n),r}T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/starts-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");function s(c,r){return t.default(c)||u.default(c)?c[0]===r:!1}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/substitute.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s){return!u||!s?u:u.replace(/\\?\{([^{}]+)\}/g,function(c,r){return c.charAt(0)==="\\"?c.slice(1):s[r]===void 0?"":s[r]})}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/throttle.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t,u,s){var c,r,h,n,i=0;s||(s={});var a=function(){i=s.leading===!1?0:Date.now(),c=null,n=t.apply(r,h),c||(r=h=null)},o=function(){var f=Date.now();!i&&s.leading===!1&&(i=f);var v=u-(f-i);return r=this,h=arguments,v<=0||v>u?(c&&(clearTimeout(c),c=null),i=f,n=t.apply(r,h),c||(r=h=null)):!c&&s.trailing!==!1&&(c=setTimeout(a,v)),n};return o.cancel=function(){clearTimeout(c),i=0,c=r=h=null},o}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-array.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");T.default=function(u){return t.default(u)?Array.prototype.slice.call(u):[]}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-degree.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=180/Math.PI,u=function(c){return t*c};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-integer.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=parseInt},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-radian.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Math.PI/180,u=function(c){return t*c};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");T.default=function(u){return t.default(u)?"":u.toString()}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/union.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js"),u=function(){for(var c=[],r=0;r<arguments.length;r++)c[r]=arguments[r];return t.default([].concat.apply([],c))};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),s=function(r){var h=[];return u.default(r,function(n){t.default(h,n)||h.push(n)}),h};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/unique-id.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={};T.default=function(u){return u=u||"g",t[u]?t[u]+=1:t[u]=1,u+t[u]}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-case.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),u=function(c){return t.default(c).toUpperCase()};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-first.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),u=function(c){var r=t.default(c);return r.charAt(0).toUpperCase()+r.substring(1)};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/values-of-key.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");T.default=function(s,c){for(var r=[],h={},n=0;n<s.length;n++){var i=s[n],a=i[c];if(!u.default(a)){t.default(a)||(a=[a]);for(var o=0;o<a.length;o++){var l=a[o];h[l]||(r.push(l),h[l]=!0)}}}return r}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.values?function(c){return Object.values(c)}:function(c){var r=[];return t.default(c,function(h,n){u.default(c)&&n==="prototype"||r.push(h)}),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/wrap-behavior.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s){if(u["_wrap_"+s])return u["_wrap_"+s];var c=function(h){u[s](h)};return u["_wrap_"+s]=c,c}T.default=t},"./node_modules/_abs-svg-path@0.1.1@abs-svg-path/index.js":function(E,T){E.exports=e;function e(t){var u=0,s=0,c=0,r=0;return t.map(function(h){h=h.slice();var n=h[0],i=n.toUpperCase();if(n!=i)switch(h[0]=i,n){case"a":h[6]+=c,h[7]+=r;break;case"v":h[1]+=r;break;case"h":h[1]+=c;break;default:for(var a=1;a<h.length;)h[a++]+=c,h[a++]+=r}switch(i){case"Z":c=u,r=s;break;case"H":c=h[1];break;case"V":r=h[1];break;case"M":c=u=h[1],r=s=h[2];break;default:c=h[h.length-2],r=h[h.length-1]}return h})}},"./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(z,q){return z<q?-1:z>q?1:z>=q?0:NaN}function s(z){return z.length===1&&(z=c(z)),{left:function(gt,et,at,xt){for(at==null&&(at=0),xt==null&&(xt=gt.length);at<xt;){var k=at+xt>>>1;z(gt[k],et)<0?at=k+1:xt=k}return at},right:function(gt,et,at,xt){for(at==null&&(at=0),xt==null&&(xt=gt.length);at<xt;){var k=at+xt>>>1;z(gt[k],et)>0?xt=k:at=k+1}return at}}}function c(z){return function(q,gt){return u(z(q),gt)}}var r=s(u),h=r.right,n=r.left;function i(z,q){q==null&&(q=a);for(var gt=0,et=z.length-1,at=z[0],xt=new Array(et<0?0:et);gt<et;)xt[gt]=q(at,at=z[++gt]);return xt}function a(z,q){return[z,q]}function o(z,q,gt){var et=z.length,at=q.length,xt=new Array(et*at),k,ot,it,$;for(gt==null&&(gt=a),k=it=0;k<et;++k)for($=z[k],ot=0;ot<at;++ot,++it)xt[it]=gt($,q[ot]);return xt}function l(z,q){return q<z?-1:q>z?1:q>=z?0:NaN}function f(z){return z===null?NaN:+z}function v(z,q){var gt=z.length,et=0,at=-1,xt=0,k,ot,it=0;if(q==null)for(;++at<gt;)isNaN(k=f(z[at]))||(ot=k-xt,xt+=ot/++et,it+=ot*(k-xt));else for(;++at<gt;)isNaN(k=f(q(z[at],at,z)))||(ot=k-xt,xt+=ot/++et,it+=ot*(k-xt));if(et>1)return it/(et-1)}function b(z,q){var gt=v(z,q);return gt&&Math.sqrt(gt)}function g(z,q){var gt=z.length,et=-1,at,xt,k;if(q==null){for(;++et<gt;)if((at=z[et])!=null&&at>=at)for(xt=k=at;++et<gt;)(at=z[et])!=null&&(xt>at&&(xt=at),k<at&&(k=at))}else for(;++et<gt;)if((at=q(z[et],et,z))!=null&&at>=at)for(xt=k=at;++et<gt;)(at=q(z[et],et,z))!=null&&(xt>at&&(xt=at),k<at&&(k=at));return[xt,k]}var m=Array.prototype,_=m.slice,M=m.map;function x(z){return function(){return z}}function y(z){return z}function S(z,q,gt){z=+z,q=+q,gt=(at=arguments.length)<2?(q=z,z=0,1):at<3?1:+gt;for(var et=-1,at=Math.max(0,Math.ceil((q-z)/gt))|0,xt=new Array(at);++et<at;)xt[et]=z+et*gt;return xt}var P=Math.sqrt(50),A=Math.sqrt(10),O=Math.sqrt(2);function L(z,q,gt){var et,at=-1,xt,k,ot;if(q=+q,z=+z,gt=+gt,z===q&&gt>0)return[z];if((et=q<z)&&(xt=z,z=q,q=xt),(ot=H(z,q,gt))===0||!isFinite(ot))return[];if(ot>0)for(z=Math.ceil(z/ot),q=Math.floor(q/ot),k=new Array(xt=Math.ceil(q-z+1));++at<xt;)k[at]=(z+at)*ot;else for(z=Math.floor(z*ot),q=Math.ceil(q*ot),k=new Array(xt=Math.ceil(z-q+1));++at<xt;)k[at]=(z-at)/ot;return et&&k.reverse(),k}function H(z,q,gt){var et=(q-z)/Math.max(0,gt),at=Math.floor(Math.log(et)/Math.LN10),xt=et/Math.pow(10,at);return at>=0?(xt>=P?10:xt>=A?5:xt>=O?2:1)*Math.pow(10,at):-Math.pow(10,-at)/(xt>=P?10:xt>=A?5:xt>=O?2:1)}function F(z,q,gt){var et=Math.abs(q-z)/Math.max(0,gt),at=Math.pow(10,Math.floor(Math.log(et)/Math.LN10)),xt=et/at;return xt>=P?at*=10:xt>=A?at*=5:xt>=O&&(at*=2),q<z?-at:at}function K(z){return Math.ceil(Math.log(z.length)/Math.LN2)+1}function G(){var z=y,q=g,gt=K;function et(at){var xt,k=at.length,ot,it=new Array(k);for(xt=0;xt<k;++xt)it[xt]=z(at[xt],xt,at);var $=q(it),_t=$[0],yt=$[1],Nt=gt(it,_t,yt);Array.isArray(Nt)||(Nt=F(_t,yt,Nt),Nt=S(Math.ceil(_t/Nt)*Nt,yt,Nt));for(var $t=Nt.length;Nt[0]<=_t;)Nt.shift(),--$t;for(;Nt[$t-1]>yt;)Nt.pop(),--$t;var ee=new Array($t+1),Gt;for(xt=0;xt<=$t;++xt)Gt=ee[xt]=[],Gt.x0=xt>0?Nt[xt-1]:_t,Gt.x1=xt<$t?Nt[xt]:yt;for(xt=0;xt<k;++xt)ot=it[xt],_t<=ot&&ot<=yt&&ee[h(Nt,ot,0,$t)].push(at[xt]);return ee}return et.value=function(at){return arguments.length?(z=typeof at=="function"?at:x(at),et):z},et.domain=function(at){return arguments.length?(q=typeof at=="function"?at:x([at[0],at[1]]),et):q},et.thresholds=function(at){return arguments.length?(gt=typeof at=="function"?at:Array.isArray(at)?x(_.call(at)):x(at),et):gt},et}function U(z,q,gt){if(gt==null&&(gt=f),!!(et=z.length)){if((q=+q)<=0||et<2)return+gt(z[0],0,z);if(q>=1)return+gt(z[et-1],et-1,z);var et,at=(et-1)*q,xt=Math.floor(at),k=+gt(z[xt],xt,z),ot=+gt(z[xt+1],xt+1,z);return k+(ot-k)*(at-xt)}}function Z(z,q,gt){return z=M.call(z,f).sort(u),Math.ceil((gt-q)/(2*(U(z,.75)-U(z,.25))*Math.pow(z.length,-1/3)))}function J(z,q,gt){return Math.ceil((gt-q)/(3.5*b(z)*Math.pow(z.length,-1/3)))}function rt(z,q){var gt=z.length,et=-1,at,xt;if(q==null){for(;++et<gt;)if((at=z[et])!=null&&at>=at)for(xt=at;++et<gt;)(at=z[et])!=null&&at>xt&&(xt=at)}else for(;++et<gt;)if((at=q(z[et],et,z))!=null&&at>=at)for(xt=at;++et<gt;)(at=q(z[et],et,z))!=null&&at>xt&&(xt=at);return xt}function vt(z,q){var gt=z.length,et=gt,at=-1,xt,k=0;if(q==null)for(;++at<gt;)isNaN(xt=f(z[at]))?--et:k+=xt;else for(;++at<gt;)isNaN(xt=f(q(z[at],at,z)))?--et:k+=xt;if(et)return k/et}function mt(z,q){var gt=z.length,et=-1,at,xt=[];if(q==null)for(;++et<gt;)isNaN(at=f(z[et]))||xt.push(at);else for(;++et<gt;)isNaN(at=f(q(z[et],et,z)))||xt.push(at);return U(xt.sort(u),.5)}function ut(z){for(var q=z.length,gt,et=-1,at=0,xt,k;++et<q;)at+=z[et].length;for(xt=new Array(at);--q>=0;)for(k=z[q],gt=k.length;--gt>=0;)xt[--at]=k[gt];return xt}function Rt(z,q){var gt=z.length,et=-1,at,xt;if(q==null){for(;++et<gt;)if((at=z[et])!=null&&at>=at)for(xt=at;++et<gt;)(at=z[et])!=null&&xt>at&&(xt=at)}else for(;++et<gt;)if((at=q(z[et],et,z))!=null&&at>=at)for(xt=at;++et<gt;)(at=q(z[et],et,z))!=null&&xt>at&&(xt=at);return xt}function Ft(z,q){for(var gt=q.length,et=new Array(gt);gt--;)et[gt]=z[q[gt]];return et}function wt(z,q){if(!!(gt=z.length)){var gt,et=0,at=0,xt,k=z[at];for(q==null&&(q=u);++et<gt;)(q(xt=z[et],k)<0||q(k,k)!==0)&&(k=xt,at=et);if(q(k,k)===0)return at}}function Mt(z,q,gt){for(var et=(gt==null?z.length:gt)-(q=q==null?0:+q),at,xt;et;)xt=Math.random()*et--|0,at=z[et+q],z[et+q]=z[xt+q],z[xt+q]=at;return z}function St(z,q){var gt=z.length,et=-1,at,xt=0;if(q==null)for(;++et<gt;)(at=+z[et])&&(xt+=at);else for(;++et<gt;)(at=+q(z[et],et,z))&&(xt+=at);return xt}function At(z){if(!(xt=z.length))return[];for(var q=-1,gt=Rt(z,nt),et=new Array(gt);++q<gt;)for(var at=-1,xt,k=et[q]=new Array(xt);++at<xt;)k[at]=z[at][q];return et}function nt(z){return z.length}function Pt(){return At(arguments)}t.bisect=h,t.bisectRight=h,t.bisectLeft=n,t.ascending=u,t.bisector=s,t.cross=o,t.descending=l,t.deviation=b,t.extent=g,t.histogram=G,t.thresholdFreedmanDiaconis=Z,t.thresholdScott=J,t.thresholdSturges=K,t.max=rt,t.mean=vt,t.median=mt,t.merge=ut,t.min=Rt,t.pairs=i,t.permute=Ft,t.quantile=U,t.range=S,t.scan=wt,t.shuffle=Mt,t.sum=St,t.ticks=L,t.tickIncrement=H,t.tickStep=F,t.transpose=At,t.variance=v,t.zip=Pt,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-array@2.11.0@d3-array/dist/d3-array.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(u,s){s(T)})(this,function(u){"use strict";function s(De,$e){return De<$e?-1:De>$e?1:De>=$e?0:NaN}function c(De){var $e=De,Ve=De;De.length===1&&($e=function(Dn,$n){return De(Dn)-$n},Ve=r(De));function En(mn,Dn,$n,Wn){for($n==null&&($n=0),Wn==null&&(Wn=mn.length);$n<Wn;){var _n=$n+Wn>>>1;Ve(mn[_n],Dn)<0?$n=_n+1:Wn=_n}return $n}function xn(mn,Dn,$n,Wn){for($n==null&&($n=0),Wn==null&&(Wn=mn.length);$n<Wn;){var _n=$n+Wn>>>1;Ve(mn[_n],Dn)>0?Wn=_n:$n=_n+1}return $n}function Nn(mn,Dn,$n,Wn){$n==null&&($n=0),Wn==null&&(Wn=mn.length);var _n=En(mn,Dn,$n,Wn-1);return _n>$n&&$e(mn[_n-1],Dn)>-$e(mn[_n],Dn)?_n-1:_n}return{left:En,center:Nn,right:xn}}function r(De){return function($e,Ve){return s(De($e),Ve)}}function h(De){return De===null?NaN:+De}function n(De,$e){var Ve,En,xn,Nn,mn,Dn,$n,xn,Wn,_n,xr,mr,Fr;return t.__generator(this,function(xi){switch(xi.label){case 0:if($e!==void 0)return[3,9];xi.label=1;case 1:xi.trys.push([1,6,7,8]),Ve=t.__values(De),En=Ve.next(),xi.label=2;case 2:return En.done?[3,5]:(xn=En.value,xn!=null&&(xn=+xn)>=xn?[4,xn]:[3,4]);case 3:xi.sent(),xi.label=4;case 4:return En=Ve.next(),[3,2];case 5:return[3,8];case 6:return Nn=xi.sent(),_n={error:Nn},[3,8];case 7:try{En&&!En.done&&(xr=Ve.return)&&xr.call(Ve)}finally{if(_n)throw _n.error}return[7];case 8:return[3,17];case 9:mn=-1,xi.label=10;case 10:xi.trys.push([10,15,16,17]),Dn=t.__values(De),$n=Dn.next(),xi.label=11;case 11:return $n.done?[3,14]:(xn=$n.value,(xn=$e(xn,++mn,De))!=null&&(xn=+xn)>=xn?[4,xn]:[3,13]);case 12:xi.sent(),xi.label=13;case 13:return $n=Dn.next(),[3,11];case 14:return[3,17];case 15:return Wn=xi.sent(),mr={error:Wn},[3,17];case 16:try{$n&&!$n.done&&(Fr=Dn.return)&&Fr.call(Dn)}finally{if(mr)throw mr.error}return[7];case 17:return[2]}})}var i=c(s),a=i.right,o=i.left,l=c(h).center;function f(De,$e){var Ve,En,xn,Nn,mn=0;if($e===void 0)try{for(var Dn=t.__values(De),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=$n.value;Wn!=null&&(Wn=+Wn)>=Wn&&++mn}}catch(Fr){Ve={error:Fr}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}else{var _n=-1;try{for(var xr=t.__values(De),mr=xr.next();!mr.done;mr=xr.next()){var Wn=mr.value;(Wn=$e(Wn,++_n,De))!=null&&(Wn=+Wn)>=Wn&&++mn}}catch(Fr){xn={error:Fr}}finally{try{mr&&!mr.done&&(Nn=xr.return)&&Nn.call(xr)}finally{if(xn)throw xn.error}}}return mn}function v(De){return De.length|0}function b(De){return!(De>0)}function g(De){return typeof De!="object"||"length"in De?De:Array.from(De)}function m(De){return function($e){return De.apply(void 0,t.__spread($e))}}function _(){for(var De=[],$e=0;$e<arguments.length;$e++)De[$e]=arguments[$e];var Ve=typeof De[De.length-1]=="function"&&m(De.pop());De=De.map(g);var En=De.map(v),xn=De.length-1,Nn=new Array(xn+1).fill(0),mn=[];if(xn<0||En.some(b))return mn;for(;;){mn.push(Nn.map(function($n,Wn){return De[Wn][$n]}));for(var Dn=xn;++Nn[Dn]===En[Dn];){if(Dn===0)return Ve?mn.map(Ve):mn;Nn[Dn--]=0}}}function M(De,$e){var Ve=0,En=0;return Float64Array.from(De,$e===void 0?function(xn){return Ve+=+xn||0}:function(xn){return Ve+=+$e(xn,En++,De)||0})}function x(De,$e){return $e<De?-1:$e>De?1:$e>=De?0:NaN}function y(De,$e){var Ve,En,xn,Nn,mn=0,Dn,$n=0,Wn=0;if($e===void 0)try{for(var _n=t.__values(De),xr=_n.next();!xr.done;xr=_n.next()){var mr=xr.value;mr!=null&&(mr=+mr)>=mr&&(Dn=mr-$n,$n+=Dn/++mn,Wn+=Dn*(mr-$n))}}catch(Aa){Ve={error:Aa}}finally{try{xr&&!xr.done&&(En=_n.return)&&En.call(_n)}finally{if(Ve)throw Ve.error}}else{var Fr=-1;try{for(var xi=t.__values(De),Ta=xi.next();!Ta.done;Ta=xi.next()){var mr=Ta.value;(mr=$e(mr,++Fr,De))!=null&&(mr=+mr)>=mr&&(Dn=mr-$n,$n+=Dn/++mn,Wn+=Dn*(mr-$n))}}catch(Aa){xn={error:Aa}}finally{try{Ta&&!Ta.done&&(Nn=xi.return)&&Nn.call(xi)}finally{if(xn)throw xn.error}}}if(mn>1)return Wn/(mn-1)}function S(De,$e){var Ve=y(De,$e);return Ve&&Math.sqrt(Ve)}function P(De,$e){var Ve,En,xn,Nn,mn,Dn;if($e===void 0)try{for(var $n=t.__values(De),Wn=$n.next();!Wn.done;Wn=$n.next()){var _n=Wn.value;_n!=null&&(mn===void 0?_n>=_n&&(mn=Dn=_n):(mn>_n&&(mn=_n),Dn<_n&&(Dn=_n)))}}catch(xi){Ve={error:xi}}finally{try{Wn&&!Wn.done&&(En=$n.return)&&En.call($n)}finally{if(Ve)throw Ve.error}}else{var xr=-1;try{for(var mr=t.__values(De),Fr=mr.next();!Fr.done;Fr=mr.next()){var _n=Fr.value;(_n=$e(_n,++xr,De))!=null&&(mn===void 0?_n>=_n&&(mn=Dn=_n):(mn>_n&&(mn=_n),Dn<_n&&(Dn=_n)))}}catch(xi){xn={error:xi}}finally{try{Fr&&!Fr.done&&(Nn=mr.return)&&Nn.call(mr)}finally{if(xn)throw xn.error}}}return[mn,Dn]}var A=function(){function De(){this._partials=new Float64Array(32),this._n=0}return De.prototype.add=function($e){for(var Ve=this._partials,En=0,xn=0;xn<this._n&&xn<32;xn++){var Nn=Ve[xn],mn=$e+Nn,Dn=Math.abs($e)<Math.abs(Nn)?$e-(mn-Nn):Nn-(mn-$e);Dn&&(Ve[En++]=Dn),$e=mn}return Ve[En]=$e,this._n=En+1,this},De.prototype.valueOf=function(){var $e=this._partials,Ve=this._n,En,xn,Nn,mn=0;if(Ve>0){for(mn=$e[--Ve];Ve>0&&(En=mn,xn=$e[--Ve],mn=En+xn,Nn=xn-(mn-En),!Nn););Ve>0&&(Nn<0&&$e[Ve-1]<0||Nn>0&&$e[Ve-1]>0)&&(xn=Nn*2,En=mn+xn,xn==En-mn&&(mn=En))}return mn},De}();function O(De,$e){var Ve,En,xn,Nn,mn=new A;if($e===void 0)try{for(var Dn=t.__values(De),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=$n.value;(Wn=+Wn)&&mn.add(Wn)}}catch(Fr){Ve={error:Fr}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}else{var _n=-1;try{for(var xr=t.__values(De),mr=xr.next();!mr.done;mr=xr.next()){var Wn=mr.value;(Wn=+$e(Wn,++_n,De))&&mn.add(Wn)}}catch(Fr){xn={error:Fr}}finally{try{mr&&!mr.done&&(Nn=xr.return)&&Nn.call(xr)}finally{if(xn)throw xn.error}}}return+mn}var L=function(De){t.__extends($e,De);function $e(Ve,En){var xn,Nn;Ve===void 0&&(Ve=[]),En===void 0&&(En=U);var mn=De.call(this)||this;Object.defineProperties(mn,{_intern:{value:new Map},_key:{value:En}});try{for(var Dn=t.__values(Ve),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=t.__read($n.value,2),_n=Wn[0],xr=Wn[1];mn.set(_n,xr)}}catch(mr){xn={error:mr}}finally{try{$n&&!$n.done&&(Nn=Dn.return)&&Nn.call(Dn)}finally{if(xn)throw xn.error}}return mn}return $e.prototype.get=function(Ve){return De.prototype.get.call(this,F(this,Ve))},$e.prototype.has=function(Ve){return De.prototype.has.call(this,F(this,Ve))},$e.prototype.set=function(Ve,En){return De.prototype.set.call(this,K(this,Ve),En)},$e.prototype.delete=function(Ve){return De.prototype.delete.call(this,G(this,Ve))},$e}(Map),H=function(De){t.__extends($e,De);function $e(Ve,En){var xn,Nn;Ve===void 0&&(Ve=[]),En===void 0&&(En=U);var mn=De.call(this)||this;Object.defineProperties(mn,{_intern:{value:new Map},_key:{value:En}});try{for(var Dn=t.__values(Ve),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=$n.value;mn.add(Wn)}}catch(_n){xn={error:_n}}finally{try{$n&&!$n.done&&(Nn=Dn.return)&&Nn.call(Dn)}finally{if(xn)throw xn.error}}return mn}return $e.prototype.has=function(Ve){return De.prototype.has.call(this,F(this,Ve))},$e.prototype.add=function(Ve){return De.prototype.add.call(this,K(this,Ve))},$e.prototype.delete=function(Ve){return De.prototype.delete.call(this,G(this,Ve))},$e}(Set);function F(De,$e){var Ve=De._intern,En=De._key,xn=En($e);return Ve.has(xn)?Ve.get(xn):$e}function K(De,$e){var Ve=De._intern,En=De._key,xn=En($e);return Ve.has(xn)?Ve.get(xn):(Ve.set(xn,$e),$e)}function G(De,$e){var Ve=De._intern,En=De._key,xn=En($e);return Ve.has(xn)&&($e=Ve.get($e),Ve.delete(xn)),$e}function U(De){return De!==null&&typeof De=="object"?De.valueOf():De}function Z(De){return De}function J(De){for(var $e=[],Ve=1;Ve<arguments.length;Ve++)$e[Ve-1]=arguments[Ve];return wt(De,Z,Z,$e)}function rt(De){for(var $e=[],Ve=1;Ve<arguments.length;Ve++)$e[Ve-1]=arguments[Ve];return wt(De,Array.from,Z,$e)}function vt(De,$e){for(var Ve=[],En=2;En<arguments.length;En++)Ve[En-2]=arguments[En];return wt(De,Z,$e,Ve)}function mt(De,$e){for(var Ve=[],En=2;En<arguments.length;En++)Ve[En-2]=arguments[En];return wt(De,Array.from,$e,Ve)}function ut(De){for(var $e=[],Ve=1;Ve<arguments.length;Ve++)$e[Ve-1]=arguments[Ve];return wt(De,Z,Ft,$e)}function Rt(De){for(var $e=[],Ve=1;Ve<arguments.length;Ve++)$e[Ve-1]=arguments[Ve];return wt(De,Array.from,Ft,$e)}function Ft(De){if(De.length!==1)throw new Error("duplicate key");return De[0]}function wt(De,$e,Ve,En){return function xn(Nn,mn){var Dn,$n,Wn,_n;if(mn>=En.length)return Ve(Nn);var xr=new L,mr=En[mn++],Fr=-1;try{for(var xi=t.__values(Nn),Ta=xi.next();!Ta.done;Ta=xi.next()){var Aa=Ta.value,to=mr(Aa,++Fr,Nn),Vo=xr.get(to);Vo?Vo.push(Aa):xr.set(to,[Aa])}}catch(Do){Dn={error:Do}}finally{try{Ta&&!Ta.done&&($n=xi.return)&&$n.call(xi)}finally{if(Dn)throw Dn.error}}try{for(var Ro=t.__values(xr),ro=Ro.next();!ro.done;ro=Ro.next()){var vs=t.__read(ro.value,2),to=vs[0],Jo=vs[1];xr.set(to,xn(Jo,mn))}}catch(Do){Wn={error:Do}}finally{try{ro&&!ro.done&&(_n=Ro.return)&&_n.call(Ro)}finally{if(Wn)throw Wn.error}}return $e(xr)}(De,0)}function Mt(De,$e){return Array.from($e,function(Ve){return De[Ve]})}function St(De){for(var $e=[],Ve=1;Ve<arguments.length;Ve++)$e[Ve-1]=arguments[Ve];if(typeof De[Symbol.iterator]!="function")throw new TypeError("values is not iterable");De=Array.from(De);var En=t.__read($e,1),xn=En[0],Nn=xn===void 0?s:xn;if(Nn.length===1||$e.length>1){var mn=Uint32Array.from(De,function(Dn,$n){return $n});return $e.length>1?($e=$e.map(function(Dn){return De.map(Dn)}),mn.sort(function(Dn,$n){var Wn,_n;try{for(var xr=t.__values($e),mr=xr.next();!mr.done;mr=xr.next()){var Fr=mr.value,xi=s(Fr[Dn],Fr[$n]);if(xi)return xi}}catch(Ta){Wn={error:Ta}}finally{try{mr&&!mr.done&&(_n=xr.return)&&_n.call(xr)}finally{if(Wn)throw Wn.error}}})):(Nn=De.map(Nn),mn.sort(function(Dn,$n){return s(Nn[Dn],Nn[$n])})),Mt(De,mn)}return De.sort(Nn)}function At(De,$e,Ve){return($e.length===1?St(vt(De,$e,Ve),function(En,xn){var Nn=t.__read(En,2),mn=Nn[0],Dn=Nn[1],$n=t.__read(xn,2),Wn=$n[0],_n=$n[1];return s(Dn,_n)||s(mn,Wn)}):St(J(De,Ve),function(En,xn){var Nn=t.__read(En,2),mn=Nn[0],Dn=Nn[1],$n=t.__read(xn,2),Wn=$n[0],_n=$n[1];return $e(Dn,_n)||s(mn,Wn)})).map(function(En){var xn=t.__read(En,1),Nn=xn[0];return Nn})}var nt=Array.prototype,Pt=nt.slice;function z(De){return function(){return De}}var q=Math.sqrt(50),gt=Math.sqrt(10),et=Math.sqrt(2);function at(De,$e,Ve){var En,xn=-1,Nn,mn,Dn;if($e=+$e,De=+De,Ve=+Ve,De===$e&&Ve>0)return[De];if((En=$e<De)&&(Nn=De,De=$e,$e=Nn),(Dn=xt(De,$e,Ve))===0||!isFinite(Dn))return[];if(Dn>0)for(De=Math.ceil(De/Dn),$e=Math.floor($e/Dn),mn=new Array(Nn=Math.ceil($e-De+1));++xn<Nn;)mn[xn]=(De+xn)*Dn;else for(Dn=-Dn,De=Math.ceil(De*Dn),$e=Math.floor($e*Dn),mn=new Array(Nn=Math.ceil($e-De+1));++xn<Nn;)mn[xn]=(De+xn)/Dn;return En&&mn.reverse(),mn}function xt(De,$e,Ve){var En=($e-De)/Math.max(0,Ve),xn=Math.floor(Math.log(En)/Math.LN10),Nn=En/Math.pow(10,xn);return xn>=0?(Nn>=q?10:Nn>=gt?5:Nn>=et?2:1)*Math.pow(10,xn):-Math.pow(10,-xn)/(Nn>=q?10:Nn>=gt?5:Nn>=et?2:1)}function k(De,$e,Ve){var En=Math.abs($e-De)/Math.max(0,Ve),xn=Math.pow(10,Math.floor(Math.log(En)/Math.LN10)),Nn=En/xn;return Nn>=q?xn*=10:Nn>=gt?xn*=5:Nn>=et&&(xn*=2),$e<De?-xn:xn}function ot(De,$e,Ve){for(var En;;){var xn=xt(De,$e,Ve);if(xn===En||xn===0||!isFinite(xn))return[De,$e];xn>0?(De=Math.floor(De/xn)*xn,$e=Math.ceil($e/xn)*xn):xn<0&&(De=Math.ceil(De*xn)/xn,$e=Math.floor($e*xn)/xn),En=xn}}function it(De){return Math.ceil(Math.log(f(De))/Math.LN2)+1}function $(){var De=Z,$e=P,Ve=it;function En(xn){var Nn;Array.isArray(xn)||(xn=Array.from(xn));var mn,Dn=xn.length,$n,Wn=new Array(Dn);for(mn=0;mn<Dn;++mn)Wn[mn]=De(xn[mn],mn,xn);var _n=$e(Wn),xr=_n[0],mr=_n[1],Fr=Ve(Wn,xr,mr);if(!Array.isArray(Fr)){var xi=mr,Ta=+Fr;if($e===P&&(Nn=t.__read(ot(xr,mr,Ta),2),xr=Nn[0],mr=Nn[1]),Fr=at(xr,mr,Ta),Fr[Fr.length-1]>=mr)if(xi>=mr&&$e===P){var Aa=xt(xr,mr,Ta);isFinite(Aa)&&(Aa>0?mr=(Math.floor(mr/Aa)+1)*Aa:Aa<0&&(mr=(Math.ceil(mr*-Aa)+1)/-Aa))}else Fr.pop()}for(var to=Fr.length;Fr[0]<=xr;)Fr.shift(),--to;for(;Fr[to-1]>mr;)Fr.pop(),--to;var Vo=new Array(to+1),Ro;for(mn=0;mn<=to;++mn)Ro=Vo[mn]=[],Ro.x0=mn>0?Fr[mn-1]:xr,Ro.x1=mn<to?Fr[mn]:mr;for(mn=0;mn<Dn;++mn)$n=Wn[mn],xr<=$n&&$n<=mr&&Vo[a(Fr,$n,0,to)].push(xn[mn]);return Vo}return En.value=function(xn){return arguments.length?(De=typeof xn=="function"?xn:z(xn),En):De},En.domain=function(xn){return arguments.length?($e=typeof xn=="function"?xn:z([xn[0],xn[1]]),En):$e},En.thresholds=function(xn){return arguments.length?(Ve=typeof xn=="function"?xn:Array.isArray(xn)?z(Pt.call(xn)):z(xn),En):Ve},En}function _t(De,$e){var Ve,En,xn,Nn,mn;if($e===void 0)try{for(var Dn=t.__values(De),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=$n.value;Wn!=null&&(mn<Wn||mn===void 0&&Wn>=Wn)&&(mn=Wn)}}catch(Fr){Ve={error:Fr}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}else{var _n=-1;try{for(var xr=t.__values(De),mr=xr.next();!mr.done;mr=xr.next()){var Wn=mr.value;(Wn=$e(Wn,++_n,De))!=null&&(mn<Wn||mn===void 0&&Wn>=Wn)&&(mn=Wn)}}catch(Fr){xn={error:Fr}}finally{try{mr&&!mr.done&&(Nn=xr.return)&&Nn.call(xr)}finally{if(xn)throw xn.error}}}return mn}function yt(De,$e){var Ve,En,xn,Nn,mn;if($e===void 0)try{for(var Dn=t.__values(De),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=$n.value;Wn!=null&&(mn>Wn||mn===void 0&&Wn>=Wn)&&(mn=Wn)}}catch(Fr){Ve={error:Fr}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}else{var _n=-1;try{for(var xr=t.__values(De),mr=xr.next();!mr.done;mr=xr.next()){var Wn=mr.value;(Wn=$e(Wn,++_n,De))!=null&&(mn>Wn||mn===void 0&&Wn>=Wn)&&(mn=Wn)}}catch(Fr){xn={error:Fr}}finally{try{mr&&!mr.done&&(Nn=xr.return)&&Nn.call(xr)}finally{if(xn)throw xn.error}}}return mn}function Nt(De,$e,Ve,En,xn){for(Ve===void 0&&(Ve=0),En===void 0&&(En=De.length-1),xn===void 0&&(xn=s);En>Ve;){if(En-Ve>600){var Nn=En-Ve+1,mn=$e-Ve+1,Dn=Math.log(Nn),$n=.5*Math.exp(2*Dn/3),Wn=.5*Math.sqrt(Dn*$n*(Nn-$n)/Nn)*(mn-Nn/2<0?-1:1),_n=Math.max(Ve,Math.floor($e-mn*$n/Nn+Wn)),xr=Math.min(En,Math.floor($e+(Nn-mn)*$n/Nn+Wn));Nt(De,$e,_n,xr,xn)}var mr=De[$e],Fr=Ve,xi=En;for($t(De,Ve,$e),xn(De[En],mr)>0&&$t(De,Ve,En);Fr<xi;){for($t(De,Fr,xi),++Fr,--xi;xn(De[Fr],mr)<0;)++Fr;for(;xn(De[xi],mr)>0;)--xi}xn(De[Ve],mr)===0?$t(De,Ve,xi):(++xi,$t(De,xi,En)),xi<=$e&&(Ve=xi+1),$e<=xi&&(En=xi-1)}return De}function $t(De,$e,Ve){var En=De[$e];De[$e]=De[Ve],De[Ve]=En}function ee(De,$e,Ve){if(De=Float64Array.from(n(De,Ve)),!!(En=De.length)){if(($e=+$e)<=0||En<2)return yt(De);if($e>=1)return _t(De);var En,xn=(En-1)*$e,Nn=Math.floor(xn),mn=_t(Nt(De,Nn).subarray(0,Nn+1)),Dn=yt(De.subarray(Nn+1));return mn+(Dn-mn)*(xn-Nn)}}function Gt(De,$e,Ve){if(Ve===void 0&&(Ve=h),!!(En=De.length)){if(($e=+$e)<=0||En<2)return+Ve(De[0],0,De);if($e>=1)return+Ve(De[En-1],En-1,De);var En,xn=(En-1)*$e,Nn=Math.floor(xn),mn=+Ve(De[Nn],Nn,De),Dn=+Ve(De[Nn+1],Nn+1,De);return mn+(Dn-mn)*(xn-Nn)}}function Ht(De,$e,Ve){return Math.ceil((Ve-$e)/(2*(ee(De,.75)-ee(De,.25))*Math.pow(f(De),-1/3)))}function ae(De,$e,Ve){return Math.ceil((Ve-$e)/(3.5*S(De)*Math.pow(f(De),-1/3)))}function le(De,$e){var Ve,En,xn,Nn,mn,Dn=-1,$n=-1;if($e===void 0)try{for(var Wn=t.__values(De),_n=Wn.next();!_n.done;_n=Wn.next()){var xr=_n.value;++$n,xr!=null&&(mn<xr||mn===void 0&&xr>=xr)&&(mn=xr,Dn=$n)}}catch(xi){Ve={error:xi}}finally{try{_n&&!_n.done&&(En=Wn.return)&&En.call(Wn)}finally{if(Ve)throw Ve.error}}else try{for(var mr=t.__values(De),Fr=mr.next();!Fr.done;Fr=mr.next()){var xr=Fr.value;(xr=$e(xr,++$n,De))!=null&&(mn<xr||mn===void 0&&xr>=xr)&&(mn=xr,Dn=$n)}}catch(xi){xn={error:xi}}finally{try{Fr&&!Fr.done&&(Nn=mr.return)&&Nn.call(mr)}finally{if(xn)throw xn.error}}return Dn}function Be(De,$e){var Ve,En,xn,Nn,mn=0,Dn=0;if($e===void 0)try{for(var $n=t.__values(De),Wn=$n.next();!Wn.done;Wn=$n.next()){var _n=Wn.value;_n!=null&&(_n=+_n)>=_n&&(++mn,Dn+=_n)}}catch(xi){Ve={error:xi}}finally{try{Wn&&!Wn.done&&(En=$n.return)&&En.call($n)}finally{if(Ve)throw Ve.error}}else{var xr=-1;try{for(var mr=t.__values(De),Fr=mr.next();!Fr.done;Fr=mr.next()){var _n=Fr.value;(_n=$e(_n,++xr,De))!=null&&(_n=+_n)>=_n&&(++mn,Dn+=_n)}}catch(xi){xn={error:xi}}finally{try{Fr&&!Fr.done&&(Nn=mr.return)&&Nn.call(mr)}finally{if(xn)throw xn.error}}}if(mn)return Dn/mn}function Ce(De,$e){return ee(De,.5,$e)}function We(De){var $e,Ve,En,xn,Nn,mn;return t.__generator(this,function(Dn){switch(Dn.label){case 0:Dn.trys.push([0,5,6,7]),$e=t.__values(De),Ve=$e.next(),Dn.label=1;case 1:return Ve.done?[3,4]:(En=Ve.value,[5,t.__values(En)]);case 2:Dn.sent(),Dn.label=3;case 3:return Ve=$e.next(),[3,1];case 4:return[3,7];case 5:return xn=Dn.sent(),Nn={error:xn},[3,7];case 6:try{Ve&&!Ve.done&&(mn=$e.return)&&mn.call($e)}finally{if(Nn)throw Nn.error}return[7];case 7:return[2]}})}function Ye(De){return Array.from(We(De))}function wn(De,$e){var Ve,En,xn,Nn,mn,Dn=-1,$n=-1;if($e===void 0)try{for(var Wn=t.__values(De),_n=Wn.next();!_n.done;_n=Wn.next()){var xr=_n.value;++$n,xr!=null&&(mn>xr||mn===void 0&&xr>=xr)&&(mn=xr,Dn=$n)}}catch(xi){Ve={error:xi}}finally{try{_n&&!_n.done&&(En=Wn.return)&&En.call(Wn)}finally{if(Ve)throw Ve.error}}else try{for(var mr=t.__values(De),Fr=mr.next();!Fr.done;Fr=mr.next()){var xr=Fr.value;(xr=$e(xr,++$n,De))!=null&&(mn>xr||mn===void 0&&xr>=xr)&&(mn=xr,Dn=$n)}}catch(xi){xn={error:xi}}finally{try{Fr&&!Fr.done&&(Nn=mr.return)&&Nn.call(mr)}finally{if(xn)throw xn.error}}return Dn}function er(De,$e){var Ve,En;$e===void 0&&($e=Lr);var xn=[],Nn,mn=!1;try{for(var Dn=t.__values(De),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=$n.value;mn&&xn.push($e(Nn,Wn)),Nn=Wn,mn=!0}}catch(_n){Ve={error:_n}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}return xn}function Lr(De,$e){return[De,$e]}function on(De,$e,Ve){De=+De,$e=+$e,Ve=(xn=arguments.length)<2?($e=De,De=0,1):xn<3?1:+Ve;for(var En=-1,xn=Math.max(0,Math.ceil(($e-De)/Ve))|0,Nn=new Array(xn);++En<xn;)Nn[En]=De+En*Ve;return Nn}function en(De,$e){var Ve,En,xn,Nn;$e===void 0&&($e=s);var mn,Dn=!1;if($e.length===1){var $n=void 0;try{for(var Wn=t.__values(De),_n=Wn.next();!_n.done;_n=Wn.next()){var xr=_n.value,mr=$e(xr);(Dn?s(mr,$n)<0:s(mr,mr)===0)&&(mn=xr,$n=mr,Dn=!0)}}catch(Ta){Ve={error:Ta}}finally{try{_n&&!_n.done&&(En=Wn.return)&&En.call(Wn)}finally{if(Ve)throw Ve.error}}}else try{for(var Fr=t.__values(De),xi=Fr.next();!xi.done;xi=Fr.next()){var mr=xi.value;(Dn?$e(mr,mn)<0:$e(mr,mr)===0)&&(mn=mr,Dn=!0)}}catch(Ta){xn={error:Ta}}finally{try{xi&&!xi.done&&(Nn=Fr.return)&&Nn.call(Fr)}finally{if(xn)throw xn.error}}return mn}function An(De,$e){var Ve,En;if($e===void 0&&($e=s),$e.length===1)return wn(De,$e);var xn,Nn=-1,mn=-1;try{for(var Dn=t.__values(De),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=$n.value;++mn,(Nn<0?$e(Wn,Wn)===0:$e(Wn,xn)<0)&&(xn=Wn,Nn=mn)}}catch(_n){Ve={error:_n}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}return Nn}function Bn(De,$e){var Ve,En,xn,Nn;$e===void 0&&($e=s);var mn,Dn=!1;if($e.length===1){var $n=void 0;try{for(var Wn=t.__values(De),_n=Wn.next();!_n.done;_n=Wn.next()){var xr=_n.value,mr=$e(xr);(Dn?s(mr,$n)>0:s(mr,mr)===0)&&(mn=xr,$n=mr,Dn=!0)}}catch(Ta){Ve={error:Ta}}finally{try{_n&&!_n.done&&(En=Wn.return)&&En.call(Wn)}finally{if(Ve)throw Ve.error}}}else try{for(var Fr=t.__values(De),xi=Fr.next();!xi.done;xi=Fr.next()){var mr=xi.value;(Dn?$e(mr,mn)>0:$e(mr,mr)===0)&&(mn=mr,Dn=!0)}}catch(Ta){xn={error:Ta}}finally{try{xi&&!xi.done&&(Nn=Fr.return)&&Nn.call(Fr)}finally{if(xn)throw xn.error}}return mn}function gr(De,$e){var Ve,En;if($e===void 0&&($e=s),$e.length===1)return le(De,$e);var xn,Nn=-1,mn=-1;try{for(var Dn=t.__values(De),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=$n.value;++mn,(Nn<0?$e(Wn,Wn)===0:$e(Wn,xn)>0)&&(xn=Wn,Nn=mn)}}catch(_n){Ve={error:_n}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}return Nn}function hi(De,$e){var Ve=An(De,$e);return Ve<0?void 0:Ve}var Ae=Me(Math.random);function Me(De){return function(Ve,En,xn){En===void 0&&(En=0),xn===void 0&&(xn=Ve.length);for(var Nn=xn-(En=+En);Nn;){var mn=De()*Nn--|0,Dn=Ve[Nn+En];Ve[Nn+En]=Ve[mn+En],Ve[mn+En]=Dn}return Ve}}function Qt(De,$e){var Ve,En,xn,Nn,mn=0;if($e===void 0)try{for(var Dn=t.__values(De),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=$n.value;(Wn=+Wn)&&(mn+=Wn)}}catch(Fr){Ve={error:Fr}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}else{var _n=-1;try{for(var xr=t.__values(De),mr=xr.next();!mr.done;mr=xr.next()){var Wn=mr.value;(Wn=+$e(Wn,++_n,De))&&(mn+=Wn)}}catch(Fr){xn={error:Fr}}finally{try{mr&&!mr.done&&(Nn=xr.return)&&Nn.call(xr)}finally{if(xn)throw xn.error}}}return mn}function ge(De){if(!(Nn=De.length))return[];for(var $e=-1,Ve=yt(De,Wt),En=new Array(Ve);++$e<Ve;)for(var xn=-1,Nn,mn=En[$e]=new Array(Nn);++xn<Nn;)mn[xn]=De[xn][$e];return En}function Wt(De){return De.length}function re(){return ge(arguments)}function Te(De,$e){var Ve,En;if(typeof $e!="function")throw new TypeError("test is not a function");var xn=-1;try{for(var Nn=t.__values(De),mn=Nn.next();!mn.done;mn=Nn.next()){var Dn=mn.value;if(!$e(Dn,++xn,De))return!1}}catch($n){Ve={error:$n}}finally{try{mn&&!mn.done&&(En=Nn.return)&&En.call(Nn)}finally{if(Ve)throw Ve.error}}return!0}function ue(De,$e){var Ve,En;if(typeof $e!="function")throw new TypeError("test is not a function");var xn=-1;try{for(var Nn=t.__values(De),mn=Nn.next();!mn.done;mn=Nn.next()){var Dn=mn.value;if($e(Dn,++xn,De))return!0}}catch($n){Ve={error:$n}}finally{try{mn&&!mn.done&&(En=Nn.return)&&En.call(Nn)}finally{if(Ve)throw Ve.error}}return!1}function be(De,$e){var Ve,En;if(typeof $e!="function")throw new TypeError("test is not a function");var xn=[],Nn=-1;try{for(var mn=t.__values(De),Dn=mn.next();!Dn.done;Dn=mn.next()){var $n=Dn.value;$e($n,++Nn,De)&&xn.push($n)}}catch(Wn){Ve={error:Wn}}finally{try{Dn&&!Dn.done&&(En=mn.return)&&En.call(mn)}finally{if(Ve)throw Ve.error}}return xn}function Xe(De,$e){if(typeof De[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof $e!="function")throw new TypeError("mapper is not a function");return Array.from(De,function(Ve,En){return $e(Ve,En,De)})}function Rn(De,$e,Ve){var En,xn;if(typeof $e!="function")throw new TypeError("reducer is not a function");var Nn=De[Symbol.iterator](),mn,Dn,$n=-1;if(arguments.length<3){if(En=Nn.next(),mn=En.done,Ve=En.value,mn)return;++$n}for(;xn=Nn.next(),mn=xn.done,Dn=xn.value,!mn;)Ve=$e(Ve,Dn,++$n,De);return Ve}function tr(De){if(typeof De[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(De).reverse()}function Mn(De){for(var $e,Ve,En,xn,Nn=[],mn=1;mn<arguments.length;mn++)Nn[mn-1]=arguments[mn];De=new Set(De);try{for(var Dn=t.__values(Nn),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=$n.value;try{for(var _n=(En=void 0,t.__values(Wn)),xr=_n.next();!xr.done;xr=_n.next()){var mr=xr.value;De.delete(mr)}}catch(Fr){En={error:Fr}}finally{try{xr&&!xr.done&&(xn=_n.return)&&xn.call(_n)}finally{if(En)throw En.error}}}}catch(Fr){$e={error:Fr}}finally{try{$n&&!$n.done&&(Ve=Dn.return)&&Ve.call(Dn)}finally{if($e)throw $e.error}}return De}function vn(De,$e){var Ve,En,xn,Nn=$e[Symbol.iterator](),mn=new Set;try{for(var Dn=t.__values(De),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=$n.value;if(mn.has(Wn))return!1;for(var _n=void 0,xr=void 0;(xn=Nn.next(),_n=xn.value,xr=xn.done,xn)&&!xr;){if(Object.is(Wn,_n))return!1;mn.add(_n)}}}catch(mr){Ve={error:mr}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}return!0}function Ar(De){return De instanceof Set?De:new Set(De)}function or(De){for(var $e,Ve,En,xn,Nn=[],mn=1;mn<arguments.length;mn++)Nn[mn-1]=arguments[mn];De=new Set(De),Nn=Nn.map(Ar);try{t:for(var Dn=t.__values(De),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=$n.value;try{for(var _n=(En=void 0,t.__values(Nn)),xr=_n.next();!xr.done;xr=_n.next()){var mr=xr.value;if(!mr.has(Wn)){De.delete(Wn);continue t}}}catch(Fr){En={error:Fr}}finally{try{xr&&!xr.done&&(xn=_n.return)&&xn.call(_n)}finally{if(En)throw En.error}}}}catch(Fr){$e={error:Fr}}finally{try{$n&&!$n.done&&(Ve=Dn.return)&&Ve.call(Dn)}finally{if($e)throw $e.error}}return De}function cn(De,$e){var Ve,En,xn,Nn=De[Symbol.iterator](),mn=new Set;try{for(var Dn=t.__values($e),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=$n.value;if(!mn.has(Wn))for(var _n=void 0,xr=void 0;xn=Nn.next(),_n=xn.value,xr=xn.done,xn;){if(xr)return!1;if(mn.add(_n),Object.is(Wn,_n))break}}}catch(mr){Ve={error:mr}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}return!0}function Pr(De,$e){return cn($e,De)}function Sr(){for(var De,$e,Ve,En,xn=[],Nn=0;Nn<arguments.length;Nn++)xn[Nn]=arguments[Nn];var mn=new Set;try{for(var Dn=t.__values(xn),$n=Dn.next();!$n.done;$n=Dn.next()){var Wn=$n.value;try{for(var _n=(Ve=void 0,t.__values(Wn)),xr=_n.next();!xr.done;xr=_n.next()){var mr=xr.value;mn.add(mr)}}catch(Fr){Ve={error:Fr}}finally{try{xr&&!xr.done&&(En=_n.return)&&En.call(_n)}finally{if(Ve)throw Ve.error}}}}catch(Fr){De={error:Fr}}finally{try{$n&&!$n.done&&($e=Dn.return)&&$e.call(Dn)}finally{if(De)throw De.error}}return mn}u.Adder=A,u.InternMap=L,u.InternSet=H,u.ascending=s,u.bin=$,u.bisect=a,u.bisectCenter=l,u.bisectLeft=o,u.bisectRight=a,u.bisector=c,u.count=f,u.cross=_,u.cumsum=M,u.descending=x,u.deviation=S,u.difference=Mn,u.disjoint=vn,u.every=Te,u.extent=P,u.filter=be,u.fsum=O,u.greatest=Bn,u.greatestIndex=gr,u.group=J,u.groupSort=At,u.groups=rt,u.histogram=$,u.index=ut,u.indexes=Rt,u.intersection=or,u.least=en,u.leastIndex=An,u.map=Xe,u.max=_t,u.maxIndex=le,u.mean=Be,u.median=Ce,u.merge=Ye,u.min=yt,u.minIndex=wn,u.nice=ot,u.pairs=er,u.permute=Mt,u.quantile=ee,u.quantileSorted=Gt,u.quickselect=Nt,u.range=on,u.reduce=Rn,u.reverse=tr,u.rollup=vt,u.rollups=mt,u.scan=hi,u.shuffle=Ae,u.shuffler=Me,u.some=ue,u.sort=St,u.subset=Pr,u.sum=Qt,u.superset=cn,u.thresholdFreedmanDiaconis=Ht,u.thresholdScott=ae,u.thresholdSturges=it,u.tickIncrement=xt,u.tickStep=k,u.ticks=at,u.transpose=ge,u.union=Sr,u.variance=y,u.zip=re,Object.defineProperty(u,"__esModule",{value:!0})})},"./node_modules/_d3-collection@1.0.7@d3-collection/dist/d3-collection.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";var u="$";function s(){}s.prototype=c.prototype={constructor:s,has:function(_){return u+_ in this},get:function(_){return this[u+_]},set:function(_,M){return this[u+_]=M,this},remove:function(_){var M=u+_;return M in this&&delete this[M]},clear:function(){for(var _ in this)_[0]===u&&delete this[_]},keys:function(){var _=[];for(var M in this)M[0]===u&&_.push(M.slice(1));return _},values:function(){var _=[];for(var M in this)M[0]===u&&_.push(this[M]);return _},entries:function(){var _=[];for(var M in this)M[0]===u&&_.push({key:M.slice(1),value:this[M]});return _},size:function(){var _=0;for(var M in this)M[0]===u&&++_;return _},empty:function(){for(var _ in this)if(_[0]===u)return!1;return!0},each:function(_){for(var M in this)M[0]===u&&_(this[M],M.slice(1),this)}};function c(m,_){var M=new s;if(m instanceof s)m.each(function(A,O){M.set(O,A)});else if(Array.isArray(m)){var x=-1,y=m.length,S;if(_==null)for(;++x<y;)M.set(x,m[x]);else for(;++x<y;)M.set(_(S=m[x],x,m),S)}else if(m)for(var P in m)M.set(P,m[P]);return M}function r(){var m=[],_=[],M,x,y;function S(A,O,L,H){if(O>=m.length)return M!=null&&A.sort(M),x!=null?x(A):A;for(var F=-1,K=A.length,G=m[O++],U,Z,J=c(),rt,vt=L();++F<K;)(rt=J.get(U=G(Z=A[F])+""))?rt.push(Z):J.set(U,[Z]);return J.each(function(mt,ut){H(vt,ut,S(mt,O,L,H))}),vt}function P(A,O){if(++O>m.length)return A;var L,H=_[O-1];return x!=null&&O>=m.length?L=A.entries():(L=[],A.each(function(F,K){L.push({key:K,values:P(F,O)})})),H!=null?L.sort(function(F,K){return H(F.key,K.key)}):L}return y={object:function(O){return S(O,0,h,n)},map:function(O){return S(O,0,i,a)},entries:function(O){return P(S(O,0,i,a),0)},key:function(O){return m.push(O),y},sortKeys:function(O){return _[m.length-1]=O,y},sortValues:function(O){return M=O,y},rollup:function(O){return x=O,y}}}function h(){return{}}function n(m,_,M){m[_]=M}function i(){return c()}function a(m,_,M){m.set(_,M)}function o(){}var l=c.prototype;o.prototype=f.prototype={constructor:o,has:l.has,add:function(_){return _+="",this[u+_]=_,this},remove:l.remove,clear:l.clear,values:l.keys,size:l.size,empty:l.empty,each:l.each};function f(m,_){var M=new o;if(m instanceof o)m.each(function(S){M.add(S)});else if(m){var x=-1,y=m.length;if(_==null)for(;++x<y;)M.add(m[x]);else for(;++x<y;)M.add(_(m[x],x,m))}return M}function v(m){var _=[];for(var M in m)_.push(M);return _}function b(m){var _=[];for(var M in m)_.push(m[M]);return _}function g(m){var _=[];for(var M in m)_.push({key:M,value:m[M]});return _}t.nest=r,t.set=f,t.map=c,t.keys=v,t.values=b,t.entries=g,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-composite-projections@1.4.0@d3-composite-projections/d3-composite-projections.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(u,s){s(T,e("./node_modules/_d3-geo@2.0.1@d3-geo/dist/d3-geo.js"),e("./node_modules/_d3-path@2.0.0@d3-path/dist/d3-path.js"))})(this,function(u,s,c){"use strict";var r=1e-6;function h(){}var n=Infinity,i=n,a=-n,o=a,l={point:f,lineStart:h,lineEnd:h,polygonStart:h,polygonEnd:h,result:function(){var At=[[n,i],[a,o]];return a=o=-(i=n=Infinity),At}};function f(St,At){St<n&&(n=St),St>a&&(a=St),At<i&&(i=At),At>o&&(o=At)}function v(St,At,nt){var Pt=At[1][0]-At[0][0],z=At[1][1]-At[0][1],q=St.clipExtent&&St.clipExtent();St.scale(150).translate([0,0]),q!=null&&St.clipExtent(null),s.geoStream(nt,St.stream(l));var gt=l.result(),et=Math.min(Pt/(gt[1][0]-gt[0][0]),z/(gt[1][1]-gt[0][1])),at=+At[0][0]+(Pt-et*(gt[1][0]+gt[0][0]))/2,xt=+At[0][1]+(z-et*(gt[1][1]+gt[0][1]))/2;return q!=null&&St.clipExtent(q),St.scale(et*150).translate([at,xt])}function b(St,At,nt){return v(St,[[0,0],At],nt)}function g(St){var At=St.length;return{point:function(Pt,z){for(var q=-1;++q<At;)St[q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)St[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonEnd()}}}function m(){var St,At,nt=s.geoAlbers(),Pt,z=s.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),q,gt=s.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),et,at,xt={point:function($,_t){at=[$,_t]}};function k(it){var $=it[0],_t=it[1];return at=null,Pt.point($,_t),at||(q.point($,_t),at)||(et.point($,_t),at)}k.invert=function(it){var $=nt.scale(),_t=nt.translate(),yt=(it[0]-_t[0])/$,Nt=(it[1]-_t[1])/$;return(Nt>=.12&&Nt<.234&&yt>=-.425&&yt<-.214?z:Nt>=.166&&Nt<.234&&yt>=-.214&&yt<-.115?gt:nt).invert(it)},k.stream=function(it){return St&&At===it?St:St=g([nt.stream(At=it),z.stream(it),gt.stream(it)])},k.precision=function(it){return arguments.length?(nt.precision(it),z.precision(it),gt.precision(it),ot()):nt.precision()},k.scale=function(it){return arguments.length?(nt.scale(it),z.scale(it*.35),gt.scale(it),k.translate(nt.translate())):nt.scale()},k.translate=function(it){if(!arguments.length)return nt.translate();var $=nt.scale(),_t=+it[0],yt=+it[1];return Pt=nt.translate(it).clipExtent([[_t-.455*$,yt-.238*$],[_t+.455*$,yt+.238*$]]).stream(xt),q=z.translate([_t-.307*$,yt+.201*$]).clipExtent([[_t-.425*$+r,yt+.12*$+r],[_t-.214*$-r,yt+.234*$-r]]).stream(xt),et=gt.translate([_t-.205*$,yt+.212*$]).clipExtent([[_t-.214*$+r,yt+.166*$+r],[_t-.115*$-r,yt+.234*$-r]]).stream(xt),ot()},k.fitExtent=function(it,$){return v(k,it,$)},k.fitSize=function(it,$){return b(k,it,$)};function ot(){return St=At=null,k}return k.drawCompositionBorders=function(it){var $=nt([-102.91,26.3]),_t=nt([-104,27.5]),yt=nt([-108,29.1]),Nt=nt([-110,29.1]),$t=nt([-110,26.7]),ee=nt([-112.8,27.6]),Gt=nt([-114.3,30.6]),Ht=nt([-119.3,30.1]);it.moveTo($[0],$[1]),it.lineTo(_t[0],_t[1]),it.lineTo(yt[0],yt[1]),it.lineTo(Nt[0],Nt[1]),it.moveTo($t[0],$t[1]),it.lineTo(ee[0],ee[1]),it.lineTo(Gt[0],Gt[1]),it.lineTo(Ht[0],Ht[1])},k.getCompositionBorders=function(){var it=c.path();return this.drawCompositionBorders(it),it.toString()},k.scale(1070)}function _(St){var At=St.length;return{point:function(Pt,z){for(var q=-1;++q<At;)St[q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)St[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonEnd()}}}function M(){var St,At,nt=s.geoAlbers(),Pt,z=s.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),q,gt=s.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),et,at=s.geoConicEqualArea().rotate([66,0]).center([0,18]).parallels([8,18]),xt,k=s.geoEquirectangular().rotate([173,14]),ot,it=s.geoEquirectangular().rotate([-145,-16.8]),$,_t,yt={point:function(Gt,Ht){_t=[Gt,Ht]}};function Nt(ee){var Gt=ee[0],Ht=ee[1];return _t=null,Pt.point(Gt,Ht),_t||(q.point(Gt,Ht),_t)||(et.point(Gt,Ht),_t)||(xt.point(Gt,Ht),_t)||(ot.point(Gt,Ht),_t)||($.point(Gt,Ht),_t)}Nt.invert=function(ee){var Gt=nt.scale(),Ht=nt.translate(),ae=(ee[0]-Ht[0])/Gt,le=(ee[1]-Ht[1])/Gt;return(le>=.12&&le<.234&&ae>=-.425&&ae<-.214?z:le>=.166&&le<.234&&ae>=-.214&&ae<-.115?gt:le>=.2064&&le<.2413&&ae>=.312&&ae<.385?at:le>=.09&&le<.1197&&ae>=-.4243&&ae<-.3232?k:le>=-.0518&&le<.0895&&ae>=-.4243&&ae<-.3824?it:nt).invert(ee)},Nt.stream=function(ee){return St&&At===ee?St:St=_([nt.stream(At=ee),z.stream(ee),gt.stream(ee),at.stream(ee),k.stream(ee),it.stream(ee)])},Nt.precision=function(ee){return arguments.length?(nt.precision(ee),z.precision(ee),gt.precision(ee),at.precision(ee),k.precision(ee),it.precision(ee),$t()):nt.precision()},Nt.scale=function(ee){return arguments.length?(nt.scale(ee),z.scale(ee*.35),gt.scale(ee),at.scale(ee),k.scale(ee*2),it.scale(ee),Nt.translate(nt.translate())):nt.scale()},Nt.translate=function(ee){if(!arguments.length)return nt.translate();var Gt=nt.scale(),Ht=+ee[0],ae=+ee[1];return Pt=nt.translate(ee).clipExtent([[Ht-.455*Gt,ae-.238*Gt],[Ht+.455*Gt,ae+.238*Gt]]).stream(yt),q=z.translate([Ht-.307*Gt,ae+.201*Gt]).clipExtent([[Ht-.425*Gt+r,ae+.12*Gt+r],[Ht-.214*Gt-r,ae+.233*Gt-r]]).stream(yt),et=gt.translate([Ht-.205*Gt,ae+.212*Gt]).clipExtent([[Ht-.214*Gt+r,ae+.166*Gt+r],[Ht-.115*Gt-r,ae+.233*Gt-r]]).stream(yt),xt=at.translate([Ht+.35*Gt,ae+.224*Gt]).clipExtent([[Ht+.312*Gt+r,ae+.2064*Gt+r],[Ht+.385*Gt-r,ae+.233*Gt-r]]).stream(yt),ot=k.translate([Ht-.492*Gt,ae+.09*Gt]).clipExtent([[Ht-.4243*Gt+r,ae+.0903*Gt+r],[Ht-.3233*Gt-r,ae+.1197*Gt-r]]).stream(yt),$=it.translate([Ht-.408*Gt,ae+.018*Gt]).clipExtent([[Ht-.4244*Gt+r,ae-.0519*Gt+r],[Ht-.3824*Gt-r,ae+.0895*Gt-r]]).stream(yt),$t()},Nt.fitExtent=function(ee,Gt){return v(Nt,ee,Gt)},Nt.fitSize=function(ee,Gt){return b(Nt,ee,Gt)};function $t(){return St=At=null,Nt}return Nt.drawCompositionBorders=function(ee){var Gt=nt([-110.4641,28.2805]),Ht=nt([-104.0597,28.9528]),ae=nt([-103.7049,25.1031]),le=nt([-109.8337,24.4531]),Be=nt([-124.4745,28.1407]),Ce=nt([-110.931,30.8844]),We=nt([-109.8337,24.4531]),Ye=nt([-122.4628,21.8562]),wn=nt([-76.8579,25.1544]),er=nt([-72.429,24.2097]),Lr=nt([-72.8265,22.7056]),on=nt([-77.1852,23.6392]),en=nt([-125.0093,29.7791]),An=nt([-118.5193,31.3262]),Bn=nt([-118.064,29.6912]),gr=nt([-124.4369,28.169]),hi=nt([-128.1314,37.4582]),Ae=nt([-125.2132,38.214]),Me=nt([-122.3616,30.5115]),Qt=nt([-125.0315,29.8211]);ee.moveTo(Gt[0],Gt[1]),ee.lineTo(Ht[0],Ht[1]),ee.lineTo(ae[0],ae[1]),ee.lineTo(ae[0],ae[1]),ee.lineTo(le[0],le[1]),ee.closePath(),ee.moveTo(Be[0],Be[1]),ee.lineTo(Ce[0],Ce[1]),ee.lineTo(We[0],We[1]),ee.lineTo(We[0],We[1]),ee.lineTo(Ye[0],Ye[1]),ee.closePath(),ee.moveTo(wn[0],wn[1]),ee.lineTo(er[0],er[1]),ee.lineTo(Lr[0],Lr[1]),ee.lineTo(Lr[0],Lr[1]),ee.lineTo(on[0],on[1]),ee.closePath(),ee.moveTo(en[0],en[1]),ee.lineTo(An[0],An[1]),ee.lineTo(Bn[0],Bn[1]),ee.lineTo(Bn[0],Bn[1]),ee.lineTo(gr[0],gr[1]),ee.closePath(),ee.moveTo(hi[0],hi[1]),ee.lineTo(Ae[0],Ae[1]),ee.lineTo(Me[0],Me[1]),ee.lineTo(Me[0],Me[1]),ee.lineTo(Qt[0],Qt[1]),ee.closePath()},Nt.getCompositionBorders=function(){var ee=c.path();return this.drawCompositionBorders(ee),ee.toString()},Nt.scale(1070)}function x(St){var At=St.length;return{point:function(Pt,z){for(var q=-1;++q<At;)St[q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)St[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonEnd()}}}function y(){var St,At,nt=s.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),Pt,z=s.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),q,gt,et={point:function(ot,it){gt=[ot,it]}};function at(k){var ot=k[0],it=k[1];return gt=null,Pt.point(ot,it),gt||(q.point(ot,it),gt)}at.invert=function(k){var ot=nt.scale(),it=nt.translate(),$=(k[0]-it[0])/ot,_t=(k[1]-it[1])/ot;return(_t>=.05346&&_t<.0897&&$>=-.13388&&$<-.0322?z:nt).invert(k)},at.stream=function(k){return St&&At===k?St:St=x([nt.stream(At=k),z.stream(k)])},at.precision=function(k){return arguments.length?(nt.precision(k),z.precision(k),xt()):nt.precision()},at.scale=function(k){return arguments.length?(nt.scale(k),z.scale(k),at.translate(nt.translate())):nt.scale()},at.translate=function(k){if(!arguments.length)return nt.translate();var ot=nt.scale(),it=+k[0],$=+k[1];return Pt=nt.translate(k).clipExtent([[it-.06857*ot,$-.1288*ot],[it+.13249*ot,$+.06*ot]]).stream(et),q=z.translate([it+.1*ot,$-.094*ot]).clipExtent([[it-.1331*ot+r,$+.053457*ot+r],[it-.0354*ot-r,$+.08969*ot-r]]).stream(et),xt()},at.fitExtent=function(k,ot){return v(at,k,ot)},at.fitSize=function(k,ot){return b(at,k,ot)};function xt(){return St=At=null,at}return at.drawCompositionBorders=function(k){var ot=nt([-14.034675,34.965007]),it=nt([-7.4208899,35.536988]),$=nt([-7.3148275,33.54359]);k.moveTo(ot[0],ot[1]),k.lineTo(it[0],it[1]),k.lineTo($[0],$[1])},at.getCompositionBorders=function(){var k=c.path();return this.drawCompositionBorders(k),k.toString()},at.scale(2700)}function S(St){var At=St.length;return{point:function(Pt,z){for(var q=-1;++q<At;)St[q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)St[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonEnd()}}}function P(){var St,At,nt=s.geoConicConformal().rotate([10,-39.3]).parallels([0,60]),Pt,z=s.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),q,gt=s.geoConicConformal().rotate([27.8,-38.6]).parallels([0,60]),et,at,xt={point:function($,_t){at=[$,_t]}};function k(it){var $=it[0],_t=it[1];return at=null,Pt.point($,_t),at||(q.point($,_t),at)||(et.point($,_t),at)}k.invert=function(it){var $=nt.scale(),_t=nt.translate(),yt=(it[0]-_t[0])/$,Nt=(it[1]-_t[1])/$;return(Nt>=.0093&&Nt<.03678&&yt>=-.03875&&yt<-.0116?z:Nt>=-.0412&&Nt<.0091&&yt>=-.07782&&yt<-.01166?gt:nt).invert(it)},k.stream=function(it){return St&&At===it?St:St=S([nt.stream(At=it),z.stream(it),gt.stream(it)])},k.precision=function(it){return arguments.length?(nt.precision(it),z.precision(it),gt.precision(it),ot()):nt.precision()},k.scale=function(it){return arguments.length?(nt.scale(it),z.scale(it),gt.scale(it*.6),k.translate(nt.translate())):nt.scale()},k.translate=function(it){if(!arguments.length)return nt.translate();var $=nt.scale(),_t=+it[0],yt=+it[1];return Pt=nt.translate(it).clipExtent([[_t-.0115*$,yt-.1138*$],[_t+.2105*$,yt+.0673*$]]).stream(xt),q=z.translate([_t-.0265*$,yt+.025*$]).clipExtent([[_t-.0388*$+r,yt+.0093*$+r],[_t-.0116*$-r,yt+.0368*$-r]]).stream(xt),et=gt.translate([_t-.045*$,yt+-.02*$]).clipExtent([[_t-.0778*$+r,yt-.0413*$+r],[_t-.0117*$-r,yt+.0091*$-r]]).stream(xt),ot()},k.fitExtent=function(it,$){return v(k,it,$)},k.fitSize=function(it,$){return b(k,it,$)};function ot(){return St=At=null,k}return k.drawCompositionBorders=function(it){var $=nt([-12.8351,38.7113]),_t=nt([-10.8482,38.7633]),yt=nt([-10.8181,37.2072]),Nt=nt([-12.7345,37.1573]),$t=nt([-16.0753,41.4436]),ee=nt([-10.9168,41.6861]),Gt=nt([-10.8557,38.7747]),Ht=nt([-15.6728,38.5505]);it.moveTo($[0],$[1]),it.lineTo(_t[0],_t[1]),it.lineTo(yt[0],yt[1]),it.lineTo(yt[0],yt[1]),it.lineTo(Nt[0],Nt[1]),it.closePath(),it.moveTo($t[0],$t[1]),it.lineTo(ee[0],ee[1]),it.lineTo(Gt[0],Gt[1]),it.lineTo(Gt[0],Gt[1]),it.lineTo(Ht[0],Ht[1]),it.closePath()},k.getCompositionBorders=function(){var it=c.path();return this.drawCompositionBorders(it),it.toString()},k.scale(4200)}function A(St){var At=St.length;return{point:function(Pt,z){for(var q=-1;++q<At;)St[q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)St[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonEnd()}}}function O(){var St,At,nt=s.geoMercator().rotate([80,1.5]),Pt,z=s.geoMercator().rotate([90.73,1]),q,gt,et={point:function(ot,it){gt=[ot,it]}};function at(k){var ot=k[0],it=k[1];return gt=null,Pt.point(ot,it),gt||(q.point(ot,it),gt)}at.invert=function(k){var ot=nt.scale(),it=nt.translate(),$=(k[0]-it[0])/ot,_t=(k[1]-it[1])/ot;return(_t>=-.0676&&_t<-.026&&$>=-.0857&&$<-.0263?z:nt).invert(k)},at.stream=function(k){return St&&At===k?St:St=A([nt.stream(At=k),z.stream(k)])},at.precision=function(k){return arguments.length?(nt.precision(k),z.precision(k),xt()):nt.precision()},at.scale=function(k){return arguments.length?(nt.scale(k),z.scale(k),at.translate(nt.translate())):nt.scale()},at.translate=function(k){if(!arguments.length)return nt.translate();var ot=nt.scale(),it=+k[0],$=+k[1];return Pt=nt.translate(k).clipExtent([[it-.0262*ot,$-.0734*ot],[it+.1741*ot,$+.079*ot]]).stream(et),q=z.translate([it-.06*ot,$-.04*ot]).clipExtent([[it-.0857*ot+r,$-.0676*ot+r],[it-.0263*ot-r,$-.026*ot-r]]).stream(et),xt()},at.fitExtent=function(k,ot){return v(at,k,ot)},at.fitSize=function(k,ot){return b(at,k,ot)};function xt(){return St=At=null,at}return at.drawCompositionBorders=function(k){var ot=nt([-84.9032,2.3757]),it=nt([-81.5047,2.3708]),$=nt([-81.5063,-.01]),_t=nt([-84.9086,-.005]);k.moveTo(ot[0],ot[1]),k.lineTo(it[0],it[1]),k.lineTo($[0],$[1]),k.lineTo(_t[0],_t[1]),k.closePath()},at.getCompositionBorders=function(){var k=c.path();return this.drawCompositionBorders(k),k.toString()},at.scale(3500)}function L(St){var At=St.length;return{point:function(Pt,z){for(var q=-1;++q<At;)St[q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)St[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonEnd()}}}function H(){var St,At,nt=s.geoTransverseMercator().rotate([72,37]),Pt,z=s.geoStereographic().rotate([72,0]),q,gt=s.geoMercator().rotate([80,33.5]),et,at=s.geoMercator().rotate([110,25]),xt,k,ot={point:function(yt,Nt){k=[yt,Nt]}};function it(_t){var yt=_t[0],Nt=_t[1];return k=null,Pt.point(yt,Nt),k||(q.point(yt,Nt),k)||(et.point(yt,Nt),k)||(xt.point(yt,Nt),k)}it.invert=function(_t){var yt=nt.scale(),Nt=nt.translate(),$t=(_t[0]-Nt[0])/yt,ee=(_t[1]-Nt[1])/yt;return(ee>=.2582&&ee<.32&&$t>=-.1036&&$t<-.087?z:ee>=-.01298&&ee<.0133&&$t>=-.11396&&$t<-.05944?gt:ee>=.01539&&ee<.03911&&$t>=-.089&&$t<-.0588?at:nt).invert(_t)},it.stream=function(_t){return St&&At===_t?St:St=L([nt.stream(At=_t),z.stream(_t),gt.stream(_t),at.stream(_t)])},it.precision=function(_t){return arguments.length?(nt.precision(_t),z.precision(_t),gt.precision(_t),at.precision(_t),$()):nt.precision()},it.scale=function(_t){return arguments.length?(nt.scale(_t),z.scale(_t*.15),gt.scale(_t*1.5),at.scale(_t*1.5),it.translate(nt.translate())):nt.scale()},it.translate=function(_t){if(!arguments.length)return nt.translate();var yt=nt.scale(),Nt=+_t[0],$t=+_t[1];return Pt=nt.translate(_t).clipExtent([[Nt-.059*yt,$t-.3835*yt],[Nt+.4498*yt,$t+.3375*yt]]).stream(ot),q=z.translate([Nt-.087*yt,$t+.17*yt]).clipExtent([[Nt-.1166*yt+r,$t+.2582*yt+r],[Nt-.06*yt-r,$t+.32*yt-r]]).stream(ot),et=gt.translate([Nt-.092*yt,$t-0*yt]).clipExtent([[Nt-.114*yt+r,$t-.013*yt+r],[Nt-.0594*yt-r,$t+.0133*yt-r]]).stream(ot),xt=at.translate([Nt-.089*yt,$t-.0265*yt]).clipExtent([[Nt-.089*yt+r,$t+.0154*yt+r],[Nt-.0588*yt-r,$t+.0391*yt-r]]).stream(ot),$()},it.fitExtent=function(_t,yt){return v(it,_t,yt)},it.fitSize=function(_t,yt){return b(it,_t,yt)};function $(){return St=At=null,it}return it.drawCompositionBorders=function(_t){var yt=nt([-82.6999,-51.3043]),Nt=nt([-77.5442,-51.6631]),$t=nt([-78.0254,-55.186]),ee=nt([-83.6106,-54.7785]),Gt=nt([-80.0638,-35.984]),Ht=nt([-76.2153,-36.1811]),ae=nt([-76.2994,-37.6839]),le=nt([-80.2231,-37.4757]),Be=nt([-78.442,-37.706]),Ce=nt([-76.263,-37.8054]),We=nt([-76.344,-39.1595]),Ye=nt([-78.5638,-39.0559]);_t.moveTo(yt[0],yt[1]),_t.lineTo(Nt[0],Nt[1]),_t.lineTo($t[0],$t[1]),_t.lineTo($t[0],$t[1]),_t.lineTo(ee[0],ee[1]),_t.closePath(),_t.moveTo(Gt[0],Gt[1]),_t.lineTo(Ht[0],Ht[1]),_t.lineTo(ae[0],ae[1]),_t.lineTo(ae[0],ae[1]),_t.lineTo(le[0],le[1]),_t.closePath(),_t.moveTo(Be[0],Be[1]),_t.lineTo(Ce[0],Ce[1]),_t.lineTo(We[0],We[1]),_t.lineTo(We[0],We[1]),_t.lineTo(Ye[0],Ye[1]),_t.closePath()},it.getCompositionBorders=function(){var _t=c.path();return this.drawCompositionBorders(_t),_t.toString()},it.scale(700)}function F(St){var At=St.length;return{point:function(Pt,z){for(var q=-1;++q<At;)St[q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)St[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonEnd()}}}function K(){var St,At,nt=s.geoConicEquidistant().rotate([-136,-22]).parallels([40,34]),Pt,z=s.geoConicEquidistant().rotate([-146,-26]).parallels([40,34]),q,gt=s.geoConicEquidistant().rotate([-126,-19]).parallels([40,34]),et,at,xt={point:function($,_t){at=[$,_t]}};function k(it){var $=it[0],_t=it[1];return at=null,Pt.point($,_t),at||(q.point($,_t),at)||(et.point($,_t),at)}k.invert=function(it){var $=nt.scale(),_t=nt.translate(),yt=(it[0]-_t[0])/$,Nt=(it[1]-_t[1])/$;return(Nt>=-.10925&&Nt<-.02701&&yt>=-.135&&yt<-.0397?z:Nt>=.04713&&Nt<.11138&&yt>=-.03986&&yt<.051?gt:nt).invert(it)},k.stream=function(it){return St&&At===it?St:St=F([nt.stream(At=it),z.stream(it),gt.stream(it)])},k.precision=function(it){return arguments.length?(nt.precision(it),z.precision(it),gt.precision(it),ot()):nt.precision()},k.scale=function(it){return arguments.length?(nt.scale(it),z.scale(it),gt.scale(it*.7),k.translate(nt.translate())):nt.scale()},k.translate=function(it){if(!arguments.length)return nt.translate();var $=nt.scale(),_t=+it[0],yt=+it[1];return Pt=nt.translate(it).clipExtent([[_t-.1352*$,yt-.1091*$],[_t+.117*$,yt+.098*$]]).stream(xt),q=z.translate([_t-.0425*$,yt-.005*$]).clipExtent([[_t-.135*$+r,yt-.1093*$+r],[_t-.0397*$-r,yt-.027*$-r]]).stream(xt),et=gt.translate(it).clipExtent([[_t-.0399*$+r,yt+.0471*$+r],[_t+.051*$-r,yt+.1114*$-r]]).stream(xt),ot()},k.fitExtent=function(it,$){return v(k,it,$)},k.fitSize=function(it,$){return b(k,it,$)};function ot(){return St=At=null,k}return k.drawCompositionBorders=function(it){var $=nt([126.01320483689143,41.621090310215585]),_t=nt([133.04304387025903,42.15087523707186]),yt=nt([133.3021766080688,37.43975444725098]),Nt=nt([126.87889168628224,36.95488945159779]),$t=nt([132.9,29.8]),ee=nt([134,33]),Gt=nt([139.3,33.2]),Ht=nt([139.16,30.5]);it.moveTo($[0],$[1]),it.lineTo(_t[0],_t[1]),it.lineTo(yt[0],yt[1]),it.lineTo(Nt[0],Nt[1]),it.closePath(),it.moveTo($t[0],$t[1]),it.lineTo(ee[0],ee[1]),it.lineTo(Gt[0],Gt[1]),it.lineTo(Ht[0],Ht[1])},k.getCompositionBorders=function(){var it=c.path();return this.drawCompositionBorders(it),it.toString()},k.scale(2200)}function G(St){var At=St.length;return{point:function(Pt,z){for(var q=-1;++q<At;)St[q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)St[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonEnd()}}}function U(){var St,At,nt=s.geoConicConformal().rotate([-3,-46.2]).parallels([0,60]),Pt,z=s.geoMercator().center([-53.2,3.9]),q,gt=s.geoMercator().center([-61.03,14.67]),et,at=s.geoMercator().center([-61.46,16.14]),xt,k=s.geoMercator().center([-62.85,17.92]),ot,it=s.geoMercator().center([-56.23,46.93]),$,_t=s.geoMercator().center([45.16,-12.8]),yt,Nt=s.geoMercator().center([55.52,-21.13]),$t,ee=s.geoMercator().center([165.8,-21.07]),Gt,Ht=s.geoMercator().center([-178.1,-14.3]),ae,le=s.geoMercator().center([-150.55,-17.11]),Be,Ce=s.geoMercator().center([-150.55,-17.11]),We,Ye,wn={point:function(en,An){Ye=[en,An]}};function er(on){var en=on[0],An=on[1];return Ye=null,Pt.point(en,An),Ye||(q.point(en,An),Ye)||(et.point(en,An),Ye)||(xt.point(en,An),Ye)||(ot.point(en,An),Ye)||($.point(en,An),Ye)||(yt.point(en,An),Ye)||($t.point(en,An),Ye)||(Gt.point(en,An),Ye)||(ae.point(en,An),Ye)||(Be.point(en,An),Ye)||(We.point(en,An),Ye)}er.invert=function(on){var en=nt.scale(),An=nt.translate(),Bn=(on[0]-An[0])/en,gr=(on[1]-An[1])/en;return(gr>=.029&&gr<.0864&&Bn>=-.14&&Bn<-.0996?z:gr>=0&&gr<.029&&Bn>=-.14&&Bn<-.0996?gt:gr>=-.032&&gr<0&&Bn>=-.14&&Bn<-.0996?at:gr>=-.052&&gr<-.032&&Bn>=-.14&&Bn<-.0996?k:gr>=-.076&&gr<.052&&Bn>=-.14&&Bn<-.0996?it:gr>=-.076&&gr<-.052&&Bn>=.0967&&Bn<.1371?_t:gr>=-.052&&gr<-.02&&Bn>=.0967&&Bn<.1371?Nt:gr>=-.02&&gr<.012&&Bn>=.0967&&Bn<.1371?ee:gr>=.012&&gr<.033&&Bn>=.0967&&Bn<.1371?Ht:gr>=.033&&gr<.0864&&Bn>=.0967&&Bn<.1371?le:nt).invert(on)},er.stream=function(on){return St&&At===on?St:St=G([nt.stream(At=on),z.stream(on),gt.stream(on),at.stream(on),k.stream(on),it.stream(on),_t.stream(on),Nt.stream(on),ee.stream(on),Ht.stream(on),le.stream(on),Ce.stream(on)])},er.precision=function(on){return arguments.length?(nt.precision(on),z.precision(on),gt.precision(on),at.precision(on),k.precision(on),it.precision(on),_t.precision(on),Nt.precision(on),ee.precision(on),Ht.precision(on),le.precision(on),Ce.precision(on),Lr()):nt.precision()},er.scale=function(on){return arguments.length?(nt.scale(on),z.scale(on*.6),gt.scale(on*1.6),at.scale(on*1.4),k.scale(on*5),it.scale(on*1.3),_t.scale(on*1.6),Nt.scale(on*1.2),ee.scale(on*.3),Ht.scale(on*2.7),le.scale(on*.5),Ce.scale(on*.06),er.translate(nt.translate())):nt.scale()},er.translate=function(on){if(!arguments.length)return nt.translate();var en=nt.scale(),An=+on[0],Bn=+on[1];return Pt=nt.translate(on).clipExtent([[An-.0996*en,Bn-.0908*en],[An+.0967*en,Bn+.0864*en]]).stream(wn),q=z.translate([An-.12*en,Bn+.0575*en]).clipExtent([[An-.14*en+r,Bn+.029*en+r],[An-.0996*en-r,Bn+.0864*en-r]]).stream(wn),et=gt.translate([An-.12*en,Bn+.013*en]).clipExtent([[An-.14*en+r,Bn+0*en+r],[An-.0996*en-r,Bn+.029*en-r]]).stream(wn),xt=at.translate([An-.12*en,Bn-.014*en]).clipExtent([[An-.14*en+r,Bn-.032*en+r],[An-.0996*en-r,Bn+0*en-r]]).stream(wn),ot=k.translate([An-.12*en,Bn-.044*en]).clipExtent([[An-.14*en+r,Bn-.052*en+r],[An-.0996*en-r,Bn-.032*en-r]]).stream(wn),$=it.translate([An-.12*en,Bn-.065*en]).clipExtent([[An-.14*en+r,Bn-.076*en+r],[An-.0996*en-r,Bn-.052*en-r]]).stream(wn),yt=_t.translate([An+.117*en,Bn-.064*en]).clipExtent([[An+.0967*en+r,Bn-.076*en+r],[An+.1371*en-r,Bn-.052*en-r]]).stream(wn),$t=Nt.translate([An+.116*en,Bn-.0355*en]).clipExtent([[An+.0967*en+r,Bn-.052*en+r],[An+.1371*en-r,Bn-.02*en-r]]).stream(wn),Gt=ee.translate([An+.116*en,Bn-.0048*en]).clipExtent([[An+.0967*en+r,Bn-.02*en+r],[An+.1371*en-r,Bn+.012*en-r]]).stream(wn),ae=Ht.translate([An+.116*en,Bn+.022*en]).clipExtent([[An+.0967*en+r,Bn+.012*en+r],[An+.1371*en-r,Bn+.033*en-r]]).stream(wn),We=Ce.translate([An+.11*en,Bn+.045*en]).clipExtent([[An+.0967*en+r,Bn+.033*en+r],[An+.1371*en-r,Bn+.06*en-r]]).stream(wn),Be=le.translate([An+.115*en,Bn+.075*en]).clipExtent([[An+.0967*en+r,Bn+.06*en+r],[An+.1371*en-r,Bn+.0864*en-r]]).stream(wn),Lr()},er.fitExtent=function(on,en){return v(er,on,en)},er.fitSize=function(on,en){return b(er,on,en)};function Lr(){return St=At=null,er}return er.drawCompositionBorders=function(on){var en,An,Bn,gr;en=nt([-7.938886725111036,43.7219460918835]),An=nt([-4.832080896458295,44.12930268549372]),Bn=nt([-4.205299743793263,40.98096346967365]),gr=nt([-7.071796453126152,40.610037319181444]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([-8.42751373617692,45.32889452553031]),An=nt([-5.18599305777107,45.7566442062976]),Bn=nt([-4.832080905154431,44.129302726751426]),gr=nt([-7.938886737126192,43.72194613263854]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([-9.012656899657046,47.127733821030176]),An=nt([-5.6105244772793155,47.579777861410626]),Bn=nt([-5.185993067168585,45.756644248170346]),gr=nt([-8.427513749141811,45.32889456686326]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([-9.405747558985553,48.26506375557457]),An=nt([-5.896175018439575,48.733352850851624]),Bn=nt([-5.610524487556043,47.57977790393761]),gr=nt([-9.012656913808351,47.127733862971255]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([-9.908436061346974,49.642448789505856]),An=nt([-6.262026716233124,50.131426841787174]),Bn=nt([-5.896175029331232,48.73335289377258]),gr=nt([-9.40574757396393,48.26506379787767]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([11.996907706504462,50.16039028163579]),An=nt([15.649907879773343,49.68279246765253]),Bn=nt([15.156712840526632,48.30371557625831]),gr=nt([11.64122661754411,48.761078240546816]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([11.641226606955788,48.7610781975889]),An=nt([15.156712825832164,48.30371553390465]),Bn=nt([14.549932166241172,46.4866532486199]),gr=nt([11.204443787952183,46.91899233914248]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([11.204443778297161,46.918992296823646]),An=nt([14.549932152815039,46.486653206856396]),Bn=nt([13.994409796764009,44.695833444323256]),gr=nt([10.805306599253848,45.105133870684924]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([10.805306590412085,45.10513382903308]),An=nt([13.99440978444733,44.695833403183606]),Bn=nt([13.654633799024392,43.53552468558152]),gr=nt([10.561516803980956,43.930671459798624]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([10.561516795617383,43.93067141859757]),An=nt([13.654633787361952,43.5355246448671]),Bn=nt([12.867691604239901,40.640701985019405]),gr=nt([9.997809515987688,41.00288343254471]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([10.8,42.4]),An=nt([12.8,42.13]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1])},er.getCompositionBorders=function(){var on=c.path();return this.drawCompositionBorders(on),on.toString()},er.scale(2700)}function Z(St){var At=St.length;return{point:function(Pt,z){for(var q=-1;++q<At;)St[q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)St[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonEnd()}}}function J(){var St,At,nt=s.geoConicConformal().rotate([-10,-53]).parallels([0,60]),Pt,z=s.geoMercator().center([-61.46,16.14]),q,gt=s.geoMercator().center([-53.2,3.9]),et,at=s.geoConicConformal().rotate([27.8,-38.9]).parallels([0,60]),xt,k=s.geoConicConformal().rotate([25.43,-37.398]).parallels([0,60]),ot,it=s.geoConicConformal().rotate([31.17,-39.539]).parallels([0,60]),$,_t=s.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),yt,Nt=s.geoConicConformal().rotate([16,-28.5]).parallels([0,60]),$t,ee=s.geoMercator().center([-61.03,14.67]),Gt,Ht=s.geoMercator().center([45.16,-12.8]),ae,le=s.geoMercator().center([55.52,-21.13]),Be,Ce=s.geoConicConformal().rotate([-14.4,-35.95]).parallels([0,60]),We,Ye,wn={point:function(en,An){Ye=[en,An]}};function er(on){var en=on[0],An=on[1];return Ye=null,Pt.point(en,An),Ye||(et.point(en,An),Ye)||(Gt.point(en,An),Ye)||(q.point(en,An),Ye)||($t.point(en,An),Ye)||(yt.point(en,An),Ye)||(ae.point(en,An),Ye)||(Be.point(en,An),Ye)||(We.point(en,An),Ye)||(xt.point(en,An),Ye)||(ot.point(en,An),Ye)||($.point(en,An),Ye)}er.invert=function(on){var en=nt.scale(),An=nt.translate(),Bn=(on[0]-(An[0]+.08*en))/en,gr=(on[1]-An[1])/en;return(gr>=-.31&&gr<-.24&&Bn>=.14&&Bn<.24?z:gr>=-.24&&gr<-.17&&Bn>=.14&&Bn<.24?gt:gr>=-.17&&gr<-.12&&Bn>=.21&&Bn<.24?k:gr>=-.17&&gr<-.14&&Bn>=.14&&Bn<.165?it:gr>=-.17&&gr<-.1&&Bn>=.14&&Bn<.24?at:gr>=-.1&&gr<-.03&&Bn>=.14&&Bn<.24?_t:gr>=-.03&&gr<.04&&Bn>=.14&&Bn<.24?Nt:gr>=-.31&&gr<-.24&&Bn>=.24&&Bn<.34?ee:gr>=-.24&&gr<-.17&&Bn>=.24&&Bn<.34?Ht:gr>=-.17&&gr<-.1&&Bn>=.24&&Bn<.34?le:gr>=-.1&&gr<-.03&&Bn>=.24&&Bn<.34?Ce:nt).invert(on)},er.stream=function(on){return St&&At===on?St:St=Z([nt.stream(At=on),gt.stream(on),ee.stream(on),z.stream(on),Nt.stream(on),_t.stream(on),Ht.stream(on),le.stream(on),Ce.stream(on),at.stream(on),k.stream(on),it.stream(on)])},er.precision=function(on){return arguments.length?(nt.precision(on),gt.precision(on),ee.precision(on),z.precision(on),Nt.precision(on),_t.precision(on),Ht.precision(on),le.precision(on),Ce.precision(on),at.precision(on),k.precision(on),it.precision(on),Lr()):nt.precision()},er.scale=function(on){return arguments.length?(nt.scale(on),z.scale(on*3),gt.scale(on*.8),ee.scale(on*3.5),le.scale(on*2.7),at.scale(on*2),k.scale(on*2),it.scale(on*2),_t.scale(on*3),Nt.scale(on),Ht.scale(on*5.5),Ce.scale(on*6),er.translate(nt.translate())):nt.scale()},er.translate=function(on){if(!arguments.length)return nt.translate();var en=nt.scale(),An=+on[0],Bn=+on[1];return Pt=nt.translate([An-.08*en,Bn]).clipExtent([[An-.51*en,Bn-.33*en],[An+.5*en,Bn+.33*en]]).stream(wn),q=z.translate([An+.19*en,Bn-.275*en]).clipExtent([[An+.14*en+r,Bn-.31*en+r],[An+.24*en-r,Bn-.24*en-r]]).stream(wn),et=gt.translate([An+.19*en,Bn-.205*en]).clipExtent([[An+.14*en+r,Bn-.24*en+r],[An+.24*en-r,Bn-.17*en-r]]).stream(wn),xt=at.translate([An+.19*en,Bn-.135*en]).clipExtent([[An+.14*en+r,Bn-.17*en+r],[An+.24*en-r,Bn-.1*en-r]]).stream(wn),ot=k.translate([An+.225*en,Bn-.147*en]).clipExtent([[An+.21*en+r,Bn-.17*en+r],[An+.24*en-r,Bn-.12*en-r]]).stream(wn),$=it.translate([An+.153*en,Bn-.15*en]).clipExtent([[An+.14*en+r,Bn-.17*en+r],[An+.165*en-r,Bn-.14*en-r]]).stream(wn),yt=_t.translate([An+.19*en,Bn-.065*en]).clipExtent([[An+.14*en+r,Bn-.1*en+r],[An+.24*en-r,Bn-.03*en-r]]).stream(wn),$t=Nt.translate([An+.19*en,Bn+.005*en]).clipExtent([[An+.14*en+r,Bn-.03*en+r],[An+.24*en-r,Bn+.04*en-r]]).stream(wn),Gt=ee.translate([An+.29*en,Bn-.275*en]).clipExtent([[An+.24*en+r,Bn-.31*en+r],[An+.34*en-r,Bn-.24*en-r]]).stream(wn),ae=Ht.translate([An+.29*en,Bn-.205*en]).clipExtent([[An+.24*en+r,Bn-.24*en+r],[An+.34*en-r,Bn-.17*en-r]]).stream(wn),Be=le.translate([An+.29*en,Bn-.135*en]).clipExtent([[An+.24*en+r,Bn-.17*en+r],[An+.34*en-r,Bn-.1*en-r]]).stream(wn),We=Ce.translate([An+.29*en,Bn-.065*en]).clipExtent([[An+.24*en+r,Bn-.1*en+r],[An+.34*en-r,Bn-.03*en-r]]).stream(wn),Lr()},er.fitExtent=function(on,en){return v(er,on,en)},er.fitSize=function(on,en){return b(er,on,en)};function Lr(){return St=At=null,er}return er.drawCompositionBorders=function(on){var en,An,Bn,gr;en=nt([42.45755610828648,63.343658547914934]),An=nt([52.65837266667029,59.35045080290929]),Bn=nt([47.19754502247785,56.12653496548117]),gr=nt([37.673034273363044,59.61638268506111]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([59.41110754003403,62.35069727399336]),An=nt([66.75050228640794,57.11797303636038]),Bn=nt([60.236065725110436,54.63331433818992]),gr=nt([52.65837313153311,59.350450804599355]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([48.81091130080243,66.93353402634641]),An=nt([59.41110730654679,62.35069740653086]),Bn=nt([52.6583728974441,59.3504509222445]),gr=nt([42.45755631675751,63.34365868805821]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([31.054198418446475,52.1080673766184]),An=nt([39.09869284884117,49.400700047190554]),Bn=nt([36.0580811499175,46.02944174908498]),gr=nt([28.690508588835726,48.433126979386415]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([33.977877745912025,55.849945501331]),An=nt([42.75328432167726,52.78455122462353]),Bn=nt([39.09869297540224,49.400700176148625]),gr=nt([31.05419851807008,52.10806751810923]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([52.658372900759296,59.35045068526415]),An=nt([60.23606549583304,54.63331423800264]),Bn=nt([54.6756370953122,51.892298789399455]),gr=nt([47.19754524788189,56.126534861222794]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([47.19754506082455,56.126534735591456]),An=nt([54.675636900123514,51.892298681337095]),Bn=nt([49.94448648951486,48.98775484983285]),gr=nt([42.75328468716108,52.78455126060818]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([42.75328453416769,52.78455113209101]),An=nt([49.94448632339758,48.98775473706457]),Bn=nt([45.912339990394315,45.99361784987003]),gr=nt([39.09869317356607,49.40070009378711]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([37.673034114296634,59.61638254183119]),An=nt([47.197544835420544,56.126534839849846]),Bn=nt([42.75328447467064,52.78455135314068]),gr=nt([33.977877870363905,55.849945644671145]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([44.56748486446032,57.26489367845818]),Bn=nt([43.9335791193588,53.746540942601726]),gr=nt([43,56]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath(),en=nt([37.673034114296634,59.61638254183119]),An=nt([40.25902691953466,58.83002044222639]),Bn=nt([38.458270492742024,57.26232178028002]),gr=nt([35.97754948030156,58.00266637992386]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(Bn[0],Bn[1]),on.lineTo(gr[0],gr[1]),on.closePath()},er.getCompositionBorders=function(){var on=c.path();return this.drawCompositionBorders(on),on.toString()},er.scale(750)}function rt(St){var At=St.length;return{point:function(Pt,z){for(var q=-1;++q<At;)St[q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)St[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonEnd()}}}function vt(){var St,At,nt=s.geoConicConformal().rotate([-5.5,-52.2]).parallels([0,60]),Pt,z=s.geoMercator().center([-68.25,12.2]),q,gt=s.geoMercator().center([-63.1,17.5]),et,at,xt={point:function($,_t){at=[$,_t]}};function k(it){var $=t.__read(it,2),_t=$[0],yt=$[1];return at=null,Pt.point(_t,yt),at||(q.point(_t,yt),at)||(et.point(_t,yt),at)}k.invert=function(it){var $=nt.scale(),_t=nt.translate(),yt=(it[0]-_t[0])/$,Nt=(it[1]-_t[1])/$;return(Nt>=-.0067&&Nt<.0015&&yt>=-.0232&&yt<-.0154?z:Nt>=-.022&&Nt<-.014&&yt>=-.023&&yt<-.014?gt:nt).invert(it)},k.stream=function(it){return St&&At===it?St:St=rt([nt.stream(At=it),z.stream(it),gt.stream(it)])},k.precision=function(it){return arguments.length?(nt.precision(it),z.precision(it),gt.precision(it),ot()):nt.precision()},k.scale=function(it){return arguments.length?(nt.scale(it),z.scale(it),gt.scale(it),k.translate(nt.translate())):nt.scale()},k.translate=function(it){if(!arguments.length)return nt.translate();var $=nt.scale(),_t=+it[0],yt=+it[1];return Pt=nt.translate(it).clipExtent([[_t-.0245*$,yt-.026*$],[_t+.023*$,yt+.026*$]]).stream(xt),q=z.translate([_t-.0186*$,yt-.00325*$]).clipExtent([[_t-.0232*$+r,yt-.0067*$+r],[_t-.0154*$-r,yt+.0015*$-r]]).stream(xt),et=gt.translate([_t-.0185*$,yt-.017*$]).clipExtent([[_t-.023*$+r,yt-.022*$+r],[_t-.014*$-r,yt-.014*$-r]]).stream(xt),ot()},k.fitExtent=function(it,$){return v(k,it,$)},k.fitSize=function(it,$){return b(k,it,$)};function ot(){return St=At=null,k}return k.drawCompositionBorders=function(it){var $=nt([3.30573,52.5562]),_t=nt([4.043,52.572]),yt=nt([4.0646,52.1017]),Nt=nt([3.3382,52.0861]),$t=nt([3.262,53.439]),ee=nt([4.1373,53.4571]),Gt=nt([4.1574,52.9946]),Ht=nt([3.2951,52.9768]);it.moveTo($[0],$[1]),it.lineTo(_t[0],_t[1]),it.lineTo(yt[0],yt[1]),it.lineTo(yt[0],yt[1]),it.lineTo(Nt[0],Nt[1]),it.closePath(),it.moveTo($t[0],$t[1]),it.lineTo(ee[0],ee[1]),it.lineTo(Gt[0],Gt[1]),it.lineTo(Gt[0],Gt[1]),it.lineTo(Ht[0],Ht[1]),it.closePath()},k.getCompositionBorders=function(){var it=c.path();return this.drawCompositionBorders(it),it.toString()},k.scale(4200)}function mt(St){var At=St.length;return{point:function(Pt,z){for(var q=-1;++q<At;)St[q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)St[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonEnd()}}}function ut(){var St,At,nt=s.geoMercator().center([105.25,4]),Pt,z=s.geoMercator().center([118.65,2.86]),q,gt,et={point:function(ot,it){gt=[ot,it]}};function at(k){var ot=k[0],it=k[1];return gt=null,Pt.point(ot,it),gt||(q.point(ot,it),gt)}at.invert=function(k){var ot=nt.scale(),it=nt.translate(),$=(k[0]-it[0])/ot,_t=(k[1]-it[1])/ot;return(_t>=-.0521&&_t<.0229&&$>=-.0111&&$<.1?z:nt).invert(k)},at.stream=function(k){return St&&At===k?St:St=mt([nt.stream(At=k),z.stream(k)])},at.precision=function(k){return arguments.length?(nt.precision(k),z.precision(k),xt()):nt.precision()},at.scale=function(k){return arguments.length?(nt.scale(k),z.scale(k*.615),at.translate(nt.translate())):nt.scale()},at.translate=function(k){if(!arguments.length)return nt.translate();var ot=nt.scale(),it=+k[0],$=+k[1];return Pt=nt.translate(k).clipExtent([[it-.11*ot,$-.0521*ot],[it-.0111*ot,$+.0521*ot]]).stream(et),q=z.translate([it+.09*ot,$-0*ot]).clipExtent([[it-.0111*ot+r,$-.0521*ot+r],[it+.1*ot-r,$+.024*ot-r]]).stream(et),xt()},at.fitExtent=function(k,ot){return v(at,k,ot)},at.fitSize=function(k,ot){return b(at,k,ot)};function xt(){return St=At=null,at}return at.drawCompositionBorders=function(k){var ot=nt([106.3214,2.0228]),it=nt([105.1843,2.3761]),$=nt([104.2151,3.3618]),_t=nt([104.215,4.5651]);k.moveTo(ot[0],ot[1]),k.lineTo(it[0],it[1]),k.lineTo($[0],$[1]),k.lineTo(_t[0],_t[1])},at.getCompositionBorders=function(){var k=c.path();return this.drawCompositionBorders(k),k.toString()},at.scale(4800)}function Rt(St){var At=St.length;return{point:function(Pt,z){for(var q=-1;++q<At;)St[q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)St[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonEnd()}}}function Ft(){var St,At,nt=s.geoMercator().rotate([-9.5,-1.5]),Pt,z=s.geoMercator().rotate([-8.6,-3.5]),q,gt=s.geoMercator().rotate([-5.6,1.45]),et,at,xt={point:function($,_t){at=[$,_t]}};function k(it){var $=it[0],_t=it[1];return at=null,Pt.point($,_t),at||(q.point($,_t),at)||(et.point($,_t),at)}k.invert=function(it){var $=nt.scale(),_t=nt.translate(),yt=(it[0]-_t[0])/$,Nt=(it[1]-_t[1])/$;return(Nt>=-.02&&Nt<0&&yt>=-.038&&yt<-.005?z:Nt>=0&&Nt<.02&&yt>=-.038&&yt<-.005?gt:nt).invert(it)},k.stream=function(it){return St&&At===it?St:St=Rt([nt.stream(At=it),z.stream(it),gt.stream(it)])},k.precision=function(it){return arguments.length?(nt.precision(it),z.precision(it),gt.precision(it),ot()):nt.precision()},k.scale=function(it){return arguments.length?(nt.scale(it),z.scale(it*1.5),gt.scale(it*4),k.translate(nt.translate())):nt.scale()},k.translate=function(it){if(!arguments.length)return nt.translate();var $=nt.scale(),_t=+it[0],yt=+it[1];return Pt=nt.translate(it).clipExtent([[_t-.005*$,yt-.02*$],[_t+.038*$,yt+.02*$]]).stream(xt),q=z.translate([_t-.025*$,yt-.01*$]).clipExtent([[_t-.038*$+r,yt-.02*$+r],[_t-.005*$-r,yt+0*$-r]]).stream(xt),et=gt.translate([_t-.025*$,yt+.01*$]).clipExtent([[_t-.038*$+r,yt-0*$+r],[_t-.005*$-r,yt+.02*$-r]]).stream(xt),ot()},k.fitExtent=function(it,$){return v(k,it,$)},k.fitSize=function(it,$){return b(k,it,$)};function ot(){return St=At=null,k}return k.drawCompositionBorders=function(it){var $,_t,yt,Nt;$=nt([9.21327272751682,2.645820439454123]),_t=nt([11.679126293239872,2.644755519268689]),yt=nt([11.676845389029227,.35307824637606433]),Nt=nt([9.213572917774014,.35414205204417754]),it.moveTo($[0],$[1]),it.lineTo(_t[0],_t[1]),it.lineTo(yt[0],yt[1]),it.lineTo(Nt[0],Nt[1]),it.closePath(),$=nt([7.320873711543669,2.64475551449975]),_t=nt([9.213272722738658,2.645820434679803]),yt=nt([9.213422896480349,1.4999812505283054]),Nt=nt([7.322014760520787,1.4989168878985566]),it.moveTo($[0],$[1]),it.lineTo(_t[0],_t[1]),it.lineTo(yt[0],yt[1]),it.lineTo(Nt[0],Nt[1]),it.closePath(),$=nt([7.3220147605302905,1.4989168783492766]),_t=nt([9.213422896481598,1.499981240979021]),yt=nt([9.213572912999604,.354142056817247]),Nt=nt([7.323154615739809,.353078251154504]),it.moveTo($[0],$[1]),it.lineTo(_t[0],_t[1]),it.lineTo(yt[0],yt[1]),it.lineTo(Nt[0],Nt[1]),it.closePath()},k.getCompositionBorders=function(){var it=c.path();return this.drawCompositionBorders(it),it.toString()},k.scale(12e3)}function wt(St){var At=St.length;return{point:function(Pt,z){for(var q=-1;++q<At;)St[q].point(Pt,z)},sphere:function(){for(var Pt=-1;++Pt<At;)St[Pt].sphere()},lineStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineStart()},lineEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].lineEnd()},polygonStart:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonStart()},polygonEnd:function(){for(var Pt=-1;++Pt<At;)St[Pt].polygonEnd()}}}function Mt(){var St,At,nt=s.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),Pt,z=s.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),q,gt,et={point:function(ot,it){gt=[ot,it]}};function at(k){var ot=k[0],it=k[1];return gt=null,Pt.point(ot,it),gt||(q.point(ot,it),gt)}at.invert=function(k){var ot=nt.scale(),it=nt.translate(),$=(k[0]-it[0])/ot,_t=(k[1]-it[1])/ot;return(_t>=-.089&&_t<.06&&$>=.029&&$<.046?z:nt).invert(k)},at.stream=function(k){return St&&At===k?St:St=wt([nt.stream(At=k),z.stream(k)])},at.precision=function(k){return arguments.length?(nt.precision(k),z.precision(k),xt()):nt.precision()},at.scale=function(k){return arguments.length?(nt.scale(k),z.scale(k),at.translate(nt.translate())):nt.scale()},at.translate=function(k){if(!arguments.length)return nt.translate();var ot=nt.scale(),it=+k[0],$=+k[1];return Pt=nt.translate(k).clipExtent([[it-.065*ot,$-.089*ot],[it+.075*ot,$+.089*ot]]).stream(et),q=z.translate([it+.01*ot,$+.025*ot]).clipExtent([[it+.029*ot+r,$-.089*ot+r],[it+.046*ot-r,$-.06*ot-r]]).stream(et),xt()},at.fitExtent=function(k,ot){return v(at,k,ot)},at.fitSize=function(k,ot){return b(at,k,ot)};function xt(){return St=At=null,at}return at.drawCompositionBorders=function(k){var ot,it,$,_t;ot=nt([-1.113205870242365,59.64920050773357]),it=nt([.807899092399606,59.59085836472269]),$=nt([.5778611961420386,57.93467822832577]),_t=nt([-1.25867782078448,57.99029450085142]),k.moveTo(ot[0],ot[1]),k.lineTo(it[0],it[1]),k.lineTo($[0],$[1]),k.lineTo(_t[0],_t[1]),k.closePath()},at.getCompositionBorders=function(){var k=c.path();return this.drawCompositionBorders(k),k.toString()},at.scale(2800)}u.geoAlbersUk=Mt,u.geoAlbersUsa=m,u.geoAlbersUsaTerritories=M,u.geoConicConformalEurope=J,u.geoConicConformalFrance=U,u.geoConicConformalNetherlands=vt,u.geoConicConformalPortugal=P,u.geoConicConformalSpain=y,u.geoConicEquidistantJapan=K,u.geoMercatorEcuador=O,u.geoMercatorEquatorialGuinea=Ft,u.geoMercatorMalaysia=ut,u.geoTransverseMercatorChile=H,Object.defineProperty(u,"__esModule",{value:!0})})},"./node_modules/_d3-dsv@1.2.0@d3-dsv/dist/d3-dsv.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";var u={},s={},c=34,r=10,h=13;function n(J){return new Function("d","return {"+J.map(function(rt,vt){return JSON.stringify(rt)+": d["+vt+'] || ""'}).join(",")+"}")}function i(J,rt){var vt=n(J);return function(mt,ut){return rt(vt(mt),ut,J)}}function a(J){var rt=Object.create(null),vt=[];return J.forEach(function(mt){for(var ut in mt)ut in rt||vt.push(rt[ut]=ut)}),vt}function o(J,rt){var vt=J+"",mt=vt.length;return mt<rt?new Array(rt-mt+1).join(0)+vt:vt}function l(J){return J<0?"-"+o(-J,6):J>9999?"+"+o(J,6):o(J,4)}function f(J){var rt=J.getUTCHours(),vt=J.getUTCMinutes(),mt=J.getUTCSeconds(),ut=J.getUTCMilliseconds();return isNaN(J)?"Invalid Date":l(J.getUTCFullYear())+"-"+o(J.getUTCMonth()+1,2)+"-"+o(J.getUTCDate(),2)+(ut?"T"+o(rt,2)+":"+o(vt,2)+":"+o(mt,2)+"."+o(ut,3)+"Z":mt?"T"+o(rt,2)+":"+o(vt,2)+":"+o(mt,2)+"Z":vt||rt?"T"+o(rt,2)+":"+o(vt,2)+"Z":"")}function v(J){var rt=new RegExp('["'+J+`
\r]`),vt=J.charCodeAt(0);function mt(nt,Pt){var z,q,gt=ut(nt,function(et,at){if(z)return z(et,at-1);q=et,z=Pt?i(et,Pt):n(et)});return gt.columns=q||[],gt}function ut(nt,Pt){var z=[],q=nt.length,gt=0,et=0,at,xt=q<=0,k=!1;nt.charCodeAt(q-1)===r&&--q,nt.charCodeAt(q-1)===h&&--q;function ot(){if(xt)return s;if(k)return k=!1,u;var $,_t=gt,yt;if(nt.charCodeAt(_t)===c){for(;gt++<q&&nt.charCodeAt(gt)!==c||nt.charCodeAt(++gt)===c;);return($=gt)>=q?xt=!0:(yt=nt.charCodeAt(gt++))===r?k=!0:yt===h&&(k=!0,nt.charCodeAt(gt)===r&&++gt),nt.slice(_t+1,$-1).replace(/""/g,'"')}for(;gt<q;){if((yt=nt.charCodeAt($=gt++))===r)k=!0;else if(yt===h)k=!0,nt.charCodeAt(gt)===r&&++gt;else if(yt!==vt)continue;return nt.slice(_t,$)}return xt=!0,nt.slice(_t,q)}for(;(at=ot())!==s;){for(var it=[];at!==u&&at!==s;)it.push(at),at=ot();Pt&&(it=Pt(it,et++))==null||z.push(it)}return z}function Rt(nt,Pt){return nt.map(function(z){return Pt.map(function(q){return At(z[q])}).join(J)})}function Ft(nt,Pt){return Pt==null&&(Pt=a(nt)),[Pt.map(At).join(J)].concat(Rt(nt,Pt)).join(`
`)}function wt(nt,Pt){return Pt==null&&(Pt=a(nt)),Rt(nt,Pt).join(`
`)}function Mt(nt){return nt.map(St).join(`
`)}function St(nt){return nt.map(At).join(J)}function At(nt){return nt==null?"":nt instanceof Date?f(nt):rt.test(nt+="")?'"'+nt.replace(/"/g,'""')+'"':nt}return{parse:mt,parseRows:ut,format:Ft,formatBody:wt,formatRows:Mt,formatRow:St,formatValue:At}}var b=v(","),g=b.parse,m=b.parseRows,_=b.format,M=b.formatBody,x=b.formatRows,y=b.formatRow,S=b.formatValue,P=v("	"),A=P.parse,O=P.parseRows,L=P.format,H=P.formatBody,F=P.formatRows,K=P.formatRow,G=P.formatValue;function U(J){for(var rt in J){var vt=J[rt].trim(),mt,ut;if(!vt)vt=null;else if(vt==="true")vt=!0;else if(vt==="false")vt=!1;else if(vt==="NaN")vt=NaN;else if(!isNaN(mt=+vt))vt=mt;else if(ut=vt.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Z&&!!ut[4]&&!ut[7]&&(vt=vt.replace(/-/g,"/").replace(/T/," ")),vt=new Date(vt);else continue;J[rt]=vt}return J}var Z=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();t.autoType=U,t.csvFormat=_,t.csvFormatBody=M,t.csvFormatRow=y,t.csvFormatRows=x,t.csvFormatValue=S,t.csvParse=g,t.csvParseRows=m,t.dsvFormat=v,t.tsvFormat=L,t.tsvFormatBody=H,t.tsvFormatRow=K,t.tsvFormatRows=F,t.tsvFormatValue=G,t.tsvParse=A,t.tsvParseRows=O,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-geo@1.12.1@d3-geo/dist/d3-geo.js"),e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,u,s){"use strict";var c=Math.abs,r=Math.atan,h=Math.atan2,n=Math.cos,i=Math.exp,a=Math.floor,o=Math.log,l=Math.max,f=Math.min,v=Math.pow,b=Math.round,g=Math.sign||function(D){return D>0?1:D<0?-1:0},m=Math.sin,_=Math.tan,M=1e-6,x=1e-12,y=Math.PI,S=y/2,P=y/4,A=Math.SQRT1_2,O=J(2),L=J(y),H=y*2,F=180/y,K=y/180;function G(D){return D?D/Math.sin(D):1}function U(D){return D>1?S:D<-1?-S:Math.asin(D)}function Z(D){return D>1?0:D<-1?y:Math.acos(D)}function J(D){return D>0?Math.sqrt(D):0}function rt(D){return D=i(2*D),(D-1)/(D+1)}function vt(D){return(i(D)-i(-D))/2}function mt(D){return(i(D)+i(-D))/2}function ut(D){return o(D+J(D*D+1))}function Rt(D){return o(D+J(D*D-1))}function Ft(D){var W=_(D/2),tt=2*o(n(D/2))/(W*W);function st(Ct,It){var Ut=n(Ct),Zt=n(It),qt=m(It),de=Zt*Ut,me=-((1-de?o((1+de)/2)/(1-de):-.5)+tt/(1+de));return[me*Zt*m(Ct),me*qt]}return st.invert=function(Ct,It){var Ut=J(Ct*Ct+It*It),Zt=-D/2,qt=50,de;if(!Ut)return[0,0];do{var me=Zt/2,je=n(me),Oe=m(me),ke=_(me),qe=o(1/je);Zt-=de=(2/ke*qe-tt*ke-Ut)/(-qe/(Oe*Oe)+1-tt/(2*je*je))}while(c(de)>M&&--qt>0);var an=m(Zt);return[h(Ct*an,Ut*n(Zt)),U(It*an/Ut)]},st}var wt=function(){var W=S,tt=u.geoProjectionMutator(Ft),st=tt(W);return st.radius=function(Ct){return arguments.length?tt(W=Ct*K):W*F},st.scale(179.976).clipAngle(147)};function Mt(D,W){var tt=n(W),st=G(Z(tt*n(D/=2)));return[2*tt*m(D)*st,m(W)*st]}Mt.invert=function(D,W){if(!(D*D+4*W*W>y*y+M)){var tt=D,st=W,Ct=25;do{var It=m(tt),Ut=m(tt/2),Zt=n(tt/2),qt=m(st),de=n(st),me=m(2*st),je=qt*qt,Oe=de*de,ke=Ut*Ut,qe=1-Oe*Zt*Zt,an=qe?Z(de*Zt)*J(Xn=1/qe):Xn=0,Xn,kn=2*an*de*Ut-D,fr=an*qt-W,Mr=Xn*(Oe*ke+an*de*Zt*je),Qr=Xn*(.5*It*me-an*2*qt*Ut),Zr=Xn*.25*(me*Ut-an*qt*Oe*It),Pi=Xn*(je*Zt+an*ke*de),Ri=Qr*Zr-Pi*Mr;if(!Ri)break;var Ki=(fr*Qr-kn*Pi)/Ri,Xi=(kn*Zr-fr*Mr)/Ri;tt-=Ki,st-=Xi}while((c(Ki)>M||c(Xi)>M)&&--Ct>0);return[tt,st]}};var St=function(){return u.geoProjection(Mt).scale(152.63)};function At(D){var W=m(D),tt=n(D),st=D>=0?1:-1,Ct=_(st*D),It=(1+W-tt)/2;function Ut(Zt,qt){var de=n(qt),me=n(Zt/=2);return[(1+de)*m(Zt),(st*qt>-h(me,Ct)-.001?0:-st*10)+It+m(qt)*tt-(1+de)*W*me]}return Ut.invert=function(Zt,qt){var de=0,me=0,je=50;do{var Oe=n(de),ke=m(de),qe=n(me),an=m(me),Xn=1+qe,kn=Xn*ke-Zt,fr=It+an*tt-Xn*W*Oe-qt,Mr=Xn*Oe/2,Qr=-ke*an,Zr=W*Xn*ke/2,Pi=tt*qe+W*Oe*an,Ri=Qr*Zr-Pi*Mr,Ki=(fr*Qr-kn*Pi)/Ri/2,Xi=(kn*Zr-fr*Mr)/Ri;de-=Ki,me-=Xi}while((c(Ki)>M||c(Xi)>M)&&--je>0);return st*me>-h(n(de),Ct)-.001?[de*2,me]:null},Ut}var nt=function(){var W=20*K,tt=W>=0?1:-1,st=_(tt*W),Ct=u.geoProjectionMutator(At),It=Ct(W),Ut=It.stream;return It.parallel=function(Zt){return arguments.length?(st=_((tt=(W=Zt*K)>=0?1:-1)*W),Ct(W)):W*F},It.stream=function(Zt){var qt=It.rotate(),de=Ut(Zt),me=(It.rotate([0,0]),Ut(Zt));return It.rotate(qt),de.sphere=function(){me.polygonStart(),me.lineStart();for(var je=tt*-180;tt*je<180;je+=tt*90)me.point(je,tt*90);for(;tt*(je-=W)>=-180;)me.point(je,tt*-h(n(je*K/2),st)*F);me.lineEnd(),me.polygonEnd()},de},It.scale(218.695).center([0,28.0974])};function Pt(D,W){var tt=_(W/2),st=J(1-tt*tt),Ct=1+st*n(D/=2),It=m(D)*st/Ct,Ut=tt/Ct,Zt=It*It,qt=Ut*Ut;return[4/3*It*(3+Zt-3*qt),4/3*Ut*(3+3*Zt-qt)]}Pt.invert=function(D,W){if(D*=3/8,W*=3/8,!D&&c(W)>1)return null;var tt=D*D,st=W*W,Ct=1+tt+st,It=J((Ct-J(Ct*Ct-4*W*W))/2),Ut=U(It)/3,Zt=It?Rt(c(W/It))/3:ut(c(D))/3,qt=n(Ut),de=mt(Zt),me=de*de-qt*qt;return[g(D)*2*h(vt(Zt)*qt,.25-me),g(W)*2*h(de*m(Ut),.25+me)]};var z=function(){return u.geoProjection(Pt).scale(66.1603)},q=J(8),gt=o(1+O);function et(D,W){var tt=c(W);return tt<P?[D,o(_(P+W/2))]:[D*n(tt)*(2*O-1/m(tt)),g(W)*(2*O*(tt-P)-o(_(tt/2)))]}et.invert=function(D,W){if((It=c(W))<gt)return[D,2*r(i(W))-S];var tt=P,st=25,Ct,It;do{var Ut=n(tt/2),Zt=_(tt/2);tt-=Ct=(q*(tt-P)-o(Zt)-It)/(q-Ut*Ut/(2*Zt))}while(c(Ct)>x&&--st>0);return[D/(n(tt)*(q-1/m(tt))),g(W)*tt]};var at=function(){return u.geoProjection(et).scale(112.314)};function xt(D){var W=2*y/D;function tt(st,Ct){var It=u.geoAzimuthalEquidistantRaw(st,Ct);if(c(st)>S){var Ut=h(It[1],It[0]),Zt=J(It[0]*It[0]+It[1]*It[1]),qt=W*b((Ut-S)/W)+S,de=h(m(Ut-=qt),2-n(Ut));Ut=qt+U(y/Zt*m(de))-de,It[0]=Zt*n(Ut),It[1]=Zt*m(Ut)}return It}return tt.invert=function(st,Ct){var It=J(st*st+Ct*Ct);if(It>S){var Ut=h(Ct,st),Zt=W*b((Ut-S)/W)+S,qt=Ut>Zt?-1:1,de=It*n(Zt-Ut),me=1/_(qt*Z((de-y)/J(y*(y-2*de)+It*It)));Ut=Zt+2*r((me+qt*J(me*me-3))/3),st=It*n(Ut),Ct=It*m(Ut)}return u.geoAzimuthalEquidistantRaw.invert(st,Ct)},tt}var k=function(){var W=5,tt=u.geoProjectionMutator(xt),st=tt(W),Ct=st.stream,It=.01,Ut=-n(It*K),Zt=m(It*K);return st.lobes=function(qt){return arguments.length?tt(W=+qt):W},st.stream=function(qt){var de=st.rotate(),me=Ct(qt),je=(st.rotate([0,0]),Ct(qt));return st.rotate(de),me.sphere=function(){je.polygonStart(),je.lineStart();for(var Oe=0,ke=360/W,qe=2*y/W,an=90-180/W,Xn=S;Oe<W;++Oe,an-=ke,Xn-=qe)je.point(h(Zt*n(Xn),Ut)*F,U(Zt*m(Xn))*F),an<-90?(je.point(-90,-180-an-It),je.point(-90,-180-an+It)):(je.point(90,an+It),je.point(90,an-It));je.lineEnd(),je.polygonEnd()},me},st.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)};function ot(D,W){var tt=D*m(W),st=30,Ct;do W-=Ct=(W+m(W)-tt)/(1+n(W));while(c(Ct)>M&&--st>0);return W/2}function it(D,W,tt){function st(Ct,It){return[D*Ct*n(It=ot(tt,It)),W*m(It)]}return st.invert=function(Ct,It){return It=U(It/W),[Ct/(D*n(It)),U((2*It+m(2*It))/tt)]},st}var $=it(O/S,O,y),_t=function(){return u.geoProjection($).scale(169.529)},yt=2.00276,Nt=1.11072;function $t(D,W){var tt=ot(y,W);return[yt*D/(1/n(W)+Nt/n(tt)),(W+O*m(tt))/yt]}$t.invert=function(D,W){var tt=yt*W,st=W<0?-P:P,Ct=25,It,Ut;do Ut=tt-O*m(st),st-=It=(m(2*st)+2*st-y*m(Ut))/(2*n(2*st)+2+y*n(Ut)*O*n(st));while(c(It)>M&&--Ct>0);return Ut=tt-O*m(st),[D*(1/n(Ut)+Nt/n(st))/yt,Ut]};var ee=function(){return u.geoProjection($t).scale(160.857)},Gt=function(W){var tt=0,st=u.geoProjectionMutator(W),Ct=st(tt);return Ct.parallel=function(It){return arguments.length?st(tt=It*K):tt*F},Ct};function Ht(D,W){return[D*n(W),W]}Ht.invert=function(D,W){return[D/n(W),W]};var ae=function(){return u.geoProjection(Ht).scale(152.63)};function le(D){if(!D)return Ht;var W=1/_(D);function tt(st,Ct){var It=W+D-Ct,Ut=It&&st*n(Ct)/It;return[It*m(Ut),W-It*n(Ut)]}return tt.invert=function(st,Ct){var It=J(st*st+(Ct=W-Ct)*Ct),Ut=W+D-It;return[It/n(Ut)*h(st,Ct),Ut]},tt}var Be=function(){return Gt(le).scale(123.082).center([0,26.1441]).parallel(45)};function Ce(D){function W(tt,st){var Ct=S-st,It=Ct&&tt*D*m(Ct)/Ct;return[Ct*m(It)/D,S-Ct*n(It)]}return W.invert=function(tt,st){var Ct=tt*D,It=S-st,Ut=J(Ct*Ct+It*It),Zt=h(Ct,It);return[(Ut?Ut/m(Ut):1)*Zt/D,S-Ut]},W}var We=function(){var W=.5,tt=u.geoProjectionMutator(Ce),st=tt(W);return st.fraction=function(Ct){return arguments.length?tt(W=+Ct):W},st.scale(158.837)},Ye=it(1,4/y,y),wn=function(){return u.geoProjection(Ye).scale(152.63)};function er(D,W,tt,st,Ct,It){var Ut=n(It),Zt;if(c(D)>1||c(It)>1)Zt=Z(tt*Ct+W*st*Ut);else{var qt=m(D/2),de=m(It/2);Zt=2*U(J(qt*qt+W*st*de*de))}return c(Zt)>M?[Zt,h(st*m(It),W*Ct-tt*st*Ut)]:[0,0]}function Lr(D,W,tt){return Z((D*D+W*W-tt*tt)/(2*D*W))}function on(D){return D-2*y*a((D+y)/(2*y))}function en(D,W,tt){for(var st=[[D[0],D[1],m(D[1]),n(D[1])],[W[0],W[1],m(W[1]),n(W[1])],[tt[0],tt[1],m(tt[1]),n(tt[1])]],Ct=st[2],It,Ut=0;Ut<3;++Ut,Ct=It)It=st[Ut],Ct.v=er(It[1]-Ct[1],Ct[3],Ct[2],It[3],It[2],It[0]-Ct[0]),Ct.point=[0,0];var Zt=Lr(st[0].v[0],st[2].v[0],st[1].v[0]),qt=Lr(st[0].v[0],st[1].v[0],st[2].v[0]),de=y-Zt;st[2].point[1]=0,st[0].point[0]=-(st[1].point[0]=st[0].v[0]/2);var me=[st[2].point[0]=st[0].point[0]+st[2].v[0]*n(Zt),2*(st[0].point[1]=st[1].point[1]=st[2].v[0]*m(Zt))];function je(Oe,ke){var qe=m(ke),an=n(ke),Xn=new Array(3),kn;for(kn=0;kn<3;++kn){var fr=st[kn];if(Xn[kn]=er(ke-fr[1],fr[3],fr[2],an,qe,Oe-fr[0]),!Xn[kn][0])return fr.point;Xn[kn][1]=on(Xn[kn][1]-fr.v[1])}var Mr=me.slice();for(kn=0;kn<3;++kn){var Qr=kn==2?0:kn+1,Zr=Lr(st[kn].v[0],Xn[kn][0],Xn[Qr][0]);Xn[kn][1]<0&&(Zr=-Zr),kn?kn==1?(Zr=qt-Zr,Mr[0]-=Xn[kn][0]*n(Zr),Mr[1]-=Xn[kn][0]*m(Zr)):(Zr=de-Zr,Mr[0]+=Xn[kn][0]*n(Zr),Mr[1]+=Xn[kn][0]*m(Zr)):(Mr[0]+=Xn[kn][0]*n(Zr),Mr[1]-=Xn[kn][0]*m(Zr))}return Mr[0]/=3,Mr[1]/=3,Mr}return je}function An(D){return D[0]*=K,D[1]*=K,D}function Bn(){return gr([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function gr(D,W,tt){var st=u.geoCentroid({type:"MultiPoint",coordinates:[D,W,tt]}),Ct=[-st[0],-st[1]],It=u.geoRotation(Ct),Ut=u.geoProjection(en(An(It(D)),An(It(W)),An(It(tt)))).rotate(Ct),Zt=Ut.center;return delete Ut.rotate,Ut.center=function(qt){return arguments.length?Zt(It(qt)):It.invert(Zt())},Ut.clipAngle(90)}function hi(D,W){var tt=J(1-m(W));return[2/L*D*tt,L*(1-tt)]}hi.invert=function(D,W){var tt=(tt=W/L-1)*tt;return[tt>0?D*J(y/tt)/2:0,U(1-tt)]};var Ae=function(){return u.geoProjection(hi).scale(95.6464).center([0,30])};function Me(D){var W=_(D);function tt(st,Ct){return[st,(st?st/m(st):1)*(m(Ct)*n(st)-W*n(Ct))]}return tt.invert=W?function(st,Ct){st&&(Ct*=m(st)/st);var It=n(st);return[st,2*h(J(It*It+W*W-Ct*Ct)-It,W-Ct)]}:function(st,Ct){return[st,U(st?Ct*_(st)/st:Ct)]},tt}var Qt=function(){return Gt(Me).scale(249.828).clipAngle(90)},ge=J(3);function Wt(D,W){return[ge*D*(2*n(2*W/3)-1)/L,ge*L*m(W/3)]}Wt.invert=function(D,W){var tt=3*U(W/(ge*L));return[L*D/(ge*(2*n(2*tt/3)-1)),tt]};var re=function(){return u.geoProjection(Wt).scale(156.19)};function Te(D){var W=n(D);function tt(st,Ct){return[st*W,m(Ct)/W]}return tt.invert=function(st,Ct){return[st/W,U(Ct*W)]},tt}var ue=function(){return Gt(Te).parallel(38.58).scale(195.044)};function be(D){var W=n(D);function tt(st,Ct){return[st*W,(1+W)*_(Ct/2)]}return tt.invert=function(st,Ct){return[st/W,r(Ct/(1+W))*2]},tt}var Xe=function(){return Gt(be).scale(124.75)};function Rn(D,W){var tt=J(8/(3*y));return[tt*D*(1-c(W)/y),tt*W]}Rn.invert=function(D,W){var tt=J(8/(3*y)),st=W/tt;return[D/(tt*(1-c(st)/y)),st]};var tr=function(){return u.geoProjection(Rn).scale(165.664)};function Mn(D,W){var tt=J(4-3*m(c(W)));return[2/J(6*y)*D*tt,g(W)*J(2*y/3)*(2-tt)]}Mn.invert=function(D,W){var tt=2-c(W)/J(2*y/3);return[D*J(6*y)/(2*tt),g(W)*U((4-tt*tt)/3)]};var vn=function(){return u.geoProjection(Mn).scale(165.664)};function Ar(D,W){var tt=J(y*(4+y));return[2/tt*D*(1+J(1-4*W*W/(y*y))),4/tt*W]}Ar.invert=function(D,W){var tt=J(y*(4+y))/2;return[D*tt/(1+J(1-W*W*(4+y)/(4*y))),W*tt/2]};var or=function(){return u.geoProjection(Ar).scale(180.739)};function cn(D,W){var tt=(2+S)*m(W);W/=2;for(var st=0,Ct=Infinity;st<10&&c(Ct)>M;st++){var It=n(W);W-=Ct=(W+m(W)*(It+2)-tt)/(2*It*(1+It))}return[2/J(y*(4+y))*D*(1+n(W)),2*J(y/(4+y))*m(W)]}cn.invert=function(D,W){var tt=W*J((4+y)/y)/2,st=U(tt),Ct=n(st);return[D/(2/J(y*(4+y))*(1+Ct)),U((st+tt*(Ct+2))/(2+S))]};var Pr=function(){return u.geoProjection(cn).scale(180.739)};function Sr(D,W){return[D*(1+n(W))/J(2+y),2*W/J(2+y)]}Sr.invert=function(D,W){var tt=J(2+y),st=W*tt/2;return[tt*D/(1+n(st)),st]};var De=function(){return u.geoProjection(Sr).scale(173.044)};function $e(D,W){for(var tt=(1+S)*m(W),st=0,Ct=Infinity;st<10&&c(Ct)>M;st++)W-=Ct=(W+m(W)-tt)/(1+n(W));return tt=J(2+y),[D*(1+n(W))/tt,2*W/tt]}$e.invert=function(D,W){var tt=1+S,st=J(tt/2);return[D*2*st/(1+n(W*=st)),U((W+m(W))/tt)]};var Ve=function(){return u.geoProjection($e).scale(173.044)},En=3+2*O;function xn(D,W){var tt=m(D/=2),st=n(D),Ct=J(n(W)),It=n(W/=2),Ut=m(W)/(It+O*st*Ct),Zt=J(2/(1+Ut*Ut)),qt=J((O*It+(st+tt)*Ct)/(O*It+(st-tt)*Ct));return[En*(Zt*(qt-1/qt)-2*o(qt)),En*(Zt*Ut*(qt+1/qt)-2*r(Ut))]}xn.invert=function(D,W){if(!(It=Pt.invert(D/1.2,W*1.065)))return null;var tt=It[0],st=It[1],Ct=20,It;D/=En,W/=En;do{var Ut=tt/2,Zt=st/2,qt=m(Ut),de=n(Ut),me=m(Zt),je=n(Zt),Oe=n(st),ke=J(Oe),qe=me/(je+O*de*ke),an=qe*qe,Xn=J(2/(1+an)),kn=O*je+(de+qt)*ke,fr=O*je+(de-qt)*ke,Mr=kn/fr,Qr=J(Mr),Zr=Qr-1/Qr,Pi=Qr+1/Qr,Ri=Xn*Zr-2*o(Qr)-D,Ki=Xn*qe*Pi-2*r(qe)-W,Xi=me&&A*ke*qt*an/me,Oa=(O*de*je+ke)/(2*(je+O*de*ke)*(je+O*de*ke)*ke),ja=-.5*qe*Xn*Xn*Xn,ki=ja*Xi,Sa=ja*Oa,ga=(ga=2*je+O*ke*(de-qt))*ga*Qr,Yi=(O*de*je*ke+Oe)/ga,_a=-(O*qt*me)/(ke*ga),ra=Zr*ki-2*Yi/Qr+Xn*(Yi+Yi/Mr),La=Zr*Sa-2*_a/Qr+Xn*(_a+_a/Mr),za=qe*Pi*ki-2*Xi/(1+an)+Xn*Pi*Xi+Xn*qe*(Yi-Yi/Mr),Ps=qe*Pi*Sa-2*Oa/(1+an)+Xn*Pi*Oa+Xn*qe*(_a-_a/Mr),ls=La*za-Ps*ra;if(!ls)break;var Ts=(Ki*La-Ri*Ps)/ls,ms=(Ri*za-Ki*ra)/ls;tt-=Ts,st=l(-S,f(S,st-ms))}while((c(Ts)>M||c(ms)>M)&&--Ct>0);return c(c(st)-S)<M?[0,st]:Ct&&[tt,st]};var Nn=function(){return u.geoProjection(xn).scale(62.5271)},mn=n(35*K);function Dn(D,W){var tt=_(W/2);return[D*mn*J(1-tt*tt),(1+mn)*tt]}Dn.invert=function(D,W){var tt=W/(1+mn);return[D&&D/(mn*J(1-tt*tt)),2*r(tt)]};var $n=function(){return u.geoProjection(Dn).scale(137.152)};function Wn(D,W){var tt=W/2,st=n(tt);return[2*D/L*n(W)*st*st,L*_(tt)]}Wn.invert=function(D,W){var tt=r(W/L),st=n(tt),Ct=2*tt;return[D*L/2/(n(Ct)*st*st),Ct]};var _n=function(){return u.geoProjection(Wn).scale(135.264)};function xr(D){return[D[0]/2,U(_(D[1]/2*K))*F]}function mr(D){return[D[0]*2,2*r(m(D[1]*K))*F]}var Fr=function(W){W==null&&(W=u.geoOrthographic);var tt=W(),st=u.geoEquirectangular().scale(F).precision(0).clipAngle(null).translate([0,0]);function Ct(Ut){return tt(xr(Ut))}tt.invert&&(Ct.invert=function(Ut){return mr(tt.invert(Ut))}),Ct.stream=function(Ut){var Zt=tt.stream(Ut),qt=st.stream({point:function(me,je){Zt.point(me/2,U(_(-je/2*K))*F)},lineStart:function(){Zt.lineStart()},lineEnd:function(){Zt.lineEnd()},polygonStart:function(){Zt.polygonStart()},polygonEnd:function(){Zt.polygonEnd()}});return qt.sphere=Zt.sphere,qt};function It(Ut){Ct[Ut]=function(Zt){return arguments.length?(tt[Ut](Zt),Ct):tt[Ut]()}}return Ct.rotate=function(Ut){return arguments.length?(st.rotate(Ut),Ct):st.rotate()},Ct.center=function(Ut){return arguments.length?(tt.center(xr(Ut)),Ct):mr(tt.center())},It("clipAngle"),It("clipExtent"),It("scale"),It("translate"),It("precision"),Ct.scale(249.5)};function xi(D,W){var tt=2*y/W,st=D*D;function Ct(It,Ut){var Zt=u.geoAzimuthalEquidistantRaw(It,Ut),qt=Zt[0],de=Zt[1],me=qt*qt+de*de;if(me>st){var je=J(me),Oe=h(de,qt),ke=tt*b(Oe/tt),qe=Oe-ke,an=D*n(qe),Xn=(D*m(qe)-qe*m(an))/(S-an),kn=Ta(qe,Xn),fr=(y-D)/Aa(kn,an,y);qt=je;var Mr=50,Qr;do qt-=Qr=(D+Aa(kn,an,qt)*fr-je)/(kn(qt)*fr);while(c(Qr)>M&&--Mr>0);de=qe*m(qt),qt<S&&(de-=Xn*(qt-S));var Zr=m(ke),Pi=n(ke);Zt[0]=qt*Pi-de*Zr,Zt[1]=qt*Zr+de*Pi}return Zt}return Ct.invert=function(It,Ut){var Zt=It*It+Ut*Ut;if(Zt>st){var qt=J(Zt),de=h(Ut,It),me=tt*b(de/tt),je=de-me;It=qt*n(je),Ut=qt*m(je);for(var Oe=It-S,ke=m(It),qe=Ut/ke,an=It<S?Infinity:0,Xn=10;;){var kn=D*m(qe),fr=D*n(qe),Mr=m(fr),Qr=S-fr,Zr=(kn-qe*Mr)/Qr,Pi=Ta(qe,Zr);if(c(an)<x||!--Xn)break;qe-=an=(qe*ke-Zr*Oe-Ut)/(ke-Oe*2*(Qr*(fr+qe*kn*n(fr)-Mr)-kn*(kn-qe*Mr))/(Qr*Qr))}qt=D+Aa(Pi,fr,It)*(y-D)/Aa(Pi,fr,y),de=me+qe,It=qt*n(de),Ut=qt*m(de)}return u.geoAzimuthalEquidistantRaw.invert(It,Ut)},Ct}function Ta(D,W){return function(tt){var st=D*n(tt);return tt<S&&(st-=W),J(1+st*st)}}function Aa(D,W,tt){for(var st=50,Ct=(tt-W)/st,It=D(W)+D(tt),Ut=1,Zt=W;Ut<st;++Ut)It+=2*D(Zt+=Ct);return It*.5*Ct}var to=function(){var W=6,tt=30*K,st=n(tt),Ct=m(tt),It=u.geoProjectionMutator(xi),Ut=It(tt,W),Zt=Ut.stream,qt=.01,de=-n(qt*K),me=m(qt*K);return Ut.radius=function(je){return arguments.length?(st=n(tt=je*K),Ct=m(tt),It(tt,W)):tt*F},Ut.lobes=function(je){return arguments.length?It(tt,W=+je):W},Ut.stream=function(je){var Oe=Ut.rotate(),ke=Zt(je),qe=(Ut.rotate([0,0]),Zt(je));return Ut.rotate(Oe),ke.sphere=function(){qe.polygonStart(),qe.lineStart();for(var an=0,Xn=2*y/W,kn=0;an<W;++an,kn-=Xn)qe.point(h(me*n(kn),de)*F,U(me*m(kn))*F),qe.point(h(Ct*n(kn-Xn/2),st)*F,U(Ct*m(kn-Xn/2))*F);qe.lineEnd(),qe.polygonEnd()},ke},Ut.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)},Vo=function(W,tt,st,Ct,It,Ut,Zt,qt){arguments.length<8&&(qt=0);function de(me,je){if(!je)return[W*me/y,0];var Oe=je*je,ke=W+Oe*(tt+Oe*(st+Oe*Ct)),qe=je*(It-1+Oe*(Ut-qt+Oe*Zt)),an=(ke*ke+qe*qe)/(2*qe),Xn=me*U(ke/an)/y;return[an*m(Xn),je*(1+Oe*qt)+an*(1-n(Xn))]}return de.invert=function(me,je){var Oe=y*me/W,ke=je,qe,an,Xn=50;do{var kn=ke*ke,fr=W+kn*(tt+kn*(st+kn*Ct)),Mr=ke*(It-1+kn*(Ut-qt+kn*Zt)),Qr=fr*fr+Mr*Mr,Zr=2*Mr,Pi=Qr/Zr,Ri=Pi*Pi,Ki=U(fr/Pi)/y,Xi=Oe*Ki,Oa=fr*fr,ja=(2*tt+kn*(4*st+kn*6*Ct))*ke,ki=It+kn*(3*Ut+kn*5*Zt),Sa=2*(fr*ja+Mr*(ki-1)),ga=2*(ki-1),Yi=(Sa*Zr-Qr*ga)/(Zr*Zr),_a=n(Xi),ra=m(Xi),La=Pi*_a,za=Pi*ra,Ps=Oe/y*(1/J(1-Oa/Ri))*(ja*Pi-fr*Yi)/Ri,ls=za-me,Ts=ke*(1+kn*qt)+Pi-La-je,ms=Yi*ra+La*Ps,nu=La*Ki,Uu=1+Yi-(Yi*_a-za*Ps),qu=za*Ki,_c=ms*qu-Uu*nu;if(!_c)break;Oe-=qe=(Ts*ms-ls*Uu)/_c,ke-=an=(ls*qu-Ts*nu)/_c}while((c(qe)>M||c(an)>M)&&--Xn>0);return[Oe,ke]},de},Ro=Vo(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),ro=function(){return u.geoProjection(Ro).scale(149.995)},vs=Vo(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Jo=function(){return u.geoProjection(vs).scale(153.93)},Do=Vo(5/6*y,-.62636,-.0344,0,1.3493,-.05524,0,.045),xs=function(){return u.geoProjection(Do).scale(130.945)};function Ra(D,W){var tt=D*D,st=W*W;return[D*(1-.162388*st)*(.87-952426e-9*tt*tt),W*(1+st/12)]}Ra.invert=function(D,W){var tt=D,st=W,Ct=50,It;do{var Ut=st*st;st-=It=(st*(1+Ut/12)-W)/(1+Ut/4)}while(c(It)>M&&--Ct>0);Ct=50,D/=1-.162388*Ut;do{var Zt=(Zt=tt*tt)*Zt;tt-=It=(tt*(.87-952426e-9*Zt)-D)/(.87-.00476213*Zt)}while(c(It)>M&&--Ct>0);return[tt,st]};var $o=function(){return u.geoProjection(Ra).scale(131.747)},jo=Vo(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762),Js=function(){return u.geoProjection(jo).scale(131.087)},io=function(W){var tt=W(S,0)[0]-W(-S,0)[0];function st(Ct,It){var Ut=Ct>0?-.5:.5,Zt=W(Ct+Ut*y,It);return Zt[0]-=Ut*tt,Zt}return W.invert&&(st.invert=function(Ct,It){var Ut=Ct>0?-.5:.5,Zt=W.invert(Ct+Ut*tt,It),qt=Zt[0]-Ut*y;return qt<-y?qt+=2*y:qt>y&&(qt-=2*y),Zt[0]=qt,Zt}),st};function so(D,W){var tt=g(D),st=g(W),Ct=n(W),It=n(D)*Ct,Ut=m(D)*Ct,Zt=m(st*W);D=c(h(Ut,Zt)),W=U(It),c(D-S)>M&&(D%=S);var qt=Gs(D>y/4?S-D:D,W);return D>y/4&&(Zt=qt[0],qt[0]=-qt[1],qt[1]=-Zt),qt[0]*=tt,qt[1]*=-st,qt}so.invert=function(D,W){c(D)>1&&(D=g(D)*2-D),c(W)>1&&(W=g(W)*2-W);var tt=g(D),st=g(W),Ct=-tt*D,It=-st*W,Ut=It/Ct<1,Zt=Ne(Ut?It:Ct,Ut?Ct:It),qt=Zt[0],de=Zt[1],me=n(de);return Ut&&(qt=-S-qt),[tt*(h(m(qt)*me,-m(de))+y),st*U(n(qt)*me)]};function Gs(D,W){if(W===S)return[0,0];var tt=m(W),st=tt*tt,Ct=st*st,It=1+Ct,Ut=1+3*Ct,Zt=1-Ct,qt=U(1/J(It)),de=Zt+st*It*qt,me=(1-tt)/de,je=J(me),Oe=me*It,ke=J(Oe),qe=je*Zt,an,Xn;if(D===0)return[0,-(qe+st*ke)];var kn=n(W),fr=1/kn,Mr=2*tt*kn,Qr=(-3*st+qt*Ut)*Mr,Zr=(-de*kn-(1-tt)*Qr)/(de*de),Pi=.5*Zr/je,Ri=Zt*Pi-2*st*je*Mr,Ki=st*It*Zr+me*Ut*Mr,Xi=-fr*Mr,Oa=-fr*Ki,ja=-2*fr*Ri,ki=4*D/y,Sa;if(D>.222*y||W<y/4&&D>.175*y){if(an=(qe+st*J(Oe*(1+Ct)-qe*qe))/(1+Ct),D>y/4)return[an,an];var ga=an,Yi=.5*an;an=.5*(Yi+ga),Xn=50;do{var _a=J(Oe-an*an),ra=an*(ja+Xi*_a)+Oa*U(an/ke)-ki;if(!ra)break;ra<0?Yi=an:ga=an,an=.5*(Yi+ga)}while(c(ga-Yi)>M&&--Xn>0)}else{an=M,Xn=25;do{var La=an*an,za=J(Oe-La),Ps=ja+Xi*za,ls=an*Ps+Oa*U(an/ke)-ki,Ts=Ps+(Oa-Xi*La)/za;an-=Sa=za?ls/Ts:0}while(c(Sa)>M&&--Xn>0)}return[an,-qe-st*J(Oe-an*an)]}function Ne(D,W){for(var tt=0,st=1,Ct=.5,It=50;;){var Ut=Ct*Ct,Zt=J(Ct),qt=U(1/J(1+Ut)),de=1-Ut+Ct*(1+Ut)*qt,me=(1-Zt)/de,je=J(me),Oe=me*(1+Ut),ke=je*(1-Ut),qe=Oe-D*D,an=J(qe),Xn=W+ke+Ct*an;if(c(st-tt)<x||--It==0||Xn===0)break;Xn>0?tt=Ct:st=Ct,Ct=.5*(tt+st)}if(!It)return null;var kn=U(Zt),fr=n(kn),Mr=1/fr,Qr=2*Zt*fr,Zr=(-3*Ct+qt*(1+3*Ut))*Qr,Pi=(-de*fr-(1-Zt)*Zr)/(de*de),Ri=.5*Pi/je,Ki=(1-Ut)*Ri-2*Ct*je*Qr,Xi=-2*Mr*Ki,Oa=-Mr*Qr,ja=-Mr*(Ct*(1+Ut)*Pi+me*(1+3*Ut)*Qr);return[y/4*(D*(Xi+Oa*an)+ja*U(D/J(Oe))),kn]}var se=function(){return u.geoProjection(io(so)).scale(239.75)};function Yt(D,W,tt){var st,Ct,It;return D?(st=Ee(D,tt),W?(Ct=Ee(W,1-tt),It=Ct[1]*Ct[1]+tt*st[0]*st[0]*Ct[0]*Ct[0],[[st[0]*Ct[2]/It,st[1]*st[2]*Ct[0]*Ct[1]/It],[st[1]*Ct[1]/It,-st[0]*st[2]*Ct[0]*Ct[2]/It],[st[2]*Ct[1]*Ct[2]/It,-tt*st[0]*st[1]*Ct[0]/It]]):[[st[0],0],[st[1],0],[st[2],0]]):(Ct=Ee(W,1-tt),[[0,Ct[0]/Ct[1]],[1/Ct[1],0],[Ct[2]/Ct[1],0]])}function Ee(D,W){var tt,st,Ct,It,Ut;if(W<M)return It=m(D),st=n(D),tt=W*(D-It*st)/4,[It-tt*st,st+tt*It,1-W*It*It/2,D-tt];if(W>=1-M)return tt=(1-W)/4,st=mt(D),It=rt(D),Ct=1/st,Ut=st*vt(D),[It+tt*(Ut-D)/(st*st),Ct-tt*It*Ct*(Ut-D),Ct+tt*It*Ct*(Ut+D),2*r(i(D))-S+tt*(Ut-D)/st];var Zt=[1,0,0,0,0,0,0,0,0],qt=[J(W),0,0,0,0,0,0,0,0],de=0;for(st=J(1-W),Ut=1;c(qt[de]/Zt[de])>M&&de<8;)tt=Zt[de++],qt[de]=(tt-st)/2,Zt[de]=(tt+st)/2,st=J(tt*st),Ut*=2;Ct=Ut*Zt[de]*D;do It=qt[de]*m(st=Ct)/Zt[de],Ct=(U(It)+Ct)/2;while(--de);return[m(Ct),It=n(Ct),It/n(Ct-st),Ct]}function sn(D,W,tt){var st=c(D),Ct=c(W),It=vt(Ct);if(st){var Ut=1/m(st),Zt=1/(_(st)*_(st)),qt=-(Zt+tt*(It*It*Ut*Ut)-1+tt),de=(tt-1)*Zt,me=(-qt+J(qt*qt-4*de))/2;return[Fn(r(1/J(me)),tt)*g(D),Fn(r(J((me/Zt-1)/tt)),1-tt)*g(W)]}return[0,Fn(r(It),1-tt)*g(W)]}function Fn(D,W){if(!W)return D;if(W===1)return o(_(D/2+P));for(var tt=1,st=J(1-W),Ct=J(W),It=0;c(Ct)>M;It++){if(D%y){var Ut=r(st*_(D)/tt);Ut<0&&(Ut+=y),D+=Ut+~~(D/y)*y}else D+=D;Ct=(tt+st)/2,st=J(tt*st),Ct=((tt=Ct)-st)/2}return D/(v(2,It)*tt)}function rr(D,W){var tt=(O-1)/(O+1),st=J(1-tt*tt),Ct=Fn(S,st*st),It=-1,Ut=o(_(y/4+c(W)/2)),Zt=i(It*Ut)/J(tt),qt=qn(Zt*n(It*D),Zt*m(It*D)),de=sn(qt[0],qt[1],st*st);return[-de[1],(W>=0?1:-1)*(.5*Ct-de[0])]}function qn(D,W){var tt=D*D,st=W+1,Ct=1-tt-W*W;return[.5*((D>=0?S:-S)-h(Ct,2*D)),-.25*o(Ct*Ct+4*tt)+.5*o(st*st+tt)]}function $r(D,W){var tt=W[0]*W[0]+W[1]*W[1];return[(D[0]*W[0]+D[1]*W[1])/tt,(D[1]*W[0]-D[0]*W[1])/tt]}rr.invert=function(D,W){var tt=(O-1)/(O+1),st=J(1-tt*tt),Ct=Fn(S,st*st),It=-1,Ut=Yt(.5*Ct-W,-D,st*st),Zt=$r(Ut[0],Ut[1]),qt=h(Zt[1],Zt[0])/It;return[qt,2*r(i(.5/It*o(tt*Zt[0]*Zt[0]+tt*Zt[1]*Zt[1])))-S]};var bi=function(){return u.geoProjection(io(rr)).scale(151.496)};function wi(D,W){if(arguments.length<2&&(W=D),W===1)return u.geoAzimuthalEqualAreaRaw;if(W===Infinity)return Vi;function tt(st,Ct){var It=u.geoAzimuthalEqualAreaRaw(st/W,Ct);return It[0]*=D,It}return tt.invert=function(st,Ct){var It=u.geoAzimuthalEqualAreaRaw.invert(st/D,Ct);return It[0]*=W,It},tt}function Vi(D,W){return[D*n(W)/n(W/=2),2*m(W)]}Vi.invert=function(D,W){var tt=2*U(W/2);return[D*n(tt/2)/n(tt),tt]};var sa=function(){var W=2,tt=u.geoProjectionMutator(wi),st=tt(W);return st.coefficient=function(Ct){return arguments.length?tt(W=+Ct):W},st.scale(169.529)};function $a(D){var W=m(D),tt=n(D),st=Ca(D);st.invert=Ca(-D);function Ct(It,Ut){var Zt=st(It,Ut);It=Zt[0],Ut=Zt[1];var qt=m(Ut),de=n(Ut),me=n(It),je=Z(W*qt+tt*de*me),Oe=m(je),ke=c(Oe)>M?je/Oe:1;return[ke*tt*m(It),(c(It)>S?ke:-ke)*(W*de-tt*qt*me)]}return Ct.invert=function(It,Ut){var Zt=J(It*It+Ut*Ut),qt=-m(Zt),de=n(Zt),me=Zt*de,je=-Ut*qt,Oe=Zt*W,ke=J(me*me+je*je-Oe*Oe),qe=h(me*Oe+je*ke,je*Oe-me*ke),an=(Zt>S?-1:1)*h(It*qt,Zt*n(qe)*de+Ut*m(qe)*qt);return st.invert(an,qe)},Ct}function Ca(D){var W=m(D),tt=n(D);return function(st,Ct){var It=n(Ct),Ut=n(st)*It,Zt=m(st)*It,qt=m(Ct);return[h(Zt,Ut*tt-qt*W),U(qt*tt+Ut*W)]}}var _o=function(){var W=0,tt=u.geoProjectionMutator($a),st=tt(W),Ct=st.rotate,It=st.stream,Ut=u.geoCircle();return st.parallel=function(Zt){if(!arguments.length)return W*F;var qt=st.rotate();return tt(W=Zt*K).rotate(qt)},st.rotate=function(Zt){return arguments.length?(Ct.call(st,[Zt[0],Zt[1]-W*F]),Ut.center([-Zt[0],-Zt[1]]),st):(Zt=Ct.call(st),Zt[1]+=W*F,Zt)},st.stream=function(Zt){return Zt=It(Zt),Zt.sphere=function(){Zt.polygonStart();var qt=.01,de=Ut.radius(90-qt)().coordinates[0],me=de.length-1,je=-1,Oe;for(Zt.lineStart();++je<me;)Zt.point((Oe=de[je])[0],Oe[1]);for(Zt.lineEnd(),de=Ut.radius(90+qt)().coordinates[0],me=de.length-1,Zt.lineStart();--je>=0;)Zt.point((Oe=de[je])[0],Oe[1]);Zt.lineEnd(),Zt.polygonEnd()},Zt},st.scale(79.4187).parallel(45).clipAngle(180-.001)},Fa=41+48/36+37/3600,uo=Te(0);function vo(D){var W=Fa*K,tt=hi(y,W)[0]-hi(-y,W)[0],st=uo(0,W)[1],Ct=hi(0,W)[1],It=L-Ct,Ut=H/D,Zt=4/H,qt=st+It*It*4/H;function de(me,je){var Oe,ke=c(je);if(ke>W){var qe=f(D-1,l(0,a((me+y)/Ut)));me+=y*(D-1)/D-qe*Ut,Oe=hi(me,ke),Oe[0]=Oe[0]*H/tt-H*(D-1)/(2*D)+qe*H/D,Oe[1]=st+(Oe[1]-Ct)*4*It/H,je<0&&(Oe[1]=-Oe[1])}else Oe=uo(me,je);return Oe[0]*=Zt,Oe[1]/=qt,Oe}return de.invert=function(me,je){me/=Zt,je*=qt;var Oe=c(je);if(Oe>st){var ke=f(D-1,l(0,a((me+y)/Ut)));me=(me+y*(D-1)/D-ke*Ut)*tt/H;var qe=hi.invert(me,.25*(Oe-st)*H/It+Ct);return qe[0]-=y*(D-1)/D-ke*Ut,je<0&&(qe[1]=-qe[1]),qe}return uo.invert(me,je)},de}function Ja(D){return{type:"Polygon",coordinates:[s.range(-180,180+D/2,D).map(function(W,tt){return[W,tt&1?90-1e-6:Fa]}).concat(s.range(180,-180-D/2,-D).map(function(W,tt){return[W,tt&1?-90+1e-6:-Fa]}))]}}var To=function(){var W=4,tt=u.geoProjectionMutator(vo),st=tt(W),Ct=st.stream;return st.lobes=function(It){return arguments.length?tt(W=+It):W},st.stream=function(It){var Ut=st.rotate(),Zt=Ct(It),qt=(st.rotate([0,0]),Ct(It));return st.rotate(Ut),Zt.sphere=function(){u.geoStream(Ja(180/W),qt)},Zt},st.scale(239.75)};function hs(D){var W=1+D,tt=m(1/W),st=U(tt),Ct=2*J(y/(It=y+4*st*W)),It,Ut=.5*Ct*(W+J(D*(2+D))),Zt=D*D,qt=W*W;function de(me,je){var Oe=1-m(je),ke,qe;if(Oe&&Oe<2){var an=S-je,Xn=25,kn;do{var fr=m(an),Mr=n(an),Qr=st+h(fr,W-Mr),Zr=1+qt-2*W*Mr;an-=kn=(an-Zt*st-W*fr+Zr*Qr-.5*Oe*It)/(2*W*fr*Qr)}while(c(kn)>x&&--Xn>0);ke=Ct*J(Zr),qe=me*Qr/y}else ke=Ct*(D+Oe),qe=me*st/y;return[ke*m(qe),Ut-ke*n(qe)]}return de.invert=function(me,je){var Oe=me*me+(je-=Ut)*je,ke=(1+qt-Oe/(Ct*Ct))/(2*W),qe=Z(ke),an=m(qe),Xn=st+h(an,W-ke);return[U(me/J(Oe))*y/Xn,U(1-2*(qe-Zt*st-W*an+(1+qt-2*W*ke)*Xn)/It)]},de}var zo=function(){var W=1,tt=u.geoProjectionMutator(hs),st=tt(W);return st.ratio=function(Ct){return arguments.length?tt(W=+Ct):W},st.scale(167.774).center([0,18.67])},bs=.7109889596207567,Ao=.0528035274542;function Wa(D,W){return W>-bs?(D=$(D,W),D[1]+=Ao,D):Ht(D,W)}Wa.invert=function(D,W){return W>-bs?$.invert(D,W-Ao):Ht.invert(D,W)};var Rs=function(){return u.geoProjection(Wa).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};function ss(D,W){return c(W)>bs?(D=$(D,W),D[1]-=W>0?Ao:-Ao,D):Ht(D,W)}ss.invert=function(D,W){return c(W)>bs?$.invert(D,W+(W>0?Ao:-Ao)):Ht.invert(D,W)};var Ba=function(){return u.geoProjection(ss).scale(152.63)};function gn(D,W){return c(D[0]-W[0])<M&&c(D[1]-W[1])<M}function cr(D,W){for(var tt=-1,st=D.length,Ct=D[0],It,Ut,Zt,qt=[];++tt<st;){It=D[tt],Ut=(It[0]-Ct[0])/W,Zt=(It[1]-Ct[1])/W;for(var de=0;de<W;++de)qt.push([Ct[0]+de*Ut,Ct[1]+de*Zt]);Ct=It}return qt.push(It),qt}function Gr(D){var W=[],tt,st,Ct,It,Ut,Zt,qt,de=D[0].length;for(qt=0;qt<de;++qt)tt=D[0][qt],st=tt[0][0],Ct=tt[0][1],It=tt[1][1],Ut=tt[2][0],Zt=tt[2][1],W.push(cr([[st+M,Ct+M],[st+M,It-M],[Ut-M,It-M],[Ut-M,Zt+M]],30));for(qt=D[1].length-1;qt>=0;--qt)tt=D[1][qt],st=tt[0][0],Ct=tt[0][1],It=tt[1][1],Ut=tt[2][0],Zt=tt[2][1],W.push(cr([[Ut-M,Zt-M],[Ut-M,It+M],[st+M,It+M],[st+M,Ct-M]],30));return{type:"Polygon",coordinates:[s.merge(W)]}}var Ui=function(W,tt){var st=Gr(tt);tt=tt.map(function(qt){return qt.map(function(de){return[[de[0][0]*K,de[0][1]*K],[de[1][0]*K,de[1][1]*K],[de[2][0]*K,de[2][1]*K]]})});var Ct=tt.map(function(qt){return qt.map(function(de){var me=W(de[0][0],de[0][1])[0],je=W(de[2][0],de[2][1])[0],Oe=W(de[1][0],de[0][1])[1],ke=W(de[1][0],de[1][1])[1],qe;return Oe>ke&&(qe=Oe,Oe=ke,ke=qe),[[me,Oe],[je,ke]]})});function It(qt,de){for(var me=de<0?-1:1,je=tt[+(de<0)],Oe=0,ke=je.length-1;Oe<ke&&qt>je[Oe][2][0];++Oe);var qe=W(qt-je[Oe][1][0],de);return qe[0]+=W(je[Oe][1][0],me*de>me*je[Oe][0][1]?je[Oe][0][1]:de)[0],qe}W.invert&&(It.invert=function(qt,de){for(var me=Ct[+(de<0)],je=tt[+(de<0)],Oe=0,ke=me.length;Oe<ke;++Oe){var qe=me[Oe];if(qe[0][0]<=qt&&qt<qe[1][0]&&qe[0][1]<=de&&de<qe[1][1]){var an=W.invert(qt-W(je[Oe][1][0],0)[0],de);return an[0]+=je[Oe][1][0],gn(It(an[0],an[1]),[qt,de])?an:null}}});var Ut=u.geoProjection(It),Zt=Ut.stream;return Ut.stream=function(qt){var de=Ut.rotate(),me=Zt(qt),je=(Ut.rotate([0,0]),Zt(qt));return Ut.rotate(de),me.sphere=function(){u.geoStream(st,je)},me},Ut},Ua=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],xo=function(){return Ui($t,Ua).scale(160.857)},po=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],ea=function(){return Ui(ss,po).scale(152.63)},Qa=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Ds=function(){return Ui($,Qa).scale(169.529)},Es=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],Za=function(){return Ui($,Es).scale(169.529).rotate([20,0])},ru=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],Qo=function(){return Ui(Wa,ru).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},Os=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]],$s=function(){return Ui(Ht,Os).scale(152.63).rotate([-20,0])};function Ss(D,W){return[3/H*D*J(y*y/3-W*W),W]}Ss.invert=function(D,W){return[H/3*D/J(y*y/3-W*W),W]};var ps=function(){return u.geoProjection(Ss).scale(158.837)};function rs(D){function W(tt,st){if(c(c(st)-S)<M)return[0,st<0?-2:2];var Ct=m(st),It=v((1+Ct)/(1-Ct),D/2),Ut=.5*(It+1/It)+n(tt*=D);return[2*m(tt)/Ut,(It-1/It)/Ut]}return W.invert=function(tt,st){var Ct=c(st);if(c(Ct-2)<M)return tt?null:[0,g(st)*S];if(Ct>2)return null;tt/=2,st/=2;var It=tt*tt,Ut=st*st,Zt=2*st/(1+It+Ut);return Zt=v((1+Zt)/(1-Zt),1/D),[h(2*tt,1-It-Ut)/D,U((Zt-1)/(Zt+1))]},W}var ws=function(){var W=.5,tt=u.geoProjectionMutator(rs),st=tt(W);return st.spacing=function(Ct){return arguments.length?tt(W=+Ct):W},st.scale(124.75)},_s=y/O;function Tu(D,W){return[D*(1+J(n(W)))/2,W/(n(W/2)*n(D/6))]}Tu.invert=function(D,W){var tt=c(D),st=c(W),Ct=M,It=S;st<_s?It*=st/_s:Ct+=6*Z(_s/st);for(var Ut=0;Ut<25;Ut++){var Zt=m(It),qt=J(n(It)),de=m(It/2),me=n(It/2),je=m(Ct/6),Oe=n(Ct/6),ke=.5*Ct*(1+qt)-tt,qe=It/(me*Oe)-st,an=qt?-.25*Ct*Zt/qt:0,Xn=.5*(1+qt),kn=(1+.5*It*de/me)/(me*Oe),fr=It/me*(je/6)/(Oe*Oe),Mr=an*fr-kn*Xn,Qr=(ke*fr-qe*Xn)/Mr,Zr=(qe*an-ke*kn)/Mr;if(It-=Qr,Ct-=Zr,c(Qr)<M&&c(Zr)<M)break}return[D<0?-Ct:Ct,W<0?-It:It]};var Ru=function(){return u.geoProjection(Tu).scale(97.2672)};function Mo(D,W){var tt=D*D,st=W*W;return[D*(.975534+st*(-.119161+tt*-.0143059+st*-.0547009)),W*(1.00384+tt*(.0802894+st*-.02855+tt*199025e-9)+st*(.0998909+st*-.0491032))]}Mo.invert=function(D,W){var tt=g(D)*y,st=W/2,Ct=50;do{var It=tt*tt,Ut=st*st,Zt=tt*st,qt=tt*(.975534+Ut*(-.119161+It*-.0143059+Ut*-.0547009))-D,de=st*(1.00384+It*(.0802894+Ut*-.02855+It*199025e-9)+Ut*(.0998909+Ut*-.0491032))-W,me=.975534-Ut*(.119161+3*It*.0143059+Ut*.0547009),je=-Zt*(2*.119161+4*.0547009*Ut+2*.0143059*It),Oe=Zt*(2*.0802894+4*199025e-9*It+2*-.02855*Ut),ke=1.00384+It*(.0802894+199025e-9*It)+Ut*(3*(.0998909-.02855*It)-5*.0491032*Ut),qe=je*Oe-ke*me,an=(de*je-qt*ke)/qe,Xn=(qt*Oe-de*me)/qe;tt-=an,st-=Xn}while((c(an)>M||c(Xn)>M)&&--Ct>0);return Ct&&[tt,st]};var Qs=function(){return u.geoProjection(Mo).scale(139.98)};function Du(D,W){return[m(D)/n(W),_(W)*n(D)]}Du.invert=function(D,W){var tt=D*D,st=W*W,Ct=st+1,It=D?A*J((Ct-J(tt*tt+2*tt*(st-1)+Ct*Ct))/tt+1):1/J(Ct);return[U(D*It),g(W)*Z(It)]};var Wu=function(){return u.geoProjection(Du).scale(144.049).clipAngle(90-.001)};function il(D){var W=n(D),tt=_(P+D/2);function st(Ct,It){var Ut=It-D,Zt=c(Ut)<M?Ct*W:c(Zt=P+It/2)<M||c(c(Zt)-S)<M?0:Ct*Ut/o(_(Zt)/tt);return[Zt,Ut]}return st.invert=function(Ct,It){var Ut,Zt=It+D;return[c(It)<M?Ct/W:c(Ut=P+Zt/2)<M||c(c(Ut)-S)<M?0:Ct*o(_(Ut)/tt)/It,Zt]},st}var ju=function(){return Gt(il).parallel(40).scale(158.837)};function Co(D,W){return[D,1.25*o(_(P+.4*W))]}Co.invert=function(D,W){return[D,2.5*r(i(.8*W))-.625*y]};var ka=function(){return u.geoProjection(Co).scale(108.318)};function ba(D){var W=D.length-1;function tt(st,Ct){for(var It=n(Ct),Ut=2/(1+It*n(st)),Zt=Ut*It*m(st),qt=Ut*m(Ct),de=W,me=D[de],je=me[0],Oe=me[1],ke;--de>=0;)me=D[de],je=me[0]+Zt*(ke=je)-qt*Oe,Oe=me[1]+Zt*Oe+qt*ke;return je=Zt*(ke=je)-qt*Oe,Oe=Zt*Oe+qt*ke,[je,Oe]}return tt.invert=function(st,Ct){var It=20,Ut=st,Zt=Ct;do{for(var qt=W,de=D[qt],me=de[0],je=de[1],Oe=0,ke=0,qe;--qt>=0;)de=D[qt],Oe=me+Ut*(qe=Oe)-Zt*ke,ke=je+Ut*ke+Zt*qe,me=de[0]+Ut*(qe=me)-Zt*je,je=de[1]+Ut*je+Zt*qe;Oe=me+Ut*(qe=Oe)-Zt*ke,ke=je+Ut*ke+Zt*qe,me=Ut*(qe=me)-Zt*je-st,je=Ut*je+Zt*qe-Ct;var an=Oe*Oe+ke*ke,Xn,kn;Ut-=Xn=(me*Oe+je*ke)/an,Zt-=kn=(je*Oe-me*ke)/an}while(c(Xn)+c(kn)>M*M&&--It>0);if(It){var fr=J(Ut*Ut+Zt*Zt),Mr=2*r(fr*.5),Qr=m(Mr);return[h(Ut*Qr,fr*n(Mr)),fr?U(Zt*Qr/fr):0]}},tt}var Bo=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],uu=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Hu=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],gs=[[.9245,0],[0,0],[.01943,0]],qo=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Is(){return Ka(Bo,[152,-64]).scale(1500).center([-160.908,62.4864]).clipAngle(25)}function iu(){return Ka(uu,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Fo(){return Ka(Hu,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Yu(){return Ka(gs,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Ys(){return Ka(qo,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Ka(D,W){var tt=u.geoProjection(ba(D)).rotate(W).clipAngle(90),st=u.geoRotation(W),Ct=tt.center;return delete tt.rotate,tt.center=function(It){return arguments.length?Ct(st(It)):st.invert(Ct())},tt}var pl=J(6),Gl=J(7);function gl(D,W){var tt=U(7*m(W)/(3*pl));return[pl*D*(2*n(2*tt/3)-1)/Gl,9*m(tt/3)/Gl]}gl.invert=function(D,W){var tt=3*U(W*Gl/9);return[D*Gl/(pl*(2*n(2*tt/3)-1)),U(m(tt)*3*pl/7)]};var Ec=function(){return u.geoProjection(gl).scale(164.859)};function Ml(D,W){for(var tt=(1+A)*m(W),st=W,Ct=0,It;Ct<25&&(st-=It=(m(st/2)+m(st)-tt)/(.5*n(st/2)+n(st)),!(c(It)<M));Ct++);return[D*(1+2*n(st)/n(st/2))/(3*O),2*J(3)*m(st/2)/J(2+O)]}Ml.invert=function(D,W){var tt=W*J(2+O)/(2*J(3)),st=2*U(tt);return[3*O*D/(1+2*n(st)/n(st/2)),U((tt+m(st))/(1+A))]};var ao=function(){return u.geoProjection(Ml).scale(188.209)};function Au(D,W){for(var tt=J(6/(4+y)),st=(1+y/4)*m(W),Ct=W/2,It=0,Ut;It<25&&(Ct-=Ut=(Ct/2+m(Ct)-st)/(.5+n(Ct)),!(c(Ut)<M));It++);return[tt*(.5+n(Ct))*D/1.5,tt*Ct]}Au.invert=function(D,W){var tt=J(6/(4+y)),st=W/tt;return c(c(st)-S)<M&&(st=st<0?-S:S),[1.5*D/(tt*(.5+n(st))),U((st/2+m(st))/(1+y/4))]};var ml=function(){return u.geoProjection(Au).scale(166.518)};function qs(D,W){var tt=W*W,st=tt*tt;return[D*(.8707-.131979*tt+st*(-.013791+st*(.003971*tt-.001529*st))),W*(1.007226+tt*(.015085+st*(-.044475+.028874*tt-.005916*st)))]}qs.invert=function(D,W){var tt=W,st=25,Ct;do{var It=tt*tt,Ut=It*It;tt-=Ct=(tt*(1.007226+It*(.015085+Ut*(-.044475+.028874*It-.005916*Ut)))-W)/(1.007226+It*(.015085*3+Ut*(-.044475*7+.028874*9*It-.005916*11*Ut)))}while(c(Ct)>M&&--st>0);return[D/(.8707+(It=tt*tt)*(-.131979+It*(-.013791+It*It*It*(.003971-.001529*It)))),tt]};var Bu=function(){return u.geoProjection(qs).scale(175.295)};function vu(D,W){var tt=W*W,st=tt*tt,Ct=tt*st;return[D*(.84719-.13063*tt+Ct*Ct*(-.04515+.05494*tt-.02326*st+.00331*Ct)),W*(1.01183+st*st*(-.02625+.01926*tt-.00396*st))]}vu.invert=function(D,W){var tt=W,st=25,Ct,It,Ut,Zt;do It=tt*tt,Ut=It*It,tt-=Ct=(tt*(1.01183+Ut*Ut*(-.02625+.01926*It-.00396*Ut))-W)/(1.01183+Ut*Ut*(9*-.02625+11*.01926*It+13*-.00396*Ut));while(c(Ct)>x&&--st>0);return It=tt*tt,Ut=It*It,Zt=It*Ut,[D/(.84719-.13063*It+Zt*Zt*(-.04515+.05494*It-.02326*Ut+.00331*Zt)),tt]};var pu=function(){return u.geoProjection(vu).scale(175.295)};function Zs(D,W){return[D*(1+n(W))/2,2*(W-_(W/2))]}Zs.invert=function(D,W){for(var tt=W/2,st=0,Ct=Infinity;st<10&&c(Ct)>M;++st){var It=n(W/2);W-=Ct=(W-_(W/2)-tt)/(1-.5/(It*It))}return[2*D/(1+n(W)),W]};var ds=function(){return u.geoProjection(Zs).scale(152.63)},Ms=1.0148,al=.23185,Pl=-.14499,jl=.02406,Nu=Ms,Zu=5*al,ol=7*Pl,gu=9*jl,au=1.790857183;function Ku(D,W){var tt=W*W;return[D,W*(Ms+tt*tt*(al+tt*(Pl+jl*tt)))]}Ku.invert=function(D,W){W>au?W=au:W<-au&&(W=-au);var tt=W,st;do{var Ct=tt*tt;tt-=st=(tt*(Ms+Ct*Ct*(al+Ct*(Pl+jl*Ct)))-W)/(Nu+Ct*Ct*(Zu+Ct*(ol+gu*Ct)))}while(c(st)>M);return[D,tt]};var Ls=function(){return u.geoProjection(Ku).scale(139.319)};function yl(D,W){if(c(W)<M)return[D,0];var tt=_(W),st=D*m(W);return[m(st)/tt,W+(1-n(st))/tt]}yl.invert=function(D,W){if(c(W)<M)return[D,0];var tt=D*D+W*W,st=W*.5,Ct=10,It;do{var Ut=_(st),Zt=1/n(st),qt=tt-2*W*st+st*st;st-=It=(Ut*qt+2*(st-W))/(2+qt*Zt*Zt+2*(st-W)*Ut)}while(c(It)>M&&--Ct>0);return Ut=_(st),[(c(W)<c(st+1/Ut)?U(D*Ut):g(D)*(Z(c(D*Ut))+S))/m(st),st]};var ic=function(){return u.geoProjection(yl).scale(103.74)},Tl=function(W,tt){var st=pc(W[1],W[0]),Ct=pc(tt[1],tt[0]),It=Al(st,Ct),Ut=Xu(st)/Xu(Ct);return Vl([1,0,W[0][0],0,1,W[0][1]],Vl([Ut,0,0,0,Ut,0],Vl([n(It),m(It),0,-m(It),n(It),0],[1,0,-tt[0][0],0,1,-tt[0][1]])))};function Bl(D){var W=1/(D[0]*D[4]-D[1]*D[3]);return[W*D[4],-W*D[1],W*(D[1]*D[5]-D[2]*D[4]),-W*D[3],W*D[0],W*(D[2]*D[3]-D[0]*D[5])]}function Vl(D,W){return[D[0]*W[0]+D[1]*W[3],D[0]*W[1]+D[1]*W[4],D[0]*W[2]+D[1]*W[5]+D[2],D[3]*W[0]+D[4]*W[3],D[3]*W[1]+D[4]*W[4],D[3]*W[2]+D[4]*W[5]+D[5]]}function pc(D,W){return[D[0]-W[0],D[1]-W[1]]}function Xu(D){return J(D[0]*D[0]+D[1]*D[1])}function Al(D,W){return h(D[0]*W[1]-D[1]*W[0],D[0]*W[0]+D[1]*W[1])}var Nl=function(W,tt,st){st=st==null?-y/6:st,Ct(W,{transform:[n(st),m(st),0,-m(st),n(st),0]});function Ct(me,je){if(me.edges=sl(me.face),je.face){var Oe=me.shared=xl(me.face,je.face),ke=Tl(Oe.map(je.project),Oe.map(me.project));me.transform=je.transform?Vl(je.transform,ke):ke;for(var qe=je.edges,an=0,Xn=qe.length;an<Xn;++an)go(Oe[0],qe[an][1])&&go(Oe[1],qe[an][0])&&(qe[an]=me),go(Oe[0],qe[an][0])&&go(Oe[1],qe[an][1])&&(qe[an]=me);for(qe=me.edges,an=0,Xn=qe.length;an<Xn;++an)go(Oe[0],qe[an][0])&&go(Oe[1],qe[an][1])&&(qe[an]=je),go(Oe[0],qe[an][1])&&go(Oe[1],qe[an][0])&&(qe[an]=je)}else me.transform=je.transform;return me.children&&me.children.forEach(function(kn){Ct(kn,me)}),me}function It(me,je){var Oe=tt(me,je),ke=Oe.project([me*F,je*F]),qe;return(qe=Oe.transform)?[qe[0]*ke[0]+qe[1]*ke[1]+qe[2],-(qe[3]*ke[0]+qe[4]*ke[1]+qe[5])]:(ke[1]=-ke[1],ke)}Vs(W)&&(It.invert=function(me,je){var Oe=Ut(W,[me,-je]);return Oe&&(Oe[0]*=K,Oe[1]*=K,Oe)});function Ut(me,je){var Oe=me.project.invert,ke=me.transform,qe=je;if(ke&&(ke=Bl(ke),qe=[ke[0]*qe[0]+ke[1]*qe[1]+ke[2],ke[3]*qe[0]+ke[4]*qe[1]+ke[5]]),Oe&&me===Zt(an=Oe(qe)))return an;for(var an,Xn=me.children,kn=0,fr=Xn&&Xn.length;kn<fr;++kn)if(an=Ut(Xn[kn],je))return an}function Zt(me){return tt(me[0]*K,me[1]*K)}var qt=u.geoProjection(It),de=qt.stream;return qt.stream=function(me){var je=qt.rotate(),Oe=de(me),ke=(qt.rotate([0,0]),de(me));return qt.rotate(je),Oe.sphere=function(){ke.polygonStart(),ke.lineStart(),Oo(ke,W),ke.lineEnd(),ke.polygonEnd()},Oe},qt};function Oo(D,W,tt){var st,Ct=W.edges,It=Ct.length,Ut,Zt={type:"MultiPoint",coordinates:W.face},qt=W.face.filter(function(an){return c(an[1])!==90}),de=u.geoBounds({type:"MultiPoint",coordinates:qt}),me=!1,je=-1,Oe=de[1][0]-de[0][0],ke=Oe===180||Oe===360?[(de[0][0]+de[1][0])/2,(de[0][1]+de[1][1])/2]:u.geoCentroid(Zt);if(tt)for(;++je<It&&Ct[je]!==tt;);++je;for(var qe=0;qe<It;++qe)Ut=Ct[(qe+je)%It],Array.isArray(Ut)?(me||(D.point((st=u.geoInterpolate(Ut[0],ke)(M))[0],st[1]),me=!0),D.point((st=u.geoInterpolate(Ut[1],ke)(M))[0],st[1])):(me=!1,Ut!==tt&&Oo(D,Ut,W))}function go(D,W){return D&&W&&D[0]===W[0]&&D[1]===W[1]}function xl(D,W){for(var tt,st,Ct=D.length,It=null,Ut=0;Ut<Ct;++Ut){tt=D[Ut];for(var Zt=W.length;--Zt>=0;)if(st=W[Zt],tt[0]===st[0]&&tt[1]===st[1]){if(It)return[It,tt];It=tt}}}function sl(D){for(var W=D.length,tt=[],st=D[W-1],Ct=0;Ct<W;++Ct)tt.push([st,st=D[Ct]]);return tt}function Vs(D){return D.project.invert||D.children&&D.children.some(Vs)}var Da=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],bo=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(D){return D.map(function(W){return Da[W]})}),Ns=function(W){W=W||function(st){var Ct=u.geoCentroid({type:"MultiPoint",coordinates:st});return u.geoGnomonic().scale(1).translate([0,0]).rotate([-Ct[0],-Ct[1]])};var tt=bo.map(function(st){return{face:st,project:W(st)}});return[-1,0,0,1,0,1,4,5].forEach(function(st,Ct){var It=tt[st];It&&(It.children||(It.children=[])).push(tt[Ct])}),Nl(tt[0],function(st,Ct){return tt[st<-y/2?Ct<0?6:4:st<0?Ct<0?2:0:st<y/2?Ct<0?3:1:Ct<0?7:5]}).scale(101.858).center([0,45])},Cl=2/J(3);function ul(D,W){var tt=hi(D,W);return[tt[0]*Cl,tt[1]]}ul.invert=function(D,W){return hi.invert(D/Cl,W)};var Ju=function(W){W=W||function(st){var Ct=u.geoCentroid({type:"MultiPoint",coordinates:st});return u.geoProjection(ul).translate([0,0]).scale(1).rotate(Ct[1]>0?[-Ct[0],0]:[180-Ct[0],180])};var tt=bo.map(function(st){return{face:st,project:W(st)}});return[-1,0,0,1,0,1,4,5].forEach(function(st,Ct){var It=tt[st];It&&(It.children||(It.children=[])).push(tt[Ct])}),Nl(tt[0],function(st,Ct){return tt[st<-y/2?Ct<0?6:4:st<0?Ct<0?2:0:st<y/2?Ct<0?3:1:Ct<0?7:5]}).scale(121.906).center([0,48.5904])},Sc=function(W){W=W||function(Zt){var qt=Zt.length===6?u.geoCentroid({type:"MultiPoint",coordinates:Zt}):Zt[0];return u.geoGnomonic().scale(1).translate([0,0]).rotate([-qt[0],-qt[1]])};var tt=bo.map(function(Zt){for(var qt=Zt.map(Ws),de=qt.length,me=qt[de-1],je,Oe=[],ke=0;ke<de;++ke)je=qt[ke],Oe.push(tu([me[0]*.9486832980505138+je[0]*.31622776601683794,me[1]*.9486832980505138+je[1]*.31622776601683794,me[2]*.9486832980505138+je[2]*.31622776601683794]),tu([je[0]*.9486832980505138+me[0]*.31622776601683794,je[1]*.9486832980505138+me[1]*.31622776601683794,je[2]*.9486832980505138+me[2]*.31622776601683794])),me=je;return Oe}),st=[],Ct=[-1,0,0,1,0,1,4,5];tt.forEach(function(Zt,qt){for(var de=bo[qt],me=de.length,je=st[qt]=[],Oe=0;Oe<me;++Oe)tt.push([de[Oe],Zt[(Oe*2+2)%(2*me)],Zt[(Oe*2+1)%(2*me)]]),Ct.push(qt),je.push($u(Ws(Zt[(Oe*2+2)%(2*me)]),Ws(Zt[(Oe*2+1)%(2*me)])))});var It=tt.map(function(Zt){return{project:W(Zt),face:Zt}});Ct.forEach(function(Zt,qt){var de=It[Zt];de&&(de.children||(de.children=[])).push(It[qt])});function Ut(Zt,qt){var de=n(qt),me=[de*n(Zt),de*m(Zt),m(qt)],je=Zt<-y/2?qt<0?6:4:Zt<0?qt<0?2:0:Zt<y/2?qt<0?3:1:qt<0?7:5,Oe=st[je];return It[Wl(Oe[0],me)<0?8+3*je:Wl(Oe[1],me)<0?8+3*je+1:Wl(Oe[2],me)<0?8+3*je+2:je]}return Nl(It[0],Ut).scale(110.625).center([0,45])};function Wl(D,W){for(var tt=0,st=D.length,Ct=0;tt<st;++tt)Ct+=D[tt]*W[tt];return Ct}function $u(D,W){return[D[1]*W[2]-D[2]*W[1],D[2]*W[0]-D[0]*W[2],D[0]*W[1]-D[1]*W[0]]}function tu(D){return[h(D[1],D[0])*F,U(l(-1,f(1,D[2])))*F]}function Ws(D){var W=D[0]*K,tt=D[1]*K,st=n(tt);return[st*n(W),st*m(W),m(tt)]}var is=function(){},eu=function(W){if((st=W.length)<4)return!1;for(var tt=0,st,Ct=W[st-1][1]*W[0][0]-W[st-1][0]*W[0][1];++tt<st;)Ct+=W[tt-1][1]*W[tt][0]-W[tt-1][0]*W[tt][1];return Ct<=0},Fu=function(W,tt){for(var st=tt[0],Ct=tt[1],It=!1,Ut=0,Zt=W.length,qt=Zt-1;Ut<Zt;qt=Ut++){var de=W[Ut],me=de[0],je=de[1],Oe=W[qt],ke=Oe[0],qe=Oe[1];je>Ct^qe>Ct&&st<(ke-me)*(Ct-je)/(qe-je)+me&&(It=!It)}return It},us=function(W,tt){var st=tt.stream,Ct;if(!st)throw new Error("invalid projection");switch(W&&W.type){case"Feature":Ct=js;break;case"FeatureCollection":Ct=Wi;break;default:Ct=zu;break}return Ct(W,st)};function Wi(D,W){return{type:"FeatureCollection",features:D.features.map(function(tt){return js(tt,W)})}}function js(D,W){return{type:"Feature",id:D.id,properties:D.properties,geometry:zu(D.geometry,W)}}function Qu(D,W){return{type:"GeometryCollection",geometries:D.geometries.map(function(tt){return zu(tt,W)})}}function zu(D,W){if(!D)return null;if(D.type==="GeometryCollection")return Qu(D,W);var tt;switch(D.type){case"Point":tt=mu;break;case"MultiPoint":tt=mu;break;case"LineString":tt=_i;break;case"MultiLineString":tt=_i;break;case"Polygon":tt=yu;break;case"MultiPolygon":tt=yu;break;case"Sphere":tt=yu;break;default:return null}return u.geoStream(D,W(tt)),tt.result()}var Uo=[],Wo=[],mu={point:function(W,tt){Uo.push([W,tt])},result:function(){var W=Uo.length?Uo.length<2?{type:"Point",coordinates:Uo[0]}:{type:"MultiPoint",coordinates:Uo}:null;return Uo=[],W}},_i={lineStart:is,point:function(W,tt){Uo.push([W,tt])},lineEnd:function(){Uo.length&&(Wo.push(Uo),Uo=[])},result:function(){var W=Wo.length?Wo.length<2?{type:"LineString",coordinates:Wo[0]}:{type:"MultiLineString",coordinates:Wo}:null;return Wo=[],W}},yu={polygonStart:is,lineStart:is,point:function(W,tt){Uo.push([W,tt])},lineEnd:function(){var W=Uo.length;if(W){do Uo.push(Uo[0].slice());while(++W<4);Wo.push(Uo),Uo=[]}},polygonEnd:is,result:function(){if(!Wo.length)return null;var W=[],tt=[];return Wo.forEach(function(st){eu(st)?W.push([st]):tt.push(st)}),tt.forEach(function(st){var Ct=st[0];W.some(function(It){if(Fu(It[0],Ct))return It.push(st),!0})||W.push([st])}),Wo=[],W.length?W.length>1?{type:"MultiPolygon",coordinates:W}:{type:"Polygon",coordinates:W[0]}:null}},Cu=function(W){var tt=W(S,0)[0]-W(-S,0)[0];function st(Ct,It){var Ut=c(Ct)<S,Zt=W(Ut?Ct:Ct>0?Ct-y:Ct+y,It),qt=(Zt[0]-Zt[1])*A,de=(Zt[0]+Zt[1])*A;if(Ut)return[qt,de];var me=tt*A,je=qt>0^de>0?-1:1;return[je*qt-g(de)*me,je*de-g(qt)*me]}return W.invert&&(st.invert=function(Ct,It){var Ut=(Ct+It)*A,Zt=(It-Ct)*A,qt=c(Ut)<.5*tt&&c(Zt)<.5*tt;if(!qt){var de=tt*A,me=Ut>0^Zt>0?-1:1,je=-me*Ct+(Zt>0?1:-1)*de,Oe=-me*It+(Ut>0?1:-1)*de;Ut=(-je-Oe)*A,Zt=(je-Oe)*A}var ke=W.invert(Ut,Zt);return qt||(ke[0]+=Ut>0?y:-y),ke}),u.geoProjection(st).rotate([-90,-90,45]).clipAngle(180-.001)},Ou=function(){return Cu(so).scale(176.423)},Ks=function(){return Cu(rr).scale(111.48)},we=function(W,tt){if(!(0<=(tt=+tt)&&tt<=20))throw new Error("invalid digits");function st(de){var me=de.length,je=2,Oe=new Array(me);for(Oe[0]=+de[0].toFixed(tt),Oe[1]=+de[1].toFixed(tt);je<me;)Oe[je]=de[je],++je;return Oe}function Ct(de){return de.map(st)}function It(de){return de.map(Ct)}function Ut(de){if(de==null)return de;var me;switch(de.type){case"GeometryCollection":me={type:"GeometryCollection",geometries:de.geometries.map(Ut)};break;case"Point":me={type:"Point",coordinates:st(de.coordinates)};break;case"MultiPoint":case"LineString":me={type:de.type,coordinates:Ct(de.coordinates)};break;case"MultiLineString":case"Polygon":me={type:de.type,coordinates:It(de.coordinates)};break;case"MultiPolygon":me={type:"MultiPolygon",coordinates:de.coordinates.map(It)};break;default:return de}return de.bbox!=null&&(me.bbox=de.bbox),me}function Zt(de){var me={type:"Feature",properties:de.properties,geometry:Ut(de.geometry)};return de.id!=null&&(me.id=de.id),de.bbox!=null&&(me.bbox=de.bbox),me}if(W!=null)switch(W.type){case"Feature":return Zt(W);case"FeatureCollection":{var qt={type:"FeatureCollection",features:W.features.map(Zt)};return W.bbox!=null&&(qt.bbox=W.bbox),qt}default:return Ut(W)}return W};function Pe(D){var W=m(D);function tt(st,Ct){var It=W?_(st*W/2)/W:st/2;if(!Ct)return[2*It,-D];var Ut=2*r(It*m(Ct)),Zt=1/_(Ct);return[m(Ut)*Zt,Ct+(1-n(Ut))*Zt-D]}return tt.invert=function(st,Ct){if(c(Ct+=D)<M)return[W?2*r(W*st/2)/W:st,0];var It=st*st+Ct*Ct,Ut=0,Zt=10,qt;do{var de=_(Ut),me=1/n(Ut),je=It-2*Ct*Ut+Ut*Ut;Ut-=qt=(de*je+2*(Ut-Ct))/(2+je*me*me+2*(Ut-Ct)*de)}while(c(qt)>M&&--Zt>0);var Oe=st*(de=_(Ut)),ke=_(c(Ct)<c(Ut+1/de)?U(Oe)*.5:Z(Oe)*.5+y/4)/m(Ut);return[W?2*r(W*ke)/W:2*ke,Ut]},tt}var hn=function(){return Gt(Pe).scale(131.215)},tn=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];tn.forEach(function(D){D[1]*=1.0144});function On(D,W){var tt=f(18,c(W)*36/y),st=a(tt),Ct=tt-st,It=(je=tn[st])[0],Ut=je[1],Zt=(je=tn[++st])[0],qt=je[1],de=(je=tn[f(19,++st)])[0],me=je[1],je;return[D*(Zt+Ct*(de-It)/2+Ct*Ct*(de-2*Zt+It)/2),(W>0?S:-S)*(qt+Ct*(me-Ut)/2+Ct*Ct*(me-2*qt+Ut)/2)]}On.invert=function(D,W){var tt=W/S,st=tt*90,Ct=f(18,c(st/5)),It=l(0,a(Ct));do{var Ut=tn[It][1],Zt=tn[It+1][1],qt=tn[f(19,It+2)][1],de=qt-Ut,me=qt-2*Zt+Ut,je=2*(c(tt)-Zt)/de,Oe=me/de,ke=je*(1-Oe*je*(1-2*Oe*je));if(ke>=0||It===1){st=(W>=0?5:-5)*(ke+Ct);var qe=50,an;do Ct=f(18,c(st)/5),It=a(Ct),ke=Ct-It,Ut=tn[It][1],Zt=tn[It+1][1],qt=tn[f(19,It+2)][1],st-=(an=(W>=0?S:-S)*(Zt+ke*(qt-Ut)/2+ke*ke*(qt-2*Zt+Ut)/2)-W)*F;while(c(an)>x&&--qe>0);break}}while(--It>=0);var Xn=tn[It][0],kn=tn[It+1][0],fr=tn[f(19,It+2)][0];return[D/(kn+ke*(fr-Xn)/2+ke*ke*(fr-2*kn+Xn)/2),st*K]};var hr=function(){return u.geoProjection(On).scale(152.63)};function Rr(D){function W(tt,st){var Ct=n(st),It=(D-1)/(D-Ct*n(tt));return[It*Ct*m(tt),It*m(st)]}return W.invert=function(tt,st){var Ct=tt*tt+st*st,It=J(Ct),Ut=(D-J(1-Ct*(D+1)/(D-1)))/((D-1)/It+It/(D-1));return[h(tt*Ut,It*J(1-Ut*Ut)),It?U(st*Ut/It):0]},W}function Xr(D,W){var tt=Rr(D);if(!W)return tt;var st=n(W),Ct=m(W);function It(Ut,Zt){var qt=tt(Ut,Zt),de=qt[1],me=de*Ct/(D-1)+st;return[qt[0]*st/me,de/me]}return It.invert=function(Ut,Zt){var qt=(D-1)/(D-1-Zt*Ct);return tt.invert(qt*Ut,qt*Zt*st)},It}var ni=function(){var W=2,tt=0,st=u.geoProjectionMutator(Xr),Ct=st(W,tt);return Ct.distance=function(It){return arguments.length?st(W=+It,tt):W},Ct.tilt=function(It){return arguments.length?st(W,tt=It*K):tt*F},Ct.scale(432.147).clipAngle(Z(1/W)*F-1e-6)},zr=1e-4,li=1e4,yr=-180,Kt=yr+zr,te=180,Le=te-zr,Se=-90,Dt=Se+zr,zt=90,oe=zt-zr;function ne(D){return D.length>0}function he(D){return Math.floor(D*li)/li}function Fe(D){return D===Se||D===zt?[0,D]:[yr,he(D)]}function Ze(D){var W=D[0],tt=D[1],st=!1;return W<=Kt?(W=yr,st=!0):W>=Le&&(W=te,st=!0),tt<=Dt?(tt=Se,st=!0):tt>=oe&&(tt=zt,st=!0),st?[W,tt]:D}function nn(D){return D.map(Ze)}function Je(D,W,tt){for(var st=0,Ct=D.length;st<Ct;++st){var It=D[st].slice();tt.push({index:-1,polygon:W,ring:It});for(var Ut=0,Zt=It.length;Ut<Zt;++Ut){var qt=It[Ut],de=qt[0],me=qt[1];if(de<=Kt||de>=Le||me<=Dt||me>=oe){It[Ut]=Ze(qt);for(var je=Ut+1;je<Zt;++je){var Oe=It[je],ke=Oe[0],qe=Oe[1];if(ke>Kt&&ke<Le&&qe>Dt&&qe<oe)break}if(je===Ut+1)continue;if(Ut){var an={index:-1,polygon:W,ring:It.slice(0,Ut+1)};an.ring[an.ring.length-1]=Fe(me),tt[tt.length-1]=an}else tt.pop();if(je>=Zt)break;tt.push({index:-1,polygon:W,ring:It=It.slice(je-1)}),It[0]=Fe(It[0][1]),Ut=-1,Zt=It.length}}}}function pn(D){var W,tt=D.length,st={},Ct={},It,Ut,Zt,qt,de;for(W=0;W<tt;++W){if(It=D[W],Ut=It.ring[0],qt=It.ring[It.ring.length-1],Ut[0]===qt[0]&&Ut[1]===qt[1]){It.polygon.push(It.ring),D[W]=null;continue}It.index=W,st[Ut]=Ct[qt]=It}for(W=0;W<tt;++W)if(It=D[W],It){if(Ut=It.ring[0],qt=It.ring[It.ring.length-1],Zt=Ct[Ut],de=st[qt],delete st[Ut],delete Ct[qt],Ut[0]===qt[0]&&Ut[1]===qt[1]){It.polygon.push(It.ring);continue}Zt?(delete Ct[Ut],delete st[Zt.ring[0]],Zt.ring.pop(),D[Zt.index]=null,It={index:-1,polygon:Zt.polygon,ring:Zt.ring.concat(It.ring)},Zt===de?It.polygon.push(It.ring):(It.index=tt++,D.push(st[It.ring[0]]=Ct[It.ring[It.ring.length-1]]=It))):de?(delete st[qt],delete Ct[de.ring[de.ring.length-1]],It.ring.pop(),It={index:tt++,polygon:de.polygon,ring:It.ring.concat(de.ring)},D[de.index]=null,D.push(st[It.ring[0]]=Ct[It.ring[It.ring.length-1]]=It)):(It.ring.push(It.ring[0]),It.polygon.push(It.ring))}}function fn(D){var W={type:"Feature",geometry:Hn(D.geometry)};return D.id!=null&&(W.id=D.id),D.bbox!=null&&(W.bbox=D.bbox),D.properties!=null&&(W.properties=D.properties),W}function Hn(D){if(D==null)return D;var W,tt,st,Ct;switch(D.type){case"GeometryCollection":W={type:"GeometryCollection",geometries:D.geometries.map(Hn)};break;case"Point":W={type:"Point",coordinates:Ze(D.coordinates)};break;case"MultiPoint":case"LineString":W={type:D.type,coordinates:nn(D.coordinates)};break;case"MultiLineString":W={type:"MultiLineString",coordinates:D.coordinates.map(nn)};break;case"Polygon":{var It=[];Je(D.coordinates,It,tt=[]),pn(tt),W={type:"Polygon",coordinates:It};break}case"MultiPolygon":{tt=[],st=-1,Ct=D.coordinates.length;for(var Ut=new Array(Ct);++st<Ct;)Je(D.coordinates[st],Ut[st]=[],tt);pn(tt),W={type:"MultiPolygon",coordinates:Ut.filter(ne)};break}default:return D}return D.bbox!=null&&(W.bbox=D.bbox),W}var Un=function(W){if(W==null)return W;switch(W.type){case"Feature":return fn(W);case"FeatureCollection":{var tt={type:"FeatureCollection",features:W.features.map(fn)};return W.bbox!=null&&(tt.bbox=W.bbox),tt}default:return Hn(W)}};function Vn(D,W){var tt=_(W/2),st=m(P*tt);return[D*(.74482-.34588*st*st),1.70711*tt]}Vn.invert=function(D,W){var tt=W/1.70711,st=m(P*tt);return[D/(.74482-.34588*st*st),2*r(tt)]};var Gn=function(){return u.geoProjection(Vn).scale(146.153)},dr=function(W,tt,st){var Ct=u.geoInterpolate(tt,st),It=Ct(.5),Ut=u.geoRotation([-It[0],-It[1]])(tt),Zt=Ct.distance/2,qt=-U(m(Ut[1]*K)/m(Zt)),de=[-It[0],-It[1],-(Ut[0]>0?y-qt:qt)*F],me=u.geoProjection(W(Zt)).rotate(de),je=u.geoRotation(de),Oe=me.center;return delete me.rotate,me.center=function(ke){return arguments.length?Oe(je(ke)):je.invert(Oe())},me.clipAngle(90)};function br(D){var W=n(D);function tt(st,Ct){var It=u.geoGnomonicRaw(st,Ct);return It[0]*=W,It}return tt.invert=function(st,Ct){return u.geoGnomonicRaw.invert(st/W,Ct)},tt}function Kr(){return mi([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function mi(D,W){return dr(br,D,W)}function jr(D){if(!(D*=2))return u.geoAzimuthalEquidistantRaw;var W=-D/2,tt=-W,st=D*D,Ct=_(tt),It=.5/m(tt);function Ut(Zt,qt){var de=Z(n(qt)*n(Zt-W)),me=Z(n(qt)*n(Zt-tt)),je=qt<0?-1:1;return de*=de,me*=me,[(de-me)/(2*D),je*J(4*st*me-(st-de+me)*(st-de+me))/(2*D)]}return Ut.invert=function(Zt,qt){var de=qt*qt,me=n(J(de+(Oe=Zt+W)*Oe)),je=n(J(de+(Oe=Zt+tt)*Oe)),Oe,ke;return[h(ke=me-je,Oe=(me+je)*Ct),(qt<0?-1:1)*Z(J(Oe*Oe+ke*ke)*It)]},Ut}function oi(){return fi([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function fi(D,W){return dr(jr,D,W)}function Hi(D,W){if(c(W)<M)return[D,0];var tt=c(W/S),st=U(tt);if(c(D)<M||c(c(W)-S)<M)return[0,g(W)*y*_(st/2)];var Ct=n(st),It=c(y/D-D/y)/2,Ut=It*It,Zt=Ct/(tt+Ct-1),qt=Zt*(2/tt-1),de=qt*qt,me=de+Ut,je=Zt-de,Oe=Ut+Zt;return[g(D)*y*(It*je+J(Ut*je*je-me*(Zt*Zt-de)))/me,g(W)*y*(qt*Oe-It*J((Ut+1)*me-Oe*Oe))/me]}Hi.invert=function(D,W){if(c(W)<M)return[D,0];if(c(D)<M)return[0,S*m(2*r(W/y))];var tt=(D/=y)*D,st=(W/=y)*W,Ct=tt+st,It=Ct*Ct,Ut=-c(W)*(1+Ct),Zt=Ut-2*st+tt,qt=-2*Ut+1+2*st+It,de=st/qt+(2*Zt*Zt*Zt/(qt*qt*qt)-9*Ut*Zt/(qt*qt))/27,me=(Ut-Zt*Zt/(3*qt))/qt,je=2*J(-me/3),Oe=Z(3*de/(me*je))/3;return[y*(Ct-1+J(1+2*(tt-st)+It))/(2*D),g(W)*y*(-je*n(Oe+y/3)-Zt/(3*qt))]};var Di=function(){return u.geoProjection(Hi).scale(79.4183)};function Ma(D,W){if(c(W)<M)return[D,0];var tt=c(W/S),st=U(tt);if(c(D)<M||c(c(W)-S)<M)return[0,g(W)*y*_(st/2)];var Ct=n(st),It=c(y/D-D/y)/2,Ut=It*It,Zt=Ct*(J(1+Ut)-It*Ct)/(1+Ut*tt*tt);return[g(D)*y*Zt,g(W)*y*J(1-Zt*(2*It+Zt))]}Ma.invert=function(D,W){if(!D)return[0,S*m(2*r(W/y))];var tt=c(D/y),st=(1-tt*tt-(W/=y)*W)/(2*tt),Ct=st*st,It=J(Ct+1);return[g(D)*y*(It-st),g(W)*S*m(2*h(J((1-2*st*tt)*(st+It)-tt),J(It+st+tt)))]};var xa=function(){return u.geoProjection(Ma).scale(79.4183)};function Pa(D,W){if(c(W)<M)return[D,0];var tt=W/S,st=U(tt);if(c(D)<M||c(c(W)-S)<M)return[0,y*_(st/2)];var Ct=(y/D-D/y)/2,It=tt/(1+n(st));return[y*(g(D)*J(Ct*Ct+1-It*It)-Ct),y*It]}Pa.invert=function(D,W){if(!W)return[D,0];var tt=W/y,st=(y*y*(1-tt*tt)-D*D)/(2*y*D);return[D?y*(g(D)*J(st*st+1)-st):0,S*m(2*r(tt))]};var ei=function(){return u.geoProjection(Pa).scale(79.4183)};function Ea(D,W){if(!W)return[D,0];var tt=c(W);if(!D||tt===S)return[0,W];var st=tt/S,Ct=st*st,It=(8*st-Ct*(Ct+2)-5)/(2*Ct*(st-1)),Ut=It*It,Zt=st*It,qt=Ct+Ut+2*Zt,de=st+3*It,me=D/S,je=me+1/me,Oe=g(c(D)-S)*J(je*je-4),ke=Oe*Oe,qe=qt*(Ct+Ut*ke-1)+(1-Ct)*(Ct*(de*de+4*Ut)+12*Zt*Ut+4*Ut*Ut),an=(Oe*(qt+Ut-1)+2*J(qe))/(4*qt+ke);return[g(D)*S*an,g(W)*S*J(1+Oe*c(an)-an*an)]}Ea.invert=function(D,W){var tt;if(!D||!W)return[D,W];W/=y;var st=g(D)*D/S,Ct=(st*st-1+4*W*W)/c(st),It=Ct*Ct,Ut=2*W,Zt=50;do{var qt=Ut*Ut,de=(8*Ut-qt*(qt+2)-5)/(2*qt*(Ut-1)),me=(3*Ut-qt*Ut-10)/(2*qt*Ut),je=de*de,Oe=Ut*de,ke=Ut+de,qe=ke*ke,an=Ut+3*de,Xn=qe*(qt+je*It-1)+(1-qt)*(qt*(an*an+4*je)+je*(12*Oe+4*je)),kn=-2*ke*(4*Oe*je+(1-4*qt+3*qt*qt)*(1+me)+je*(-6+14*qt-It+(-8+8*qt-2*It)*me)+Oe*(-8+12*qt+(-10+10*qt-It)*me)),fr=J(Xn),Mr=Ct*(qe+je-1)+2*fr-st*(4*qe+It),Qr=Ct*(2*de*me+2*ke*(1+me))+kn/fr-8*ke*(Ct*(-1+je+qe)+2*fr)*(1+me)/(It+4*qe);Ut-=tt=Mr/Qr}while(tt>M&&--Zt>0);return[g(D)*(J(Ct*Ct+4)+Ct)*y/4,S*Ut]};var Ga=function(){return u.geoProjection(Ea).scale(127.16)},Ha=4*y+3*J(3),Li=2*J(2*y*J(3)/Ha),Ia=it(Li*J(3)/y,Li,Ha/6),Eo=function(){return u.geoProjection(Ia).scale(176.84)};function Hs(D,W){return[D*J(1-3*W*W/(y*y)),W]}Hs.invert=function(D,W){return[D/J(1-3*W*W/(y*y)),W]};var Fs=function(){return u.geoProjection(Hs).scale(152.63)};function Ol(D,W){var tt=.90631*m(W),st=J(1-tt*tt),Ct=J(2/(1+st*n(D/=3)));return[2.66723*st*Ct*m(D),1.24104*tt*Ct]}Ol.invert=function(D,W){var tt=D/2.66723,st=W/1.24104,Ct=J(tt*tt+st*st),It=2*U(Ct/2);return[3*h(D*_(It),2.66723*Ct),Ct&&U(W*m(It)/(1.24104*.90631*Ct))]};var xu=function(){return u.geoProjection(Ol).scale(172.632)};function j(D,W){var tt=n(W),st=n(D)*tt,Ct=1-st,It=n(D=h(m(D)*tt,-m(W))),Ut=m(D);return tt=J(1-st*st),[Ut*tt-It*Ct,-It*tt-Ut*Ct]}j.invert=function(D,W){var tt=(D*D+W*W)/-2,st=J(-tt*(2+tt)),Ct=W*tt+D*st,It=D*tt-W*st,Ut=J(It*It+Ct*Ct);return[h(st*Ct,Ut*(1+tt)),Ut?-U(st*It/Ut):0]};var I=function(){return u.geoProjection(j).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)};function w(D,W){var tt=Mt(D,W);return[(tt[0]+D/S)/2,(tt[1]+W)/2]}w.invert=function(D,W){var tt=D,st=W,Ct=25;do{var It=n(st),Ut=m(st),Zt=m(2*st),qt=Ut*Ut,de=It*It,me=m(tt),je=n(tt/2),Oe=m(tt/2),ke=Oe*Oe,qe=1-de*je*je,an=qe?Z(It*je)*J(Xn=1/qe):Xn=0,Xn,kn=.5*(2*an*It*Oe+tt/S)-D,fr=.5*(an*Ut+st)-W,Mr=.5*Xn*(de*ke+an*It*je*qt)+.5/S,Qr=Xn*(me*Zt/4-an*Ut*Oe),Zr=.125*Xn*(Zt*Oe-an*Ut*de*me),Pi=.5*Xn*(qt*je+an*ke*It)+.5,Ri=Qr*Zr-Pi*Mr,Ki=(fr*Qr-kn*Pi)/Ri,Xi=(kn*Zr-fr*Mr)/Ri;tt-=Ki,st-=Xi}while((c(Ki)>M||c(Xi)>M)&&--Ct>0);return[tt,st]};var B=function(){return u.geoProjection(w).scale(158.837)};t.geoAiry=wt,t.geoAiryRaw=Ft,t.geoAitoff=St,t.geoAitoffRaw=Mt,t.geoArmadillo=nt,t.geoArmadilloRaw=At,t.geoAugust=z,t.geoAugustRaw=Pt,t.geoBaker=at,t.geoBakerRaw=et,t.geoBerghaus=k,t.geoBerghausRaw=xt,t.geoBoggs=ee,t.geoBoggsRaw=$t,t.geoBonne=Be,t.geoBonneRaw=le,t.geoBottomley=We,t.geoBottomleyRaw=Ce,t.geoBromley=wn,t.geoBromleyRaw=Ye,t.geoChamberlin=gr,t.geoChamberlinRaw=en,t.geoChamberlinAfrica=Bn,t.geoCollignon=Ae,t.geoCollignonRaw=hi,t.geoCraig=Qt,t.geoCraigRaw=Me,t.geoCraster=re,t.geoCrasterRaw=Wt,t.geoCylindricalEqualArea=ue,t.geoCylindricalEqualAreaRaw=Te,t.geoCylindricalStereographic=Xe,t.geoCylindricalStereographicRaw=be,t.geoEckert1=tr,t.geoEckert1Raw=Rn,t.geoEckert2=vn,t.geoEckert2Raw=Mn,t.geoEckert3=or,t.geoEckert3Raw=Ar,t.geoEckert4=Pr,t.geoEckert4Raw=cn,t.geoEckert5=De,t.geoEckert5Raw=Sr,t.geoEckert6=Ve,t.geoEckert6Raw=$e,t.geoEisenlohr=Nn,t.geoEisenlohrRaw=xn,t.geoFahey=$n,t.geoFaheyRaw=Dn,t.geoFoucaut=_n,t.geoFoucautRaw=Wn,t.geoGilbert=Fr,t.geoGingery=to,t.geoGingeryRaw=xi,t.geoGinzburg4=ro,t.geoGinzburg4Raw=Ro,t.geoGinzburg5=Jo,t.geoGinzburg5Raw=vs,t.geoGinzburg6=xs,t.geoGinzburg6Raw=Do,t.geoGinzburg8=$o,t.geoGinzburg8Raw=Ra,t.geoGinzburg9=Js,t.geoGinzburg9Raw=jo,t.geoGringorten=se,t.geoGringortenRaw=so,t.geoGuyou=bi,t.geoGuyouRaw=rr,t.geoHammer=sa,t.geoHammerRaw=wi,t.geoHammerRetroazimuthal=_o,t.geoHammerRetroazimuthalRaw=$a,t.geoHealpix=To,t.geoHealpixRaw=vo,t.geoHill=zo,t.geoHillRaw=hs,t.geoHomolosine=Ba,t.geoHomolosineRaw=ss,t.geoInterrupt=Ui,t.geoInterruptedBoggs=xo,t.geoInterruptedHomolosine=ea,t.geoInterruptedMollweide=Ds,t.geoInterruptedMollweideHemispheres=Za,t.geoInterruptedSinuMollweide=Qo,t.geoInterruptedSinusoidal=$s,t.geoKavrayskiy7=ps,t.geoKavrayskiy7Raw=Ss,t.geoLagrange=ws,t.geoLagrangeRaw=rs,t.geoLarrivee=Ru,t.geoLarriveeRaw=Tu,t.geoLaskowski=Qs,t.geoLaskowskiRaw=Mo,t.geoLittrow=Wu,t.geoLittrowRaw=Du,t.geoLoximuthal=ju,t.geoLoximuthalRaw=il,t.geoMiller=ka,t.geoMillerRaw=Co,t.geoModifiedStereographic=Ka,t.geoModifiedStereographicRaw=ba,t.geoModifiedStereographicAlaska=Is,t.geoModifiedStereographicGs48=iu,t.geoModifiedStereographicGs50=Fo,t.geoModifiedStereographicMiller=Yu,t.geoModifiedStereographicLee=Ys,t.geoMollweide=_t,t.geoMollweideRaw=$,t.geoMtFlatPolarParabolic=Ec,t.geoMtFlatPolarParabolicRaw=gl,t.geoMtFlatPolarQuartic=ao,t.geoMtFlatPolarQuarticRaw=Ml,t.geoMtFlatPolarSinusoidal=ml,t.geoMtFlatPolarSinusoidalRaw=Au,t.geoNaturalEarth=Bu,t.geoNaturalEarthRaw=qs,t.geoNaturalEarth2=pu,t.geoNaturalEarth2Raw=vu,t.geoNellHammer=ds,t.geoNellHammerRaw=Zs,t.geoPatterson=Ls,t.geoPattersonRaw=Ku,t.geoPolyconic=ic,t.geoPolyconicRaw=yl,t.geoPolyhedral=Nl,t.geoPolyhedralButterfly=Ns,t.geoPolyhedralCollignon=Ju,t.geoPolyhedralWaterman=Sc,t.geoProject=us,t.geoGringortenQuincuncial=Ou,t.geoPeirceQuincuncial=Ks,t.geoPierceQuincuncial=Ks,t.geoQuantize=we,t.geoQuincuncial=Cu,t.geoRectangularPolyconic=hn,t.geoRectangularPolyconicRaw=Pe,t.geoRobinson=hr,t.geoRobinsonRaw=On,t.geoSatellite=ni,t.geoSatelliteRaw=Xr,t.geoSinuMollweide=Rs,t.geoSinuMollweideRaw=Wa,t.geoSinusoidal=ae,t.geoSinusoidalRaw=Ht,t.geoStitch=Un,t.geoTimes=Gn,t.geoTimesRaw=Vn,t.geoTwoPointAzimuthal=mi,t.geoTwoPointAzimuthalRaw=br,t.geoTwoPointAzimuthalUsa=Kr,t.geoTwoPointEquidistant=fi,t.geoTwoPointEquidistantRaw=jr,t.geoTwoPointEquidistantUsa=oi,t.geoVanDerGrinten=Di,t.geoVanDerGrintenRaw=Hi,t.geoVanDerGrinten2=xa,t.geoVanDerGrinten2Raw=Ma,t.geoVanDerGrinten3=ei,t.geoVanDerGrinten3Raw=Pa,t.geoVanDerGrinten4=Ga,t.geoVanDerGrinten4Raw=Ea,t.geoWagner4=Eo,t.geoWagner4Raw=Ia,t.geoWagner6=Fs,t.geoWagner6Raw=Hs,t.geoWagner7=xu,t.geoWagner7Raw=Ol,t.geoWiechel=I,t.geoWiechelRaw=j,t.geoWinkel3=B,t.geoWinkel3Raw=w,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@1.12.1@d3-geo/dist/d3-geo.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,u){"use strict";function s(){return new c}function c(){this.reset()}c.prototype={constructor:c,reset:function(){this.s=this.t=0},add:function(zt){h(r,zt,this.t),h(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new c;function h(Dt,zt,oe){var ne=Dt.s=zt+oe,he=ne-zt,Fe=ne-he;Dt.t=zt-Fe+(oe-he)}var n=1e-6,i=1e-12,a=Math.PI,o=a/2,l=a/4,f=a*2,v=180/a,b=a/180,g=Math.abs,m=Math.atan,_=Math.atan2,M=Math.cos,x=Math.ceil,y=Math.exp,S=Math.log,P=Math.pow,A=Math.sin,O=Math.sign||function(Dt){return Dt>0?1:Dt<0?-1:0},L=Math.sqrt,H=Math.tan;function F(Dt){return Dt>1?0:Dt<-1?a:Math.acos(Dt)}function K(Dt){return Dt>1?o:Dt<-1?-o:Math.asin(Dt)}function G(Dt){return(Dt=A(Dt/2))*Dt}function U(){}function Z(Dt,zt){Dt&&rt.hasOwnProperty(Dt.type)&&rt[Dt.type](Dt,zt)}var J={Feature:function(zt,oe){Z(zt.geometry,oe)},FeatureCollection:function(zt,oe){for(var ne=zt.features,he=-1,Fe=ne.length;++he<Fe;)Z(ne[he].geometry,oe)}},rt={Sphere:function(zt,oe){oe.sphere()},Point:function(zt,oe){zt=zt.coordinates,oe.point(zt[0],zt[1],zt[2])},MultiPoint:function(zt,oe){for(var ne=zt.coordinates,he=-1,Fe=ne.length;++he<Fe;)zt=ne[he],oe.point(zt[0],zt[1],zt[2])},LineString:function(zt,oe){vt(zt.coordinates,oe,0)},MultiLineString:function(zt,oe){for(var ne=zt.coordinates,he=-1,Fe=ne.length;++he<Fe;)vt(ne[he],oe,0)},Polygon:function(zt,oe){mt(zt.coordinates,oe)},MultiPolygon:function(zt,oe){for(var ne=zt.coordinates,he=-1,Fe=ne.length;++he<Fe;)mt(ne[he],oe)},GeometryCollection:function(zt,oe){for(var ne=zt.geometries,he=-1,Fe=ne.length;++he<Fe;)Z(ne[he],oe)}};function vt(Dt,zt,oe){var ne=-1,he=Dt.length-oe,Fe;for(zt.lineStart();++ne<he;)Fe=Dt[ne],zt.point(Fe[0],Fe[1],Fe[2]);zt.lineEnd()}function mt(Dt,zt){var oe=-1,ne=Dt.length;for(zt.polygonStart();++oe<ne;)vt(Dt[oe],zt,1);zt.polygonEnd()}function ut(Dt,zt){Dt&&J.hasOwnProperty(Dt.type)?J[Dt.type](Dt,zt):Z(Dt,zt)}var Rt=s(),Ft=s(),wt,Mt,St,At,nt,Pt={point:U,lineStart:U,lineEnd:U,polygonStart:function(){Rt.reset(),Pt.lineStart=z,Pt.lineEnd=q},polygonEnd:function(){var zt=+Rt;Ft.add(zt<0?f+zt:zt),this.lineStart=this.lineEnd=this.point=U},sphere:function(){Ft.add(f)}};function z(){Pt.point=gt}function q(){et(wt,Mt)}function gt(Dt,zt){Pt.point=et,wt=Dt,Mt=zt,Dt*=b,zt*=b,St=Dt,At=M(zt=zt/2+l),nt=A(zt)}function et(Dt,zt){Dt*=b,zt*=b,zt=zt/2+l;var oe=Dt-St,ne=oe>=0?1:-1,he=ne*oe,Fe=M(zt),Ze=A(zt),nn=nt*Ze,Je=At*Fe+nn*M(he),pn=nn*ne*A(he);Rt.add(_(pn,Je)),St=Dt,At=Fe,nt=Ze}function at(Dt){return Ft.reset(),ut(Dt,Pt),Ft*2}function xt(Dt){return[_(Dt[1],Dt[0]),K(Dt[2])]}function k(Dt){var zt=Dt[0],oe=Dt[1],ne=M(oe);return[ne*M(zt),ne*A(zt),A(oe)]}function ot(Dt,zt){return Dt[0]*zt[0]+Dt[1]*zt[1]+Dt[2]*zt[2]}function it(Dt,zt){return[Dt[1]*zt[2]-Dt[2]*zt[1],Dt[2]*zt[0]-Dt[0]*zt[2],Dt[0]*zt[1]-Dt[1]*zt[0]]}function $(Dt,zt){Dt[0]+=zt[0],Dt[1]+=zt[1],Dt[2]+=zt[2]}function _t(Dt,zt){return[Dt[0]*zt,Dt[1]*zt,Dt[2]*zt]}function yt(Dt){var zt=L(Dt[0]*Dt[0]+Dt[1]*Dt[1]+Dt[2]*Dt[2]);Dt[0]/=zt,Dt[1]/=zt,Dt[2]/=zt}var Nt,$t,ee,Gt,Ht,ae,le,Be,Ce=s(),We,Ye,wn={point:er,lineStart:on,lineEnd:en,polygonStart:function(){wn.point=An,wn.lineStart=Bn,wn.lineEnd=gr,Ce.reset(),Pt.polygonStart()},polygonEnd:function(){Pt.polygonEnd(),wn.point=er,wn.lineStart=on,wn.lineEnd=en,Rt<0?(Nt=-(ee=180),$t=-(Gt=90)):Ce>n?Gt=90:Ce<-n&&($t=-90),Ye[0]=Nt,Ye[1]=ee},sphere:function(){Nt=-(ee=180),$t=-(Gt=90)}};function er(Dt,zt){We.push(Ye=[Nt=Dt,ee=Dt]),zt<$t&&($t=zt),zt>Gt&&(Gt=zt)}function Lr(Dt,zt){var oe=k([Dt*b,zt*b]);if(Be){var ne=it(Be,oe),he=[ne[1],-ne[0],0],Fe=it(he,ne);yt(Fe),Fe=xt(Fe);var Ze=Dt-Ht,nn=Ze>0?1:-1,Je=Fe[0]*v*nn,pn,fn=g(Ze)>180;fn^(nn*Ht<Je&&Je<nn*Dt)?(pn=Fe[1]*v,pn>Gt&&(Gt=pn)):(Je=(Je+360)%360-180,fn^(nn*Ht<Je&&Je<nn*Dt)?(pn=-Fe[1]*v,pn<$t&&($t=pn)):(zt<$t&&($t=zt),zt>Gt&&(Gt=zt))),fn?Dt<Ht?hi(Nt,Dt)>hi(Nt,ee)&&(ee=Dt):hi(Dt,ee)>hi(Nt,ee)&&(Nt=Dt):ee>=Nt?(Dt<Nt&&(Nt=Dt),Dt>ee&&(ee=Dt)):Dt>Ht?hi(Nt,Dt)>hi(Nt,ee)&&(ee=Dt):hi(Dt,ee)>hi(Nt,ee)&&(Nt=Dt)}else We.push(Ye=[Nt=Dt,ee=Dt]);zt<$t&&($t=zt),zt>Gt&&(Gt=zt),Be=oe,Ht=Dt}function on(){wn.point=Lr}function en(){Ye[0]=Nt,Ye[1]=ee,wn.point=er,Be=null}function An(Dt,zt){if(Be){var oe=Dt-Ht;Ce.add(g(oe)>180?oe+(oe>0?360:-360):oe)}else ae=Dt,le=zt;Pt.point(Dt,zt),Lr(Dt,zt)}function Bn(){Pt.lineStart()}function gr(){An(ae,le),Pt.lineEnd(),g(Ce)>n&&(Nt=-(ee=180)),Ye[0]=Nt,Ye[1]=ee,Be=null}function hi(Dt,zt){return(zt-=Dt)<0?zt+360:zt}function Ae(Dt,zt){return Dt[0]-zt[0]}function Me(Dt,zt){return Dt[0]<=Dt[1]?Dt[0]<=zt&&zt<=Dt[1]:zt<Dt[0]||Dt[1]<zt}function Qt(Dt){var zt,oe,ne,he,Fe,Ze,nn;if(Gt=ee=-(Nt=$t=Infinity),We=[],ut(Dt,wn),oe=We.length){for(We.sort(Ae),zt=1,ne=We[0],Fe=[ne];zt<oe;++zt)he=We[zt],Me(ne,he[0])||Me(ne,he[1])?(hi(ne[0],he[1])>hi(ne[0],ne[1])&&(ne[1]=he[1]),hi(he[0],ne[1])>hi(ne[0],ne[1])&&(ne[0]=he[0])):Fe.push(ne=he);for(Ze=-Infinity,oe=Fe.length-1,zt=0,ne=Fe[oe];zt<=oe;ne=he,++zt)he=Fe[zt],(nn=hi(ne[1],he[0]))>Ze&&(Ze=nn,Nt=he[0],ee=ne[1])}return We=Ye=null,Nt===Infinity||$t===Infinity?[[NaN,NaN],[NaN,NaN]]:[[Nt,$t],[ee,Gt]]}var ge,Wt,re,Te,ue,be,Xe,Rn,tr,Mn,vn,Ar,or,cn,Pr,Sr,De={sphere:U,point:$e,lineStart:En,lineEnd:mn,polygonStart:function(){De.lineStart=Dn,De.lineEnd=$n},polygonEnd:function(){De.lineStart=En,De.lineEnd=mn}};function $e(Dt,zt){Dt*=b,zt*=b;var oe=M(zt);Ve(oe*M(Dt),oe*A(Dt),A(zt))}function Ve(Dt,zt,oe){++ge,re+=(Dt-re)/ge,Te+=(zt-Te)/ge,ue+=(oe-ue)/ge}function En(){De.point=xn}function xn(Dt,zt){Dt*=b,zt*=b;var oe=M(zt);cn=oe*M(Dt),Pr=oe*A(Dt),Sr=A(zt),De.point=Nn,Ve(cn,Pr,Sr)}function Nn(Dt,zt){Dt*=b,zt*=b;var oe=M(zt),ne=oe*M(Dt),he=oe*A(Dt),Fe=A(zt),Ze=_(L((Ze=Pr*Fe-Sr*he)*Ze+(Ze=Sr*ne-cn*Fe)*Ze+(Ze=cn*he-Pr*ne)*Ze),cn*ne+Pr*he+Sr*Fe);Wt+=Ze,be+=Ze*(cn+(cn=ne)),Xe+=Ze*(Pr+(Pr=he)),Rn+=Ze*(Sr+(Sr=Fe)),Ve(cn,Pr,Sr)}function mn(){De.point=$e}function Dn(){De.point=Wn}function $n(){_n(Ar,or),De.point=$e}function Wn(Dt,zt){Ar=Dt,or=zt,Dt*=b,zt*=b,De.point=_n;var oe=M(zt);cn=oe*M(Dt),Pr=oe*A(Dt),Sr=A(zt),Ve(cn,Pr,Sr)}function _n(Dt,zt){Dt*=b,zt*=b;var oe=M(zt),ne=oe*M(Dt),he=oe*A(Dt),Fe=A(zt),Ze=Pr*Fe-Sr*he,nn=Sr*ne-cn*Fe,Je=cn*he-Pr*ne,pn=L(Ze*Ze+nn*nn+Je*Je),fn=K(pn),Hn=pn&&-fn/pn;tr+=Hn*Ze,Mn+=Hn*nn,vn+=Hn*Je,Wt+=fn,be+=fn*(cn+(cn=ne)),Xe+=fn*(Pr+(Pr=he)),Rn+=fn*(Sr+(Sr=Fe)),Ve(cn,Pr,Sr)}function xr(Dt){ge=Wt=re=Te=ue=be=Xe=Rn=tr=Mn=vn=0,ut(Dt,De);var zt=tr,oe=Mn,ne=vn,he=zt*zt+oe*oe+ne*ne;return he<i&&(zt=be,oe=Xe,ne=Rn,Wt<n&&(zt=re,oe=Te,ne=ue),he=zt*zt+oe*oe+ne*ne,he<i)?[NaN,NaN]:[_(oe,zt)*v,K(ne/L(he))*v]}function mr(Dt){return function(){return Dt}}function Fr(Dt,zt){function oe(ne,he){return ne=Dt(ne,he),zt(ne[0],ne[1])}return Dt.invert&&zt.invert&&(oe.invert=function(ne,he){return ne=zt.invert(ne,he),ne&&Dt.invert(ne[0],ne[1])}),oe}function xi(Dt,zt){return[g(Dt)>a?Dt+Math.round(-Dt/f)*f:Dt,zt]}xi.invert=xi;function Ta(Dt,zt,oe){return(Dt%=f)?zt||oe?Fr(to(Dt),Vo(zt,oe)):to(Dt):zt||oe?Vo(zt,oe):xi}function Aa(Dt){return function(zt,oe){return zt+=Dt,[zt>a?zt-f:zt<-a?zt+f:zt,oe]}}function to(Dt){var zt=Aa(Dt);return zt.invert=Aa(-Dt),zt}function Vo(Dt,zt){var oe=M(Dt),ne=A(Dt),he=M(zt),Fe=A(zt);function Ze(nn,Je){var pn=M(Je),fn=M(nn)*pn,Hn=A(nn)*pn,Un=A(Je),Vn=Un*oe+fn*ne;return[_(Hn*he-Vn*Fe,fn*oe-Un*ne),K(Vn*he+Hn*Fe)]}return Ze.invert=function(nn,Je){var pn=M(Je),fn=M(nn)*pn,Hn=A(nn)*pn,Un=A(Je),Vn=Un*he-Hn*Fe;return[_(Hn*he+Un*Fe,fn*oe+Vn*ne),K(Vn*oe-fn*ne)]},Ze}function Ro(Dt){Dt=Ta(Dt[0]*b,Dt[1]*b,Dt.length>2?Dt[2]*b:0);function zt(oe){return oe=Dt(oe[0]*b,oe[1]*b),oe[0]*=v,oe[1]*=v,oe}return zt.invert=function(oe){return oe=Dt.invert(oe[0]*b,oe[1]*b),oe[0]*=v,oe[1]*=v,oe},zt}function ro(Dt,zt,oe,ne,he,Fe){if(!!oe){var Ze=M(zt),nn=A(zt),Je=ne*oe;he==null?(he=zt+ne*f,Fe=zt-Je/2):(he=vs(Ze,he),Fe=vs(Ze,Fe),(ne>0?he<Fe:he>Fe)&&(he+=ne*f));for(var pn,fn=he;ne>0?fn>Fe:fn<Fe;fn-=Je)pn=xt([Ze,-nn*M(fn),-nn*A(fn)]),Dt.point(pn[0],pn[1])}}function vs(Dt,zt){zt=k(zt),zt[0]-=Dt,yt(zt);var oe=F(-zt[1]);return((-zt[2]<0?-oe:oe)+f-n)%f}function Jo(){var Dt=mr([0,0]),zt=mr(90),oe=mr(6),ne,he,Fe={point:Ze};function Ze(Je,pn){ne.push(Je=he(Je,pn)),Je[0]*=v,Je[1]*=v}function nn(){var Je=Dt.apply(this,arguments),pn=zt.apply(this,arguments)*b,fn=oe.apply(this,arguments)*b;return ne=[],he=Ta(-Je[0]*b,-Je[1]*b,0).invert,ro(Fe,pn,fn,1),Je={type:"Polygon",coordinates:[ne]},ne=he=null,Je}return nn.center=function(Je){return arguments.length?(Dt=typeof Je=="function"?Je:mr([+Je[0],+Je[1]]),nn):Dt},nn.radius=function(Je){return arguments.length?(zt=typeof Je=="function"?Je:mr(+Je),nn):zt},nn.precision=function(Je){return arguments.length?(oe=typeof Je=="function"?Je:mr(+Je),nn):oe},nn}function Do(){var Dt=[],zt;return{point:function(ne,he,Fe){zt.push([ne,he,Fe])},lineStart:function(){Dt.push(zt=[])},lineEnd:U,rejoin:function(){Dt.length>1&&Dt.push(Dt.pop().concat(Dt.shift()))},result:function(){var ne=Dt;return Dt=[],zt=null,ne}}}function xs(Dt,zt){return g(Dt[0]-zt[0])<n&&g(Dt[1]-zt[1])<n}function Ra(Dt,zt,oe,ne){this.x=Dt,this.z=zt,this.o=oe,this.e=ne,this.v=!1,this.n=this.p=null}function $o(Dt,zt,oe,ne,he){var Fe=[],Ze=[],nn,Je;if(Dt.forEach(function(Gn){if(!((dr=Gn.length-1)<=0)){var dr,br=Gn[0],Kr=Gn[dr],mi;if(xs(br,Kr)){if(!br[2]&&!Kr[2]){for(he.lineStart(),nn=0;nn<dr;++nn)he.point((br=Gn[nn])[0],br[1]);he.lineEnd();return}Kr[0]+=2*n}Fe.push(mi=new Ra(br,Gn,null,!0)),Ze.push(mi.o=new Ra(br,null,mi,!1)),Fe.push(mi=new Ra(Kr,Gn,null,!1)),Ze.push(mi.o=new Ra(Kr,null,mi,!0))}}),!!Fe.length){for(Ze.sort(zt),jo(Fe),jo(Ze),nn=0,Je=Ze.length;nn<Je;++nn)Ze[nn].e=oe=!oe;for(var pn=Fe[0],fn,Hn;;){for(var Un=pn,Vn=!0;Un.v;)if((Un=Un.n)===pn)return;fn=Un.z,he.lineStart();do{if(Un.v=Un.o.v=!0,Un.e){if(Vn)for(nn=0,Je=fn.length;nn<Je;++nn)he.point((Hn=fn[nn])[0],Hn[1]);else ne(Un.x,Un.n.x,1,he);Un=Un.n}else{if(Vn)for(fn=Un.p.z,nn=fn.length-1;nn>=0;--nn)he.point((Hn=fn[nn])[0],Hn[1]);else ne(Un.x,Un.p.x,-1,he);Un=Un.p}Un=Un.o,fn=Un.z,Vn=!Vn}while(!Un.v);he.lineEnd()}}}function jo(Dt){if(!!(zt=Dt.length)){for(var zt,oe=0,ne=Dt[0],he;++oe<zt;)ne.n=he=Dt[oe],he.p=ne,ne=he;ne.n=he=Dt[0],he.p=ne}}var Js=s();function io(Dt){return g(Dt[0])<=a?Dt[0]:O(Dt[0])*((g(Dt[0])+a)%f-a)}function so(Dt,zt){var oe=io(zt),ne=zt[1],he=A(ne),Fe=[A(oe),-M(oe),0],Ze=0,nn=0;Js.reset(),he===1?ne=o+n:he===-1&&(ne=-o-n);for(var Je=0,pn=Dt.length;Je<pn;++Je)if(!!(Hn=(fn=Dt[Je]).length))for(var fn,Hn,Un=fn[Hn-1],Vn=io(Un),Gn=Un[1]/2+l,dr=A(Gn),br=M(Gn),Kr=0;Kr<Hn;++Kr,Vn=jr,dr=fi,br=Hi,Un=mi){var mi=fn[Kr],jr=io(mi),oi=mi[1]/2+l,fi=A(oi),Hi=M(oi),Di=jr-Vn,Ma=Di>=0?1:-1,xa=Ma*Di,Pa=xa>a,ei=dr*fi;if(Js.add(_(ei*Ma*A(xa),br*Hi+ei*M(xa))),Ze+=Pa?Di+Ma*f:Di,Pa^Vn>=oe^jr>=oe){var Ea=it(k(Un),k(mi));yt(Ea);var Ga=it(Fe,Ea);yt(Ga);var Ha=(Pa^Di>=0?-1:1)*K(Ga[2]);(ne>Ha||ne===Ha&&(Ea[0]||Ea[1]))&&(nn+=Pa^Di>=0?1:-1)}}return(Ze<-n||Ze<n&&Js<-n)^nn&1}function Gs(Dt,zt,oe,ne){return function(he){var Fe=zt(he),Ze=Do(),nn=zt(Ze),Je=!1,pn,fn,Hn,Un={point:Vn,lineStart:dr,lineEnd:br,polygonStart:function(){Un.point=Kr,Un.lineStart=mi,Un.lineEnd=jr,fn=[],pn=[]},polygonEnd:function(){Un.point=Vn,Un.lineStart=dr,Un.lineEnd=br,fn=u.merge(fn);var fi=so(pn,ne);fn.length?(Je||(he.polygonStart(),Je=!0),$o(fn,se,fi,oe,he)):fi&&(Je||(he.polygonStart(),Je=!0),he.lineStart(),oe(null,null,1,he),he.lineEnd()),Je&&(he.polygonEnd(),Je=!1),fn=pn=null},sphere:function(){he.polygonStart(),he.lineStart(),oe(null,null,1,he),he.lineEnd(),he.polygonEnd()}};function Vn(oi,fi){Dt(oi,fi)&&he.point(oi,fi)}function Gn(oi,fi){Fe.point(oi,fi)}function dr(){Un.point=Gn,Fe.lineStart()}function br(){Un.point=Vn,Fe.lineEnd()}function Kr(oi,fi){Hn.push([oi,fi]),nn.point(oi,fi)}function mi(){nn.lineStart(),Hn=[]}function jr(){Kr(Hn[0][0],Hn[0][1]),nn.lineEnd();var oi=nn.clean(),fi=Ze.result(),Hi,Di=fi.length,Ma,xa,Pa;if(Hn.pop(),pn.push(Hn),Hn=null,!!Di){if(oi&1){if(xa=fi[0],(Ma=xa.length-1)>0){for(Je||(he.polygonStart(),Je=!0),he.lineStart(),Hi=0;Hi<Ma;++Hi)he.point((Pa=xa[Hi])[0],Pa[1]);he.lineEnd()}return}Di>1&&oi&2&&fi.push(fi.pop().concat(fi.shift())),fn.push(fi.filter(Ne))}}return Un}}function Ne(Dt){return Dt.length>1}function se(Dt,zt){return((Dt=Dt.x)[0]<0?Dt[1]-o-n:o-Dt[1])-((zt=zt.x)[0]<0?zt[1]-o-n:o-zt[1])}var Yt=Gs(function(){return!0},Ee,Fn,[-a,-o]);function Ee(Dt){var zt=NaN,oe=NaN,ne=NaN,he;return{lineStart:function(){Dt.lineStart(),he=1},point:function(Ze,nn){var Je=Ze>0?a:-a,pn=g(Ze-zt);g(pn-a)<n?(Dt.point(zt,oe=(oe+nn)/2>0?o:-o),Dt.point(ne,oe),Dt.lineEnd(),Dt.lineStart(),Dt.point(Je,oe),Dt.point(Ze,oe),he=0):ne!==Je&&pn>=a&&(g(zt-ne)<n&&(zt-=ne*n),g(Ze-Je)<n&&(Ze-=Je*n),oe=sn(zt,oe,Ze,nn),Dt.point(ne,oe),Dt.lineEnd(),Dt.lineStart(),Dt.point(Je,oe),he=0),Dt.point(zt=Ze,oe=nn),ne=Je},lineEnd:function(){Dt.lineEnd(),zt=oe=NaN},clean:function(){return 2-he}}}function sn(Dt,zt,oe,ne){var he,Fe,Ze=A(Dt-oe);return g(Ze)>n?m((A(zt)*(Fe=M(ne))*A(oe)-A(ne)*(he=M(zt))*A(Dt))/(he*Fe*Ze)):(zt+ne)/2}function Fn(Dt,zt,oe,ne){var he;if(Dt==null)he=oe*o,ne.point(-a,he),ne.point(0,he),ne.point(a,he),ne.point(a,0),ne.point(a,-he),ne.point(0,-he),ne.point(-a,-he),ne.point(-a,0),ne.point(-a,he);else if(g(Dt[0]-zt[0])>n){var Fe=Dt[0]<zt[0]?a:-a;he=oe*Fe/2,ne.point(-Fe,he),ne.point(0,he),ne.point(Fe,he)}else ne.point(zt[0],zt[1])}function rr(Dt){var zt=M(Dt),oe=6*b,ne=zt>0,he=g(zt)>n;function Fe(fn,Hn,Un,Vn){ro(Vn,Dt,oe,Un,fn,Hn)}function Ze(fn,Hn){return M(fn)*M(Hn)>zt}function nn(fn){var Hn,Un,Vn,Gn,dr;return{lineStart:function(){Gn=Vn=!1,dr=1},point:function(Kr,mi){var jr=[Kr,mi],oi,fi=Ze(Kr,mi),Hi=ne?fi?0:pn(Kr,mi):fi?pn(Kr+(Kr<0?a:-a),mi):0;if(!Hn&&(Gn=Vn=fi)&&fn.lineStart(),fi!==Vn&&(oi=Je(Hn,jr),(!oi||xs(Hn,oi)||xs(jr,oi))&&(jr[2]=1)),fi!==Vn)dr=0,fi?(fn.lineStart(),oi=Je(jr,Hn),fn.point(oi[0],oi[1])):(oi=Je(Hn,jr),fn.point(oi[0],oi[1],2),fn.lineEnd()),Hn=oi;else if(he&&Hn&&ne^fi){var Di;!(Hi&Un)&&(Di=Je(jr,Hn,!0))&&(dr=0,ne?(fn.lineStart(),fn.point(Di[0][0],Di[0][1]),fn.point(Di[1][0],Di[1][1]),fn.lineEnd()):(fn.point(Di[1][0],Di[1][1]),fn.lineEnd(),fn.lineStart(),fn.point(Di[0][0],Di[0][1],3)))}fi&&(!Hn||!xs(Hn,jr))&&fn.point(jr[0],jr[1]),Hn=jr,Vn=fi,Un=Hi},lineEnd:function(){Vn&&fn.lineEnd(),Hn=null},clean:function(){return dr|(Gn&&Vn)<<1}}}function Je(fn,Hn,Un){var Vn=k(fn),Gn=k(Hn),dr=[1,0,0],br=it(Vn,Gn),Kr=ot(br,br),mi=br[0],jr=Kr-mi*mi;if(!jr)return!Un&&fn;var oi=zt*Kr/jr,fi=-zt*mi/jr,Hi=it(dr,br),Di=_t(dr,oi),Ma=_t(br,fi);$(Di,Ma);var xa=Hi,Pa=ot(Di,xa),ei=ot(xa,xa),Ea=Pa*Pa-ei*(ot(Di,Di)-1);if(!(Ea<0)){var Ga=L(Ea),Ha=_t(xa,(-Pa-Ga)/ei);if($(Ha,Di),Ha=xt(Ha),!Un)return Ha;var Li=fn[0],Ia=Hn[0],Eo=fn[1],Hs=Hn[1],Fs;Ia<Li&&(Fs=Li,Li=Ia,Ia=Fs);var Ol=Ia-Li,xu=g(Ol-a)<n,j=xu||Ol<n;if(!xu&&Hs<Eo&&(Fs=Eo,Eo=Hs,Hs=Fs),j?xu?Eo+Hs>0^Ha[1]<(g(Ha[0]-Li)<n?Eo:Hs):Eo<=Ha[1]&&Ha[1]<=Hs:Ol>a^(Li<=Ha[0]&&Ha[0]<=Ia)){var I=_t(xa,(-Pa+Ga)/ei);return $(I,Di),[Ha,xt(I)]}}}function pn(fn,Hn){var Un=ne?Dt:a-Dt,Vn=0;return fn<-Un?Vn|=1:fn>Un&&(Vn|=2),Hn<-Un?Vn|=4:Hn>Un&&(Vn|=8),Vn}return Gs(Ze,nn,Fe,ne?[0,-Dt]:[-a,Dt-a])}function qn(Dt,zt,oe,ne,he,Fe){var Ze=Dt[0],nn=Dt[1],Je=zt[0],pn=zt[1],fn=0,Hn=1,Un=Je-Ze,Vn=pn-nn,Gn;if(Gn=oe-Ze,!(!Un&&Gn>0)){if(Gn/=Un,Un<0){if(Gn<fn)return;Gn<Hn&&(Hn=Gn)}else if(Un>0){if(Gn>Hn)return;Gn>fn&&(fn=Gn)}if(Gn=he-Ze,!(!Un&&Gn<0)){if(Gn/=Un,Un<0){if(Gn>Hn)return;Gn>fn&&(fn=Gn)}else if(Un>0){if(Gn<fn)return;Gn<Hn&&(Hn=Gn)}if(Gn=ne-nn,!(!Vn&&Gn>0)){if(Gn/=Vn,Vn<0){if(Gn<fn)return;Gn<Hn&&(Hn=Gn)}else if(Vn>0){if(Gn>Hn)return;Gn>fn&&(fn=Gn)}if(Gn=Fe-nn,!(!Vn&&Gn<0)){if(Gn/=Vn,Vn<0){if(Gn>Hn)return;Gn>fn&&(fn=Gn)}else if(Vn>0){if(Gn<fn)return;Gn<Hn&&(Hn=Gn)}return fn>0&&(Dt[0]=Ze+fn*Un,Dt[1]=nn+fn*Vn),Hn<1&&(zt[0]=Ze+Hn*Un,zt[1]=nn+Hn*Vn),!0}}}}}var $r=1e9,bi=-$r;function wi(Dt,zt,oe,ne){function he(pn,fn){return Dt<=pn&&pn<=oe&&zt<=fn&&fn<=ne}function Fe(pn,fn,Hn,Un){var Vn=0,Gn=0;if(pn==null||(Vn=Ze(pn,Hn))!==(Gn=Ze(fn,Hn))||Je(pn,fn)<0^Hn>0)do Un.point(Vn===0||Vn===3?Dt:oe,Vn>1?ne:zt);while((Vn=(Vn+Hn+4)%4)!==Gn);else Un.point(fn[0],fn[1])}function Ze(pn,fn){return g(pn[0]-Dt)<n?fn>0?0:3:g(pn[0]-oe)<n?fn>0?2:1:g(pn[1]-zt)<n?fn>0?1:0:fn>0?3:2}function nn(pn,fn){return Je(pn.x,fn.x)}function Je(pn,fn){var Hn=Ze(pn,1),Un=Ze(fn,1);return Hn!==Un?Hn-Un:Hn===0?fn[1]-pn[1]:Hn===1?pn[0]-fn[0]:Hn===2?pn[1]-fn[1]:fn[0]-pn[0]}return function(pn){var fn=pn,Hn=Do(),Un,Vn,Gn,dr,br,Kr,mi,jr,oi,fi,Hi,Di={point:Ma,lineStart:Ea,lineEnd:Ga,polygonStart:Pa,polygonEnd:ei};function Ma(Li,Ia){he(Li,Ia)&&fn.point(Li,Ia)}function xa(){for(var Li=0,Ia=0,Eo=Vn.length;Ia<Eo;++Ia)for(var Hs=Vn[Ia],Fs=1,Ol=Hs.length,xu=Hs[0],j,I,w=xu[0],B=xu[1];Fs<Ol;++Fs)j=w,I=B,xu=Hs[Fs],w=xu[0],B=xu[1],I<=ne?B>ne&&(w-j)*(ne-I)>(B-I)*(Dt-j)&&++Li:B<=ne&&(w-j)*(ne-I)<(B-I)*(Dt-j)&&--Li;return Li}function Pa(){fn=Hn,Un=[],Vn=[],Hi=!0}function ei(){var Li=xa(),Ia=Hi&&Li,Eo=(Un=u.merge(Un)).length;(Ia||Eo)&&(pn.polygonStart(),Ia&&(pn.lineStart(),Fe(null,null,1,pn),pn.lineEnd()),Eo&&$o(Un,nn,Li,Fe,pn),pn.polygonEnd()),fn=pn,Un=Vn=Gn=null}function Ea(){Di.point=Ha,Vn&&Vn.push(Gn=[]),fi=!0,oi=!1,mi=jr=NaN}function Ga(){Un&&(Ha(dr,br),Kr&&oi&&Hn.rejoin(),Un.push(Hn.result())),Di.point=Ma,oi&&fn.lineEnd()}function Ha(Li,Ia){var Eo=he(Li,Ia);if(Vn&&Gn.push([Li,Ia]),fi)dr=Li,br=Ia,Kr=Eo,fi=!1,Eo&&(fn.lineStart(),fn.point(Li,Ia));else if(Eo&&oi)fn.point(Li,Ia);else{var Hs=[mi=Math.max(bi,Math.min($r,mi)),jr=Math.max(bi,Math.min($r,jr))],Fs=[Li=Math.max(bi,Math.min($r,Li)),Ia=Math.max(bi,Math.min($r,Ia))];qn(Hs,Fs,Dt,zt,oe,ne)?(oi||(fn.lineStart(),fn.point(Hs[0],Hs[1])),fn.point(Fs[0],Fs[1]),Eo||fn.lineEnd(),Hi=!1):Eo&&(fn.lineStart(),fn.point(Li,Ia),Hi=!1)}mi=Li,jr=Ia,oi=Eo}return Di}}function Vi(){var Dt=0,zt=0,oe=960,ne=500,he,Fe,Ze;return Ze={stream:function(Je){return he&&Fe===Je?he:he=wi(Dt,zt,oe,ne)(Fe=Je)},extent:function(Je){return arguments.length?(Dt=+Je[0][0],zt=+Je[0][1],oe=+Je[1][0],ne=+Je[1][1],he=Fe=null,Ze):[[Dt,zt],[oe,ne]]}}}var sa=s(),$a,Ca,_o,Fa={sphere:U,point:U,lineStart:uo,lineEnd:U,polygonStart:U,polygonEnd:U};function uo(){Fa.point=Ja,Fa.lineEnd=vo}function vo(){Fa.point=Fa.lineEnd=U}function Ja(Dt,zt){Dt*=b,zt*=b,$a=Dt,Ca=A(zt),_o=M(zt),Fa.point=To}function To(Dt,zt){Dt*=b,zt*=b;var oe=A(zt),ne=M(zt),he=g(Dt-$a),Fe=M(he),Ze=A(he),nn=ne*Ze,Je=_o*oe-Ca*ne*Fe,pn=Ca*oe+_o*ne*Fe;sa.add(_(L(nn*nn+Je*Je),pn)),$a=Dt,Ca=oe,_o=ne}function hs(Dt){return sa.reset(),ut(Dt,Fa),+sa}var zo=[null,null],bs={type:"LineString",coordinates:zo};function Ao(Dt,zt){return zo[0]=Dt,zo[1]=zt,hs(bs)}var Wa={Feature:function(zt,oe){return ss(zt.geometry,oe)},FeatureCollection:function(zt,oe){for(var ne=zt.features,he=-1,Fe=ne.length;++he<Fe;)if(ss(ne[he].geometry,oe))return!0;return!1}},Rs={Sphere:function(){return!0},Point:function(zt,oe){return Ba(zt.coordinates,oe)},MultiPoint:function(zt,oe){for(var ne=zt.coordinates,he=-1,Fe=ne.length;++he<Fe;)if(Ba(ne[he],oe))return!0;return!1},LineString:function(zt,oe){return gn(zt.coordinates,oe)},MultiLineString:function(zt,oe){for(var ne=zt.coordinates,he=-1,Fe=ne.length;++he<Fe;)if(gn(ne[he],oe))return!0;return!1},Polygon:function(zt,oe){return cr(zt.coordinates,oe)},MultiPolygon:function(zt,oe){for(var ne=zt.coordinates,he=-1,Fe=ne.length;++he<Fe;)if(cr(ne[he],oe))return!0;return!1},GeometryCollection:function(zt,oe){for(var ne=zt.geometries,he=-1,Fe=ne.length;++he<Fe;)if(ss(ne[he],oe))return!0;return!1}};function ss(Dt,zt){return Dt&&Rs.hasOwnProperty(Dt.type)?Rs[Dt.type](Dt,zt):!1}function Ba(Dt,zt){return Ao(Dt,zt)===0}function gn(Dt,zt){for(var oe,ne,he,Fe=0,Ze=Dt.length;Fe<Ze;Fe++){if(ne=Ao(Dt[Fe],zt),ne===0||Fe>0&&(he=Ao(Dt[Fe],Dt[Fe-1]),he>0&&oe<=he&&ne<=he&&(oe+ne-he)*(1-Math.pow((oe-ne)/he,2))<i*he))return!0;oe=ne}return!1}function cr(Dt,zt){return!!so(Dt.map(Gr),Ui(zt))}function Gr(Dt){return Dt=Dt.map(Ui),Dt.pop(),Dt}function Ui(Dt){return[Dt[0]*b,Dt[1]*b]}function Ua(Dt,zt){return(Dt&&Wa.hasOwnProperty(Dt.type)?Wa[Dt.type]:ss)(Dt,zt)}function xo(Dt,zt,oe){var ne=u.range(Dt,zt-n,oe).concat(zt);return function(he){return ne.map(function(Fe){return[he,Fe]})}}function po(Dt,zt,oe){var ne=u.range(Dt,zt-n,oe).concat(zt);return function(he){return ne.map(function(Fe){return[Fe,he]})}}function ea(){var Dt,zt,oe,ne,he,Fe,Ze,nn,Je=10,pn=Je,fn=90,Hn=360,Un,Vn,Gn,dr,br=2.5;function Kr(){return{type:"MultiLineString",coordinates:mi()}}function mi(){return u.range(x(ne/fn)*fn,oe,fn).map(Gn).concat(u.range(x(nn/Hn)*Hn,Ze,Hn).map(dr)).concat(u.range(x(zt/Je)*Je,Dt,Je).filter(function(jr){return g(jr%fn)>n}).map(Un)).concat(u.range(x(Fe/pn)*pn,he,pn).filter(function(jr){return g(jr%Hn)>n}).map(Vn))}return Kr.lines=function(){return mi().map(function(jr){return{type:"LineString",coordinates:jr}})},Kr.outline=function(){return{type:"Polygon",coordinates:[Gn(ne).concat(dr(Ze).slice(1),Gn(oe).reverse().slice(1),dr(nn).reverse().slice(1))]}},Kr.extent=function(jr){return arguments.length?Kr.extentMajor(jr).extentMinor(jr):Kr.extentMinor()},Kr.extentMajor=function(jr){return arguments.length?(ne=+jr[0][0],oe=+jr[1][0],nn=+jr[0][1],Ze=+jr[1][1],ne>oe&&(jr=ne,ne=oe,oe=jr),nn>Ze&&(jr=nn,nn=Ze,Ze=jr),Kr.precision(br)):[[ne,nn],[oe,Ze]]},Kr.extentMinor=function(jr){return arguments.length?(zt=+jr[0][0],Dt=+jr[1][0],Fe=+jr[0][1],he=+jr[1][1],zt>Dt&&(jr=zt,zt=Dt,Dt=jr),Fe>he&&(jr=Fe,Fe=he,he=jr),Kr.precision(br)):[[zt,Fe],[Dt,he]]},Kr.step=function(jr){return arguments.length?Kr.stepMajor(jr).stepMinor(jr):Kr.stepMinor()},Kr.stepMajor=function(jr){return arguments.length?(fn=+jr[0],Hn=+jr[1],Kr):[fn,Hn]},Kr.stepMinor=function(jr){return arguments.length?(Je=+jr[0],pn=+jr[1],Kr):[Je,pn]},Kr.precision=function(jr){return arguments.length?(br=+jr,Un=xo(Fe,he,90),Vn=po(zt,Dt,br),Gn=xo(nn,Ze,90),dr=po(ne,oe,br),Kr):br},Kr.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function Qa(){return ea()()}function Ds(Dt,zt){var oe=Dt[0]*b,ne=Dt[1]*b,he=zt[0]*b,Fe=zt[1]*b,Ze=M(ne),nn=A(ne),Je=M(Fe),pn=A(Fe),fn=Ze*M(oe),Hn=Ze*A(oe),Un=Je*M(he),Vn=Je*A(he),Gn=2*K(L(G(Fe-ne)+Ze*Je*G(he-oe))),dr=A(Gn),br=Gn?function(Kr){var mi=A(Kr*=Gn)/dr,jr=A(Gn-Kr)/dr,oi=jr*fn+mi*Un,fi=jr*Hn+mi*Vn,Hi=jr*nn+mi*pn;return[_(fi,oi)*v,_(Hi,L(oi*oi+fi*fi))*v]}:function(){return[oe*v,ne*v]};return br.distance=Gn,br}function Es(Dt){return Dt}var Za=s(),ru=s(),Qo,Os,$s,Ss,ps={point:U,lineStart:U,lineEnd:U,polygonStart:function(){ps.lineStart=rs,ps.lineEnd=Tu},polygonEnd:function(){ps.lineStart=ps.lineEnd=ps.point=U,Za.add(g(ru)),ru.reset()},result:function(){var zt=Za/2;return Za.reset(),zt}};function rs(){ps.point=ws}function ws(Dt,zt){ps.point=_s,Qo=$s=Dt,Os=Ss=zt}function _s(Dt,zt){ru.add(Ss*Dt-$s*zt),$s=Dt,Ss=zt}function Tu(){_s(Qo,Os)}var Ru=Infinity,Mo=Ru,Qs=-Ru,Du=Qs,Wu={point:il,lineStart:U,lineEnd:U,polygonStart:U,polygonEnd:U,result:function(){var zt=[[Ru,Mo],[Qs,Du]];return Qs=Du=-(Mo=Ru=Infinity),zt}};function il(Dt,zt){Dt<Ru&&(Ru=Dt),Dt>Qs&&(Qs=Dt),zt<Mo&&(Mo=zt),zt>Du&&(Du=zt)}var ju=0,Co=0,ka=0,ba=0,Bo=0,uu=0,Hu=0,gs=0,qo=0,Is,iu,Fo,Yu,Ys={point:Ka,lineStart:pl,lineEnd:Ec,polygonStart:function(){Ys.lineStart=Ml,Ys.lineEnd=ao},polygonEnd:function(){Ys.point=Ka,Ys.lineStart=pl,Ys.lineEnd=Ec},result:function(){var zt=qo?[Hu/qo,gs/qo]:uu?[ba/uu,Bo/uu]:ka?[ju/ka,Co/ka]:[NaN,NaN];return ju=Co=ka=ba=Bo=uu=Hu=gs=qo=0,zt}};function Ka(Dt,zt){ju+=Dt,Co+=zt,++ka}function pl(){Ys.point=Gl}function Gl(Dt,zt){Ys.point=gl,Ka(Fo=Dt,Yu=zt)}function gl(Dt,zt){var oe=Dt-Fo,ne=zt-Yu,he=L(oe*oe+ne*ne);ba+=he*(Fo+Dt)/2,Bo+=he*(Yu+zt)/2,uu+=he,Ka(Fo=Dt,Yu=zt)}function Ec(){Ys.point=Ka}function Ml(){Ys.point=Au}function ao(){ml(Is,iu)}function Au(Dt,zt){Ys.point=ml,Ka(Is=Fo=Dt,iu=Yu=zt)}function ml(Dt,zt){var oe=Dt-Fo,ne=zt-Yu,he=L(oe*oe+ne*ne);ba+=he*(Fo+Dt)/2,Bo+=he*(Yu+zt)/2,uu+=he,he=Yu*Dt-Fo*zt,Hu+=he*(Fo+Dt),gs+=he*(Yu+zt),qo+=he*3,Ka(Fo=Dt,Yu=zt)}function qs(Dt){this._context=Dt}qs.prototype={_radius:4.5,pointRadius:function(zt){return this._radius=zt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(zt,oe){switch(this._point){case 0:{this._context.moveTo(zt,oe),this._point=1;break}case 1:{this._context.lineTo(zt,oe);break}default:{this._context.moveTo(zt+this._radius,oe),this._context.arc(zt,oe,this._radius,0,f);break}}},result:U};var Bu=s(),vu,pu,Zs,ds,Ms,al={point:U,lineStart:function(){al.point=Pl},lineEnd:function(){vu&&jl(pu,Zs),al.point=U},polygonStart:function(){vu=!0},polygonEnd:function(){vu=null},result:function(){var zt=+Bu;return Bu.reset(),zt}};function Pl(Dt,zt){al.point=jl,pu=ds=Dt,Zs=Ms=zt}function jl(Dt,zt){ds-=Dt,Ms-=zt,Bu.add(L(ds*ds+Ms*Ms)),ds=Dt,Ms=zt}function Nu(){this._string=[]}Nu.prototype={_radius:4.5,_circle:Zu(4.5),pointRadius:function(zt){return(zt=+zt)!==this._radius&&(this._radius=zt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(zt,oe){switch(this._point){case 0:{this._string.push("M",zt,",",oe),this._point=1;break}case 1:{this._string.push("L",zt,",",oe);break}default:{this._circle==null&&(this._circle=Zu(this._radius)),this._string.push("M",zt,",",oe,this._circle);break}}},result:function(){if(this._string.length){var zt=this._string.join("");return this._string=[],zt}else return null}};function Zu(Dt){return"m0,"+Dt+"a"+Dt+","+Dt+" 0 1,1 0,"+-2*Dt+"a"+Dt+","+Dt+" 0 1,1 0,"+2*Dt+"z"}function ol(Dt,zt){var oe=4.5,ne,he;function Fe(Ze){return Ze&&(typeof oe=="function"&&he.pointRadius(+oe.apply(this,arguments)),ut(Ze,ne(he))),he.result()}return Fe.area=function(Ze){return ut(Ze,ne(ps)),ps.result()},Fe.measure=function(Ze){return ut(Ze,ne(al)),al.result()},Fe.bounds=function(Ze){return ut(Ze,ne(Wu)),Wu.result()},Fe.centroid=function(Ze){return ut(Ze,ne(Ys)),Ys.result()},Fe.projection=function(Ze){return arguments.length?(ne=Ze==null?(Dt=null,Es):(Dt=Ze).stream,Fe):Dt},Fe.context=function(Ze){return arguments.length?(he=Ze==null?(zt=null,new Nu):new qs(zt=Ze),typeof oe!="function"&&he.pointRadius(oe),Fe):zt},Fe.pointRadius=function(Ze){return arguments.length?(oe=typeof Ze=="function"?Ze:(he.pointRadius(+Ze),+Ze),Fe):oe},Fe.projection(Dt).context(zt)}function gu(Dt){return{stream:au(Dt)}}function au(Dt){return function(zt){var oe=new Ku;for(var ne in Dt)oe[ne]=Dt[ne];return oe.stream=zt,oe}}function Ku(){}Ku.prototype={constructor:Ku,point:function(zt,oe){this.stream.point(zt,oe)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ls(Dt,zt,oe){var ne=Dt.clipExtent&&Dt.clipExtent();return Dt.scale(150).translate([0,0]),ne!=null&&Dt.clipExtent(null),ut(oe,Dt.stream(Wu)),zt(Wu.result()),ne!=null&&Dt.clipExtent(ne),Dt}function yl(Dt,zt,oe){return Ls(Dt,function(ne){var he=zt[1][0]-zt[0][0],Fe=zt[1][1]-zt[0][1],Ze=Math.min(he/(ne[1][0]-ne[0][0]),Fe/(ne[1][1]-ne[0][1])),nn=+zt[0][0]+(he-Ze*(ne[1][0]+ne[0][0]))/2,Je=+zt[0][1]+(Fe-Ze*(ne[1][1]+ne[0][1]))/2;Dt.scale(150*Ze).translate([nn,Je])},oe)}function ic(Dt,zt,oe){return yl(Dt,[[0,0],zt],oe)}function Tl(Dt,zt,oe){return Ls(Dt,function(ne){var he=+zt,Fe=he/(ne[1][0]-ne[0][0]),Ze=(he-Fe*(ne[1][0]+ne[0][0]))/2,nn=-Fe*ne[0][1];Dt.scale(150*Fe).translate([Ze,nn])},oe)}function Bl(Dt,zt,oe){return Ls(Dt,function(ne){var he=+zt,Fe=he/(ne[1][1]-ne[0][1]),Ze=-Fe*ne[0][0],nn=(he-Fe*(ne[1][1]+ne[0][1]))/2;Dt.scale(150*Fe).translate([Ze,nn])},oe)}var Vl=16,pc=M(30*b);function Xu(Dt,zt){return+zt?Nl(Dt,zt):Al(Dt)}function Al(Dt){return au({point:function(oe,ne){oe=Dt(oe,ne),this.stream.point(oe[0],oe[1])}})}function Nl(Dt,zt){function oe(ne,he,Fe,Ze,nn,Je,pn,fn,Hn,Un,Vn,Gn,dr,br){var Kr=pn-ne,mi=fn-he,jr=Kr*Kr+mi*mi;if(jr>4*zt&&dr--){var oi=Ze+Un,fi=nn+Vn,Hi=Je+Gn,Di=L(oi*oi+fi*fi+Hi*Hi),Ma=K(Hi/=Di),xa=g(g(Hi)-1)<n||g(Fe-Hn)<n?(Fe+Hn)/2:_(fi,oi),Pa=Dt(xa,Ma),ei=Pa[0],Ea=Pa[1],Ga=ei-ne,Ha=Ea-he,Li=mi*Ga-Kr*Ha;(Li*Li/jr>zt||g((Kr*Ga+mi*Ha)/jr-.5)>.3||Ze*Un+nn*Vn+Je*Gn<pc)&&(oe(ne,he,Fe,Ze,nn,Je,ei,Ea,xa,oi/=Di,fi/=Di,Hi,dr,br),br.point(ei,Ea),oe(ei,Ea,xa,oi,fi,Hi,pn,fn,Hn,Un,Vn,Gn,dr,br))}}return function(ne){var he,Fe,Ze,nn,Je,pn,fn,Hn,Un,Vn,Gn,dr,br={point:Kr,lineStart:mi,lineEnd:oi,polygonStart:function(){ne.polygonStart(),br.lineStart=fi},polygonEnd:function(){ne.polygonEnd(),br.lineStart=mi}};function Kr(Ma,xa){Ma=Dt(Ma,xa),ne.point(Ma[0],Ma[1])}function mi(){Hn=NaN,br.point=jr,ne.lineStart()}function jr(Ma,xa){var Pa=k([Ma,xa]),ei=Dt(Ma,xa);oe(Hn,Un,fn,Vn,Gn,dr,Hn=ei[0],Un=ei[1],fn=Ma,Vn=Pa[0],Gn=Pa[1],dr=Pa[2],Vl,ne),ne.point(Hn,Un)}function oi(){br.point=Kr,ne.lineEnd()}function fi(){mi(),br.point=Hi,br.lineEnd=Di}function Hi(Ma,xa){jr(he=Ma,xa),Fe=Hn,Ze=Un,nn=Vn,Je=Gn,pn=dr,br.point=jr}function Di(){oe(Hn,Un,fn,Vn,Gn,dr,Fe,Ze,he,nn,Je,pn,Vl,ne),br.lineEnd=oi,oi()}return br}}var Oo=au({point:function(zt,oe){this.stream.point(zt*b,oe*b)}});function go(Dt){return au({point:function(oe,ne){var he=Dt(oe,ne);return this.stream.point(he[0],he[1])}})}function xl(Dt,zt,oe,ne,he){function Fe(Ze,nn){return Ze*=ne,nn*=he,[zt+Dt*Ze,oe-Dt*nn]}return Fe.invert=function(Ze,nn){return[(Ze-zt)/Dt*ne,(oe-nn)/Dt*he]},Fe}function sl(Dt,zt,oe,ne,he,Fe){var Ze=M(Fe),nn=A(Fe),Je=Ze*Dt,pn=nn*Dt,fn=Ze/Dt,Hn=nn/Dt,Un=(nn*oe-Ze*zt)/Dt,Vn=(nn*zt+Ze*oe)/Dt;function Gn(dr,br){return dr*=ne,br*=he,[Je*dr-pn*br+zt,oe-pn*dr-Je*br]}return Gn.invert=function(dr,br){return[ne*(fn*dr-Hn*br+Un),he*(Vn-Hn*dr-fn*br)]},Gn}function Vs(Dt){return Da(function(){return Dt})()}function Da(Dt){var zt,oe=150,ne=480,he=250,Fe=0,Ze=0,nn=0,Je=0,pn=0,fn,Hn=0,Un=1,Vn=1,Gn=null,dr=Yt,br=null,Kr,mi,jr,oi=Es,fi=.5,Hi,Di,Ma,xa,Pa;function ei(Li){return Ma(Li[0]*b,Li[1]*b)}function Ea(Li){return Li=Ma.invert(Li[0],Li[1]),Li&&[Li[0]*v,Li[1]*v]}ei.stream=function(Li){return xa&&Pa===Li?xa:xa=Oo(go(fn)(dr(Hi(oi(Pa=Li)))))},ei.preclip=function(Li){return arguments.length?(dr=Li,Gn=void 0,Ha()):dr},ei.postclip=function(Li){return arguments.length?(oi=Li,br=Kr=mi=jr=null,Ha()):oi},ei.clipAngle=function(Li){return arguments.length?(dr=+Li?rr(Gn=Li*b):(Gn=null,Yt),Ha()):Gn*v},ei.clipExtent=function(Li){return arguments.length?(oi=Li==null?(br=Kr=mi=jr=null,Es):wi(br=+Li[0][0],Kr=+Li[0][1],mi=+Li[1][0],jr=+Li[1][1]),Ha()):br==null?null:[[br,Kr],[mi,jr]]},ei.scale=function(Li){return arguments.length?(oe=+Li,Ga()):oe},ei.translate=function(Li){return arguments.length?(ne=+Li[0],he=+Li[1],Ga()):[ne,he]},ei.center=function(Li){return arguments.length?(Fe=Li[0]%360*b,Ze=Li[1]%360*b,Ga()):[Fe*v,Ze*v]},ei.rotate=function(Li){return arguments.length?(nn=Li[0]%360*b,Je=Li[1]%360*b,pn=Li.length>2?Li[2]%360*b:0,Ga()):[nn*v,Je*v,pn*v]},ei.angle=function(Li){return arguments.length?(Hn=Li%360*b,Ga()):Hn*v},ei.reflectX=function(Li){return arguments.length?(Un=Li?-1:1,Ga()):Un<0},ei.reflectY=function(Li){return arguments.length?(Vn=Li?-1:1,Ga()):Vn<0},ei.precision=function(Li){return arguments.length?(Hi=Xu(Di,fi=Li*Li),Ha()):L(fi)},ei.fitExtent=function(Li,Ia){return yl(ei,Li,Ia)},ei.fitSize=function(Li,Ia){return ic(ei,Li,Ia)},ei.fitWidth=function(Li,Ia){return Tl(ei,Li,Ia)},ei.fitHeight=function(Li,Ia){return Bl(ei,Li,Ia)};function Ga(){var Li=sl(oe,0,0,Un,Vn,Hn).apply(null,zt(Fe,Ze)),Ia=(Hn?sl:xl)(oe,ne-Li[0],he-Li[1],Un,Vn,Hn);return fn=Ta(nn,Je,pn),Di=Fr(zt,Ia),Ma=Fr(fn,Di),Hi=Xu(Di,fi),Ha()}function Ha(){return xa=Pa=null,ei}return function(){return zt=Dt.apply(this,arguments),ei.invert=zt.invert&&Ea,Ga()}}function bo(Dt){var zt=0,oe=a/3,ne=Da(Dt),he=ne(zt,oe);return he.parallels=function(Fe){return arguments.length?ne(zt=Fe[0]*b,oe=Fe[1]*b):[zt*v,oe*v]},he}function Ns(Dt){var zt=M(Dt);function oe(ne,he){return[ne*zt,A(he)/zt]}return oe.invert=function(ne,he){return[ne/zt,K(he*zt)]},oe}function Cl(Dt,zt){var oe=A(Dt),ne=(oe+A(zt))/2;if(g(ne)<n)return Ns(Dt);var he=1+oe*(2*ne-oe),Fe=L(he)/ne;function Ze(nn,Je){var pn=L(he-2*ne*A(Je))/ne;return[pn*A(nn*=ne),Fe-pn*M(nn)]}return Ze.invert=function(nn,Je){var pn=Fe-Je,fn=_(nn,g(pn))*O(pn);return pn*ne<0&&(fn-=a*O(nn)*O(pn)),[fn/ne,K((he-(nn*nn+pn*pn)*ne*ne)/(2*ne))]},Ze}function ul(){return bo(Cl).scale(155.424).center([0,33.6442])}function Ju(){return ul().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Sc(Dt){var zt=Dt.length;return{point:function(ne,he){for(var Fe=-1;++Fe<zt;)Dt[Fe].point(ne,he)},sphere:function(){for(var ne=-1;++ne<zt;)Dt[ne].sphere()},lineStart:function(){for(var ne=-1;++ne<zt;)Dt[ne].lineStart()},lineEnd:function(){for(var ne=-1;++ne<zt;)Dt[ne].lineEnd()},polygonStart:function(){for(var ne=-1;++ne<zt;)Dt[ne].polygonStart()},polygonEnd:function(){for(var ne=-1;++ne<zt;)Dt[ne].polygonEnd()}}}function Wl(){var Dt,zt,oe=Ju(),ne,he=ul().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Fe,Ze=ul().rotate([157,0]).center([-3,19.9]).parallels([8,18]),nn,Je,pn={point:function(Vn,Gn){Je=[Vn,Gn]}};function fn(Un){var Vn=Un[0],Gn=Un[1];return Je=null,ne.point(Vn,Gn),Je||(Fe.point(Vn,Gn),Je)||(nn.point(Vn,Gn),Je)}fn.invert=function(Un){var Vn=oe.scale(),Gn=oe.translate(),dr=(Un[0]-Gn[0])/Vn,br=(Un[1]-Gn[1])/Vn;return(br>=.12&&br<.234&&dr>=-.425&&dr<-.214?he:br>=.166&&br<.234&&dr>=-.214&&dr<-.115?Ze:oe).invert(Un)},fn.stream=function(Un){return Dt&&zt===Un?Dt:Dt=Sc([oe.stream(zt=Un),he.stream(Un),Ze.stream(Un)])},fn.precision=function(Un){return arguments.length?(oe.precision(Un),he.precision(Un),Ze.precision(Un),Hn()):oe.precision()},fn.scale=function(Un){return arguments.length?(oe.scale(Un),he.scale(Un*.35),Ze.scale(Un),fn.translate(oe.translate())):oe.scale()},fn.translate=function(Un){if(!arguments.length)return oe.translate();var Vn=oe.scale(),Gn=+Un[0],dr=+Un[1];return ne=oe.translate(Un).clipExtent([[Gn-.455*Vn,dr-.238*Vn],[Gn+.455*Vn,dr+.238*Vn]]).stream(pn),Fe=he.translate([Gn-.307*Vn,dr+.201*Vn]).clipExtent([[Gn-.425*Vn+n,dr+.12*Vn+n],[Gn-.214*Vn-n,dr+.234*Vn-n]]).stream(pn),nn=Ze.translate([Gn-.205*Vn,dr+.212*Vn]).clipExtent([[Gn-.214*Vn+n,dr+.166*Vn+n],[Gn-.115*Vn-n,dr+.234*Vn-n]]).stream(pn),Hn()},fn.fitExtent=function(Un,Vn){return yl(fn,Un,Vn)},fn.fitSize=function(Un,Vn){return ic(fn,Un,Vn)},fn.fitWidth=function(Un,Vn){return Tl(fn,Un,Vn)},fn.fitHeight=function(Un,Vn){return Bl(fn,Un,Vn)};function Hn(){return Dt=zt=null,fn}return fn.scale(1070)}function $u(Dt){return function(zt,oe){var ne=M(zt),he=M(oe),Fe=Dt(ne*he);return[Fe*he*A(zt),Fe*A(oe)]}}function tu(Dt){return function(zt,oe){var ne=L(zt*zt+oe*oe),he=Dt(ne),Fe=A(he),Ze=M(he);return[_(zt*Fe,ne*Ze),K(ne&&oe*Fe/ne)]}}var Ws=$u(function(Dt){return L(2/(1+Dt))});Ws.invert=tu(function(Dt){return 2*K(Dt/2)});function is(){return Vs(Ws).scale(124.75).clipAngle(180-.001)}var eu=$u(function(Dt){return(Dt=F(Dt))&&Dt/A(Dt)});eu.invert=tu(function(Dt){return Dt});function Fu(){return Vs(eu).scale(79.4188).clipAngle(180-.001)}function us(Dt,zt){return[Dt,S(H((o+zt)/2))]}us.invert=function(Dt,zt){return[Dt,2*m(y(zt))-o]};function Wi(){return js(us).scale(961/f)}function js(Dt){var zt=Vs(Dt),oe=zt.center,ne=zt.scale,he=zt.translate,Fe=zt.clipExtent,Ze=null,nn,Je,pn;zt.scale=function(Hn){return arguments.length?(ne(Hn),fn()):ne()},zt.translate=function(Hn){return arguments.length?(he(Hn),fn()):he()},zt.center=function(Hn){return arguments.length?(oe(Hn),fn()):oe()},zt.clipExtent=function(Hn){return arguments.length?(Hn==null?Ze=nn=Je=pn=null:(Ze=+Hn[0][0],nn=+Hn[0][1],Je=+Hn[1][0],pn=+Hn[1][1]),fn()):Ze==null?null:[[Ze,nn],[Je,pn]]};function fn(){var Hn=a*ne(),Un=zt(Ro(zt.rotate()).invert([0,0]));return Fe(Ze==null?[[Un[0]-Hn,Un[1]-Hn],[Un[0]+Hn,Un[1]+Hn]]:Dt===us?[[Math.max(Un[0]-Hn,Ze),nn],[Math.min(Un[0]+Hn,Je),pn]]:[[Ze,Math.max(Un[1]-Hn,nn)],[Je,Math.min(Un[1]+Hn,pn)]])}return fn()}function Qu(Dt){return H((o+Dt)/2)}function zu(Dt,zt){var oe=M(Dt),ne=Dt===zt?A(Dt):S(oe/M(zt))/S(Qu(zt)/Qu(Dt)),he=oe*P(Qu(Dt),ne)/ne;if(!ne)return us;function Fe(Ze,nn){he>0?nn<-o+n&&(nn=-o+n):nn>o-n&&(nn=o-n);var Je=he/P(Qu(nn),ne);return[Je*A(ne*Ze),he-Je*M(ne*Ze)]}return Fe.invert=function(Ze,nn){var Je=he-nn,pn=O(ne)*L(Ze*Ze+Je*Je),fn=_(Ze,g(Je))*O(Je);return Je*ne<0&&(fn-=a*O(Ze)*O(Je)),[fn/ne,2*m(P(he/pn,1/ne))-o]},Fe}function Uo(){return bo(zu).scale(109.5).parallels([30,30])}function Wo(Dt,zt){return[Dt,zt]}Wo.invert=Wo;function mu(){return Vs(Wo).scale(152.63)}function _i(Dt,zt){var oe=M(Dt),ne=Dt===zt?A(Dt):(oe-M(zt))/(zt-Dt),he=oe/ne+Dt;if(g(ne)<n)return Wo;function Fe(Ze,nn){var Je=he-nn,pn=ne*Ze;return[Je*A(pn),he-Je*M(pn)]}return Fe.invert=function(Ze,nn){var Je=he-nn,pn=_(Ze,g(Je))*O(Je);return Je*ne<0&&(pn-=a*O(Ze)*O(Je)),[pn/ne,he-O(ne)*L(Ze*Ze+Je*Je)]},Fe}function yu(){return bo(_i).scale(131.154).center([0,13.9389])}var Cu=1.340264,Ou=-.081106,Ks=893e-6,we=.003796,Pe=L(3)/2,hn=12;function tn(Dt,zt){var oe=K(Pe*A(zt)),ne=oe*oe,he=ne*ne*ne;return[Dt*M(oe)/(Pe*(Cu+3*Ou*ne+he*(7*Ks+9*we*ne))),oe*(Cu+Ou*ne+he*(Ks+we*ne))]}tn.invert=function(Dt,zt){for(var oe=zt,ne=oe*oe,he=ne*ne*ne,Fe=0,Ze,nn,Je;Fe<hn&&(nn=oe*(Cu+Ou*ne+he*(Ks+we*ne))-zt,Je=Cu+3*Ou*ne+he*(7*Ks+9*we*ne),oe-=Ze=nn/Je,ne=oe*oe,he=ne*ne*ne,!(g(Ze)<i));++Fe);return[Pe*Dt*(Cu+3*Ou*ne+he*(7*Ks+9*we*ne))/M(oe),K(A(oe)/Pe)]};function On(){return Vs(tn).scale(177.158)}function hr(Dt,zt){var oe=M(zt),ne=M(Dt)*oe;return[oe*A(Dt)/ne,A(zt)/ne]}hr.invert=tu(m);function Rr(){return Vs(hr).scale(144.049).clipAngle(60)}function Xr(){var Dt=1,zt=0,oe=0,ne=1,he=1,Fe=0,Ze,nn,Je=null,pn,fn,Hn,Un=1,Vn=1,Gn=au({point:function(fi,Hi){var Di=jr([fi,Hi]);this.stream.point(Di[0],Di[1])}}),dr=Es,br,Kr;function mi(){return Un=Dt*ne,Vn=Dt*he,br=Kr=null,jr}function jr(oi){var fi=oi[0]*Un,Hi=oi[1]*Vn;if(Fe){var Di=Hi*Ze-fi*nn;fi=fi*Ze+Hi*nn,Hi=Di}return[fi+zt,Hi+oe]}return jr.invert=function(oi){var fi=oi[0]-zt,Hi=oi[1]-oe;if(Fe){var Di=Hi*Ze+fi*nn;fi=fi*Ze-Hi*nn,Hi=Di}return[fi/Un,Hi/Vn]},jr.stream=function(oi){return br&&Kr===oi?br:br=Gn(dr(Kr=oi))},jr.postclip=function(oi){return arguments.length?(dr=oi,Je=pn=fn=Hn=null,mi()):dr},jr.clipExtent=function(oi){return arguments.length?(dr=oi==null?(Je=pn=fn=Hn=null,Es):wi(Je=+oi[0][0],pn=+oi[0][1],fn=+oi[1][0],Hn=+oi[1][1]),mi()):Je==null?null:[[Je,pn],[fn,Hn]]},jr.scale=function(oi){return arguments.length?(Dt=+oi,mi()):Dt},jr.translate=function(oi){return arguments.length?(zt=+oi[0],oe=+oi[1],mi()):[zt,oe]},jr.angle=function(oi){return arguments.length?(Fe=oi%360*b,nn=A(Fe),Ze=M(Fe),mi()):Fe*v},jr.reflectX=function(oi){return arguments.length?(ne=oi?-1:1,mi()):ne<0},jr.reflectY=function(oi){return arguments.length?(he=oi?-1:1,mi()):he<0},jr.fitExtent=function(oi,fi){return yl(jr,oi,fi)},jr.fitSize=function(oi,fi){return ic(jr,oi,fi)},jr.fitWidth=function(oi,fi){return Tl(jr,oi,fi)},jr.fitHeight=function(oi,fi){return Bl(jr,oi,fi)},jr}function ni(Dt,zt){var oe=zt*zt,ne=oe*oe;return[Dt*(.8707-.131979*oe+ne*(-.013791+ne*(.003971*oe-.001529*ne))),zt*(1.007226+oe*(.015085+ne*(-.044475+.028874*oe-.005916*ne)))]}ni.invert=function(Dt,zt){var oe=zt,ne=25,he;do{var Fe=oe*oe,Ze=Fe*Fe;oe-=he=(oe*(1.007226+Fe*(.015085+Ze*(-.044475+.028874*Fe-.005916*Ze)))-zt)/(1.007226+Fe*(.015085*3+Ze*(-.044475*7+.028874*9*Fe-.005916*11*Ze)))}while(g(he)>n&&--ne>0);return[Dt/(.8707+(Fe=oe*oe)*(-.131979+Fe*(-.013791+Fe*Fe*Fe*(.003971-.001529*Fe)))),oe]};function zr(){return Vs(ni).scale(175.295)}function li(Dt,zt){return[M(zt)*A(Dt),A(zt)]}li.invert=tu(K);function yr(){return Vs(li).scale(249.5).clipAngle(90+n)}function Kt(Dt,zt){var oe=M(zt),ne=1+M(Dt)*oe;return[oe*A(Dt)/ne,A(zt)/ne]}Kt.invert=tu(function(Dt){return 2*m(Dt)});function te(){return Vs(Kt).scale(250).clipAngle(142)}function Le(Dt,zt){return[S(H((o+zt)/2)),-Dt]}Le.invert=function(Dt,zt){return[-zt,2*m(y(Dt))-o]};function Se(){var Dt=js(Le),zt=Dt.center,oe=Dt.rotate;return Dt.center=function(ne){return arguments.length?zt([-ne[1],ne[0]]):(ne=zt(),[ne[1],-ne[0]])},Dt.rotate=function(ne){return arguments.length?oe([ne[0],ne[1],ne.length>2?ne[2]+90:90]):(ne=oe(),[ne[0],ne[1],ne[2]-90])},oe([0,0,90]).scale(159.155)}t.geoAlbers=Ju,t.geoAlbersUsa=Wl,t.geoArea=at,t.geoAzimuthalEqualArea=is,t.geoAzimuthalEqualAreaRaw=Ws,t.geoAzimuthalEquidistant=Fu,t.geoAzimuthalEquidistantRaw=eu,t.geoBounds=Qt,t.geoCentroid=xr,t.geoCircle=Jo,t.geoClipAntimeridian=Yt,t.geoClipCircle=rr,t.geoClipExtent=Vi,t.geoClipRectangle=wi,t.geoConicConformal=Uo,t.geoConicConformalRaw=zu,t.geoConicEqualArea=ul,t.geoConicEqualAreaRaw=Cl,t.geoConicEquidistant=yu,t.geoConicEquidistantRaw=_i,t.geoContains=Ua,t.geoDistance=Ao,t.geoEqualEarth=On,t.geoEqualEarthRaw=tn,t.geoEquirectangular=mu,t.geoEquirectangularRaw=Wo,t.geoGnomonic=Rr,t.geoGnomonicRaw=hr,t.geoGraticule=ea,t.geoGraticule10=Qa,t.geoIdentity=Xr,t.geoInterpolate=Ds,t.geoLength=hs,t.geoMercator=Wi,t.geoMercatorRaw=us,t.geoNaturalEarth1=zr,t.geoNaturalEarth1Raw=ni,t.geoOrthographic=yr,t.geoOrthographicRaw=li,t.geoPath=ol,t.geoProjection=Vs,t.geoProjectionMutator=Da,t.geoRotation=Ro,t.geoStereographic=te,t.geoStereographicRaw=Kt,t.geoStream=ut,t.geoTransform=gu,t.geoTransverseMercator=Se,t.geoTransverseMercatorRaw=Le,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,u){"use strict";var s=function(){return new c};function c(){this.reset()}c.prototype={constructor:c,reset:function(){this.s=this.t=0},add:function(Pe){h(r,Pe,this.t),h(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new c;function h(we,Pe,hn){var tn=we.s=Pe+hn,On=tn-Pe,hr=tn-On;we.t=Pe-hr+(hn-On)}var n=1e-6,i=1e-12,a=Math.PI,o=a/2,l=a/4,f=a*2,v=180/a,b=a/180,g=Math.abs,m=Math.atan,_=Math.atan2,M=Math.cos,x=Math.ceil,y=Math.exp,S=Math.log,P=Math.pow,A=Math.sin,O=Math.sign||function(we){return we>0?1:we<0?-1:0},L=Math.sqrt,H=Math.tan;function F(we){return we>1?0:we<-1?a:Math.acos(we)}function K(we){return we>1?o:we<-1?-o:Math.asin(we)}function G(we){return(we=A(we/2))*we}function U(){}function Z(we,Pe){we&&rt.hasOwnProperty(we.type)&&rt[we.type](we,Pe)}var J={Feature:function(Pe,hn){Z(Pe.geometry,hn)},FeatureCollection:function(Pe,hn){for(var tn=Pe.features,On=-1,hr=tn.length;++On<hr;)Z(tn[On].geometry,hn)}},rt={Sphere:function(Pe,hn){hn.sphere()},Point:function(Pe,hn){Pe=Pe.coordinates,hn.point(Pe[0],Pe[1],Pe[2])},MultiPoint:function(Pe,hn){for(var tn=Pe.coordinates,On=-1,hr=tn.length;++On<hr;)Pe=tn[On],hn.point(Pe[0],Pe[1],Pe[2])},LineString:function(Pe,hn){vt(Pe.coordinates,hn,0)},MultiLineString:function(Pe,hn){for(var tn=Pe.coordinates,On=-1,hr=tn.length;++On<hr;)vt(tn[On],hn,0)},Polygon:function(Pe,hn){mt(Pe.coordinates,hn)},MultiPolygon:function(Pe,hn){for(var tn=Pe.coordinates,On=-1,hr=tn.length;++On<hr;)mt(tn[On],hn)},GeometryCollection:function(Pe,hn){for(var tn=Pe.geometries,On=-1,hr=tn.length;++On<hr;)Z(tn[On],hn)}};function vt(we,Pe,hn){var tn=-1,On=we.length-hn,hr;for(Pe.lineStart();++tn<On;)hr=we[tn],Pe.point(hr[0],hr[1],hr[2]);Pe.lineEnd()}function mt(we,Pe){var hn=-1,tn=we.length;for(Pe.polygonStart();++hn<tn;)vt(we[hn],Pe,1);Pe.polygonEnd()}var ut=function(Pe,hn){Pe&&J.hasOwnProperty(Pe.type)?J[Pe.type](Pe,hn):Z(Pe,hn)},Rt=s(),Ft=s(),wt,Mt,St,At,nt,Pt={point:U,lineStart:U,lineEnd:U,polygonStart:function(){Rt.reset(),Pt.lineStart=z,Pt.lineEnd=q},polygonEnd:function(){var Pe=+Rt;Ft.add(Pe<0?f+Pe:Pe),this.lineStart=this.lineEnd=this.point=U},sphere:function(){Ft.add(f)}};function z(){Pt.point=gt}function q(){et(wt,Mt)}function gt(we,Pe){Pt.point=et,wt=we,Mt=Pe,we*=b,Pe*=b,St=we,At=M(Pe=Pe/2+l),nt=A(Pe)}function et(we,Pe){we*=b,Pe*=b,Pe=Pe/2+l;var hn=we-St,tn=hn>=0?1:-1,On=tn*hn,hr=M(Pe),Rr=A(Pe),Xr=nt*Rr,ni=At*hr+Xr*M(On),zr=Xr*tn*A(On);Rt.add(_(zr,ni)),St=we,At=hr,nt=Rr}var at=function(Pe){return Ft.reset(),ut(Pe,Pt),Ft*2};function xt(we){return[_(we[1],we[0]),K(we[2])]}function k(we){var Pe=we[0],hn=we[1],tn=M(hn);return[tn*M(Pe),tn*A(Pe),A(hn)]}function ot(we,Pe){return we[0]*Pe[0]+we[1]*Pe[1]+we[2]*Pe[2]}function it(we,Pe){return[we[1]*Pe[2]-we[2]*Pe[1],we[2]*Pe[0]-we[0]*Pe[2],we[0]*Pe[1]-we[1]*Pe[0]]}function $(we,Pe){we[0]+=Pe[0],we[1]+=Pe[1],we[2]+=Pe[2]}function _t(we,Pe){return[we[0]*Pe,we[1]*Pe,we[2]*Pe]}function yt(we){var Pe=L(we[0]*we[0]+we[1]*we[1]+we[2]*we[2]);we[0]/=Pe,we[1]/=Pe,we[2]/=Pe}var Nt,$t,ee,Gt,Ht,ae,le,Be,Ce=s(),We,Ye,wn={point:er,lineStart:on,lineEnd:en,polygonStart:function(){wn.point=An,wn.lineStart=Bn,wn.lineEnd=gr,Ce.reset(),Pt.polygonStart()},polygonEnd:function(){Pt.polygonEnd(),wn.point=er,wn.lineStart=on,wn.lineEnd=en,Rt<0?(Nt=-(ee=180),$t=-(Gt=90)):Ce>n?Gt=90:Ce<-n&&($t=-90),Ye[0]=Nt,Ye[1]=ee}};function er(we,Pe){We.push(Ye=[Nt=we,ee=we]),Pe<$t&&($t=Pe),Pe>Gt&&(Gt=Pe)}function Lr(we,Pe){var hn=k([we*b,Pe*b]);if(Be){var tn=it(Be,hn),On=[tn[1],-tn[0],0],hr=it(On,tn);yt(hr),hr=xt(hr);var Rr=we-Ht,Xr=Rr>0?1:-1,ni=hr[0]*v*Xr,zr,li=g(Rr)>180;li^(Xr*Ht<ni&&ni<Xr*we)?(zr=hr[1]*v,zr>Gt&&(Gt=zr)):(ni=(ni+360)%360-180,li^(Xr*Ht<ni&&ni<Xr*we)?(zr=-hr[1]*v,zr<$t&&($t=zr)):(Pe<$t&&($t=Pe),Pe>Gt&&(Gt=Pe))),li?we<Ht?hi(Nt,we)>hi(Nt,ee)&&(ee=we):hi(we,ee)>hi(Nt,ee)&&(Nt=we):ee>=Nt?(we<Nt&&(Nt=we),we>ee&&(ee=we)):we>Ht?hi(Nt,we)>hi(Nt,ee)&&(ee=we):hi(we,ee)>hi(Nt,ee)&&(Nt=we)}else We.push(Ye=[Nt=we,ee=we]);Pe<$t&&($t=Pe),Pe>Gt&&(Gt=Pe),Be=hn,Ht=we}function on(){wn.point=Lr}function en(){Ye[0]=Nt,Ye[1]=ee,wn.point=er,Be=null}function An(we,Pe){if(Be){var hn=we-Ht;Ce.add(g(hn)>180?hn+(hn>0?360:-360):hn)}else ae=we,le=Pe;Pt.point(we,Pe),Lr(we,Pe)}function Bn(){Pt.lineStart()}function gr(){An(ae,le),Pt.lineEnd(),g(Ce)>n&&(Nt=-(ee=180)),Ye[0]=Nt,Ye[1]=ee,Be=null}function hi(we,Pe){return(Pe-=we)<0?Pe+360:Pe}function Ae(we,Pe){return we[0]-Pe[0]}function Me(we,Pe){return we[0]<=we[1]?we[0]<=Pe&&Pe<=we[1]:Pe<we[0]||we[1]<Pe}var Qt=function(Pe){var hn,tn,On,hr,Rr,Xr,ni;if(Gt=ee=-(Nt=$t=Infinity),We=[],ut(Pe,wn),tn=We.length){for(We.sort(Ae),hn=1,On=We[0],Rr=[On];hn<tn;++hn)hr=We[hn],Me(On,hr[0])||Me(On,hr[1])?(hi(On[0],hr[1])>hi(On[0],On[1])&&(On[1]=hr[1]),hi(hr[0],On[1])>hi(On[0],On[1])&&(On[0]=hr[0])):Rr.push(On=hr);for(Xr=-Infinity,tn=Rr.length-1,hn=0,On=Rr[tn];hn<=tn;On=hr,++hn)hr=Rr[hn],(ni=hi(On[1],hr[0]))>Xr&&(Xr=ni,Nt=hr[0],ee=On[1])}return We=Ye=null,Nt===Infinity||$t===Infinity?[[NaN,NaN],[NaN,NaN]]:[[Nt,$t],[ee,Gt]]},ge,Wt,re,Te,ue,be,Xe,Rn,tr,Mn,vn,Ar,or,cn,Pr,Sr,De={sphere:U,point:$e,lineStart:En,lineEnd:mn,polygonStart:function(){De.lineStart=Dn,De.lineEnd=$n},polygonEnd:function(){De.lineStart=En,De.lineEnd=mn}};function $e(we,Pe){we*=b,Pe*=b;var hn=M(Pe);Ve(hn*M(we),hn*A(we),A(Pe))}function Ve(we,Pe,hn){++ge,re+=(we-re)/ge,Te+=(Pe-Te)/ge,ue+=(hn-ue)/ge}function En(){De.point=xn}function xn(we,Pe){we*=b,Pe*=b;var hn=M(Pe);cn=hn*M(we),Pr=hn*A(we),Sr=A(Pe),De.point=Nn,Ve(cn,Pr,Sr)}function Nn(we,Pe){we*=b,Pe*=b;var hn=M(Pe),tn=hn*M(we),On=hn*A(we),hr=A(Pe),Rr=_(L((Rr=Pr*hr-Sr*On)*Rr+(Rr=Sr*tn-cn*hr)*Rr+(Rr=cn*On-Pr*tn)*Rr),cn*tn+Pr*On+Sr*hr);Wt+=Rr,be+=Rr*(cn+(cn=tn)),Xe+=Rr*(Pr+(Pr=On)),Rn+=Rr*(Sr+(Sr=hr)),Ve(cn,Pr,Sr)}function mn(){De.point=$e}function Dn(){De.point=Wn}function $n(){_n(Ar,or),De.point=$e}function Wn(we,Pe){Ar=we,or=Pe,we*=b,Pe*=b,De.point=_n;var hn=M(Pe);cn=hn*M(we),Pr=hn*A(we),Sr=A(Pe),Ve(cn,Pr,Sr)}function _n(we,Pe){we*=b,Pe*=b;var hn=M(Pe),tn=hn*M(we),On=hn*A(we),hr=A(Pe),Rr=Pr*hr-Sr*On,Xr=Sr*tn-cn*hr,ni=cn*On-Pr*tn,zr=L(Rr*Rr+Xr*Xr+ni*ni),li=K(zr),yr=zr&&-li/zr;tr+=yr*Rr,Mn+=yr*Xr,vn+=yr*ni,Wt+=li,be+=li*(cn+(cn=tn)),Xe+=li*(Pr+(Pr=On)),Rn+=li*(Sr+(Sr=hr)),Ve(cn,Pr,Sr)}var xr=function(Pe){ge=Wt=re=Te=ue=be=Xe=Rn=tr=Mn=vn=0,ut(Pe,De);var hn=tr,tn=Mn,On=vn,hr=hn*hn+tn*tn+On*On;return hr<i&&(hn=be,tn=Xe,On=Rn,Wt<n&&(hn=re,tn=Te,On=ue),hr=hn*hn+tn*tn+On*On,hr<i)?[NaN,NaN]:[_(tn,hn)*v,K(On/L(hr))*v]},mr=function(Pe){return function(){return Pe}},Fr=function(Pe,hn){function tn(On,hr){return On=Pe(On,hr),hn(On[0],On[1])}return Pe.invert&&hn.invert&&(tn.invert=function(On,hr){return On=hn.invert(On,hr),On&&Pe.invert(On[0],On[1])}),tn};function xi(we,Pe){return[we>a?we-f:we<-a?we+f:we,Pe]}xi.invert=xi;function Ta(we,Pe,hn){return(we%=f)?Pe||hn?Fr(to(we),Vo(Pe,hn)):to(we):Pe||hn?Vo(Pe,hn):xi}function Aa(we){return function(Pe,hn){return Pe+=we,[Pe>a?Pe-f:Pe<-a?Pe+f:Pe,hn]}}function to(we){var Pe=Aa(we);return Pe.invert=Aa(-we),Pe}function Vo(we,Pe){var hn=M(we),tn=A(we),On=M(Pe),hr=A(Pe);function Rr(Xr,ni){var zr=M(ni),li=M(Xr)*zr,yr=A(Xr)*zr,Kt=A(ni),te=Kt*hn+li*tn;return[_(yr*On-te*hr,li*hn-Kt*tn),K(te*On+yr*hr)]}return Rr.invert=function(Xr,ni){var zr=M(ni),li=M(Xr)*zr,yr=A(Xr)*zr,Kt=A(ni),te=Kt*On-yr*hr;return[_(yr*On+Kt*hr,li*hn+te*tn),K(te*hn-li*tn)]},Rr}var Ro=function(Pe){Pe=Ta(Pe[0]*b,Pe[1]*b,Pe.length>2?Pe[2]*b:0);function hn(tn){return tn=Pe(tn[0]*b,tn[1]*b),tn[0]*=v,tn[1]*=v,tn}return hn.invert=function(tn){return tn=Pe.invert(tn[0]*b,tn[1]*b),tn[0]*=v,tn[1]*=v,tn},hn};function ro(we,Pe,hn,tn,On,hr){if(!!hn){var Rr=M(Pe),Xr=A(Pe),ni=tn*hn;On==null?(On=Pe+tn*f,hr=Pe-ni/2):(On=vs(Rr,On),hr=vs(Rr,hr),(tn>0?On<hr:On>hr)&&(On+=tn*f));for(var zr,li=On;tn>0?li>hr:li<hr;li-=ni)zr=xt([Rr,-Xr*M(li),-Xr*A(li)]),we.point(zr[0],zr[1])}}function vs(we,Pe){Pe=k(Pe),Pe[0]-=we,yt(Pe);var hn=F(-Pe[1]);return((-Pe[2]<0?-hn:hn)+f-n)%f}var Jo=function(){var Pe=mr([0,0]),hn=mr(90),tn=mr(6),On,hr,Rr={point:Xr};function Xr(zr,li){On.push(zr=hr(zr,li)),zr[0]*=v,zr[1]*=v}function ni(){var zr=Pe.apply(this,arguments),li=hn.apply(this,arguments)*b,yr=tn.apply(this,arguments)*b;return On=[],hr=Ta(-zr[0]*b,-zr[1]*b,0).invert,ro(Rr,li,yr,1),zr={type:"Polygon",coordinates:[On]},On=hr=null,zr}return ni.center=function(zr){return arguments.length?(Pe=typeof zr=="function"?zr:mr([+zr[0],+zr[1]]),ni):Pe},ni.radius=function(zr){return arguments.length?(hn=typeof zr=="function"?zr:mr(+zr),ni):hn},ni.precision=function(zr){return arguments.length?(tn=typeof zr=="function"?zr:mr(+zr),ni):tn},ni},Do=function(){var Pe=[],hn;return{point:function(On,hr){hn.push([On,hr])},lineStart:function(){Pe.push(hn=[])},lineEnd:U,rejoin:function(){Pe.length>1&&Pe.push(Pe.pop().concat(Pe.shift()))},result:function(){var On=Pe;return Pe=[],hn=null,On}}},xs=function(Pe,hn,tn,On,hr,Rr){var Xr=Pe[0],ni=Pe[1],zr=hn[0],li=hn[1],yr=0,Kt=1,te=zr-Xr,Le=li-ni,Se;if(Se=tn-Xr,!(!te&&Se>0)){if(Se/=te,te<0){if(Se<yr)return;Se<Kt&&(Kt=Se)}else if(te>0){if(Se>Kt)return;Se>yr&&(yr=Se)}if(Se=hr-Xr,!(!te&&Se<0)){if(Se/=te,te<0){if(Se>Kt)return;Se>yr&&(yr=Se)}else if(te>0){if(Se<yr)return;Se<Kt&&(Kt=Se)}if(Se=On-ni,!(!Le&&Se>0)){if(Se/=Le,Le<0){if(Se<yr)return;Se<Kt&&(Kt=Se)}else if(Le>0){if(Se>Kt)return;Se>yr&&(yr=Se)}if(Se=Rr-ni,!(!Le&&Se<0)){if(Se/=Le,Le<0){if(Se>Kt)return;Se>yr&&(yr=Se)}else if(Le>0){if(Se<yr)return;Se<Kt&&(Kt=Se)}return yr>0&&(Pe[0]=Xr+yr*te,Pe[1]=ni+yr*Le),Kt<1&&(hn[0]=Xr+Kt*te,hn[1]=ni+Kt*Le),!0}}}}},Ra=function(Pe,hn){return g(Pe[0]-hn[0])<n&&g(Pe[1]-hn[1])<n};function $o(we,Pe,hn,tn){this.x=we,this.z=Pe,this.o=hn,this.e=tn,this.v=!1,this.n=this.p=null}var jo=function(Pe,hn,tn,On,hr){var Rr=[],Xr=[],ni,zr;if(Pe.forEach(function(Se){if(!((Dt=Se.length-1)<=0)){var Dt,zt=Se[0],oe=Se[Dt],ne;if(Ra(zt,oe)){for(hr.lineStart(),ni=0;ni<Dt;++ni)hr.point((zt=Se[ni])[0],zt[1]);hr.lineEnd();return}Rr.push(ne=new $o(zt,Se,null,!0)),Xr.push(ne.o=new $o(zt,null,ne,!1)),Rr.push(ne=new $o(oe,Se,null,!1)),Xr.push(ne.o=new $o(oe,null,ne,!0))}}),!!Rr.length){for(Xr.sort(hn),Js(Rr),Js(Xr),ni=0,zr=Xr.length;ni<zr;++ni)Xr[ni].e=tn=!tn;for(var li=Rr[0],yr,Kt;;){for(var te=li,Le=!0;te.v;)if((te=te.n)===li)return;yr=te.z,hr.lineStart();do{if(te.v=te.o.v=!0,te.e){if(Le)for(ni=0,zr=yr.length;ni<zr;++ni)hr.point((Kt=yr[ni])[0],Kt[1]);else On(te.x,te.n.x,1,hr);te=te.n}else{if(Le)for(yr=te.p.z,ni=yr.length-1;ni>=0;--ni)hr.point((Kt=yr[ni])[0],Kt[1]);else On(te.x,te.p.x,-1,hr);te=te.p}te=te.o,yr=te.z,Le=!Le}while(!te.v);hr.lineEnd()}}};function Js(we){if(!!(Pe=we.length)){for(var Pe,hn=0,tn=we[0],On;++hn<Pe;)tn.n=On=we[hn],On.p=tn,tn=On;tn.n=On=we[0],On.p=tn}}var io=1e9,so=-io;function Gs(we,Pe,hn,tn){function On(zr,li){return we<=zr&&zr<=hn&&Pe<=li&&li<=tn}function hr(zr,li,yr,Kt){var te=0,Le=0;if(zr==null||(te=Rr(zr,yr))!==(Le=Rr(li,yr))||ni(zr,li)<0^yr>0)do Kt.point(te===0||te===3?we:hn,te>1?tn:Pe);while((te=(te+yr+4)%4)!==Le);else Kt.point(li[0],li[1])}function Rr(zr,li){return g(zr[0]-we)<n?li>0?0:3:g(zr[0]-hn)<n?li>0?2:1:g(zr[1]-Pe)<n?li>0?1:0:li>0?3:2}function Xr(zr,li){return ni(zr.x,li.x)}function ni(zr,li){var yr=Rr(zr,1),Kt=Rr(li,1);return yr!==Kt?yr-Kt:yr===0?li[1]-zr[1]:yr===1?zr[0]-li[0]:yr===2?zr[1]-li[1]:li[0]-zr[0]}return function(zr){var li=zr,yr=Do(),Kt,te,Le,Se,Dt,zt,oe,ne,he,Fe,Ze,nn={point:Je,lineStart:Un,lineEnd:Vn,polygonStart:fn,polygonEnd:Hn};function Je(dr,br){On(dr,br)&&li.point(dr,br)}function pn(){for(var dr=0,br=0,Kr=te.length;br<Kr;++br)for(var mi=te[br],jr=1,oi=mi.length,fi=mi[0],Hi,Di,Ma=fi[0],xa=fi[1];jr<oi;++jr)Hi=Ma,Di=xa,fi=mi[jr],Ma=fi[0],xa=fi[1],Di<=tn?xa>tn&&(Ma-Hi)*(tn-Di)>(xa-Di)*(we-Hi)&&++dr:xa<=tn&&(Ma-Hi)*(tn-Di)<(xa-Di)*(we-Hi)&&--dr;return dr}function fn(){li=yr,Kt=[],te=[],Ze=!0}function Hn(){var dr=pn(),br=Ze&&dr,Kr=(Kt=u.merge(Kt)).length;(br||Kr)&&(zr.polygonStart(),br&&(zr.lineStart(),hr(null,null,1,zr),zr.lineEnd()),Kr&&jo(Kt,Xr,dr,hr,zr),zr.polygonEnd()),li=zr,Kt=te=Le=null}function Un(){nn.point=Gn,te&&te.push(Le=[]),Fe=!0,he=!1,oe=ne=NaN}function Vn(){Kt&&(Gn(Se,Dt),zt&&he&&yr.rejoin(),Kt.push(yr.result())),nn.point=Je,he&&li.lineEnd()}function Gn(dr,br){var Kr=On(dr,br);if(te&&Le.push([dr,br]),Fe)Se=dr,Dt=br,zt=Kr,Fe=!1,Kr&&(li.lineStart(),li.point(dr,br));else if(Kr&&he)li.point(dr,br);else{var mi=[oe=Math.max(so,Math.min(io,oe)),ne=Math.max(so,Math.min(io,ne))],jr=[dr=Math.max(so,Math.min(io,dr)),br=Math.max(so,Math.min(io,br))];xs(mi,jr,we,Pe,hn,tn)?(he||(li.lineStart(),li.point(mi[0],mi[1])),li.point(jr[0],jr[1]),Kr||li.lineEnd(),Ze=!1):Kr&&(li.lineStart(),li.point(dr,br),Ze=!1)}oe=dr,ne=br,he=Kr}return nn}}var Ne=function(){var Pe=0,hn=0,tn=960,On=500,hr,Rr,Xr;return Xr={stream:function(zr){return hr&&Rr===zr?hr:hr=Gs(Pe,hn,tn,On)(Rr=zr)},extent:function(zr){return arguments.length?(Pe=+zr[0][0],hn=+zr[0][1],tn=+zr[1][0],On=+zr[1][1],hr=Rr=null,Xr):[[Pe,hn],[tn,On]]}}},se=s(),Yt=function(Pe,hn){var tn=hn[0],On=hn[1],hr=[A(tn),-M(tn),0],Rr=0,Xr=0;se.reset();for(var ni=0,zr=Pe.length;ni<zr;++ni)if(!!(yr=(li=Pe[ni]).length))for(var li,yr,Kt=li[yr-1],te=Kt[0],Le=Kt[1]/2+l,Se=A(Le),Dt=M(Le),zt=0;zt<yr;++zt,te=ne,Se=Fe,Dt=Ze,Kt=oe){var oe=li[zt],ne=oe[0],he=oe[1]/2+l,Fe=A(he),Ze=M(he),nn=ne-te,Je=nn>=0?1:-1,pn=Je*nn,fn=pn>a,Hn=Se*Fe;if(se.add(_(Hn*Je*A(pn),Dt*Ze+Hn*M(pn))),Rr+=fn?nn+Je*f:nn,fn^te>=tn^ne>=tn){var Un=it(k(Kt),k(oe));yt(Un);var Vn=it(hr,Un);yt(Vn);var Gn=(fn^nn>=0?-1:1)*K(Vn[2]);(On>Gn||On===Gn&&(Un[0]||Un[1]))&&(Xr+=fn^nn>=0?1:-1)}}return(Rr<-n||Rr<n&&se<-n)^Xr&1},Ee=s(),sn,Fn,rr,qn={sphere:U,point:U,lineStart:$r,lineEnd:U,polygonStart:U,polygonEnd:U};function $r(){qn.point=wi,qn.lineEnd=bi}function bi(){qn.point=qn.lineEnd=U}function wi(we,Pe){we*=b,Pe*=b,sn=we,Fn=A(Pe),rr=M(Pe),qn.point=Vi}function Vi(we,Pe){we*=b,Pe*=b;var hn=A(Pe),tn=M(Pe),On=g(we-sn),hr=M(On),Rr=A(On),Xr=tn*Rr,ni=rr*hn-Fn*tn*hr,zr=Fn*hn+rr*tn*hr;Ee.add(_(L(Xr*Xr+ni*ni),zr)),sn=we,Fn=hn,rr=tn}var sa=function(Pe){return Ee.reset(),ut(Pe,qn),+Ee},$a=[null,null],Ca={type:"LineString",coordinates:$a},_o=function(Pe,hn){return $a[0]=Pe,$a[1]=hn,sa(Ca)},Fa={Feature:function(Pe,hn){return vo(Pe.geometry,hn)},FeatureCollection:function(Pe,hn){for(var tn=Pe.features,On=-1,hr=tn.length;++On<hr;)if(vo(tn[On].geometry,hn))return!0;return!1}},uo={Sphere:function(){return!0},Point:function(Pe,hn){return Ja(Pe.coordinates,hn)},MultiPoint:function(Pe,hn){for(var tn=Pe.coordinates,On=-1,hr=tn.length;++On<hr;)if(Ja(tn[On],hn))return!0;return!1},LineString:function(Pe,hn){return To(Pe.coordinates,hn)},MultiLineString:function(Pe,hn){for(var tn=Pe.coordinates,On=-1,hr=tn.length;++On<hr;)if(To(tn[On],hn))return!0;return!1},Polygon:function(Pe,hn){return hs(Pe.coordinates,hn)},MultiPolygon:function(Pe,hn){for(var tn=Pe.coordinates,On=-1,hr=tn.length;++On<hr;)if(hs(tn[On],hn))return!0;return!1},GeometryCollection:function(Pe,hn){for(var tn=Pe.geometries,On=-1,hr=tn.length;++On<hr;)if(vo(tn[On],hn))return!0;return!1}};function vo(we,Pe){return we&&uo.hasOwnProperty(we.type)?uo[we.type](we,Pe):!1}function Ja(we,Pe){return _o(we,Pe)===0}function To(we,Pe){var hn=_o(we[0],we[1]),tn=_o(we[0],Pe),On=_o(Pe,we[1]);return tn+On<=hn+n}function hs(we,Pe){return!!Yt(we.map(zo),bs(Pe))}function zo(we){return we=we.map(bs),we.pop(),we}function bs(we){return[we[0]*b,we[1]*b]}var Ao=function(Pe,hn){return(Pe&&Fa.hasOwnProperty(Pe.type)?Fa[Pe.type]:vo)(Pe,hn)};function Wa(we,Pe,hn){var tn=u.range(we,Pe-n,hn).concat(Pe);return function(On){return tn.map(function(hr){return[On,hr]})}}function Rs(we,Pe,hn){var tn=u.range(we,Pe-n,hn).concat(Pe);return function(On){return tn.map(function(hr){return[hr,On]})}}function ss(){var we,Pe,hn,tn,On,hr,Rr,Xr,ni=10,zr=ni,li=90,yr=360,Kt,te,Le,Se,Dt=2.5;function zt(){return{type:"MultiLineString",coordinates:oe()}}function oe(){return u.range(x(tn/li)*li,hn,li).map(Le).concat(u.range(x(Xr/yr)*yr,Rr,yr).map(Se)).concat(u.range(x(Pe/ni)*ni,we,ni).filter(function(ne){return g(ne%li)>n}).map(Kt)).concat(u.range(x(hr/zr)*zr,On,zr).filter(function(ne){return g(ne%yr)>n}).map(te))}return zt.lines=function(){return oe().map(function(ne){return{type:"LineString",coordinates:ne}})},zt.outline=function(){return{type:"Polygon",coordinates:[Le(tn).concat(Se(Rr).slice(1),Le(hn).reverse().slice(1),Se(Xr).reverse().slice(1))]}},zt.extent=function(ne){return arguments.length?zt.extentMajor(ne).extentMinor(ne):zt.extentMinor()},zt.extentMajor=function(ne){return arguments.length?(tn=+ne[0][0],hn=+ne[1][0],Xr=+ne[0][1],Rr=+ne[1][1],tn>hn&&(ne=tn,tn=hn,hn=ne),Xr>Rr&&(ne=Xr,Xr=Rr,Rr=ne),zt.precision(Dt)):[[tn,Xr],[hn,Rr]]},zt.extentMinor=function(ne){return arguments.length?(Pe=+ne[0][0],we=+ne[1][0],hr=+ne[0][1],On=+ne[1][1],Pe>we&&(ne=Pe,Pe=we,we=ne),hr>On&&(ne=hr,hr=On,On=ne),zt.precision(Dt)):[[Pe,hr],[we,On]]},zt.step=function(ne){return arguments.length?zt.stepMajor(ne).stepMinor(ne):zt.stepMinor()},zt.stepMajor=function(ne){return arguments.length?(li=+ne[0],yr=+ne[1],zt):[li,yr]},zt.stepMinor=function(ne){return arguments.length?(ni=+ne[0],zr=+ne[1],zt):[ni,zr]},zt.precision=function(ne){return arguments.length?(Dt=+ne,Kt=Wa(hr,On,90),te=Rs(Pe,we,Dt),Le=Wa(Xr,Rr,90),Se=Rs(tn,hn,Dt),zt):Dt},zt.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function Ba(){return ss()()}var gn=function(Pe,hn){var tn=Pe[0]*b,On=Pe[1]*b,hr=hn[0]*b,Rr=hn[1]*b,Xr=M(On),ni=A(On),zr=M(Rr),li=A(Rr),yr=Xr*M(tn),Kt=Xr*A(tn),te=zr*M(hr),Le=zr*A(hr),Se=2*K(L(G(Rr-On)+Xr*zr*G(hr-tn))),Dt=A(Se),zt=Se?function(oe){var ne=A(oe*=Se)/Dt,he=A(Se-oe)/Dt,Fe=he*yr+ne*te,Ze=he*Kt+ne*Le,nn=he*ni+ne*li;return[_(Ze,Fe)*v,_(nn,L(Fe*Fe+Ze*Ze))*v]}:function(){return[tn*v,On*v]};return zt.distance=Se,zt},cr=function(Pe){return Pe},Gr=s(),Ui=s(),Ua,xo,po,ea,Qa={point:U,lineStart:U,lineEnd:U,polygonStart:function(){Qa.lineStart=Ds,Qa.lineEnd=ru},polygonEnd:function(){Qa.lineStart=Qa.lineEnd=Qa.point=U,Gr.add(g(Ui)),Ui.reset()},result:function(){var Pe=Gr/2;return Gr.reset(),Pe}};function Ds(){Qa.point=Es}function Es(we,Pe){Qa.point=Za,Ua=po=we,xo=ea=Pe}function Za(we,Pe){Ui.add(ea*we-po*Pe),po=we,ea=Pe}function ru(){Za(Ua,xo)}var Qo=Infinity,Os=Qo,$s=-Qo,Ss=$s,ps={point:rs,lineStart:U,lineEnd:U,polygonStart:U,polygonEnd:U,result:function(){var Pe=[[Qo,Os],[$s,Ss]];return $s=Ss=-(Os=Qo=Infinity),Pe}};function rs(we,Pe){we<Qo&&(Qo=we),we>$s&&($s=we),Pe<Os&&(Os=Pe),Pe>Ss&&(Ss=Pe)}var ws=0,_s=0,Tu=0,Ru=0,Mo=0,Qs=0,Du=0,Wu=0,il=0,ju,Co,ka,ba,Bo={point:uu,lineStart:Hu,lineEnd:Is,polygonStart:function(){Bo.lineStart=iu,Bo.lineEnd=Fo},polygonEnd:function(){Bo.point=uu,Bo.lineStart=Hu,Bo.lineEnd=Is},result:function(){var Pe=il?[Du/il,Wu/il]:Qs?[Ru/Qs,Mo/Qs]:Tu?[ws/Tu,_s/Tu]:[NaN,NaN];return ws=_s=Tu=Ru=Mo=Qs=Du=Wu=il=0,Pe}};function uu(we,Pe){ws+=we,_s+=Pe,++Tu}function Hu(){Bo.point=gs}function gs(we,Pe){Bo.point=qo,uu(ka=we,ba=Pe)}function qo(we,Pe){var hn=we-ka,tn=Pe-ba,On=L(hn*hn+tn*tn);Ru+=On*(ka+we)/2,Mo+=On*(ba+Pe)/2,Qs+=On,uu(ka=we,ba=Pe)}function Is(){Bo.point=uu}function iu(){Bo.point=Yu}function Fo(){Ys(ju,Co)}function Yu(we,Pe){Bo.point=Ys,uu(ju=ka=we,Co=ba=Pe)}function Ys(we,Pe){var hn=we-ka,tn=Pe-ba,On=L(hn*hn+tn*tn);Ru+=On*(ka+we)/2,Mo+=On*(ba+Pe)/2,Qs+=On,On=ba*we-ka*Pe,Du+=On*(ka+we),Wu+=On*(ba+Pe),il+=On*3,uu(ka=we,ba=Pe)}function Ka(we){this._context=we}Ka.prototype={_radius:4.5,pointRadius:function(Pe){return this._radius=Pe,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Pe,hn){switch(this._point){case 0:{this._context.moveTo(Pe,hn),this._point=1;break}case 1:{this._context.lineTo(Pe,hn);break}default:{this._context.moveTo(Pe+this._radius,hn),this._context.arc(Pe,hn,this._radius,0,f);break}}},result:U};var pl=s(),Gl,gl,Ec,Ml,ao,Au={point:U,lineStart:function(){Au.point=ml},lineEnd:function(){Gl&&qs(gl,Ec),Au.point=U},polygonStart:function(){Gl=!0},polygonEnd:function(){Gl=null},result:function(){var Pe=+pl;return pl.reset(),Pe}};function ml(we,Pe){Au.point=qs,gl=Ml=we,Ec=ao=Pe}function qs(we,Pe){Ml-=we,ao-=Pe,pl.add(L(Ml*Ml+ao*ao)),Ml=we,ao=Pe}function Bu(){this._string=[]}Bu.prototype={_radius:4.5,_circle:vu(4.5),pointRadius:function(Pe){return(Pe=+Pe)!==this._radius&&(this._radius=Pe,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Pe,hn){switch(this._point){case 0:{this._string.push("M",Pe,",",hn),this._point=1;break}case 1:{this._string.push("L",Pe,",",hn);break}default:{this._circle==null&&(this._circle=vu(this._radius)),this._string.push("M",Pe,",",hn,this._circle);break}}},result:function(){if(this._string.length){var Pe=this._string.join("");return this._string=[],Pe}else return null}};function vu(we){return"m0,"+we+"a"+we+","+we+" 0 1,1 0,"+-2*we+"a"+we+","+we+" 0 1,1 0,"+2*we+"z"}var pu=function(Pe,hn){var tn=4.5,On,hr;function Rr(Xr){return Xr&&(typeof tn=="function"&&hr.pointRadius(+tn.apply(this,arguments)),ut(Xr,On(hr))),hr.result()}return Rr.area=function(Xr){return ut(Xr,On(Qa)),Qa.result()},Rr.measure=function(Xr){return ut(Xr,On(Au)),Au.result()},Rr.bounds=function(Xr){return ut(Xr,On(ps)),ps.result()},Rr.centroid=function(Xr){return ut(Xr,On(Bo)),Bo.result()},Rr.projection=function(Xr){return arguments.length?(On=Xr==null?(Pe=null,cr):(Pe=Xr).stream,Rr):Pe},Rr.context=function(Xr){return arguments.length?(hr=Xr==null?(hn=null,new Bu):new Ka(hn=Xr),typeof tn!="function"&&hr.pointRadius(tn),Rr):hn},Rr.pointRadius=function(Xr){return arguments.length?(tn=typeof Xr=="function"?Xr:(hr.pointRadius(+Xr),+Xr),Rr):tn},Rr.projection(Pe).context(hn)},Zs=function(Pe,hn,tn,On){return function(hr,Rr){var Xr=hn(Rr),ni=hr.invert(On[0],On[1]),zr=Do(),li=hn(zr),yr=!1,Kt,te,Le,Se={point:Dt,lineStart:oe,lineEnd:ne,polygonStart:function(){Se.point=he,Se.lineStart=Fe,Se.lineEnd=Ze,te=[],Kt=[]},polygonEnd:function(){Se.point=Dt,Se.lineStart=oe,Se.lineEnd=ne,te=u.merge(te);var Je=Yt(Kt,ni);te.length?(yr||(Rr.polygonStart(),yr=!0),jo(te,Ms,Je,tn,Rr)):Je&&(yr||(Rr.polygonStart(),yr=!0),Rr.lineStart(),tn(null,null,1,Rr),Rr.lineEnd()),yr&&(Rr.polygonEnd(),yr=!1),te=Kt=null},sphere:function(){Rr.polygonStart(),Rr.lineStart(),tn(null,null,1,Rr),Rr.lineEnd(),Rr.polygonEnd()}};function Dt(nn,Je){var pn=hr(nn,Je);Pe(nn=pn[0],Je=pn[1])&&Rr.point(nn,Je)}function zt(nn,Je){var pn=hr(nn,Je);Xr.point(pn[0],pn[1])}function oe(){Se.point=zt,Xr.lineStart()}function ne(){Se.point=Dt,Xr.lineEnd()}function he(nn,Je){Le.push([nn,Je]);var pn=hr(nn,Je);li.point(pn[0],pn[1])}function Fe(){li.lineStart(),Le=[]}function Ze(){he(Le[0][0],Le[0][1]),li.lineEnd();var nn=li.clean(),Je=zr.result(),pn,fn=Je.length,Hn,Un,Vn;if(Le.pop(),Kt.push(Le),Le=null,!!fn){if(nn&1){if(Un=Je[0],(Hn=Un.length-1)>0){for(yr||(Rr.polygonStart(),yr=!0),Rr.lineStart(),pn=0;pn<Hn;++pn)Rr.point((Vn=Un[pn])[0],Vn[1]);Rr.lineEnd()}return}fn>1&&nn&2&&Je.push(Je.pop().concat(Je.shift())),te.push(Je.filter(ds))}}return Se}};function ds(we){return we.length>1}function Ms(we,Pe){return((we=we.x)[0]<0?we[1]-o-n:o-we[1])-((Pe=Pe.x)[0]<0?Pe[1]-o-n:o-Pe[1])}var al=Zs(function(){return!0},Pl,Nu,[-a,-o]);function Pl(we){var Pe=NaN,hn=NaN,tn=NaN,On;return{lineStart:function(){we.lineStart(),On=1},point:function(Rr,Xr){var ni=Rr>0?a:-a,zr=g(Rr-Pe);g(zr-a)<n?(we.point(Pe,hn=(hn+Xr)/2>0?o:-o),we.point(tn,hn),we.lineEnd(),we.lineStart(),we.point(ni,hn),we.point(Rr,hn),On=0):tn!==ni&&zr>=a&&(g(Pe-tn)<n&&(Pe-=tn*n),g(Rr-ni)<n&&(Rr-=ni*n),hn=jl(Pe,hn,Rr,Xr),we.point(tn,hn),we.lineEnd(),we.lineStart(),we.point(ni,hn),On=0),we.point(Pe=Rr,hn=Xr),tn=ni},lineEnd:function(){we.lineEnd(),Pe=hn=NaN},clean:function(){return 2-On}}}function jl(we,Pe,hn,tn){var On,hr,Rr=A(we-hn);return g(Rr)>n?m((A(Pe)*(hr=M(tn))*A(hn)-A(tn)*(On=M(Pe))*A(we))/(On*hr*Rr)):(Pe+tn)/2}function Nu(we,Pe,hn,tn){var On;if(we==null)On=hn*o,tn.point(-a,On),tn.point(0,On),tn.point(a,On),tn.point(a,0),tn.point(a,-On),tn.point(0,-On),tn.point(-a,-On),tn.point(-a,0),tn.point(-a,On);else if(g(we[0]-Pe[0])>n){var hr=we[0]<Pe[0]?a:-a;On=hn*hr/2,tn.point(-hr,On),tn.point(0,On),tn.point(hr,On)}else tn.point(Pe[0],Pe[1])}var Zu=function(Pe,hn){var tn=M(Pe),On=tn>0,hr=g(tn)>n;function Rr(yr,Kt,te,Le){ro(Le,Pe,hn,te,yr,Kt)}function Xr(yr,Kt){return M(yr)*M(Kt)>tn}function ni(yr){var Kt,te,Le,Se,Dt;return{lineStart:function(){Se=Le=!1,Dt=1},point:function(oe,ne){var he=[oe,ne],Fe,Ze=Xr(oe,ne),nn=On?Ze?0:li(oe,ne):Ze?li(oe+(oe<0?a:-a),ne):0;if(!Kt&&(Se=Le=Ze)&&yr.lineStart(),Ze!==Le&&(Fe=zr(Kt,he),(!Fe||Ra(Kt,Fe)||Ra(he,Fe))&&(he[0]+=n,he[1]+=n,Ze=Xr(he[0],he[1]))),Ze!==Le)Dt=0,Ze?(yr.lineStart(),Fe=zr(he,Kt),yr.point(Fe[0],Fe[1])):(Fe=zr(Kt,he),yr.point(Fe[0],Fe[1]),yr.lineEnd()),Kt=Fe;else if(hr&&Kt&&On^Ze){var Je;!(nn&te)&&(Je=zr(he,Kt,!0))&&(Dt=0,On?(yr.lineStart(),yr.point(Je[0][0],Je[0][1]),yr.point(Je[1][0],Je[1][1]),yr.lineEnd()):(yr.point(Je[1][0],Je[1][1]),yr.lineEnd(),yr.lineStart(),yr.point(Je[0][0],Je[0][1])))}Ze&&(!Kt||!Ra(Kt,he))&&yr.point(he[0],he[1]),Kt=he,Le=Ze,te=nn},lineEnd:function(){Le&&yr.lineEnd(),Kt=null},clean:function(){return Dt|(Se&&Le)<<1}}}function zr(yr,Kt,te){var Le=k(yr),Se=k(Kt),Dt=[1,0,0],zt=it(Le,Se),oe=ot(zt,zt),ne=zt[0],he=oe-ne*ne;if(!he)return!te&&yr;var Fe=tn*oe/he,Ze=-tn*ne/he,nn=it(Dt,zt),Je=_t(Dt,Fe),pn=_t(zt,Ze);$(Je,pn);var fn=nn,Hn=ot(Je,fn),Un=ot(fn,fn),Vn=Hn*Hn-Un*(ot(Je,Je)-1);if(!(Vn<0)){var Gn=L(Vn),dr=_t(fn,(-Hn-Gn)/Un);if($(dr,Je),dr=xt(dr),!te)return dr;var br=yr[0],Kr=Kt[0],mi=yr[1],jr=Kt[1],oi;Kr<br&&(oi=br,br=Kr,Kr=oi);var fi=Kr-br,Hi=g(fi-a)<n,Di=Hi||fi<n;if(!Hi&&jr<mi&&(oi=mi,mi=jr,jr=oi),Di?Hi?mi+jr>0^dr[1]<(g(dr[0]-br)<n?mi:jr):mi<=dr[1]&&dr[1]<=jr:fi>a^(br<=dr[0]&&dr[0]<=Kr)){var Ma=_t(fn,(-Hn+Gn)/Un);return $(Ma,Je),[dr,xt(Ma)]}}}function li(yr,Kt){var te=On?Pe:a-Pe,Le=0;return yr<-te?Le|=1:yr>te&&(Le|=2),Kt<-te?Le|=4:Kt>te&&(Le|=8),Le}return Zs(Xr,ni,Rr,On?[0,-Pe]:[-a,Pe-a])},ol=function(Pe){return{stream:gu(Pe)}};function gu(we){return function(Pe){var hn=new au;for(var tn in we)hn[tn]=we[tn];return hn.stream=Pe,hn}}function au(){}au.prototype={constructor:au,point:function(Pe,hn){this.stream.point(Pe,hn)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ku(we,Pe,hn){var tn=Pe[1][0]-Pe[0][0],On=Pe[1][1]-Pe[0][1],hr=we.clipExtent&&we.clipExtent();we.scale(150).translate([0,0]),hr!=null&&we.clipExtent(null),ut(hn,we.stream(ps));var Rr=ps.result(),Xr=Math.min(tn/(Rr[1][0]-Rr[0][0]),On/(Rr[1][1]-Rr[0][1])),ni=+Pe[0][0]+(tn-Xr*(Rr[1][0]+Rr[0][0]))/2,zr=+Pe[0][1]+(On-Xr*(Rr[1][1]+Rr[0][1]))/2;return hr!=null&&we.clipExtent(hr),we.scale(Xr*150).translate([ni,zr])}function Ls(we,Pe,hn){return Ku(we,[[0,0],Pe],hn)}var yl=16,ic=M(30*b),Tl=function(Pe,hn){return+hn?Vl(Pe,hn):Bl(Pe)};function Bl(we){return gu({point:function(hn,tn){hn=we(hn,tn),this.stream.point(hn[0],hn[1])}})}function Vl(we,Pe){function hn(tn,On,hr,Rr,Xr,ni,zr,li,yr,Kt,te,Le,Se,Dt){var zt=zr-tn,oe=li-On,ne=zt*zt+oe*oe;if(ne>4*Pe&&Se--){var he=Rr+Kt,Fe=Xr+te,Ze=ni+Le,nn=L(he*he+Fe*Fe+Ze*Ze),Je=K(Ze/=nn),pn=g(g(Ze)-1)<n||g(hr-yr)<n?(hr+yr)/2:_(Fe,he),fn=we(pn,Je),Hn=fn[0],Un=fn[1],Vn=Hn-tn,Gn=Un-On,dr=oe*Vn-zt*Gn;(dr*dr/ne>Pe||g((zt*Vn+oe*Gn)/ne-.5)>.3||Rr*Kt+Xr*te+ni*Le<ic)&&(hn(tn,On,hr,Rr,Xr,ni,Hn,Un,pn,he/=nn,Fe/=nn,Ze,Se,Dt),Dt.point(Hn,Un),hn(Hn,Un,pn,he,Fe,Ze,zr,li,yr,Kt,te,Le,Se,Dt))}}return function(tn){var On,hr,Rr,Xr,ni,zr,li,yr,Kt,te,Le,Se,Dt={point:zt,lineStart:oe,lineEnd:he,polygonStart:function(){tn.polygonStart(),Dt.lineStart=Fe},polygonEnd:function(){tn.polygonEnd(),Dt.lineStart=oe}};function zt(Je,pn){Je=we(Je,pn),tn.point(Je[0],Je[1])}function oe(){yr=NaN,Dt.point=ne,tn.lineStart()}function ne(Je,pn){var fn=k([Je,pn]),Hn=we(Je,pn);hn(yr,Kt,li,te,Le,Se,yr=Hn[0],Kt=Hn[1],li=Je,te=fn[0],Le=fn[1],Se=fn[2],yl,tn),tn.point(yr,Kt)}function he(){Dt.point=zt,tn.lineEnd()}function Fe(){oe(),Dt.point=Ze,Dt.lineEnd=nn}function Ze(Je,pn){ne(On=Je,pn),hr=yr,Rr=Kt,Xr=te,ni=Le,zr=Se,Dt.point=ne}function nn(){hn(yr,Kt,li,te,Le,Se,hr,Rr,On,Xr,ni,zr,yl,tn),Dt.lineEnd=he,he()}return Dt}}var pc=gu({point:function(Pe,hn){this.stream.point(Pe*b,hn*b)}});function Xu(we){return Al(function(){return we})()}function Al(we){var Pe,hn=150,tn=480,On=250,hr,Rr,Xr=0,ni=0,zr=0,li=0,yr=0,Kt,te,Le=null,Se=al,Dt=null,zt,oe,ne,he=cr,Fe=.5,Ze=Tl(Hn,Fe),nn,Je;function pn(Gn){return Gn=te(Gn[0]*b,Gn[1]*b),[Gn[0]*hn+hr,Rr-Gn[1]*hn]}function fn(Gn){return Gn=te.invert((Gn[0]-hr)/hn,(Rr-Gn[1])/hn),Gn&&[Gn[0]*v,Gn[1]*v]}function Hn(Gn,dr){return Gn=Pe(Gn,dr),[Gn[0]*hn+hr,Rr-Gn[1]*hn]}pn.stream=function(Gn){return nn&&Je===Gn?nn:nn=pc(Se(Kt,Ze(he(Je=Gn))))},pn.clipAngle=function(Gn){return arguments.length?(Se=+Gn?Zu(Le=Gn*b,6*b):(Le=null,al),Vn()):Le*v},pn.clipExtent=function(Gn){return arguments.length?(he=Gn==null?(Dt=zt=oe=ne=null,cr):Gs(Dt=+Gn[0][0],zt=+Gn[0][1],oe=+Gn[1][0],ne=+Gn[1][1]),Vn()):Dt==null?null:[[Dt,zt],[oe,ne]]},pn.scale=function(Gn){return arguments.length?(hn=+Gn,Un()):hn},pn.translate=function(Gn){return arguments.length?(tn=+Gn[0],On=+Gn[1],Un()):[tn,On]},pn.center=function(Gn){return arguments.length?(Xr=Gn[0]%360*b,ni=Gn[1]%360*b,Un()):[Xr*v,ni*v]},pn.rotate=function(Gn){return arguments.length?(zr=Gn[0]%360*b,li=Gn[1]%360*b,yr=Gn.length>2?Gn[2]%360*b:0,Un()):[zr*v,li*v,yr*v]},pn.precision=function(Gn){return arguments.length?(Ze=Tl(Hn,Fe=Gn*Gn),Vn()):L(Fe)},pn.fitExtent=function(Gn,dr){return Ku(pn,Gn,dr)},pn.fitSize=function(Gn,dr){return Ls(pn,Gn,dr)};function Un(){te=Fr(Kt=Ta(zr,li,yr),Pe);var Gn=Pe(Xr,ni);return hr=tn-Gn[0]*hn,Rr=On+Gn[1]*hn,Vn()}function Vn(){return nn=Je=null,pn}return function(){return Pe=we.apply(this,arguments),pn.invert=Pe.invert&&fn,Un()}}function Nl(we){var Pe=0,hn=a/3,tn=Al(we),On=tn(Pe,hn);return On.parallels=function(hr){return arguments.length?tn(Pe=hr[0]*b,hn=hr[1]*b):[Pe*v,hn*v]},On}function Oo(we){var Pe=M(we);function hn(tn,On){return[tn*Pe,A(On)/Pe]}return hn.invert=function(tn,On){return[tn/Pe,K(On*Pe)]},hn}function go(we,Pe){var hn=A(we),tn=(hn+A(Pe))/2;if(g(tn)<n)return Oo(we);var On=1+hn*(2*tn-hn),hr=L(On)/tn;function Rr(Xr,ni){var zr=L(On-2*tn*A(ni))/tn;return[zr*A(Xr*=tn),hr-zr*M(Xr)]}return Rr.invert=function(Xr,ni){var zr=hr-ni;return[_(Xr,g(zr))/tn*O(zr),K((On-(Xr*Xr+zr*zr)*tn*tn)/(2*tn))]},Rr}var xl=function(){return Nl(go).scale(155.424).center([0,33.6442])},sl=function(){return xl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function Vs(we){var Pe=we.length;return{point:function(tn,On){for(var hr=-1;++hr<Pe;)we[hr].point(tn,On)},sphere:function(){for(var tn=-1;++tn<Pe;)we[tn].sphere()},lineStart:function(){for(var tn=-1;++tn<Pe;)we[tn].lineStart()},lineEnd:function(){for(var tn=-1;++tn<Pe;)we[tn].lineEnd()},polygonStart:function(){for(var tn=-1;++tn<Pe;)we[tn].polygonStart()},polygonEnd:function(){for(var tn=-1;++tn<Pe;)we[tn].polygonEnd()}}}var Da=function(){var Pe,hn,tn=sl(),On,hr=xl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Rr,Xr=xl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),ni,zr,li={point:function(Le,Se){zr=[Le,Se]}};function yr(te){var Le=te[0],Se=te[1];return zr=null,On.point(Le,Se),zr||(Rr.point(Le,Se),zr)||(ni.point(Le,Se),zr)}yr.invert=function(te){var Le=tn.scale(),Se=tn.translate(),Dt=(te[0]-Se[0])/Le,zt=(te[1]-Se[1])/Le;return(zt>=.12&&zt<.234&&Dt>=-.425&&Dt<-.214?hr:zt>=.166&&zt<.234&&Dt>=-.214&&Dt<-.115?Xr:tn).invert(te)},yr.stream=function(te){return Pe&&hn===te?Pe:Pe=Vs([tn.stream(hn=te),hr.stream(te),Xr.stream(te)])},yr.precision=function(te){return arguments.length?(tn.precision(te),hr.precision(te),Xr.precision(te),Kt()):tn.precision()},yr.scale=function(te){return arguments.length?(tn.scale(te),hr.scale(te*.35),Xr.scale(te),yr.translate(tn.translate())):tn.scale()},yr.translate=function(te){if(!arguments.length)return tn.translate();var Le=tn.scale(),Se=+te[0],Dt=+te[1];return On=tn.translate(te).clipExtent([[Se-.455*Le,Dt-.238*Le],[Se+.455*Le,Dt+.238*Le]]).stream(li),Rr=hr.translate([Se-.307*Le,Dt+.201*Le]).clipExtent([[Se-.425*Le+n,Dt+.12*Le+n],[Se-.214*Le-n,Dt+.234*Le-n]]).stream(li),ni=Xr.translate([Se-.205*Le,Dt+.212*Le]).clipExtent([[Se-.214*Le+n,Dt+.166*Le+n],[Se-.115*Le-n,Dt+.234*Le-n]]).stream(li),Kt()},yr.fitExtent=function(te,Le){return Ku(yr,te,Le)},yr.fitSize=function(te,Le){return Ls(yr,te,Le)};function Kt(){return Pe=hn=null,yr}return yr.scale(1070)};function bo(we){return function(Pe,hn){var tn=M(Pe),On=M(hn),hr=we(tn*On);return[hr*On*A(Pe),hr*A(hn)]}}function Ns(we){return function(Pe,hn){var tn=L(Pe*Pe+hn*hn),On=we(tn),hr=A(On),Rr=M(On);return[_(Pe*hr,tn*Rr),K(tn&&hn*hr/tn)]}}var Cl=bo(function(we){return L(2/(1+we))});Cl.invert=Ns(function(we){return 2*K(we/2)});var ul=function(){return Xu(Cl).scale(124.75).clipAngle(180-.001)},Ju=bo(function(we){return(we=F(we))&&we/A(we)});Ju.invert=Ns(function(we){return we});var Sc=function(){return Xu(Ju).scale(79.4188).clipAngle(180-.001)};function Wl(we,Pe){return[we,S(H((o+Pe)/2))]}Wl.invert=function(we,Pe){return[we,2*m(y(Pe))-o]};var $u=function(){return tu(Wl).scale(961/f)};function tu(we){var Pe=Xu(we),hn=Pe.center,tn=Pe.scale,On=Pe.translate,hr=Pe.clipExtent,Rr=null,Xr,ni,zr;Pe.scale=function(yr){return arguments.length?(tn(yr),li()):tn()},Pe.translate=function(yr){return arguments.length?(On(yr),li()):On()},Pe.center=function(yr){return arguments.length?(hn(yr),li()):hn()},Pe.clipExtent=function(yr){return arguments.length?(yr==null?Rr=Xr=ni=zr=null:(Rr=+yr[0][0],Xr=+yr[0][1],ni=+yr[1][0],zr=+yr[1][1]),li()):Rr==null?null:[[Rr,Xr],[ni,zr]]};function li(){var yr=a*tn(),Kt=Pe(Ro(Pe.rotate()).invert([0,0]));return hr(Rr==null?[[Kt[0]-yr,Kt[1]-yr],[Kt[0]+yr,Kt[1]+yr]]:we===Wl?[[Math.max(Kt[0]-yr,Rr),Xr],[Math.min(Kt[0]+yr,ni),zr]]:[[Rr,Math.max(Kt[1]-yr,Xr)],[ni,Math.min(Kt[1]+yr,zr)]])}return li()}function Ws(we){return H((o+we)/2)}function is(we,Pe){var hn=M(we),tn=we===Pe?A(we):S(hn/M(Pe))/S(Ws(Pe)/Ws(we)),On=hn*P(Ws(we),tn)/tn;if(!tn)return Wl;function hr(Rr,Xr){On>0?Xr<-o+n&&(Xr=-o+n):Xr>o-n&&(Xr=o-n);var ni=On/P(Ws(Xr),tn);return[ni*A(tn*Rr),On-ni*M(tn*Rr)]}return hr.invert=function(Rr,Xr){var ni=On-Xr,zr=O(tn)*L(Rr*Rr+ni*ni);return[_(Rr,g(ni))/tn*O(ni),2*m(P(On/zr,1/tn))-o]},hr}var eu=function(){return Nl(is).scale(109.5).parallels([30,30])};function Fu(we,Pe){return[we,Pe]}Fu.invert=Fu;var us=function(){return Xu(Fu).scale(152.63)};function Wi(we,Pe){var hn=M(we),tn=we===Pe?A(we):(hn-M(Pe))/(Pe-we),On=hn/tn+we;if(g(tn)<n)return Fu;function hr(Rr,Xr){var ni=On-Xr,zr=tn*Rr;return[ni*A(zr),On-ni*M(zr)]}return hr.invert=function(Rr,Xr){var ni=On-Xr;return[_(Rr,g(ni))/tn*O(ni),On-O(tn)*L(Rr*Rr+ni*ni)]},hr}var js=function(){return Nl(Wi).scale(131.154).center([0,13.9389])};function Qu(we,Pe){var hn=M(Pe),tn=M(we)*hn;return[hn*A(we)/tn,A(Pe)/tn]}Qu.invert=Ns(m);var zu=function(){return Xu(Qu).scale(144.049).clipAngle(60)};function Uo(we,Pe,hn,tn){return we===1&&Pe===1&&hn===0&&tn===0?cr:gu({point:function(hr,Rr){this.stream.point(hr*we+hn,Rr*Pe+tn)}})}var Wo=function(){var Pe=1,hn=0,tn=0,On=1,hr=1,Rr=cr,Xr=null,ni,zr,li,yr=cr,Kt,te,Le;function Se(){return Kt=te=null,Le}return Le={stream:function(zt){return Kt&&te===zt?Kt:Kt=Rr(yr(te=zt))},clipExtent:function(zt){return arguments.length?(yr=zt==null?(Xr=ni=zr=li=null,cr):Gs(Xr=+zt[0][0],ni=+zt[0][1],zr=+zt[1][0],li=+zt[1][1]),Se()):Xr==null?null:[[Xr,ni],[zr,li]]},scale:function(zt){return arguments.length?(Rr=Uo((Pe=+zt)*On,Pe*hr,hn,tn),Se()):Pe},translate:function(zt){return arguments.length?(Rr=Uo(Pe*On,Pe*hr,hn=+zt[0],tn=+zt[1]),Se()):[hn,tn]},reflectX:function(zt){return arguments.length?(Rr=Uo(Pe*(On=zt?-1:1),Pe*hr,hn,tn),Se()):On<0},reflectY:function(zt){return arguments.length?(Rr=Uo(Pe*On,Pe*(hr=zt?-1:1),hn,tn),Se()):hr<0},fitExtent:function(zt,oe){return Ku(Le,zt,oe)},fitSize:function(zt,oe){return Ls(Le,zt,oe)}}};function mu(we,Pe){return[M(Pe)*A(we),A(Pe)]}mu.invert=Ns(K);var _i=function(){return Xu(mu).scale(249.5).clipAngle(90+n)};function yu(we,Pe){var hn=M(Pe),tn=1+M(we)*hn;return[hn*A(we)/tn,A(Pe)/tn]}yu.invert=Ns(function(we){return 2*m(we)});var Cu=function(){return Xu(yu).scale(250).clipAngle(142)};function Ou(we,Pe){return[S(H((o+Pe)/2)),-we]}Ou.invert=function(we,Pe){return[-Pe,2*m(y(we))-o]};var Ks=function(){var Pe=tu(Ou),hn=Pe.center,tn=Pe.rotate;return Pe.center=function(On){return arguments.length?hn([-On[1],On[0]]):(On=hn(),[On[1],-On[0]])},Pe.rotate=function(On){return arguments.length?tn([On[0],On[1],On.length>2?On[2]+90:90]):(On=tn(),[On[0],On[1],On[2]-90])},tn([0,0,90]).scale(159.155)};t.geoArea=at,t.geoBounds=Qt,t.geoCentroid=xr,t.geoCircle=Jo,t.geoClipExtent=Ne,t.geoContains=Ao,t.geoDistance=_o,t.geoGraticule=ss,t.geoGraticule10=Ba,t.geoInterpolate=gn,t.geoLength=sa,t.geoPath=pu,t.geoAlbers=sl,t.geoAlbersUsa=Da,t.geoAzimuthalEqualArea=ul,t.geoAzimuthalEqualAreaRaw=Cl,t.geoAzimuthalEquidistant=Sc,t.geoAzimuthalEquidistantRaw=Ju,t.geoConicConformal=eu,t.geoConicConformalRaw=is,t.geoConicEqualArea=xl,t.geoConicEqualAreaRaw=go,t.geoConicEquidistant=js,t.geoConicEquidistantRaw=Wi,t.geoEquirectangular=us,t.geoEquirectangularRaw=Fu,t.geoGnomonic=zu,t.geoGnomonicRaw=Qu,t.geoIdentity=Wo,t.geoProjection=Xu,t.geoProjectionMutator=Al,t.geoMercator=$u,t.geoMercatorRaw=Wl,t.geoOrthographic=_i,t.geoOrthographicRaw=mu,t.geoStereographic=Cu,t.geoStereographicRaw=yu,t.geoTransverseMercator=Ks,t.geoTransverseMercatorRaw=Ou,t.geoRotation=Ro,t.geoStream=ut,t.geoTransform=ol,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@2.0.1@d3-geo/dist/d3-geo.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-array@2.11.0@d3-array/dist/d3-array.js"))})(this,function(t,u){"use strict";var s=1e-6,c=1e-12,r=Math.PI,h=r/2,n=r/4,i=r*2,a=180/r,o=r/180,l=Math.abs,f=Math.atan,v=Math.atan2,b=Math.cos,g=Math.ceil,m=Math.exp,_=Math.hypot,M=Math.log,x=Math.pow,y=Math.sin,S=Math.sign||function(Kt){return Kt>0?1:Kt<0?-1:0},P=Math.sqrt,A=Math.tan;function O(Kt){return Kt>1?0:Kt<-1?r:Math.acos(Kt)}function L(Kt){return Kt>1?h:Kt<-1?-h:Math.asin(Kt)}function H(Kt){return(Kt=y(Kt/2))*Kt}function F(){}function K(Kt,te){Kt&&U.hasOwnProperty(Kt.type)&&U[Kt.type](Kt,te)}var G={Feature:function(te,Le){K(te.geometry,Le)},FeatureCollection:function(te,Le){for(var Se=te.features,Dt=-1,zt=Se.length;++Dt<zt;)K(Se[Dt].geometry,Le)}},U={Sphere:function(te,Le){Le.sphere()},Point:function(te,Le){te=te.coordinates,Le.point(te[0],te[1],te[2])},MultiPoint:function(te,Le){for(var Se=te.coordinates,Dt=-1,zt=Se.length;++Dt<zt;)te=Se[Dt],Le.point(te[0],te[1],te[2])},LineString:function(te,Le){Z(te.coordinates,Le,0)},MultiLineString:function(te,Le){for(var Se=te.coordinates,Dt=-1,zt=Se.length;++Dt<zt;)Z(Se[Dt],Le,0)},Polygon:function(te,Le){J(te.coordinates,Le)},MultiPolygon:function(te,Le){for(var Se=te.coordinates,Dt=-1,zt=Se.length;++Dt<zt;)J(Se[Dt],Le)},GeometryCollection:function(te,Le){for(var Se=te.geometries,Dt=-1,zt=Se.length;++Dt<zt;)K(Se[Dt],Le)}};function Z(Kt,te,Le){var Se=-1,Dt=Kt.length-Le,zt;for(te.lineStart();++Se<Dt;)zt=Kt[Se],te.point(zt[0],zt[1],zt[2]);te.lineEnd()}function J(Kt,te){var Le=-1,Se=Kt.length;for(te.polygonStart();++Le<Se;)Z(Kt[Le],te,1);te.polygonEnd()}function rt(Kt,te){Kt&&G.hasOwnProperty(Kt.type)?G[Kt.type](Kt,te):K(Kt,te)}var vt=new u.Adder,mt=new u.Adder,ut,Rt,Ft,wt,Mt,St={point:F,lineStart:F,lineEnd:F,polygonStart:function(){vt=new u.Adder,St.lineStart=At,St.lineEnd=nt},polygonEnd:function(){var te=+vt;mt.add(te<0?i+te:te),this.lineStart=this.lineEnd=this.point=F},sphere:function(){mt.add(i)}};function At(){St.point=Pt}function nt(){z(ut,Rt)}function Pt(Kt,te){St.point=z,ut=Kt,Rt=te,Kt*=o,te*=o,Ft=Kt,wt=b(te=te/2+n),Mt=y(te)}function z(Kt,te){Kt*=o,te*=o,te=te/2+n;var Le=Kt-Ft,Se=Le>=0?1:-1,Dt=Se*Le,zt=b(te),oe=y(te),ne=Mt*oe,he=wt*zt+ne*b(Dt),Fe=ne*Se*y(Dt);vt.add(v(Fe,he)),Ft=Kt,wt=zt,Mt=oe}function q(Kt){return mt=new u.Adder,rt(Kt,St),mt*2}function gt(Kt){return[v(Kt[1],Kt[0]),L(Kt[2])]}function et(Kt){var te=Kt[0],Le=Kt[1],Se=b(Le);return[Se*b(te),Se*y(te),y(Le)]}function at(Kt,te){return Kt[0]*te[0]+Kt[1]*te[1]+Kt[2]*te[2]}function xt(Kt,te){return[Kt[1]*te[2]-Kt[2]*te[1],Kt[2]*te[0]-Kt[0]*te[2],Kt[0]*te[1]-Kt[1]*te[0]]}function k(Kt,te){Kt[0]+=te[0],Kt[1]+=te[1],Kt[2]+=te[2]}function ot(Kt,te){return[Kt[0]*te,Kt[1]*te,Kt[2]*te]}function it(Kt){var te=P(Kt[0]*Kt[0]+Kt[1]*Kt[1]+Kt[2]*Kt[2]);Kt[0]/=te,Kt[1]/=te,Kt[2]/=te}var $,_t,yt,Nt,$t,ee,Gt,Ht,ae,le,Be,Ce={point:We,lineStart:wn,lineEnd:er,polygonStart:function(){Ce.point=Lr,Ce.lineStart=on,Ce.lineEnd=en,ae=new u.Adder,St.polygonStart()},polygonEnd:function(){St.polygonEnd(),Ce.point=We,Ce.lineStart=wn,Ce.lineEnd=er,vt<0?($=-(yt=180),_t=-(Nt=90)):ae>s?Nt=90:ae<-s&&(_t=-90),Be[0]=$,Be[1]=yt},sphere:function(){$=-(yt=180),_t=-(Nt=90)}};function We(Kt,te){le.push(Be=[$=Kt,yt=Kt]),te<_t&&(_t=te),te>Nt&&(Nt=te)}function Ye(Kt,te){var Le=et([Kt*o,te*o]);if(Ht){var Se=xt(Ht,Le),Dt=[Se[1],-Se[0],0],zt=xt(Dt,Se);it(zt),zt=gt(zt);var oe=Kt-$t,ne=oe>0?1:-1,he=zt[0]*a*ne,Fe,Ze=l(oe)>180;Ze^(ne*$t<he&&he<ne*Kt)?(Fe=zt[1]*a,Fe>Nt&&(Nt=Fe)):(he=(he+360)%360-180,Ze^(ne*$t<he&&he<ne*Kt)?(Fe=-zt[1]*a,Fe<_t&&(_t=Fe)):(te<_t&&(_t=te),te>Nt&&(Nt=te))),Ze?Kt<$t?An($,Kt)>An($,yt)&&(yt=Kt):An(Kt,yt)>An($,yt)&&($=Kt):yt>=$?(Kt<$&&($=Kt),Kt>yt&&(yt=Kt)):Kt>$t?An($,Kt)>An($,yt)&&(yt=Kt):An(Kt,yt)>An($,yt)&&($=Kt)}else le.push(Be=[$=Kt,yt=Kt]);te<_t&&(_t=te),te>Nt&&(Nt=te),Ht=Le,$t=Kt}function wn(){Ce.point=Ye}function er(){Be[0]=$,Be[1]=yt,Ce.point=We,Ht=null}function Lr(Kt,te){if(Ht){var Le=Kt-$t;ae.add(l(Le)>180?Le+(Le>0?360:-360):Le)}else ee=Kt,Gt=te;St.point(Kt,te),Ye(Kt,te)}function on(){St.lineStart()}function en(){Lr(ee,Gt),St.lineEnd(),l(ae)>s&&($=-(yt=180)),Be[0]=$,Be[1]=yt,Ht=null}function An(Kt,te){return(te-=Kt)<0?te+360:te}function Bn(Kt,te){return Kt[0]-te[0]}function gr(Kt,te){return Kt[0]<=Kt[1]?Kt[0]<=te&&te<=Kt[1]:te<Kt[0]||Kt[1]<te}function hi(Kt){var te,Le,Se,Dt,zt,oe,ne;if(Nt=yt=-($=_t=Infinity),le=[],rt(Kt,Ce),Le=le.length){for(le.sort(Bn),te=1,Se=le[0],zt=[Se];te<Le;++te)Dt=le[te],gr(Se,Dt[0])||gr(Se,Dt[1])?(An(Se[0],Dt[1])>An(Se[0],Se[1])&&(Se[1]=Dt[1]),An(Dt[0],Se[1])>An(Se[0],Se[1])&&(Se[0]=Dt[0])):zt.push(Se=Dt);for(oe=-Infinity,Le=zt.length-1,te=0,Se=zt[Le];te<=Le;Se=Dt,++te)Dt=zt[te],(ne=An(Se[1],Dt[0]))>oe&&(oe=ne,$=Dt[0],yt=Se[1])}return le=Be=null,$===Infinity||_t===Infinity?[[NaN,NaN],[NaN,NaN]]:[[$,_t],[yt,Nt]]}var Ae,Me,Qt,ge,Wt,re,Te,ue,be,Xe,Rn,tr,Mn,vn,Ar,or,cn={sphere:F,point:Pr,lineStart:De,lineEnd:En,polygonStart:function(){cn.lineStart=xn,cn.lineEnd=Nn},polygonEnd:function(){cn.lineStart=De,cn.lineEnd=En}};function Pr(Kt,te){Kt*=o,te*=o;var Le=b(te);Sr(Le*b(Kt),Le*y(Kt),y(te))}function Sr(Kt,te,Le){++Ae,Qt+=(Kt-Qt)/Ae,ge+=(te-ge)/Ae,Wt+=(Le-Wt)/Ae}function De(){cn.point=$e}function $e(Kt,te){Kt*=o,te*=o;var Le=b(te);vn=Le*b(Kt),Ar=Le*y(Kt),or=y(te),cn.point=Ve,Sr(vn,Ar,or)}function Ve(Kt,te){Kt*=o,te*=o;var Le=b(te),Se=Le*b(Kt),Dt=Le*y(Kt),zt=y(te),oe=v(P((oe=Ar*zt-or*Dt)*oe+(oe=or*Se-vn*zt)*oe+(oe=vn*Dt-Ar*Se)*oe),vn*Se+Ar*Dt+or*zt);Me+=oe,re+=oe*(vn+(vn=Se)),Te+=oe*(Ar+(Ar=Dt)),ue+=oe*(or+(or=zt)),Sr(vn,Ar,or)}function En(){cn.point=Pr}function xn(){cn.point=mn}function Nn(){Dn(tr,Mn),cn.point=Pr}function mn(Kt,te){tr=Kt,Mn=te,Kt*=o,te*=o,cn.point=Dn;var Le=b(te);vn=Le*b(Kt),Ar=Le*y(Kt),or=y(te),Sr(vn,Ar,or)}function Dn(Kt,te){Kt*=o,te*=o;var Le=b(te),Se=Le*b(Kt),Dt=Le*y(Kt),zt=y(te),oe=Ar*zt-or*Dt,ne=or*Se-vn*zt,he=vn*Dt-Ar*Se,Fe=_(oe,ne,he),Ze=L(Fe),nn=Fe&&-Ze/Fe;be.add(nn*oe),Xe.add(nn*ne),Rn.add(nn*he),Me+=Ze,re+=Ze*(vn+(vn=Se)),Te+=Ze*(Ar+(Ar=Dt)),ue+=Ze*(or+(or=zt)),Sr(vn,Ar,or)}function $n(Kt){Ae=Me=Qt=ge=Wt=re=Te=ue=0,be=new u.Adder,Xe=new u.Adder,Rn=new u.Adder,rt(Kt,cn);var te=+be,Le=+Xe,Se=+Rn,Dt=_(te,Le,Se);return Dt<c&&(te=re,Le=Te,Se=ue,Me<s&&(te=Qt,Le=ge,Se=Wt),Dt=_(te,Le,Se),Dt<c)?[NaN,NaN]:[v(Le,te)*a,L(Se/Dt)*a]}function Wn(Kt){return function(){return Kt}}function _n(Kt,te){function Le(Se,Dt){return Se=Kt(Se,Dt),te(Se[0],Se[1])}return Kt.invert&&te.invert&&(Le.invert=function(Se,Dt){return Se=te.invert(Se,Dt),Se&&Kt.invert(Se[0],Se[1])}),Le}function xr(Kt,te){return[l(Kt)>r?Kt+Math.round(-Kt/i)*i:Kt,te]}xr.invert=xr;function mr(Kt,te,Le){return(Kt%=i)?te||Le?_n(xi(Kt),Ta(te,Le)):xi(Kt):te||Le?Ta(te,Le):xr}function Fr(Kt){return function(te,Le){return te+=Kt,[te>r?te-i:te<-r?te+i:te,Le]}}function xi(Kt){var te=Fr(Kt);return te.invert=Fr(-Kt),te}function Ta(Kt,te){var Le=b(Kt),Se=y(Kt),Dt=b(te),zt=y(te);function oe(ne,he){var Fe=b(he),Ze=b(ne)*Fe,nn=y(ne)*Fe,Je=y(he),pn=Je*Le+Ze*Se;return[v(nn*Dt-pn*zt,Ze*Le-Je*Se),L(pn*Dt+nn*zt)]}return oe.invert=function(ne,he){var Fe=b(he),Ze=b(ne)*Fe,nn=y(ne)*Fe,Je=y(he),pn=Je*Dt-nn*zt;return[v(nn*Dt+Je*zt,Ze*Le+pn*Se),L(pn*Le-Ze*Se)]},oe}function Aa(Kt){Kt=mr(Kt[0]*o,Kt[1]*o,Kt.length>2?Kt[2]*o:0);function te(Le){return Le=Kt(Le[0]*o,Le[1]*o),Le[0]*=a,Le[1]*=a,Le}return te.invert=function(Le){return Le=Kt.invert(Le[0]*o,Le[1]*o),Le[0]*=a,Le[1]*=a,Le},te}function to(Kt,te,Le,Se,Dt,zt){if(!!Le){var oe=b(te),ne=y(te),he=Se*Le;Dt==null?(Dt=te+Se*i,zt=te-he/2):(Dt=Vo(oe,Dt),zt=Vo(oe,zt),(Se>0?Dt<zt:Dt>zt)&&(Dt+=Se*i));for(var Fe,Ze=Dt;Se>0?Ze>zt:Ze<zt;Ze-=he)Fe=gt([oe,-ne*b(Ze),-ne*y(Ze)]),Kt.point(Fe[0],Fe[1])}}function Vo(Kt,te){te=et(te),te[0]-=Kt,it(te);var Le=O(-te[1]);return((-te[2]<0?-Le:Le)+i-s)%i}function Ro(){var Kt=Wn([0,0]),te=Wn(90),Le=Wn(6),Se,Dt,zt={point:oe};function oe(he,Fe){Se.push(he=Dt(he,Fe)),he[0]*=a,he[1]*=a}function ne(){var he=Kt.apply(this,arguments),Fe=te.apply(this,arguments)*o,Ze=Le.apply(this,arguments)*o;return Se=[],Dt=mr(-he[0]*o,-he[1]*o,0).invert,to(zt,Fe,Ze,1),he={type:"Polygon",coordinates:[Se]},Se=Dt=null,he}return ne.center=function(he){return arguments.length?(Kt=typeof he=="function"?he:Wn([+he[0],+he[1]]),ne):Kt},ne.radius=function(he){return arguments.length?(te=typeof he=="function"?he:Wn(+he),ne):te},ne.precision=function(he){return arguments.length?(Le=typeof he=="function"?he:Wn(+he),ne):Le},ne}function ro(){var Kt=[],te;return{point:function(Se,Dt,zt){te.push([Se,Dt,zt])},lineStart:function(){Kt.push(te=[])},lineEnd:F,rejoin:function(){Kt.length>1&&Kt.push(Kt.pop().concat(Kt.shift()))},result:function(){var Se=Kt;return Kt=[],te=null,Se}}}function vs(Kt,te){return l(Kt[0]-te[0])<s&&l(Kt[1]-te[1])<s}function Jo(Kt,te,Le,Se){this.x=Kt,this.z=te,this.o=Le,this.e=Se,this.v=!1,this.n=this.p=null}function Do(Kt,te,Le,Se,Dt){var zt=[],oe=[],ne,he;if(Kt.forEach(function(fn){if(!((Hn=fn.length-1)<=0)){var Hn,Un=fn[0],Vn=fn[Hn],Gn;if(vs(Un,Vn)){if(!Un[2]&&!Vn[2]){for(Dt.lineStart(),ne=0;ne<Hn;++ne)Dt.point((Un=fn[ne])[0],Un[1]);Dt.lineEnd();return}Vn[0]+=2*s}zt.push(Gn=new Jo(Un,fn,null,!0)),oe.push(Gn.o=new Jo(Un,null,Gn,!1)),zt.push(Gn=new Jo(Vn,fn,null,!1)),oe.push(Gn.o=new Jo(Vn,null,Gn,!0))}}),!!zt.length){for(oe.sort(te),xs(zt),xs(oe),ne=0,he=oe.length;ne<he;++ne)oe[ne].e=Le=!Le;for(var Fe=zt[0],Ze,nn;;){for(var Je=Fe,pn=!0;Je.v;)if((Je=Je.n)===Fe)return;Ze=Je.z,Dt.lineStart();do{if(Je.v=Je.o.v=!0,Je.e){if(pn)for(ne=0,he=Ze.length;ne<he;++ne)Dt.point((nn=Ze[ne])[0],nn[1]);else Se(Je.x,Je.n.x,1,Dt);Je=Je.n}else{if(pn)for(Ze=Je.p.z,ne=Ze.length-1;ne>=0;--ne)Dt.point((nn=Ze[ne])[0],nn[1]);else Se(Je.x,Je.p.x,-1,Dt);Je=Je.p}Je=Je.o,Ze=Je.z,pn=!pn}while(!Je.v);Dt.lineEnd()}}}function xs(Kt){if(!!(te=Kt.length)){for(var te,Le=0,Se=Kt[0],Dt;++Le<te;)Se.n=Dt=Kt[Le],Dt.p=Se,Se=Dt;Se.n=Dt=Kt[0],Dt.p=Se}}function Ra(Kt){return l(Kt[0])<=r?Kt[0]:S(Kt[0])*((l(Kt[0])+r)%i-r)}function $o(Kt,te){var Le=Ra(te),Se=te[1],Dt=y(Se),zt=[y(Le),-b(Le),0],oe=0,ne=0,he=new u.Adder;Dt===1?Se=h+s:Dt===-1&&(Se=-h-s);for(var Fe=0,Ze=Kt.length;Fe<Ze;++Fe)if(!!(Je=(nn=Kt[Fe]).length))for(var nn,Je,pn=nn[Je-1],fn=Ra(pn),Hn=pn[1]/2+n,Un=y(Hn),Vn=b(Hn),Gn=0;Gn<Je;++Gn,fn=br,Un=mi,Vn=jr,pn=dr){var dr=nn[Gn],br=Ra(dr),Kr=dr[1]/2+n,mi=y(Kr),jr=b(Kr),oi=br-fn,fi=oi>=0?1:-1,Hi=fi*oi,Di=Hi>r,Ma=Un*mi;if(he.add(v(Ma*fi*y(Hi),Vn*jr+Ma*b(Hi))),oe+=Di?oi+fi*i:oi,Di^fn>=Le^br>=Le){var xa=xt(et(pn),et(dr));it(xa);var Pa=xt(zt,xa);it(Pa);var ei=(Di^oi>=0?-1:1)*L(Pa[2]);(Se>ei||Se===ei&&(xa[0]||xa[1]))&&(ne+=Di^oi>=0?1:-1)}}return(oe<-s||oe<s&&he<-c)^ne&1}function jo(Kt,te,Le,Se){return function(Dt){var zt=te(Dt),oe=ro(),ne=te(oe),he=!1,Fe,Ze,nn,Je={point:pn,lineStart:Hn,lineEnd:Un,polygonStart:function(){Je.point=Vn,Je.lineStart=Gn,Je.lineEnd=dr,Ze=[],Fe=[]},polygonEnd:function(){Je.point=pn,Je.lineStart=Hn,Je.lineEnd=Un,Ze=u.merge(Ze);var Kr=$o(Fe,Se);Ze.length?(he||(Dt.polygonStart(),he=!0),Do(Ze,io,Kr,Le,Dt)):Kr&&(he||(Dt.polygonStart(),he=!0),Dt.lineStart(),Le(null,null,1,Dt),Dt.lineEnd()),he&&(Dt.polygonEnd(),he=!1),Ze=Fe=null},sphere:function(){Dt.polygonStart(),Dt.lineStart(),Le(null,null,1,Dt),Dt.lineEnd(),Dt.polygonEnd()}};function pn(br,Kr){Kt(br,Kr)&&Dt.point(br,Kr)}function fn(br,Kr){zt.point(br,Kr)}function Hn(){Je.point=fn,zt.lineStart()}function Un(){Je.point=pn,zt.lineEnd()}function Vn(br,Kr){nn.push([br,Kr]),ne.point(br,Kr)}function Gn(){ne.lineStart(),nn=[]}function dr(){Vn(nn[0][0],nn[0][1]),ne.lineEnd();var br=ne.clean(),Kr=oe.result(),mi,jr=Kr.length,oi,fi,Hi;if(nn.pop(),Fe.push(nn),nn=null,!!jr){if(br&1){if(fi=Kr[0],(oi=fi.length-1)>0){for(he||(Dt.polygonStart(),he=!0),Dt.lineStart(),mi=0;mi<oi;++mi)Dt.point((Hi=fi[mi])[0],Hi[1]);Dt.lineEnd()}return}jr>1&&br&2&&Kr.push(Kr.pop().concat(Kr.shift())),Ze.push(Kr.filter(Js))}}return Je}}function Js(Kt){return Kt.length>1}function io(Kt,te){return((Kt=Kt.x)[0]<0?Kt[1]-h-s:h-Kt[1])-((te=te.x)[0]<0?te[1]-h-s:h-te[1])}var so=jo(function(){return!0},Gs,se,[-r,-h]);function Gs(Kt){var te=NaN,Le=NaN,Se=NaN,Dt;return{lineStart:function(){Kt.lineStart(),Dt=1},point:function(oe,ne){var he=oe>0?r:-r,Fe=l(oe-te);l(Fe-r)<s?(Kt.point(te,Le=(Le+ne)/2>0?h:-h),Kt.point(Se,Le),Kt.lineEnd(),Kt.lineStart(),Kt.point(he,Le),Kt.point(oe,Le),Dt=0):Se!==he&&Fe>=r&&(l(te-Se)<s&&(te-=Se*s),l(oe-he)<s&&(oe-=he*s),Le=Ne(te,Le,oe,ne),Kt.point(Se,Le),Kt.lineEnd(),Kt.lineStart(),Kt.point(he,Le),Dt=0),Kt.point(te=oe,Le=ne),Se=he},lineEnd:function(){Kt.lineEnd(),te=Le=NaN},clean:function(){return 2-Dt}}}function Ne(Kt,te,Le,Se){var Dt,zt,oe=y(Kt-Le);return l(oe)>s?f((y(te)*(zt=b(Se))*y(Le)-y(Se)*(Dt=b(te))*y(Kt))/(Dt*zt*oe)):(te+Se)/2}function se(Kt,te,Le,Se){var Dt;if(Kt==null)Dt=Le*h,Se.point(-r,Dt),Se.point(0,Dt),Se.point(r,Dt),Se.point(r,0),Se.point(r,-Dt),Se.point(0,-Dt),Se.point(-r,-Dt),Se.point(-r,0),Se.point(-r,Dt);else if(l(Kt[0]-te[0])>s){var zt=Kt[0]<te[0]?r:-r;Dt=Le*zt/2,Se.point(-zt,Dt),Se.point(0,Dt),Se.point(zt,Dt)}else Se.point(te[0],te[1])}function Yt(Kt){var te=b(Kt),Le=6*o,Se=te>0,Dt=l(te)>s;function zt(Ze,nn,Je,pn){to(pn,Kt,Le,Je,Ze,nn)}function oe(Ze,nn){return b(Ze)*b(nn)>te}function ne(Ze){var nn,Je,pn,fn,Hn;return{lineStart:function(){fn=pn=!1,Hn=1},point:function(Vn,Gn){var dr=[Vn,Gn],br,Kr=oe(Vn,Gn),mi=Se?Kr?0:Fe(Vn,Gn):Kr?Fe(Vn+(Vn<0?r:-r),Gn):0;if(!nn&&(fn=pn=Kr)&&Ze.lineStart(),Kr!==pn&&(br=he(nn,dr),(!br||vs(nn,br)||vs(dr,br))&&(dr[2]=1)),Kr!==pn)Hn=0,Kr?(Ze.lineStart(),br=he(dr,nn),Ze.point(br[0],br[1])):(br=he(nn,dr),Ze.point(br[0],br[1],2),Ze.lineEnd()),nn=br;else if(Dt&&nn&&Se^Kr){var jr;!(mi&Je)&&(jr=he(dr,nn,!0))&&(Hn=0,Se?(Ze.lineStart(),Ze.point(jr[0][0],jr[0][1]),Ze.point(jr[1][0],jr[1][1]),Ze.lineEnd()):(Ze.point(jr[1][0],jr[1][1]),Ze.lineEnd(),Ze.lineStart(),Ze.point(jr[0][0],jr[0][1],3)))}Kr&&(!nn||!vs(nn,dr))&&Ze.point(dr[0],dr[1]),nn=dr,pn=Kr,Je=mi},lineEnd:function(){pn&&Ze.lineEnd(),nn=null},clean:function(){return Hn|(fn&&pn)<<1}}}function he(Ze,nn,Je){var pn=et(Ze),fn=et(nn),Hn=[1,0,0],Un=xt(pn,fn),Vn=at(Un,Un),Gn=Un[0],dr=Vn-Gn*Gn;if(!dr)return!Je&&Ze;var br=te*Vn/dr,Kr=-te*Gn/dr,mi=xt(Hn,Un),jr=ot(Hn,br),oi=ot(Un,Kr);k(jr,oi);var fi=mi,Hi=at(jr,fi),Di=at(fi,fi),Ma=Hi*Hi-Di*(at(jr,jr)-1);if(!(Ma<0)){var xa=P(Ma),Pa=ot(fi,(-Hi-xa)/Di);if(k(Pa,jr),Pa=gt(Pa),!Je)return Pa;var ei=Ze[0],Ea=nn[0],Ga=Ze[1],Ha=nn[1],Li;Ea<ei&&(Li=ei,ei=Ea,Ea=Li);var Ia=Ea-ei,Eo=l(Ia-r)<s,Hs=Eo||Ia<s;if(!Eo&&Ha<Ga&&(Li=Ga,Ga=Ha,Ha=Li),Hs?Eo?Ga+Ha>0^Pa[1]<(l(Pa[0]-ei)<s?Ga:Ha):Ga<=Pa[1]&&Pa[1]<=Ha:Ia>r^(ei<=Pa[0]&&Pa[0]<=Ea)){var Fs=ot(fi,(-Hi+xa)/Di);return k(Fs,jr),[Pa,gt(Fs)]}}}function Fe(Ze,nn){var Je=Se?Kt:r-Kt,pn=0;return Ze<-Je?pn|=1:Ze>Je&&(pn|=2),nn<-Je?pn|=4:nn>Je&&(pn|=8),pn}return jo(oe,ne,zt,Se?[0,-Kt]:[-r,Kt-r])}function Ee(Kt,te,Le,Se,Dt,zt){var oe=Kt[0],ne=Kt[1],he=te[0],Fe=te[1],Ze=0,nn=1,Je=he-oe,pn=Fe-ne,fn;if(fn=Le-oe,!(!Je&&fn>0)){if(fn/=Je,Je<0){if(fn<Ze)return;fn<nn&&(nn=fn)}else if(Je>0){if(fn>nn)return;fn>Ze&&(Ze=fn)}if(fn=Dt-oe,!(!Je&&fn<0)){if(fn/=Je,Je<0){if(fn>nn)return;fn>Ze&&(Ze=fn)}else if(Je>0){if(fn<Ze)return;fn<nn&&(nn=fn)}if(fn=Se-ne,!(!pn&&fn>0)){if(fn/=pn,pn<0){if(fn<Ze)return;fn<nn&&(nn=fn)}else if(pn>0){if(fn>nn)return;fn>Ze&&(Ze=fn)}if(fn=zt-ne,!(!pn&&fn<0)){if(fn/=pn,pn<0){if(fn>nn)return;fn>Ze&&(Ze=fn)}else if(pn>0){if(fn<Ze)return;fn<nn&&(nn=fn)}return Ze>0&&(Kt[0]=oe+Ze*Je,Kt[1]=ne+Ze*pn),nn<1&&(te[0]=oe+nn*Je,te[1]=ne+nn*pn),!0}}}}}var sn=1e9,Fn=-sn;function rr(Kt,te,Le,Se){function Dt(Fe,Ze){return Kt<=Fe&&Fe<=Le&&te<=Ze&&Ze<=Se}function zt(Fe,Ze,nn,Je){var pn=0,fn=0;if(Fe==null||(pn=oe(Fe,nn))!==(fn=oe(Ze,nn))||he(Fe,Ze)<0^nn>0)do Je.point(pn===0||pn===3?Kt:Le,pn>1?Se:te);while((pn=(pn+nn+4)%4)!==fn);else Je.point(Ze[0],Ze[1])}function oe(Fe,Ze){return l(Fe[0]-Kt)<s?Ze>0?0:3:l(Fe[0]-Le)<s?Ze>0?2:1:l(Fe[1]-te)<s?Ze>0?1:0:Ze>0?3:2}function ne(Fe,Ze){return he(Fe.x,Ze.x)}function he(Fe,Ze){var nn=oe(Fe,1),Je=oe(Ze,1);return nn!==Je?nn-Je:nn===0?Ze[1]-Fe[1]:nn===1?Fe[0]-Ze[0]:nn===2?Fe[1]-Ze[1]:Ze[0]-Fe[0]}return function(Fe){var Ze=Fe,nn=ro(),Je,pn,fn,Hn,Un,Vn,Gn,dr,br,Kr,mi,jr={point:oi,lineStart:Ma,lineEnd:xa,polygonStart:Hi,polygonEnd:Di};function oi(ei,Ea){Dt(ei,Ea)&&Ze.point(ei,Ea)}function fi(){for(var ei=0,Ea=0,Ga=pn.length;Ea<Ga;++Ea)for(var Ha=pn[Ea],Li=1,Ia=Ha.length,Eo=Ha[0],Hs,Fs,Ol=Eo[0],xu=Eo[1];Li<Ia;++Li)Hs=Ol,Fs=xu,Eo=Ha[Li],Ol=Eo[0],xu=Eo[1],Fs<=Se?xu>Se&&(Ol-Hs)*(Se-Fs)>(xu-Fs)*(Kt-Hs)&&++ei:xu<=Se&&(Ol-Hs)*(Se-Fs)<(xu-Fs)*(Kt-Hs)&&--ei;return ei}function Hi(){Ze=nn,Je=[],pn=[],mi=!0}function Di(){var ei=fi(),Ea=mi&&ei,Ga=(Je=u.merge(Je)).length;(Ea||Ga)&&(Fe.polygonStart(),Ea&&(Fe.lineStart(),zt(null,null,1,Fe),Fe.lineEnd()),Ga&&Do(Je,ne,ei,zt,Fe),Fe.polygonEnd()),Ze=Fe,Je=pn=fn=null}function Ma(){jr.point=Pa,pn&&pn.push(fn=[]),Kr=!0,br=!1,Gn=dr=NaN}function xa(){Je&&(Pa(Hn,Un),Vn&&br&&nn.rejoin(),Je.push(nn.result())),jr.point=oi,br&&Ze.lineEnd()}function Pa(ei,Ea){var Ga=Dt(ei,Ea);if(pn&&fn.push([ei,Ea]),Kr)Hn=ei,Un=Ea,Vn=Ga,Kr=!1,Ga&&(Ze.lineStart(),Ze.point(ei,Ea));else if(Ga&&br)Ze.point(ei,Ea);else{var Ha=[Gn=Math.max(Fn,Math.min(sn,Gn)),dr=Math.max(Fn,Math.min(sn,dr))],Li=[ei=Math.max(Fn,Math.min(sn,ei)),Ea=Math.max(Fn,Math.min(sn,Ea))];Ee(Ha,Li,Kt,te,Le,Se)?(br||(Ze.lineStart(),Ze.point(Ha[0],Ha[1])),Ze.point(Li[0],Li[1]),Ga||Ze.lineEnd(),mi=!1):Ga&&(Ze.lineStart(),Ze.point(ei,Ea),mi=!1)}Gn=ei,dr=Ea,br=Ga}return jr}}function qn(){var Kt=0,te=0,Le=960,Se=500,Dt,zt,oe;return oe={stream:function(he){return Dt&&zt===he?Dt:Dt=rr(Kt,te,Le,Se)(zt=he)},extent:function(he){return arguments.length?(Kt=+he[0][0],te=+he[0][1],Le=+he[1][0],Se=+he[1][1],Dt=zt=null,oe):[[Kt,te],[Le,Se]]}}}var $r,bi,wi,Vi,sa={sphere:F,point:F,lineStart:$a,lineEnd:F,polygonStart:F,polygonEnd:F};function $a(){sa.point=_o,sa.lineEnd=Ca}function Ca(){sa.point=sa.lineEnd=F}function _o(Kt,te){Kt*=o,te*=o,bi=Kt,wi=y(te),Vi=b(te),sa.point=Fa}function Fa(Kt,te){Kt*=o,te*=o;var Le=y(te),Se=b(te),Dt=l(Kt-bi),zt=b(Dt),oe=y(Dt),ne=Se*oe,he=Vi*Le-wi*Se*zt,Fe=wi*Le+Vi*Se*zt;$r.add(v(P(ne*ne+he*he),Fe)),bi=Kt,wi=Le,Vi=Se}function uo(Kt){return $r=new u.Adder,rt(Kt,sa),+$r}var vo=[null,null],Ja={type:"LineString",coordinates:vo};function To(Kt,te){return vo[0]=Kt,vo[1]=te,uo(Ja)}var hs={Feature:function(te,Le){return bs(te.geometry,Le)},FeatureCollection:function(te,Le){for(var Se=te.features,Dt=-1,zt=Se.length;++Dt<zt;)if(bs(Se[Dt].geometry,Le))return!0;return!1}},zo={Sphere:function(){return!0},Point:function(te,Le){return Ao(te.coordinates,Le)},MultiPoint:function(te,Le){for(var Se=te.coordinates,Dt=-1,zt=Se.length;++Dt<zt;)if(Ao(Se[Dt],Le))return!0;return!1},LineString:function(te,Le){return Wa(te.coordinates,Le)},MultiLineString:function(te,Le){for(var Se=te.coordinates,Dt=-1,zt=Se.length;++Dt<zt;)if(Wa(Se[Dt],Le))return!0;return!1},Polygon:function(te,Le){return Rs(te.coordinates,Le)},MultiPolygon:function(te,Le){for(var Se=te.coordinates,Dt=-1,zt=Se.length;++Dt<zt;)if(Rs(Se[Dt],Le))return!0;return!1},GeometryCollection:function(te,Le){for(var Se=te.geometries,Dt=-1,zt=Se.length;++Dt<zt;)if(bs(Se[Dt],Le))return!0;return!1}};function bs(Kt,te){return Kt&&zo.hasOwnProperty(Kt.type)?zo[Kt.type](Kt,te):!1}function Ao(Kt,te){return To(Kt,te)===0}function Wa(Kt,te){for(var Le,Se,Dt,zt=0,oe=Kt.length;zt<oe;zt++){if(Se=To(Kt[zt],te),Se===0||zt>0&&(Dt=To(Kt[zt],Kt[zt-1]),Dt>0&&Le<=Dt&&Se<=Dt&&(Le+Se-Dt)*(1-Math.pow((Le-Se)/Dt,2))<c*Dt))return!0;Le=Se}return!1}function Rs(Kt,te){return!!$o(Kt.map(ss),Ba(te))}function ss(Kt){return Kt=Kt.map(Ba),Kt.pop(),Kt}function Ba(Kt){return[Kt[0]*o,Kt[1]*o]}function gn(Kt,te){return(Kt&&hs.hasOwnProperty(Kt.type)?hs[Kt.type]:bs)(Kt,te)}function cr(Kt,te,Le){var Se=u.range(Kt,te-s,Le).concat(te);return function(Dt){return Se.map(function(zt){return[Dt,zt]})}}function Gr(Kt,te,Le){var Se=u.range(Kt,te-s,Le).concat(te);return function(Dt){return Se.map(function(zt){return[zt,Dt]})}}function Ui(){var Kt,te,Le,Se,Dt,zt,oe,ne,he=10,Fe=he,Ze=90,nn=360,Je,pn,fn,Hn,Un=2.5;function Vn(){return{type:"MultiLineString",coordinates:Gn()}}function Gn(){return u.range(g(Se/Ze)*Ze,Le,Ze).map(fn).concat(u.range(g(ne/nn)*nn,oe,nn).map(Hn)).concat(u.range(g(te/he)*he,Kt,he).filter(function(dr){return l(dr%Ze)>s}).map(Je)).concat(u.range(g(zt/Fe)*Fe,Dt,Fe).filter(function(dr){return l(dr%nn)>s}).map(pn))}return Vn.lines=function(){return Gn().map(function(dr){return{type:"LineString",coordinates:dr}})},Vn.outline=function(){return{type:"Polygon",coordinates:[fn(Se).concat(Hn(oe).slice(1),fn(Le).reverse().slice(1),Hn(ne).reverse().slice(1))]}},Vn.extent=function(dr){return arguments.length?Vn.extentMajor(dr).extentMinor(dr):Vn.extentMinor()},Vn.extentMajor=function(dr){return arguments.length?(Se=+dr[0][0],Le=+dr[1][0],ne=+dr[0][1],oe=+dr[1][1],Se>Le&&(dr=Se,Se=Le,Le=dr),ne>oe&&(dr=ne,ne=oe,oe=dr),Vn.precision(Un)):[[Se,ne],[Le,oe]]},Vn.extentMinor=function(dr){return arguments.length?(te=+dr[0][0],Kt=+dr[1][0],zt=+dr[0][1],Dt=+dr[1][1],te>Kt&&(dr=te,te=Kt,Kt=dr),zt>Dt&&(dr=zt,zt=Dt,Dt=dr),Vn.precision(Un)):[[te,zt],[Kt,Dt]]},Vn.step=function(dr){return arguments.length?Vn.stepMajor(dr).stepMinor(dr):Vn.stepMinor()},Vn.stepMajor=function(dr){return arguments.length?(Ze=+dr[0],nn=+dr[1],Vn):[Ze,nn]},Vn.stepMinor=function(dr){return arguments.length?(he=+dr[0],Fe=+dr[1],Vn):[he,Fe]},Vn.precision=function(dr){return arguments.length?(Un=+dr,Je=cr(zt,Dt,90),pn=Gr(te,Kt,Un),fn=cr(ne,oe,90),Hn=Gr(Se,Le,Un),Vn):Un},Vn.extentMajor([[-180,-90+s],[180,90-s]]).extentMinor([[-180,-80-s],[180,80+s]])}function Ua(){return Ui()()}function xo(Kt,te){var Le=Kt[0]*o,Se=Kt[1]*o,Dt=te[0]*o,zt=te[1]*o,oe=b(Se),ne=y(Se),he=b(zt),Fe=y(zt),Ze=oe*b(Le),nn=oe*y(Le),Je=he*b(Dt),pn=he*y(Dt),fn=2*L(P(H(zt-Se)+oe*he*H(Dt-Le))),Hn=y(fn),Un=fn?function(Vn){var Gn=y(Vn*=fn)/Hn,dr=y(fn-Vn)/Hn,br=dr*Ze+Gn*Je,Kr=dr*nn+Gn*pn,mi=dr*ne+Gn*Fe;return[v(Kr,br)*a,v(mi,P(br*br+Kr*Kr))*a]}:function(){return[Le*a,Se*a]};return Un.distance=fn,Un}var po=function(te){return te},ea=new u.Adder,Qa=new u.Adder,Ds,Es,Za,ru,Qo={point:F,lineStart:F,lineEnd:F,polygonStart:function(){Qo.lineStart=Os,Qo.lineEnd=ps},polygonEnd:function(){Qo.lineStart=Qo.lineEnd=Qo.point=F,ea.add(l(Qa)),Qa=new u.Adder},result:function(){var te=ea/2;return ea=new u.Adder,te}};function Os(){Qo.point=$s}function $s(Kt,te){Qo.point=Ss,Ds=Za=Kt,Es=ru=te}function Ss(Kt,te){Qa.add(ru*Kt-Za*te),Za=Kt,ru=te}function ps(){Ss(Ds,Es)}var rs=Infinity,ws=rs,_s=-rs,Tu=_s,Ru={point:Mo,lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F,result:function(){var te=[[rs,ws],[_s,Tu]];return _s=Tu=-(ws=rs=Infinity),te}};function Mo(Kt,te){Kt<rs&&(rs=Kt),Kt>_s&&(_s=Kt),te<ws&&(ws=te),te>Tu&&(Tu=te)}var Qs=0,Du=0,Wu=0,il=0,ju=0,Co=0,ka=0,ba=0,Bo=0,uu,Hu,gs,qo,Is={point:iu,lineStart:Fo,lineEnd:Ka,polygonStart:function(){Is.lineStart=pl,Is.lineEnd=Gl},polygonEnd:function(){Is.point=iu,Is.lineStart=Fo,Is.lineEnd=Ka},result:function(){var te=Bo?[ka/Bo,ba/Bo]:Co?[il/Co,ju/Co]:Wu?[Qs/Wu,Du/Wu]:[NaN,NaN];return Qs=Du=Wu=il=ju=Co=ka=ba=Bo=0,te}};function iu(Kt,te){Qs+=Kt,Du+=te,++Wu}function Fo(){Is.point=Yu}function Yu(Kt,te){Is.point=Ys,iu(gs=Kt,qo=te)}function Ys(Kt,te){var Le=Kt-gs,Se=te-qo,Dt=P(Le*Le+Se*Se);il+=Dt*(gs+Kt)/2,ju+=Dt*(qo+te)/2,Co+=Dt,iu(gs=Kt,qo=te)}function Ka(){Is.point=iu}function pl(){Is.point=gl}function Gl(){Ec(uu,Hu)}function gl(Kt,te){Is.point=Ec,iu(uu=gs=Kt,Hu=qo=te)}function Ec(Kt,te){var Le=Kt-gs,Se=te-qo,Dt=P(Le*Le+Se*Se);il+=Dt*(gs+Kt)/2,ju+=Dt*(qo+te)/2,Co+=Dt,Dt=qo*Kt-gs*te,ka+=Dt*(gs+Kt),ba+=Dt*(qo+te),Bo+=Dt*3,iu(gs=Kt,qo=te)}function Ml(Kt){this._context=Kt}Ml.prototype={_radius:4.5,pointRadius:function(te){return this._radius=te,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(te,Le){switch(this._point){case 0:{this._context.moveTo(te,Le),this._point=1;break}case 1:{this._context.lineTo(te,Le);break}default:{this._context.moveTo(te+this._radius,Le),this._context.arc(te,Le,this._radius,0,i);break}}},result:F};var ao=new u.Adder,Au,ml,qs,Bu,vu,pu={point:F,lineStart:function(){pu.point=Zs},lineEnd:function(){Au&&ds(ml,qs),pu.point=F},polygonStart:function(){Au=!0},polygonEnd:function(){Au=null},result:function(){var te=+ao;return ao=new u.Adder,te}};function Zs(Kt,te){pu.point=ds,ml=Bu=Kt,qs=vu=te}function ds(Kt,te){Bu-=Kt,vu-=te,ao.add(P(Bu*Bu+vu*vu)),Bu=Kt,vu=te}function Ms(){this._string=[]}Ms.prototype={_radius:4.5,_circle:al(4.5),pointRadius:function(te){return(te=+te)!==this._radius&&(this._radius=te,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(te,Le){switch(this._point){case 0:{this._string.push("M",te,",",Le),this._point=1;break}case 1:{this._string.push("L",te,",",Le);break}default:{this._circle==null&&(this._circle=al(this._radius)),this._string.push("M",te,",",Le,this._circle);break}}},result:function(){if(this._string.length){var te=this._string.join("");return this._string=[],te}else return null}};function al(Kt){return"m0,"+Kt+"a"+Kt+","+Kt+" 0 1,1 0,"+-2*Kt+"a"+Kt+","+Kt+" 0 1,1 0,"+2*Kt+"z"}function Pl(Kt,te){var Le=4.5,Se,Dt;function zt(oe){return oe&&(typeof Le=="function"&&Dt.pointRadius(+Le.apply(this,arguments)),rt(oe,Se(Dt))),Dt.result()}return zt.area=function(oe){return rt(oe,Se(Qo)),Qo.result()},zt.measure=function(oe){return rt(oe,Se(pu)),pu.result()},zt.bounds=function(oe){return rt(oe,Se(Ru)),Ru.result()},zt.centroid=function(oe){return rt(oe,Se(Is)),Is.result()},zt.projection=function(oe){return arguments.length?(Se=oe==null?(Kt=null,po):(Kt=oe).stream,zt):Kt},zt.context=function(oe){return arguments.length?(Dt=oe==null?(te=null,new Ms):new Ml(te=oe),typeof Le!="function"&&Dt.pointRadius(Le),zt):te},zt.pointRadius=function(oe){return arguments.length?(Le=typeof oe=="function"?oe:(Dt.pointRadius(+oe),+oe),zt):Le},zt.projection(Kt).context(te)}function jl(Kt){return{stream:Nu(Kt)}}function Nu(Kt){return function(te){var Le=new Zu;for(var Se in Kt)Le[Se]=Kt[Se];return Le.stream=te,Le}}function Zu(){}Zu.prototype={constructor:Zu,point:function(te,Le){this.stream.point(te,Le)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ol(Kt,te,Le){var Se=Kt.clipExtent&&Kt.clipExtent();return Kt.scale(150).translate([0,0]),Se!=null&&Kt.clipExtent(null),rt(Le,Kt.stream(Ru)),te(Ru.result()),Se!=null&&Kt.clipExtent(Se),Kt}function gu(Kt,te,Le){return ol(Kt,function(Se){var Dt=te[1][0]-te[0][0],zt=te[1][1]-te[0][1],oe=Math.min(Dt/(Se[1][0]-Se[0][0]),zt/(Se[1][1]-Se[0][1])),ne=+te[0][0]+(Dt-oe*(Se[1][0]+Se[0][0]))/2,he=+te[0][1]+(zt-oe*(Se[1][1]+Se[0][1]))/2;Kt.scale(150*oe).translate([ne,he])},Le)}function au(Kt,te,Le){return gu(Kt,[[0,0],te],Le)}function Ku(Kt,te,Le){return ol(Kt,function(Se){var Dt=+te,zt=Dt/(Se[1][0]-Se[0][0]),oe=(Dt-zt*(Se[1][0]+Se[0][0]))/2,ne=-zt*Se[0][1];Kt.scale(150*zt).translate([oe,ne])},Le)}function Ls(Kt,te,Le){return ol(Kt,function(Se){var Dt=+te,zt=Dt/(Se[1][1]-Se[0][1]),oe=-zt*Se[0][0],ne=(Dt-zt*(Se[1][1]+Se[0][1]))/2;Kt.scale(150*zt).translate([oe,ne])},Le)}var yl=16,ic=b(30*o);function Tl(Kt,te){return+te?Vl(Kt,te):Bl(Kt)}function Bl(Kt){return Nu({point:function(Le,Se){Le=Kt(Le,Se),this.stream.point(Le[0],Le[1])}})}function Vl(Kt,te){function Le(Se,Dt,zt,oe,ne,he,Fe,Ze,nn,Je,pn,fn,Hn,Un){var Vn=Fe-Se,Gn=Ze-Dt,dr=Vn*Vn+Gn*Gn;if(dr>4*te&&Hn--){var br=oe+Je,Kr=ne+pn,mi=he+fn,jr=P(br*br+Kr*Kr+mi*mi),oi=L(mi/=jr),fi=l(l(mi)-1)<s||l(zt-nn)<s?(zt+nn)/2:v(Kr,br),Hi=Kt(fi,oi),Di=Hi[0],Ma=Hi[1],xa=Di-Se,Pa=Ma-Dt,ei=Gn*xa-Vn*Pa;(ei*ei/dr>te||l((Vn*xa+Gn*Pa)/dr-.5)>.3||oe*Je+ne*pn+he*fn<ic)&&(Le(Se,Dt,zt,oe,ne,he,Di,Ma,fi,br/=jr,Kr/=jr,mi,Hn,Un),Un.point(Di,Ma),Le(Di,Ma,fi,br,Kr,mi,Fe,Ze,nn,Je,pn,fn,Hn,Un))}}return function(Se){var Dt,zt,oe,ne,he,Fe,Ze,nn,Je,pn,fn,Hn,Un={point:Vn,lineStart:Gn,lineEnd:br,polygonStart:function(){Se.polygonStart(),Un.lineStart=Kr},polygonEnd:function(){Se.polygonEnd(),Un.lineStart=Gn}};function Vn(oi,fi){oi=Kt(oi,fi),Se.point(oi[0],oi[1])}function Gn(){nn=NaN,Un.point=dr,Se.lineStart()}function dr(oi,fi){var Hi=et([oi,fi]),Di=Kt(oi,fi);Le(nn,Je,Ze,pn,fn,Hn,nn=Di[0],Je=Di[1],Ze=oi,pn=Hi[0],fn=Hi[1],Hn=Hi[2],yl,Se),Se.point(nn,Je)}function br(){Un.point=Vn,Se.lineEnd()}function Kr(){Gn(),Un.point=mi,Un.lineEnd=jr}function mi(oi,fi){dr(Dt=oi,fi),zt=nn,oe=Je,ne=pn,he=fn,Fe=Hn,Un.point=dr}function jr(){Le(nn,Je,Ze,pn,fn,Hn,zt,oe,Dt,ne,he,Fe,yl,Se),Un.lineEnd=br,br()}return Un}}var pc=Nu({point:function(te,Le){this.stream.point(te*o,Le*o)}});function Xu(Kt){return Nu({point:function(Le,Se){var Dt=Kt(Le,Se);return this.stream.point(Dt[0],Dt[1])}})}function Al(Kt,te,Le,Se,Dt){function zt(oe,ne){return oe*=Se,ne*=Dt,[te+Kt*oe,Le-Kt*ne]}return zt.invert=function(oe,ne){return[(oe-te)/Kt*Se,(Le-ne)/Kt*Dt]},zt}function Nl(Kt,te,Le,Se,Dt,zt){if(!zt)return Al(Kt,te,Le,Se,Dt);var oe=b(zt),ne=y(zt),he=oe*Kt,Fe=ne*Kt,Ze=oe/Kt,nn=ne/Kt,Je=(ne*Le-oe*te)/Kt,pn=(ne*te+oe*Le)/Kt;function fn(Hn,Un){return Hn*=Se,Un*=Dt,[he*Hn-Fe*Un+te,Le-Fe*Hn-he*Un]}return fn.invert=function(Hn,Un){return[Se*(Ze*Hn-nn*Un+Je),Dt*(pn-nn*Hn-Ze*Un)]},fn}function Oo(Kt){return go(function(){return Kt})()}function go(Kt){var te,Le=150,Se=480,Dt=250,zt=0,oe=0,ne=0,he=0,Fe=0,Ze,nn=0,Je=1,pn=1,fn=null,Hn=so,Un=null,Vn,Gn,dr,br=po,Kr=.5,mi,jr,oi,fi,Hi;function Di(ei){return oi(ei[0]*o,ei[1]*o)}function Ma(ei){return ei=oi.invert(ei[0],ei[1]),ei&&[ei[0]*a,ei[1]*a]}Di.stream=function(ei){return fi&&Hi===ei?fi:fi=pc(Xu(Ze)(Hn(mi(br(Hi=ei)))))},Di.preclip=function(ei){return arguments.length?(Hn=ei,fn=void 0,Pa()):Hn},Di.postclip=function(ei){return arguments.length?(br=ei,Un=Vn=Gn=dr=null,Pa()):br},Di.clipAngle=function(ei){return arguments.length?(Hn=+ei?Yt(fn=ei*o):(fn=null,so),Pa()):fn*a},Di.clipExtent=function(ei){return arguments.length?(br=ei==null?(Un=Vn=Gn=dr=null,po):rr(Un=+ei[0][0],Vn=+ei[0][1],Gn=+ei[1][0],dr=+ei[1][1]),Pa()):Un==null?null:[[Un,Vn],[Gn,dr]]},Di.scale=function(ei){return arguments.length?(Le=+ei,xa()):Le},Di.translate=function(ei){return arguments.length?(Se=+ei[0],Dt=+ei[1],xa()):[Se,Dt]},Di.center=function(ei){return arguments.length?(zt=ei[0]%360*o,oe=ei[1]%360*o,xa()):[zt*a,oe*a]},Di.rotate=function(ei){return arguments.length?(ne=ei[0]%360*o,he=ei[1]%360*o,Fe=ei.length>2?ei[2]%360*o:0,xa()):[ne*a,he*a,Fe*a]},Di.angle=function(ei){return arguments.length?(nn=ei%360*o,xa()):nn*a},Di.reflectX=function(ei){return arguments.length?(Je=ei?-1:1,xa()):Je<0},Di.reflectY=function(ei){return arguments.length?(pn=ei?-1:1,xa()):pn<0},Di.precision=function(ei){return arguments.length?(mi=Tl(jr,Kr=ei*ei),Pa()):P(Kr)},Di.fitExtent=function(ei,Ea){return gu(Di,ei,Ea)},Di.fitSize=function(ei,Ea){return au(Di,ei,Ea)},Di.fitWidth=function(ei,Ea){return Ku(Di,ei,Ea)},Di.fitHeight=function(ei,Ea){return Ls(Di,ei,Ea)};function xa(){var ei=Nl(Le,0,0,Je,pn,nn).apply(null,te(zt,oe)),Ea=Nl(Le,Se-ei[0],Dt-ei[1],Je,pn,nn);return Ze=mr(ne,he,Fe),jr=_n(te,Ea),oi=_n(Ze,jr),mi=Tl(jr,Kr),Pa()}function Pa(){return fi=Hi=null,Di}return function(){return te=Kt.apply(this,arguments),Di.invert=te.invert&&Ma,xa()}}function xl(Kt){var te=0,Le=r/3,Se=go(Kt),Dt=Se(te,Le);return Dt.parallels=function(zt){return arguments.length?Se(te=zt[0]*o,Le=zt[1]*o):[te*a,Le*a]},Dt}function sl(Kt){var te=b(Kt);function Le(Se,Dt){return[Se*te,y(Dt)/te]}return Le.invert=function(Se,Dt){return[Se/te,L(Dt*te)]},Le}function Vs(Kt,te){var Le=y(Kt),Se=(Le+y(te))/2;if(l(Se)<s)return sl(Kt);var Dt=1+Le*(2*Se-Le),zt=P(Dt)/Se;function oe(ne,he){var Fe=P(Dt-2*Se*y(he))/Se;return[Fe*y(ne*=Se),zt-Fe*b(ne)]}return oe.invert=function(ne,he){var Fe=zt-he,Ze=v(ne,l(Fe))*S(Fe);return Fe*Se<0&&(Ze-=r*S(ne)*S(Fe)),[Ze/Se,L((Dt-(ne*ne+Fe*Fe)*Se*Se)/(2*Se))]},oe}function Da(){return xl(Vs).scale(155.424).center([0,33.6442])}function bo(){return Da().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ns(Kt){var te=Kt.length;return{point:function(Se,Dt){for(var zt=-1;++zt<te;)Kt[zt].point(Se,Dt)},sphere:function(){for(var Se=-1;++Se<te;)Kt[Se].sphere()},lineStart:function(){for(var Se=-1;++Se<te;)Kt[Se].lineStart()},lineEnd:function(){for(var Se=-1;++Se<te;)Kt[Se].lineEnd()},polygonStart:function(){for(var Se=-1;++Se<te;)Kt[Se].polygonStart()},polygonEnd:function(){for(var Se=-1;++Se<te;)Kt[Se].polygonEnd()}}}function Cl(){var Kt,te,Le=bo(),Se,Dt=Da().rotate([154,0]).center([-2,58.5]).parallels([55,65]),zt,oe=Da().rotate([157,0]).center([-3,19.9]).parallels([8,18]),ne,he,Fe={point:function(pn,fn){he=[pn,fn]}};function Ze(Je){var pn=Je[0],fn=Je[1];return he=null,Se.point(pn,fn),he||(zt.point(pn,fn),he)||(ne.point(pn,fn),he)}Ze.invert=function(Je){var pn=Le.scale(),fn=Le.translate(),Hn=(Je[0]-fn[0])/pn,Un=(Je[1]-fn[1])/pn;return(Un>=.12&&Un<.234&&Hn>=-.425&&Hn<-.214?Dt:Un>=.166&&Un<.234&&Hn>=-.214&&Hn<-.115?oe:Le).invert(Je)},Ze.stream=function(Je){return Kt&&te===Je?Kt:Kt=Ns([Le.stream(te=Je),Dt.stream(Je),oe.stream(Je)])},Ze.precision=function(Je){return arguments.length?(Le.precision(Je),Dt.precision(Je),oe.precision(Je),nn()):Le.precision()},Ze.scale=function(Je){return arguments.length?(Le.scale(Je),Dt.scale(Je*.35),oe.scale(Je),Ze.translate(Le.translate())):Le.scale()},Ze.translate=function(Je){if(!arguments.length)return Le.translate();var pn=Le.scale(),fn=+Je[0],Hn=+Je[1];return Se=Le.translate(Je).clipExtent([[fn-.455*pn,Hn-.238*pn],[fn+.455*pn,Hn+.238*pn]]).stream(Fe),zt=Dt.translate([fn-.307*pn,Hn+.201*pn]).clipExtent([[fn-.425*pn+s,Hn+.12*pn+s],[fn-.214*pn-s,Hn+.234*pn-s]]).stream(Fe),ne=oe.translate([fn-.205*pn,Hn+.212*pn]).clipExtent([[fn-.214*pn+s,Hn+.166*pn+s],[fn-.115*pn-s,Hn+.234*pn-s]]).stream(Fe),nn()},Ze.fitExtent=function(Je,pn){return gu(Ze,Je,pn)},Ze.fitSize=function(Je,pn){return au(Ze,Je,pn)},Ze.fitWidth=function(Je,pn){return Ku(Ze,Je,pn)},Ze.fitHeight=function(Je,pn){return Ls(Ze,Je,pn)};function nn(){return Kt=te=null,Ze}return Ze.scale(1070)}function ul(Kt){return function(te,Le){var Se=b(te),Dt=b(Le),zt=Kt(Se*Dt);return zt===Infinity?[2,0]:[zt*Dt*y(te),zt*y(Le)]}}function Ju(Kt){return function(te,Le){var Se=P(te*te+Le*Le),Dt=Kt(Se),zt=y(Dt),oe=b(Dt);return[v(te*zt,Se*oe),L(Se&&Le*zt/Se)]}}var Sc=ul(function(Kt){return P(2/(1+Kt))});Sc.invert=Ju(function(Kt){return 2*L(Kt/2)});function Wl(){return Oo(Sc).scale(124.75).clipAngle(180-.001)}var $u=ul(function(Kt){return(Kt=O(Kt))&&Kt/y(Kt)});$u.invert=Ju(function(Kt){return Kt});function tu(){return Oo($u).scale(79.4188).clipAngle(180-.001)}function Ws(Kt,te){return[Kt,M(A((h+te)/2))]}Ws.invert=function(Kt,te){return[Kt,2*f(m(te))-h]};function is(){return eu(Ws).scale(961/i)}function eu(Kt){var te=Oo(Kt),Le=te.center,Se=te.scale,Dt=te.translate,zt=te.clipExtent,oe=null,ne,he,Fe;te.scale=function(nn){return arguments.length?(Se(nn),Ze()):Se()},te.translate=function(nn){return arguments.length?(Dt(nn),Ze()):Dt()},te.center=function(nn){return arguments.length?(Le(nn),Ze()):Le()},te.clipExtent=function(nn){return arguments.length?(nn==null?oe=ne=he=Fe=null:(oe=+nn[0][0],ne=+nn[0][1],he=+nn[1][0],Fe=+nn[1][1]),Ze()):oe==null?null:[[oe,ne],[he,Fe]]};function Ze(){var nn=r*Se(),Je=te(Aa(te.rotate()).invert([0,0]));return zt(oe==null?[[Je[0]-nn,Je[1]-nn],[Je[0]+nn,Je[1]+nn]]:Kt===Ws?[[Math.max(Je[0]-nn,oe),ne],[Math.min(Je[0]+nn,he),Fe]]:[[oe,Math.max(Je[1]-nn,ne)],[he,Math.min(Je[1]+nn,Fe)]])}return Ze()}function Fu(Kt){return A((h+Kt)/2)}function us(Kt,te){var Le=b(Kt),Se=Kt===te?y(Kt):M(Le/b(te))/M(Fu(te)/Fu(Kt)),Dt=Le*x(Fu(Kt),Se)/Se;if(!Se)return Ws;function zt(oe,ne){Dt>0?ne<-h+s&&(ne=-h+s):ne>h-s&&(ne=h-s);var he=Dt/x(Fu(ne),Se);return[he*y(Se*oe),Dt-he*b(Se*oe)]}return zt.invert=function(oe,ne){var he=Dt-ne,Fe=S(Se)*P(oe*oe+he*he),Ze=v(oe,l(he))*S(he);return he*Se<0&&(Ze-=r*S(oe)*S(he)),[Ze/Se,2*f(x(Dt/Fe,1/Se))-h]},zt}function Wi(){return xl(us).scale(109.5).parallels([30,30])}function js(Kt,te){return[Kt,te]}js.invert=js;function Qu(){return Oo(js).scale(152.63)}function zu(Kt,te){var Le=b(Kt),Se=Kt===te?y(Kt):(Le-b(te))/(te-Kt),Dt=Le/Se+Kt;if(l(Se)<s)return js;function zt(oe,ne){var he=Dt-ne,Fe=Se*oe;return[he*y(Fe),Dt-he*b(Fe)]}return zt.invert=function(oe,ne){var he=Dt-ne,Fe=v(oe,l(he))*S(he);return he*Se<0&&(Fe-=r*S(oe)*S(he)),[Fe/Se,Dt-S(Se)*P(oe*oe+he*he)]},zt}function Uo(){return xl(zu).scale(131.154).center([0,13.9389])}var Wo=1.340264,mu=-.081106,_i=893e-6,yu=.003796,Cu=P(3)/2,Ou=12;function Ks(Kt,te){var Le=L(Cu*y(te)),Se=Le*Le,Dt=Se*Se*Se;return[Kt*b(Le)/(Cu*(Wo+3*mu*Se+Dt*(7*_i+9*yu*Se))),Le*(Wo+mu*Se+Dt*(_i+yu*Se))]}Ks.invert=function(Kt,te){for(var Le=te,Se=Le*Le,Dt=Se*Se*Se,zt=0,oe,ne,he;zt<Ou&&(ne=Le*(Wo+mu*Se+Dt*(_i+yu*Se))-te,he=Wo+3*mu*Se+Dt*(7*_i+9*yu*Se),Le-=oe=ne/he,Se=Le*Le,Dt=Se*Se*Se,!(l(oe)<c));++zt);return[Cu*Kt*(Wo+3*mu*Se+Dt*(7*_i+9*yu*Se))/b(Le),L(y(Le)/Cu)]};function we(){return Oo(Ks).scale(177.158)}function Pe(Kt,te){var Le=b(te),Se=b(Kt)*Le;return[Le*y(Kt)/Se,y(te)/Se]}Pe.invert=Ju(f);function hn(){return Oo(Pe).scale(144.049).clipAngle(60)}function tn(){var Kt=1,te=0,Le=0,Se=1,Dt=1,zt=0,oe,ne,he=null,Fe,Ze,nn,Je=1,pn=1,fn=Nu({point:function(Kr,mi){var jr=dr([Kr,mi]);this.stream.point(jr[0],jr[1])}}),Hn=po,Un,Vn;function Gn(){return Je=Kt*Se,pn=Kt*Dt,Un=Vn=null,dr}function dr(br){var Kr=br[0]*Je,mi=br[1]*pn;if(zt){var jr=mi*oe-Kr*ne;Kr=Kr*oe+mi*ne,mi=jr}return[Kr+te,mi+Le]}return dr.invert=function(br){var Kr=br[0]-te,mi=br[1]-Le;if(zt){var jr=mi*oe+Kr*ne;Kr=Kr*oe-mi*ne,mi=jr}return[Kr/Je,mi/pn]},dr.stream=function(br){return Un&&Vn===br?Un:Un=fn(Hn(Vn=br))},dr.postclip=function(br){return arguments.length?(Hn=br,he=Fe=Ze=nn=null,Gn()):Hn},dr.clipExtent=function(br){return arguments.length?(Hn=br==null?(he=Fe=Ze=nn=null,po):rr(he=+br[0][0],Fe=+br[0][1],Ze=+br[1][0],nn=+br[1][1]),Gn()):he==null?null:[[he,Fe],[Ze,nn]]},dr.scale=function(br){return arguments.length?(Kt=+br,Gn()):Kt},dr.translate=function(br){return arguments.length?(te=+br[0],Le=+br[1],Gn()):[te,Le]},dr.angle=function(br){return arguments.length?(zt=br%360*o,ne=y(zt),oe=b(zt),Gn()):zt*a},dr.reflectX=function(br){return arguments.length?(Se=br?-1:1,Gn()):Se<0},dr.reflectY=function(br){return arguments.length?(Dt=br?-1:1,Gn()):Dt<0},dr.fitExtent=function(br,Kr){return gu(dr,br,Kr)},dr.fitSize=function(br,Kr){return au(dr,br,Kr)},dr.fitWidth=function(br,Kr){return Ku(dr,br,Kr)},dr.fitHeight=function(br,Kr){return Ls(dr,br,Kr)},dr}function On(Kt,te){var Le=te*te,Se=Le*Le;return[Kt*(.8707-.131979*Le+Se*(-.013791+Se*(.003971*Le-.001529*Se))),te*(1.007226+Le*(.015085+Se*(-.044475+.028874*Le-.005916*Se)))]}On.invert=function(Kt,te){var Le=te,Se=25,Dt;do{var zt=Le*Le,oe=zt*zt;Le-=Dt=(Le*(1.007226+zt*(.015085+oe*(-.044475+.028874*zt-.005916*oe)))-te)/(1.007226+zt*(.015085*3+oe*(-.044475*7+.028874*9*zt-.005916*11*oe)))}while(l(Dt)>s&&--Se>0);return[Kt/(.8707+(zt=Le*Le)*(-.131979+zt*(-.013791+zt*zt*zt*(.003971-.001529*zt)))),Le]};function hr(){return Oo(On).scale(175.295)}function Rr(Kt,te){return[b(te)*y(Kt),y(te)]}Rr.invert=Ju(L);function Xr(){return Oo(Rr).scale(249.5).clipAngle(90+s)}function ni(Kt,te){var Le=b(te),Se=1+b(Kt)*Le;return[Le*y(Kt)/Se,y(te)/Se]}ni.invert=Ju(function(Kt){return 2*f(Kt)});function zr(){return Oo(ni).scale(250).clipAngle(142)}function li(Kt,te){return[M(A((h+te)/2)),-Kt]}li.invert=function(Kt,te){return[-te,2*f(m(Kt))-h]};function yr(){var Kt=eu(li),te=Kt.center,Le=Kt.rotate;return Kt.center=function(Se){return arguments.length?te([-Se[1],Se[0]]):(Se=te(),[Se[1],-Se[0]])},Kt.rotate=function(Se){return arguments.length?Le([Se[0],Se[1],Se.length>2?Se[2]+90:90]):(Se=Le(),[Se[0],Se[1],Se[2]-90])},Le([0,0,90]).scale(159.155)}t.geoAlbers=bo,t.geoAlbersUsa=Cl,t.geoArea=q,t.geoAzimuthalEqualArea=Wl,t.geoAzimuthalEqualAreaRaw=Sc,t.geoAzimuthalEquidistant=tu,t.geoAzimuthalEquidistantRaw=$u,t.geoBounds=hi,t.geoCentroid=$n,t.geoCircle=Ro,t.geoClipAntimeridian=so,t.geoClipCircle=Yt,t.geoClipExtent=qn,t.geoClipRectangle=rr,t.geoConicConformal=Wi,t.geoConicConformalRaw=us,t.geoConicEqualArea=Da,t.geoConicEqualAreaRaw=Vs,t.geoConicEquidistant=Uo,t.geoConicEquidistantRaw=zu,t.geoContains=gn,t.geoDistance=To,t.geoEqualEarth=we,t.geoEqualEarthRaw=Ks,t.geoEquirectangular=Qu,t.geoEquirectangularRaw=js,t.geoGnomonic=hn,t.geoGnomonicRaw=Pe,t.geoGraticule=Ui,t.geoGraticule10=Ua,t.geoIdentity=tn,t.geoInterpolate=xo,t.geoLength=uo,t.geoMercator=is,t.geoMercatorRaw=Ws,t.geoNaturalEarth1=hr,t.geoNaturalEarth1Raw=On,t.geoOrthographic=Xr,t.geoOrthographicRaw=Rr,t.geoPath=Pl,t.geoProjection=Oo,t.geoProjectionMutator=go,t.geoRotation=Aa,t.geoStereographic=zr,t.geoStereographicRaw=ni,t.geoStream=rt,t.geoTransform=jl,t.geoTransverseMercator=yr,t.geoTransverseMercatorRaw=li,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-hexjson@1.1.1@d3-hexjson/build/d3-hexjson.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,u){"use strict";function s(l,f,v){var b=l.layout,g=[],m=0;Object.keys(l.hexes).forEach(function(H){l.hexes[H].key=H,g.push(l.hexes[H])});var _=u.max(g,function(H){return+H.q}),M=u.min(g,function(H){return+H.q}),x=u.max(g,function(H){return+H.r}),y=u.min(g,function(H){return+H.r}),S=_-M+1,P=x-y+1;b==="odd-r"||b==="even-r"?m=u.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):m=u.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var A=m*Math.sqrt(3),O=h(b,A,m),L=n(O);return g.forEach(function(H){H.qc=H.q-M,H.rc=x-H.r,H.x=c(H,b,A,m),H.y=r(H,b,A,m),H.vertices=O,H.points=L}),g}function c(l,f,v,b){var g=0,m=0;switch(f){case"odd-r":m=l.rc%2==1?v:v/2,g=l.qc*v+m;break;case"even-r":m=l.rc%2==0?v:v/2,g=l.qc*v+m;break;case"odd-q":case"even-q":g=l.qc*b*1.5+b;break}return g}function r(l,f,v,b){var g=0,m=0;switch(f){case"odd-r":case"even-r":g=l.rc*b*1.5+b;break;case"odd-q":m=l.qc%2==1?v:v/2,g=l.rc*v+m;break;case"even-q":m=l.qc%2==0?v:v/2,g=l.rc*v+m;break}return g}function h(l,f,v){var b=[];switch(l){case"odd-r":case"even-r":b.push({x:0,y:0-v}),b.push({x:0+f*.5,y:0-.5*v}),b.push({x:0+f*.5,y:0+.5*v}),b.push({x:0,y:0+v}),b.push({x:0-f*.5,y:0+.5*v}),b.push({x:0-f*.5,y:0-.5*v});break;case"odd-q":case"even-q":b.push({x:0-v,y:0}),b.push({x:0-.5*v,y:0-f*.5}),b.push({x:0+.5*v,y:0-f*.5}),b.push({x:0+v,y:0}),b.push({x:0+.5*v,y:0+f*.5}),b.push({x:0-.5*v,y:0+f*.5});break}return b}function n(l){var f="";return l.forEach(function(v){f+=v.x+","+v.y+" "}),f.substring(0,f.length-1)}function i(l){var f={};f.layout=l.layout,f.hexes={};var v=[];Object.keys(l.hexes).forEach(function(S){v.push(l.hexes[S])});var b=u.max(v,function(S){return+S.q}),g=u.min(v,function(S){return+S.q}),m=u.max(v,function(S){return+S.r}),_=u.min(v,function(S){return+S.r}),M,x,y;for(M=g;M<=b;M++)for(x=_;x<=m;x++)y="Q"+M+"R"+x,f.hexes[y]={q:M,r:x};return f}function a(l,f,v,b){var g=[],m=l.layout;Object.keys(l.hexes).forEach(function(mt){g.push(l.hexes[mt])});var _=u.max(g,function(mt){return+mt.q}),M=u.min(g,function(mt){return+mt.q}),x=u.max(g,function(mt){return+mt.r}),y=u.min(g,function(mt){return+mt.r}),S=_-M+1,P=x-y+1,A;m==="odd-r"||m==="even-r"?A=u.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):A=u.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var O=A*Math.sqrt(3),L=[],H=A*A*4,F=g.length;if(F>1){g.forEach(function(mt){mt.qc=mt.q-M,mt.rc=x-mt.r,mt.x=c(mt,m,O,A),mt.y=r(mt,m,O,A)});for(var K=0;K<F-1;K++)for(var G=K+1;G<F;G++){var U=g[K],Z=g[G];if(U[b]!==Z[b]&&Math.abs(U.q-Z.q)<=1&&Math.abs(U.r-Z.r)<=1&&(U.x-Z.x)*(U.x-Z.x)+(U.y-Z.y)*(U.y-Z.y)<H){var J={};J.x=Z.x+(U.x-Z.x)/2,J.y=Z.y+(U.y-Z.y)/2;var rt={},vt=Math.sqrt(3)*4;rt.dx=(U.y-Z.y)/vt,rt.dy=-(U.x-Z.x)/vt,L.push({x:J.x-2*rt.dx,y:J.y-2*rt.dy}),L.push({x:J.x-rt.dx,y:J.y-rt.dy}),L.push({x:J.x,y:J.y}),L.push({x:J.x+rt.dx,y:J.y+rt.dy}),L.push({x:J.x+2*rt.dx,y:J.y+2*rt.dy})}}}return L}function o(l,f,v,b){var g=[],m=l.layout;Object.keys(l.hexes).forEach(function(ut){g.push(l.hexes[ut])});var _=u.max(g,function(ut){return+ut.q}),M=u.min(g,function(ut){return+ut.q}),x=u.max(g,function(ut){return+ut.r}),y=u.min(g,function(ut){return+ut.r}),S=_-M+1,P=x-y+1,A;m==="odd-r"||m==="even-r"?A=u.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):A=u.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var O=A*Math.sqrt(3),L=[],H=A*A*4,F=g.length;if(F>1){g.forEach(function(ut){ut.qc=ut.q-M,ut.rc=x-ut.r,ut.x=c(ut,m,O,A),ut.y=r(ut,m,O,A)});for(var K=0;K<F-1;K++)for(var G=K+1;G<F;G++){var U=g[K],Z=g[G];if(U[b]!==Z[b]&&Math.abs(U.q-Z.q)<=1&&Math.abs(U.r-Z.r)<=1&&(U.x-Z.x)*(U.x-Z.x)+(U.y-Z.y)*(U.y-Z.y)<H){var J={};J.x=Z.x+(U.x-Z.x)/2,J.y=Z.y+(U.y-Z.y)/2;var rt={},vt=1;U[b]<Z[b]&&(vt=-1);var mt=Math.sqrt(3)*2*vt;rt.dx=(U.y-Z.y)/mt,rt.dy=-(U.x-Z.x)/mt,L.push({x1:J.x-rt.dx,y1:J.y-rt.dy,x2:J.x+rt.dx,y2:J.y+rt.dy})}}}return L}t.renderHexJSON=s,t.getGridForHexJSON=i,t.getBoundaryDotsForHexJSON=a,t.getBoundarySegmentsForHexJSON=o,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(Wt,re){return Wt.parent===re.parent?1:2}function s(Wt){return Wt.reduce(c,0)/Wt.length}function c(Wt,re){return Wt+re.x}function r(Wt){return 1+Wt.reduce(h,0)}function h(Wt,re){return Math.max(Wt,re.y)}function n(Wt){for(var re;re=Wt.children;)Wt=re[0];return Wt}function i(Wt){for(var re;re=Wt.children;)Wt=re[re.length-1];return Wt}function a(){var Wt=u,re=1,Te=1,ue=!1;function be(Xe){var Rn,tr=0;Xe.eachAfter(function(cn){var Pr=cn.children;Pr?(cn.x=s(Pr),cn.y=r(Pr)):(cn.x=Rn?tr+=Wt(cn,Rn):0,cn.y=0,Rn=cn)});var Mn=n(Xe),vn=i(Xe),Ar=Mn.x-Wt(Mn,vn)/2,or=vn.x+Wt(vn,Mn)/2;return Xe.eachAfter(ue?function(cn){cn.x=(cn.x-Xe.x)*re,cn.y=(Xe.y-cn.y)*Te}:function(cn){cn.x=(cn.x-Ar)/(or-Ar)*re,cn.y=(1-(Xe.y?cn.y/Xe.y:1))*Te})}return be.separation=function(Xe){return arguments.length?(Wt=Xe,be):Wt},be.size=function(Xe){return arguments.length?(ue=!1,re=+Xe[0],Te=+Xe[1],be):ue?null:[re,Te]},be.nodeSize=function(Xe){return arguments.length?(ue=!0,re=+Xe[0],Te=+Xe[1],be):ue?[re,Te]:null},be}function o(Wt){var re=0,Te=Wt.children,ue=Te&&Te.length;if(!ue)re=1;else for(;--ue>=0;)re+=Te[ue].value;Wt.value=re}function l(){return this.eachAfter(o)}function f(Wt){var re=this,Te,ue=[re],be,Xe,Rn;do for(Te=ue.reverse(),ue=[];re=Te.pop();)if(Wt(re),be=re.children,be)for(Xe=0,Rn=be.length;Xe<Rn;++Xe)ue.push(be[Xe]);while(ue.length);return this}function v(Wt){for(var re=this,Te=[re],ue,be;re=Te.pop();)if(Wt(re),ue=re.children,ue)for(be=ue.length-1;be>=0;--be)Te.push(ue[be]);return this}function b(Wt){for(var re=this,Te=[re],ue=[],be,Xe,Rn;re=Te.pop();)if(ue.push(re),be=re.children,be)for(Xe=0,Rn=be.length;Xe<Rn;++Xe)Te.push(be[Xe]);for(;re=ue.pop();)Wt(re);return this}function g(Wt){return this.eachAfter(function(re){for(var Te=+Wt(re.data)||0,ue=re.children,be=ue&&ue.length;--be>=0;)Te+=ue[be].value;re.value=Te})}function m(Wt){return this.eachBefore(function(re){re.children&&re.children.sort(Wt)})}function _(Wt){for(var re=this,Te=M(re,Wt),ue=[re];re!==Te;)re=re.parent,ue.push(re);for(var be=ue.length;Wt!==Te;)ue.splice(be,0,Wt),Wt=Wt.parent;return ue}function M(Wt,re){if(Wt===re)return Wt;var Te=Wt.ancestors(),ue=re.ancestors(),be=null;for(Wt=Te.pop(),re=ue.pop();Wt===re;)be=Wt,Wt=Te.pop(),re=ue.pop();return be}function x(){for(var Wt=this,re=[Wt];Wt=Wt.parent;)re.push(Wt);return re}function y(){var Wt=[];return this.each(function(re){Wt.push(re)}),Wt}function S(){var Wt=[];return this.eachBefore(function(re){re.children||Wt.push(re)}),Wt}function P(){var Wt=this,re=[];return Wt.each(function(Te){Te!==Wt&&re.push({source:Te.parent,target:Te})}),re}function A(Wt,re){var Te=new K(Wt),ue=+Wt.value&&(Te.value=Wt.value),be,Xe=[Te],Rn,tr,Mn,vn;for(re==null&&(re=L);be=Xe.pop();)if(ue&&(be.value=+be.data.value),(tr=re(be.data))&&(vn=tr.length))for(be.children=new Array(vn),Mn=vn-1;Mn>=0;--Mn)Xe.push(Rn=be.children[Mn]=new K(tr[Mn])),Rn.parent=be,Rn.depth=be.depth+1;return Te.eachBefore(F)}function O(){return A(this).eachBefore(H)}function L(Wt){return Wt.children}function H(Wt){Wt.data=Wt.data.data}function F(Wt){var re=0;do Wt.height=re;while((Wt=Wt.parent)&&Wt.height<++re)}function K(Wt){this.data=Wt,this.depth=this.height=0,this.parent=null}K.prototype=A.prototype={constructor:K,count:l,each:f,eachAfter:b,eachBefore:v,sum:g,sort:m,path:_,ancestors:x,descendants:y,leaves:S,links:P,copy:O};var G=Array.prototype.slice;function U(Wt){for(var re=Wt.length,Te,ue;re;)ue=Math.random()*re--|0,Te=Wt[re],Wt[re]=Wt[ue],Wt[ue]=Te;return Wt}function Z(Wt){for(var re=0,Te=(Wt=U(G.call(Wt))).length,ue=[],be,Xe;re<Te;)be=Wt[re],Xe&&vt(Xe,be)?++re:(Xe=ut(ue=J(ue,be)),re=0);return Xe}function J(Wt,re){var Te,ue;if(mt(re,Wt))return[re];for(Te=0;Te<Wt.length;++Te)if(rt(re,Wt[Te])&&mt(Ft(Wt[Te],re),Wt))return[Wt[Te],re];for(Te=0;Te<Wt.length-1;++Te)for(ue=Te+1;ue<Wt.length;++ue)if(rt(Ft(Wt[Te],Wt[ue]),re)&&rt(Ft(Wt[Te],re),Wt[ue])&&rt(Ft(Wt[ue],re),Wt[Te])&&mt(wt(Wt[Te],Wt[ue],re),Wt))return[Wt[Te],Wt[ue],re];throw new Error}function rt(Wt,re){var Te=Wt.r-re.r,ue=re.x-Wt.x,be=re.y-Wt.y;return Te<0||Te*Te<ue*ue+be*be}function vt(Wt,re){var Te=Wt.r-re.r+1e-6,ue=re.x-Wt.x,be=re.y-Wt.y;return Te>0&&Te*Te>ue*ue+be*be}function mt(Wt,re){for(var Te=0;Te<re.length;++Te)if(!vt(Wt,re[Te]))return!1;return!0}function ut(Wt){switch(Wt.length){case 1:return Rt(Wt[0]);case 2:return Ft(Wt[0],Wt[1]);case 3:return wt(Wt[0],Wt[1],Wt[2])}}function Rt(Wt){return{x:Wt.x,y:Wt.y,r:Wt.r}}function Ft(Wt,re){var Te=Wt.x,ue=Wt.y,be=Wt.r,Xe=re.x,Rn=re.y,tr=re.r,Mn=Xe-Te,vn=Rn-ue,Ar=tr-be,or=Math.sqrt(Mn*Mn+vn*vn);return{x:(Te+Xe+Mn/or*Ar)/2,y:(ue+Rn+vn/or*Ar)/2,r:(or+be+tr)/2}}function wt(Wt,re,Te){var ue=Wt.x,be=Wt.y,Xe=Wt.r,Rn=re.x,tr=re.y,Mn=re.r,vn=Te.x,Ar=Te.y,or=Te.r,cn=ue-Rn,Pr=ue-vn,Sr=be-tr,De=be-Ar,$e=Mn-Xe,Ve=or-Xe,En=ue*ue+be*be-Xe*Xe,xn=En-Rn*Rn-tr*tr+Mn*Mn,Nn=En-vn*vn-Ar*Ar+or*or,mn=Pr*Sr-cn*De,Dn=(Sr*Nn-De*xn)/(mn*2)-ue,$n=(De*$e-Sr*Ve)/mn,Wn=(Pr*xn-cn*Nn)/(mn*2)-be,_n=(cn*Ve-Pr*$e)/mn,xr=$n*$n+_n*_n-1,mr=2*(Xe+Dn*$n+Wn*_n),Fr=Dn*Dn+Wn*Wn-Xe*Xe,xi=-(xr?(mr+Math.sqrt(mr*mr-4*xr*Fr))/(2*xr):Fr/mr);return{x:ue+Dn+$n*xi,y:be+Wn+_n*xi,r:xi}}function Mt(Wt,re,Te){var ue=Wt.x-re.x,be,Xe,Rn=Wt.y-re.y,tr,Mn,vn=ue*ue+Rn*Rn;vn?(Xe=re.r+Te.r,Xe*=Xe,Mn=Wt.r+Te.r,Mn*=Mn,Xe>Mn?(be=(vn+Mn-Xe)/(2*vn),tr=Math.sqrt(Math.max(0,Mn/vn-be*be)),Te.x=Wt.x-be*ue-tr*Rn,Te.y=Wt.y-be*Rn+tr*ue):(be=(vn+Xe-Mn)/(2*vn),tr=Math.sqrt(Math.max(0,Xe/vn-be*be)),Te.x=re.x+be*ue-tr*Rn,Te.y=re.y+be*Rn+tr*ue)):(Te.x=re.x+Te.r,Te.y=re.y)}function St(Wt,re){var Te=Wt.r+re.r-1e-6,ue=re.x-Wt.x,be=re.y-Wt.y;return Te>0&&Te*Te>ue*ue+be*be}function At(Wt){var re=Wt._,Te=Wt.next._,ue=re.r+Te.r,be=(re.x*Te.r+Te.x*re.r)/ue,Xe=(re.y*Te.r+Te.y*re.r)/ue;return be*be+Xe*Xe}function nt(Wt){this._=Wt,this.next=null,this.previous=null}function Pt(Wt){if(!(be=Wt.length))return 0;var re,Te,ue,be,Xe,Rn,tr,Mn,vn,Ar,or;if(re=Wt[0],re.x=0,re.y=0,!(be>1))return re.r;if(Te=Wt[1],re.x=-Te.r,Te.x=re.r,Te.y=0,!(be>2))return re.r+Te.r;Mt(Te,re,ue=Wt[2]),re=new nt(re),Te=new nt(Te),ue=new nt(ue),re.next=ue.previous=Te,Te.next=re.previous=ue,ue.next=Te.previous=re;t:for(tr=3;tr<be;++tr){Mt(re._,Te._,ue=Wt[tr]),ue=new nt(ue),Mn=Te.next,vn=re.previous,Ar=Te._.r,or=re._.r;do if(Ar<=or){if(St(Mn._,ue._)){Te=Mn,re.next=Te,Te.previous=re,--tr;continue t}Ar+=Mn._.r,Mn=Mn.next}else{if(St(vn._,ue._)){re=vn,re.next=Te,Te.previous=re,--tr;continue t}or+=vn._.r,vn=vn.previous}while(Mn!==vn.next);for(ue.previous=re,ue.next=Te,re.next=Te.previous=Te=ue,Xe=At(re);(ue=ue.next)!==Te;)(Rn=At(ue))<Xe&&(re=ue,Xe=Rn);Te=re.next}for(re=[Te._],ue=Te;(ue=ue.next)!==Te;)re.push(ue._);for(ue=Z(re),tr=0;tr<be;++tr)re=Wt[tr],re.x-=ue.x,re.y-=ue.y;return ue.r}function z(Wt){return Pt(Wt),Wt}function q(Wt){return Wt==null?null:gt(Wt)}function gt(Wt){if(typeof Wt!="function")throw new Error;return Wt}function et(){return 0}function at(Wt){return function(){return Wt}}function xt(Wt){return Math.sqrt(Wt.value)}function k(){var Wt=null,re=1,Te=1,ue=et;function be(Xe){return Xe.x=re/2,Xe.y=Te/2,Wt?Xe.eachBefore(ot(Wt)).eachAfter(it(ue,.5)).eachBefore($(1)):Xe.eachBefore(ot(xt)).eachAfter(it(et,1)).eachAfter(it(ue,Xe.r/Math.min(re,Te))).eachBefore($(Math.min(re,Te)/(2*Xe.r))),Xe}return be.radius=function(Xe){return arguments.length?(Wt=q(Xe),be):Wt},be.size=function(Xe){return arguments.length?(re=+Xe[0],Te=+Xe[1],be):[re,Te]},be.padding=function(Xe){return arguments.length?(ue=typeof Xe=="function"?Xe:at(+Xe),be):ue},be}function ot(Wt){return function(re){re.children||(re.r=Math.max(0,+Wt(re)||0))}}function it(Wt,re){return function(Te){if(ue=Te.children){var ue,be,Xe=ue.length,Rn=Wt(Te)*re||0,tr;if(Rn)for(be=0;be<Xe;++be)ue[be].r+=Rn;if(tr=Pt(ue),Rn)for(be=0;be<Xe;++be)ue[be].r-=Rn;Te.r=tr+Rn}}}function $(Wt){return function(re){var Te=re.parent;re.r*=Wt,Te&&(re.x=Te.x+Wt*re.x,re.y=Te.y+Wt*re.y)}}function _t(Wt){Wt.x0=Math.round(Wt.x0),Wt.y0=Math.round(Wt.y0),Wt.x1=Math.round(Wt.x1),Wt.y1=Math.round(Wt.y1)}function yt(Wt,re,Te,ue,be){for(var Xe=Wt.children,Rn,tr=-1,Mn=Xe.length,vn=Wt.value&&(ue-re)/Wt.value;++tr<Mn;)Rn=Xe[tr],Rn.y0=Te,Rn.y1=be,Rn.x0=re,Rn.x1=re+=Rn.value*vn}function Nt(){var Wt=1,re=1,Te=0,ue=!1;function be(Rn){var tr=Rn.height+1;return Rn.x0=Rn.y0=Te,Rn.x1=Wt,Rn.y1=re/tr,Rn.eachBefore(Xe(re,tr)),ue&&Rn.eachBefore(_t),Rn}function Xe(Rn,tr){return function(Mn){Mn.children&&yt(Mn,Mn.x0,Rn*(Mn.depth+1)/tr,Mn.x1,Rn*(Mn.depth+2)/tr);var vn=Mn.x0,Ar=Mn.y0,or=Mn.x1-Te,cn=Mn.y1-Te;or<vn&&(vn=or=(vn+or)/2),cn<Ar&&(Ar=cn=(Ar+cn)/2),Mn.x0=vn,Mn.y0=Ar,Mn.x1=or,Mn.y1=cn}}return be.round=function(Rn){return arguments.length?(ue=!!Rn,be):ue},be.size=function(Rn){return arguments.length?(Wt=+Rn[0],re=+Rn[1],be):[Wt,re]},be.padding=function(Rn){return arguments.length?(Te=+Rn,be):Te},be}var $t="$",ee={depth:-1},Gt={};function Ht(Wt){return Wt.id}function ae(Wt){return Wt.parentId}function le(){var Wt=Ht,re=ae;function Te(ue){var be,Xe,Rn=ue.length,tr,Mn,vn,Ar=new Array(Rn),or,cn,Pr={};for(Xe=0;Xe<Rn;++Xe)be=ue[Xe],vn=Ar[Xe]=new K(be),(or=Wt(be,Xe,ue))!=null&&(or+="")&&(cn=$t+(vn.id=or),Pr[cn]=cn in Pr?Gt:vn);for(Xe=0;Xe<Rn;++Xe)if(vn=Ar[Xe],or=re(ue[Xe],Xe,ue),or==null||!(or+="")){if(tr)throw new Error("multiple roots");tr=vn}else{if(Mn=Pr[$t+or],!Mn)throw new Error("missing: "+or);if(Mn===Gt)throw new Error("ambiguous: "+or);Mn.children?Mn.children.push(vn):Mn.children=[vn],vn.parent=Mn}if(!tr)throw new Error("no root");if(tr.parent=ee,tr.eachBefore(function(Sr){Sr.depth=Sr.parent.depth+1,--Rn}).eachBefore(F),tr.parent=null,Rn>0)throw new Error("cycle");return tr}return Te.id=function(ue){return arguments.length?(Wt=gt(ue),Te):Wt},Te.parentId=function(ue){return arguments.length?(re=gt(ue),Te):re},Te}function Be(Wt,re){return Wt.parent===re.parent?1:2}function Ce(Wt){var re=Wt.children;return re?re[0]:Wt.t}function We(Wt){var re=Wt.children;return re?re[re.length-1]:Wt.t}function Ye(Wt,re,Te){var ue=Te/(re.i-Wt.i);re.c-=ue,re.s+=Te,Wt.c+=ue,re.z+=Te,re.m+=Te}function wn(Wt){for(var re=0,Te=0,ue=Wt.children,be=ue.length,Xe;--be>=0;)Xe=ue[be],Xe.z+=re,Xe.m+=re,re+=Xe.s+(Te+=Xe.c)}function er(Wt,re,Te){return Wt.a.parent===re.parent?Wt.a:Te}function Lr(Wt,re){this._=Wt,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=re}Lr.prototype=Object.create(K.prototype);function on(Wt){for(var re=new Lr(Wt,0),Te,ue=[re],be,Xe,Rn,tr;Te=ue.pop();)if(Xe=Te._.children)for(Te.children=new Array(tr=Xe.length),Rn=tr-1;Rn>=0;--Rn)ue.push(be=Te.children[Rn]=new Lr(Xe[Rn],Rn)),be.parent=Te;return(re.parent=new Lr(null,0)).children=[re],re}function en(){var Wt=Be,re=1,Te=1,ue=null;function be(vn){var Ar=on(vn);if(Ar.eachAfter(Xe),Ar.parent.m=-Ar.z,Ar.eachBefore(Rn),ue)vn.eachBefore(Mn);else{var or=vn,cn=vn,Pr=vn;vn.eachBefore(function(En){En.x<or.x&&(or=En),En.x>cn.x&&(cn=En),En.depth>Pr.depth&&(Pr=En)});var Sr=or===cn?1:Wt(or,cn)/2,De=Sr-or.x,$e=re/(cn.x+Sr+De),Ve=Te/(Pr.depth||1);vn.eachBefore(function(En){En.x=(En.x+De)*$e,En.y=En.depth*Ve})}return vn}function Xe(vn){var Ar=vn.children,or=vn.parent.children,cn=vn.i?or[vn.i-1]:null;if(Ar){wn(vn);var Pr=(Ar[0].z+Ar[Ar.length-1].z)/2;cn?(vn.z=cn.z+Wt(vn._,cn._),vn.m=vn.z-Pr):vn.z=Pr}else cn&&(vn.z=cn.z+Wt(vn._,cn._));vn.parent.A=tr(vn,cn,vn.parent.A||or[0])}function Rn(vn){vn._.x=vn.z+vn.parent.m,vn.m+=vn.parent.m}function tr(vn,Ar,or){if(Ar){for(var cn=vn,Pr=vn,Sr=Ar,De=cn.parent.children[0],$e=cn.m,Ve=Pr.m,En=Sr.m,xn=De.m,Nn;Sr=We(Sr),cn=Ce(cn),Sr&&cn;)De=Ce(De),Pr=We(Pr),Pr.a=vn,Nn=Sr.z+En-cn.z-$e+Wt(Sr._,cn._),Nn>0&&(Ye(er(Sr,vn,or),vn,Nn),$e+=Nn,Ve+=Nn),En+=Sr.m,$e+=cn.m,xn+=De.m,Ve+=Pr.m;Sr&&!We(Pr)&&(Pr.t=Sr,Pr.m+=En-Ve),cn&&!Ce(De)&&(De.t=cn,De.m+=$e-xn,or=vn)}return or}function Mn(vn){vn.x*=re,vn.y=vn.depth*Te}return be.separation=function(vn){return arguments.length?(Wt=vn,be):Wt},be.size=function(vn){return arguments.length?(ue=!1,re=+vn[0],Te=+vn[1],be):ue?null:[re,Te]},be.nodeSize=function(vn){return arguments.length?(ue=!0,re=+vn[0],Te=+vn[1],be):ue?[re,Te]:null},be}function An(Wt,re,Te,ue,be){for(var Xe=Wt.children,Rn,tr=-1,Mn=Xe.length,vn=Wt.value&&(be-Te)/Wt.value;++tr<Mn;)Rn=Xe[tr],Rn.x0=re,Rn.x1=ue,Rn.y0=Te,Rn.y1=Te+=Rn.value*vn}var Bn=(1+Math.sqrt(5))/2;function gr(Wt,re,Te,ue,be,Xe){for(var Rn=[],tr=re.children,Mn,vn,Ar=0,or=0,cn=tr.length,Pr,Sr,De=re.value,$e,Ve,En,xn,Nn,mn,Dn;Ar<cn;){Pr=be-Te,Sr=Xe-ue;do $e=tr[or++].value;while(!$e&&or<cn);for(Ve=En=$e,mn=Math.max(Sr/Pr,Pr/Sr)/(De*Wt),Dn=$e*$e*mn,Nn=Math.max(En/Dn,Dn/Ve);or<cn;++or){if($e+=vn=tr[or].value,vn<Ve&&(Ve=vn),vn>En&&(En=vn),Dn=$e*$e*mn,xn=Math.max(En/Dn,Dn/Ve),xn>Nn){$e-=vn;break}Nn=xn}Rn.push(Mn={value:$e,dice:Pr<Sr,children:tr.slice(Ar,or)}),Mn.dice?yt(Mn,Te,ue,be,De?ue+=Sr*$e/De:Xe):An(Mn,Te,ue,De?Te+=Pr*$e/De:be,Xe),De-=$e,Ar=or}return Rn}var hi=function Wt(re){function Te(ue,be,Xe,Rn,tr){gr(re,ue,be,Xe,Rn,tr)}return Te.ratio=function(ue){return Wt((ue=+ue)>1?ue:1)},Te}(Bn);function Ae(){var Wt=hi,re=!1,Te=1,ue=1,be=[0],Xe=et,Rn=et,tr=et,Mn=et,vn=et;function Ar(cn){return cn.x0=cn.y0=0,cn.x1=Te,cn.y1=ue,cn.eachBefore(or),be=[0],re&&cn.eachBefore(_t),cn}function or(cn){var Pr=be[cn.depth],Sr=cn.x0+Pr,De=cn.y0+Pr,$e=cn.x1-Pr,Ve=cn.y1-Pr;$e<Sr&&(Sr=$e=(Sr+$e)/2),Ve<De&&(De=Ve=(De+Ve)/2),cn.x0=Sr,cn.y0=De,cn.x1=$e,cn.y1=Ve,cn.children&&(Pr=be[cn.depth+1]=Xe(cn)/2,Sr+=vn(cn)-Pr,De+=Rn(cn)-Pr,$e-=tr(cn)-Pr,Ve-=Mn(cn)-Pr,$e<Sr&&(Sr=$e=(Sr+$e)/2),Ve<De&&(De=Ve=(De+Ve)/2),Wt(cn,Sr,De,$e,Ve))}return Ar.round=function(cn){return arguments.length?(re=!!cn,Ar):re},Ar.size=function(cn){return arguments.length?(Te=+cn[0],ue=+cn[1],Ar):[Te,ue]},Ar.tile=function(cn){return arguments.length?(Wt=gt(cn),Ar):Wt},Ar.padding=function(cn){return arguments.length?Ar.paddingInner(cn).paddingOuter(cn):Ar.paddingInner()},Ar.paddingInner=function(cn){return arguments.length?(Xe=typeof cn=="function"?cn:at(+cn),Ar):Xe},Ar.paddingOuter=function(cn){return arguments.length?Ar.paddingTop(cn).paddingRight(cn).paddingBottom(cn).paddingLeft(cn):Ar.paddingTop()},Ar.paddingTop=function(cn){return arguments.length?(Rn=typeof cn=="function"?cn:at(+cn),Ar):Rn},Ar.paddingRight=function(cn){return arguments.length?(tr=typeof cn=="function"?cn:at(+cn),Ar):tr},Ar.paddingBottom=function(cn){return arguments.length?(Mn=typeof cn=="function"?cn:at(+cn),Ar):Mn},Ar.paddingLeft=function(cn){return arguments.length?(vn=typeof cn=="function"?cn:at(+cn),Ar):vn},Ar}function Me(Wt,re,Te,ue,be){var Xe=Wt.children,Rn,tr=Xe.length,Mn,vn=new Array(tr+1);for(vn[0]=Mn=Rn=0;Rn<tr;++Rn)vn[Rn+1]=Mn+=Xe[Rn].value;Ar(0,tr,Wt.value,re,Te,ue,be);function Ar(or,cn,Pr,Sr,De,$e,Ve){if(or>=cn-1){var En=Xe[or];En.x0=Sr,En.y0=De,En.x1=$e,En.y1=Ve;return}for(var xn=vn[or],Nn=Pr/2+xn,mn=or+1,Dn=cn-1;mn<Dn;){var $n=mn+Dn>>>1;vn[$n]<Nn?mn=$n+1:Dn=$n}Nn-vn[mn-1]<vn[mn]-Nn&&or+1<mn&&--mn;var Wn=vn[mn]-xn,_n=Pr-Wn;if($e-Sr>Ve-De){var xr=(Sr*_n+$e*Wn)/Pr;Ar(or,mn,Wn,Sr,De,xr,Ve),Ar(mn,cn,_n,xr,De,$e,Ve)}else{var mr=(De*_n+Ve*Wn)/Pr;Ar(or,mn,Wn,Sr,De,$e,mr),Ar(mn,cn,_n,Sr,mr,$e,Ve)}}}function Qt(Wt,re,Te,ue,be){(Wt.depth&1?An:yt)(Wt,re,Te,ue,be)}var ge=function Wt(re){function Te(ue,be,Xe,Rn,tr){if((Mn=ue._squarify)&&Mn.ratio===re)for(var Mn,vn,Ar,or,cn=-1,Pr,Sr=Mn.length,De=ue.value;++cn<Sr;){for(vn=Mn[cn],Ar=vn.children,or=vn.value=0,Pr=Ar.length;or<Pr;++or)vn.value+=Ar[or].value;vn.dice?yt(vn,be,Xe,Rn,Xe+=(tr-Xe)*vn.value/De):An(vn,be,Xe,be+=(Rn-be)*vn.value/De,tr),De-=vn.value}else ue._squarify=Mn=gr(re,ue,be,Xe,Rn,tr),Mn.ratio=re}return Te.ratio=function(ue){return Wt((ue=+ue)>1?ue:1)},Te}(Bn);t.cluster=a,t.hierarchy=A,t.pack=k,t.packEnclose=Z,t.packSiblings=z,t.partition=Nt,t.stratify=le,t.tree=en,t.treemap=Ae,t.treemapBinary=Me,t.treemapDice=yt,t.treemapResquarify=ge,t.treemapSlice=An,t.treemapSliceDice=Qt,t.treemapSquarify=hi,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";var u=Math.PI,s=2*u,c=1e-6,r=s-c;function h(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new h}h.prototype=n.prototype={constructor:h,moveTo:function(a,o){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,o){this._+="L"+(this._x1=+a)+","+(this._y1=+o)},quadraticCurveTo:function(a,o,l,f){this._+="Q"+ +a+","+ +o+","+(this._x1=+l)+","+(this._y1=+f)},bezierCurveTo:function(a,o,l,f,v,b){this._+="C"+ +a+","+ +o+","+ +l+","+ +f+","+(this._x1=+v)+","+(this._y1=+b)},arcTo:function(a,o,l,f,v){a=+a,o=+o,l=+l,f=+f,v=+v;var b=this._x1,g=this._y1,m=l-a,_=f-o,M=b-a,x=g-o,y=M*M+x*x;if(v<0)throw new Error("negative radius: "+v);if(this._x1===null)this._+="M"+(this._x1=a)+","+(this._y1=o);else if(y>c)if(!(Math.abs(x*m-_*M)>c)||!v)this._+="L"+(this._x1=a)+","+(this._y1=o);else{var S=l-b,P=f-g,A=m*m+_*_,O=S*S+P*P,L=Math.sqrt(A),H=Math.sqrt(y),F=v*Math.tan((u-Math.acos((A+y-O)/(2*L*H)))/2),K=F/H,G=F/L;Math.abs(K-1)>c&&(this._+="L"+(a+K*M)+","+(o+K*x)),this._+="A"+v+","+v+",0,0,"+ +(x*S>M*P)+","+(this._x1=a+G*m)+","+(this._y1=o+G*_)}},arc:function(a,o,l,f,v,b){a=+a,o=+o,l=+l,b=!!b;var g=l*Math.cos(f),m=l*Math.sin(f),_=a+g,M=o+m,x=1^b,y=b?f-v:v-f;if(l<0)throw new Error("negative radius: "+l);this._x1===null?this._+="M"+_+","+M:(Math.abs(this._x1-_)>c||Math.abs(this._y1-M)>c)&&(this._+="L"+_+","+M),!!l&&(y<0&&(y=y%s+s),y>r?this._+="A"+l+","+l+",0,1,"+x+","+(a-g)+","+(o-m)+"A"+l+","+l+",0,1,"+x+","+(this._x1=_)+","+(this._y1=M):y>c&&(this._+="A"+l+","+l+",0,"+ +(y>=u)+","+x+","+(this._x1=a+l*Math.cos(v))+","+(this._y1=o+l*Math.sin(v))))},rect:function(a,o,l,f){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)+"h"+ +l+"v"+ +f+"h"+-l+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-path@2.0.0@d3-path/dist/d3-path.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";var u=Math.PI,s=2*u,c=1e-6,r=s-c;function h(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new h}h.prototype=n.prototype={constructor:h,moveTo:function(a,o){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,o){this._+="L"+(this._x1=+a)+","+(this._y1=+o)},quadraticCurveTo:function(a,o,l,f){this._+="Q"+ +a+","+ +o+","+(this._x1=+l)+","+(this._y1=+f)},bezierCurveTo:function(a,o,l,f,v,b){this._+="C"+ +a+","+ +o+","+ +l+","+ +f+","+(this._x1=+v)+","+(this._y1=+b)},arcTo:function(a,o,l,f,v){a=+a,o=+o,l=+l,f=+f,v=+v;var b=this._x1,g=this._y1,m=l-a,_=f-o,M=b-a,x=g-o,y=M*M+x*x;if(v<0)throw new Error("negative radius: "+v);if(this._x1===null)this._+="M"+(this._x1=a)+","+(this._y1=o);else if(y>c)if(!(Math.abs(x*m-_*M)>c)||!v)this._+="L"+(this._x1=a)+","+(this._y1=o);else{var S=l-b,P=f-g,A=m*m+_*_,O=S*S+P*P,L=Math.sqrt(A),H=Math.sqrt(y),F=v*Math.tan((u-Math.acos((A+y-O)/(2*L*H)))/2),K=F/H,G=F/L;Math.abs(K-1)>c&&(this._+="L"+(a+K*M)+","+(o+K*x)),this._+="A"+v+","+v+",0,0,"+ +(x*S>M*P)+","+(this._x1=a+G*m)+","+(this._y1=o+G*_)}},arc:function(a,o,l,f,v,b){a=+a,o=+o,l=+l,b=!!b;var g=l*Math.cos(f),m=l*Math.sin(f),_=a+g,M=o+m,x=1^b,y=b?f-v:v-f;if(l<0)throw new Error("negative radius: "+l);this._x1===null?this._+="M"+_+","+M:(Math.abs(this._x1-_)>c||Math.abs(this._y1-M)>c)&&(this._+="L"+_+","+M),!!l&&(y<0&&(y=y%s+s),y>r?this._+="A"+l+","+l+",0,1,"+x+","+(a-g)+","+(o-m)+"A"+l+","+l+",0,1,"+x+","+(this._x1=_)+","+(this._y1=M):y>c&&(this._+="A"+l+","+l+",0,"+ +(y>=u)+","+x+","+(this._x1=a+l*Math.cos(v))+","+(this._y1=o+l*Math.sin(v))))},rect:function(a,o,l,f){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)+"h"+ +l+"v"+ +f+"h"+-l+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-sankey@0.9.1@d3-sankey/dist/d3-sankey.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(u,s){s(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"),e("./node_modules/_d3-collection@1.0.7@d3-collection/dist/d3-collection.js"),e("./node_modules/_d3-shape@1.3.7@d3-shape/dist/d3-shape.js"))})(this,function(u,s,c,r){"use strict";function h(O){return O.target.depth}function n(O){return O.depth}function i(O,L){return L-1-O.height}function a(O,L){return O.sourceLinks.length?O.depth:L-1}function o(O){return O.targetLinks.length?O.depth:O.sourceLinks.length?s.min(O.sourceLinks,h)-1:0}function l(O){return function(){return O}}function f(O,L){return b(O.source,L.source)||O.index-L.index}function v(O,L){return b(O.target,L.target)||O.index-L.index}function b(O,L){return O.y0-L.y0}function g(O){return O.value}function m(O){return O.index}function _(O){return O.nodes}function M(O){return O.links}function x(O,L){var H=O.get(L);if(!H)throw new Error("missing: "+L);return H}function y(){var O=0,L=0,H=1,F=1,K=24,G=8,U=m,Z=a,J,rt=_,vt=M,mt=6;function ut(){var At={nodes:rt.apply(null,arguments),links:vt.apply(null,arguments)};return Rt(At),Ft(At),wt(At),Mt(At),St(At),At}ut.update=function(At){return St(At),At},ut.nodeId=function(At){return arguments.length?(U=typeof At=="function"?At:l(At),ut):U},ut.nodeAlign=function(At){return arguments.length?(Z=typeof At=="function"?At:l(At),ut):Z},ut.nodeSort=function(At){return arguments.length?(J=At,ut):J},ut.nodeWidth=function(At){return arguments.length?(K=+At,ut):K},ut.nodePadding=function(At){return arguments.length?(G=+At,ut):G},ut.nodes=function(At){return arguments.length?(rt=typeof At=="function"?At:l(At),ut):rt},ut.links=function(At){return arguments.length?(vt=typeof At=="function"?At:l(At),ut):vt},ut.size=function(At){return arguments.length?(O=L=0,H=+At[0],F=+At[1],ut):[H-O,F-L]},ut.extent=function(At){return arguments.length?(O=+At[0][0],H=+At[1][0],L=+At[0][1],F=+At[1][1],ut):[[O,L],[H,F]]},ut.iterations=function(At){return arguments.length?(mt=+At,ut):mt};function Rt(At){At.nodes.forEach(function(Pt,z){Pt.index=z,Pt.sourceLinks=[],Pt.targetLinks=[]});var nt=c.map(At.nodes,U);At.links.forEach(function(Pt,z){Pt.index=z;var q=Pt.source,gt=Pt.target;typeof q!="object"&&(q=Pt.source=x(nt,q)),typeof gt!="object"&&(gt=Pt.target=x(nt,gt)),q.sourceLinks.push(Pt),gt.targetLinks.push(Pt)})}function Ft(At){At.nodes.forEach(function(nt){nt.value=Math.max(s.sum(nt.sourceLinks,g),s.sum(nt.targetLinks,g))})}function wt(At){var nt,Pt,z,q=At.nodes.length;for(nt=At.nodes,Pt=[],z=0;nt.length;++z,nt=Pt,Pt=[]){if(z>q)throw new Error("circular link");nt.forEach(function(et){et.depth=z,et.sourceLinks.forEach(function(at){Pt.indexOf(at.target)<0&&Pt.push(at.target)})})}for(nt=At.nodes,Pt=[],z=0;nt.length;++z,nt=Pt,Pt=[]){if(z>q)throw new Error("circular link");nt.forEach(function(et){et.height=z,et.targetLinks.forEach(function(at){Pt.indexOf(at.source)<0&&Pt.push(at.source)})})}var gt=(H-O-K)/(z-1);At.nodes.forEach(function(et){et.x1=(et.x0=O+Math.max(0,Math.min(z-1,Math.floor(Z.call(null,et,z))))*gt)+K})}function Mt(At){var nt=c.nest().key(function(xt){return xt.x0}).sortKeys(s.ascending).entries(At.nodes).map(function(xt){return xt.values});q(),at();for(var Pt=.9,z=mt;z>0;--z,Pt*=.9)et(Pt),at(),gt(Pt),at();function q(){var xt=s.min(nt,function(k){return(F-L-(k.length-1)*G)/s.sum(k,g)});nt.forEach(function(k){J!=null&&k.sort(J),k.forEach(function(ot,it){ot.y1=(ot.y0=it)+ot.value*xt})}),At.links.forEach(function(k){k.width=k.value*xt})}function gt(xt){nt.forEach(function(k){k.forEach(function(ot){var it,$,_t,yt,Nt=ot.y0;try{for(var $t=t.__values(ot.sourceLinks.sort(v)),ee=$t.next();!ee.done;ee=$t.next()){var Gt=ee.value,Ht=Gt.target,ae=Gt.width,le=Gt.value;if(le>0){var Be=0;try{for(var Ce=(_t=void 0,t.__values(Ht.targetLinks)),We=Ce.next();!We.done;We=Ce.next()){var Ye=We.value,wn=Ye.source,er=Ye.width;if(wn===ot)break;Be+=er+G/2}}catch(Lr){_t={error:Lr}}finally{try{We&&!We.done&&(yt=Ce.return)&&yt.call(Ce)}finally{if(_t)throw _t.error}}Be=(Nt-Be-Ht.y0)*xt*(le/Math.min(ot.value,Ht.value)),Ht.y0+=Be,Ht.y1+=Be}Nt+=ae+G/2}}catch(Lr){it={error:Lr}}finally{try{ee&&!ee.done&&($=$t.return)&&$.call($t)}finally{if(it)throw it.error}}})})}function et(xt){nt.slice().reverse().forEach(function(k){k.forEach(function(ot){var it,$,_t,yt,Nt=ot.y0;try{for(var $t=t.__values(ot.targetLinks.sort(f)),ee=$t.next();!ee.done;ee=$t.next()){var Gt=ee.value,Ht=Gt.source,ae=Gt.width,le=Gt.value;if(le>0){var Be=0;try{for(var Ce=(_t=void 0,t.__values(Ht.sourceLinks)),We=Ce.next();!We.done;We=Ce.next()){var Ye=We.value,wn=Ye.target,er=Ye.width;if(wn===ot)break;Be+=er+G/2}}catch(Lr){_t={error:Lr}}finally{try{We&&!We.done&&(yt=Ce.return)&&yt.call(Ce)}finally{if(_t)throw _t.error}}Be=(Nt-Be-Ht.y0)*xt*(le/Math.min(ot.value,Ht.value)),Ht.y0+=Be,Ht.y1+=Be}Nt+=ae+G/2}}catch(Lr){it={error:Lr}}finally{try{ee&&!ee.done&&($=$t.return)&&$.call($t)}finally{if(it)throw it.error}}})})}function at(){nt.forEach(function(xt){var k,ot,it=L,$=xt.length,_t;for(J===void 0&&xt.sort(b),_t=0;_t<$;++_t)k=xt[_t],ot=it-k.y0,ot>0&&(k.y0+=ot,k.y1+=ot),it=k.y1+G;if(ot=it-G-F,ot>0)for(it=k.y0-=ot,k.y1-=ot,_t=$-2;_t>=0;--_t)k=xt[_t],ot=k.y1+G-it,ot>0&&(k.y0-=ot,k.y1-=ot),it=k.y0})}}function St(At){At.nodes.forEach(function(nt){nt.sourceLinks.sort(v),nt.targetLinks.sort(f)}),At.nodes.forEach(function(nt){var Pt=nt.y0,z=Pt;nt.sourceLinks.forEach(function(q){q.y0=Pt+q.width/2,Pt+=q.width}),nt.targetLinks.forEach(function(q){q.y1=z+q.width/2,z+=q.width})})}return ut}function S(O){return[O.source.x1,O.y0]}function P(O){return[O.target.x0,O.y1]}function A(){return r.linkHorizontal().source(S).target(P)}u.sankey=y,u.sankeyCenter=o,u.sankeyLeft=n,u.sankeyRight=i,u.sankeyJustify=a,u.sankeyLinkHorizontal=A,Object.defineProperty(u,"__esModule",{value:!0})})},"./node_modules/_d3-shape@1.3.7@d3-shape/dist/d3-shape.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js"))})(this,function(t,u){"use strict";function s(Ne){return function(){return Ne}}var c=Math.abs,r=Math.atan2,h=Math.cos,n=Math.max,i=Math.min,a=Math.sin,o=Math.sqrt,l=1e-12,f=Math.PI,v=f/2,b=2*f;function g(Ne){return Ne>1?0:Ne<-1?f:Math.acos(Ne)}function m(Ne){return Ne>=1?v:Ne<=-1?-v:Math.asin(Ne)}function _(Ne){return Ne.innerRadius}function M(Ne){return Ne.outerRadius}function x(Ne){return Ne.startAngle}function y(Ne){return Ne.endAngle}function S(Ne){return Ne&&Ne.padAngle}function P(Ne,se,Yt,Ee,sn,Fn,rr,qn){var $r=Yt-Ne,bi=Ee-se,wi=rr-sn,Vi=qn-Fn,sa=Vi*$r-wi*bi;if(!(sa*sa<l))return sa=(wi*(se-Fn)-Vi*(Ne-sn))/sa,[Ne+sa*$r,se+sa*bi]}function A(Ne,se,Yt,Ee,sn,Fn,rr){var qn=Ne-Yt,$r=se-Ee,bi=(rr?Fn:-Fn)/o(qn*qn+$r*$r),wi=bi*$r,Vi=-bi*qn,sa=Ne+wi,$a=se+Vi,Ca=Yt+wi,_o=Ee+Vi,Fa=(sa+Ca)/2,uo=($a+_o)/2,vo=Ca-sa,Ja=_o-$a,To=vo*vo+Ja*Ja,hs=sn-Fn,zo=sa*_o-Ca*$a,bs=(Ja<0?-1:1)*o(n(0,hs*hs*To-zo*zo)),Ao=(zo*Ja-vo*bs)/To,Wa=(-zo*vo-Ja*bs)/To,Rs=(zo*Ja+vo*bs)/To,ss=(-zo*vo+Ja*bs)/To,Ba=Ao-Fa,gn=Wa-uo,cr=Rs-Fa,Gr=ss-uo;return Ba*Ba+gn*gn>cr*cr+Gr*Gr&&(Ao=Rs,Wa=ss),{cx:Ao,cy:Wa,x01:-wi,y01:-Vi,x11:Ao*(sn/hs-1),y11:Wa*(sn/hs-1)}}function O(){var Ne=_,se=M,Yt=s(0),Ee=null,sn=x,Fn=y,rr=S,qn=null;function $r(){var bi,wi,Vi=+Ne.apply(this,arguments),sa=+se.apply(this,arguments),$a=sn.apply(this,arguments)-v,Ca=Fn.apply(this,arguments)-v,_o=c(Ca-$a),Fa=Ca>$a;if(qn||(qn=bi=u.path()),sa<Vi&&(wi=sa,sa=Vi,Vi=wi),!(sa>l))qn.moveTo(0,0);else if(_o>b-l)qn.moveTo(sa*h($a),sa*a($a)),qn.arc(0,0,sa,$a,Ca,!Fa),Vi>l&&(qn.moveTo(Vi*h(Ca),Vi*a(Ca)),qn.arc(0,0,Vi,Ca,$a,Fa));else{var uo=$a,vo=Ca,Ja=$a,To=Ca,hs=_o,zo=_o,bs=rr.apply(this,arguments)/2,Ao=bs>l&&(Ee?+Ee.apply(this,arguments):o(Vi*Vi+sa*sa)),Wa=i(c(sa-Vi)/2,+Yt.apply(this,arguments)),Rs=Wa,ss=Wa,Ba,gn;if(Ao>l){var cr=m(Ao/Vi*a(bs)),Gr=m(Ao/sa*a(bs));(hs-=cr*2)>l?(cr*=Fa?1:-1,Ja+=cr,To-=cr):(hs=0,Ja=To=($a+Ca)/2),(zo-=Gr*2)>l?(Gr*=Fa?1:-1,uo+=Gr,vo-=Gr):(zo=0,uo=vo=($a+Ca)/2)}var Ui=sa*h(uo),Ua=sa*a(uo),xo=Vi*h(To),po=Vi*a(To);if(Wa>l){var ea=sa*h(vo),Qa=sa*a(vo),Ds=Vi*h(Ja),Es=Vi*a(Ja),Za;if(_o<f&&(Za=P(Ui,Ua,Ds,Es,ea,Qa,xo,po))){var ru=Ui-Za[0],Qo=Ua-Za[1],Os=ea-Za[0],$s=Qa-Za[1],Ss=1/a(g((ru*Os+Qo*$s)/(o(ru*ru+Qo*Qo)*o(Os*Os+$s*$s)))/2),ps=o(Za[0]*Za[0]+Za[1]*Za[1]);Rs=i(Wa,(Vi-ps)/(Ss-1)),ss=i(Wa,(sa-ps)/(Ss+1))}}zo>l?ss>l?(Ba=A(Ds,Es,Ui,Ua,sa,ss,Fa),gn=A(ea,Qa,xo,po,sa,ss,Fa),qn.moveTo(Ba.cx+Ba.x01,Ba.cy+Ba.y01),ss<Wa?qn.arc(Ba.cx,Ba.cy,ss,r(Ba.y01,Ba.x01),r(gn.y01,gn.x01),!Fa):(qn.arc(Ba.cx,Ba.cy,ss,r(Ba.y01,Ba.x01),r(Ba.y11,Ba.x11),!Fa),qn.arc(0,0,sa,r(Ba.cy+Ba.y11,Ba.cx+Ba.x11),r(gn.cy+gn.y11,gn.cx+gn.x11),!Fa),qn.arc(gn.cx,gn.cy,ss,r(gn.y11,gn.x11),r(gn.y01,gn.x01),!Fa))):(qn.moveTo(Ui,Ua),qn.arc(0,0,sa,uo,vo,!Fa)):qn.moveTo(Ui,Ua),!(Vi>l)||!(hs>l)?qn.lineTo(xo,po):Rs>l?(Ba=A(xo,po,ea,Qa,Vi,-Rs,Fa),gn=A(Ui,Ua,Ds,Es,Vi,-Rs,Fa),qn.lineTo(Ba.cx+Ba.x01,Ba.cy+Ba.y01),Rs<Wa?qn.arc(Ba.cx,Ba.cy,Rs,r(Ba.y01,Ba.x01),r(gn.y01,gn.x01),!Fa):(qn.arc(Ba.cx,Ba.cy,Rs,r(Ba.y01,Ba.x01),r(Ba.y11,Ba.x11),!Fa),qn.arc(0,0,Vi,r(Ba.cy+Ba.y11,Ba.cx+Ba.x11),r(gn.cy+gn.y11,gn.cx+gn.x11),Fa),qn.arc(gn.cx,gn.cy,Rs,r(gn.y11,gn.x11),r(gn.y01,gn.x01),!Fa))):qn.arc(0,0,Vi,To,Ja,Fa)}if(qn.closePath(),bi)return qn=null,bi+""||null}return $r.centroid=function(){var bi=(+Ne.apply(this,arguments)+ +se.apply(this,arguments))/2,wi=(+sn.apply(this,arguments)+ +Fn.apply(this,arguments))/2-f/2;return[h(wi)*bi,a(wi)*bi]},$r.innerRadius=function(bi){return arguments.length?(Ne=typeof bi=="function"?bi:s(+bi),$r):Ne},$r.outerRadius=function(bi){return arguments.length?(se=typeof bi=="function"?bi:s(+bi),$r):se},$r.cornerRadius=function(bi){return arguments.length?(Yt=typeof bi=="function"?bi:s(+bi),$r):Yt},$r.padRadius=function(bi){return arguments.length?(Ee=bi==null?null:typeof bi=="function"?bi:s(+bi),$r):Ee},$r.startAngle=function(bi){return arguments.length?(sn=typeof bi=="function"?bi:s(+bi),$r):sn},$r.endAngle=function(bi){return arguments.length?(Fn=typeof bi=="function"?bi:s(+bi),$r):Fn},$r.padAngle=function(bi){return arguments.length?(rr=typeof bi=="function"?bi:s(+bi),$r):rr},$r.context=function(bi){return arguments.length?(qn=bi==null?null:bi,$r):qn},$r}function L(Ne){this._context=Ne}L.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1,this._line?this._context.lineTo(se,Yt):this._context.moveTo(se,Yt);break;case 1:this._point=2;default:this._context.lineTo(se,Yt);break}}};function H(Ne){return new L(Ne)}function F(Ne){return Ne[0]}function K(Ne){return Ne[1]}function G(){var Ne=F,se=K,Yt=s(!0),Ee=null,sn=H,Fn=null;function rr(qn){var $r,bi=qn.length,wi,Vi=!1,sa;for(Ee==null&&(Fn=sn(sa=u.path())),$r=0;$r<=bi;++$r)!($r<bi&&Yt(wi=qn[$r],$r,qn))===Vi&&((Vi=!Vi)?Fn.lineStart():Fn.lineEnd()),Vi&&Fn.point(+Ne(wi,$r,qn),+se(wi,$r,qn));if(sa)return Fn=null,sa+""||null}return rr.x=function(qn){return arguments.length?(Ne=typeof qn=="function"?qn:s(+qn),rr):Ne},rr.y=function(qn){return arguments.length?(se=typeof qn=="function"?qn:s(+qn),rr):se},rr.defined=function(qn){return arguments.length?(Yt=typeof qn=="function"?qn:s(!!qn),rr):Yt},rr.curve=function(qn){return arguments.length?(sn=qn,Ee!=null&&(Fn=sn(Ee)),rr):sn},rr.context=function(qn){return arguments.length?(qn==null?Ee=Fn=null:Fn=sn(Ee=qn),rr):Ee},rr}function U(){var Ne=F,se=null,Yt=s(0),Ee=K,sn=s(!0),Fn=null,rr=H,qn=null;function $r(wi){var Vi,sa,$a,Ca=wi.length,_o,Fa=!1,uo,vo=new Array(Ca),Ja=new Array(Ca);for(Fn==null&&(qn=rr(uo=u.path())),Vi=0;Vi<=Ca;++Vi){if(!(Vi<Ca&&sn(_o=wi[Vi],Vi,wi))===Fa)if(Fa=!Fa)sa=Vi,qn.areaStart(),qn.lineStart();else{for(qn.lineEnd(),qn.lineStart(),$a=Vi-1;$a>=sa;--$a)qn.point(vo[$a],Ja[$a]);qn.lineEnd(),qn.areaEnd()}Fa&&(vo[Vi]=+Ne(_o,Vi,wi),Ja[Vi]=+Yt(_o,Vi,wi),qn.point(se?+se(_o,Vi,wi):vo[Vi],Ee?+Ee(_o,Vi,wi):Ja[Vi]))}if(uo)return qn=null,uo+""||null}function bi(){return G().defined(sn).curve(rr).context(Fn)}return $r.x=function(wi){return arguments.length?(Ne=typeof wi=="function"?wi:s(+wi),se=null,$r):Ne},$r.x0=function(wi){return arguments.length?(Ne=typeof wi=="function"?wi:s(+wi),$r):Ne},$r.x1=function(wi){return arguments.length?(se=wi==null?null:typeof wi=="function"?wi:s(+wi),$r):se},$r.y=function(wi){return arguments.length?(Yt=typeof wi=="function"?wi:s(+wi),Ee=null,$r):Yt},$r.y0=function(wi){return arguments.length?(Yt=typeof wi=="function"?wi:s(+wi),$r):Yt},$r.y1=function(wi){return arguments.length?(Ee=wi==null?null:typeof wi=="function"?wi:s(+wi),$r):Ee},$r.lineX0=$r.lineY0=function(){return bi().x(Ne).y(Yt)},$r.lineY1=function(){return bi().x(Ne).y(Ee)},$r.lineX1=function(){return bi().x(se).y(Yt)},$r.defined=function(wi){return arguments.length?(sn=typeof wi=="function"?wi:s(!!wi),$r):sn},$r.curve=function(wi){return arguments.length?(rr=wi,Fn!=null&&(qn=rr(Fn)),$r):rr},$r.context=function(wi){return arguments.length?(wi==null?Fn=qn=null:qn=rr(Fn=wi),$r):Fn},$r}function Z(Ne,se){return se<Ne?-1:se>Ne?1:se>=Ne?0:NaN}function J(Ne){return Ne}function rt(){var Ne=J,se=Z,Yt=null,Ee=s(0),sn=s(b),Fn=s(0);function rr(qn){var $r,bi=qn.length,wi,Vi,sa=0,$a=new Array(bi),Ca=new Array(bi),_o=+Ee.apply(this,arguments),Fa=Math.min(b,Math.max(-b,sn.apply(this,arguments)-_o)),uo,vo=Math.min(Math.abs(Fa)/bi,Fn.apply(this,arguments)),Ja=vo*(Fa<0?-1:1),To;for($r=0;$r<bi;++$r)(To=Ca[$a[$r]=$r]=+Ne(qn[$r],$r,qn))>0&&(sa+=To);for(se!=null?$a.sort(function(hs,zo){return se(Ca[hs],Ca[zo])}):Yt!=null&&$a.sort(function(hs,zo){return Yt(qn[hs],qn[zo])}),$r=0,Vi=sa?(Fa-bi*Ja)/sa:0;$r<bi;++$r,_o=uo)wi=$a[$r],To=Ca[wi],uo=_o+(To>0?To*Vi:0)+Ja,Ca[wi]={data:qn[wi],index:$r,value:To,startAngle:_o,endAngle:uo,padAngle:vo};return Ca}return rr.value=function(qn){return arguments.length?(Ne=typeof qn=="function"?qn:s(+qn),rr):Ne},rr.sortValues=function(qn){return arguments.length?(se=qn,Yt=null,rr):se},rr.sort=function(qn){return arguments.length?(Yt=qn,se=null,rr):Yt},rr.startAngle=function(qn){return arguments.length?(Ee=typeof qn=="function"?qn:s(+qn),rr):Ee},rr.endAngle=function(qn){return arguments.length?(sn=typeof qn=="function"?qn:s(+qn),rr):sn},rr.padAngle=function(qn){return arguments.length?(Fn=typeof qn=="function"?qn:s(+qn),rr):Fn},rr}var vt=ut(H);function mt(Ne){this._curve=Ne}mt.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(se,Yt){this._curve.point(Yt*Math.sin(se),Yt*-Math.cos(se))}};function ut(Ne){function se(Yt){return new mt(Ne(Yt))}return se._curve=Ne,se}function Rt(Ne){var se=Ne.curve;return Ne.angle=Ne.x,delete Ne.x,Ne.radius=Ne.y,delete Ne.y,Ne.curve=function(Yt){return arguments.length?se(ut(Yt)):se()._curve},Ne}function Ft(){return Rt(G().curve(vt))}function wt(){var Ne=U().curve(vt),se=Ne.curve,Yt=Ne.lineX0,Ee=Ne.lineX1,sn=Ne.lineY0,Fn=Ne.lineY1;return Ne.angle=Ne.x,delete Ne.x,Ne.startAngle=Ne.x0,delete Ne.x0,Ne.endAngle=Ne.x1,delete Ne.x1,Ne.radius=Ne.y,delete Ne.y,Ne.innerRadius=Ne.y0,delete Ne.y0,Ne.outerRadius=Ne.y1,delete Ne.y1,Ne.lineStartAngle=function(){return Rt(Yt())},delete Ne.lineX0,Ne.lineEndAngle=function(){return Rt(Ee())},delete Ne.lineX1,Ne.lineInnerRadius=function(){return Rt(sn())},delete Ne.lineY0,Ne.lineOuterRadius=function(){return Rt(Fn())},delete Ne.lineY1,Ne.curve=function(rr){return arguments.length?se(ut(rr)):se()._curve},Ne}function Mt(Ne,se){return[(se=+se)*Math.cos(Ne-=Math.PI/2),se*Math.sin(Ne)]}var St=Array.prototype.slice;function At(Ne){return Ne.source}function nt(Ne){return Ne.target}function Pt(Ne){var se=At,Yt=nt,Ee=F,sn=K,Fn=null;function rr(){var qn,$r=St.call(arguments),bi=se.apply(this,$r),wi=Yt.apply(this,$r);if(Fn||(Fn=qn=u.path()),Ne(Fn,+Ee.apply(this,($r[0]=bi,$r)),+sn.apply(this,$r),+Ee.apply(this,($r[0]=wi,$r)),+sn.apply(this,$r)),qn)return Fn=null,qn+""||null}return rr.source=function(qn){return arguments.length?(se=qn,rr):se},rr.target=function(qn){return arguments.length?(Yt=qn,rr):Yt},rr.x=function(qn){return arguments.length?(Ee=typeof qn=="function"?qn:s(+qn),rr):Ee},rr.y=function(qn){return arguments.length?(sn=typeof qn=="function"?qn:s(+qn),rr):sn},rr.context=function(qn){return arguments.length?(Fn=qn==null?null:qn,rr):Fn},rr}function z(Ne,se,Yt,Ee,sn){Ne.moveTo(se,Yt),Ne.bezierCurveTo(se=(se+Ee)/2,Yt,se,sn,Ee,sn)}function q(Ne,se,Yt,Ee,sn){Ne.moveTo(se,Yt),Ne.bezierCurveTo(se,Yt=(Yt+sn)/2,Ee,Yt,Ee,sn)}function gt(Ne,se,Yt,Ee,sn){var Fn=Mt(se,Yt),rr=Mt(se,Yt=(Yt+sn)/2),qn=Mt(Ee,Yt),$r=Mt(Ee,sn);Ne.moveTo(Fn[0],Fn[1]),Ne.bezierCurveTo(rr[0],rr[1],qn[0],qn[1],$r[0],$r[1])}function et(){return Pt(z)}function at(){return Pt(q)}function xt(){var Ne=Pt(gt);return Ne.angle=Ne.x,delete Ne.x,Ne.radius=Ne.y,delete Ne.y,Ne}var k={draw:function(se,Yt){var Ee=Math.sqrt(Yt/f);se.moveTo(Ee,0),se.arc(0,0,Ee,0,b)}},ot={draw:function(se,Yt){var Ee=Math.sqrt(Yt/5)/2;se.moveTo(-3*Ee,-Ee),se.lineTo(-Ee,-Ee),se.lineTo(-Ee,-3*Ee),se.lineTo(Ee,-3*Ee),se.lineTo(Ee,-Ee),se.lineTo(3*Ee,-Ee),se.lineTo(3*Ee,Ee),se.lineTo(Ee,Ee),se.lineTo(Ee,3*Ee),se.lineTo(-Ee,3*Ee),se.lineTo(-Ee,Ee),se.lineTo(-3*Ee,Ee),se.closePath()}},it=Math.sqrt(1/3),$=it*2,_t={draw:function(se,Yt){var Ee=Math.sqrt(Yt/$),sn=Ee*it;se.moveTo(0,-Ee),se.lineTo(sn,0),se.lineTo(0,Ee),se.lineTo(-sn,0),se.closePath()}},yt=.8908130915292852,Nt=Math.sin(f/10)/Math.sin(7*f/10),$t=Math.sin(b/10)*Nt,ee=-Math.cos(b/10)*Nt,Gt={draw:function(se,Yt){var Ee=Math.sqrt(Yt*yt),sn=$t*Ee,Fn=ee*Ee;se.moveTo(0,-Ee),se.lineTo(sn,Fn);for(var rr=1;rr<5;++rr){var qn=b*rr/5,$r=Math.cos(qn),bi=Math.sin(qn);se.lineTo(bi*Ee,-$r*Ee),se.lineTo($r*sn-bi*Fn,bi*sn+$r*Fn)}se.closePath()}},Ht={draw:function(se,Yt){var Ee=Math.sqrt(Yt),sn=-Ee/2;se.rect(sn,sn,Ee,Ee)}},ae=Math.sqrt(3),le={draw:function(se,Yt){var Ee=-Math.sqrt(Yt/(ae*3));se.moveTo(0,Ee*2),se.lineTo(-ae*Ee,-Ee),se.lineTo(ae*Ee,-Ee),se.closePath()}},Be=-.5,Ce=Math.sqrt(3)/2,We=1/Math.sqrt(12),Ye=(We/2+1)*3,wn={draw:function(se,Yt){var Ee=Math.sqrt(Yt/Ye),sn=Ee/2,Fn=Ee*We,rr=sn,qn=Ee*We+Ee,$r=-rr,bi=qn;se.moveTo(sn,Fn),se.lineTo(rr,qn),se.lineTo($r,bi),se.lineTo(Be*sn-Ce*Fn,Ce*sn+Be*Fn),se.lineTo(Be*rr-Ce*qn,Ce*rr+Be*qn),se.lineTo(Be*$r-Ce*bi,Ce*$r+Be*bi),se.lineTo(Be*sn+Ce*Fn,Be*Fn-Ce*sn),se.lineTo(Be*rr+Ce*qn,Be*qn-Ce*rr),se.lineTo(Be*$r+Ce*bi,Be*bi-Ce*$r),se.closePath()}},er=[k,ot,_t,Ht,Gt,le,wn];function Lr(){var Ne=s(k),se=s(64),Yt=null;function Ee(){var sn;if(Yt||(Yt=sn=u.path()),Ne.apply(this,arguments).draw(Yt,+se.apply(this,arguments)),sn)return Yt=null,sn+""||null}return Ee.type=function(sn){return arguments.length?(Ne=typeof sn=="function"?sn:s(sn),Ee):Ne},Ee.size=function(sn){return arguments.length?(se=typeof sn=="function"?sn:s(+sn),Ee):se},Ee.context=function(sn){return arguments.length?(Yt=sn==null?null:sn,Ee):Yt},Ee}function on(){}function en(Ne,se,Yt){Ne._context.bezierCurveTo((2*Ne._x0+Ne._x1)/3,(2*Ne._y0+Ne._y1)/3,(Ne._x0+2*Ne._x1)/3,(Ne._y0+2*Ne._y1)/3,(Ne._x0+4*Ne._x1+se)/6,(Ne._y0+4*Ne._y1+Yt)/6)}function An(Ne){this._context=Ne}An.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:en(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1,this._line?this._context.lineTo(se,Yt):this._context.moveTo(se,Yt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:en(this,se,Yt);break}this._x0=this._x1,this._x1=se,this._y0=this._y1,this._y1=Yt}};function Bn(Ne){return new An(Ne)}function gr(Ne){this._context=Ne}gr.prototype={areaStart:on,areaEnd:on,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1,this._x2=se,this._y2=Yt;break;case 1:this._point=2,this._x3=se,this._y3=Yt;break;case 2:this._point=3,this._x4=se,this._y4=Yt,this._context.moveTo((this._x0+4*this._x1+se)/6,(this._y0+4*this._y1+Yt)/6);break;default:en(this,se,Yt);break}this._x0=this._x1,this._x1=se,this._y0=this._y1,this._y1=Yt}};function hi(Ne){return new gr(Ne)}function Ae(Ne){this._context=Ne}Ae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Ee=(this._x0+4*this._x1+se)/6,sn=(this._y0+4*this._y1+Yt)/6;this._line?this._context.lineTo(Ee,sn):this._context.moveTo(Ee,sn);break;case 3:this._point=4;default:en(this,se,Yt);break}this._x0=this._x1,this._x1=se,this._y0=this._y1,this._y1=Yt}};function Me(Ne){return new Ae(Ne)}function Qt(Ne,se){this._basis=new An(Ne),this._beta=se}Qt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var se=this._x,Yt=this._y,Ee=se.length-1;if(Ee>0)for(var sn=se[0],Fn=Yt[0],rr=se[Ee]-sn,qn=Yt[Ee]-Fn,$r=-1,bi;++$r<=Ee;)bi=$r/Ee,this._basis.point(this._beta*se[$r]+(1-this._beta)*(sn+bi*rr),this._beta*Yt[$r]+(1-this._beta)*(Fn+bi*qn));this._x=this._y=null,this._basis.lineEnd()},point:function(se,Yt){this._x.push(+se),this._y.push(+Yt)}};var ge=function Ne(se){function Yt(Ee){return se===1?new An(Ee):new Qt(Ee,se)}return Yt.beta=function(Ee){return Ne(+Ee)},Yt}(.85);function Wt(Ne,se,Yt){Ne._context.bezierCurveTo(Ne._x1+Ne._k*(Ne._x2-Ne._x0),Ne._y1+Ne._k*(Ne._y2-Ne._y0),Ne._x2+Ne._k*(Ne._x1-se),Ne._y2+Ne._k*(Ne._y1-Yt),Ne._x2,Ne._y2)}function re(Ne,se){this._context=Ne,this._k=(1-se)/6}re.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Wt(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1,this._line?this._context.lineTo(se,Yt):this._context.moveTo(se,Yt);break;case 1:this._point=2,this._x1=se,this._y1=Yt;break;case 2:this._point=3;default:Wt(this,se,Yt);break}this._x0=this._x1,this._x1=this._x2,this._x2=se,this._y0=this._y1,this._y1=this._y2,this._y2=Yt}};var Te=function Ne(se){function Yt(Ee){return new re(Ee,se)}return Yt.tension=function(Ee){return Ne(+Ee)},Yt}(0);function ue(Ne,se){this._context=Ne,this._k=(1-se)/6}ue.prototype={areaStart:on,areaEnd:on,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1,this._x3=se,this._y3=Yt;break;case 1:this._point=2,this._context.moveTo(this._x4=se,this._y4=Yt);break;case 2:this._point=3,this._x5=se,this._y5=Yt;break;default:Wt(this,se,Yt);break}this._x0=this._x1,this._x1=this._x2,this._x2=se,this._y0=this._y1,this._y1=this._y2,this._y2=Yt}};var be=function Ne(se){function Yt(Ee){return new ue(Ee,se)}return Yt.tension=function(Ee){return Ne(+Ee)},Yt}(0);function Xe(Ne,se){this._context=Ne,this._k=(1-se)/6}Xe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Wt(this,se,Yt);break}this._x0=this._x1,this._x1=this._x2,this._x2=se,this._y0=this._y1,this._y1=this._y2,this._y2=Yt}};var Rn=function Ne(se){function Yt(Ee){return new Xe(Ee,se)}return Yt.tension=function(Ee){return Ne(+Ee)},Yt}(0);function tr(Ne,se,Yt){var Ee=Ne._x1,sn=Ne._y1,Fn=Ne._x2,rr=Ne._y2;if(Ne._l01_a>l){var qn=2*Ne._l01_2a+3*Ne._l01_a*Ne._l12_a+Ne._l12_2a,$r=3*Ne._l01_a*(Ne._l01_a+Ne._l12_a);Ee=(Ee*qn-Ne._x0*Ne._l12_2a+Ne._x2*Ne._l01_2a)/$r,sn=(sn*qn-Ne._y0*Ne._l12_2a+Ne._y2*Ne._l01_2a)/$r}if(Ne._l23_a>l){var bi=2*Ne._l23_2a+3*Ne._l23_a*Ne._l12_a+Ne._l12_2a,wi=3*Ne._l23_a*(Ne._l23_a+Ne._l12_a);Fn=(Fn*bi+Ne._x1*Ne._l23_2a-se*Ne._l12_2a)/wi,rr=(rr*bi+Ne._y1*Ne._l23_2a-Yt*Ne._l12_2a)/wi}Ne._context.bezierCurveTo(Ee,sn,Fn,rr,Ne._x2,Ne._y2)}function Mn(Ne,se){this._context=Ne,this._alpha=se}Mn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){if(se=+se,Yt=+Yt,this._point){var Ee=this._x2-se,sn=this._y2-Yt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ee*Ee+sn*sn,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(se,Yt):this._context.moveTo(se,Yt);break;case 1:this._point=2;break;case 2:this._point=3;default:tr(this,se,Yt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=se,this._y0=this._y1,this._y1=this._y2,this._y2=Yt}};var vn=function Ne(se){function Yt(Ee){return se?new Mn(Ee,se):new re(Ee,0)}return Yt.alpha=function(Ee){return Ne(+Ee)},Yt}(.5);function Ar(Ne,se){this._context=Ne,this._alpha=se}Ar.prototype={areaStart:on,areaEnd:on,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(se,Yt){if(se=+se,Yt=+Yt,this._point){var Ee=this._x2-se,sn=this._y2-Yt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ee*Ee+sn*sn,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=se,this._y3=Yt;break;case 1:this._point=2,this._context.moveTo(this._x4=se,this._y4=Yt);break;case 2:this._point=3,this._x5=se,this._y5=Yt;break;default:tr(this,se,Yt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=se,this._y0=this._y1,this._y1=this._y2,this._y2=Yt}};var or=function Ne(se){function Yt(Ee){return se?new Ar(Ee,se):new ue(Ee,0)}return Yt.alpha=function(Ee){return Ne(+Ee)},Yt}(.5);function cn(Ne,se){this._context=Ne,this._alpha=se}cn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){if(se=+se,Yt=+Yt,this._point){var Ee=this._x2-se,sn=this._y2-Yt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ee*Ee+sn*sn,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tr(this,se,Yt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=se,this._y0=this._y1,this._y1=this._y2,this._y2=Yt}};var Pr=function Ne(se){function Yt(Ee){return se?new cn(Ee,se):new Xe(Ee,0)}return Yt.alpha=function(Ee){return Ne(+Ee)},Yt}(.5);function Sr(Ne){this._context=Ne}Sr.prototype={areaStart:on,areaEnd:on,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(se,Yt){se=+se,Yt=+Yt,this._point?this._context.lineTo(se,Yt):(this._point=1,this._context.moveTo(se,Yt))}};function De(Ne){return new Sr(Ne)}function $e(Ne){return Ne<0?-1:1}function Ve(Ne,se,Yt){var Ee=Ne._x1-Ne._x0,sn=se-Ne._x1,Fn=(Ne._y1-Ne._y0)/(Ee||sn<0&&-0),rr=(Yt-Ne._y1)/(sn||Ee<0&&-0),qn=(Fn*sn+rr*Ee)/(Ee+sn);return($e(Fn)+$e(rr))*Math.min(Math.abs(Fn),Math.abs(rr),.5*Math.abs(qn))||0}function En(Ne,se){var Yt=Ne._x1-Ne._x0;return Yt?(3*(Ne._y1-Ne._y0)/Yt-se)/2:se}function xn(Ne,se,Yt){var Ee=Ne._x0,sn=Ne._y0,Fn=Ne._x1,rr=Ne._y1,qn=(Fn-Ee)/3;Ne._context.bezierCurveTo(Ee+qn,sn+qn*se,Fn-qn,rr-qn*Yt,Fn,rr)}function Nn(Ne){this._context=Ne}Nn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xn(this,this._t0,En(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){var Ee=NaN;if(se=+se,Yt=+Yt,!(se===this._x1&&Yt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(se,Yt):this._context.moveTo(se,Yt);break;case 1:this._point=2;break;case 2:this._point=3,xn(this,En(this,Ee=Ve(this,se,Yt)),Ee);break;default:xn(this,this._t0,Ee=Ve(this,se,Yt));break}this._x0=this._x1,this._x1=se,this._y0=this._y1,this._y1=Yt,this._t0=Ee}}};function mn(Ne){this._context=new Dn(Ne)}(mn.prototype=Object.create(Nn.prototype)).point=function(Ne,se){Nn.prototype.point.call(this,se,Ne)};function Dn(Ne){this._context=Ne}Dn.prototype={moveTo:function(se,Yt){this._context.moveTo(Yt,se)},closePath:function(){this._context.closePath()},lineTo:function(se,Yt){this._context.lineTo(Yt,se)},bezierCurveTo:function(se,Yt,Ee,sn,Fn,rr){this._context.bezierCurveTo(Yt,se,sn,Ee,rr,Fn)}};function $n(Ne){return new Nn(Ne)}function Wn(Ne){return new mn(Ne)}function _n(Ne){this._context=Ne}_n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var se=this._x,Yt=this._y,Ee=se.length;if(Ee)if(this._line?this._context.lineTo(se[0],Yt[0]):this._context.moveTo(se[0],Yt[0]),Ee===2)this._context.lineTo(se[1],Yt[1]);else for(var sn=xr(se),Fn=xr(Yt),rr=0,qn=1;qn<Ee;++rr,++qn)this._context.bezierCurveTo(sn[0][rr],Fn[0][rr],sn[1][rr],Fn[1][rr],se[qn],Yt[qn]);(this._line||this._line!==0&&Ee===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(se,Yt){this._x.push(+se),this._y.push(+Yt)}};function xr(Ne){var se,Yt=Ne.length-1,Ee,sn=new Array(Yt),Fn=new Array(Yt),rr=new Array(Yt);for(sn[0]=0,Fn[0]=2,rr[0]=Ne[0]+2*Ne[1],se=1;se<Yt-1;++se)sn[se]=1,Fn[se]=4,rr[se]=4*Ne[se]+2*Ne[se+1];for(sn[Yt-1]=2,Fn[Yt-1]=7,rr[Yt-1]=8*Ne[Yt-1]+Ne[Yt],se=1;se<Yt;++se)Ee=sn[se]/Fn[se-1],Fn[se]-=Ee,rr[se]-=Ee*rr[se-1];for(sn[Yt-1]=rr[Yt-1]/Fn[Yt-1],se=Yt-2;se>=0;--se)sn[se]=(rr[se]-sn[se+1])/Fn[se];for(Fn[Yt-1]=(Ne[Yt]+sn[Yt-1])/2,se=0;se<Yt-1;++se)Fn[se]=2*Ne[se+1]-sn[se+1];return[sn,Fn]}function mr(Ne){return new _n(Ne)}function Fr(Ne,se){this._context=Ne,this._t=se}Fr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1,this._line?this._context.lineTo(se,Yt):this._context.moveTo(se,Yt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Yt),this._context.lineTo(se,Yt);else{var Ee=this._x*(1-this._t)+se*this._t;this._context.lineTo(Ee,this._y),this._context.lineTo(Ee,Yt)}break}}this._x=se,this._y=Yt}};function xi(Ne){return new Fr(Ne,.5)}function Ta(Ne){return new Fr(Ne,0)}function Aa(Ne){return new Fr(Ne,1)}function to(Ne,se){if((rr=Ne.length)>1)for(var Yt=1,Ee,sn,Fn=Ne[se[0]],rr,qn=Fn.length;Yt<rr;++Yt)for(sn=Fn,Fn=Ne[se[Yt]],Ee=0;Ee<qn;++Ee)Fn[Ee][1]+=Fn[Ee][0]=isNaN(sn[Ee][1])?sn[Ee][0]:sn[Ee][1]}function Vo(Ne){for(var se=Ne.length,Yt=new Array(se);--se>=0;)Yt[se]=se;return Yt}function Ro(Ne,se){return Ne[se]}function ro(){var Ne=s([]),se=Vo,Yt=to,Ee=Ro;function sn(Fn){var rr=Ne.apply(this,arguments),qn,$r=Fn.length,bi=rr.length,wi=new Array(bi),Vi;for(qn=0;qn<bi;++qn){for(var sa=rr[qn],$a=wi[qn]=new Array($r),Ca=0,_o;Ca<$r;++Ca)$a[Ca]=_o=[0,+Ee(Fn[Ca],sa,Ca,Fn)],_o.data=Fn[Ca];$a.key=sa}for(qn=0,Vi=se(wi);qn<bi;++qn)wi[Vi[qn]].index=qn;return Yt(wi,Vi),wi}return sn.keys=function(Fn){return arguments.length?(Ne=typeof Fn=="function"?Fn:s(St.call(Fn)),sn):Ne},sn.value=function(Fn){return arguments.length?(Ee=typeof Fn=="function"?Fn:s(+Fn),sn):Ee},sn.order=function(Fn){return arguments.length?(se=Fn==null?Vo:typeof Fn=="function"?Fn:s(St.call(Fn)),sn):se},sn.offset=function(Fn){return arguments.length?(Yt=Fn==null?to:Fn,sn):Yt},sn}function vs(Ne,se){if((Ee=Ne.length)>0){for(var Yt,Ee,sn=0,Fn=Ne[0].length,rr;sn<Fn;++sn){for(rr=Yt=0;Yt<Ee;++Yt)rr+=Ne[Yt][sn][1]||0;if(rr)for(Yt=0;Yt<Ee;++Yt)Ne[Yt][sn][1]/=rr}to(Ne,se)}}function Jo(Ne,se){if(($r=Ne.length)>0)for(var Yt,Ee=0,sn,Fn,rr,qn,$r,bi=Ne[se[0]].length;Ee<bi;++Ee)for(rr=qn=0,Yt=0;Yt<$r;++Yt)(Fn=(sn=Ne[se[Yt]][Ee])[1]-sn[0])>0?(sn[0]=rr,sn[1]=rr+=Fn):Fn<0?(sn[1]=qn,sn[0]=qn+=Fn):(sn[0]=0,sn[1]=Fn)}function Do(Ne,se){if((sn=Ne.length)>0){for(var Yt=0,Ee=Ne[se[0]],sn,Fn=Ee.length;Yt<Fn;++Yt){for(var rr=0,qn=0;rr<sn;++rr)qn+=Ne[rr][Yt][1]||0;Ee[Yt][1]+=Ee[Yt][0]=-qn/2}to(Ne,se)}}function xs(Ne,se){if(!(!((rr=Ne.length)>0)||!((Fn=(sn=Ne[se[0]]).length)>0))){for(var Yt=0,Ee=1,sn,Fn,rr;Ee<Fn;++Ee){for(var qn=0,$r=0,bi=0;qn<rr;++qn){for(var wi=Ne[se[qn]],Vi=wi[Ee][1]||0,sa=wi[Ee-1][1]||0,$a=(Vi-sa)/2,Ca=0;Ca<qn;++Ca){var _o=Ne[se[Ca]],Fa=_o[Ee][1]||0,uo=_o[Ee-1][1]||0;$a+=Fa-uo}$r+=Vi,bi+=$a*Vi}sn[Ee-1][1]+=sn[Ee-1][0]=Yt,$r&&(Yt-=bi/$r)}sn[Ee-1][1]+=sn[Ee-1][0]=Yt,to(Ne,se)}}function Ra(Ne){var se=Ne.map($o);return Vo(Ne).sort(function(Yt,Ee){return se[Yt]-se[Ee]})}function $o(Ne){for(var se=-1,Yt=0,Ee=Ne.length,sn,Fn=-Infinity;++se<Ee;)(sn=+Ne[se][1])>Fn&&(Fn=sn,Yt=se);return Yt}function jo(Ne){var se=Ne.map(Js);return Vo(Ne).sort(function(Yt,Ee){return se[Yt]-se[Ee]})}function Js(Ne){for(var se=0,Yt=-1,Ee=Ne.length,sn;++Yt<Ee;)(sn=+Ne[Yt][1])&&(se+=sn);return se}function io(Ne){return jo(Ne).reverse()}function so(Ne){var se=Ne.length,Yt,Ee,sn=Ne.map(Js),Fn=Ra(Ne),rr=0,qn=0,$r=[],bi=[];for(Yt=0;Yt<se;++Yt)Ee=Fn[Yt],rr<qn?(rr+=sn[Ee],$r.push(Ee)):(qn+=sn[Ee],bi.push(Ee));return bi.reverse().concat($r)}function Gs(Ne){return Vo(Ne).reverse()}t.arc=O,t.area=U,t.areaRadial=wt,t.curveBasis=Bn,t.curveBasisClosed=hi,t.curveBasisOpen=Me,t.curveBundle=ge,t.curveCardinal=Te,t.curveCardinalClosed=be,t.curveCardinalOpen=Rn,t.curveCatmullRom=vn,t.curveCatmullRomClosed=or,t.curveCatmullRomOpen=Pr,t.curveLinear=H,t.curveLinearClosed=De,t.curveMonotoneX=$n,t.curveMonotoneY=Wn,t.curveNatural=mr,t.curveStep=xi,t.curveStepAfter=Aa,t.curveStepBefore=Ta,t.line=G,t.lineRadial=Ft,t.linkHorizontal=et,t.linkRadial=xt,t.linkVertical=at,t.pie=rt,t.pointRadial=Mt,t.radialArea=wt,t.radialLine=Ft,t.stack=ro,t.stackOffsetDiverging=Jo,t.stackOffsetExpand=vs,t.stackOffsetNone=to,t.stackOffsetSilhouette=Do,t.stackOffsetWiggle=xs,t.stackOrderAppearance=Ra,t.stackOrderAscending=jo,t.stackOrderDescending=io,t.stackOrderInsideOut=so,t.stackOrderNone=Vo,t.stackOrderReverse=Gs,t.symbol=Lr,t.symbolCircle=k,t.symbolCross=ot,t.symbolDiamond=_t,t.symbolSquare=Ht,t.symbolStar=Gt,t.symbolTriangle=le,t.symbolWye=wn,t.symbols=er,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-voronoi@1.1.4@d3-voronoi/dist/d3-voronoi.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(z){return function(){return z}}function s(z){return z[0]}function c(z){return z[1]}function r(){this._=null}function h(z){z.U=z.C=z.L=z.R=z.P=z.N=null}r.prototype={constructor:r,insert:function(q,gt){var et,at,xt;if(q){if(gt.P=q,gt.N=q.N,q.N&&(q.N.P=gt),q.N=gt,q.R){for(q=q.R;q.L;)q=q.L;q.L=gt}else q.R=gt;et=q}else this._?(q=a(this._),gt.P=null,gt.N=q,q.P=q.L=gt,et=q):(gt.P=gt.N=null,this._=gt,et=null);for(gt.L=gt.R=null,gt.U=et,gt.C=!0,q=gt;et&&et.C;)at=et.U,et===at.L?(xt=at.R,xt&&xt.C?(et.C=xt.C=!1,at.C=!0,q=at):(q===et.R&&(n(this,et),q=et,et=q.U),et.C=!1,at.C=!0,i(this,at))):(xt=at.L,xt&&xt.C?(et.C=xt.C=!1,at.C=!0,q=at):(q===et.L&&(i(this,et),q=et,et=q.U),et.C=!1,at.C=!0,n(this,at))),et=q.U;this._.C=!1},remove:function(q){q.N&&(q.N.P=q.P),q.P&&(q.P.N=q.N),q.N=q.P=null;var gt=q.U,et,at=q.L,xt=q.R,k,ot;if(at?xt?k=a(xt):k=at:k=xt,gt?gt.L===q?gt.L=k:gt.R=k:this._=k,at&&xt?(ot=k.C,k.C=q.C,k.L=at,at.U=k,k!==xt?(gt=k.U,k.U=q.U,q=k.R,gt.L=q,k.R=xt,xt.U=k):(k.U=gt,gt=k,q=k.R)):(ot=q.C,q=k),q&&(q.U=gt),!ot){if(q&&q.C){q.C=!1;return}do{if(q===this._)break;if(q===gt.L){if(et=gt.R,et.C&&(et.C=!1,gt.C=!0,n(this,gt),et=gt.R),et.L&&et.L.C||et.R&&et.R.C){(!et.R||!et.R.C)&&(et.L.C=!1,et.C=!0,i(this,et),et=gt.R),et.C=gt.C,gt.C=et.R.C=!1,n(this,gt),q=this._;break}}else if(et=gt.L,et.C&&(et.C=!1,gt.C=!0,i(this,gt),et=gt.L),et.L&&et.L.C||et.R&&et.R.C){(!et.L||!et.L.C)&&(et.R.C=!1,et.C=!0,n(this,et),et=gt.L),et.C=gt.C,gt.C=et.L.C=!1,i(this,gt),q=this._;break}et.C=!0,q=gt,gt=gt.U}while(!q.C);q&&(q.C=!1)}}};function n(z,q){var gt=q,et=q.R,at=gt.U;at?at.L===gt?at.L=et:at.R=et:z._=et,et.U=at,gt.U=et,gt.R=et.L,gt.R&&(gt.R.U=gt),et.L=gt}function i(z,q){var gt=q,et=q.L,at=gt.U;at?at.L===gt?at.L=et:at.R=et:z._=et,et.U=at,gt.U=et,gt.L=et.R,gt.L&&(gt.L.U=gt),et.R=gt}function a(z){for(;z.L;)z=z.L;return z}function o(z,q,gt,et){var at=[null,null],xt=Mt.push(at)-1;return at.left=z,at.right=q,gt&&f(at,z,q,gt),et&&f(at,q,z,et),Ft[z.index].halfedges.push(xt),Ft[q.index].halfedges.push(xt),at}function l(z,q,gt){var et=[q,gt];return et.left=z,et}function f(z,q,gt,et){!z[0]&&!z[1]?(z[0]=et,z.left=q,z.right=gt):z.left===gt?z[1]=et:z[0]=et}function v(z,q,gt,et,at){var xt=z[0],k=z[1],ot=xt[0],it=xt[1],$=k[0],_t=k[1],yt=0,Nt=1,$t=$-ot,ee=_t-it,Gt;if(Gt=q-ot,!(!$t&&Gt>0)){if(Gt/=$t,$t<0){if(Gt<yt)return;Gt<Nt&&(Nt=Gt)}else if($t>0){if(Gt>Nt)return;Gt>yt&&(yt=Gt)}if(Gt=et-ot,!(!$t&&Gt<0)){if(Gt/=$t,$t<0){if(Gt>Nt)return;Gt>yt&&(yt=Gt)}else if($t>0){if(Gt<yt)return;Gt<Nt&&(Nt=Gt)}if(Gt=gt-it,!(!ee&&Gt>0)){if(Gt/=ee,ee<0){if(Gt<yt)return;Gt<Nt&&(Nt=Gt)}else if(ee>0){if(Gt>Nt)return;Gt>yt&&(yt=Gt)}if(Gt=at-it,!(!ee&&Gt<0)){if(Gt/=ee,ee<0){if(Gt>Nt)return;Gt>yt&&(yt=Gt)}else if(ee>0){if(Gt<yt)return;Gt<Nt&&(Nt=Gt)}return!(yt>0)&&!(Nt<1)||(yt>0&&(z[0]=[ot+yt*$t,it+yt*ee]),Nt<1&&(z[1]=[ot+Nt*$t,it+Nt*ee])),!0}}}}}function b(z,q,gt,et,at){var xt=z[1];if(xt)return!0;var k=z[0],ot=z.left,it=z.right,$=ot[0],_t=ot[1],yt=it[0],Nt=it[1],$t=($+yt)/2,ee=(_t+Nt)/2,Gt,Ht;if(Nt===_t){if($t<q||$t>=et)return;if($>yt){if(!k)k=[$t,gt];else if(k[1]>=at)return;xt=[$t,at]}else{if(!k)k=[$t,at];else if(k[1]<gt)return;xt=[$t,gt]}}else if(Gt=($-yt)/(Nt-_t),Ht=ee-Gt*$t,Gt<-1||Gt>1)if($>yt){if(!k)k=[(gt-Ht)/Gt,gt];else if(k[1]>=at)return;xt=[(at-Ht)/Gt,at]}else{if(!k)k=[(at-Ht)/Gt,at];else if(k[1]<gt)return;xt=[(gt-Ht)/Gt,gt]}else if(_t<Nt){if(!k)k=[q,Gt*q+Ht];else if(k[0]>=et)return;xt=[et,Gt*et+Ht]}else{if(!k)k=[et,Gt*et+Ht];else if(k[0]<q)return;xt=[q,Gt*q+Ht]}return z[0]=k,z[1]=xt,!0}function g(z,q,gt,et){for(var at=Mt.length,xt;at--;)(!b(xt=Mt[at],z,q,gt,et)||!v(xt,z,q,gt,et)||!(Math.abs(xt[0][0]-xt[1][0])>mt||Math.abs(xt[0][1]-xt[1][1])>mt))&&delete Mt[at]}function m(z){return Ft[z.index]={site:z,halfedges:[]}}function _(z,q){var gt=z.site,et=q.left,at=q.right;return gt===at&&(at=et,et=gt),at?Math.atan2(at[1]-et[1],at[0]-et[0]):(gt===et?(et=q[1],at=q[0]):(et=q[0],at=q[1]),Math.atan2(et[0]-at[0],at[1]-et[1]))}function M(z,q){return q[+(q.left!==z.site)]}function x(z,q){return q[+(q.left===z.site)]}function y(){for(var z=0,q=Ft.length,gt,et,at,xt;z<q;++z)if((gt=Ft[z])&&(xt=(et=gt.halfedges).length)){var k=new Array(xt),ot=new Array(xt);for(at=0;at<xt;++at)k[at]=at,ot[at]=_(gt,Mt[et[at]]);for(k.sort(function(it,$){return ot[$]-ot[it]}),at=0;at<xt;++at)ot[at]=et[k[at]];for(at=0;at<xt;++at)et[at]=ot[at]}}function S(z,q,gt,et){var at=Ft.length,xt,k,ot,it,$,_t,yt,Nt,$t,ee,Gt,Ht,ae=!0;for(xt=0;xt<at;++xt)if(k=Ft[xt]){for(ot=k.site,$=k.halfedges,it=$.length;it--;)Mt[$[it]]||$.splice(it,1);for(it=0,_t=$.length;it<_t;)ee=x(k,Mt[$[it]]),Gt=ee[0],Ht=ee[1],yt=M(k,Mt[$[++it%_t]]),Nt=yt[0],$t=yt[1],(Math.abs(Gt-Nt)>mt||Math.abs(Ht-$t)>mt)&&($.splice(it,0,Mt.push(l(ot,ee,Math.abs(Gt-z)<mt&&et-Ht>mt?[z,Math.abs(Nt-z)<mt?$t:et]:Math.abs(Ht-et)<mt&&gt-Gt>mt?[Math.abs($t-et)<mt?Nt:gt,et]:Math.abs(Gt-gt)<mt&&Ht-q>mt?[gt,Math.abs(Nt-gt)<mt?$t:q]:Math.abs(Ht-q)<mt&&Gt-z>mt?[Math.abs($t-q)<mt?Nt:z,q]:null))-1),++_t);_t&&(ae=!1)}if(ae){var le,Be,Ce,We=Infinity;for(xt=0,ae=null;xt<at;++xt)(k=Ft[xt])&&(ot=k.site,le=ot[0]-z,Be=ot[1]-q,Ce=le*le+Be*Be,Ce<We&&(We=Ce,ae=k));if(ae){var Ye=[z,q],wn=[z,et],er=[gt,et],Lr=[gt,q];ae.halfedges.push(Mt.push(l(ot=ae.site,Ye,wn))-1,Mt.push(l(ot,wn,er))-1,Mt.push(l(ot,er,Lr))-1,Mt.push(l(ot,Lr,Ye))-1)}}for(xt=0;xt<at;++xt)(k=Ft[xt])&&(k.halfedges.length||delete Ft[xt])}var P=[],A;function O(){h(this),this.x=this.y=this.arc=this.site=this.cy=null}function L(z){var q=z.P,gt=z.N;if(!(!q||!gt)){var et=q.site,at=z.site,xt=gt.site;if(et!==xt){var k=at[0],ot=at[1],it=et[0]-k,$=et[1]-ot,_t=xt[0]-k,yt=xt[1]-ot,Nt=2*(it*yt-$*_t);if(!(Nt>=-ut)){var $t=it*it+$*$,ee=_t*_t+yt*yt,Gt=(yt*$t-$*ee)/Nt,Ht=(it*ee-_t*$t)/Nt,ae=P.pop()||new O;ae.arc=z,ae.site=at,ae.x=Gt+k,ae.y=(ae.cy=Ht+ot)+Math.sqrt(Gt*Gt+Ht*Ht),z.circle=ae;for(var le=null,Be=wt._;Be;)if(ae.y<Be.y||ae.y===Be.y&&ae.x<=Be.x)if(Be.L)Be=Be.L;else{le=Be.P;break}else if(Be.R)Be=Be.R;else{le=Be;break}wt.insert(le,ae),le||(A=ae)}}}}function H(z){var q=z.circle;q&&(q.P||(A=q.N),wt.remove(q),P.push(q),h(q),z.circle=null)}var F=[];function K(){h(this),this.edge=this.site=this.circle=null}function G(z){var q=F.pop()||new K;return q.site=z,q}function U(z){H(z),Rt.remove(z),F.push(z),h(z)}function Z(z){var q=z.circle,gt=q.x,et=q.cy,at=[gt,et],xt=z.P,k=z.N,ot=[z];U(z);for(var it=xt;it.circle&&Math.abs(gt-it.circle.x)<mt&&Math.abs(et-it.circle.cy)<mt;)xt=it.P,ot.unshift(it),U(it),it=xt;ot.unshift(it),H(it);for(var $=k;$.circle&&Math.abs(gt-$.circle.x)<mt&&Math.abs(et-$.circle.cy)<mt;)k=$.N,ot.push($),U($),$=k;ot.push($),H($);var _t=ot.length,yt;for(yt=1;yt<_t;++yt)$=ot[yt],it=ot[yt-1],f($.edge,it.site,$.site,at);it=ot[0],$=ot[_t-1],$.edge=o(it.site,$.site,null,at),L(it),L($)}function J(z){for(var q=z[0],gt=z[1],et,at,xt,k,ot=Rt._;ot;)if(xt=rt(ot,gt)-q,xt>mt)ot=ot.L;else if(k=q-vt(ot,gt),k>mt){if(!ot.R){et=ot;break}ot=ot.R}else{xt>-mt?(et=ot.P,at=ot):k>-mt?(et=ot,at=ot.N):et=at=ot;break}m(z);var it=G(z);if(Rt.insert(et,it),!(!et&&!at)){if(et===at){H(et),at=G(et.site),Rt.insert(it,at),it.edge=at.edge=o(et.site,it.site),L(et),L(at);return}if(!at){it.edge=o(et.site,it.site);return}H(et),H(at);var $=et.site,_t=$[0],yt=$[1],Nt=z[0]-_t,$t=z[1]-yt,ee=at.site,Gt=ee[0]-_t,Ht=ee[1]-yt,ae=2*(Nt*Ht-$t*Gt),le=Nt*Nt+$t*$t,Be=Gt*Gt+Ht*Ht,Ce=[(Ht*le-$t*Be)/ae+_t,(Nt*Be-Gt*le)/ae+yt];f(at.edge,$,ee,Ce),it.edge=o($,z,null,Ce),at.edge=o(z,ee,null,Ce),L(et),L(at)}}function rt(z,q){var gt=z.site,et=gt[0],at=gt[1],xt=at-q;if(!xt)return et;var k=z.P;if(!k)return-Infinity;gt=k.site;var ot=gt[0],it=gt[1],$=it-q;if(!$)return ot;var _t=ot-et,yt=1/xt-1/$,Nt=_t/$;return yt?(-Nt+Math.sqrt(Nt*Nt-2*yt*(_t*_t/(-2*$)-it+$/2+at-xt/2)))/yt+et:(et+ot)/2}function vt(z,q){var gt=z.N;if(gt)return rt(gt,q);var et=z.site;return et[1]===q?et[0]:Infinity}var mt=1e-6,ut=1e-12,Rt,Ft,wt,Mt;function St(z,q,gt){return(z[0]-gt[0])*(q[1]-z[1])-(z[0]-q[0])*(gt[1]-z[1])}function At(z,q){return q[1]-z[1]||q[0]-z[0]}function nt(z,q){var gt=z.sort(At).pop(),et,at,xt;for(Mt=[],Ft=new Array(z.length),Rt=new r,wt=new r;;)if(xt=A,gt&&(!xt||gt[1]<xt.y||gt[1]===xt.y&&gt[0]<xt.x))(gt[0]!==et||gt[1]!==at)&&(J(gt),et=gt[0],at=gt[1]),gt=z.pop();else if(xt)Z(xt.arc);else break;if(y(),q){var k=+q[0][0],ot=+q[0][1],it=+q[1][0],$=+q[1][1];g(k,ot,it,$),S(k,ot,it,$)}this.edges=Mt,this.cells=Ft,Rt=wt=Mt=Ft=null}nt.prototype={constructor:nt,polygons:function(){var q=this.edges;return this.cells.map(function(gt){var et=gt.halfedges.map(function(at){return M(gt,q[at])});return et.data=gt.site.data,et})},triangles:function(){var q=[],gt=this.edges;return this.cells.forEach(function(et,at){if(!!(it=(k=et.halfedges).length))for(var xt=et.site,k,ot=-1,it,$,_t=gt[k[it-1]],yt=_t.left===xt?_t.right:_t.left;++ot<it;)$=yt,_t=gt[k[ot]],yt=_t.left===xt?_t.right:_t.left,$&&yt&&at<$.index&&at<yt.index&&St(xt,$,yt)<0&&q.push([xt.data,$.data,yt.data])}),q},links:function(){return this.edges.filter(function(q){return q.right}).map(function(q){return{source:q.left.data,target:q.right.data}})},find:function(q,gt,et){for(var at=this,xt,k=at._found||0,ot=at.cells.length,it;!(it=at.cells[k]);)if(++k>=ot)return null;var $=q-it.site[0],_t=gt-it.site[1],yt=$*$+_t*_t;do it=at.cells[xt=k],k=null,it.halfedges.forEach(function(Nt){var $t=at.edges[Nt],ee=$t.left;if(!((ee===it.site||!ee)&&!(ee=$t.right))){var Gt=q-ee[0],Ht=gt-ee[1],ae=Gt*Gt+Ht*Ht;ae<yt&&(yt=ae,k=ee.index)}});while(k!==null);return at._found=xt,et==null||yt<=et*et?it.site:null}};function Pt(){var z=s,q=c,gt=null;function et(at){return new nt(at.map(function(xt,k){var ot=[Math.round(z(xt,k,at)/mt)*mt,Math.round(q(xt,k,at)/mt)*mt];return ot.index=k,ot.data=xt,ot}),gt)}return et.polygons=function(at){return et(at).polygons()},et.links=function(at){return et(at).links()},et.triangles=function(at){return et(at).triangles()},et.x=function(at){return arguments.length?(z=typeof at=="function"?at:u(+at),et):z},et.y=function(at){return arguments.length?(q=typeof at=="function"?at:u(+at),et):q},et.extent=function(at){return arguments.length?(gt=at==null?null:[[+at[0][0],+at[0][1]],[+at[1][0],+at[1][1]]],et):gt&&[[gt[0][0],gt[0][1]],[gt[1][0],gt[1][1]]]},et.size=function(at){return arguments.length?(gt=at==null?null:[[0,0],[+at[0],+at[1]]],et):gt&&[gt[1][0]-gt[0][0],gt[1][1]-gt[0][1]]},et}t.voronoi=Pt,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_dagre@0.8.5@dagre/index.js":function(E,T,e){E.exports={graphlib:e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js"),layout:e("./node_modules/_dagre@0.8.5@dagre/lib/layout.js"),debug:e("./node_modules/_dagre@0.8.5@dagre/lib/debug.js"),util:{time:e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").time,notime:e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").notime},version:e("./node_modules/_dagre@0.8.5@dagre/lib/version.js")}},"./node_modules/_dagre@0.8.5@dagre/lib/acyclic.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/greedy-fas.js");E.exports={run:s,undo:r};function s(h){var n=h.graph().acyclicer==="greedy"?u(h,i(h)):c(h);t.forEach(n,function(a){var o=h.edge(a);h.removeEdge(a),o.forwardName=a.name,o.reversed=!0,h.setEdge(a.w,a.v,o,t.uniqueId("rev"))});function i(a){return function(o){return a.edge(o).weight}}}function c(h){var n=[],i={},a={};function o(l){t.has(a,l)||(a[l]=!0,i[l]=!0,t.forEach(h.outEdges(l),function(f){t.has(i,f.w)?n.push(f):o(f.w)}),delete i[l])}return t.forEach(h.nodes(),o),n}function r(h){t.forEach(h.edges(),function(n){var i=h.edge(n);if(i.reversed){h.removeEdge(n);var a=i.forwardName;delete i.reversed,delete i.forwardName,h.setEdge(n.w,n.v,i,a)}})}},"./node_modules/_dagre@0.8.5@dagre/lib/add-border-segments.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=s;function s(r){function h(n){var i=r.children(n),a=r.node(n);if(i.length&&t.forEach(i,h),t.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var o=a.minRank,l=a.maxRank+1;o<l;++o)c(r,"borderLeft","_bl",n,a,o),c(r,"borderRight","_br",n,a,o)}}t.forEach(r.children(),h)}function c(r,h,n,i,a,o){var l={width:0,height:0,rank:o,borderType:h},f=a[h][o-1],v=u.addDummyNode(r,"border",l,n);a[h][o]=v,r.setParent(v,i),f&&r.setEdge(f,v,{weight:1})}},"./node_modules/_dagre@0.8.5@dagre/lib/coordinate-system.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports={adjust:u,undo:s};function u(o){var l=o.graph().rankdir.toLowerCase();(l==="lr"||l==="rl")&&c(o)}function s(o){var l=o.graph().rankdir.toLowerCase();(l==="bt"||l==="rl")&&h(o),(l==="lr"||l==="rl")&&(i(o),c(o))}function c(o){t.forEach(o.nodes(),function(l){r(o.node(l))}),t.forEach(o.edges(),function(l){r(o.edge(l))})}function r(o){var l=o.width;o.width=o.height,o.height=l}function h(o){t.forEach(o.nodes(),function(l){n(o.node(l))}),t.forEach(o.edges(),function(l){var f=o.edge(l);t.forEach(f.points,n),t.has(f,"y")&&n(f)})}function n(o){o.y=-o.y}function i(o){t.forEach(o.nodes(),function(l){a(o.node(l))}),t.forEach(o.edges(),function(l){var f=o.edge(l);t.forEach(f.points,a),t.has(f,"x")&&a(f)})}function a(o){var l=o.x;o.x=o.y,o.y=l}},"./node_modules/_dagre@0.8.5@dagre/lib/data/list.js":function(E,T){E.exports=e;function e(){var s={};s._next=s._prev=s,this._sentinel=s}e.prototype.dequeue=function(){var s=this._sentinel,c=s._prev;if(c!==s)return t(c),c},e.prototype.enqueue=function(s){var c=this._sentinel;s._prev&&s._next&&t(s),s._next=c._next,c._next._prev=s,c._next=s,s._prev=c},e.prototype.toString=function(){for(var s=[],c=this._sentinel,r=c._prev;r!==c;)s.push(JSON.stringify(r,u)),r=r._prev;return"["+s.join(", ")+"]"};function t(s){s._prev._next=s._next,s._next._prev=s._prev,delete s._next,delete s._prev}function u(s,c){if(s!=="_next"&&s!=="_prev")return c}},"./node_modules/_dagre@0.8.5@dagre/lib/debug.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports={debugOrdering:c};function c(r){var h=u.buildLayerMatrix(r),n=new s({compound:!0,multigraph:!0}).setGraph({});return t.forEach(r.nodes(),function(i){n.setNode(i,{label:i}),n.setParent(i,"layer"+r.node(i).rank)}),t.forEach(r.edges(),function(i){n.setEdge(i.v,i.w,{},i.name)}),t.forEach(h,function(i,a){var o="layer"+a;n.setNode(o,{rank:"same"}),t.reduce(i,function(l,f){return n.setEdge(l,f,{style:"invis"}),f})}),n}},"./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js":function(E,T,e){var t;try{t=e("./node_modules/_graphlib@2.1.8@graphlib/index.js")}catch(u){}t||(t=window.graphlib),E.exports=t},"./node_modules/_dagre@0.8.5@dagre/lib/greedy-fas.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/data/list.js");E.exports=r;var c=t.constant(1);function r(o,l){if(o.nodeCount()<=1)return[];var f=i(o,l||c),v=h(f.graph,f.buckets,f.zeroIdx);return t.flatten(t.map(v,function(b){return o.outEdges(b.v,b.w)}),!0)}function h(o,l,f){for(var v=[],b=l[l.length-1],g=l[0],m;o.nodeCount();){for(;m=g.dequeue();)n(o,l,f,m);for(;m=b.dequeue();)n(o,l,f,m);if(o.nodeCount()){for(var _=l.length-2;_>0;--_)if(m=l[_].dequeue(),m){v=v.concat(n(o,l,f,m,!0));break}}}return v}function n(o,l,f,v,b){var g=b?[]:void 0;return t.forEach(o.inEdges(v.v),function(m){var _=o.edge(m),M=o.node(m.v);b&&g.push({v:m.v,w:m.w}),M.out-=_,a(l,f,M)}),t.forEach(o.outEdges(v.v),function(m){var _=o.edge(m),M=m.w,x=o.node(M);x.in-=_,a(l,f,x)}),o.removeNode(v.v),g}function i(o,l){var f=new u,v=0,b=0;t.forEach(o.nodes(),function(_){f.setNode(_,{v:_,in:0,out:0})}),t.forEach(o.edges(),function(_){var M=f.edge(_.v,_.w)||0,x=l(_),y=M+x;f.setEdge(_.v,_.w,y),b=Math.max(b,f.node(_.v).out+=x),v=Math.max(v,f.node(_.w).in+=x)});var g=t.range(b+v+3).map(function(){return new s}),m=v+1;return t.forEach(f.nodes(),function(_){a(g,m,f.node(_))}),{graph:f,buckets:g,zeroIdx:m}}function a(o,l,f){f.out?f.in?o[f.out-f.in+l].enqueue(f):o[o.length-1].enqueue(f):o[0].enqueue(f)}},"./node_modules/_dagre@0.8.5@dagre/lib/layout.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/acyclic.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/normalize.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/index.js"),r=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").normalizeRanks,h=e("./node_modules/_dagre@0.8.5@dagre/lib/parent-dummy-chains.js"),n=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").removeEmptyRanks,i=e("./node_modules/_dagre@0.8.5@dagre/lib/nesting-graph.js"),a=e("./node_modules/_dagre@0.8.5@dagre/lib/add-border-segments.js"),o=e("./node_modules/_dagre@0.8.5@dagre/lib/coordinate-system.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/order/index.js"),f=e("./node_modules/_dagre@0.8.5@dagre/lib/position/index.js"),v=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),b=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports=g;function g(St,At){var nt=At&&At.debugTiming?v.time:v.notime;nt("layout",function(){var Pt=nt("  buildLayoutGraph",function(){return H(St)});nt("  runLayout",function(){m(Pt,nt)}),nt("  updateInputGraph",function(){_(St,Pt)})})}function m(St,At){At("    makeSpaceForEdgeLabels",function(){F(St)}),At("    removeSelfEdges",function(){ut(St)}),At("    acyclic",function(){u.run(St)}),At("    nestingGraph.run",function(){i.run(St)}),At("    rank",function(){c(v.asNonCompoundGraph(St))}),At("    injectEdgeLabelProxies",function(){K(St)}),At("    removeEmptyRanks",function(){n(St)}),At("    nestingGraph.cleanup",function(){i.cleanup(St)}),At("    normalizeRanks",function(){r(St)}),At("    assignRankMinMax",function(){G(St)}),At("    removeEdgeLabelProxies",function(){U(St)}),At("    normalize.run",function(){s.run(St)}),At("    parentDummyChains",function(){h(St)}),At("    addBorderSegments",function(){a(St)}),At("    order",function(){l(St)}),At("    insertSelfEdges",function(){Rt(St)}),At("    adjustCoordinateSystem",function(){o.adjust(St)}),At("    position",function(){f(St)}),At("    positionSelfEdges",function(){Ft(St)}),At("    removeBorderNodes",function(){mt(St)}),At("    normalize.undo",function(){s.undo(St)}),At("    fixupEdgeLabelCoords",function(){rt(St)}),At("    undoCoordinateSystem",function(){o.undo(St)}),At("    translateGraph",function(){Z(St)}),At("    assignNodeIntersects",function(){J(St)}),At("    reversePoints",function(){vt(St)}),At("    acyclic.undo",function(){u.undo(St)})}function _(St,At){t.forEach(St.nodes(),function(nt){var Pt=St.node(nt),z=At.node(nt);Pt&&(Pt.x=z.x,Pt.y=z.y,At.children(nt).length&&(Pt.width=z.width,Pt.height=z.height))}),t.forEach(St.edges(),function(nt){var Pt=St.edge(nt),z=At.edge(nt);Pt.points=z.points,t.has(z,"x")&&(Pt.x=z.x,Pt.y=z.y)}),St.graph().width=At.graph().width,St.graph().height=At.graph().height}var M=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y=["acyclicer","ranker","rankdir","align"],S=["width","height"],P={width:0,height:0},A=["minlen","weight","width","height","labeloffset"],O={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},L=["labelpos"];function H(St){var At=new b({multigraph:!0,compound:!0}),nt=Mt(St.graph());return At.setGraph(t.merge({},x,wt(nt,M),t.pick(nt,y))),t.forEach(St.nodes(),function(Pt){var z=Mt(St.node(Pt));At.setNode(Pt,t.defaults(wt(z,S),P)),At.setParent(Pt,St.parent(Pt))}),t.forEach(St.edges(),function(Pt){var z=Mt(St.edge(Pt));At.setEdge(Pt,t.merge({},O,wt(z,A),t.pick(z,L)))}),At}function F(St){var At=St.graph();At.ranksep/=2,t.forEach(St.edges(),function(nt){var Pt=St.edge(nt);Pt.minlen*=2,Pt.labelpos.toLowerCase()!=="c"&&(At.rankdir==="TB"||At.rankdir==="BT"?Pt.width+=Pt.labeloffset:Pt.height+=Pt.labeloffset)})}function K(St){t.forEach(St.edges(),function(At){var nt=St.edge(At);if(nt.width&&nt.height){var Pt=St.node(At.v),z=St.node(At.w),q={rank:(z.rank-Pt.rank)/2+Pt.rank,e:At};v.addDummyNode(St,"edge-proxy",q,"_ep")}})}function G(St){var At=0;t.forEach(St.nodes(),function(nt){var Pt=St.node(nt);Pt.borderTop&&(Pt.minRank=St.node(Pt.borderTop).rank,Pt.maxRank=St.node(Pt.borderBottom).rank,At=t.max(At,Pt.maxRank))}),St.graph().maxRank=At}function U(St){t.forEach(St.nodes(),function(At){var nt=St.node(At);nt.dummy==="edge-proxy"&&(St.edge(nt.e).labelRank=nt.rank,St.removeNode(At))})}function Z(St){var At=Number.POSITIVE_INFINITY,nt=0,Pt=Number.POSITIVE_INFINITY,z=0,q=St.graph(),gt=q.marginx||0,et=q.marginy||0;function at(xt){var k=xt.x,ot=xt.y,it=xt.width,$=xt.height;At=Math.min(At,k-it/2),nt=Math.max(nt,k+it/2),Pt=Math.min(Pt,ot-$/2),z=Math.max(z,ot+$/2)}t.forEach(St.nodes(),function(xt){at(St.node(xt))}),t.forEach(St.edges(),function(xt){var k=St.edge(xt);t.has(k,"x")&&at(k)}),At-=gt,Pt-=et,t.forEach(St.nodes(),function(xt){var k=St.node(xt);k.x-=At,k.y-=Pt}),t.forEach(St.edges(),function(xt){var k=St.edge(xt);t.forEach(k.points,function(ot){ot.x-=At,ot.y-=Pt}),t.has(k,"x")&&(k.x-=At),t.has(k,"y")&&(k.y-=Pt)}),q.width=nt-At+gt,q.height=z-Pt+et}function J(St){t.forEach(St.edges(),function(At){var nt=St.edge(At),Pt=St.node(At.v),z=St.node(At.w),q,gt;nt.points?(q=nt.points[0],gt=nt.points[nt.points.length-1]):(nt.points=[],q=z,gt=Pt),nt.points.unshift(v.intersectRect(Pt,q)),nt.points.push(v.intersectRect(z,gt))})}function rt(St){t.forEach(St.edges(),function(At){var nt=St.edge(At);if(t.has(nt,"x"))switch((nt.labelpos==="l"||nt.labelpos==="r")&&(nt.width-=nt.labeloffset),nt.labelpos){case"l":nt.x-=nt.width/2+nt.labeloffset;break;case"r":nt.x+=nt.width/2+nt.labeloffset;break}})}function vt(St){t.forEach(St.edges(),function(At){var nt=St.edge(At);nt.reversed&&nt.points.reverse()})}function mt(St){t.forEach(St.nodes(),function(At){if(St.children(At).length){var nt=St.node(At),Pt=St.node(nt.borderTop),z=St.node(nt.borderBottom),q=St.node(t.last(nt.borderLeft)),gt=St.node(t.last(nt.borderRight));nt.width=Math.abs(gt.x-q.x),nt.height=Math.abs(z.y-Pt.y),nt.x=q.x+nt.width/2,nt.y=Pt.y+nt.height/2}}),t.forEach(St.nodes(),function(At){St.node(At).dummy==="border"&&St.removeNode(At)})}function ut(St){t.forEach(St.edges(),function(At){if(At.v===At.w){var nt=St.node(At.v);nt.selfEdges||(nt.selfEdges=[]),nt.selfEdges.push({e:At,label:St.edge(At)}),St.removeEdge(At)}})}function Rt(St){var At=v.buildLayerMatrix(St);t.forEach(At,function(nt){var Pt=0;t.forEach(nt,function(z,q){var gt=St.node(z);gt.order=q+Pt,t.forEach(gt.selfEdges,function(et){v.addDummyNode(St,"selfedge",{width:et.label.width,height:et.label.height,rank:gt.rank,order:q+ ++Pt,e:et.e,label:et.label},"_se")}),delete gt.selfEdges})})}function Ft(St){t.forEach(St.nodes(),function(At){var nt=St.node(At);if(nt.dummy==="selfedge"){var Pt=St.node(nt.e.v),z=Pt.x+Pt.width/2,q=Pt.y,gt=nt.x-z,et=Pt.height/2;St.setEdge(nt.e,nt.label),St.removeNode(At),nt.label.points=[{x:z+2*gt/3,y:q-et},{x:z+5*gt/6,y:q-et},{x:z+gt,y:q},{x:z+5*gt/6,y:q+et},{x:z+2*gt/3,y:q+et}],nt.label.x=nt.x,nt.label.y=nt.y}})}function wt(St,At){return t.mapValues(t.pick(St,At),Number)}function Mt(St){var At={};return t.forEach(St,function(nt,Pt){At[Pt.toLowerCase()]=nt}),At}},"./node_modules/_dagre@0.8.5@dagre/lib/lodash.js":function(E,T,e){var t;try{t={cloneDeep:e("./node_modules/_lodash@4.17.20@lodash/cloneDeep.js"),constant:e("./node_modules/_lodash@4.17.20@lodash/constant.js"),defaults:e("./node_modules/_lodash@4.17.20@lodash/defaults.js"),each:e("./node_modules/_lodash@4.17.20@lodash/each.js"),filter:e("./node_modules/_lodash@4.17.20@lodash/filter.js"),find:e("./node_modules/_lodash@4.17.20@lodash/find.js"),flatten:e("./node_modules/_lodash@4.17.20@lodash/flatten.js"),forEach:e("./node_modules/_lodash@4.17.20@lodash/forEach.js"),forIn:e("./node_modules/_lodash@4.17.20@lodash/forIn.js"),has:e("./node_modules/_lodash@4.17.20@lodash/has.js"),isUndefined:e("./node_modules/_lodash@4.17.20@lodash/isUndefined.js"),last:e("./node_modules/_lodash@4.17.20@lodash/last.js"),map:e("./node_modules/_lodash@4.17.20@lodash/map.js"),mapValues:e("./node_modules/_lodash@4.17.20@lodash/mapValues.js"),max:e("./node_modules/_lodash@4.17.20@lodash/max.js"),merge:e("./node_modules/_lodash@4.17.20@lodash/merge.js"),min:e("./node_modules/_lodash@4.17.20@lodash/min.js"),minBy:e("./node_modules/_lodash@4.17.20@lodash/minBy.js"),now:e("./node_modules/_lodash@4.17.20@lodash/now.js"),pick:e("./node_modules/_lodash@4.17.20@lodash/pick.js"),range:e("./node_modules/_lodash@4.17.20@lodash/range.js"),reduce:e("./node_modules/_lodash@4.17.20@lodash/reduce.js"),sortBy:e("./node_modules/_lodash@4.17.20@lodash/sortBy.js"),uniqueId:e("./node_modules/_lodash@4.17.20@lodash/uniqueId.js"),values:e("./node_modules/_lodash@4.17.20@lodash/values.js"),zipObject:e("./node_modules/_lodash@4.17.20@lodash/zipObject.js")}}catch(u){}t||(t=window._),E.exports=t},"./node_modules/_dagre@0.8.5@dagre/lib/nesting-graph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={run:s,cleanup:n};function s(i){var a=u.addDummyNode(i,"root",{},"_root"),o=r(i),l=t.max(t.values(o))-1,f=2*l+1;i.graph().nestingRoot=a,t.forEach(i.edges(),function(b){i.edge(b).minlen*=f});var v=h(i)+1;t.forEach(i.children(),function(b){c(i,a,f,v,l,o,b)}),i.graph().nodeRankFactor=f}function c(i,a,o,l,f,v,b){var g=i.children(b);if(!g.length){b!==a&&i.setEdge(a,b,{weight:0,minlen:o});return}var m=u.addBorderNode(i,"_bt"),_=u.addBorderNode(i,"_bb"),M=i.node(b);i.setParent(m,b),M.borderTop=m,i.setParent(_,b),M.borderBottom=_,t.forEach(g,function(x){c(i,a,o,l,f,v,x);var y=i.node(x),S=y.borderTop?y.borderTop:x,P=y.borderBottom?y.borderBottom:x,A=y.borderTop?l:2*l,O=S!==P?1:f-v[b]+1;i.setEdge(m,S,{weight:A,minlen:O,nestingEdge:!0}),i.setEdge(P,_,{weight:A,minlen:O,nestingEdge:!0})}),i.parent(b)||i.setEdge(a,m,{weight:0,minlen:f+v[b]})}function r(i){var a={};function o(l,f){var v=i.children(l);v&&v.length&&t.forEach(v,function(b){o(b,f+1)}),a[l]=f}return t.forEach(i.children(),function(l){o(l,1)}),a}function h(i){return t.reduce(i.edges(),function(a,o){return a+i.edge(o).weight},0)}function n(i){var a=i.graph();i.removeNode(a.nestingRoot),delete a.nestingRoot,t.forEach(i.edges(),function(o){var l=i.edge(o);l.nestingEdge&&i.removeEdge(o)})}},"./node_modules/_dagre@0.8.5@dagre/lib/normalize.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={run:s,undo:r};function s(h){h.graph().dummyChains=[],t.forEach(h.edges(),function(n){c(h,n)})}function c(h,n){var i=n.v,a=h.node(i).rank,o=n.w,l=h.node(o).rank,f=n.name,v=h.edge(n),b=v.labelRank;if(l!==a+1){h.removeEdge(n);var g,m,_;for(_=0,++a;a<l;++_,++a)v.points=[],m={width:0,height:0,edgeLabel:v,edgeObj:n,rank:a},g=u.addDummyNode(h,"edge",m,"_d"),a===b&&(m.width=v.width,m.height=v.height,m.dummy="edge-label",m.labelpos=v.labelpos),h.setEdge(i,g,{weight:v.weight},f),_===0&&h.graph().dummyChains.push(g),i=g;h.setEdge(i,o,{weight:v.weight},f)}}function r(h){t.forEach(h.graph().dummyChains,function(n){var i=h.node(n),a=i.edgeLabel,o;for(h.setEdge(i.edgeObj,a);i.dummy;)o=h.successors(n)[0],h.removeNode(n),a.points.push({x:i.x,y:i.y}),i.dummy==="edge-label"&&(a.x=i.x,a.y=i.y,a.width=i.width,a.height=i.height),n=o,i=h.node(n)})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/add-subgraph-constraints.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(s,c,r){var h={},n;t.forEach(r,function(i){for(var a=s.parent(i),o,l;a;){if(o=s.parent(a),o?(l=h[o],h[o]=a):(l=n,n=a),l&&l!==a){c.setEdge(l,a);return}a=o}})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/barycenter.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(s,c){return t.map(c,function(r){var h=s.inEdges(r);if(h.length){var n=t.reduce(h,function(i,a){var o=s.edge(a),l=s.node(a.v);return{sum:i.sum+o.weight*l.order,weight:i.weight+o.weight}},{sum:0,weight:0});return{v:r,barycenter:n.sum/n.weight,weight:n.weight}}else return{v:r}})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/build-layer-graph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports=s;function s(r,h,n){var i=c(r),a=new u({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(o){return r.node(o)});return t.forEach(r.nodes(),function(o){var l=r.node(o),f=r.parent(o);(l.rank===h||l.minRank<=h&&h<=l.maxRank)&&(a.setNode(o),a.setParent(o,f||i),t.forEach(r[n](o),function(v){var b=v.v===o?v.w:v.v,g=a.edge(b,o),m=t.isUndefined(g)?0:g.weight;a.setEdge(b,o,{weight:r.edge(v).weight+m})}),t.has(l,"minRank")&&a.setNode(o,{borderLeft:l.borderLeft[h],borderRight:l.borderRight[h]}))}),a}function c(r){for(var h;r.hasNode(h=t.uniqueId("_root")););return h}},"./node_modules/_dagre@0.8.5@dagre/lib/order/cross-count.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(c,r){for(var h=0,n=1;n<r.length;++n)h+=s(c,r[n-1],r[n]);return h}function s(c,r,h){for(var n=t.zipObject(h,t.map(h,function(v,b){return b})),i=t.flatten(t.map(r,function(v){return t.sortBy(t.map(c.outEdges(v),function(b){return{pos:n[b.w],weight:c.edge(b).weight}}),"pos")}),!0),a=1;a<h.length;)a<<=1;var o=2*a-1;a-=1;var l=t.map(new Array(o),function(){return 0}),f=0;return t.forEach(i.forEach(function(v){var b=v.pos+a;l[b]+=v.weight;for(var g=0;b>0;)b%2&&(g+=l[b+1]),b=b-1>>1,l[b]+=v.weight;f+=v.weight*g})),f}},"./node_modules/_dagre@0.8.5@dagre/lib/order/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/order/init-order.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/order/cross-count.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/order/sort-subgraph.js"),r=e("./node_modules/_dagre@0.8.5@dagre/lib/order/build-layer-graph.js"),h=e("./node_modules/_dagre@0.8.5@dagre/lib/order/add-subgraph-constraints.js"),n=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,i=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=a;function a(v){var b=i.maxRank(v),g=o(v,t.range(1,b+1),"inEdges"),m=o(v,t.range(b-1,-1,-1),"outEdges"),_=u(v);f(v,_);for(var M=Number.POSITIVE_INFINITY,x,y=0,S=0;S<4;++y,++S){l(y%2?g:m,y%4>=2),_=i.buildLayerMatrix(v);var P=s(v,_);P<M&&(S=0,x=t.cloneDeep(_),M=P)}f(v,x)}function o(v,b,g){return t.map(b,function(m){return r(v,m,g)})}function l(v,b){var g=new n;t.forEach(v,function(m){var _=m.graph().root,M=c(m,_,g,b);t.forEach(M.vs,function(x,y){m.node(x).order=y}),h(m,g,M.vs)})}function f(v,b){t.forEach(b,function(g){t.forEach(g,function(m,_){v.node(m).order=_})})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/init-order.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(s){var c={},r=t.filter(s.nodes(),function(o){return!s.children(o).length}),h=t.max(t.map(r,function(o){return s.node(o).rank})),n=t.map(t.range(h+1),function(){return[]});function i(o){if(!t.has(c,o)){c[o]=!0;var l=s.node(o);n[l.rank].push(o),t.forEach(s.successors(o),i)}}var a=t.sortBy(r,function(o){return s.node(o).rank});return t.forEach(a,i),n}},"./node_modules/_dagre@0.8.5@dagre/lib/order/resolve-conflicts.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(r,h){var n={};t.forEach(r,function(a,o){var l=n[a.v]={indegree:0,in:[],out:[],vs:[a.v],i:o};t.isUndefined(a.barycenter)||(l.barycenter=a.barycenter,l.weight=a.weight)}),t.forEach(h.edges(),function(a){var o=n[a.v],l=n[a.w];!t.isUndefined(o)&&!t.isUndefined(l)&&(l.indegree++,o.out.push(n[a.w]))});var i=t.filter(n,function(a){return!a.indegree});return s(i)}function s(r){var h=[];function n(o){return function(l){l.merged||(t.isUndefined(l.barycenter)||t.isUndefined(o.barycenter)||l.barycenter>=o.barycenter)&&c(o,l)}}function i(o){return function(l){l.in.push(o),--l.indegree==0&&r.push(l)}}for(;r.length;){var a=r.pop();h.push(a),t.forEach(a.in.reverse(),n(a)),t.forEach(a.out,i(a))}return t.map(t.filter(h,function(o){return!o.merged}),function(o){return t.pick(o,["vs","i","barycenter","weight"])})}function c(r,h){var n=0,i=0;r.weight&&(n+=r.barycenter*r.weight,i+=r.weight),h.weight&&(n+=h.barycenter*h.weight,i+=h.weight),r.vs=h.vs.concat(r.vs),r.barycenter=n/i,r.weight=i,r.i=Math.min(h.i,r.i),h.merged=!0}},"./node_modules/_dagre@0.8.5@dagre/lib/order/sort-subgraph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/order/barycenter.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/order/resolve-conflicts.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/order/sort.js");E.exports=r;function r(i,a,o,l){var f=i.children(a),v=i.node(a),b=v?v.borderLeft:void 0,g=v?v.borderRight:void 0,m={};b&&(f=t.filter(f,function(P){return P!==b&&P!==g}));var _=u(i,f);t.forEach(_,function(P){if(i.children(P.v).length){var A=r(i,P.v,o,l);m[P.v]=A,t.has(A,"barycenter")&&n(P,A)}});var M=s(_,o);h(M,m);var x=c(M,l);if(b&&(x.vs=t.flatten([b,x.vs,g],!0),i.predecessors(b).length)){var y=i.node(i.predecessors(b)[0]),S=i.node(i.predecessors(g)[0]);t.has(x,"barycenter")||(x.barycenter=0,x.weight=0),x.barycenter=(x.barycenter*x.weight+y.order+S.order)/(x.weight+2),x.weight+=2}return x}function h(i,a){t.forEach(i,function(o){o.vs=t.flatten(o.vs.map(function(l){return a[l]?a[l].vs:l}),!0)})}function n(i,a){t.isUndefined(i.barycenter)?(i.barycenter=a.barycenter,i.weight=a.weight):(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight)}},"./node_modules/_dagre@0.8.5@dagre/lib/order/sort.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=s;function s(h,n){var i=u.partition(h,function(m){return t.has(m,"barycenter")}),a=i.lhs,o=t.sortBy(i.rhs,function(m){return-m.i}),l=[],f=0,v=0,b=0;a.sort(r(!!n)),b=c(l,o,b),t.forEach(a,function(m){b+=m.vs.length,l.push(m.vs),f+=m.barycenter*m.weight,v+=m.weight,b=c(l,o,b)});var g={vs:t.flatten(l,!0)};return v&&(g.barycenter=f/v,g.weight=v),g}function c(h,n,i){for(var a;n.length&&(a=t.last(n)).i<=i;)n.pop(),h.push(a.vs),i++;return i}function r(h){return function(n,i){return n.barycenter<i.barycenter?-1:n.barycenter>i.barycenter?1:h?i.i-n.i:n.i-i.i}}},"./node_modules/_dagre@0.8.5@dagre/lib/parent-dummy-chains.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(r){var h=c(r);t.forEach(r.graph().dummyChains,function(n){for(var i=r.node(n),a=i.edgeObj,o=s(r,h,a.v,a.w),l=o.path,f=o.lca,v=0,b=l[v],g=!0;n!==a.w;){if(i=r.node(n),g){for(;(b=l[v])!==f&&r.node(b).maxRank<i.rank;)v++;b===f&&(g=!1)}if(!g){for(;v<l.length-1&&r.node(b=l[v+1]).minRank<=i.rank;)v++;b=l[v]}r.setParent(n,b),n=r.successors(n)[0]}})}function s(r,h,n,i){var a=[],o=[],l=Math.min(h[n].low,h[i].low),f=Math.max(h[n].lim,h[i].lim),v,b;v=n;do v=r.parent(v),a.push(v);while(v&&(h[v].low>l||f>h[v].lim));for(b=v,v=i;(v=r.parent(v))!==b;)o.push(v);return{path:a.concat(o.reverse()),lca:b}}function c(r){var h={},n=0;function i(a){var o=n;t.forEach(r.children(a),i),h[a]={low:o,lim:n++}}return t.forEach(r.children(),i),h}},"./node_modules/_dagre@0.8.5@dagre/lib/position/bk.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={positionX:g,findType1Conflicts:c,findType2Conflicts:r,addConflict:n,hasConflict:i,verticalAlignment:a,horizontalCompaction:o,alignCoordinates:v,findSmallestWidthAlignment:f,balance:b};function c(M,x){var y={};function S(P,A){var O=0,L=0,H=P.length,F=t.last(A);return t.forEach(A,function(K,G){var U=h(M,K),Z=U?M.node(U).order:H;(U||K===F)&&(t.forEach(A.slice(L,G+1),function(J){t.forEach(M.predecessors(J),function(rt){var vt=M.node(rt),mt=vt.order;(mt<O||Z<mt)&&!(vt.dummy&&M.node(J).dummy)&&n(y,rt,J)})}),L=G+1,O=Z)}),A}return t.reduce(x,S),y}function r(M,x){var y={};function S(A,O,L,H,F){var K;t.forEach(t.range(O,L),function(G){K=A[G],M.node(K).dummy&&t.forEach(M.predecessors(K),function(U){var Z=M.node(U);Z.dummy&&(Z.order<H||Z.order>F)&&n(y,U,K)})})}function P(A,O){var L=-1,H,F=0;return t.forEach(O,function(K,G){if(M.node(K).dummy==="border"){var U=M.predecessors(K);U.length&&(H=M.node(U[0]).order,S(O,F,G,L,H),F=G,L=H)}S(O,F,O.length,H,A.length)}),O}return t.reduce(x,P),y}function h(M,x){if(M.node(x).dummy)return t.find(M.predecessors(x),function(y){return M.node(y).dummy})}function n(M,x,y){if(x>y){var S=x;x=y,y=S}var P=M[x];P||(M[x]=P={}),P[y]=!0}function i(M,x,y){if(x>y){var S=x;x=y,y=S}return t.has(M[x],y)}function a(M,x,y,S){var P={},A={},O={};return t.forEach(x,function(L){t.forEach(L,function(H,F){P[H]=H,A[H]=H,O[H]=F})}),t.forEach(x,function(L){var H=-1;t.forEach(L,function(F){var K=S(F);if(K.length){K=t.sortBy(K,function(rt){return O[rt]});for(var G=(K.length-1)/2,U=Math.floor(G),Z=Math.ceil(G);U<=Z;++U){var J=K[U];A[F]===F&&H<O[J]&&!i(y,F,J)&&(A[J]=F,A[F]=P[F]=P[J],H=O[J])}}})}),{root:P,align:A}}function o(M,x,y,S,P){var A={},O=l(M,x,y,P),L=P?"borderLeft":"borderRight";function H(G,U){for(var Z=O.nodes(),J=Z.pop(),rt={};J;)rt[J]?G(J):(rt[J]=!0,Z.push(J),Z=Z.concat(U(J))),J=Z.pop()}function F(G){A[G]=O.inEdges(G).reduce(function(U,Z){return Math.max(U,A[Z.v]+O.edge(Z))},0)}function K(G){var U=O.outEdges(G).reduce(function(J,rt){return Math.min(J,A[rt.w]-O.edge(rt))},Number.POSITIVE_INFINITY),Z=M.node(G);U!==Number.POSITIVE_INFINITY&&Z.borderType!==L&&(A[G]=Math.max(A[G],U))}return H(F,O.predecessors.bind(O)),H(K,O.successors.bind(O)),t.forEach(S,function(G){A[G]=A[y[G]]}),A}function l(M,x,y,S){var P=new u,A=M.graph(),O=m(A.nodesep,A.edgesep,S);return t.forEach(x,function(L){var H;t.forEach(L,function(F){var K=y[F];if(P.setNode(K),H){var G=y[H],U=P.edge(G,K);P.setEdge(G,K,Math.max(O(M,F,H),U||0))}H=F})}),P}function f(M,x){return t.minBy(t.values(x),function(y){var S=Number.NEGATIVE_INFINITY,P=Number.POSITIVE_INFINITY;return t.forIn(y,function(A,O){var L=_(M,O)/2;S=Math.max(A+L,S),P=Math.min(A-L,P)}),S-P})}function v(M,x){var y=t.values(x),S=t.min(y),P=t.max(y);t.forEach(["u","d"],function(A){t.forEach(["l","r"],function(O){var L=A+O,H=M[L],F;if(H!==x){var K=t.values(H);F=O==="l"?S-t.min(K):P-t.max(K),F&&(M[L]=t.mapValues(H,function(G){return G+F}))}})})}function b(M,x){return t.mapValues(M.ul,function(y,S){if(x)return M[x.toLowerCase()][S];var P=t.sortBy(t.map(M,S));return(P[1]+P[2])/2})}function g(M){var x=s.buildLayerMatrix(M),y=t.merge(c(M,x),r(M,x)),S={},P;t.forEach(["u","d"],function(O){P=O==="u"?x:t.values(x).reverse(),t.forEach(["l","r"],function(L){L==="r"&&(P=t.map(P,function(G){return t.values(G).reverse()}));var H=(O==="u"?M.predecessors:M.successors).bind(M),F=a(M,P,y,H),K=o(M,P,F.root,F.align,L==="r");L==="r"&&(K=t.mapValues(K,function(G){return-G})),S[O+L]=K})});var A=f(M,S);return v(S,A),b(S,M.graph().align)}function m(M,x,y){return function(S,P,A){var O=S.node(P),L=S.node(A),H=0,F;if(H+=O.width/2,t.has(O,"labelpos"))switch(O.labelpos.toLowerCase()){case"l":F=-O.width/2;break;case"r":F=O.width/2;break}if(F&&(H+=y?F:-F),F=0,H+=(O.dummy?x:M)/2,H+=(L.dummy?x:M)/2,H+=L.width/2,t.has(L,"labelpos"))switch(L.labelpos.toLowerCase()){case"l":F=L.width/2;break;case"r":F=-L.width/2;break}return F&&(H+=y?F:-F),F=0,H}}function _(M,x){return M.node(x).width}},"./node_modules/_dagre@0.8.5@dagre/lib/position/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/position/bk.js").positionX;E.exports=c;function c(h){h=u.asNonCompoundGraph(h),r(h),t.forEach(s(h),function(n,i){h.node(i).x=n})}function r(h){var n=u.buildLayerMatrix(h),i=h.graph().ranksep,a=0;t.forEach(n,function(o){var l=t.max(t.map(o,function(f){return h.node(f).height}));t.forEach(o,function(f){h.node(f).y=a+l/2}),a+=l+i})}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").slack;E.exports=c;function c(i){var a=new u({directed:!1}),o=i.nodes()[0],l=i.nodeCount();a.setNode(o,{});for(var f,v;r(a,i)<l;)f=h(a,i),v=a.hasNode(f.v)?s(i,f):-s(i,f),n(a,i,v);return a}function r(i,a){function o(l){t.forEach(a.nodeEdges(l),function(f){var v=f.v,b=l===v?f.w:v;!i.hasNode(b)&&!s(a,f)&&(i.setNode(b,{}),i.setEdge(l,b,{}),o(b))})}return t.forEach(i.nodes(),o),i.nodeCount()}function h(i,a){return t.minBy(a.edges(),function(o){if(i.hasNode(o.v)!==i.hasNode(o.w))return s(a,o)})}function n(i,a,o){t.forEach(i.nodes(),function(l){a.node(l).rank+=o})}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js"),u=t.longestPath,s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/network-simplex.js");E.exports=r;function r(a){switch(a.graph().ranker){case"network-simplex":i(a);break;case"tight-tree":n(a);break;case"longest-path":h(a);break;default:i(a)}}var h=u;function n(a){u(a),s(a)}function i(a){c(a)}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/network-simplex.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").slack,c=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").longestPath,r=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").alg.preorder,h=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").alg.postorder,n=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").simplify;E.exports=i,i.initLowLimValues=f,i.initCutValues=a,i.calcCutValue=l,i.leaveEdge=b,i.enterEdge=g,i.exchangeEdges=m;function i(y){y=n(y),c(y);var S=u(y);f(S),a(S,y);for(var P,A;P=b(S);)A=g(S,y,P),m(S,y,P,A)}function a(y,S){var P=h(y,y.nodes());P=P.slice(0,P.length-1),t.forEach(P,function(A){o(y,S,A)})}function o(y,S,P){var A=y.node(P),O=A.parent;y.edge(P,O).cutvalue=l(y,S,P)}function l(y,S,P){var A=y.node(P),O=A.parent,L=!0,H=S.edge(P,O),F=0;return H||(L=!1,H=S.edge(O,P)),F=H.weight,t.forEach(S.nodeEdges(P),function(K){var G=K.v===P,U=G?K.w:K.v;if(U!==O){var Z=G===L,J=S.edge(K).weight;if(F+=Z?J:-J,M(y,P,U)){var rt=y.edge(P,U).cutvalue;F+=Z?-rt:rt}}}),F}function f(y,S){arguments.length<2&&(S=y.nodes()[0]),v(y,{},1,S)}function v(y,S,P,A,O){var L=P,H=y.node(A);return S[A]=!0,t.forEach(y.neighbors(A),function(F){t.has(S,F)||(P=v(y,S,P,F,A))}),H.low=L,H.lim=P++,O?H.parent=O:delete H.parent,P}function b(y){return t.find(y.edges(),function(S){return y.edge(S).cutvalue<0})}function g(y,S,P){var A=P.v,O=P.w;S.hasEdge(A,O)||(A=P.w,O=P.v);var L=y.node(A),H=y.node(O),F=L,K=!1;L.lim>H.lim&&(F=H,K=!0);var G=t.filter(S.edges(),function(U){return K===x(y,y.node(U.v),F)&&K!==x(y,y.node(U.w),F)});return t.minBy(G,function(U){return s(S,U)})}function m(y,S,P,A){var O=P.v,L=P.w;y.removeEdge(O,L),y.setEdge(A.v,A.w,{}),f(y),a(y,S),_(y,S)}function _(y,S){var P=t.find(y.nodes(),function(O){return!S.node(O).parent}),A=r(y,P);A=A.slice(1),t.forEach(A,function(O){var L=y.node(O).parent,H=S.edge(O,L),F=!1;H||(H=S.edge(L,O),F=!0),S.node(O).rank=S.node(L).rank+(F?H.minlen:-H.minlen)})}function M(y,S,P){return y.hasEdge(S,P)}function x(y,S,P){return P.low<=S.lim&&S.lim<=P.lim}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports={longestPath:u,slack:s};function u(c){var r={};function h(n){var i=c.node(n);if(t.has(r,n))return i.rank;r[n]=!0;var a=t.min(t.map(c.outEdges(n),function(o){return h(o.w)-c.edge(o).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}t.forEach(c.sources(),h)}function s(c,r){return c.node(r.w).rank-c.node(r.v).rank-c.edge(r).minlen}},"./node_modules/_dagre@0.8.5@dagre/lib/util.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports={addDummyNode:s,simplify:c,asNonCompoundGraph:r,successorWeights:h,predecessorWeights:n,intersectRect:i,buildLayerMatrix:a,normalizeRanks:o,removeEmptyRanks:l,addBorderNode:f,maxRank:v,partition:b,time:g,notime:m};function s(_,M,x,y){var S;do S=t.uniqueId(y);while(_.hasNode(S));return x.dummy=M,_.setNode(S,x),S}function c(_){var M=new u().setGraph(_.graph());return t.forEach(_.nodes(),function(x){M.setNode(x,_.node(x))}),t.forEach(_.edges(),function(x){var y=M.edge(x.v,x.w)||{weight:0,minlen:1},S=_.edge(x);M.setEdge(x.v,x.w,{weight:y.weight+S.weight,minlen:Math.max(y.minlen,S.minlen)})}),M}function r(_){var M=new u({multigraph:_.isMultigraph()}).setGraph(_.graph());return t.forEach(_.nodes(),function(x){_.children(x).length||M.setNode(x,_.node(x))}),t.forEach(_.edges(),function(x){M.setEdge(x,_.edge(x))}),M}function h(_){var M=t.map(_.nodes(),function(x){var y={};return t.forEach(_.outEdges(x),function(S){y[S.w]=(y[S.w]||0)+_.edge(S).weight}),y});return t.zipObject(_.nodes(),M)}function n(_){var M=t.map(_.nodes(),function(x){var y={};return t.forEach(_.inEdges(x),function(S){y[S.v]=(y[S.v]||0)+_.edge(S).weight}),y});return t.zipObject(_.nodes(),M)}function i(_,M){var x=_.x,y=_.y,S=M.x-x,P=M.y-y,A=_.width/2,O=_.height/2;if(!S&&!P)throw new Error("Not possible to find intersection inside of the rectangle");var L,H;return Math.abs(P)*A>Math.abs(S)*O?(P<0&&(O=-O),L=O*S/P,H=O):(S<0&&(A=-A),L=A,H=A*P/S),{x:x+L,y:y+H}}function a(_){var M=t.map(t.range(v(_)+1),function(){return[]});return t.forEach(_.nodes(),function(x){var y=_.node(x),S=y.rank;t.isUndefined(S)||(M[S][y.order]=x)}),M}function o(_){var M=t.min(t.map(_.nodes(),function(x){return _.node(x).rank}));t.forEach(_.nodes(),function(x){var y=_.node(x);t.has(y,"rank")&&(y.rank-=M)})}function l(_){var M=t.min(t.map(_.nodes(),function(P){return _.node(P).rank})),x=[];t.forEach(_.nodes(),function(P){var A=_.node(P).rank-M;x[A]||(x[A]=[]),x[A].push(P)});var y=0,S=_.graph().nodeRankFactor;t.forEach(x,function(P,A){t.isUndefined(P)&&A%S!=0?--y:y&&t.forEach(P,function(O){_.node(O).rank+=y})})}function f(_,M,x,y){var S={width:0,height:0};return arguments.length>=4&&(S.rank=x,S.order=y),s(_,"border",S,M)}function v(_){return t.max(t.map(_.nodes(),function(M){var x=_.node(M).rank;if(!t.isUndefined(x))return x}))}function b(_,M){var x={lhs:[],rhs:[]};return t.forEach(_,function(y){M(y)?x.lhs.push(y):x.rhs.push(y)}),x}function g(_,M){var x=t.now();try{return M()}finally{console.log(_+" time: "+(t.now()-x)+"ms")}}function m(_,M){return M()}},"./node_modules/_dagre@0.8.5@dagre/lib/version.js":function(E,T){E.exports="0.8.5"},"./node_modules/_graphlib@2.1.8@graphlib/index.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/index.js");E.exports={Graph:t.Graph,json:e("./node_modules/_graphlib@2.1.8@graphlib/lib/json.js"),alg:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/index.js"),version:t.version}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/components.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u;function u(s){var c={},r=[],h;function n(i){t.has(c,i)||(c[i]=!0,h.push(i),t.each(s.successors(i),n),t.each(s.predecessors(i),n))}return t.each(s.nodes(),function(i){h=[],n(i),h.length&&r.push(h)}),r}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u;function u(c,r,h){t.isArray(r)||(r=[r]);var n=(c.isDirected()?c.successors:c.neighbors).bind(c),i=[],a={};return t.each(r,function(o){if(!c.hasNode(o))throw new Error("Graph does not have node: "+o);s(c,o,h==="post",a,n,i)}),i}function s(c,r,h,n,i,a){t.has(n,r)||(n[r]=!0,h||a.push(r),t.each(i(r),function(o){s(c,o,h,n,i,a)}),h&&a.push(r))}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra-all.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=s;function s(c,r,h){return u.transform(c.nodes(),function(n,i){n[i]=t(c,i,r,h)},{})}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js");E.exports=c;var s=t.constant(1);function c(h,n,i,a){return r(h,String(n),i||s,a||function(o){return h.outEdges(o)})}function r(h,n,i,a){var o={},l=new u,f,v,b=function(m){var _=m.v!==f?m.v:m.w,M=o[_],x=i(m),y=v.distance+x;if(x<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+m+" Weight: "+x);y<M.distance&&(M.distance=y,M.predecessor=f,l.decrease(_,y))};for(h.nodes().forEach(function(g){var m=g===n?0:Number.POSITIVE_INFINITY;o[g]={distance:m},l.add(g,m)});l.size()>0&&(f=l.removeMin(),v=o[f],v.distance!==Number.POSITIVE_INFINITY);)a(f).forEach(b);return o}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/find-cycles.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js");E.exports=s;function s(c){return t.filter(u(c),function(r){return r.length>1||r.length===1&&c.hasEdge(r[0],r[0])})}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/floyd-warshall.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=s;var u=t.constant(1);function s(r,h,n){return c(r,h||u,n||function(i){return r.outEdges(i)})}function c(r,h,n){var i={},a=r.nodes();return a.forEach(function(o){i[o]={},i[o][o]={distance:0},a.forEach(function(l){o!==l&&(i[o][l]={distance:Number.POSITIVE_INFINITY})}),n(o).forEach(function(l){var f=l.v===o?l.w:l.v,v=h(l);i[o][f]={distance:v,predecessor:o}})}),a.forEach(function(o){var l=i[o];a.forEach(function(f){var v=i[f];a.forEach(function(b){var g=v[o],m=l[b],_=v[b],M=g.distance+m.distance;M<_.distance&&(_.distance=M,_.predecessor=m.predecessor)})})}),i}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/index.js":function(E,T,e){E.exports={components:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/components.js"),dijkstra:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js"),dijkstraAll:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra-all.js"),findCycles:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/find-cycles.js"),floydWarshall:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/floyd-warshall.js"),isAcyclic:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/is-acyclic.js"),postorder:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/postorder.js"),preorder:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/preorder.js"),prim:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/prim.js"),tarjan:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js"),topsort:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/is-acyclic.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js");E.exports=u;function u(s){try{t(s)}catch(c){if(c instanceof t.CycleException)return!1;throw c}return!0}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/postorder.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js");E.exports=u;function u(s,c){return t(s,c,"post")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/preorder.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js");E.exports=u;function u(s,c){return t(s,c,"pre")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/prim.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js"),s=e("./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js");E.exports=c;function c(r,h){var n=new u,i={},a=new s,o;function l(v){var b=v.v===o?v.w:v.v,g=a.priority(b);if(g!==void 0){var m=h(v);m<g&&(i[b]=o,a.decrease(b,m))}}if(r.nodeCount()===0)return n;t.each(r.nodes(),function(v){a.add(v,Number.POSITIVE_INFINITY),n.setNode(v)}),a.decrease(r.nodes()[0],0);for(var f=!1;a.size()>0;){if(o=a.removeMin(),t.has(i,o))n.setEdge(o,i[o]);else{if(f)throw new Error("Input graph is not connected: "+r);f=!0}r.nodeEdges(o).forEach(l)}return n}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u;function u(s){var c=0,r=[],h={},n=[];function i(a){var o=h[a]={onStack:!0,lowlink:c,index:c++};if(r.push(a),s.successors(a).forEach(function(v){t.has(h,v)?h[v].onStack&&(o.lowlink=Math.min(o.lowlink,h[v].index)):(i(v),o.lowlink=Math.min(o.lowlink,h[v].lowlink))}),o.lowlink===o.index){var l=[],f;do f=r.pop(),h[f].onStack=!1,l.push(f);while(a!==f);n.push(l)}}return s.nodes().forEach(function(a){t.has(h,a)||i(a)}),n}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u,u.CycleException=s;function u(c){var r={},h={},n=[];function i(a){if(t.has(h,a))throw new s;t.has(r,a)||(h[a]=!0,r[a]=!0,t.each(c.predecessors(a),i),delete h[a],n.push(a))}if(t.each(c.sinks(),i),t.size(r)!==c.nodeCount())throw new s;return n}function s(){}s.prototype=new Error},"./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u;function u(){this._arr=[],this._keyIndices={}}u.prototype.size=function(){return this._arr.length},u.prototype.keys=function(){return this._arr.map(function(s){return s.key})},u.prototype.has=function(s){return t.has(this._keyIndices,s)},u.prototype.priority=function(s){var c=this._keyIndices[s];if(c!==void 0)return this._arr[c].priority},u.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},u.prototype.add=function(s,c){var r=this._keyIndices;if(s=String(s),!t.has(r,s)){var h=this._arr,n=h.length;return r[s]=n,h.push({key:s,priority:c}),this._decrease(n),!0}return!1},u.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var s=this._arr.pop();return delete this._keyIndices[s.key],this._heapify(0),s.key},u.prototype.decrease=function(s,c){var r=this._keyIndices[s];if(c>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+s+" Old: "+this._arr[r].priority+" New: "+c);this._arr[r].priority=c,this._decrease(r)},u.prototype._heapify=function(s){var c=this._arr,r=2*s,h=r+1,n=s;r<c.length&&(n=c[r].priority<c[n].priority?r:n,h<c.length&&(n=c[h].priority<c[n].priority?h:n),n!==s&&(this._swap(s,n),this._heapify(n)))},u.prototype._decrease=function(s){for(var c=this._arr,r=c[s].priority,h;s!==0&&(h=s>>1,!(c[h].priority<r));)this._swap(s,h),s=h},u.prototype._swap=function(s,c){var r=this._arr,h=this._keyIndices,n=r[s],i=r[c];r[s]=i,r[c]=n,h[i.key]=s,h[n.key]=c}},"./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js":function(E,T,e){"use strict";var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=r;var u="\0",s="\0",c="";function r(l){this._isDirected=t.has(l,"directed")?l.directed:!0,this._isMultigraph=t.has(l,"multigraph")?l.multigraph:!1,this._isCompound=t.has(l,"compound")?l.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[s]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(l){return this._label=l,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(l){return t.isFunction(l)||(l=t.constant(l)),this._defaultNodeLabelFn=l,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return t.keys(this._nodes)},r.prototype.sources=function(){var l=this;return t.filter(this.nodes(),function(f){return t.isEmpty(l._in[f])})},r.prototype.sinks=function(){var l=this;return t.filter(this.nodes(),function(f){return t.isEmpty(l._out[f])})},r.prototype.setNodes=function(l,f){var v=arguments,b=this;return t.each(l,function(g){v.length>1?b.setNode(g,f):b.setNode(g)}),this},r.prototype.setNode=function(l,f){return t.has(this._nodes,l)?(arguments.length>1&&(this._nodes[l]=f),this):(this._nodes[l]=arguments.length>1?f:this._defaultNodeLabelFn(l),this._isCompound&&(this._parent[l]=s,this._children[l]={},this._children[s][l]=!0),this._in[l]={},this._preds[l]={},this._out[l]={},this._sucs[l]={},++this._nodeCount,this)},r.prototype.node=function(l){return this._nodes[l]},r.prototype.hasNode=function(l){return t.has(this._nodes,l)},r.prototype.removeNode=function(l){var f=this;if(t.has(this._nodes,l)){var v=function(g){f.removeEdge(f._edgeObjs[g])};delete this._nodes[l],this._isCompound&&(this._removeFromParentsChildList(l),delete this._parent[l],t.each(this.children(l),function(b){f.setParent(b)}),delete this._children[l]),t.each(t.keys(this._in[l]),v),delete this._in[l],delete this._preds[l],t.each(t.keys(this._out[l]),v),delete this._out[l],delete this._sucs[l],--this._nodeCount}return this},r.prototype.setParent=function(l,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(f))f=s;else{f+="";for(var v=f;!t.isUndefined(v);v=this.parent(v))if(v===l)throw new Error("Setting "+f+" as parent of "+l+" would create a cycle");this.setNode(f)}return this.setNode(l),this._removeFromParentsChildList(l),this._parent[l]=f,this._children[f][l]=!0,this},r.prototype._removeFromParentsChildList=function(l){delete this._children[this._parent[l]][l]},r.prototype.parent=function(l){if(this._isCompound){var f=this._parent[l];if(f!==s)return f}},r.prototype.children=function(l){if(t.isUndefined(l)&&(l=s),this._isCompound){var f=this._children[l];if(f)return t.keys(f)}else{if(l===s)return this.nodes();if(this.hasNode(l))return[]}},r.prototype.predecessors=function(l){var f=this._preds[l];if(f)return t.keys(f)},r.prototype.successors=function(l){var f=this._sucs[l];if(f)return t.keys(f)},r.prototype.neighbors=function(l){var f=this.predecessors(l);if(f)return t.union(f,this.successors(l))},r.prototype.isLeaf=function(l){var f;return this.isDirected()?f=this.successors(l):f=this.neighbors(l),f.length===0},r.prototype.filterNodes=function(l){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var v=this;t.each(this._nodes,function(m,_){l(_)&&f.setNode(_,m)}),t.each(this._edgeObjs,function(m){f.hasNode(m.v)&&f.hasNode(m.w)&&f.setEdge(m,v.edge(m))});var b={};function g(m){var _=v.parent(m);return _===void 0||f.hasNode(_)?(b[m]=_,_):_ in b?b[_]:g(_)}return this._isCompound&&t.each(f.nodes(),function(m){f.setParent(m,g(m))}),f},r.prototype.setDefaultEdgeLabel=function(l){return t.isFunction(l)||(l=t.constant(l)),this._defaultEdgeLabelFn=l,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return t.values(this._edgeObjs)},r.prototype.setPath=function(l,f){var v=this,b=arguments;return t.reduce(l,function(g,m){return b.length>1?v.setEdge(g,m,f):v.setEdge(g,m),m}),this},r.prototype.setEdge=function(){var l,f,v,b,g=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(l=m.v,f=m.w,v=m.name,arguments.length===2&&(b=arguments[1],g=!0)):(l=m,f=arguments[1],v=arguments[3],arguments.length>2&&(b=arguments[2],g=!0)),l=""+l,f=""+f,t.isUndefined(v)||(v=""+v);var _=i(this._isDirected,l,f,v);if(t.has(this._edgeLabels,_))return g&&(this._edgeLabels[_]=b),this;if(!t.isUndefined(v)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(l),this.setNode(f),this._edgeLabels[_]=g?b:this._defaultEdgeLabelFn(l,f,v);var M=a(this._isDirected,l,f,v);return l=M.v,f=M.w,Object.freeze(M),this._edgeObjs[_]=M,h(this._preds[f],l),h(this._sucs[l],f),this._in[f][_]=M,this._out[l][_]=M,this._edgeCount++,this},r.prototype.edge=function(l,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,l,f,v);return this._edgeLabels[b]},r.prototype.hasEdge=function(l,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,l,f,v);return t.has(this._edgeLabels,b)},r.prototype.removeEdge=function(l,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,l,f,v),g=this._edgeObjs[b];return g&&(l=g.v,f=g.w,delete this._edgeLabels[b],delete this._edgeObjs[b],n(this._preds[f],l),n(this._sucs[l],f),delete this._in[f][b],delete this._out[l][b],this._edgeCount--),this},r.prototype.inEdges=function(l,f){var v=this._in[l];if(v){var b=t.values(v);return f?t.filter(b,function(g){return g.v===f}):b}},r.prototype.outEdges=function(l,f){var v=this._out[l];if(v){var b=t.values(v);return f?t.filter(b,function(g){return g.w===f}):b}},r.prototype.nodeEdges=function(l,f){var v=this.inEdges(l,f);if(v)return v.concat(this.outEdges(l,f))};function h(l,f){l[f]?l[f]++:l[f]=1}function n(l,f){--l[f]||delete l[f]}function i(l,f,v,b){var g=""+f,m=""+v;if(!l&&g>m){var _=g;g=m,m=_}return g+c+m+c+(t.isUndefined(b)?u:b)}function a(l,f,v,b){var g=""+f,m=""+v;if(!l&&g>m){var _=g;g=m,m=_}var M={v:g,w:m};return b&&(M.name=b),M}function o(l,f){return i(l,f.v,f.w,f.name)}},"./node_modules/_graphlib@2.1.8@graphlib/lib/index.js":function(E,T,e){E.exports={Graph:e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js"),version:e("./node_modules/_graphlib@2.1.8@graphlib/lib/version.js")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/json.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js");E.exports={write:s,read:h};function s(n){var i={options:{directed:n.isDirected(),multigraph:n.isMultigraph(),compound:n.isCompound()},nodes:c(n),edges:r(n)};return t.isUndefined(n.graph())||(i.value=t.clone(n.graph())),i}function c(n){return t.map(n.nodes(),function(i){var a=n.node(i),o=n.parent(i),l={v:i};return t.isUndefined(a)||(l.value=a),t.isUndefined(o)||(l.parent=o),l})}function r(n){return t.map(n.edges(),function(i){var a=n.edge(i),o={v:i.v,w:i.w};return t.isUndefined(i.name)||(o.name=i.name),t.isUndefined(a)||(o.value=a),o})}function h(n){var i=new u(n.options).setGraph(n.value);return t.each(n.nodes,function(a){i.setNode(a.v,a.value),a.parent&&i.setParent(a.v,a.parent)}),t.each(n.edges,function(a){i.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),i}},"./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js":function(E,T,e){var t;try{t={clone:e("./node_modules/_lodash@4.17.20@lodash/clone.js"),constant:e("./node_modules/_lodash@4.17.20@lodash/constant.js"),each:e("./node_modules/_lodash@4.17.20@lodash/each.js"),filter:e("./node_modules/_lodash@4.17.20@lodash/filter.js"),has:e("./node_modules/_lodash@4.17.20@lodash/has.js"),isArray:e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),isEmpty:e("./node_modules/_lodash@4.17.20@lodash/isEmpty.js"),isFunction:e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),isUndefined:e("./node_modules/_lodash@4.17.20@lodash/isUndefined.js"),keys:e("./node_modules/_lodash@4.17.20@lodash/keys.js"),map:e("./node_modules/_lodash@4.17.20@lodash/map.js"),reduce:e("./node_modules/_lodash@4.17.20@lodash/reduce.js"),size:e("./node_modules/_lodash@4.17.20@lodash/size.js"),transform:e("./node_modules/_lodash@4.17.20@lodash/transform.js"),union:e("./node_modules/_lodash@4.17.20@lodash/union.js"),values:e("./node_modules/_lodash@4.17.20@lodash/values.js")}}catch(u){}t||(t=window._),E.exports=t},"./node_modules/_graphlib@2.1.8@graphlib/lib/version.js":function(E,T){E.exports="2.1.8"},"./node_modules/_isarray@0.0.1@isarray/index.js":function(E,T){E.exports=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"}},"./node_modules/_lodash@4.17.20@lodash/_DataView.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"DataView");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_Hash.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_hashClear.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_hashDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_hashGet.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_hashHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_hashSet.js");function h(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}h.prototype.clear=t,h.prototype.delete=u,h.prototype.get=s,h.prototype.has=c,h.prototype.set=r,E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_ListCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_listCacheClear.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_listCacheDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_listCacheGet.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_listCacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_listCacheSet.js");function h(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}h.prototype.clear=t,h.prototype.delete=u,h.prototype.get=s,h.prototype.has=c,h.prototype.set=r,E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_Map.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"Map");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_MapCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheClear.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheGet.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheSet.js");function h(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}h.prototype.clear=t,h.prototype.delete=u,h.prototype.get=s,h.prototype.has=c,h.prototype.set=r,E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_Promise.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"Promise");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_Set.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"Set");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_SetCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_setCacheAdd.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setCacheHas.js");function c(r){var h=-1,n=r==null?0:r.length;for(this.__data__=new t;++h<n;)this.add(r[h])}c.prototype.add=c.prototype.push=u,c.prototype.has=s,E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_Stack.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_stackClear.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_stackDelete.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_stackGet.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_stackHas.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_stackSet.js");function n(i){var a=this.__data__=new t(i);this.size=a.size}n.prototype.clear=u,n.prototype.delete=s,n.prototype.get=c,n.prototype.has=r,n.prototype.set=h,E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_Symbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),u=t.Symbol;E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),u=t.Uint8Array;E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_WeakMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"WeakMap");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_apply.js":function(E,T){function e(t,u,s){switch(s.length){case 0:return t.call(u);case 1:return t.call(u,s[0]);case 2:return t.call(u,s[0],s[1]);case 3:return t.call(u,s[0],s[1],s[2])}return t.apply(u,s)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayEach.js":function(E,T){function e(t,u){for(var s=-1,c=t==null?0:t.length;++s<c&&u(t[s],s,t)!==!1;);return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js":function(E,T){function e(t,u){for(var s=-1,c=t==null?0:t.length,r=0,h=[];++s<c;){var n=t[s];u(n,s,t)&&(h[r++]=n)}return h}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayIncludes.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIndexOf.js");function u(s,c){var r=s==null?0:s.length;return!!r&&t(s,c,0)>-1}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_arrayIncludesWith.js":function(E,T){function e(t,u,s){for(var c=-1,r=t==null?0:t.length;++c<r;)if(s(u,t[c]))return!0;return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseTimes.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),n=Object.prototype,i=n.hasOwnProperty;function a(o,l){var f=s(o),v=!f&&u(o),b=!f&&!v&&c(o),g=!f&&!v&&!b&&h(o),m=f||v||b||g,_=m?t(o.length,String):[],M=_.length;for(var x in o)(l||i.call(o,x))&&!(m&&(x=="length"||b&&(x=="offset"||x=="parent")||g&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||r(x,M)))&&_.push(x);return _}E.exports=a},"./node_modules/_lodash@4.17.20@lodash/_arrayMap.js":function(E,T){function e(t,u){for(var s=-1,c=t==null?0:t.length,r=Array(c);++s<c;)r[s]=u(t[s],s,t);return r}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayPush.js":function(E,T){function e(t,u){for(var s=-1,c=u.length,r=t.length;++s<c;)t[r+s]=u[s];return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayReduce.js":function(E,T){function e(t,u,s,c){var r=-1,h=t==null?0:t.length;for(c&&h&&(s=t[++r]);++r<h;)s=u(s,t[r],r,t);return s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arraySome.js":function(E,T){function e(t,u){for(var s=-1,c=t==null?0:t.length;++s<c;)if(u(t[s],s,t))return!0;return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_asciiSize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseProperty.js"),u=t("length");E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/eq.js");function s(c,r,h){(h!==void 0&&!u(c[r],h)||h===void 0&&!(r in c))&&t(c,r,h)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_assignValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),s=Object.prototype,c=s.hasOwnProperty;function r(h,n,i){var a=h[n];(!(c.call(h,n)&&u(a,i))||i===void 0&&!(n in h))&&t(h,n,i)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/eq.js");function u(s,c){for(var r=s.length;r--;)if(t(s[r][0],c))return r;return-1}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseAssign.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c,r){return c&&t(r,u(r),c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseAssignIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function s(c,r){return c&&t(r,u(r),c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_defineProperty.js");function u(s,c,r){c=="__proto__"&&t?t(s,c,{configurable:!0,enumerable:!0,value:r,writable:!0}):s[c]=r}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseClone.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseAssign.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignIn.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_copyArray.js"),i=e("./node_modules/_lodash@4.17.20@lodash/_copySymbols.js"),a=e("./node_modules/_lodash@4.17.20@lodash/_copySymbolsIn.js"),o=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeysIn.js"),f=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),v=e("./node_modules/_lodash@4.17.20@lodash/_initCloneArray.js"),b=e("./node_modules/_lodash@4.17.20@lodash/_initCloneByTag.js"),g=e("./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js"),m=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),_=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),M=e("./node_modules/_lodash@4.17.20@lodash/isMap.js"),x=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),y=e("./node_modules/_lodash@4.17.20@lodash/isSet.js"),S=e("./node_modules/_lodash@4.17.20@lodash/keys.js"),P=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),A=1,O=2,L=4,H="[object Arguments]",F="[object Array]",K="[object Boolean]",G="[object Date]",U="[object Error]",Z="[object Function]",J="[object GeneratorFunction]",rt="[object Map]",vt="[object Number]",mt="[object Object]",ut="[object RegExp]",Rt="[object Set]",Ft="[object String]",wt="[object Symbol]",Mt="[object WeakMap]",St="[object ArrayBuffer]",At="[object DataView]",nt="[object Float32Array]",Pt="[object Float64Array]",z="[object Int8Array]",q="[object Int16Array]",gt="[object Int32Array]",et="[object Uint8Array]",at="[object Uint8ClampedArray]",xt="[object Uint16Array]",k="[object Uint32Array]",ot={};ot[H]=ot[F]=ot[St]=ot[At]=ot[K]=ot[G]=ot[nt]=ot[Pt]=ot[z]=ot[q]=ot[gt]=ot[rt]=ot[vt]=ot[mt]=ot[ut]=ot[Rt]=ot[Ft]=ot[wt]=ot[et]=ot[at]=ot[xt]=ot[k]=!0,ot[U]=ot[Z]=ot[Mt]=!1;function it($,_t,yt,Nt,$t,ee){var Gt,Ht=_t&A,ae=_t&O,le=_t&L;if(yt&&(Gt=$t?yt($,Nt,$t,ee):yt($)),Gt!==void 0)return Gt;if(!x($))return $;var Be=m($);if(Be){if(Gt=v($),!Ht)return n($,Gt)}else{var Ce=f($),We=Ce==Z||Ce==J;if(_($))return h($,Ht);if(Ce==mt||Ce==H||We&&!$t){if(Gt=ae||We?{}:g($),!Ht)return ae?a($,r(Gt,$)):i($,c(Gt,$))}else{if(!ot[Ce])return $t?$:{};Gt=b($,Ce,Ht)}}ee||(ee=new t);var Ye=ee.get($);if(Ye)return Ye;ee.set($,Gt),y($)?$.forEach(function(Lr){Gt.add(it(Lr,_t,yt,Lr,$,ee))}):M($)&&$.forEach(function(Lr,on){Gt.set(on,it(Lr,_t,yt,on,$,ee))});var wn=le?ae?l:o:ae?P:S,er=Be?void 0:wn($);return u(er||$,function(Lr,on){er&&(on=Lr,Lr=$[on]),s(Gt,on,it(Lr,_t,yt,on,$,ee))}),Gt}E.exports=it},"./node_modules/_lodash@4.17.20@lodash/_baseCreate.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),u=Object.create,s=function(){function c(){}return function(r){if(!t(r))return{};if(u)return u(r);c.prototype=r;var h=new c;return c.prototype=void 0,h}}();E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_createBaseEach.js"),s=u(t);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js");function u(s,c,r){for(var h=-1,n=s.length;++h<n;){var i=s[h],a=c(i);if(a!=null&&(o===void 0?a===a&&!t(a):r(a,o)))var o=a,l=i}return l}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseFilter.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js");function u(s,c){var r=[];return t(s,function(h,n,i){c(h,n,i)&&r.push(h)}),r}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js":function(E,T){function e(t,u,s,c){for(var r=t.length,h=s+(c?1:-1);c?h--:++h<r;)if(u(t[h],h,t))return h;return-1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isFlattenable.js");function s(c,r,h,n,i){var a=-1,o=c.length;for(h||(h=u),i||(i=[]);++a<o;){var l=c[a];r>0&&h(l)?r>1?s(l,r-1,h,n,i):t(i,l):n||(i[i.length]=l)}return i}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseFor.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createBaseFor.js"),u=t();E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c,r){return c&&t(c,r,u)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function s(c,r){r=t(r,c);for(var h=0,n=r.length;c!=null&&h<n;)c=c[u(r[h++])];return h&&h==n?c:void 0}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function s(c,r,h){var n=r(c);return u(c)?n:t(n,h(c))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getRawTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_objectToString.js"),c="[object Null]",r="[object Undefined]",h=t?t.toStringTag:void 0;function n(i){return i==null?i===void 0?r:c:h&&h in Object(i)?u(i):s(i)}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_baseGt.js":function(E,T){function e(t,u){return t>u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseHas.js":function(E,T){var e=Object.prototype,t=e.hasOwnProperty;function u(s,c){return s!=null&&t.call(s,c)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseHasIn.js":function(E,T){function e(t,u){return t!=null&&u in Object(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseIndexOf.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIsNaN.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_strictIndexOf.js");function c(r,h,n){return h===h?s(r,h,n):t(r,u,n)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsArguments.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Arguments]";function c(r){return u(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqualDeep.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js");function s(c,r,h,n,i){return c===r?!0:c==null||r==null||!u(c)&&!u(r)?c!==c&&r!==r:t(c,r,h,n,s,i)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseIsEqualDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_equalArrays.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_equalByTag.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_equalObjects.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),a=1,o="[object Arguments]",l="[object Array]",f="[object Object]",v=Object.prototype,b=v.hasOwnProperty;function g(m,_,M,x,y,S){var P=h(m),A=h(_),O=P?l:r(m),L=A?l:r(_);O=O==o?f:O,L=L==o?f:L;var H=O==f,F=L==f,K=O==L;if(K&&n(m)){if(!n(_))return!1;P=!0,H=!1}if(K&&!H)return S||(S=new t),P||i(m)?u(m,_,M,x,y,S):s(m,_,O,M,x,y,S);if(!(M&a)){var G=H&&b.call(m,"__wrapped__"),U=F&&b.call(_,"__wrapped__");if(G||U){var Z=G?m.value():m,J=U?_.value():_;return S||(S=new t),y(Z,J,M,x,S)}}return K?(S||(S=new t),c(m,_,M,x,y,S)):!1}E.exports=g},"./node_modules/_lodash@4.17.20@lodash/_baseIsMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Map]";function c(r){return u(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsMatch.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js"),s=1,c=2;function r(h,n,i,a){var o=i.length,l=o,f=!a;if(h==null)return!l;for(h=Object(h);o--;){var v=i[o];if(f&&v[2]?v[1]!==h[v[0]]:!(v[0]in h))return!1}for(;++o<l;){v=i[o];var b=v[0],g=h[b],m=v[1];if(f&&v[2]){if(g===void 0&&!(b in h))return!1}else{var _=new t;if(a)var M=a(g,m,b,h,n,_);if(!(M===void 0?u(m,g,s|c,a,_):M))return!1}}return!0}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_baseIsNaN.js":function(E,T){function e(t){return t!==t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseIsNative.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isMasked.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_toSource.js"),r=/[\\^$.*+?()[\]{}|]/g,h=/^\[object .+?Constructor\]$/,n=Function.prototype,i=Object.prototype,a=n.toString,o=i.hasOwnProperty,l=RegExp("^"+a.call(o).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(v){if(!s(v)||u(v))return!1;var b=t(v)?l:h;return b.test(c(v))}E.exports=f},"./node_modules/_lodash@4.17.20@lodash/_baseIsSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Set]";function c(r){return u(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isLength.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),c="[object Arguments]",r="[object Array]",h="[object Boolean]",n="[object Date]",i="[object Error]",a="[object Function]",o="[object Map]",l="[object Number]",f="[object Object]",v="[object RegExp]",b="[object Set]",g="[object String]",m="[object WeakMap]",_="[object ArrayBuffer]",M="[object DataView]",x="[object Float32Array]",y="[object Float64Array]",S="[object Int8Array]",P="[object Int16Array]",A="[object Int32Array]",O="[object Uint8Array]",L="[object Uint8ClampedArray]",H="[object Uint16Array]",F="[object Uint32Array]",K={};K[x]=K[y]=K[S]=K[P]=K[A]=K[O]=K[L]=K[H]=K[F]=!0,K[c]=K[r]=K[_]=K[h]=K[M]=K[n]=K[i]=K[a]=K[o]=K[l]=K[f]=K[v]=K[b]=K[g]=K[m]=!1;function G(U){return s(U)&&u(U.length)&&!!K[t(U)]}E.exports=G},"./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseMatches.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseMatchesProperty.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/property.js");function h(n){return typeof n=="function"?n:n==null?s:typeof n=="object"?c(n)?u(n[0],n[1]):t(n):r(n)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_nativeKeys.js"),s=Object.prototype,c=s.hasOwnProperty;function r(h){if(!t(h))return u(h);var n=[];for(var i in Object(h))c.call(h,i)&&i!="constructor"&&n.push(i);return n}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_baseKeysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nativeKeysIn.js"),c=Object.prototype,r=c.hasOwnProperty;function h(n){if(!t(n))return s(n);var i=u(n),a=[];for(var o in n)o=="constructor"&&(i||!r.call(n,o))||a.push(o);return a}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseLt.js":function(E,T){function e(t,u){return t<u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function s(c,r){var h=-1,n=u(c)?Array(c.length):[];return t(c,function(i,a,o){n[++h]=r(i,a,o)}),n}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseMatches.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsMatch.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getMatchData.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js");function c(r){var h=u(r);return h.length==1&&h[0][2]?s(h[0][0],h[0][1]):function(n){return n===r||t(n,r,h)}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseMatchesProperty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js"),u=e("./node_modules/_lodash@4.17.20@lodash/get.js"),s=e("./node_modules/_lodash@4.17.20@lodash/hasIn.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js"),i=1,a=2;function o(l,f){return c(l)&&r(f)?h(n(l),f):function(v){var b=u(v,l);return b===void 0&&b===f?s(v,l):t(f,b,i|a)}}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/_baseMerge.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseMergeDeep.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),h=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_safeGet.js");function i(a,o,l,f,v){a!==o&&s(o,function(b,g){if(v||(v=new t),r(b))c(a,o,g,l,i,f,v);else{var m=f?f(n(a,g),b,g+"",a,o,v):void 0;m===void 0&&(m=b),u(a,g,m)}},h)}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseMergeDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_copyArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),o=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),f=e("./node_modules/_lodash@4.17.20@lodash/isPlainObject.js"),v=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),b=e("./node_modules/_lodash@4.17.20@lodash/_safeGet.js"),g=e("./node_modules/_lodash@4.17.20@lodash/toPlainObject.js");function m(_,M,x,y,S,P,A){var O=b(_,x),L=b(M,x),H=A.get(L);if(H){t(_,x,H);return}var F=P?P(O,L,x+"",_,M,A):void 0,K=F===void 0;if(K){var G=n(L),U=!G&&a(L),Z=!G&&!U&&v(L);F=L,G||U||Z?n(O)?F=O:i(O)?F=c(O):U?(K=!1,F=u(L,!0)):Z?(K=!1,F=s(L,!0)):F=[]:f(L)||h(L)?(F=O,h(O)?F=g(O):(!l(O)||o(O))&&(F=r(L))):K=!1}K&&(A.set(L,F),S(F,L,y,P,A),A.delete(L)),t(_,x,F)}E.exports=m},"./node_modules/_lodash@4.17.20@lodash/_baseOrderBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseMap.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_baseSortBy.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_compareMultiple.js"),i=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function o(l,f,v){f.length?f=t(f,function(m){return a(m)?function(_){return u(_,m.length===1?m[0]:m)}:m}):f=[i];var b=-1;f=t(f,h(s));var g=c(l,function(m,_,M){var x=t(f,function(y){return y(m)});return{criteria:x,index:++b,value:m}});return r(g,function(m,_){return n(m,_,v)})}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/_basePick.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_basePickBy.js"),u=e("./node_modules/_lodash@4.17.20@lodash/hasIn.js");function s(c,r){return t(c,r,function(h,n){return u(c,n)})}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_basePickBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseSet.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js");function c(r,h,n){for(var i=-1,a=h.length,o={};++i<a;){var l=h[i],f=t(r,l);n(f,l)&&u(o,s(l,r),f)}return o}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseProperty.js":function(E,T){function e(t){return function(u){return u==null?void 0:u[t]}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_basePropertyDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js");function u(s){return function(c){return t(c,s)}}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseRange.js":function(E,T){var e=Math.ceil,t=Math.max;function u(s,c,r,h){for(var n=-1,i=t(e((c-s)/(r||1)),0),a=Array(i);i--;)a[h?i:++n]=s,s+=r;return a}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseReduce.js":function(E,T){function e(t,u,s,c,r){return r(t,function(h,n,i){s=c?(c=!1,h):u(s,h,n,i)}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_overRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToString.js");function c(r,h){return s(u(r,h,t),r+"")}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function h(n,i,a,o){if(!c(n))return n;i=u(i,n);for(var l=-1,f=i.length,v=f-1,b=n;b!=null&&++l<f;){var g=r(i[l]),m=a;if(g==="__proto__"||g==="constructor"||g==="prototype")return n;if(l!=v){var _=b[g];m=o?o(_,g,b):void 0,m===void 0&&(m=c(_)?_:s(i[l+1])?[]:{})}t(b,g,m),b=b[g]}return n}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseSetToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/constant.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_defineProperty.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),c=u?function(r,h){return u(r,"toString",{configurable:!0,enumerable:!1,value:t(h),writable:!0})}:s;E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseSortBy.js":function(E,T){function e(t,u){var s=t.length;for(t.sort(u);s--;)t[s]=t[s].value;return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseTimes.js":function(E,T){function e(t,u){for(var s=-1,c=Array(t);++s<t;)c[s]=u(s);return c}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),r=1/0,h=t?t.prototype:void 0,n=h?h.toString:void 0;function i(a){if(typeof a=="string")return a;if(s(a))return u(a,i)+"";if(c(a))return n?n.call(a):"";var o=a+"";return o=="0"&&1/a==-r?"-0":o}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseUnary.js":function(E,T){function e(t){return function(u){return t(u)}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseUniq.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_SetCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_arrayIncludes.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_arrayIncludesWith.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_cacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_createSet.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),n=200;function i(a,o,l){var f=-1,v=u,b=a.length,g=!0,m=[],_=m;if(l)g=!1,v=s;else if(b>=n){var M=o?null:r(a);if(M)return h(M);g=!1,v=c,_=new t}else _=o?[]:m;t:for(;++f<b;){var x=a[f],y=o?o(x):x;if(x=l||x!==0?x:0,g&&y===y){for(var S=_.length;S--;)if(_[S]===y)continue t;o&&_.push(y),m.push(x)}else v(_,y,l)||(_!==m&&_.push(y),m.push(x))}return m}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseValues.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js");function u(s,c){return t(c,function(r){return s[r]})}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseZipObject.js":function(E,T){function e(t,u,s){for(var c=-1,r=t.length,h=u.length,n={};++c<r;){var i=c<h?u[c]:void 0;s(n,t[c],i)}return n}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_cacheHas.js":function(E,T){function e(t,u){return t.has(u)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_castFunction.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function u(s){return typeof s=="function"?s:t}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_castPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_stringToPath.js"),c=e("./node_modules/_lodash@4.17.20@lodash/toString.js");function r(h,n){return t(h)?h:u(h,n)?[h]:s(c(h))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js");function u(s){var c=new s.constructor(s.byteLength);return new t(c).set(new t(s)),c}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js":function(E,T,e){(function(t){var u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=T&&!T.nodeType&&T,c=s&&typeof t=="object"&&t&&!t.nodeType&&t,r=c&&c.exports===s,h=r?u.Buffer:void 0,n=h?h.allocUnsafe:void 0;function i(a,o){if(o)return a.slice();var l=a.length,f=n?n(l):new a.constructor(l);return a.copy(f),f}t.exports=i}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/_cloneDataView.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js");function u(s,c){var r=c?t(s.buffer):s.buffer;return new s.constructor(r,s.byteOffset,s.byteLength)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_cloneRegExp.js":function(E,T){var e=/\w*$/;function t(u){var s=new u.constructor(u.source,e.exec(u));return s.lastIndex=u.lastIndex,s}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_cloneSymbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=t?t.prototype:void 0,s=u?u.valueOf:void 0;function c(r){return s?Object(s.call(r)):{}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js");function u(s,c){var r=c?t(s.buffer):s.buffer;return new s.constructor(r,s.byteOffset,s.length)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_compareAscending.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js");function u(s,c){if(s!==c){var r=s!==void 0,h=s===null,n=s===s,i=t(s),a=c!==void 0,o=c===null,l=c===c,f=t(c);if(!o&&!f&&!i&&s>c||i&&a&&l&&!o&&!f||h&&a&&l||!r&&l||!n)return 1;if(!h&&!i&&!f&&s<c||f&&r&&n&&!h&&!i||o&&r&&n||!a&&n||!l)return-1}return 0}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_compareMultiple.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_compareAscending.js");function u(s,c,r){for(var h=-1,n=s.criteria,i=c.criteria,a=n.length,o=r.length;++h<a;){var l=t(n[h],i[h]);if(l){if(h>=o)return l;var f=r[h];return l*(f=="desc"?-1:1)}}return s.index-c.index}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_copyArray.js":function(E,T){function e(t,u){var s=-1,c=t.length;for(u||(u=Array(c));++s<c;)u[s]=t[s];return u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_copyObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js");function s(c,r,h,n){var i=!h;h||(h={});for(var a=-1,o=r.length;++a<o;){var l=r[a],f=n?n(h[l],c[l],l,h,c):void 0;f===void 0&&(f=c[l]),i?u(h,l,f):t(h,l,f)}return h}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_copySymbols.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js");function s(c,r){return t(c,u(c),r)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_copySymbolsIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js");function s(c,r){return t(c,u(c),r)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_coreJsData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),u=t["__core-js_shared__"];E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_createAssigner.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js");function s(c){return t(function(r,h){var n=-1,i=h.length,a=i>1?h[i-1]:void 0,o=i>2?h[2]:void 0;for(a=c.length>3&&typeof a=="function"?(i--,a):void 0,o&&u(h[0],h[1],o)&&(a=i<3?void 0:a,i=1),r=Object(r);++n<i;){var l=h[n];l&&c(r,l,n,a)}return r})}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_createBaseEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function u(s,c){return function(r,h){if(r==null)return r;if(!t(r))return s(r,h);for(var n=r.length,i=c?n:-1,a=Object(r);(c?i--:++i<n)&&h(a[i],i,a)!==!1;);return r}}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_createBaseFor.js":function(E,T){function e(t){return function(u,s,c){for(var r=-1,h=Object(u),n=c(u),i=n.length;i--;){var a=n[t?i:++r];if(s(h[a],a,h)===!1)break}return u}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_createFind.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function c(r){return function(h,n,i){var a=Object(h);if(!u(h)){var o=t(n,3);h=s(h),n=function(v){return o(a[v],v,a)}}var l=r(h,n,i);return l>-1?a[o?h[l]:l]:void 0}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_createRange.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRange.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),s=e("./node_modules/_lodash@4.17.20@lodash/toFinite.js");function c(r){return function(h,n,i){return i&&typeof i!="number"&&u(h,n,i)&&(n=i=void 0),h=s(h),n===void 0?(n=h,h=0):n=s(n),i=i===void 0?h<n?1:-1:s(i),t(h,n,i,r)}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_createSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Set.js"),u=e("./node_modules/_lodash@4.17.20@lodash/noop.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),c=1/0,r=t&&1/s(new t([,-0]))[1]==c?function(h){return new t(h)}:u;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_defineProperty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=function(){try{var s=t(Object,"defineProperty");return s({},"",{}),s}catch(c){}}();E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_equalArrays.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_SetCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_arraySome.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cacheHas.js"),c=1,r=2;function h(n,i,a,o,l,f){var v=a&c,b=n.length,g=i.length;if(b!=g&&!(v&&g>b))return!1;var m=f.get(n),_=f.get(i);if(m&&_)return m==i&&_==n;var M=-1,x=!0,y=a&r?new t:void 0;for(f.set(n,i),f.set(i,n);++M<b;){var S=n[M],P=i[M];if(o)var A=v?o(P,S,M,i,n,f):o(S,P,M,n,i,f);if(A!==void 0){if(A)continue;x=!1;break}if(y){if(!u(i,function(O,L){if(!s(y,L)&&(S===O||l(S,O,a,o,f)))return y.push(L)})){x=!1;break}}else if(!(S===P||l(S,P,a,o,f))){x=!1;break}}return f.delete(n),f.delete(i),x}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_equalByTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js"),s=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_equalArrays.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_mapToArray.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),n=1,i=2,a="[object Boolean]",o="[object Date]",l="[object Error]",f="[object Map]",v="[object Number]",b="[object RegExp]",g="[object Set]",m="[object String]",_="[object Symbol]",M="[object ArrayBuffer]",x="[object DataView]",y=t?t.prototype:void 0,S=y?y.valueOf:void 0;function P(A,O,L,H,F,K,G){switch(L){case x:if(A.byteLength!=O.byteLength||A.byteOffset!=O.byteOffset)return!1;A=A.buffer,O=O.buffer;case M:return!(A.byteLength!=O.byteLength||!K(new u(A),new u(O)));case a:case o:case v:return s(+A,+O);case l:return A.name==O.name&&A.message==O.message;case b:case m:return A==O+"";case f:var U=r;case g:var Z=H&n;if(U||(U=h),A.size!=O.size&&!Z)return!1;var J=G.get(A);if(J)return J==O;H|=i,G.set(A,O);var rt=c(U(A),U(O),H,F,K,G);return G.delete(A),rt;case _:if(S)return S.call(A)==S.call(O)}return!1}E.exports=P},"./node_modules/_lodash@4.17.20@lodash/_equalObjects.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js"),u=1,s=Object.prototype,c=s.hasOwnProperty;function r(h,n,i,a,o,l){var f=i&u,v=t(h),b=v.length,g=t(n),m=g.length;if(b!=m&&!f)return!1;for(var _=b;_--;){var M=v[_];if(!(f?M in n:c.call(n,M)))return!1}var x=l.get(h),y=l.get(n);if(x&&y)return x==n&&y==h;var S=!0;l.set(h,n),l.set(n,h);for(var P=f;++_<b;){M=v[_];var A=h[M],O=n[M];if(a)var L=f?a(O,A,M,n,h,l):a(A,O,M,h,n,l);if(!(L===void 0?A===O||o(A,O,i,a,l):L)){S=!1;break}P||(P=M=="constructor")}if(S&&!P){var H=h.constructor,F=n.constructor;H!=F&&"constructor"in h&&"constructor"in n&&!(typeof H=="function"&&H instanceof H&&typeof F=="function"&&F instanceof F)&&(S=!1)}return l.delete(h),l.delete(n),S}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_flatRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/flatten.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_overRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToString.js");function c(r){return s(u(r,void 0,t),r+"")}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js":function(E,T,e){(function(t){var u=typeof t=="object"&&t&&t.Object===Object&&t;E.exports=u}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/global.js"))},"./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function c(r){return t(r,s,u)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_getAllKeysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function c(r){return t(r,s,u)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_getMapData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isKeyable.js");function u(s,c){var r=s.__data__;return t(c)?r[typeof c=="string"?"string":"hash"]:r.map}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_getMatchData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c){for(var r=u(c),h=r.length;h--;){var n=r[h],i=c[n];r[h]=[n,i,t(i)]}return r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_getNative.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getValue.js");function s(c,r){var h=u(c,r);return t(h)?h:void 0}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_getPrototype.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_overArg.js"),u=t(Object.getPrototypeOf,Object);E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_getRawTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=Object.prototype,s=u.hasOwnProperty,c=u.toString,r=t?t.toStringTag:void 0;function h(n){var i=s.call(n,r),a=n[r];try{n[r]=void 0;var o=!0}catch(f){}var l=c.call(n);return o&&(i?n[r]=a:delete n[r]),l}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getSymbols.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js"),u=e("./node_modules/_lodash@4.17.20@lodash/stubArray.js"),s=Object.prototype,c=s.propertyIsEnumerable,r=Object.getOwnPropertySymbols,h=r?function(n){return n==null?[]:(n=Object(n),t(r(n),function(i){return c.call(n,i)}))}:u;E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js"),c=e("./node_modules/_lodash@4.17.20@lodash/stubArray.js"),r=Object.getOwnPropertySymbols,h=r?function(n){for(var i=[];n;)t(i,s(n)),n=u(n);return i}:c;E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_DataView.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_Map.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_Promise.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_Set.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_WeakMap.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_toSource.js"),i="[object Map]",a="[object Object]",o="[object Promise]",l="[object Set]",f="[object WeakMap]",v="[object DataView]",b=n(t),g=n(u),m=n(s),_=n(c),M=n(r),x=h;(t&&x(new t(new ArrayBuffer(1)))!=v||u&&x(new u)!=i||s&&x(s.resolve())!=o||c&&x(new c)!=l||r&&x(new r)!=f)&&(x=function(S){var P=h(S),A=P==a?S.constructor:void 0,O=A?n(A):"";if(O)switch(O){case b:return v;case g:return i;case m:return o;case _:return l;case M:return f}return P}),E.exports=x},"./node_modules/_lodash@4.17.20@lodash/_getValue.js":function(E,T){function e(t,u){return t==null?void 0:t[u]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_hasPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isLength.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function n(i,a,o){a=t(a,i);for(var l=-1,f=a.length,v=!1;++l<f;){var b=h(a[l]);if(!(v=i!=null&&o(i,b)))break;i=i[b]}return v||++l!=f?v:(f=i==null?0:i.length,!!f&&r(f)&&c(b,f)&&(s(i)||u(i)))}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_hasUnicode.js":function(E,T){var e="\\ud800-\\udfff",t="\\u0300-\\u036f",u="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",c=t+u+s,r="\\ufe0e\\ufe0f",h="\\u200d",n=RegExp("["+h+e+c+r+"]");function i(a){return n.test(a)}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_hashClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js");function u(){this.__data__=t?t(null):{},this.size=0}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_hashDelete.js":function(E,T){function e(t){var u=this.has(t)&&delete this.__data__[t];return this.size-=u?1:0,u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_hashGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),u="__lodash_hash_undefined__",s=Object.prototype,c=s.hasOwnProperty;function r(h){var n=this.__data__;if(t){var i=n[h];return i===u?void 0:i}return c.call(n,h)?n[h]:void 0}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_hashHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),u=Object.prototype,s=u.hasOwnProperty;function c(r){var h=this.__data__;return t?h[r]!==void 0:s.call(h,r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_hashSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),u="__lodash_hash_undefined__";function s(c,r){var h=this.__data__;return this.size+=this.has(c)?0:1,h[c]=t&&r===void 0?u:r,this}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_initCloneArray.js":function(E,T){var e=Object.prototype,t=e.hasOwnProperty;function u(s){var c=s.length,r=new s.constructor(c);return c&&typeof s[0]=="string"&&t.call(s,"index")&&(r.index=s.index,r.input=s.input),r}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_initCloneByTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_cloneDataView.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cloneRegExp.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_cloneSymbol.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js"),h="[object Boolean]",n="[object Date]",i="[object Map]",a="[object Number]",o="[object RegExp]",l="[object Set]",f="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",g="[object DataView]",m="[object Float32Array]",_="[object Float64Array]",M="[object Int8Array]",x="[object Int16Array]",y="[object Int32Array]",S="[object Uint8Array]",P="[object Uint8ClampedArray]",A="[object Uint16Array]",O="[object Uint32Array]";function L(H,F,K){var G=H.constructor;switch(F){case b:return t(H);case h:case n:return new G(+H);case g:return u(H,K);case m:case _:case M:case x:case y:case S:case P:case A:case O:return r(H,K);case i:return new G;case a:case f:return new G(H);case o:return s(H);case l:return new G;case v:return c(H)}}E.exports=L},"./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseCreate.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js");function c(r){return typeof r.constructor=="function"&&!s(r)?t(u(r)):{}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_isFlattenable.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=t?t.isConcatSpreadable:void 0;function r(h){return s(h)||u(h)||!!(c&&h&&h[c])}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isIndex.js":function(E,T){var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function u(s,c){var r=typeof s;return c=c==null?e:c,!!c&&(r=="number"||r!="symbol"&&t.test(s))&&s>-1&&s%1==0&&s<c}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isObject.js");function r(h,n,i){if(!c(i))return!1;var a=typeof n;return(a=="number"?u(i)&&s(n,i.length):a=="string"&&n in i)?t(i[n],h):!1}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isKey.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;function r(h,n){if(t(h))return!1;var i=typeof h;return i=="number"||i=="symbol"||i=="boolean"||h==null||u(h)?!0:c.test(h)||!s.test(h)||n!=null&&h in Object(n)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isKeyable.js":function(E,T){function e(t){var u=typeof t;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?t!=="__proto__":t===null}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_isMasked.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_coreJsData.js"),u=function(){var c=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}();function s(c){return!!u&&u in c}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_isPrototype.js":function(E,T){var e=Object.prototype;function t(u){var s=u&&u.constructor,c=typeof s=="function"&&s.prototype||e;return u===c}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js");function u(s){return s===s&&!t(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_listCacheClear.js":function(E,T){function e(){this.__data__=[],this.size=0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_listCacheDelete.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js"),u=Array.prototype,s=u.splice;function c(r){var h=this.__data__,n=t(h,r);if(n<0)return!1;var i=h.length-1;return n==i?h.pop():s.call(h,n,1),--this.size,!0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_listCacheGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function u(s){var c=this.__data__,r=t(c,s);return r<0?void 0:c[r][1]}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_listCacheHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function u(s){return t(this.__data__,s)>-1}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_listCacheSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function u(s,c){var r=this.__data__,h=t(r,s);return h<0?(++this.size,r.push([s,c])):r[h][1]=c,this}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapCacheClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Hash.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_Map.js");function c(){this.size=0,this.__data__={hash:new t,map:new(s||u),string:new t}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_mapCacheDelete.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function u(s){var c=t(this,s).delete(s);return this.size-=c?1:0,c}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapCacheGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function u(s){return t(this,s).get(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapCacheHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function u(s){return t(this,s).has(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapCacheSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function u(s,c){var r=t(this,s),h=r.size;return r.set(s,c),this.size+=r.size==h?0:1,this}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapToArray.js":function(E,T){function e(t){var u=-1,s=Array(t.size);return t.forEach(function(c,r){s[++u]=[r,c]}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js":function(E,T){function e(t,u){return function(s){return s==null?!1:s[t]===u&&(u!==void 0||t in Object(s))}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_memoizeCapped.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/memoize.js"),u=500;function s(c){var r=t(c,function(n){return h.size===u&&h.clear(),n}),h=r.cache;return r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=t(Object,"create");E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_nativeKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_overArg.js"),u=t(Object.keys,Object);E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_nativeKeysIn.js":function(E,T){function e(t){var u=[];if(t!=null)for(var s in Object(t))u.push(s);return u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js":function(E,T,e){(function(t){var u=e("./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js"),s=T&&!T.nodeType&&T,c=s&&typeof t=="object"&&t&&!t.nodeType&&t,r=c&&c.exports===s,h=r&&u.process,n=function(){try{var i=c&&c.require&&c.require("util").types;return i||h&&h.binding&&h.binding("util")}catch(a){}}();t.exports=n}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/_objectToString.js":function(E,T){var e=Object.prototype,t=e.toString;function u(s){return t.call(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_overArg.js":function(E,T){function e(t,u){return function(s){return t(u(s))}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_overRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_apply.js"),u=Math.max;function s(c,r,h){return r=u(r===void 0?c.length-1:r,0),function(){for(var n=arguments,i=-1,a=u(n.length-r,0),o=Array(a);++i<a;)o[i]=n[r+i];i=-1;for(var l=Array(r+1);++i<r;)l[i]=n[i];return l[r]=h(o),t(c,this,l)}}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_root.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js"),u=typeof self=="object"&&self&&self.Object===Object&&self,s=t||u||Function("return this")();E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_safeGet.js":function(E,T){function e(t,u){if(!(u==="constructor"&&typeof t[u]=="function")&&u!="__proto__")return t[u]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setCacheAdd.js":function(E,T){var e="__lodash_hash_undefined__";function t(u){return this.__data__.set(u,e),this}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_setCacheHas.js":function(E,T){function e(t){return this.__data__.has(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setToArray.js":function(E,T){function e(t){var u=-1,s=Array(t.size);return t.forEach(function(c){s[++u]=c}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseSetToString.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_shortOut.js"),s=u(t);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_shortOut.js":function(E,T){var e=800,t=16,u=Date.now;function s(c){var r=0,h=0;return function(){var n=u(),i=t-(n-h);if(h=n,i>0){if(++r>=e)return arguments[0]}else r=0;return c.apply(void 0,arguments)}}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_stackClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js");function u(){this.__data__=new t,this.size=0}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_stackDelete.js":function(E,T){function e(t){var u=this.__data__,s=u.delete(t);return this.size=u.size,s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackGet.js":function(E,T){function e(t){return this.__data__.get(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackHas.js":function(E,T){function e(t){return this.__data__.has(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_Map.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),c=200;function r(h,n){var i=this.__data__;if(i instanceof t){var a=i.__data__;if(!u||a.length<c-1)return a.push([h,n]),this.size=++i.size,this;i=this.__data__=new s(a)}return i.set(h,n),this.size=i.size,this}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_strictIndexOf.js":function(E,T){function e(t,u,s){for(var c=s-1,r=t.length;++c<r;)if(t[c]===u)return c;return-1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stringSize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_asciiSize.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_hasUnicode.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_unicodeSize.js");function c(r){return u(r)?s(r):t(r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_stringToPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_memoizeCapped.js"),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,c=t(function(r){var h=[];return r.charCodeAt(0)===46&&h.push(""),r.replace(u,function(n,i,a,o){h.push(a?o.replace(s,"$1"):i||n)}),h});E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_toKey.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),u=1/0;function s(c){if(typeof c=="string"||t(c))return c;var r=c+"";return r=="0"&&1/c==-u?"-0":r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_toSource.js":function(E,T){var e=Function.prototype,t=e.toString;function u(s){if(s!=null){try{return t.call(s)}catch(c){}try{return s+""}catch(c){}}return""}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_unicodeSize.js":function(E,T){var e="\\ud800-\\udfff",t="\\u0300-\\u036f",u="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",c=t+u+s,r="\\ufe0e\\ufe0f",h="["+e+"]",n="["+c+"]",i="\\ud83c[\\udffb-\\udfff]",a="(?:"+n+"|"+i+")",o="[^"+e+"]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",b=a+"?",g="["+r+"]?",m="(?:"+v+"(?:"+[o,l,f].join("|")+")"+g+b+")*",_=g+b+m,M="(?:"+[o+n+"?",n,l,f,h].join("|")+")",x=RegExp(i+"(?="+i+")|"+M+_,"g");function y(S){for(var P=x.lastIndex=0;x.test(S);)++P;return P}E.exports=y},"./node_modules/_lodash@4.17.20@lodash/clone.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseClone.js"),u=4;function s(c){return t(c,u)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/cloneDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseClone.js"),u=1,s=4;function c(r){return t(r,u|s)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/constant.js":function(E,T){function e(t){return function(){return t}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/defaults.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),u=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),c=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),r=Object.prototype,h=r.hasOwnProperty,n=t(function(i,a){i=Object(i);var o=-1,l=a.length,f=l>2?a[2]:void 0;for(f&&s(a[0],a[1],f)&&(l=1);++o<l;)for(var v=a[o],b=c(v),g=-1,m=b.length;++g<m;){var _=b[g],M=i[_];(M===void 0||u(M,r[_])&&!h.call(i,_))&&(i[_]=v[_])}return i});E.exports=n},"./node_modules/_lodash@4.17.20@lodash/each.js":function(E,T,e){E.exports=e("./node_modules/_lodash@4.17.20@lodash/forEach.js")},"./node_modules/_lodash@4.17.20@lodash/eq.js":function(E,T){function e(t,u){return t===u||t!==t&&u!==u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/filter.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseFilter.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(h,n){var i=c(h)?t:u;return i(h,s(n,3))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/find.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createFind.js"),u=e("./node_modules/_lodash@4.17.20@lodash/findIndex.js"),s=t(u);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/findIndex.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/toInteger.js"),c=Math.max;function r(h,n,i){var a=h==null?0:h.length;if(!a)return-1;var o=i==null?0:s(i);return o<0&&(o=c(a+o,0)),t(h,u(n,3),o)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/flatten.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js");function u(s){var c=s==null?0:s.length;return c?t(s,1):[]}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/forEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_castFunction.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(h,n){var i=c(h)?t:u;return i(h,s(n))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/forIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_castFunction.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function c(r,h){return r==null?r:t(r,u(h),s)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/get.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js");function u(s,c,r){var h=s==null?void 0:t(s,c);return h===void 0?r:h}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/has.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseHas.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_hasPath.js");function s(c,r){return c!=null&&u(c,r,t)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/hasIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseHasIn.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_hasPath.js");function s(c,r){return c!=null&&u(c,r,t)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/identity.js":function(E,T){function e(t){return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isArguments.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsArguments.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s=Object.prototype,c=s.hasOwnProperty,r=s.propertyIsEnumerable,h=t(function(){return arguments}())?t:function(n){return u(n)&&c.call(n,"callee")&&!r.call(n,"callee")};E.exports=h},"./node_modules/_lodash@4.17.20@lodash/isArray.js":function(E,T){var e=Array.isArray;E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isArrayLike.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isLength.js");function s(c){return c!=null&&u(c.length)&&!t(c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js");function s(c){return u(c)&&t(c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/isBuffer.js":function(E,T,e){(function(t){var u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=e("./node_modules/_lodash@4.17.20@lodash/stubFalse.js"),c=T&&!T.nodeType&&T,r=c&&typeof t=="object"&&t&&!t.nodeType&&t,h=r&&r.exports===c,n=h?u.Buffer:void 0,i=n?n.isBuffer:void 0,a=i||s;t.exports=a}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/isEmpty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),a="[object Map]",o="[object Set]",l=Object.prototype,f=l.hasOwnProperty;function v(b){if(b==null)return!0;if(r(b)&&(c(b)||typeof b=="string"||typeof b.splice=="function"||h(b)||i(b)||s(b)))return!b.length;var g=u(b);if(g==a||g==o)return!b.size;if(n(b))return!t(b).length;for(var m in b)if(f.call(b,m))return!1;return!0}E.exports=v},"./node_modules/_lodash@4.17.20@lodash/isFunction.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),s="[object AsyncFunction]",c="[object Function]",r="[object GeneratorFunction]",h="[object Proxy]";function n(i){if(!u(i))return!1;var a=t(i);return a==c||a==r||a==s||a==h}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/isLength.js":function(E,T){var e=9007199254740991;function t(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=e}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/isMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsMap.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),c=s&&s.isMap,r=c?u(c):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isObject.js":function(E,T){function e(t){var u=typeof t;return t!=null&&(u=="object"||u=="function")}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isObjectLike.js":function(E,T){function e(t){return t!=null&&typeof t=="object"}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isPlainObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),c="[object Object]",r=Function.prototype,h=Object.prototype,n=r.toString,i=h.hasOwnProperty,a=n.call(Object);function o(l){if(!s(l)||t(l)!=c)return!1;var f=u(l);if(f===null)return!0;var v=i.call(f,"constructor")&&f.constructor;return typeof v=="function"&&v instanceof v&&n.call(v)==a}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/isSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsSet.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),c=s&&s.isSet,r=c?u(c):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),c="[object String]";function r(h){return typeof h=="string"||!u(h)&&s(h)&&t(h)==c}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isSymbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Symbol]";function c(r){return typeof r=="symbol"||u(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/isTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsTypedArray.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),c=s&&s.isTypedArray,r=c?u(c):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isUndefined.js":function(E,T){function e(t){return t===void 0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/keys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function c(r){return s(r)?t(r):u(r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/keysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseKeysIn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function c(r){return s(r)?t(r,!0):u(r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/last.js":function(E,T){function e(t){var u=t==null?0:t.length;return u?t[u-1]:void 0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/map.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseMap.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(h,n){var i=c(h)?t:s;return i(h,u(n,3))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/mapValues.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js");function c(r,h){var n={};return h=s(h,3),u(r,function(i,a,o){t(n,a,h(i,a,o))}),n}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/max.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseGt.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function c(r){return r&&r.length?t(r,s,u):void 0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/memoize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),u="Expected a function";function s(c,r){if(typeof c!="function"||r!=null&&typeof r!="function")throw new TypeError(u);var h=function n(){var i=arguments,a=r?r.apply(this,i):i[0],o=n.cache;if(o.has(a))return o.get(a);var l=c.apply(this,i);return n.cache=o.set(a,l)||o,l};return h.cache=new(s.Cache||t),h}s.Cache=t,E.exports=s},"./node_modules/_lodash@4.17.20@lodash/merge.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseMerge.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_createAssigner.js"),s=u(function(c,r,h){t(c,r,h)});E.exports=s},"./node_modules/_lodash@4.17.20@lodash/min.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseLt.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function c(r){return r&&r.length?t(r,s,u):void 0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/minBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseLt.js");function c(r,h){return r&&r.length?t(r,u(h,2),s):void 0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/noop.js":function(E,T){function e(){}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/now.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),u=function(){return t.Date.now()};E.exports=u},"./node_modules/_lodash@4.17.20@lodash/pick.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_basePick.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_flatRest.js"),s=u(function(c,r){return c==null?{}:t(c,r)});E.exports=s},"./node_modules/_lodash@4.17.20@lodash/property.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseProperty.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_basePropertyDeep.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function r(h){return s(h)?t(c(h)):u(h)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/range.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createRange.js"),u=t();E.exports=u},"./node_modules/_lodash@4.17.20@lodash/reduce.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayReduce.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseReduce.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function h(n,i,a){var o=r(n)?t:c,l=arguments.length<3;return o(n,s(i,4),a,l,u)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/size.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isString.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_stringSize.js"),h="[object Map]",n="[object Set]";function i(a){if(a==null)return 0;if(s(a))return c(a)?r(a):a.length;var o=u(a);return o==h||o==n?a.size:t(a).length}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/sortBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseOrderBy.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),r=s(function(h,n){if(h==null)return[];var i=n.length;return i>1&&c(h,n[0],n[1])?n=[]:i>2&&c(n[0],n[1],n[2])&&(n=[n[0]]),u(h,t(n,1),[])});E.exports=r},"./node_modules/_lodash@4.17.20@lodash/stubArray.js":function(E,T){function e(){return[]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/stubFalse.js":function(E,T){function e(){return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/toFinite.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toNumber.js"),u=1/0,s=17976931348623157e292;function c(r){if(!r)return r===0?r:0;if(r=t(r),r===u||r===-u){var h=r<0?-1:1;return h*s}return r===r?r:0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/toInteger.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toFinite.js");function u(s){var c=t(s),r=c%1;return c===c?r?c-r:c:0}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/toNumber.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),s=0/0,c=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,n=/^0o[0-7]+$/i,i=parseInt;function a(o){if(typeof o=="number")return o;if(u(o))return s;if(t(o)){var l=typeof o.valueOf=="function"?o.valueOf():o;o=t(l)?l+"":l}if(typeof o!="string")return o===0?o:+o;o=o.replace(c,"");var f=h.test(o);return f||n.test(o)?i(o.slice(2),f?2:8):r.test(o)?s:+o}E.exports=a},"./node_modules/_lodash@4.17.20@lodash/toPlainObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function s(c){return t(c,u(c))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/toString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseToString.js");function u(s){return s==null?"":t(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/transform.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseCreate.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),o=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js");function l(f,v,b){var g=h(f),m=g||n(f)||o(f);if(v=c(v,4),b==null){var _=f&&f.constructor;m?b=g?new _:[]:a(f)?b=i(_)?u(r(f)):{}:b={}}return(m?t:s)(f,function(M,x,y){return v(b,M,x,y)}),b}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/union.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseUniq.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js"),r=u(function(h){return s(t(h,1,c,!0))});E.exports=r},"./node_modules/_lodash@4.17.20@lodash/uniqueId.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toString.js"),u=0;function s(c){var r=++u;return t(c)+r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/values.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseValues.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c){return c==null?[]:t(c,u(c))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/zipObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseZipObject.js");function s(c,r){return u(c||[],r||[],t)}E.exports=s},"./node_modules/_parse-svg-path@0.1.2@parse-svg-path/index.js":function(E,T){E.exports=u;var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function u(r){var h=[];return r.replace(t,function(n,i,a){var o=i.toLowerCase();for(a=c(a),o=="m"&&a.length>2&&(h.push([i].concat(a.splice(0,2))),o="l",i=i=="m"?"l":"L");;){if(a.length==e[o])return a.unshift(i),h.push(a);if(a.length<e[o])throw new Error("malformed path data");h.push([i].concat(a.splice(0,e[o])))}}),h}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function c(r){var h=r.match(s);return h?h.map(Number):[]}},"./node_modules/_point-at-length@1.1.0@point-at-length/index.js":function(E,T,e){var t=e("./node_modules/_parse-svg-path@0.1.2@parse-svg-path/index.js"),u=e("./node_modules/_isarray@0.0.1@isarray/index.js"),s=e("./node_modules/_abs-svg-path@0.1.1@abs-svg-path/index.js");E.exports=c;function c(i){if(!(this instanceof c))return new c(i);this._path=u(i)?i:t(i),this._path=s(this._path),this._path=n(this._path),this._path=h(this._path)}c.prototype.at=function(i,a){return this._walk(i,a).pos},c.prototype.length=function(){return this._walk(null).length},c.prototype._walk=function(i,a){for(var o=[0,0],l=[0,0,0],f=[0,0],v=0,b=0;b<this._path.length;b++){var g=this._path[b];if(g[0]==="M"){if(o[0]=g[1],o[1]=g[2],i===0)return{length:v,pos:o}}else if(g[0]==="C"){l[0]=f[0]=o[0],l[1]=f[1]=o[1],l[2]=v;for(var m=100,_=0;_<=m;_++){var M=_/m,x=A(g,M),y=O(g,M);if(v+=r(o[0],o[1],x,y),o[0]=x,o[1]=y,typeof i=="number"&&v>=i){var S=(v-i)/(v-l[2]),P=[o[0]*(1-S)+l[0]*S,o[1]*(1-S)+l[1]*S];return{length:v,pos:P}}l[0]=o[0],l[1]=o[1],l[2]=v}}else if(g[0]==="Q"){l[0]=f[0]=o[0],l[1]=f[1]=o[1],l[2]=v;for(var m=100,_=0;_<=m;_++){var M=_/m,x=L(g,M),y=H(g,M);if(v+=r(o[0],o[1],x,y),o[0]=x,o[1]=y,typeof i=="number"&&v>=i){var S=(v-i)/(v-l[2]),P=[o[0]*(1-S)+l[0]*S,o[1]*(1-S)+l[1]*S];return{length:v,pos:P}}l[0]=o[0],l[1]=o[1],l[2]=v}}else if(g[0]==="L"){if(l[0]=o[0],l[1]=o[1],l[2]=v,v+=r(o[0],o[1],g[1],g[2]),o[0]=g[1],o[1]=g[2],typeof i=="number"&&v>=i){var S=(v-i)/(v-l[2]),P=[o[0]*(1-S)+l[0]*S,o[1]*(1-S)+l[1]*S];return{length:v,pos:P}}l[0]=o[0],l[1]=o[1],l[2]=v}}return{length:v,pos:o};function A(F,K){return Math.pow(1-K,3)*f[0]+3*Math.pow(1-K,2)*K*F[1]+3*(1-K)*Math.pow(K,2)*F[3]+Math.pow(K,3)*F[5]}function O(F,K){return Math.pow(1-K,3)*f[1]+3*Math.pow(1-K,2)*K*F[2]+3*(1-K)*Math.pow(K,2)*F[4]+Math.pow(K,3)*F[6]}function L(F,K){return Math.pow(1-K,2)*f[0]+2*(1-K)*K*F[1]+Math.pow(K,2)*F[3]}function H(F,K){return Math.pow(1-K,2)*f[1]+2*(1-K)*K*F[2]+Math.pow(K,2)*F[4]}};function r(i,a,o,l){var f=i-o,v=a-l;return Math.sqrt(f*f+v*v)}function h(i){for(var a,o=0,l=0,f={S:{to:"C",x:3},T:{to:"Q",x:1}},v=0,b=i.length;v<b;v++){var g=i[v],m=f[g[0]];m&&(g[0]=m.to,a&&(a[0]===m.to?(o=2*a[m.x+2]-a[m.x],l=2*a[m.x+3]-a[m.x+1]):(o=a[a.length-2],l=a[a.length-1])),g.splice(1,0,o,l)),a=g}return i}function n(i){for(var a=[],o=["L",0,0],l,f=0,v=i.length;f<v;f++){var b=i[f];switch(b[0]){case"M":o=["L",b[1],b[2]],a.push(b);break;case"Z":a.push(o);break;case"H":l=a[a.length-1]||["L",0,0],a.push(["L",b[1],l[l.length-1]]);break;case"V":l=a[a.length-1]||["L",0,0],a.push(["L",l[l.length-2],b[1]]);break;default:a.push(b)}}return a}},"./node_modules/_regression@2.0.1@regression/dist/regression.js":function(E,T,e){var t,u,s;(function(c,r){if(!0)u=[E],t=r,s=typeof t=="function"?t.apply(T,u):t,s!==void 0&&(E.exports=s);else var h})(this,function(c){"use strict";function r(b,g,m){return g in b?Object.defineProperty(b,g,{value:m,enumerable:!0,configurable:!0,writable:!0}):b[g]=m,b}var h=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var m=arguments[g];for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(b[_]=m[_])}return b};function n(b){if(Array.isArray(b)){for(var g=0,m=Array(b.length);g<b.length;g++)m[g]=b[g];return m}else return Array.from(b)}var i={order:2,precision:2,period:null};function a(b,g){var m=[],_=[];b.forEach(function(P,A){P[1]!==null&&(_.push(P),m.push(g[A]))});var M=_.reduce(function(P,A){return P+A[1]},0),x=M/_.length,y=_.reduce(function(P,A){var O=A[1]-x;return P+O*O},0),S=_.reduce(function(P,A,O){var L=m[O],H=A[1]-L[1];return P+H*H},0);return 1-S/y}function o(b,g){for(var m=b,_=b.length-1,M=[g],x=0;x<_;x++){for(var y=x,S=x+1;S<_;S++)Math.abs(m[x][S])>Math.abs(m[x][y])&&(y=S);for(var P=x;P<_+1;P++){var A=m[P][x];m[P][x]=m[P][y],m[P][y]=A}for(var O=x+1;O<_;O++)for(var L=_;L>=x;L--)m[L][O]-=m[L][x]*m[x][O]/m[x][x]}for(var H=_-1;H>=0;H--){for(var F=0,K=H+1;K<_;K++)F+=m[K][H]*M[K];M[H]=(m[_][H]-F)/m[H][H]}return M}function l(b,g){var m=Math.pow(10,g);return Math.round(b*m)/m}var f={linear:function(g,m){for(var _=[0,0,0,0,0],M=0,x=0;x<g.length;x++)g[x][1]!==null&&(M++,_[0]+=g[x][0],_[1]+=g[x][1],_[2]+=g[x][0]*g[x][0],_[3]+=g[x][0]*g[x][1],_[4]+=g[x][1]*g[x][1]);var y=M*_[2]-_[0]*_[0],S=M*_[3]-_[0]*_[1],P=y===0?0:l(S/y,m.precision),A=l(_[1]/M-P*_[0]/M,m.precision),O=function(F){return[l(F,m.precision),l(P*F+A,m.precision)]},L=g.map(function(H){return O(H[0])});return{points:L,predict:O,equation:[P,A],r2:l(a(g,L),m.precision),string:A===0?"y = "+P+"x":"y = "+P+"x + "+A}},exponential:function(g,m){for(var _=[0,0,0,0,0,0],M=0;M<g.length;M++)g[M][1]!==null&&(_[0]+=g[M][0],_[1]+=g[M][1],_[2]+=g[M][0]*g[M][0]*g[M][1],_[3]+=g[M][1]*Math.log(g[M][1]),_[4]+=g[M][0]*g[M][1]*Math.log(g[M][1]),_[5]+=g[M][0]*g[M][1]);var x=_[1]*_[2]-_[5]*_[5],y=Math.exp((_[2]*_[3]-_[5]*_[4])/x),S=(_[1]*_[4]-_[5]*_[3])/x,P=l(y,m.precision),A=l(S,m.precision),O=function(F){return[l(F,m.precision),l(P*Math.exp(A*F),m.precision)]},L=g.map(function(H){return O(H[0])});return{points:L,predict:O,equation:[P,A],string:"y = "+P+"e^("+A+"x)",r2:l(a(g,L),m.precision)}},logarithmic:function(g,m){for(var _=[0,0,0,0],M=g.length,x=0;x<M;x++)g[x][1]!==null&&(_[0]+=Math.log(g[x][0]),_[1]+=g[x][1]*Math.log(g[x][0]),_[2]+=g[x][1],_[3]+=Math.pow(Math.log(g[x][0]),2));var y=(M*_[1]-_[2]*_[0])/(M*_[3]-_[0]*_[0]),S=l(y,m.precision),P=l((_[2]-S*_[0])/M,m.precision),A=function(H){return[l(H,m.precision),l(l(P+S*Math.log(H),m.precision),m.precision)]},O=g.map(function(L){return A(L[0])});return{points:O,predict:A,equation:[P,S],string:"y = "+P+" + "+S+" ln(x)",r2:l(a(g,O),m.precision)}},power:function(g,m){for(var _=[0,0,0,0,0],M=g.length,x=0;x<M;x++)g[x][1]!==null&&(_[0]+=Math.log(g[x][0]),_[1]+=Math.log(g[x][1])*Math.log(g[x][0]),_[2]+=Math.log(g[x][1]),_[3]+=Math.pow(Math.log(g[x][0]),2));var y=(M*_[1]-_[0]*_[2])/(M*_[3]-Math.pow(_[0],2)),S=(_[2]-y*_[0])/M,P=l(Math.exp(S),m.precision),A=l(y,m.precision),O=function(F){return[l(F,m.precision),l(l(P*Math.pow(F,A),m.precision),m.precision)]},L=g.map(function(H){return O(H[0])});return{points:L,predict:O,equation:[P,A],string:"y = "+P+"x^"+A,r2:l(a(g,L),m.precision)}},polynomial:function(g,m){for(var _=[],M=[],x=0,y=0,S=g.length,P=m.order+1,A=0;A<P;A++){for(var O=0;O<S;O++)g[O][1]!==null&&(x+=Math.pow(g[O][0],A)*g[O][1]);_.push(x),x=0;for(var L=[],H=0;H<P;H++){for(var F=0;F<S;F++)g[F][1]!==null&&(y+=Math.pow(g[F][0],A+H));L.push(y),y=0}M.push(L)}M.push(_);for(var K=o(M,P).map(function(rt){return l(rt,m.precision)}),G=function(vt){return[l(vt,m.precision),l(K.reduce(function(mt,ut,Rt){return mt+ut*Math.pow(vt,Rt)},0),m.precision)]},U=g.map(function(rt){return G(rt[0])}),Z="y = ",J=K.length-1;J>=0;J--)J>1?Z+=K[J]+"x^"+J+" + ":J===1?Z+=K[J]+"x + ":Z+=K[J];return{string:Z,points:U,predict:G,equation:[].concat(n(K)).reverse(),r2:l(a(g,U),m.precision)}}};function v(){var b=function(m,_){return h({_round:l},m,r({},_,function(M,x){return f[_](M,h({},i,x))}))};return Object.keys(f).reduce(b,{})}c.exports=v()})},"./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(k){if(k.length===0)return 0;for(var ot,it=k[0],$=0,_t=1;_t<k.length;_t++)ot=it+k[_t],Math.abs(it)>=Math.abs(k[_t])?$+=it-ot+k[_t]:$+=k[_t]-ot+it,it=ot;return it+$}function s(k){if(k.length===0)throw new Error("mean requires at least one data point");return u(k)/k.length}function c(k,ot){var it,$,_t=s(k),yt=0;if(ot===2)for($=0;$<k.length;$++)yt+=(it=k[$]-_t)*it;else for($=0;$<k.length;$++)yt+=Math.pow(k[$]-_t,ot);return yt}function r(k){if(k.length===0)throw new Error("variance requires at least one data point");return c(k,2)/k.length}function h(k){if(k.length===1)return 0;var ot=r(k);return Math.sqrt(ot)}function n(k){if(k.length===0)throw new Error("mode requires at least one data point");if(k.length===1)return k[0];for(var ot=k[0],it=NaN,$=0,_t=1,yt=1;yt<k.length+1;yt++)k[yt]!==ot?($<_t&&($=_t,it=ot),_t=1,ot=k[yt]):_t++;return it}function i(k){return k.slice().sort(function(ot,it){return ot-it})}function a(k){if(k.length===0)throw new Error("min requires at least one data point");for(var ot=k[0],it=1;it<k.length;it++)k[it]<ot&&(ot=k[it]);return ot}function o(k){if(k.length===0)throw new Error("max requires at least one data point");for(var ot=k[0],it=1;it<k.length;it++)k[it]>ot&&(ot=k[it]);return ot}function l(k,ot){var it=k.length*ot;if(k.length===0)throw new Error("quantile requires at least one data point.");if(ot<0||1<ot)throw new Error("quantiles must be between 0 and 1");return ot===1?k[k.length-1]:ot===0?k[0]:it%1!=0?k[Math.ceil(it)-1]:k.length%2==0?(k[it-1]+k[it])/2:k[it]}function f(k,ot,it,$){for(it=it||0,$=$||k.length-1;it<$;){if(600<$-it){var _t=$-it+1,yt=ot-it+1,Nt=Math.log(_t),$t=.5*Math.exp(2*Nt/3),ee=.5*Math.sqrt(Nt*$t*(_t-$t)/_t);yt-_t/2<0&&(ee*=-1),f(k,ot,Math.max(it,Math.floor(ot-yt*$t/_t+ee)),Math.min($,Math.floor(ot+(_t-yt)*$t/_t+ee)))}var Gt=k[ot],Ht=it,ae=$;for(v(k,it,ot),k[$]>Gt&&v(k,it,$);Ht<ae;){for(v(k,Ht,ae),Ht++,ae--;k[Ht]<Gt;)Ht++;for(;k[ae]>Gt;)ae--}k[it]===Gt?v(k,it,ae):v(k,++ae,$),ae<=ot&&(it=ae+1),ot<=ae&&($=ae-1)}}function v(k,ot,it){var $=k[ot];k[ot]=k[it],k[it]=$}function b(k,ot){var it=k.slice();if(Array.isArray(ot)){(function(yt,Nt){for(var $t=[0],ee=0;ee<Nt.length;ee++)$t.push(_(yt.length,Nt[ee]));$t.push(yt.length-1),$t.sort(m);for(var Gt=[0,$t.length-1];Gt.length;){var Ht=Math.ceil(Gt.pop()),ae=Math.floor(Gt.pop());if(!(Ht-ae<=1)){var le=Math.floor((ae+Ht)/2);g(yt,$t[le],$t[ae],$t[Ht]),Gt.push(ae,le,le,Ht)}}})(it,ot);for(var $=[],_t=0;_t<ot.length;_t++)$[_t]=l(it,ot[_t]);return $}return g(it,_(it.length,ot),0,it.length-1),l(it,ot)}function g(k,ot,it,$){ot%1==0?f(k,ot,it,$):(f(k,ot=Math.floor(ot),it,$),f(k,ot+1,ot+1,$))}function m(k,ot){return k-ot}function _(k,ot){var it=k*ot;return ot===1?k-1:ot===0?0:it%1!=0?Math.ceil(it)-1:k%2==0?it-.5:it}function M(k,ot){if(ot<k[0])return 0;if(ot>k[k.length-1])return 1;var it=function(yt,Nt){for(var $t=0,ee=0,Gt=yt.length;ee<Gt;)Nt<=yt[$t=ee+Gt>>>1]?Gt=$t:ee=-~$t;return ee}(k,ot);if(k[it]!==ot)return it/k.length;it++;var $=function(yt,Nt){for(var $t=0,ee=0,Gt=yt.length;ee<Gt;)Nt>=yt[$t=ee+Gt>>>1]?ee=-~$t:Gt=$t;return ee}(k,ot);if($===it)return it/k.length;var _t=$-it+1;return _t*($+it)/2/_t/k.length}function x(k){var ot=b(k,.75),it=b(k,.25);if(typeof ot=="number"&&typeof it=="number")return ot-it}function y(k){return+b(k,.5)}function S(k){for(var ot=y(k),it=[],$=0;$<k.length;$++)it.push(Math.abs(k[$]-ot));return y(it)}function P(k,ot){ot=ot||Math.random;for(var it,$,_t=k.length;0<_t;)$=Math.floor(ot()*_t--),it=k[_t],k[_t]=k[$],k[$]=it;return k}function A(k,ot){return P(k.slice().slice(),ot)}function O(k){for(var ot,it=0,$=0;$<k.length;$++)$!==0&&k[$]===ot||(ot=k[$],it++);return it}function L(k,ot){for(var it=[],$=0;$<k;$++){for(var _t=[],yt=0;yt<ot;yt++)_t.push(0);it.push(_t)}return it}function H(k,ot,it,$){var _t;if(0<k){var yt=(it[ot]-it[k-1])/(ot-k+1);_t=$[ot]-$[k-1]-(ot-k+1)*yt*yt}else _t=$[ot]-it[ot]*it[ot]/(ot+1);return _t<0?0:_t}function F(k,ot,it,$,_t,yt,Nt){if(!(ot<k)){var $t=Math.floor((k+ot)/2);$[it][$t]=$[it-1][$t-1],_t[it][$t]=$t;var ee=it;it<k&&(ee=Math.max(ee,_t[it][k-1]||0)),ee=Math.max(ee,_t[it-1][$t]||0);var Gt,Ht,ae,le=$t-1;ot<$.length-1&&(le=Math.min(le,_t[it][ot+1]||0));for(var Be=le;ee<=Be&&!((Gt=H(Be,$t,yt,Nt))+$[it-1][ee-1]>=$[it][$t]);--Be)(Ht=H(ee,$t,yt,Nt)+$[it-1][ee-1])<$[it][$t]&&($[it][$t]=Ht,_t[it][$t]=ee),ee++,(ae=Gt+$[it-1][Be-1])<$[it][$t]&&($[it][$t]=ae,_t[it][$t]=Be);F(k,$t-1,it,$,_t,yt,Nt),F($t+1,ot,it,$,_t,yt,Nt)}}function K(k,ot){if(k.length!==ot.length)throw new Error("sampleCovariance requires samples with equal lengths");if(k.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var it=s(k),$=s(ot),_t=0,yt=0;yt<k.length;yt++)_t+=(k[yt]-it)*(ot[yt]-$);return _t/(k.length-1)}function G(k){if(k.length<2)throw new Error("sampleVariance requires at least two data points");return c(k,2)/(k.length-1)}function U(k){var ot=G(k);return Math.sqrt(ot)}function Z(k,ot,it,$){return(k*ot+it*$)/(ot+$)}function J(k){if(k.length===0)throw new Error("rootMeanSquare requires at least one data point");for(var ot=0,it=0;it<k.length;it++)ot+=Math.pow(k[it],2);return Math.sqrt(ot/k.length)}function rt(){this.totalCount=0,this.data={}}function vt(){this.weights=[],this.bias=0}rt.prototype.train=function(k,ot){for(var it in this.data[ot]||(this.data[ot]={}),k){var $=k[it];this.data[ot][it]===void 0&&(this.data[ot][it]={}),this.data[ot][it][$]===void 0&&(this.data[ot][it][$]=0),this.data[ot][it][$]++}this.totalCount++},rt.prototype.score=function(k){var ot,it={};for(var $ in k){var _t=k[$];for(ot in this.data)it[ot]={},this.data[ot][$]?it[ot][$+"_"+_t]=(this.data[ot][$][_t]||0)/this.totalCount:it[ot][$+"_"+_t]=0}var yt={};for(ot in it)for(var Nt in yt[ot]=0,it[ot])yt[ot]+=it[ot][Nt];return yt},vt.prototype.predict=function(k){if(k.length!==this.weights.length)return null;for(var ot=0,it=0;it<this.weights.length;it++)ot+=this.weights[it]*k[it];return 0<(ot+=this.bias)?1:0},vt.prototype.train=function(k,ot){if(ot!==0&&ot!==1)return null;k.length!==this.weights.length&&(this.weights=k,this.bias=1);var it=this.predict(k);if(it!==ot){for(var $=ot-it,_t=0;_t<this.weights.length;_t++)this.weights[_t]+=$*k[_t];this.bias+=$}return this};var mt=1e-4;function ut(k){if(k<0)throw new Error("factorial requires a non-negative value");if(Math.floor(k)!==k)throw new Error("factorial requires an integer input");for(var ot=1,it=2;it<=k;it++)ot*=it;return ot}var Rt=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Ft=Math.log(Math.sqrt(2*Math.PI)),wt={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},Mt=Math.sqrt(2*Math.PI),St={gaussian:function(ot){return Math.exp(-.5*ot*ot)/Mt}},At={nrd:function(ot){var it=U(ot),$=x(ot);return typeof $=="number"&&(it=Math.min(it,$/1.34)),1.06*it*Math.pow(ot.length,-.2)}};function nt(k,ot,it){var $,_t;if(ot===void 0)$=St.gaussian;else if(typeof ot=="string"){if(!St[ot])throw new Error('Unknown kernel "'+ot+'"');$=St[ot]}else $=ot;if(it===void 0)_t=At.nrd(k);else if(typeof it=="string"){if(!At[it])throw new Error('Unknown bandwidth method "'+it+'"');_t=At[it](k)}else _t=it;return function(yt){var Nt=0,$t=0;for(Nt=0;Nt<k.length;Nt++)$t+=$((yt-k[Nt])/_t);return $t/_t/k.length}}var Pt=Math.sqrt(2*Math.PI);function z(k){for(var ot=k,it=k,$=1;$<15;$++)ot+=it*=k*k/(2*$+1);return Math.round(1e4*(.5+ot/Pt*Math.exp(-k*k/2)))/1e4}for(var q=[],gt=0;gt<=3.09;gt+=.01)q.push(z(gt));function et(k){var ot=1/(1+.5*Math.abs(k)),it=ot*Math.exp(-Math.pow(k,2)-1.26551223+1.00002368*ot+.37409196*Math.pow(ot,2)+.09678418*Math.pow(ot,3)-.18628806*Math.pow(ot,4)+.27886807*Math.pow(ot,5)-1.13520398*Math.pow(ot,6)+1.48851587*Math.pow(ot,7)-.82215223*Math.pow(ot,8)+.17087277*Math.pow(ot,9));return 0<=k?1-it:it-1}function at(k){var ot=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),it=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*ot)+Math.log(1-k*k)/2,2)-Math.log(1-k*k)/ot)-(2/(Math.PI*ot)+Math.log(1-k*k)/2));return 0<=k?it:-it}function xt(k){if(typeof k=="number")return k<0?-1:k===0?0:1;throw new TypeError("not a number")}t.linearRegression=function(k){var ot,it,$=k.length;if($===1)it=k[ot=0][1];else{for(var _t,yt,Nt,$t=0,ee=0,Gt=0,Ht=0,ae=0;ae<$;ae++)$t+=yt=(_t=k[ae])[0],ee+=Nt=_t[1],Gt+=yt*yt,Ht+=yt*Nt;it=ee/$-(ot=($*Ht-$t*ee)/($*Gt-$t*$t))*$t/$}return{m:ot,b:it}},t.linearRegressionLine=function(k){return function(ot){return k.b+k.m*ot}},t.standardDeviation=h,t.rSquared=function(k,ot){if(k.length<2)return 1;for(var it,$=0,_t=0;_t<k.length;_t++)$+=k[_t][1];it=$/k.length;for(var yt=0,Nt=0;Nt<k.length;Nt++)yt+=Math.pow(it-k[Nt][1],2);for(var $t=0,ee=0;ee<k.length;ee++)$t+=Math.pow(k[ee][1]-ot(k[ee][0]),2);return 1-$t/yt},t.mode=function(k){return n(i(k))},t.modeFast=function(k){for(var ot,it=new Map,$=0,_t=0;_t<k.length;_t++){var yt=it.get(k[_t]);yt===void 0?yt=1:yt++,$<yt&&(ot=k[_t],$=yt),it.set(k[_t],yt)}if($===0)throw new Error("mode requires at last one data point");return ot},t.modeSorted=n,t.min=a,t.max=o,t.extent=function(k){if(k.length===0)throw new Error("extent requires at least one data point");for(var ot=k[0],it=k[0],$=1;$<k.length;$++)k[$]>it&&(it=k[$]),k[$]<ot&&(ot=k[$]);return[ot,it]},t.minSorted=function(k){return k[0]},t.maxSorted=function(k){return k[k.length-1]},t.extentSorted=function(k){return[k[0],k[k.length-1]]},t.sum=u,t.sumSimple=function(k){for(var ot=0,it=0;it<k.length;it++)ot+=k[it];return ot},t.product=function(k){for(var ot=1,it=0;it<k.length;it++)ot*=k[it];return ot},t.quantile=b,t.quantileSorted=l,t.quantileRank=function(k,ot){return M(i(k),ot)},t.quantileRankSorted=M,t.interquartileRange=x,t.iqr=x,t.medianAbsoluteDeviation=S,t.mad=S,t.chunk=function(k,ot){var it=[];if(ot<1)throw new Error("chunk size must be a positive number");if(Math.floor(ot)!==ot)throw new Error("chunk size must be an integer");for(var $=0;$<k.length;$+=ot)it.push(k.slice($,$+ot));return it},t.sampleWithReplacement=function(k,ot,it){if(k.length===0)return[];it=it||Math.random;for(var $=k.length,_t=[],yt=0;yt<ot;yt++){var Nt=Math.floor(it()*$);_t.push(k[Nt])}return _t},t.shuffle=A,t.shuffleInPlace=P,t.sample=function(k,ot,it){return A(k,it).slice(0,ot)},t.ckmeans=function(k,ot){if(ot>k.length)throw new Error("cannot generate more classes than there are data values");var it=i(k);if(O(it)===1)return[it];var $=L(ot,it.length),_t=L(ot,it.length);(function(Gt,Ht,ae){for(var le,Be=Ht[0].length,Ce=Gt[Math.floor(Be/2)],We=[],Ye=[],wn=0;wn<Be;++wn)le=Gt[wn]-Ce,wn===0?(We.push(le),Ye.push(le*le)):(We.push(We[wn-1]+le),Ye.push(Ye[wn-1]+le*le)),Ht[0][wn]=H(0,wn,We,Ye),ae[0][wn]=0;for(var er=1;er<Ht.length;++er)F(er<Ht.length-1?er:Be-1,Be-1,er,Ht,ae,We,Ye)})(it,$,_t);for(var yt=[],Nt=_t[0].length-1,$t=_t.length-1;0<=$t;$t--){var ee=_t[$t][Nt];yt[$t]=it.slice(ee,Nt+1),0<$t&&(Nt=ee-1)}return yt},t.uniqueCountSorted=O,t.sumNthPowerDeviations=c,t.equalIntervalBreaks=function(k,ot){if(k.length<2)return k;for(var it=a(k),$=o(k),_t=[it],yt=($-it)/ot,Nt=1;Nt<ot;Nt++)_t.push(_t[0]+yt*Nt);return _t.push($),_t},t.sampleCovariance=K,t.sampleCorrelation=function(k,ot){return K(k,ot)/U(k)/U(ot)},t.sampleVariance=G,t.sampleStandardDeviation=U,t.sampleSkewness=function(k){if(k.length<3)throw new Error("sampleSkewness requires at least three data points");for(var ot,it=s(k),$=0,_t=0,yt=0;yt<k.length;yt++)$+=(ot=k[yt]-it)*ot,_t+=ot*ot*ot;var Nt=k.length-1,$t=Math.sqrt($/Nt),ee=k.length;return ee*_t/((ee-1)*(ee-2)*Math.pow($t,3))},t.sampleKurtosis=function(k){var ot=k.length;if(ot<4)throw new Error("sampleKurtosis requires at least four data points");for(var it,$=s(k),_t=0,yt=0,Nt=0;Nt<ot;Nt++)_t+=(it=k[Nt]-$)*it,yt+=it*it*it*it;return(ot-1)/((ot-2)*(ot-3))*(ot*(ot+1)*yt/(_t*_t)-3*(ot-1))},t.permutationsHeap=function(k){for(var ot=new Array(k.length),it=[k.slice()],$=0;$<k.length;$++)ot[$]=0;for($=0;$<k.length;)if(ot[$]<$){var _t=0;$%2!=0&&(_t=ot[$]);var yt=k[_t];k[_t]=k[$],k[$]=yt,it.push(k.slice()),ot[$]++,$=0}else ot[$]=0,$++;return it},t.combinations=function k(ot,it){var $,_t,yt,Nt,$t=[];for($=0;$<ot.length;$++)if(it===1)$t.push([ot[$]]);else for(yt=k(ot.slice($+1,ot.length),it-1),_t=0;_t<yt.length;_t++)(Nt=yt[_t]).unshift(ot[$]),$t.push(Nt);return $t},t.combinationsReplacement=function k(ot,it){for(var $=[],_t=0;_t<ot.length;_t++)if(it===1)$.push([ot[_t]]);else for(var yt=k(ot.slice(_t,ot.length),it-1),Nt=0;Nt<yt.length;Nt++)$.push([ot[_t]].concat(yt[Nt]));return $},t.addToMean=function(k,ot,it){return k+(it-k)/(ot+1)},t.combineMeans=Z,t.combineVariances=function(k,ot,it,$,_t,yt){var Nt=Z(ot,it,_t,yt);return(it*(k+Math.pow(ot-Nt,2))+yt*($+Math.pow(_t-Nt,2)))/(it+yt)},t.geometricMean=function(k){if(k.length===0)throw new Error("geometricMean requires at least one data point");for(var ot=1,it=0;it<k.length;it++){if(k[it]<=0)throw new Error("geometricMean requires only positive numbers as input");ot*=k[it]}return Math.pow(ot,1/k.length)},t.harmonicMean=function(k){if(k.length===0)throw new Error("harmonicMean requires at least one data point");for(var ot=0,it=0;it<k.length;it++){if(k[it]<=0)throw new Error("harmonicMean requires only positive numbers as input");ot+=1/k[it]}return k.length/ot},t.average=s,t.mean=s,t.median=y,t.medianSorted=function(k){return l(k,.5)},t.subtractFromMean=function(k,ot,it){return(k*ot-it)/(ot-1)},t.rootMeanSquare=J,t.rms=J,t.variance=r,t.tTest=function(k,ot){return(s(k)-ot)/(h(k)/Math.sqrt(k.length))},t.tTestTwoSample=function(k,ot,it){var $=k.length,_t=ot.length;if(!$||!_t)return null;it||(it=0);var yt=s(k),Nt=s(ot),$t=G(k),ee=G(ot);if(typeof yt=="number"&&typeof Nt=="number"&&typeof $t=="number"&&typeof ee=="number"){var Gt=(($-1)*$t+(_t-1)*ee)/($+_t-2);return(yt-Nt-it)/Math.sqrt(Gt*(1/$+1/_t))}},t.BayesianClassifier=rt,t.bayesian=rt,t.PerceptronModel=vt,t.perceptron=vt,t.epsilon=mt,t.factorial=ut,t.gamma=function k(ot){if(typeof(it=ot)=="number"&&isFinite(it)&&Math.floor(it)===it)return ot<=0?NaN:ut(ot-1);var it;if(--ot<0)return Math.PI/(Math.sin(Math.PI*-ot)*k(-ot));var $=ot+.25;return Math.pow(ot/Math.E,ot)*Math.sqrt(2*Math.PI*(ot+1/6))*(1+1/144/Math.pow($,2)-1/12960/Math.pow($,3)-257/207360/Math.pow($,4)-52/2612736/Math.pow($,5)+5741173/9405849600/Math.pow($,6)+37529/18811699200/Math.pow($,7))},t.gammaln=function(k){if(k<=0)return 1/0;k--;for(var ot=Rt[0],it=1;it<15;it++)ot+=Rt[it]/(k+it);var $=5.2421875+k;return Ft+Math.log(ot)-$+(k+.5)*Math.log($)},t.bernoulliDistribution=function(k){if(k<0||1<k)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-k,k]},t.binomialDistribution=function(k,ot){if(!(ot<0||1<ot||k<=0||k%1!=0)){for(var it=0,$=0,_t=[],yt=1;_t[it]=yt*Math.pow(ot,it)*Math.pow(1-ot,k-it),$+=_t[it],yt=yt*(k-++it+1)/it,$<1-mt;);return _t}},t.poissonDistribution=function(k){if(!(k<=0)){for(var ot=0,it=0,$=[],_t=1;$[ot]=Math.exp(-k)*Math.pow(k,ot)/_t,it+=$[ot],_t*=++ot,it<1-mt;);return $}},t.chiSquaredDistributionTable=wt,t.chiSquaredGoodnessOfFit=function(k,ot,it){for(var $,_t,yt=0,Nt=ot(s(k)),$t=[],ee=[],Gt=0;Gt<k.length;Gt++)$t[k[Gt]]===void 0&&($t[k[Gt]]=0),$t[k[Gt]]++;for(Gt=0;Gt<$t.length;Gt++)$t[Gt]===void 0&&($t[Gt]=0);for(_t in Nt)_t in $t&&(ee[+_t]=Nt[_t]*k.length);for(_t=ee.length-1;0<=_t;_t--)ee[_t]<3&&(ee[_t-1]+=ee[_t],ee.pop(),$t[_t-1]+=$t[_t],$t.pop());for(_t=0;_t<$t.length;_t++)yt+=Math.pow($t[_t]-ee[_t],2)/ee[_t];return $=$t.length-1-1,wt[$][it]<yt},t.kernelDensityEstimation=nt,t.kde=nt,t.zScore=function(k,ot,it){return(k-ot)/it},t.cumulativeStdNormalProbability=function(k){var ot=Math.abs(k),it=Math.min(Math.round(100*ot),q.length-1);return 0<=k?q[it]:+(1-q[it]).toFixed(4)},t.standardNormalTable=q,t.errorFunction=et,t.erf=et,t.inverseErrorFunction=at,t.probit=function(k){return k===0?k=mt:1<=k&&(k=1-mt),Math.sqrt(2)*at(2*k-1)},t.permutationTest=function(k,ot,it,$){if($===void 0&&($=1e4),it===void 0&&(it="two_side"),it!=="two_side"&&it!=="greater"&&it!=="less")throw new Error("`alternative` must be either 'two_side', 'greater', or 'less'");for(var _t=s(k)-s(ot),yt=new Array($),Nt=k.concat(ot),$t=Math.floor(Nt.length/2),ee=0;ee<$;ee++){P(Nt);var Gt=Nt.slice(0,$t),Ht=Nt.slice($t,Nt.length),ae=s(Gt)-s(Ht);yt[ee]=ae}var le=0;if(it==="two_side")for(ee=0;ee<=$;ee++)Math.abs(yt[ee])>=Math.abs(_t)&&(le+=1);else if(it==="greater")for(ee=0;ee<=$;ee++)yt[ee]>=_t&&(le+=1);else for(ee=0;ee<=$;ee++)yt[ee]<=_t&&(le+=1);return le/$},t.bisect=function(k,ot,it,$,_t){if(typeof k!="function")throw new TypeError("func must be a function");for(var yt=0;yt<$;yt++){var Nt=(ot+it)/2;if(k(Nt)===0||Math.abs((it-ot)/2)<_t)return Nt;xt(k(Nt))===xt(k(ot))?ot=Nt:it=Nt}throw new Error("maximum number of iterations exceeded")},t.quickselect=f,t.sign=xt,t.numericSort=i,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_topojson-client@3.1.0@topojson-client/dist/topojson-client.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(y){return y}function s(y){if(y==null)return u;var S,P,A=y.scale[0],O=y.scale[1],L=y.translate[0],H=y.translate[1];return function(F,K){K||(S=P=0);var G=2,U=F.length,Z=new Array(U);for(Z[0]=(S+=F[0])*A+L,Z[1]=(P+=F[1])*O+H;G<U;)Z[G]=F[G],++G;return Z}}function c(y){var S=s(y.transform),P,A=Infinity,O=A,L=-A,H=-A;function F(G){G=S(G),G[0]<A&&(A=G[0]),G[0]>L&&(L=G[0]),G[1]<O&&(O=G[1]),G[1]>H&&(H=G[1])}function K(G){switch(G.type){case"GeometryCollection":G.geometries.forEach(K);break;case"Point":F(G.coordinates);break;case"MultiPoint":G.coordinates.forEach(F);break}}y.arcs.forEach(function(G){for(var U=-1,Z=G.length,J;++U<Z;)J=S(G[U],U),J[0]<A&&(A=J[0]),J[0]>L&&(L=J[0]),J[1]<O&&(O=J[1]),J[1]>H&&(H=J[1])});for(P in y.objects)K(y.objects[P]);return[A,O,L,H]}function r(y,S){for(var P,A=y.length,O=A-S;O<--A;)P=y[O],y[O++]=y[A],y[A]=P}function h(y,S){return typeof S=="string"&&(S=y.objects[S]),S.type==="GeometryCollection"?{type:"FeatureCollection",features:S.geometries.map(function(P){return n(y,P)})}:n(y,S)}function n(y,S){var P=S.id,A=S.bbox,O=S.properties==null?{}:S.properties,L=i(y,S);return P==null&&A==null?{type:"Feature",properties:O,geometry:L}:A==null?{type:"Feature",id:P,properties:O,geometry:L}:{type:"Feature",id:P,bbox:A,properties:O,geometry:L}}function i(y,S){var P=s(y.transform),A=y.arcs;function O(U,Z){Z.length&&Z.pop();for(var J=A[U<0?~U:U],rt=0,vt=J.length;rt<vt;++rt)Z.push(P(J[rt],rt));U<0&&r(Z,vt)}function L(U){return P(U)}function H(U){for(var Z=[],J=0,rt=U.length;J<rt;++J)O(U[J],Z);return Z.length<2&&Z.push(Z[0]),Z}function F(U){for(var Z=H(U);Z.length<4;)Z.push(Z[0]);return Z}function K(U){return U.map(F)}function G(U){var Z=U.type,J;switch(Z){case"GeometryCollection":return{type:Z,geometries:U.geometries.map(G)};case"Point":J=L(U.coordinates);break;case"MultiPoint":J=U.coordinates.map(L);break;case"LineString":J=H(U.arcs);break;case"MultiLineString":J=U.arcs.map(H);break;case"Polygon":J=K(U.arcs);break;case"MultiPolygon":J=U.arcs.map(K);break;default:return null}return{type:Z,coordinates:J}}return G(S)}function a(y,S){var P={},A={},O={},L=[],H=-1;S.forEach(function(G,U){var Z=y.arcs[G<0?~G:G],J;Z.length<3&&!Z[1][0]&&!Z[1][1]&&(J=S[++H],S[H]=G,S[U]=J)}),S.forEach(function(G){var U=F(G),Z=U[0],J=U[1],rt,vt;if(rt=O[Z])if(delete O[rt.end],rt.push(G),rt.end=J,vt=A[J]){delete A[vt.start];var mt=vt===rt?rt:rt.concat(vt);A[mt.start=rt.start]=O[mt.end=vt.end]=mt}else A[rt.start]=O[rt.end]=rt;else if(rt=A[J])if(delete A[rt.start],rt.unshift(G),rt.start=Z,vt=O[Z]){delete O[vt.end];var ut=vt===rt?rt:vt.concat(rt);A[ut.start=vt.start]=O[ut.end=rt.end]=ut}else A[rt.start]=O[rt.end]=rt;else rt=[G],A[rt.start=Z]=O[rt.end=J]=rt});function F(G){var U=y.arcs[G<0?~G:G],Z=U[0],J;return y.transform?(J=[0,0],U.forEach(function(rt){J[0]+=rt[0],J[1]+=rt[1]})):J=U[U.length-1],G<0?[J,Z]:[Z,J]}function K(G,U){for(var Z in G){var J=G[Z];delete U[J.start],delete J.start,delete J.end,J.forEach(function(rt){P[rt<0?~rt:rt]=1}),L.push(J)}}return K(O,A),K(A,O),S.forEach(function(G){P[G<0?~G:G]||L.push([G])}),L}function o(y){return i(y,l.apply(this,arguments))}function l(y,S,P){var A,O,L;if(arguments.length>1)A=f(y,S,P);else for(O=0,A=new Array(L=y.arcs.length);O<L;++O)A[O]=O;return{type:"MultiLineString",arcs:a(y,A)}}function f(y,S,P){var A=[],O=[],L;function H(Z){var J=Z<0?~Z:Z;(O[J]||(O[J]=[])).push({i:Z,g:L})}function F(Z){Z.forEach(H)}function K(Z){Z.forEach(F)}function G(Z){Z.forEach(K)}function U(Z){switch(L=Z,Z.type){case"GeometryCollection":Z.geometries.forEach(U);break;case"LineString":F(Z.arcs);break;case"MultiLineString":case"Polygon":K(Z.arcs);break;case"MultiPolygon":G(Z.arcs);break}}return U(S),O.forEach(P==null?function(Z){A.push(Z[0].i)}:function(Z){P(Z[0].g,Z[Z.length-1].g)&&A.push(Z[0].i)}),A}function v(y){for(var S=-1,P=y.length,A,O=y[P-1],L=0;++S<P;)A=O,O=y[S],L+=A[0]*O[1]-A[1]*O[0];return Math.abs(L)}function b(y){return i(y,g.apply(this,arguments))}function g(y,S){var P={},A=[],O=[];S.forEach(L);function L(K){switch(K.type){case"GeometryCollection":K.geometries.forEach(L);break;case"Polygon":H(K.arcs);break;case"MultiPolygon":K.arcs.forEach(H);break}}function H(K){K.forEach(function(G){G.forEach(function(U){(P[U=U<0?~U:U]||(P[U]=[])).push(K)})}),A.push(K)}function F(K){return v(i(y,{type:"Polygon",arcs:[K]}).coordinates[0])}return A.forEach(function(K){if(!K._){var G=[],U=[K];for(K._=1,O.push(G);K=U.pop();)G.push(K),K.forEach(function(Z){Z.forEach(function(J){P[J<0?~J:J].forEach(function(rt){rt._||(rt._=1,U.push(rt))})})})}}),A.forEach(function(K){delete K._}),{type:"MultiPolygon",arcs:O.map(function(K){var G=[],U;if(K.forEach(function(mt){mt.forEach(function(ut){ut.forEach(function(Rt){P[Rt<0?~Rt:Rt].length<2&&G.push(Rt)})})}),G=a(y,G),(U=G.length)>1)for(var Z=1,J=F(G[0]),rt,vt;Z<U;++Z)(rt=F(G[Z]))>J&&(vt=G[0],G[0]=G[Z],G[Z]=vt,J=rt);return G}).filter(function(K){return K.length>0})}}function m(y,S){for(var P=0,A=y.length;P<A;){var O=P+A>>>1;y[O]<S?P=O+1:A=O}return P}function _(y){var S={},P=y.map(function(){return[]});function A(mt,ut){mt.forEach(function(Rt){Rt<0&&(Rt=~Rt);var Ft=S[Rt];Ft?Ft.push(ut):S[Rt]=[ut]})}function O(mt,ut){mt.forEach(function(Rt){A(Rt,ut)})}function L(mt,ut){mt.type==="GeometryCollection"?mt.geometries.forEach(function(Rt){L(Rt,ut)}):mt.type in H&&H[mt.type](mt.arcs,ut)}var H={LineString:A,MultiLineString:O,Polygon:O,MultiPolygon:function(ut,Rt){ut.forEach(function(Ft){O(Ft,Rt)})}};y.forEach(L);for(var F in S)for(var K=S[F],G=K.length,U=0;U<G;++U)for(var Z=U+1;Z<G;++Z){var J=K[U],rt=K[Z],vt;(vt=P[J])[F=m(vt,rt)]!==rt&&vt.splice(F,0,rt),(vt=P[rt])[F=m(vt,J)]!==J&&vt.splice(F,0,J)}return P}function M(y){if(y==null)return u;var S,P,A=y.scale[0],O=y.scale[1],L=y.translate[0],H=y.translate[1];return function(F,K){K||(S=P=0);var G=2,U=F.length,Z=new Array(U),J=Math.round((F[0]-L)/A),rt=Math.round((F[1]-H)/O);for(Z[0]=J-S,S=J,Z[1]=rt-P,P=rt;G<U;)Z[G]=F[G],++G;return Z}}function x(y,S){if(y.transform)throw new Error("already quantized");if(!S||!S.scale){if(!((H=Math.floor(S))>=2))throw new Error("n must be \u22652");K=y.bbox||c(y);var P=K[0],A=K[1],O=K[2],L=K[3],H;S={scale:[O-P?(O-P)/(H-1):1,L-A?(L-A)/(H-1):1],translate:[P,A]}}else K=y.bbox;var F=M(S),K,G,U=y.objects,Z={};function J(mt){return F(mt)}function rt(mt){var ut;switch(mt.type){case"GeometryCollection":ut={type:"GeometryCollection",geometries:mt.geometries.map(rt)};break;case"Point":ut={type:"Point",coordinates:J(mt.coordinates)};break;case"MultiPoint":ut={type:"MultiPoint",coordinates:mt.coordinates.map(J)};break;default:return mt}return mt.id!=null&&(ut.id=mt.id),mt.bbox!=null&&(ut.bbox=mt.bbox),mt.properties!=null&&(ut.properties=mt.properties),ut}function vt(mt){var ut=0,Rt=1,Ft=mt.length,wt,Mt=new Array(Ft);for(Mt[0]=F(mt[0],0);++ut<Ft;)((wt=F(mt[ut],ut))[0]||wt[1])&&(Mt[Rt++]=wt);return Rt===1&&(Mt[Rt++]=[0,0]),Mt.length=Rt,Mt}for(G in U)Z[G]=rt(U[G]);return{type:"Topology",bbox:K,transform:S,objects:Z,arcs:y.arcs.map(vt)}}t.bbox=c,t.feature=h,t.merge=b,t.mergeArcs=g,t.mesh=o,t.meshArcs=l,t.neighbors=_,t.quantize=x,t.transform=s,t.untransform=M,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_tslib@2.1.0@tslib/tslib.js":function(E,T,e){(function(t){var u,s;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var c,r,h,n,i,a,o,l,f,v,b,g,m,_,M,x,y,S,P,A,O,L,H,F;(function(K){var G=typeof t=="object"?t:typeof self=="object"?self:typeof this=="object"?this:{};u=[T],s=function(Z){K(U(G,U(Z)))}.apply(T,u),s!==void 0&&(E.exports=s);function U(Z,J){return Z!==G&&(typeof Object.create=="function"?Object.defineProperty(Z,"__esModule",{value:!0}):Z.__esModule=!0),function(rt,vt){return Z[rt]=J?J(rt,vt):vt}}})(function(K){var G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,J){Z.__proto__=J}||function(Z,J){for(var rt in J)Object.prototype.hasOwnProperty.call(J,rt)&&(Z[rt]=J[rt])};c=function(J,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");G(J,rt);function vt(){this.constructor=J}J.prototype=rt===null?Object.create(rt):(vt.prototype=rt.prototype,new vt)},r=Object.assign||function(Z){for(var J,rt=1,vt=arguments.length;rt<vt;rt++){J=arguments[rt];for(var mt in J)Object.prototype.hasOwnProperty.call(J,mt)&&(Z[mt]=J[mt])}return Z},h=function(J,rt){var vt={};for(var mt in J)Object.prototype.hasOwnProperty.call(J,mt)&&rt.indexOf(mt)<0&&(vt[mt]=J[mt]);if(J!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ut=0,mt=Object.getOwnPropertySymbols(J);ut<mt.length;ut++)rt.indexOf(mt[ut])<0&&Object.prototype.propertyIsEnumerable.call(J,mt[ut])&&(vt[mt[ut]]=J[mt[ut]]);return vt},n=function(J,rt,vt,mt){var ut=arguments.length,Rt=ut<3?rt:mt===null?mt=Object.getOwnPropertyDescriptor(rt,vt):mt,Ft;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Rt=Reflect.decorate(J,rt,vt,mt);else for(var wt=J.length-1;wt>=0;wt--)(Ft=J[wt])&&(Rt=(ut<3?Ft(Rt):ut>3?Ft(rt,vt,Rt):Ft(rt,vt))||Rt);return ut>3&&Rt&&Object.defineProperty(rt,vt,Rt),Rt},i=function(J,rt){return function(vt,mt){rt(vt,mt,J)}},a=function(J,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(J,rt)},o=function(J,rt,vt,mt){function ut(Rt){return Rt instanceof vt?Rt:new vt(function(Ft){Ft(Rt)})}return new(vt||(vt=Promise))(function(Rt,Ft){function wt(At){try{St(mt.next(At))}catch(nt){Ft(nt)}}function Mt(At){try{St(mt.throw(At))}catch(nt){Ft(nt)}}function St(At){At.done?Rt(At.value):ut(At.value).then(wt,Mt)}St((mt=mt.apply(J,rt||[])).next())})},l=function(J,rt){var vt={label:0,sent:function(){if(Rt[0]&1)throw Rt[1];return Rt[1]},trys:[],ops:[]},mt,ut,Rt,Ft;return Ft={next:wt(0),throw:wt(1),return:wt(2)},typeof Symbol=="function"&&(Ft[Symbol.iterator]=function(){return this}),Ft;function wt(St){return function(At){return Mt([St,At])}}function Mt(St){if(mt)throw new TypeError("Generator is already executing.");for(;vt;)try{if(mt=1,ut&&(Rt=St[0]&2?ut.return:St[0]?ut.throw||((Rt=ut.return)&&Rt.call(ut),0):ut.next)&&!(Rt=Rt.call(ut,St[1])).done)return Rt;switch(ut=0,Rt&&(St=[St[0]&2,Rt.value]),St[0]){case 0:case 1:Rt=St;break;case 4:return vt.label++,{value:St[1],done:!1};case 5:vt.label++,ut=St[1],St=[0];continue;case 7:St=vt.ops.pop(),vt.trys.pop();continue;default:if(Rt=vt.trys,!(Rt=Rt.length>0&&Rt[Rt.length-1])&&(St[0]===6||St[0]===2)){vt=0;continue}if(St[0]===3&&(!Rt||St[1]>Rt[0]&&St[1]<Rt[3])){vt.label=St[1];break}if(St[0]===6&&vt.label<Rt[1]){vt.label=Rt[1],Rt=St;break}if(Rt&&vt.label<Rt[2]){vt.label=Rt[2],vt.ops.push(St);break}Rt[2]&&vt.ops.pop(),vt.trys.pop();continue}St=rt.call(J,vt)}catch(At){St=[6,At],ut=0}finally{mt=Rt=0}if(St[0]&5)throw St[1];return{value:St[0]?St[1]:void 0,done:!0}}},f=function(J,rt){for(var vt in J)vt!=="default"&&!Object.prototype.hasOwnProperty.call(rt,vt)&&F(rt,J,vt)},F=Object.create?function(Z,J,rt,vt){vt===void 0&&(vt=rt),Object.defineProperty(Z,vt,{enumerable:!0,get:function(){return J[rt]}})}:function(Z,J,rt,vt){vt===void 0&&(vt=rt),Z[vt]=J[rt]},v=function(J){var rt=typeof Symbol=="function"&&Symbol.iterator,vt=rt&&J[rt],mt=0;if(vt)return vt.call(J);if(J&&typeof J.length=="number")return{next:function(){return J&&mt>=J.length&&(J=void 0),{value:J&&J[mt++],done:!J}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")},b=function(J,rt){var vt=typeof Symbol=="function"&&J[Symbol.iterator];if(!vt)return J;var mt=vt.call(J),ut,Rt=[],Ft;try{for(;(rt===void 0||rt-- >0)&&!(ut=mt.next()).done;)Rt.push(ut.value)}catch(wt){Ft={error:wt}}finally{try{ut&&!ut.done&&(vt=mt.return)&&vt.call(mt)}finally{if(Ft)throw Ft.error}}return Rt},g=function(){for(var J=[],rt=0;rt<arguments.length;rt++)J=J.concat(b(arguments[rt]));return J},m=function(){for(var J=0,rt=0,vt=arguments.length;rt<vt;rt++)J+=arguments[rt].length;for(var mt=Array(J),ut=0,rt=0;rt<vt;rt++)for(var Rt=arguments[rt],Ft=0,wt=Rt.length;Ft<wt;Ft++,ut++)mt[ut]=Rt[Ft];return mt},_=function(J,rt){for(var vt=0,mt=rt.length,ut=J.length;vt<mt;vt++,ut++)J[ut]=rt[vt];return J},M=function(J){return this instanceof M?(this.v=J,this):new M(J)},x=function(J,rt,vt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var mt=vt.apply(J,rt||[]),ut,Rt=[];return ut={},Ft("next"),Ft("throw"),Ft("return"),ut[Symbol.asyncIterator]=function(){return this},ut;function Ft(Pt){mt[Pt]&&(ut[Pt]=function(z){return new Promise(function(q,gt){Rt.push([Pt,z,q,gt])>1||wt(Pt,z)})})}function wt(Pt,z){try{Mt(mt[Pt](z))}catch(q){nt(Rt[0][3],q)}}function Mt(Pt){Pt.value instanceof M?Promise.resolve(Pt.value.v).then(St,At):nt(Rt[0][2],Pt)}function St(Pt){wt("next",Pt)}function At(Pt){wt("throw",Pt)}function nt(Pt,z){Pt(z),Rt.shift(),Rt.length&&wt(Rt[0][0],Rt[0][1])}},y=function(J){var rt,vt;return rt={},mt("next"),mt("throw",function(ut){throw ut}),mt("return"),rt[Symbol.iterator]=function(){return this},rt;function mt(ut,Rt){rt[ut]=J[ut]?function(Ft){return(vt=!vt)?{value:M(J[ut](Ft)),done:ut==="return"}:Rt?Rt(Ft):Ft}:Rt}},S=function(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=J[Symbol.asyncIterator],vt;return rt?rt.call(J):(J=typeof v=="function"?v(J):J[Symbol.iterator](),vt={},mt("next"),mt("throw"),mt("return"),vt[Symbol.asyncIterator]=function(){return this},vt);function mt(Rt){vt[Rt]=J[Rt]&&function(Ft){return new Promise(function(wt,Mt){Ft=J[Rt](Ft),ut(wt,Mt,Ft.done,Ft.value)})}}function ut(Rt,Ft,wt,Mt){Promise.resolve(Mt).then(function(St){Rt({value:St,done:wt})},Ft)}},P=function(J,rt){return Object.defineProperty?Object.defineProperty(J,"raw",{value:rt}):J.raw=rt,J};var U=Object.create?function(Z,J){Object.defineProperty(Z,"default",{enumerable:!0,value:J})}:function(Z,J){Z.default=J};A=function(J){if(J&&J.__esModule)return J;var rt={};if(J!=null)for(var vt in J)vt!=="default"&&Object.prototype.hasOwnProperty.call(J,vt)&&F(rt,J,vt);return U(rt,J),rt},O=function(J){return J&&J.__esModule?J:{default:J}},L=function(J,rt){if(!rt.has(J))throw new TypeError("attempted to get private field on non-instance");return rt.get(J)},H=function(J,rt,vt){if(!rt.has(J))throw new TypeError("attempted to set private field on non-instance");return rt.set(J,vt),vt},K("__extends",c),K("__assign",r),K("__rest",h),K("__decorate",n),K("__param",i),K("__metadata",a),K("__awaiter",o),K("__generator",l),K("__exportStar",f),K("__createBinding",F),K("__values",v),K("__read",b),K("__spread",g),K("__spreadArrays",m),K("__spreadArray",_),K("__await",M),K("__asyncGenerator",x),K("__asyncDelegator",y),K("__asyncValues",S),K("__makeTemplateObject",P),K("__importStar",A),K("__importDefault",O),K("__classPrivateFieldGet",L),K("__classPrivateFieldSet",H)})}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/global.js"))},"./node_modules/_webpack@4.46.0@webpack/buildin/global.js":function(E,T){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){typeof window=="object"&&(e=window)}E.exports=e},"./node_modules/_webpack@4.46.0@webpack/buildin/module.js":function(E,T){E.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js":function(E,T,e){var t;/*!
* EventEmitter v5.2.9 - git.io/ee
* Unlicense - http://unlicense.org/
* Oliver Caldwell - https://oli.me.uk/
* @preserve
*/(function(u){"use strict";function s(){}var c=s.prototype,r=u.EventEmitter;function h(a,o){for(var l=a.length;l--;)if(a[l].listener===o)return l;return-1}function n(a){return function(){return this[a].apply(this,arguments)}}c.getListeners=function(o){var l=this._getEvents(),f,v;if(o instanceof RegExp){f={};for(v in l)l.hasOwnProperty(v)&&o.test(v)&&(f[v]=l[v])}else f=l[o]||(l[o]=[]);return f},c.flattenListeners=function(o){var l=[],f;for(f=0;f<o.length;f+=1)l.push(o[f].listener);return l},c.getListenersAsObject=function(o){var l=this.getListeners(o),f;return l instanceof Array&&(f={},f[o]=l),f||l};function i(a){return typeof a=="function"||a instanceof RegExp?!0:a&&typeof a=="object"?i(a.listener):!1}c.addListener=function(o,l){if(!i(l))throw new TypeError("listener must be a function");var f=this.getListenersAsObject(o),v=typeof l=="object",b;for(b in f)f.hasOwnProperty(b)&&h(f[b],l)===-1&&f[b].push(v?l:{listener:l,once:!1});return this},c.on=n("addListener"),c.addOnceListener=function(o,l){return this.addListener(o,{listener:l,once:!0})},c.once=n("addOnceListener"),c.defineEvent=function(o){return this.getListeners(o),this},c.defineEvents=function(o){for(var l=0;l<o.length;l+=1)this.defineEvent(o[l]);return this},c.removeListener=function(o,l){var f=this.getListenersAsObject(o),v,b;for(b in f)f.hasOwnProperty(b)&&(v=h(f[b],l),v!==-1&&f[b].splice(v,1));return this},c.off=n("removeListener"),c.addListeners=function(o,l){return this.manipulateListeners(!1,o,l)},c.removeListeners=function(o,l){return this.manipulateListeners(!0,o,l)},c.manipulateListeners=function(o,l,f){var v,b,g=o?this.removeListener:this.addListener,m=o?this.removeListeners:this.addListeners;if(typeof l=="object"&&!(l instanceof RegExp))for(v in l)l.hasOwnProperty(v)&&(b=l[v])&&(typeof b=="function"?g.call(this,v,b):m.call(this,v,b));else for(v=f.length;v--;)g.call(this,l,f[v]);return this},c.removeEvent=function(o){var l=typeof o,f=this._getEvents(),v;if(l==="string")delete f[o];else if(o instanceof RegExp)for(v in f)f.hasOwnProperty(v)&&o.test(v)&&delete f[v];else delete this._events;return this},c.removeAllListeners=n("removeEvent"),c.emitEvent=function(o,l){var f=this.getListenersAsObject(o),v,b,g,m,_;for(m in f)if(f.hasOwnProperty(m))for(v=f[m].slice(0),g=0;g<v.length;g++)b=v[g],b.once===!0&&this.removeListener(o,b.listener),_=b.listener.apply(this,l||[]),_===this._getOnceReturnValue()&&this.removeListener(o,b.listener);return this},c.trigger=n("emitEvent"),c.emit=function(o){var l=Array.prototype.slice.call(arguments,1);return this.emitEvent(o,l)},c.setOnceReturnValue=function(o){return this._onceReturnValue=o,this},c._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},c._getEvents=function(){return this._events||(this._events={})},s.noConflict=function(){return u.EventEmitter=r,s},t=function(){return s}.call(u,e,u,E),t!==void 0&&(E.exports=t)})(typeof window!="undefined"?window:this||{})},"./src/api/geo.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),c=e("./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js"),r=e("./src/view.ts"),h=t.__importDefault(e("./src/util/get-geo-projection.ts")),n={geoArea:function(a){return s.geoArea(a)},geoAreaByName:function(a){return s.geoArea(this.geoFeatureByName(a))},geoCentroid:function(a){return s.geoCentroid(a)},geoCentroidByName:function(a){return s.geoCentroid(this.geoFeatureByName(a))},geoDistance:function(a,o){return s.geoDistance(a,o)},geoLength:function(a){return s.geoLength(a)},geoLengthByName:function(a){return s.geoLength(this.geoFeatureByName(a))},geoContains:function(a,o){return s.geoContains(a,o)},geoFeatureByName:function(a){var o=this.rows,l;return o.some(function(f){return f.name===a?(l=f,!0):!1}),l},geoFeatureByPosition:function(a){var o=this.rows,l;return o.some(function(f){return s.geoContains(f,a)?(l=f,!0):!1}),l},geoNameByPosition:function(a){var o=this.geoFeatureByPosition(a);if(o)return o.name},getGeoProjection:h.default,geoProject:function(a,o,l){return o=h.default(o,l),c.geoProject(a,o)},geoProjectByName:function(a,o,l){return o=h.default(o,l),c.geoProject(this.geoFeatureByName(a),o)},geoProjectPosition:function(a,o,l){var f=h.default(o,l);return f(a)},geoProjectInvert:function(a,o,l){var f=h.default(o,l);return f.invert(a)}};u.assign(r.View.prototype,n)},"./src/api/hierarchy.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/view.ts");t.assign(u.View.prototype,{getAllNodes:function(){var c=[],r=this.root;return r&&r.each?r.each(function(h){c.push(h)}):r&&r.eachNode&&r.eachNode(function(h){c.push(h)}),c},getAllLinks:function(){for(var c=[],r=[this.root],h;h=r.pop();){var n=h.children;n&&n.forEach(function(i){c.push({source:h,target:i}),r.push(i)})}return c}}),t.assign(u.View.prototype,{getAllEdges:u.View.prototype.getAllLinks})},"./src/api/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/view.ts");u.assign(c.View.prototype,{partition:function(h,n){return n===void 0&&(n=[]),s.default(this.rows,h,n)},group:function(h,n){n===void 0&&(n=[]);var i=this.partition(h,n);return u.values(i)},groups:function(h,n){return n===void 0&&(n=[]),this.group(h,n)}})},"./src/api/statistics.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/view.ts"),r=t.__importDefault(e("./src/util/p-by-fraction.ts")),h=t.__importDefault(e("./src/constants.ts")),n=h.default.STATISTICS_METHODS;function i(o,l){var f=o.getColumn(l);return s.isArray(f)&&s.isArray(f[0])&&(f=s.flattenDeep(f)),f}n.forEach(function(o){c.View.prototype[o]=function(l){return u[o](i(this,l))}});var a=u.quantile;s.assign(c.View.prototype,{average:c.View.prototype.mean,quantile:function(l,f){return a(i(this,l),f)},quantiles:function(l,f){var v=i(this,l);return f.map(function(b){return a(v,b)})},quantilesByFraction:function(l,f){return this.quantiles(l,r.default(f))},range:function(l){return[this.min(l),this.max(l)]},extent:function(l){return this.range(l)}})},"./src/connector/default.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts");u.DataSet.registerConnector("default",function(s,c){var r;if(t.isString(s)?r=c.getView(s):r=s,!r)throw new TypeError("Invalid dataView");return t.deepMix([],r.rows)})},"./src/connector/dsv.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./node_modules/_d3-dsv@1.2.0@d3-dsv/dist/d3-dsv.js"),s=e("./src/data-set.ts");s.DataSet.registerConnector("dsv",function(c,r){r===void 0&&(r={});var h=r.delimiter||",";if(!t.isString(h))throw new TypeError("Invalid delimiter: must be a string!");return u.dsvFormat(h).parse(c)}),s.DataSet.registerConnector("csv",function(c){return u.csvParse(c)}),s.DataSet.registerConnector("tsv",function(c){return u.tsvParse(c)})},"./src/connector/geo-graticule.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),u=e("./src/data-set.ts");function s(c,r){r.dataType="geo-graticule";var h=t.geoGraticule().lines();return h.map(function(n,i){return n.index=""+i,n}),r.rows=h,h}T.default=s,u.DataSet.registerConnector("geo-graticule",s)},"./src/connector/geojson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_point-at-length@1.1.0@point-at-length/index.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),r=e("./src/data-set.ts"),h=c.geoPath();function n(i,a,o){o.dataType=r.DataSet.CONSTANTS.GEO;var l=s.deepMix([],i.features);return l.forEach(function(f){f.name=f.properties.name,f.longitude=[],f.latitude=[];var v=f.pathData=h(f),b=u.default(v);b._path.forEach(function(m){f.longitude.push(m[1]),f.latitude.push(m[2])});var g=h.centroid(f);f.centroidX=g[0],f.centroidY=g[1]}),l}r.DataSet.registerConnector("geo",n),r.DataSet.registerConnector("geojson",n),r.DataSet.registerConnector("GeoJSON",n),T.default=n},"./src/connector/graph.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s={nodes:function(h){return h.nodes},edges:function(h){return h.edges}};function c(r,h,n){h=t.assign({},s,h),n.dataType=u.DataSet.CONSTANTS.GRAPH;var i=h.nodes,a=h.edges;if(i&&!t.isFunction(i))throw new TypeError("Invalid nodes: must be a function!");if(a&&!t.isFunction(a))throw new TypeError("Invalid edges: must be a function!");return n.rows=n.graph={nodes:i(r),edges:a(r)},t.assign(n,n.graph),n.rows}u.DataSet.registerConnector("graph",c),u.DataSet.registerConnector("diagram",c)},"./src/connector/hexjson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./node_modules/_d3-hexjson@1.1.1@d3-hexjson/build/d3-hexjson.js"),s=e("./src/data-set.ts"),c={width:1,height:1};function r(n){return n.cx=n.x,n.cy=n.y,n.x=[],n.y=[],n.vertices.forEach(function(i){n.x.push(i.x+n.cx),n.y.push(i.y+n.cy)}),n}function h(n,i,a){a.dataType=s.DataSet.CONSTANTS.HEX,i=t.assign({},c,i);var o=i.width,l=i.height,f=t.deepMix([],n);a._HexJSON=f;var v=a._GridHexJSON=u.getGridForHexJSON(f),b=a.rows=u.renderHexJSON(f,o,l).map(r);return a._gridRows=u.renderHexJSON(v,o,l).map(r),b}s.DataSet.registerConnector("hex",h),s.DataSet.registerConnector("hexjson",h),s.DataSet.registerConnector("hex-json",h),s.DataSet.registerConnector("HexJSON",h),T.default=h},"./src/connector/hierarchy.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js"),s=e("./src/data-set.ts");function c(r,h,n){n.dataType=s.DataSet.CONSTANTS.HIERARCHY;var i=h&&h.children?h.children:null;if(i&&!t.isFunction(i))throw new TypeError("Invalid children: must be a function!");return h.pureData?n.rows=n.root=r:n.rows=n.root=u.hierarchy(r,i),r}s.DataSet.registerConnector("hierarchy",c),s.DataSet.registerConnector("tree",c)},"./src/connector/topojson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_topojson-client@3.1.0@topojson-client/dist/topojson-client.js"),c=t.__importDefault(e("./src/connector/geojson.ts")),r=e("./src/data-set.ts");function h(n,i,a){var o=i.object;if(!u.isString(o))throw new TypeError("Invalid object: must be a string!");var l=s.feature(n,n.objects[o]);return c.default(l,void 0,a)}r.DataSet.registerConnector("topojson",h),r.DataSet.registerConnector("TopoJSON",h)},"./src/constants.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={HIERARCHY:"hierarchy",GEO:"geo",HEX:"hex",GRAPH:"graph",TABLE:"table",GEO_GRATICULE:"geo-graticule",STATISTICS_METHODS:["max","mean","median","min","mode","product","standardDeviation","sum","sumSimple","variance"]}},"./src/data-set.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.DataSet=void 0;var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js")),c=e("./src/view.ts"),r=t.__importDefault(e("./src/constants.ts")),h=function(n){t.__extends(i,n);function i(a){a===void 0&&(a={state:{}});var o=n.call(this)||this;return o.isDataSet=!0,o._onChangeTimer=null,o.views={},o.state={},o.state=a.state,o}return i.registerConnector=function(a,o){i.connectors[a]=o},i.getConnector=function(a){return i.connectors[a]||i.connectors.default},i.registerTransform=function(a,o){i.transforms[a]=o},i.getTransform=function(a){return i.transforms[a]||i.transforms.default},i.prototype._getUniqueViewName=function(){for(var a=u.uniqueId("view_");this.views[a];)a=u.uniqueId("view_");return a},i.prototype.createView=function(a,o){if(u.isNil(a)&&(a=this._getUniqueViewName()),u.isObject(a)&&(o=a,a=this._getUniqueViewName()),this.views[a])throw new Error("data view exists: "+a);var l=new c.View(this,o);return this.views[a]=l,l},i.prototype.getView=function(a){return this.views[a]},i.prototype.setView=function(a,o){this.views[a]=o},i.prototype.setState=function(a,o){var l=this;this.state[a]=o,this._onChangeTimer&&(window.clearTimeout(this._onChangeTimer),this._onChangeTimer=null),this._onChangeTimer=window.setTimeout(function(){l.emit("statechange",a,o)},16)},i.CONSTANTS=r.default,i.connectors={},i.transforms={},i.DataSet=i,i.DataView=c.View,i.View=c.View,i.version="____DATASET_VERSION____",i}(s.default);T.DataSet=h,u.assign(h,r.default),u.assign(h.prototype,{view:h.prototype.createView}),c.View.DataSet=h},"./src/index.ts":function(E,T,e){"use strict";e("./src/api/geo.ts"),e("./src/api/hierarchy.ts"),e("./src/api/partition.ts"),e("./src/api/statistics.ts"),e("./src/connector/default.ts"),e("./src/connector/dsv.ts"),e("./src/connector/geo-graticule.ts"),e("./src/connector/geojson.ts"),e("./src/connector/graph.ts"),e("./src/connector/hexjson.ts"),e("./src/connector/hierarchy.ts"),e("./src/connector/topojson.ts"),e("./src/transform/default.ts"),e("./src/transform/filter.ts"),e("./src/transform/fold.ts"),e("./src/transform/map.ts"),e("./src/transform/partition.ts"),e("./src/transform/percent.ts"),e("./src/transform/pick.ts"),e("./src/transform/proportion.ts"),e("./src/transform/rename.ts"),e("./src/transform/reverse.ts"),e("./src/transform/sort.ts"),e("./src/transform/sort-by.ts"),e("./src/transform/subset.ts"),e("./src/transform/fill-rows.ts"),e("./src/transform/impute.ts"),e("./src/transform/aggregate.ts"),e("./src/transform/regression.ts"),e("./src/transform/kde.ts"),e("./src/transform/bin/hexagon.ts"),e("./src/transform/bin/histogram.ts"),e("./src/transform/bin/quantile.ts"),e("./src/transform/bin/rectangle.ts"),e("./src/transform/geo/centroid.ts"),e("./src/transform/geo/projection.ts"),e("./src/transform/geo/region.ts"),e("./src/transform/diagram/arc.ts"),e("./src/transform/diagram/dagre.ts"),e("./src/transform/diagram/sankey.ts"),e("./src/transform/diagram/voronoi.ts"),e("./src/transform/hierarchy/cluster.ts"),e("./src/transform/hierarchy/compact-box.ts"),e("./src/transform/hierarchy/dendrogram.ts"),e("./src/transform/hierarchy/indented.ts"),e("./src/transform/hierarchy/pack.ts"),e("./src/transform/hierarchy/partition.ts"),e("./src/transform/hierarchy/tree.ts"),e("./src/transform/hierarchy/treemap.ts"),e("./src/transform/tag-cloud.ts"),e("./src/transform/waffle.ts"),e("./src/transform/kernel-smooth/density.ts"),e("./src/transform/kernel-smooth/regression.ts");var t=e("./src/data-set.ts");E.exports=t.DataSet},"./src/transform/aggregate.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=r.DataSet.registerTransform,n=e("./src/util/option-parser.ts"),i={as:[],fields:[],groupBy:[],operations:[]},a="count",o={count:function(v){return v.length},distinct:function(v,b){var g=u.uniq(v.map(function(m){return m[b]}));return g.length}};r.DataSet.CONSTANTS.STATISTICS_METHODS.forEach(function(f){o[f]=function(v,b){var g=v.map(function(m){return m[b]});return u.isArray(g)&&u.isArray(g[0])&&(g=u.flattenDeep(g)),s[f](g)}}),o.average=o.mean;function l(f,v){v=u.assign({},i,v);var b=n.getFields(v);if(!u.isArray(b))throw new TypeError("Invalid fields: it must be an array with one or more strings!");var g=v.as||[];u.isString(g)&&(g=[g]);var m=v.operations;u.isString(m)&&(m=[m]);var _=[a];if((!u.isArray(m)||!m.length)&&(console.warn('operations is not defined, will use [ "count" ] directly.'),m=_,g=m),!(m.length===1&&m[0]===a)){if(m.length!==b.length)throw new TypeError("Invalid operations: it's length must be the same as fields!");if(g.length!==b.length)throw new TypeError("Invalid as: it's length must be the same as fields!")}var M=c.default(f.rows,v.groupBy),x=[];u.forIn(M,function(y){var S=y[0];m.forEach(function(P,A){var O=g[A],L=b[A];S[O]=o[P](y,L)}),x.push(S)}),f.rows=x}h("aggregate",l),h("summary",l),T.default={VALID_AGGREGATES:u.keys(o)}},"./src/transform/bin/hexagon.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),c=e("./src/util/option-parser.ts"),r={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1},h=Math.sqrt(3),n=Math.PI/3,i=[0,n,2*n,3*n,4*n,5*n];function a(v,b,g,m){return Math.sqrt((v-g)*(v-g)+(b-m)*(b-m))}function o(v,b,g){var m=v-g;b=b/2;var _=Math.floor(m/b),M=b*(_+(Math.abs(_%2)===1?1:0)),x=b*(_+(Math.abs(_%2)===1?0:1));return[M+g,x+g]}function l(v,b,g){b===void 0&&(b=[1,1]),g===void 0&&(g=[0,0]);var m={},_=t.__read(b,2),M=_[0],x=_[1],y=t.__read(g,2),S=y[0],P=y[1];return v.forEach(function(A){var O,L,H=t.__read(A,2),F=H[0],K=H[1],G=t.__read(o(F,M,S),2),U=G[0],Z=G[1],J=t.__read(o(K,x,P),2),rt=J[0],vt=J[1],mt=a(F,K,U,rt),ut=a(F,K,Z,vt),Rt,Ft,wt;mt<ut?(Rt="x"+U+"y"+rt,O=t.__read([U,rt],2),Ft=O[0],wt=O[1]):(Rt="x"+Z+"y"+vt,L=t.__read([Z,vt],2),Ft=L[0],wt=L[1]),m[Rt]=m[Rt]||{x:Ft,y:wt,count:0},m[Rt].count++}),m}function f(v,b){b=u.assign({},r,b);var g=c.getFields(b);if(!u.isArray(g)||g.length!==2)throw new TypeError("Invalid fields: it must be an array with 2 strings!");var m=t.__read(g,2),_=m[0],M=m[1],x=v.range(_),y=v.range(M),S=x[1]-x[0],P=y[1]-y[0],A=b.binWidth||[];if(A.length!==2){var O=t.__read(b.bins,2),L=O[0],H=O[1];if(L<=0||H<=0)throw new TypeError("Invalid bins: must be an array with two positive numbers (e.g. [ 30, 30 ])!");A=[S/L,P/H]}var F=t.__read(b.offset,2),K=F[0],G=F[1],U=3*A[0]/(h*A[1]),Z=v.rows.map(function(St){return[St[_],U*St[M]]}),J=l(Z,[A[0],U*A[1]],[K,U*G]),rt=t.__read(b.as,3),vt=rt[0],mt=rt[1],ut=rt[2];if(!vt||!mt||!ut)throw new TypeError('Invalid as: it must be an array with three elements (e.g. [ "x", "y", "count" ])!');var Rt=A[0]/h,Ft=i.map(function(St){return[Math.sin(St)*Rt,-Math.cos(St)*Rt]}),wt=[],Mt=0;b.sizeByCount&&u.forIn(J,function(St){St.count>Mt&&(Mt=St.count)}),u.forIn(J,function(St){var At=St.x,nt=St.y,Pt=St.count,z={};z[ut]=Pt,b.sizeByCount?(z[vt]=Ft.map(function(q){return At+St.count/Mt*q[0]}),z[mt]=Ft.map(function(q){return(nt+St.count/Mt*q[1])/U})):(z[vt]=Ft.map(function(q){return At+q[0]}),z[mt]=Ft.map(function(q){return(nt+q[1])/U})),wt.push(z)}),v.rows=wt}s.DataSet.registerTransform("bin.hexagon",f),s.DataSet.registerTransform("bin.hex",f),s.DataSet.registerTransform("hexbin",f)},"./src/transform/bin/histogram.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={as:["x","count"],bins:void 0,offset:0,groupBy:[]};function n(o,l,f){var v=o-f,b=Math.floor(v/l);return[b*l+f,(b+1)*l+f]}function i(o){return Math.ceil(Math.log(o)/Math.LN2)+1}function a(o,l){l=u.assign({},h,l);var f=r.getField(l);if(o.rows.length!==0){var v=o.range(f),b=v[1]-v[0],g=l.binWidth,m=l.bins;if(!g&&m){if(m<=0)throw new TypeError("Invalid bins: it must be a positive number!");g=b/m}if(!g&&!m){var _=i(o.rows.length);g=b/_}var M=l.offset%g,x=[],y=l.groupBy,S=s.default(o.rows,y);u.forIn(S,function(P){var A={},O=P.map(function(G){return G[f]});O.forEach(function(G){var U=t.__read(n(G,g,M),2),Z=U[0],J=U[1],rt=Z+"-"+J;A[rt]=A[rt]||{x0:Z,x1:J,count:0},A[rt].count++});var L=t.__read(l.as,2),H=L[0],F=L[1];if(!H||!F)throw new TypeError('Invalid as: it must be an array with 2 elements (e.g. [ "x", "count" ])!');var K=u.pick(P[0],y);u.forIn(A,function(G){var U=u.assign({},K);U[H]=[G.x0,G.x1],U[F]=G.count,x.push(U)})}),o.rows=x}}c.DataSet.registerTransform("bin.histogram",a),c.DataSet.registerTransform("bin.dot",a)},"./src/transform/bin/quantile.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),c=t.__importDefault(e("./src/util/partition.ts")),r=t.__importDefault(e("./src/util/p-by-fraction.ts")),h=e("./src/data-set.ts"),n=h.DataSet.registerTransform,i=e("./src/util/option-parser.ts"),a={as:"_bin",groupBy:[],fraction:4};function o(l,f){f=u.assign({},a,f);var v=i.getField(f),b=f.as;if(!u.isString(b))throw new TypeError('Invalid as: it must be a string (e.g. "_bin")!');var g=f.p,m=f.fraction;(!u.isArray(g)||g.length===0)&&(g=r.default(m));var _=l.rows,M=f.groupBy,x=c.default(_,M),y=[];u.forIn(x,function(S){var P=S[0],A=S.map(function(L){return L[v]}),O=g.map(function(L){return s.quantile(A,L)});P[b]=O,y.push(P)}),l.rows=y}n("bin.quantile",o)},"./src/transform/bin/rectangle.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),c=s.DataSet.registerTransform,r=e("./src/util/option-parser.ts"),h={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1};function n(a,o,l){var f=a-l,v=Math.floor(f/o);return[v*o+l,(v+1)*o+l]}function i(a,o){o=u.assign({},h,o);var l=t.__read(r.getFields(o),2),f=l[0],v=l[1];if(!f||!v)throw new TypeError("Invalid fields: must be an array with 2 strings!");var b=a.range(f),g=a.range(v),m=b[1]-b[0],_=g[1]-g[0],M=o.binWidth||[];if(M.length!==2){var x=t.__read(o.bins,2),y=x[0],S=x[1];if(y<=0||S<=0)throw new TypeError("Invalid bins: must be an array with 2 positive numbers (e.g. [ 30, 30 ])!");M=[m/y,_/S]}var P=a.rows.map(function(rt){return[rt[f],rt[v]]}),A={},O=t.__read(o.offset,2),L=O[0],H=O[1];P.forEach(function(rt){var vt=t.__read(n(rt[0],M[0],L),2),mt=vt[0],ut=vt[1],Rt=t.__read(n(rt[1],M[1],H),2),Ft=Rt[0],wt=Rt[1],Mt=mt+"-"+ut+"-"+Ft+"-"+wt;A[Mt]=A[Mt]||{x0:mt,x1:ut,y0:Ft,y1:wt,count:0},A[Mt].count++});var F=[],K=t.__read(o.as,3),G=K[0],U=K[1],Z=K[2];if(!G||!U||!Z)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "count" ])!');if(!o.sizeByCount)u.forIn(A,function(rt){var vt={};vt[G]=[rt.x0,rt.x1,rt.x1,rt.x0],vt[U]=[rt.y0,rt.y0,rt.y1,rt.y1],vt[Z]=rt.count,F.push(vt)});else{var J=0;u.forIn(A,function(rt){rt.count>J&&(J=rt.count)}),u.forIn(A,function(rt){var vt=rt.x0,mt=rt.x1,ut=rt.y0,Rt=rt.y1,Ft=rt.count,wt=Ft/J,Mt=t.__read([(vt+mt)/2,(ut+Rt)/2],2),St=Mt[0],At=Mt[1],nt=(mt-vt)*wt/2,Pt=(Rt-ut)*wt/2,z=St-nt,q=St+nt,gt=At-Pt,et=At+Pt,at={};at[G]=[z,q,q,z],at[U]=[gt,gt,et,et],at[Z]=Ft,F.push(at)})}a.rows=F}c("bin.rectangle",i),c("bin.rect",i)},"./src/transform/default.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("default",function(u){return u})},"./src/transform/diagram/arc.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s={y:0,thickness:.05,weight:!1,marginRatio:.1,id:function(l){return l.id},source:function(l){return l.source},target:function(l){return l.target},sourceWeight:function(l){return l.value||1},targetWeight:function(l){return l.value||1},sortBy:null};function c(o,l,f){return f===void 0&&(f={}),o.forEach(function(v){var b=l.edgeSource(v),g=l.edgeTarget(v);f[b]||(f[b]={id:b}),f[g]||(f[g]={id:g})}),t.values(f)}function r(o,l,f){t.forIn(o,function(v,b){v.inEdges=l.filter(function(g){return""+f.target(g)==""+b}),v.outEdges=l.filter(function(g){return""+f.source(g)==""+b}),v.edges=v.outEdges.concat(v.inEdges),v.frequency=v.edges.length,v.value=0,v.inEdges.forEach(function(g){v.value+=f.targetWeight(g)}),v.outEdges.forEach(function(g){v.value+=f.sourceWeight(g)})})}function h(o,l){var f={weight:function(g,m){return m.value-g.value},frequency:function(g,m){return m.frequency-g.frequency},id:function(g,m){return(""+l.id(g)).localeCompare(""+l.id(m))}},v=f[l.sortBy];!v&&t.isFunction(l.sortBy)&&(v=l.sortBy),v&&o.sort(v)}function n(o,l){var f=o.length;if(!f)throw new TypeError("Invalid nodes: it's empty!");if(l.weight){var v=l.marginRatio;if(v<0||v>=1)throw new TypeError("Invalid marginRatio: it must be in range [0, 1)!");var b=v/(2*f),g=l.thickness;if(g<=0||g>=1)throw new TypeError("Invalid thickness: it must be in range (0, 1)!");var m=0;o.forEach(function(M){m+=M.value}),o.forEach(function(M){M.weight=M.value/m,M.width=M.weight*(1-v),M.height=g}),o.forEach(function(M,x){for(var y=0,S=x-1;S>=0;S--)y+=o[S].width+2*b;var P=M.minX=b+y,A=M.maxX=M.minX+M.width,O=M.minY=l.y-g/2,L=M.maxY=O+g;M.x=[P,A,A,P],M.y=[O,O,L,L]})}else{var _=1/f;o.forEach(function(M,x){M.x=(x+.5)*_,M.y=l.y})}}function i(o,l,f){if(f.weight){var v={};t.forIn(o,function(b,g){v[g]=b.value}),l.forEach(function(b){var g=f.source(b),m=f.target(b),_=o[g],M=o[m];if(_&&M){var x=v[g],y=f.sourceWeight(b),S=_.minX+(_.value-x)/_.value*_.width,P=S+y/_.value*_.width;v[g]-=y;var A=v[m],O=f.targetWeight(b),L=M.minX+(M.value-A)/M.value*M.width,H=L+O/M.value*M.width;v[m]-=O;var F=f.y;b.x=[S,P,L,H],b.y=[F,F,F,F]}})}else l.forEach(function(b){var g=o[f.source(b)],m=o[f.target(b)];g&&m&&(b.x=[g.x,m.x],b.y=[g.y,m.y])})}function a(o,l){l=t.assign({},s,l);var f={},v=o.nodes,b=o.edges;(!t.isArray(v)||v.length===0)&&(v=c(b,l,f)),v.forEach(function(g){var m=l.id(g);f[m]=g}),r(f,b,l),h(v,l),n(v,l),i(f,b,l),o.nodes=v,o.edges=b}u.DataSet.registerTransform("diagram.arc",a),u.DataSet.registerTransform("arc",a)},"./src/transform/diagram/dagre.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./node_modules/_dagre@0.8.5@dagre/index.js")),c=e("./src/data-set.ts"),r={rankdir:"TB",align:"TB",nodesep:50,edgesep:10,ranksep:50,source:function(i){return i.source},target:function(i){return i.target}};function h(n,i){i=u.assign({},r,i);var a=new s.default.graphlib.Graph;a.setGraph({}),a.setDefaultEdgeLabel(function(){return{}}),n.nodes.forEach(function(f){var v=i.nodeId?i.nodeId(f):f.id;!f.height&&!f.width&&(f.height=f.width=i.edgesep),a.setNode(v,f)}),n.edges.forEach(function(f){a.setEdge(i.source(f),i.target(f))}),s.default.layout(a);var o=[],l=[];a.nodes().forEach(function(f){var v=a.node(f),b=v.x,g=v.y,m=v.height,_=v.width;v.x=[b-_/2,b+_/2,b+_/2,b-_/2],v.y=[g+m/2,g+m/2,g-m/2,g-m/2],o.push(v)}),a.edges().forEach(function(f){var v=a.edge(f).points,b={};b.x=v.map(function(g){return g.x}),b.y=v.map(function(g){return g.y}),l.push(b)}),n.nodes=o,n.edges=l}c.DataSet.registerTransform("diagram.dagre",h),c.DataSet.registerTransform("dagre",h)},"./src/transform/diagram/sankey.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./node_modules/_d3-sankey@0.9.1@d3-sankey/dist/d3-sankey.js"),s=e("./src/data-set.ts"),c={sankeyLeft:u.sankeyLeft,sankeyRight:u.sankeyRight,sankeyCenter:u.sankeyCenter,sankeyJustify:u.sankeyJustify},r={value:function(i){return i.value},source:function(i){return i.source},target:function(i){return i.target},nodeAlign:"sankeyJustify",nodeWidth:.02,nodePadding:.02,sort:void 0};function h(n,i){i=t.assign({},r,i);var a=null;t.isString(i.nodeAlign)?a=c[i.nodeAlign]:t.isFunction(i.nodeAlign)&&(a=i.nodeAlign);var o=u.sankey().nodeSort(i.sort).links(function(l){return l.edges}).nodeWidth(i.nodeWidth).nodePadding(i.nodePadding).extent([[0,0],[1,1]]);t.isFunction(i.nodeId)&&o.nodeId(i.nodeId),a&&o.nodeAlign(a),o(n),n.nodes.forEach(function(l){var f=l.x0,v=l.x1,b=l.y0,g=l.y1;l.x=[f,v,v,f],l.y=[b,b,g,g]}),n.edges.forEach(function(l){var f=l.source,v=l.target,b=f.x1,g=v.x0;l.x=[b,b,g,g];var m=l.width/2;l.y=[l.y0+m,l.y0-m,l.y1+m,l.y1-m]})}s.DataSet.registerTransform("diagram.sankey",h),s.DataSet.registerTransform("sankey",h)},"./src/transform/diagram/voronoi.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-voronoi@1.1.4@d3-voronoi/dist/d3-voronoi.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=c.DataSet.registerTransform,h=e("./src/util/option-parser.ts"),n={as:["_x","_y"]};function i(a,o){o=s.assign({},n,o);var l=o.as;if(!s.isArray(l)||l.length!==2)throw new TypeError("Invalid as: must be an array with two strings!");var f=l[0],v=l[1],b=h.getFields(o);if(!s.isArray(b)||b.length!==2)throw new TypeError("Invalid fields: must be an array with two strings!");var g=b[0],m=b[1],_=a.rows,M=_.map(function(S){return[S[g],S[m]]}),x=u.voronoi();o.extend&&x.extent(o.extend),o.size&&x.size(o.size);var y=x(M).polygons();_.forEach(function(S,P){var A=y[P].filter(function(O){return!!O});S[f]=A.map(function(O){return O[0]}),S[v]=A.map(function(O){return O[1]})})}r("diagram.voronoi",i),r("voronoi",i)},"./src/transform/fill-rows.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r={fillBy:"group",groupBy:[],orderBy:[]};function h(i,a){var o=i.map(function(l){return l});return a.forEach(function(l){var f=o.indexOf(l);f>-1&&o.splice(f,1)}),o}function n(i,a){a=u.assign({},r,a);var o=i.rows,l=a.groupBy,f=a.orderBy,v=s.default(o,l,f),b=0,g=[];u.forIn(v,function(P){P.length>b&&(b=P.length,g=P)});var m=[],_={};if(g.forEach(function(P){var A=f.map(function(O){return P[O]}).join("-");m.push(A),_[A]=P}),a.fillBy==="order"){var M=g[0],x=[],y={};o.forEach(function(P){var A=f.map(function(O){return P[O]}).join("-");x.indexOf(A)===-1&&(x.push(A),y[A]=P)});var S=h(x,m);S.forEach(function(P){var A={};l.forEach(function(O){A[O]=M[O]}),f.forEach(function(O){A[O]=y[P][O]}),o.push(A),g.push(A),m.push(P),_[P]=A}),b=g.length}u.forIn(v,function(P){if(P!==g&&P.length<b){var A=P[0],O=[];P.forEach(function(H){O.push(f.map(function(F){return H[F]}).join("-"))});var L=h(m,O);L.some(function(H,F){if(F>=b-P.length)return!0;var K=_[H],G={};return l.forEach(function(U){G[U]=A[U]}),f.forEach(function(U){G[U]=K[U]}),o.push(G),!1})}})}c.DataSet.registerTransform("fill-rows",n),c.DataSet.registerTransform("fillRows",n)},"./src/transform/filter.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");function u(s){return!!s}t.DataSet.registerTransform("filter",function(s,c){s.rows=s.rows.filter(c.callback||u)})},"./src/transform/fold.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts"),c={fields:[],key:"key",retains:[],value:"value"};u.DataSet.registerTransform("fold",function(r,h){var n=r.getColumnNames();h=t.assign({},c,h);var i=s.getFields(h);i.length===0&&(console.warn("warning: option fields is not specified, will fold all columns."),i=n);var a=h.key,o=h.value,l=h.retains;(!l||l.length===0)&&(l=t.difference(n,i));var f=[];r.rows.forEach(function(v){i.forEach(function(b){var g=t.pick(v,l);g[a]=b,g[o]=v[b],f.push(g)})}),r.rows=f})},"./src/transform/geo/centroid.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=u.DataSet.registerTransform,c=e("./src/util/option-parser.ts"),r={as:["_centroid_x","_centroid_y"]};function h(n,i){i=t.assign({},r,i);var a=c.getField(i),o=i.geoView||i.geoDataView;if(t.isString(o)&&n.dataSet&&(o=n.dataSet.getView(o)),!o||o.dataType!=="geo")throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var l=i.as;if(!t.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "cX", "cY" ])!');var f=l[0],v=l[1];n.rows.forEach(function(b){var g=o.geoFeatureByName(b[a]);g&&(o._projectedAs?(b[f]=g[o._projectedAs[2]],b[v]=g[o._projectedAs[3]]):(b[f]=g.centroidX,b[v]=g.centroidY))})}s("geo.centroid",h)},"./src/transform/geo/projection.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),c=t.__importDefault(e("./node_modules/_point-at-length@1.1.0@point-at-length/index.js")),r=e("./src/data-set.ts"),h=r.DataSet.registerTransform,n=t.__importDefault(e("./src/util/get-geo-projection.ts")),i={as:["_x","_y","_centroid_x","_centroid_y"]};function a(o,l){if(o.dataType!=="geo"&&o.dataType!=="geo-graticule")throw new TypeError("Invalid dataView: this transform is for Geo data only!");l=u.assign({},i,l);var f=l.projection;if(!f)throw new TypeError("Invalid projection!");f=n.default(f);var v=s.geoPath(f),b=l.as;if(!u.isArray(b)||b.length!==4)throw new TypeError('Invalid as: it must be an array with 4 strings (e.g. [ "x", "y", "cX", "cY" ])!');o._projectedAs=b;var g=t.__read(b,4),m=g[0],_=g[1],M=g[2],x=g[3];o.rows.forEach(function(y){y[m]=[],y[_]=[];var S=v(y);if(S){var P=c.default(S);P._path.forEach(function(O){y[m].push(O[1]),y[_].push(O[2])});var A=v.centroid(y);y[M]=A[0],y[x]=A[1]}}),o.rows=o.rows.filter(function(y){return y[m].length!==0})}h("geo.projection",a)},"./src/transform/geo/region.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=u.DataSet.registerTransform,c=e("./src/util/option-parser.ts"),r={as:["_x","_y"]};function h(n,i){i=t.assign({},r,i);var a=c.getField(i),o=i.geoView||i.geoDataView;if(t.isString(o)&&(o=n.dataSet.getView(o)),!o||o.dataType!=="geo")throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var l=i.as;if(!t.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f=l[0],v=l[1];n.rows.forEach(function(b){var g=o.geoFeatureByName(b[a]);g&&(o._projectedAs?(b[f]=g[o._projectedAs[0]],b[v]=g[o._projectedAs[1]]):(b[f]=g.longitude,b[v]=g.latitude))})}s("geo.region",h)},"./src/transform/hierarchy/cluster.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY||!i.root)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var l=a.as;if(!s.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f=void 0;try{f=r.getField(a)}catch(m){console.warn(m)}f&&o.sum(function(m){return m[f]});var v=u.cluster();v.size(a.size),a.nodeSize&&v.nodeSize(a.nodeSize),a.separation&&v.separation(a.separation),v(o);var b=l[0],g=l[1];o.each(function(m){m[b]=m.x,m[g]=m.y})}c.DataSet.registerTransform("hierarchy.cluster",n),c.DataSet.registerTransform("dendrogram",n)},"./src/transform/hierarchy/compact-box.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),c={};function r(h,n){var i=h.root;if(n=Object.assign({},c,n),h.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=u.default.compactBox(i,n)}s.DataSet.registerTransform("hierarchy.compact-box",r),s.DataSet.registerTransform("compact-box-tree",r),s.DataSet.registerTransform("non-layered-tidy-tree",r),s.DataSet.registerTransform("mindmap-logical",r)},"./src/transform/hierarchy/dendrogram.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),c={};function r(h,n){var i=h.root;if(n=Object.assign({},c,n),h.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=u.default.dendrogram(i,n)}s.DataSet.registerTransform("hierarchy.dendrogram",r),s.DataSet.registerTransform("dendrogram",r)},"./src/transform/hierarchy/indented.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),c={};function r(h,n){var i=h.root;if(n=Object.assign({},c,n),h.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=u.default.indented(i,n)}s.DataSet.registerTransform("hierarchy.indented",r),s.DataSet.registerTransform("indented-tree",r)},"./src/transform/hierarchy/pack.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],padding:0,as:["x","y","r"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=u.assign({},h,a);var l=a.as;if(!u.isArray(l)||l.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var f;try{f=r.getField(a)}catch(_){console.warn(_)}f&&o.sum(function(_){return _[f]}).sort(function(_,M){return M[f]-_[f]});var v=s.pack();v.size(a.size),a.padding&&v.padding(a.padding),v(o);var b=l[0],g=l[1],m=l[2];o.each(function(_){_[b]=_.x,_[g]=_.y,_[m]=_.r})}c.DataSet.registerTransform("hierarchy.pack",n),c.DataSet.registerTransform("hierarchy.circle-packing",n),c.DataSet.registerTransform("circle-packing",n)},"./src/transform/hierarchy/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],round:!1,padding:0,sort:!0,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var l=a.as;if(!s.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(m){console.warn(m)}f&&o.sum(function(m){return m[f]});var v=u.partition();v.size(a.size).round(a.round).padding(a.padding),v(o);var b=l[0],g=l[1];o.each(function(m){m[b]=[m.x0,m.x1,m.x1,m.x0],m[g]=[m.y1,m.y1,m.y0,m.y0],["x0","x1","y0","y1"].forEach(function(_){l.indexOf(_)===-1&&delete m[_]})})}c.DataSet.registerTransform("hierarchy.partition",n),c.DataSet.registerTransform("adjacency",n)},"./src/transform/hierarchy/tree.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var l=a.as;if(!s.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(m){console.warn(m)}f&&o.sum(function(m){return m[f]});var v=u.tree();v.size(a.size),a.nodeSize&&v.nodeSize(a.nodeSize),a.separation&&v.separation(a.separation),v(o);var b=l[0],g=l[1];o.each(function(m){m[b]=m.x,m[g]=m.y})}c.DataSet.registerTransform("hierarchy.tree",n),c.DataSet.registerTransform("tree",n)},"./src/transform/hierarchy/treemap.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var l=a.as;if(!s.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(m){console.warn(m)}f&&o.sum(function(m){return m[f]});var v=u.treemap();v.tile(u[a.tile]).size(a.size).round(a.round).padding(a.padding).paddingInner(a.paddingInner).paddingOuter(a.paddingOuter).paddingTop(a.paddingTop).paddingRight(a.paddingRight).paddingBottom(a.paddingBottom).paddingLeft(a.paddingLeft),v(o);var b=l[0],g=l[1];o.each(function(m){m[b]=[m.x0,m.x1,m.x1,m.x0],m[g]=[m.y1,m.y1,m.y0,m.y0],["x0","x1","y0","y1"].forEach(function(_){l.indexOf(_)===-1&&delete m[_]})})}c.DataSet.registerTransform("hierarchy.treemap",n),c.DataSet.registerTransform("treemap",n)},"./src/transform/impute.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n={groupBy:[]};function i(f){return f.filter(function(v){return!u.isUndefined(v)})}var a=["mean","median","max","min"],o={};a.forEach(function(f){o[f]=function(v,b){return s[f](b)}}),o.value=function(f,v,b){return b};function l(f,v){v=u.assign({},n,v);var b=h.getField(v),g=v.method;if(!g)throw new TypeError("Invalid method!");if(g==="value"&&!u.has(v,"value"))throw new TypeError("Invalid value: it is nil.");var m=i(f.getColumn(b)),_=c.default(f.rows,v.groupBy);u.forIn(_,function(M){var x=i(M.map(function(y){return y[b]}));x.length===0&&(x=m),M.forEach(function(y){if(u.isUndefined(y[b]))if(u.isFunction(g))y[b]=g(y,x,v.value,M);else if(u.isString(g))y[b]=o[g](y,x,v.value);else throw new TypeError("Invalid method: must be a function or one of "+a.join(", "))})})}r.DataSet.registerTransform("impute",l)},"./src/transform/kde.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),c=t.__importDefault(e("./src/util/kernel.ts")),r=t.__importStar(e("./src/util/bandwidth.ts")),h=t.__importDefault(e("./src/util/partition.ts")),n=e("./src/data-set.ts"),i=e("./src/util/option-parser.ts"),a=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),o={minSize:.01,as:["key","y","size"],extent:[],method:"gaussian",bandwidth:"nrd",step:0,groupBy:[]},l=u.keys(c.default),f=u.keys(r);function v(b,g){g=u.assign({},o,g);var m=i.getFields(g);if(!u.isArray(m)||m.length<1)throw new TypeError("invalid fields: must be an array of at least 1 strings!");var _=g.as;if(!u.isArray(_)||_.length!==3)throw new TypeError("invalid as: must be an array of 3 strings!");var M=g.method;if(u.isString(M)){if(l.indexOf(M)===-1)throw new TypeError("invalid method: "+M+". Must be one of "+l.join(", "));M=c.default[M]}if(!u.isFunction(M))throw new TypeError("invalid method: kernel method must be a function!");var x=g.extent;if(!u.isArray(x)||x.length===0){var y=[];u.each(m,function(H){var F=b.range(H);y=y.concat(F)}),x=[Math.min.apply(Math,t.__spread(y)),Math.max.apply(Math,t.__spread(y))]}var S=g.bandwidth;u.isString(S)&&r[S]?S=r[S](b.getColumn(m[0])):u.isFunction(S)?S=S(b.getColumn(m[0])):(!u.isNumber(S)||S<=0)&&(S=r.nrd(b.getColumn(m[0])));var P=s.default(x,g.step?g.step:S),A=[],O=g.groupBy,L=h.default(b.rows,O);u.forIn(L,function(H){var F={};u.each(m,function(K){var G=u.pick(H[0],O);F[K]=a.kernelDensityEstimation(H.map(function(vt){return vt[K]}),M,S);var U=t.__read(_,3),Z=U[0],J=U[1],rt=U[2];G[Z]=K,G[J]=[],G[rt]=[],u.each(P,function(vt){var mt=F[K](vt);mt>=g.minSize&&(G[J].push(vt),G[rt].push(mt))}),A.push(G)})}),b.rows=A}n.DataSet.registerTransform("kernel-density-estimation",v),n.DataSet.registerTransform("kde",v),n.DataSet.registerTransform("KDE",v),T.default={KERNEL_METHODS:l,BANDWIDTH_METHODS:f}},"./src/transform/kernel-smooth/density.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),c=t.__importDefault(e("./src/util/kernel.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n=e("./src/util/bandwidth.ts"),i={as:["x","y","z"],method:"gaussian"},a=u.keys(c.default);function o(l,f){var v,b;f=u.assign({},i,f);var g=h.getFields(f);if(!u.isArray(g)||g.length!==2)throw new TypeError("invalid fields: must be an array of 2 strings!");var m=t.__read(f.as,3),_=m[0],M=m[1],x=m[2];if(!u.isString(_)||!u.isString(M)||!u.isString(x))throw new TypeError("invalid as: must be an array of 3 strings!");var y;if(u.isString(f.method)){if(a.indexOf(f.method)===-1)throw new TypeError("invalid method: "+f.method+". Must be one of "+a.join(", "));y=c.default[f.method]}var S=t.__read(g,2),P=S[0],A=S[1],O=f.extent,L=f.bandwidth,H,F;O&&Array.isArray(O)&&Array.isArray(O[0])&&Array.isArray(O[1])?(v=t.__read(O,2),H=v[0],F=v[1]):(H=l.range(P),F=l.range(A));var K,G;L&&Array.isArray(L)&&L.slice(0,2).every(u.isNumber)&&L.slice(0,2).every(function(At){return At>0})?(b=t.__read(L,2),K=b[0],G=b[1]):(K=n.silverman(l.getColumn(P)),G=n.silverman(l.getColumn(A)));for(var U=s.default(H,K),Z=s.default(F,G),J=l.rows.length,rt=[],vt=0;vt<U.length;vt++)for(var mt=0;mt<Z.length;mt++){for(var ut=0,Rt=U[vt],Ft=Z[mt],wt=0;wt<J;wt++)ut+=y((Rt-l.rows[wt][P])/K)*y((Ft-l.rows[wt][A])/G);var Mt=1/(J*K*G)*ut,St={};St[_]=Rt,St[M]=Ft,St[x]=Mt,rt.push(St)}l.rows=rt}r.DataSet.registerTransform("kernel-smooth.density",o),r.DataSet.registerTransform("kernel.density",o),T.default={KERNEL_METHODS:a}},"./src/transform/kernel-smooth/regression.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),c=t.__importDefault(e("./src/util/kernel.ts")),r=e("./src/data-set.ts"),h=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),n=e("./src/util/option-parser.ts"),i=e("./src/util/bandwidth.ts"),a={as:["x","y"],method:"gaussian"},o=u.keys(c.default);function l(b,g,m,_){var M=(_-m)/g;return b(M)}function f(b){return function(g){return u.isArray(g)?g.map(function(m){return b(m)}):b(g)}}function v(b,g){g=u.assign({},a,g);var m=n.getFields(g);if(!u.isArray(m)||!(m.length===1||m.length===2))throw new TypeError("invalid fields: must be an array of 1 or 2 strings!");var _=t.__read(g.as,2),M=_[0],x=_[1];if(!u.isString(M)||!u.isString(x))throw new TypeError("invalid as: must be an array of 2 strings!");var y,S=g.method;if(u.isString(S)){if(o.indexOf(S)===-1)throw new TypeError("invalid method: "+S+". Must be one of "+o.join(", "));y=c.default[S]}var P=t.__read(m,2),A=P[0],O=P[1],L=b.getColumn(A),H=g.extent;(H||!u.isArray(H))&&(H=b.range(A));var F=g.bandwidth;(!F||!u.isNumber(F)||F<=0)&&(F=i.silverman(L));var K=s.default(H,F),G=L.length,U=l.bind(null,y,F),Z;if(u.isNil(O))Z=f(function(vt){var mt=L.map(function(Ft){return U(vt,Ft)}),ut=h.sum(mt),Rt=G*F;return!ut||!Rt?0:ut/Rt});else{var J=b.getColumn(O);Z=f(function(vt){var mt=L.map(function(Ft){return U(vt,Ft)}),ut=h.sum(mt.map(function(Ft,wt){return Ft*J[wt]})),Rt=h.sum(mt);return!ut||!Rt?0:ut/Rt})}var rt=K.map(function(vt){var mt={};return mt[M]=vt,mt[x]=Z(vt),mt});b.rows=rt}r.DataSet.registerTransform("kernel-smooth.regression",v),r.DataSet.registerTransform("kernel.regression",v),T.default={KERNEL_METHODS:o}},"./src/transform/map.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");function u(s){return s}t.DataSet.registerTransform("map",function(s,c){s.rows=s.rows.map(c.callback||u)})},"./src/transform/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r={groupBy:[],orderBy:[]};c.DataSet.registerTransform("partition",function(n,i){i=u.assign({},r,i),n.rows=s.default(n.rows,i.groupBy,i.orderBy)});function h(n,i){i=u.assign({},r,i),n.rows=u.values(s.default(n.rows,i.groupBy,i.orderBy))}c.DataSet.registerTransform("group",h),c.DataSet.registerTransform("groups",h)},"./src/transform/percent.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n={groupBy:[],as:"_percent"};function i(a,o){o=u.assign({},n,o);var l=h.getField(o),f=o.dimension,v=o.groupBy,b=o.as;if(!u.isString(f))throw new TypeError("Invalid dimension: must be a string!");if(u.isArray(b)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),b=b[0]),!u.isString(b))throw new TypeError("Invalid as: must be a string!");var g=a.rows,m=[],_=c.default(g,v);u.forIn(_,function(M){var x=s.sum(M.map(function(S){return S[l]})),y=c.default(M,[f]);u.forIn(y,function(S){var P=s.sum(S.map(function(L){return L[l]})),A=S[0],O=A[f];A[l]=P,A[f]=O,x===0?A[b]=0:A[b]=P/x,m.push(A)})}),a.rows=m}r.DataSet.registerTransform("percent",i)},"./src/transform/pick.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts");u.DataSet.registerTransform("pick",function(c,r){var h=s.getFields(r,c.getColumnNames());c.rows=c.rows.map(function(n){return t.pick(n,h)})})},"./src/transform/proportion.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={groupBy:[],as:"_proportion"};function n(i,a){a=u.assign({},h,a);var o=r.getField(a),l=a.dimension,f=a.groupBy,v=a.as;if(!u.isString(l))throw new TypeError("Invalid dimension: must be a string!");if(u.isArray(v)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),v=v[0]),!u.isString(v))throw new TypeError("Invalid as: must be a string!");var b=i.rows,g=[],m=s.default(b,f);u.forIn(m,function(_){var M=_.length,x=s.default(_,[l]);u.forIn(x,function(y){var S=y.length,P=y[0],A=P[l];P[o]=S,P[l]=A,P[v]=S/M,g.push(P)})}),i.rows=g}c.DataSet.registerTransform("proportion",n)},"./src/transform/regression.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_regression@2.0.1@regression/dist/regression.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=t.__importDefault(e("./src/util/get-series-values.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n=e("./src/util/bandwidth.ts"),i={as:["x","y"],method:"linear",order:2,precision:2},a=["linear","exponential","logarithmic","power","polynomial"];function o(l,f){f=s.assign({},i,f);var v=h.getFields(f);if(!s.isArray(v)||v.length!==2)throw new TypeError("invalid fields: must be an array of 2 strings.");var b=t.__read(v,2),g=b[0],m=b[1],_=f.method;if(a.indexOf(_)===-1)throw new TypeError("invalid method: "+_+". Must be one of "+a.join(", "));var M=l.rows.map(function(F){return[F[g],F[m]]}),x=u.default[_](M,f),y=f.extent;(!s.isArray(y)||y.length!==2)&&(y=l.range(g));var S=f.bandwidth;(!s.isNumber(S)||S<=0)&&(S=n.silverman(l.getColumn(g)));var P=c.default(y,S),A=[],O=t.__read(f.as,2),L=O[0],H=O[1];P.forEach(function(F){var K={},G=t.__read(x.predict(F),2),U=G[0],Z=G[1];K[L]=U,K[H]=Z,isFinite(Z)&&A.push(K)}),l.rows=A}r.DataSet.registerTransform("regression",o),T.default={REGRESSION_METHODS:a}},"./src/transform/rename.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts");function s(c,r){var h=r.map||{},n={};t.isPlainObject(h)&&t.forIn(h,function(i,a){t.isString(i)&&t.isString(a)&&(n[a]=i)}),c.rows.forEach(function(i){t.forIn(n,function(a,o){var l=i[o];delete i[o],i[a]=l})})}u.DataSet.registerTransform("rename",s),u.DataSet.registerTransform("rename-fields",s)},"./src/transform/reverse.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("reverse",function(u){u.rows.reverse()})},"./src/transform/sort-by.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts"),c=["ASC","DESC"];function r(h,n){var i=s.getFields(n,[h.getColumnName(0)]);if(!t.isArray(i))throw new TypeError("Invalid fields: must be an array with strings!");h.rows=t.sortBy(h.rows,i);var a=n.order;if(a&&c.indexOf(a)===-1)throw new TypeError("Invalid order: "+a+" must be one of "+c.join(", "));a==="DESC"&&h.rows.reverse()}u.DataSet.registerTransform("sort-by",r),u.DataSet.registerTransform("sortBy",r)},"./src/transform/sort.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("sort",function(u,s){var c=u.getColumnName(0);u.rows.sort(s.callback||function(r,h){return r[c]-h[c]})})},"./src/transform/subset.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts"),u=e("./src/util/option-parser.ts");t.DataSet.registerTransform("subset",function(s,c){var r=c.startRowIndex||0,h=c.endRowIndex||s.rows.length-1,n=u.getFields(c,s.getColumnNames());s.rows=s.getSubset(r,h,n)})},"./src/transform/tag-cloud.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),c=t.__importDefault(e("./src/util/tag-cloud.ts")),r=e("./src/util/option-parser.ts"),h={fields:["text","value"],font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:500};function n(i,a){a=u.assign({},h,a);var o=c.default();if(!a.size[0]||!a.size[1]){i.rows=[],i._tagCloud=o;return}["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval"].forEach(function(A){a[A]&&o[A](a[A])});var l=r.getFields(a),f=t.__read(l,2),v=f[0],b=f[1];if(!u.isString(v)||!u.isString(b))throw new TypeError('Invalid fields: must be an array with 2 strings (e.g. [ "text", "value" ])!');var g=i.rows.map(function(A){return A.text=A[v],A.value=A[b],A});o.words(g),a.imageMask&&o.createMask(a.imageMask);var m=o.start(),_=m._tags,M=m._bounds||[{x:0,y:0},{x:a.size[0],y:a.size[1]}];_.forEach(function(A){A.x+=a.size[0]/2,A.y+=a.size[1]/2});var x=t.__read(a.size,2),y=x[0],S=x[1],P=m.hasImage;_.push({text:"",value:0,x:P?0:M[0].x,y:P?0:M[0].y,opacity:0}),_.push({text:"",value:0,x:P?y:M[1].x,y:P?S:M[1].y,opacity:0}),i.rows=_,i._tagCloud=m}s.DataSet.registerTransform("tag-cloud",n),s.DataSet.registerTransform("word-cloud",n)},"./src/transform/waffle.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n={fields:["name","value"],rows:5,size:[1,1],scale:1,groupBy:[],maxCount:1e3,gapRatio:.1,as:["x","y"]};function i(a,o){o=u.assign({},n,o);var l=h.getFields(o),f=t.__read(l,2),v=f[0],b=f[1],g=t.__read(o.as,2),m=g[0],_=g[1],M=o.groupBy,x=c.default(a.rows,M),y=u.keys(x),S=t.__read(o.size,2),P=S[0],A=S[1],O=o.maxCount,L=y.length,H=A/L,F=o.rows,K=o.gapRatio,G=[],U=o.scale,Z=0,J=0;u.forIn(x,function(rt){var vt=s.sum(u.map(rt,function(ut){return ut[b]})),mt=Math.ceil(vt*U/F);vt*U>O&&(U=O/vt,mt=Math.ceil(vt*U/F)),J=P/mt}),u.forIn(x,function(rt){var vt=[Z*H,(Z+1)*H],mt=vt[1]-vt[0],ut=mt*(1-K)/F,Rt=0,Ft=0;u.each(rt,function(wt){for(var Mt=wt[b],St=Math.round(Mt*U),At=0;At<St;At++){Ft===F&&(Ft=0,Rt++);var nt=u.pick(wt,[v,b].concat(M));nt[m]=Rt*J+J/2,nt[_]=Ft*ut+ut/2+vt[0],nt._wStep=J,nt._hStep=ut,Ft++,G.push(nt)}}),Z+=1}),a.rows=G}r.DataSet.registerTransform("waffle",i)},"./src/util/bandwidth.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.nrd=T.silverman=void 0;var t=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js");function u(c){var r=t.standardDeviation(c),h=4*Math.pow(r,5),n=3*c.length;return Math.pow(h/n,.2)}T.silverman=u;function s(c){var r=t.standardDeviation(c),h=t.interquartileRange(c);return typeof h=="number"&&(r=Math.min(r,h/1.34)),1.06*r*Math.pow(c.length,-.2)}T.nrd=s},"./src/util/get-geo-projection.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js")),c=t.__importStar(e("./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js")),r=t.__importStar(e("./node_modules/_d3-composite-projections@1.4.0@d3-composite-projections/d3-composite-projections.js"));T.default=function(h,n){if(n===void 0&&(n=!1),u.isFunction(h))return n?h:h();if(u.isString(h)){if(s[h])return n?s[h]:s[h]();if(c[h])return n?c[h]:c[h]();if(r[h])return n?r[h]:r[h]()}return null}},"./src/util/get-series-values.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");T.default=function(u,s){for(var c=s||1,r=t.__read(u,2),h=r[0],n=r[1],i=[],a=h;a<n;)i.push(a),a+=c;return i.push(n),i}},"./src/util/kernel.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(s){return Math.abs(s)<=1?.5:0}function u(s){var c=1-Math.pow(Math.abs(s),3);return Math.pow(c,3)}T.default={boxcar:t,cosine:function(c){return Math.abs(c)<=1?Math.PI/4*Math.cos(Math.PI/2*c):0},epanechnikov:function(c){return Math.abs(c)<1?.75*(1-c*c):0},gaussian:function(c){return .3989422804*Math.exp(-.5*c*c)},quartic:function(c){if(Math.abs(c)<1){var r=1-c*c;return 15/16*r*r}return 0},triangular:function(c){var r=Math.abs(c);return r<1?1-r:0},tricube:function(c){return Math.abs(c)<1?70/81*u(c):0},triweight:function(c){if(Math.abs(c)<1){var r=1-c*c;return 35/32*r*r*r}return 0},uniform:t}},"./src/util/option-parser.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getFields=T.getField=void 0;var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u="Invalid field: it must be a string!",s="Invalid fields: it must be an array!";function c(h,n){var i=h.field,a=h.fields;if(t.isString(i))return i;if(t.isArray(i))return console.warn(u),i[0];if(console.warn(u+" will try to get fields instead."),t.isString(a))return a;if(t.isArray(a)&&a.length)return a[0];if(n)return n;throw new TypeError(u)}T.getField=c;function r(h,n){var i=h.field,a=h.fields;if(t.isArray(a))return a;if(t.isString(a))return console.warn(s),[a];if(console.warn(s+" will try to get field instead."),t.isString(i))return console.warn(s),[i];if(t.isArray(i)&&i.length)return console.warn(s),i;if(n)return n;throw new TypeError(s)}T.getFields=r},"./src/util/p-by-fraction.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){for(var u=1/t,s=[],c=0;c<=1;c=c+u)s.push(c);return s}},"./src/util/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/simple-sort-by.ts"));T.default=function(c,r,h){h===void 0&&(h=[]);var n=c;h&&h.length&&(n=s.default(c,h));var i;u.isFunction(r)?i=r:u.isArray(r)?i=function(l){return"_"+r.map(function(f){return l[f]}).join("-")}:u.isString(r)&&(i=function(l){return"_"+l[r]});var a=u.groupBy(n,i);return a}},"./src/util/simple-sort-by.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js");function u(s,c){c===void 0&&(c=[]);var r=void 0;return t.isFunction(c)?r=c:t.isArray(c)?r=function(n,i){for(var a=0;a<c.length;a++){var o=c[a];if(n[o]<i[o])return-1;if(n[o]>i[o])return 1}return 0}:t.isString(c)&&(r=function(n,i){return n[c]<i[c]?-1:n[c]>i[c]?1:0}),s.sort(r)}T.default=u},"./src/util/tag-cloud.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=Math.PI/180,s=1<<11>>5,c=1<<11;function r(P){return P.text}function h(){return"serif"}function n(){return"normal"}function i(P){return P.value}function a(){return~~(Math.random()*2)*90}function o(){return 1}function l(P,A,O,L){if(!A.sprite){var H=P.context,F=P.ratio;H.clearRect(0,0,(s<<5)/F,c/F);var K=0,G=0,U=0,Z=O.length;for(--L;++L<Z;){A=O[L],H.save(),H.font=A.style+" "+A.weight+" "+~~((A.size+1)/F)+"px "+A.font;var J=H.measureText(A.text+"m").width*F,rt=A.size<<1;if(A.rotate){var vt=Math.sin(A.rotate*u),mt=Math.cos(A.rotate*u),ut=J*mt,Rt=J*vt,Ft=rt*mt,wt=rt*vt;J=Math.max(Math.abs(ut+wt),Math.abs(ut-wt))+31>>5<<5,rt=~~Math.max(Math.abs(Rt+Ft),Math.abs(Rt-Ft))}else J=J+31>>5<<5;if(rt>U&&(U=rt),K+J>=s<<5&&(K=0,G+=U,U=0),G+rt>=c)break;H.translate((K+(J>>1))/F,(G+(rt>>1))/F),A.rotate&&H.rotate(A.rotate*u),H.fillText(A.text,0,0),A.padding&&(H.lineWidth=2*A.padding,H.strokeText(A.text,0,0)),H.restore(),A.width=J,A.height=rt,A.xoff=K,A.yoff=G,A.x1=J>>1,A.y1=rt>>1,A.x0=-A.x1,A.y0=-A.y1,A.hasText=!0,K+=J}for(var Mt=H.getImageData(0,0,(s<<5)/F,c/F).data,St=[];--L>=0;)if(A=O[L],!!A.hasText){for(var J=A.width,At=J>>5,rt=A.y1-A.y0,nt=0;nt<rt*At;nt++)St[nt]=0;if(K=A.xoff,K==null)return;G=A.yoff;for(var Pt=0,z=-1,q=0;q<rt;q++){for(var nt=0;nt<J;nt++){var gt=At*q+(nt>>5),et=Mt[(G+q)*(s<<5)+(K+nt)<<2]?1<<31-nt%32:0;St[gt]|=et,Pt|=et}Pt?z=q:(A.y0++,rt--,q--,G++)}A.y1=A.y0+z,A.sprite=St.slice(0,(A.y1-A.y0)*At)}}}function f(P,A,O){O>>=5;for(var L=P.sprite,H=P.width>>5,F=P.x-(H<<4),K=F&127,G=32-K,U=P.y1-P.y0,Z=(P.y+P.y0)*O+(F>>5),J,rt=0;rt<U;rt++){J=0;for(var vt=0;vt<=H;vt++)if((J<<G|(vt<H?(J=L[rt*H+vt])>>>K:0))&A[Z+vt])return!0;Z+=O}return!1}function v(P,A){var O=P[0],L=P[1];A.x+A.x0<O.x&&(O.x=A.x+A.x0),A.y+A.y0<O.y&&(O.y=A.y+A.y0),A.x+A.x1>L.x&&(L.x=A.x+A.x1),A.y+A.y1>L.y&&(L.y=A.y+A.y1)}function b(P,A){return P.x+P.x1>A[0].x&&P.x+P.x0<A[1].x&&P.y+P.y1>A[0].y&&P.y+P.y0<A[1].y}function g(P){var A=P[0]/P[1];return function(O){return[A*(O*=.1)*Math.cos(O),O*Math.sin(O)]}}function m(P){var A=4,O=A*P[0]/P[1],L=0,H=0;return function(F){var K=F<0?-1:1;switch(Math.sqrt(1+4*K*F)-K&3){case 0:L+=O;break;case 1:H+=A;break;case 2:L-=O;break;default:H-=A;break}return[L,H]}}function _(P){for(var A=[],O=-1;++O<P;)A[O]=0;return A}function M(){return document.createElement("canvas")}function x(P){return typeof P=="function"?P:function(){return P}}var y={archimedean:g,rectangular:m};function S(){var P=[256,256],A=r,O=h,L=i,H=n,F=n,K=a,G=o,U=g,Z=[],J=Infinity,rt=Math.random,vt=M,mt={};mt.canvas=function(Ft){return arguments.length?(vt=x(Ft),mt):vt},mt.start=function(){var Ft=t.__read(P,2),wt=Ft[0],Mt=Ft[1],St=ut(vt()),At=mt.board?mt.board:_((P[0]>>5)*P[1]),nt=Z.length,Pt=[],z=Z.map(function(at,xt){return at.text=A.call(this,at,xt),at.font=O.call(this,at,xt),at.style=H.call(this,at,xt),at.weight=F.call(this,at,xt),at.rotate=K.call(this,at,xt),at.size=~~L.call(this,at,xt),at.padding=G.call(this,at,xt),at}).sort(function(at,xt){return xt.size-at.size}),q=-1,gt=mt.board?[{x:0,y:0},{x:wt,y:Mt}]:null;et();function et(){for(var at=Date.now();Date.now()-at<J&&++q<nt;){var xt=z[q];xt.x=wt*(rt()+.5)>>1,xt.y=Mt*(rt()+.5)>>1,l(St,xt,z,q),xt.hasText&&Rt(At,xt,gt)&&(Pt.push(xt),gt?mt.hasImage||v(gt,xt):gt=[{x:xt.x+xt.x0,y:xt.y+xt.y0},{x:xt.x+xt.x1,y:xt.y+xt.y1}],xt.x-=P[0]>>1,xt.y-=P[1]>>1)}mt._tags=Pt,mt._bounds=gt}return mt};function ut(Ft){Ft.width=Ft.height=1;var wt=Math.sqrt(Ft.getContext("2d").getImageData(0,0,1,1).data.length>>2);Ft.width=(s<<5)/wt,Ft.height=c/wt;var Mt=Ft.getContext("2d");return Mt.fillStyle=Mt.strokeStyle="red",Mt.textAlign="center",{context:Mt,ratio:wt}}function Rt(Ft,wt,Mt){for(var St=wt.x,At=wt.y,nt=Math.sqrt(P[0]*P[0]+P[1]*P[1]),Pt=U(P),z=rt()<.5?1:-1,q,gt=-z,et,at;(q=Pt(gt+=z))&&(et=~~q[0],at=~~q[1],!(Math.min(Math.abs(et),Math.abs(at))>=nt));)if(wt.x=St+et,wt.y=At+at,!(wt.x+wt.x0<0||wt.y+wt.y0<0||wt.x+wt.x1>P[0]||wt.y+wt.y1>P[1])&&(!Mt||!f(wt,Ft,P[0]))&&(!Mt||b(wt,Mt))){for(var xt=wt.sprite,k=wt.width>>5,ot=P[0]>>5,it=wt.x-(k<<4),$=it&127,_t=32-$,yt=wt.y1-wt.y0,Nt=void 0,$t=(wt.y+wt.y0)*ot+(it>>5),ee=0;ee<yt;ee++){Nt=0;for(var Gt=0;Gt<=k;Gt++)Ft[$t+Gt]|=Nt<<_t|(Gt<k?(Nt=xt[ee*k+Gt])>>>$:0);$t+=ot}return delete wt.sprite,!0}return!1}return mt.createMask=function(Ft){var wt=document.createElement("canvas"),Mt=t.__read(P,2),St=Mt[0],At=Mt[1];if(!(!St||!At)){var nt=St>>5,Pt=_((St>>5)*At);wt.width=St,wt.height=At;var z=wt.getContext("2d");z.drawImage(Ft,0,0,Ft.width,Ft.height,0,0,St,At);for(var q=z.getImageData(0,0,St,At).data,gt=0;gt<At;gt++)for(var et=0;et<St;et++){var at=nt*gt+(et>>5),xt=gt*St+et<<2,k=q[xt]>=250&&q[xt+1]>=250&&q[xt+2]>=250,ot=k?1<<31-et%32:0;Pt[at]|=ot}mt.board=Pt,mt.hasImage=!0}},mt.timeInterval=function(Ft){return arguments.length?(J=Ft==null?Infinity:Ft,mt):J},mt.words=function(Ft){return arguments.length?(Z=Ft,mt):Z},mt.size=function(Ft){return arguments.length?(P=[+Ft[0],+Ft[1]],mt):P},mt.font=function(Ft){return arguments.length?(O=x(Ft),mt):O},mt.fontStyle=function(Ft){return arguments.length?(H=x(Ft),mt):H},mt.fontWeight=function(Ft){return arguments.length?(F=x(Ft),mt):F},mt.rotate=function(Ft){return arguments.length?(K=x(Ft),mt):K},mt.text=function(Ft){return arguments.length?(A=x(Ft),mt):A},mt.spiral=function(Ft){return arguments.length?(U=y[Ft]||Ft,mt):U},mt.fontSize=function(Ft){return arguments.length?(L=x(Ft),mt):L},mt.padding=function(Ft){return arguments.length?(G=x(Ft),mt):G},mt.random=function(Ft){return arguments.length?(rt=Ft,mt):rt},mt}T.default=S},"./src/view.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.View=void 0;var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js");function c(h){var n={};return s.forIn(h,function(i,a){s.isObject(i)&&i.isView?n[a]=i:s.isArray(i)?n[a]=i.concat([]):s.isPlainObject(i)?n[a]=s.clone(i):n[a]=i}),n}var r=function(h){t.__extends(n,h);function n(i,a){var o=h.call(this)||this;if(o.isView=!0,o.isDataView=!0,o.watchingStates=null,o.dataType="table",o.transforms=[],o.origin=[],o.rows=[],i&&i.isDataSet?o.dataSet=i:(o.dataSet=null,a=i),o.loose=!o.dataSet,a&&(o.watchingStates=a.watchingStates),!o.loose){var l=o.watchingStates;i.on("statechange",function(f){s.isArray(l)?l.indexOf(f)>-1&&o._reExecute():o._reExecute()})}return o}return n.prototype._parseStateExpression=function(i){var a=this.dataSet;if(a!==null){var o=/^\$state\.(\w+)/.exec(i);return o?a.state[o[1]]:i}},n.prototype._preparseOptions=function(i){var a=this,o=c(i);return this.loose||s.forIn(o,function(l,f){s.isString(l)&&/^\$state\./.test(l)&&(o[f]=a._parseStateExpression(l))}),o},n.prototype._prepareSource=function(i,a){if(this._source={source:i,options:a},a){var o=this._preparseOptions(a);this.origin=n.DataSet.getConnector(o.type)(i,o,this)}else if(i instanceof n||s.isString(i))this.origin=n.DataSet.getConnector("default")(i,this.dataSet);else if(s.isArray(i))this.origin=i;else if(s.isObject(i)&&i.type){var o=this._preparseOptions(i);this.origin=n.DataSet.getConnector(o.type)(o,this)}else throw new TypeError("Invalid source");return this.rows=s.deepMix([],this.origin),this},n.prototype.source=function(i,a){return this._prepareSource(i,a)._reExecuteTransforms(),this.trigger("change",[]),this},n.prototype.transform=function(i){return i&&i.type&&(this.transforms.push(i),this._executeTransform(i)),this},n.prototype._executeTransform=function(i){i=this._preparseOptions(i);var a=n.DataSet.getTransform(i.type);a(this,i)},n.prototype._reExecuteTransforms=function(){var i=this;this.transforms.forEach(function(a){i._executeTransform(a)})},n.prototype.addRow=function(i){this.rows.push(i)},n.prototype.removeRow=function(i){this.rows.splice(i,1)},n.prototype.updateRow=function(i,a){s.assign(this.rows[i],a)},n.prototype.findRows=function(i){return this.rows.filter(function(a){return s.isMatch(a,i)})},n.prototype.findRow=function(i){return s.find(this.rows,i)},n.prototype.getColumnNames=function(){var i=this.rows[0];return i?s.keys(i):[]},n.prototype.getColumnName=function(i){return this.getColumnNames()[i]},n.prototype.getColumnIndex=function(i){var a=this.getColumnNames();return a.indexOf(i)},n.prototype.getColumn=function(i){return this.rows.map(function(a){return a[i]})},n.prototype.getColumnData=function(i){return this.getColumn(i)},n.prototype.getSubset=function(i,a,o){for(var l=[],f=i;f<=a;f++)l.push(s.pick(this.rows[f],o));return l},n.prototype.toString=function(i){return i===void 0&&(i=!1),i?JSON.stringify(this.rows,null,2):JSON.stringify(this.rows)},n.prototype._reExecute=function(){var i=this._source,a=i.source,o=i.options;this._prepareSource(a,o),this._reExecuteTransforms(),this.trigger("change",[])},n}(u.default);T.View=r}})})},cSJO:function(_e,dt,R){"use strict";var V=this&&this.__spreadArray||function(r,h){for(var n=0,i=h.length,a=r.length;n<i;n++,a++)r[a]=h[n];return r};Object.defineProperty(dt,"__esModule",{value:!0}),dt.resolveInstance=void 0;var E=R("MON2"),T=R("FV85"),e=R("xfSm");function t(r,h,n){var i=h.filter(function(o){return o.target!==null&&o.target.type===T.TargetTypeEnum.ClassProperty}),a=i.map(n);return i.forEach(function(o,l){var f="";f=o.target.name.value();var v=a[l];r[f]=v}),r}function u(r,h){return new(r.bind.apply(r,V([void 0],h)))}function s(r,h){if(Reflect.hasMetadata(e.POST_CONSTRUCT,r)){var n=Reflect.getMetadata(e.POST_CONSTRUCT,r);try{h[n.value]()}catch(i){throw new Error(E.POST_CONSTRUCT_ERROR(r.name,i.message))}}}function c(r,h,n){var i=null;if(h.length>0){var a=h.filter(function(l){return l.target!==null&&l.target.type===T.TargetTypeEnum.ConstructorArgument}),o=a.map(n);i=u(r,o),i=t(i,h,n)}else i=new r;return s(r,i),i}dt.resolveInstance=c},cWXX:function(_e,dt,R){"use strict";var V=R("cIOH"),E=R.n(V),T=R("oIFs"),e=R.n(T)},cZ5Q:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.injectable=void 0;var V=R("MON2"),E=R("xfSm");function T(){return function(e){if(Reflect.hasOwnMetadata(E.PARAM_TYPES,e))throw new Error(V.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(E.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(E.PARAM_TYPES,t,e),e}}dt.injectable=T},cZlC:function(_e,dt,R){"use strict";R.d(dt,"b",function(){return V}),R.d(dt,"c",function(){return E}),R.d(dt,"a",function(){return T});var V;(function(e){e.LINEAR="linear",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat"})(V||(V={}));var E;(function(e){e.CONSTANT="constant",e.VARIABLE="variable"})(E||(E={}));var T;(function(e){e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform"})(T||(T={}))},"cq/+":function(_e,dt,R){var V=R("mc0g"),E=V();_e.exports=E},cvCv:function(_e,dt){function R(V){return function(){return V}}_e.exports=R},d9O0:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.id=void 0;var V=0;function E(){return V++}dt.id=E},dQpi:function(_e,dt,R){var V=R("yGk4"),E=R("vN+2"),T=R("rEGp"),e=1/0,t=V&&1/T(new V([,-0]))[1]==e?function(u){return new V(u)}:E;_e.exports=t},dTAl:function(_e,dt,R){var V=R("GoyQ"),E=Object.create,T=function(){function e(){}return function(t){if(!V(t))return{};if(E)return E(t);e.prototype=t;var u=new e;return e.prototype=void 0,u}}();_e.exports=T},dVn5:function(_e,dt){var R=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function V(E){return E.match(R)||[]}_e.exports=V},dX1H:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.Target=void 0;var V=R("xfSm"),E=R("d9O0"),T=R("GXnB"),e=R("zxMA"),t=function(){function u(s,c,r,h){this.id=E.id(),this.type=s,this.serviceIdentifier=r,this.name=new e.QueryableString(c||""),this.metadata=new Array;var n=null;typeof h=="string"?n=new T.Metadata(V.NAMED_TAG,h):h instanceof T.Metadata&&(n=h),n!==null&&this.metadata.push(n)}return u.prototype.hasTag=function(s){for(var c=0,r=this.metadata;c<r.length;c++){var h=r[c];if(h.key===s)return!0}return!1},u.prototype.isArray=function(){return this.hasTag(V.MULTI_INJECT_TAG)},u.prototype.matchesArray=function(s){return this.matchesTag(V.MULTI_INJECT_TAG)(s)},u.prototype.isNamed=function(){return this.hasTag(V.NAMED_TAG)},u.prototype.isTagged=function(){return this.metadata.some(function(s){return V.NON_CUSTOM_TAG_KEYS.every(function(c){return s.key!==c})})},u.prototype.isOptional=function(){return this.matchesTag(V.OPTIONAL_TAG)(!0)},u.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(s){return s.key===V.NAMED_TAG})[0]:null},u.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(s){return V.NON_CUSTOM_TAG_KEYS.every(function(c){return s.key!==c})}):null},u.prototype.matchesNamedTag=function(s){return this.matchesTag(V.NAMED_TAG)(s)},u.prototype.matchesTag=function(s){var c=this;return function(r){for(var h=0,n=c.metadata;h<n.length;h++){var i=n[h];if(i.key===s&&i.value===r)return!0}return!1}},u}();dt.Target=t},doU7:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.BindingCount=void 0;var V={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};dt.BindingCount=V},dt0z:function(_e,dt,R){var V=R("zoYe");function E(T){return T==null?"":V(T)}_e.exports=E},dxzI:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.AsyncContainerModule=dt.ContainerModule=void 0;var V=R("d9O0"),E=function(){function e(t){this.id=V.id(),this.registry=t}return e}();dt.ContainerModule=E;var T=function(){function e(t){this.id=V.id(),this.registry=t}return e}();dt.AsyncContainerModule=T},eUgh:function(_e,dt){function R(V,E){for(var T=-1,e=V==null?0:V.length,t=Array(e);++T<e;)t[T]=E(V[T],T,V);return t}_e.exports=R},"eg+a":function(_e,dt,R){"use strict";R.d(dt,"a",function(){return V});var V=["loaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"]},fX6N:function(_e,dt,R){"use strict";R.d(dt,"d",function(){return Vc}),R.d(dt,"b",function(){return Vf}),R.d(dt,"a",function(){return Qf});var V=R("mNvP"),E=R("uhBA"),T=R.n(E),e=R("4cb6"),t=R("APxj"),u=R.n(t),s=R("bB6j"),c=R("lSNA"),r=R.n(c),h=R("lwsE"),n=R.n(h),i=R("W8MJ"),a=R.n(i),o=R("Hel2"),l=R("rxlC"),f=R.n(l);function v(pe,ye){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(pe);ye&&(Xt=Xt.filter(function(Ue){return Object.getOwnPropertyDescriptor(pe,Ue).enumerable})),Vt.push.apply(Vt,Xt)}return Vt}function b(pe){for(var ye=1;ye<arguments.length;ye++){var Vt=arguments[ye]!=null?arguments[ye]:{};ye%2?v(Object(Vt),!0).forEach(function(Xt){r()(pe,Xt,Vt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):v(Object(Vt)).forEach(function(Xt){Object.defineProperty(pe,Xt,Object.getOwnPropertyDescriptor(Vt,Xt))})}return pe}function g(pe,ye){var Vt=typeof Symbol!="undefined"&&pe[Symbol.iterator]||pe["@@iterator"];if(!Vt){if(Array.isArray(pe)||(Vt=m(pe))||ye&&pe&&typeof pe.length=="number"){Vt&&(pe=Vt);var Xt=0,Ue=function(){};return{s:Ue,n:function(){return Xt>=pe.length?{done:!0}:{done:!1,value:pe[Xt++]}},e:function(ti){throw ti},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Zn=!1,ir;return{s:function(){Vt=Vt.call(pe)},n:function(){var ti=Vt.next();return un=ti.done,ti},e:function(ti){Zn=!0,ir=ti},f:function(){try{!un&&Vt.return!=null&&Vt.return()}finally{if(Zn)throw ir}}}}function m(pe,ye){if(!!pe){if(typeof pe=="string")return _(pe,ye);var Vt=Object.prototype.toString.call(pe).slice(8,-1);if(Vt==="Object"&&pe.constructor&&(Vt=pe.constructor.name),Vt==="Map"||Vt==="Set")return Array.from(pe);if(Vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Vt))return _(pe,ye)}}function _(pe,ye){(ye==null||ye>pe.length)&&(ye=pe.length);for(var Vt=0,Xt=new Array(ye);Vt<ye;Vt++)Xt[Vt]=pe[Vt];return Xt}var M=30;function x(pe){var ye=pe.characterSet,Vt=pe.getFontWidth,Xt=pe.fontHeight,Ue=pe.buffer,un=pe.maxCanvasWidth,Zn=pe.mapping,ir=Zn===void 0?{}:Zn,vr=pe.xOffset,ti=vr===void 0?0:vr,Ci=pe.yOffset,Ji=Ci===void 0?0:Ci,ua=0,la=ti;Array.from(ye).forEach(function(Xa,Ho){if(!ir[Xa]){var wo=Vt(Xa,Ho);la+M>un&&(la=0,ua++),ir[Xa]={x:la,y:Ji+ua*M,width:M,height:M,advance:wo},la+=M}});var qa=Xt+Ue*2;return{mapping:ir,xOffset:la,yOffset:Ji+ua*qa,canvasHeight:P(Ji+(ua+1)*qa)}}function y(pe,ye,Vt){var Xt=0,Ue=0,un=0,Zn=[],ir={},vr=g(pe),ti;try{for(vr.s();!(ti=vr.n()).done;){var Ci=ti.value;if(!ir[Ci.id]){var Ji=Ci.size;Xt+Ji+ye>Vt&&(S(ir,Zn,Ue),Xt=0,Ue=un+Ue+ye,un=0,Zn=[]),Zn.push({icon:Ci,xOffset:Xt}),Xt=Xt+Ji+ye,un=Math.max(un,Ji)}}}catch(la){vr.e(la)}finally{vr.f()}Zn.length>0&&S(ir,Zn,Ue);var ua=P(un+Ue+ye);return{mapping:ir,canvasHeight:ua}}function S(pe,ye,Vt){var Xt=g(ye),Ue;try{for(Xt.s();!(Ue=Xt.n()).done;){var un=Ue.value,Zn=un.icon,ir=un.xOffset;pe[Zn.id]=b(b({},Zn),{},{x:ir,y:Vt,image:Zn.image,width:Zn.width,height:Zn.height})}}catch(vr){Xt.e(vr)}finally{Xt.f()}}function P(pe){return Math.pow(2,Math.ceil(Math.log2(pe)))}var A,O;function L(pe,ye){var Vt=typeof Symbol!="undefined"&&pe[Symbol.iterator]||pe["@@iterator"];if(!Vt){if(Array.isArray(pe)||(Vt=H(pe))||ye&&pe&&typeof pe.length=="number"){Vt&&(pe=Vt);var Xt=0,Ue=function(){};return{s:Ue,n:function(){return Xt>=pe.length?{done:!0}:{done:!1,value:pe[Xt++]}},e:function(ti){throw ti},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Zn=!1,ir;return{s:function(){Vt=Vt.call(pe)},n:function(){var ti=Vt.next();return un=ti.done,ti},e:function(ti){Zn=!0,ir=ti},f:function(){try{!un&&Vt.return!=null&&Vt.return()}finally{if(Zn)throw ir}}}}function H(pe,ye){if(!!pe){if(typeof pe=="string")return F(pe,ye);var Vt=Object.prototype.toString.call(pe).slice(8,-1);if(Vt==="Object"&&pe.constructor&&(Vt=pe.constructor.name),Vt==="Map"||Vt==="Set")return Array.from(pe);if(Vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Vt))return F(pe,ye)}}function F(pe,ye){(ye==null||ye>pe.length)&&(ye=pe.length);for(var Vt=0,Xt=new Array(ye);Vt<ye;Vt++)Xt[Vt]=pe[Vt];return Xt}function K(pe,ye){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(pe);ye&&(Xt=Xt.filter(function(Ue){return Object.getOwnPropertyDescriptor(pe,Ue).enumerable})),Vt.push.apply(Vt,Xt)}return Vt}function G(pe){for(var ye=1;ye<arguments.length;ye++){var Vt=arguments[ye]!=null?arguments[ye]:{};ye%2?K(Object(Vt),!0).forEach(function(Xt){r()(pe,Xt,Vt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):K(Object(Vt)).forEach(function(Xt){Object.defineProperty(pe,Xt,Object.getOwnPropertyDescriptor(Vt,Xt))})}return pe}var U=At(),Z="sans-serif",J="normal",rt=24,vt=3,mt=.25,ut=8,Rt=1024,Ft=1,wt=1,Mt=3,St=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function At(){for(var pe=[],ye=32;ye<128;ye++)pe.push(String.fromCharCode(ye));return pe}function nt(pe,ye,Vt,Xt){pe.font="".concat(Xt," ").concat(Vt,"px ").concat(ye),pe.fillStyle="black",pe.textBaseline="middle"}function Pt(pe,ye){for(var Vt=0;Vt<pe.length;Vt++)ye.data[4*Vt+3]=pe[Vt]}var z=(A=Object(e.injectable)(),A(O=function(){function pe(){n()(this,pe),this.fontAtlas=void 0,this.iconFontGlyphs={},this.fontOptions=void 0,this.key=void 0,this.cache=new o.b(Mt)}return a()(pe,[{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:Z,fontWeight:J,characterSet:U,fontSize:rt,buffer:vt,sdf:!0,cutoff:mt,radius:ut},this.key=""}},{key:"addIconGlyphs",value:function(Vt){var Xt=this;Vt.forEach(function(Ue){Xt.iconFontGlyphs[Ue.name]=Ue.unicode})}},{key:"getGlyph",value:function(Vt){return this.iconFontGlyphs[Vt]?String.fromCharCode(parseInt(this.iconFontGlyphs[Vt],16)):""}},{key:"scale",get:function(){return wt}},{key:"canvas",get:function(){var Vt=this.cache.get(this.key);return Vt&&Vt.data}},{key:"mapping",get:function(){var Vt=this.cache.get(this.key);return Vt&&Vt.mapping}},{key:"setFontOptions",value:function(Vt){this.fontOptions=G(G({},this.fontOptions),Vt),this.key=this.getKey();var Xt=this.getNewChars(this.key,this.fontOptions.characterSet),Ue=this.cache.get(this.key);if(!(Ue&&Xt.length===0)){var un=this.generateFontAtlas(this.key,Xt,Ue);this.fontAtlas=un,this.cache.set(this.key,un)}}},{key:"destroy",value:function(){this.cache.clear()}},{key:"generateFontAtlas",value:function(Vt,Xt,Ue){var un=this.fontOptions,Zn=un.fontFamily,ir=un.fontWeight,vr=un.fontSize,ti=un.buffer,Ci=un.sdf,Ji=un.radius,ua=un.cutoff,la=Ue&&Ue.data;la||(la=document.createElement("canvas"),la.width=Rt);var qa=la.getContext("2d");nt(qa,Zn,vr,ir);var Xa=x(G({getFontWidth:function(Pc){return qa.measureText(Pc).width},fontHeight:vr*wt,buffer:ti,characterSet:Xt,maxCanvasWidth:Rt},Ue&&{mapping:Ue.mapping,xOffset:Ue.xOffset,yOffset:Ue.yOffset})),Ho=Xa.mapping,wo=Xa.canvasHeight,Su=Xa.xOffset,Xs=Xa.yOffset,ku=qa.getImageData(0,0,la.width,la.height);if(la.height=wo,qa.putImageData(ku,0,0),nt(qa,Zn,vr,ir),Ci){var hu=new f.a(vr,ti,Ji,ua,Zn,ir),Gu=qa.getImageData(0,0,hu.size,hu.size),Zo=L(Xt),lo;try{for(Zo.s();!(lo=Zo.n()).done;){var Bs=lo.value;Pt(hu.draw(Bs),Gu),qa.putImageData(Gu,Ho[Bs].x,Ho[Bs].y)}}catch(Mc){Zo.e(Mc)}finally{Zo.f()}}else{var _u=L(Xt),Sl;try{for(_u.s();!(Sl=_u.n()).done;){var Yl=Sl.value;qa.fillText(Yl,Ho[Yl].x,Ho[Yl].y+vr*Ft)}}catch(Mc){_u.e(Mc)}finally{_u.f()}}return{xOffset:Su,yOffset:Xs,mapping:Ho,data:la,width:la.width,height:la.height}}},{key:"getKey",value:function(){var Vt=this.fontOptions,Xt=Vt.fontFamily,Ue=Vt.fontWeight,un=Vt.fontSize,Zn=Vt.buffer,ir=Vt.sdf,vr=Vt.radius,ti=Vt.cutoff;return ir?"".concat(Xt," ").concat(Ue," ").concat(un," ").concat(Zn," ").concat(vr," ").concat(ti):"".concat(Xt," ").concat(Ue," ").concat(un," ").concat(Zn)}},{key:"getNewChars",value:function(Vt,Xt){var Ue=this.cache.get(Vt);if(!Ue)return Xt;var un=[],Zn=Ue.mapping,ir=new Set(Object.keys(Zn)),vr=new Set(Xt);return vr.forEach(function(ti){ir.has(ti)||un.push(ti)}),un}}]),pe}())||O),q=R("7W2i"),gt=R.n(q),et=R("a1gu"),at=R.n(et),xt=R("Nsbk"),k=R.n(xt),ot,it;function $(pe){var ye=_t();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function _t(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var yt=3,Nt=1024,$t=64,ee=(ot=Object(e.injectable)(),ot(it=function(pe){gt()(Vt,pe);var ye=$(Vt);function Vt(){var Xt;n()(this,Vt);for(var Ue=arguments.length,un=new Array(Ue),Zn=0;Zn<Ue;Zn++)un[Zn]=arguments[Zn];return Xt=ye.call.apply(ye,[this].concat(un)),Xt.canvasHeight=128,Xt.texture=void 0,Xt.canvas=void 0,Xt.iconData=void 0,Xt.iconMap=void 0,Xt.ctx=void 0,Xt.loadingImageCount=0,Xt}return a()(Vt,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(Ue,un){var Zn=this,ir=new Image;if(this.loadingImageCount++,this.hasImage(Ue))throw new Error("Image Id already exists");this.iconData.push({id:Ue,size:$t}),this.updateIconMap(),this.loadImage(un).then(function(vr){ir=vr;var ti=Zn.iconData.find(function(Ci){return Ci.id===Ue});ti&&(ti.image=ir,ti.width=ir.width,ti.height=ir.height),Zn.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(Ue){return this.iconMap.hasOwnProperty(Ue)}},{key:"removeImage",value:function(Ue){this.hasImage(Ue)&&(this.iconData=this.iconData.filter(function(un){return un.id!==Ue}),delete this.iconMap[Ue],this.update())}},{key:"destroy",value:function(){this.iconData=[],this.iconMap={}}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var Ue=this;this.canvas.width=Nt,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(un){var Zn=Ue.iconMap[un],ir=Zn.x,vr=Zn.y,ti=Zn.image,Ci=Zn.width,Ji=Ci===void 0?64:Ci,ua=Zn.height,la=ua===void 0?64:ua,qa=Math.max(Ji,la),Xa=qa/$t,Ho=la/Xa,wo=Ji/Xa;ti&&Ue.ctx.drawImage(ti,ir+($t-wo)/2,vr+($t-Ho)/2,wo,Ho)})}},{key:"updateIconMap",value:function(){var Ue=y(this.iconData,yt,Nt),un=Ue.mapping,Zn=Ue.canvasHeight;this.iconMap=un,this.canvasHeight=Zn}},{key:"loadImage",value:function(Ue){return new Promise(function(un,Zn){if(Ue instanceof HTMLImageElement){un(Ue);return}var ir=new Image;ir.crossOrigin="anonymous",ir.onload=function(){un(ir)},ir.onerror=function(){Zn(new Error("Could not load image at "+Ue))},ir.src=Ue instanceof File?URL.createObjectURL(Ue):Ue})}}]),Vt}(E.EventEmitter))||it),Gt=R("J4zp"),Ht=R.n(Gt),ae=R("IOcx"),le,Be,Ce=(le=Object(e.injectable)(),le(Be=function(){function pe(){n()(this,pe),this.viewport=void 0,this.overridedViewProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0,this.jitteredProjectionMatrix=void 0,this.viewMatrixInverse=void 0,this.cameraPosition=void 0}return a()(pe,[{key:"init",value:function(){}},{key:"update",value:function(Vt){this.viewport=Vt,this.viewMatrixInverse=ae.b.invert(ae.b.create(),this.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var Vt=this.viewport.getCenter(),Xt=Ht()(Vt,2),Ue=Xt[0],un=Xt[1];return[Ue,un]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(Vt,Xt){return this.viewport.projectFlat(Vt,Xt)}},{key:"setViewProjectionMatrix",value:function(Vt){this.overridedViewProjectionMatrix=Vt}},{key:"jitterProjectionMatrix",value:function(Vt,Xt){var Ue=ae.b.fromTranslation(ae.b.create(),[Vt,Xt,0]);this.jitteredProjectionMatrix=ae.b.multiply(ae.b.create(),Ue,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=ae.b.multiply(ae.b.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),pe}())||Be),We,Ye;function wn(pe,ye){var Vt=typeof Symbol!="undefined"&&pe[Symbol.iterator]||pe["@@iterator"];if(!Vt){if(Array.isArray(pe)||(Vt=er(pe))||ye&&pe&&typeof pe.length=="number"){Vt&&(pe=Vt);var Xt=0,Ue=function(){};return{s:Ue,n:function(){return Xt>=pe.length?{done:!0}:{done:!1,value:pe[Xt++]}},e:function(ti){throw ti},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Zn=!1,ir;return{s:function(){Vt=Vt.call(pe)},n:function(){var ti=Vt.next();return un=ti.done,ti},e:function(ti){Zn=!0,ir=ti},f:function(){try{!un&&Vt.return!=null&&Vt.return()}finally{if(Zn)throw ir}}}}function er(pe,ye){if(!!pe){if(typeof pe=="string")return Lr(pe,ye);var Vt=Object.prototype.toString.call(pe).slice(8,-1);if(Vt==="Object"&&pe.constructor&&(Vt=pe.constructor.name),Vt==="Map"||Vt==="Set")return Array.from(pe);if(Vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Vt))return Lr(pe,ye)}}function Lr(pe,ye){(ye==null||ye>pe.length)&&(ye=pe.length);for(var Vt=0,Xt=new Array(ye);Vt<ye;Vt++)Xt[Vt]=pe[Vt];return Xt}var on=(We=Object(e.injectable)(),We(Ye=function(){function pe(){n()(this,pe),this.container=void 0,this.controlCorners=void 0,this.controlContainer=void 0,this.scene=void 0,this.mapsService=void 0,this.controls=[],this.unAddControls=[]}return a()(pe,[{key:"init",value:function(Vt,Xt){this.container=Vt.container,this.scene=Xt,this.mapsService=Xt.get(s.a.IMapService),this.initControlPos()}},{key:"addControl",value:function(Vt,Xt){var Ue=Xt.get(s.a.IMapService);Ue.map?(Vt.addTo(this.scene),this.controls.push(Vt)):this.unAddControls.push(Vt)}},{key:"getControlByName",value:function(Vt){return this.controls.find(function(Xt){return Xt.controlOption.name===Vt})}},{key:"removeControl",value:function(Vt){var Xt=this.controls.indexOf(Vt);return Xt>-1&&this.controls.splice(Xt,1),Vt.remove(),this}},{key:"addControls",value:function(){var Vt=this;this.unAddControls.forEach(function(Xt){Xt.addTo(Vt.scene),Vt.controls.push(Xt)}),this.unAddControls=[]}},{key:"destroy",value:function(){var Vt=wn(this.controls),Xt;try{for(Vt.s();!(Xt=Vt.n()).done;){var Ue=Xt.value;Ue.remove()}}catch(un){Vt.e(un)}finally{Vt.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var Vt=this.controlCorners={},Xt="l7-",Ue=this.controlContainer=o.a.create("div",Xt+"control-container",this.container);function un(Zn,ir){var vr=Xt+Zn+" "+Xt+ir;Vt[Zn+ir]=o.a.create("div",vr,Ue)}un("top","left"),un("top","right"),un("bottom","left"),un("bottom","right")}},{key:"clearControlPos",value:function(){for(var Vt in this.controlCorners)this.controlCorners[Vt]&&o.a.remove(this.controlCorners[Vt]);this.controlContainer&&o.a.remove(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),pe}())||Ye),en,An,Bn=(en=Object(e.injectable)(),en(An=function(){function pe(){n()(this,pe),this.container=void 0,this.scene=void 0,this.mapsService=void 0,this.markers=[],this.markerLayers=[],this.unAddMarkers=[],this.unAddMarkerLayers=[]}return a()(pe,[{key:"addMarkerLayer",value:function(Vt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(Vt),Vt.addTo(this.scene)):this.unAddMarkerLayers.push(Vt)}},{key:"removeMarkerLayer",value:function(Vt){Vt.destroy(),this.markerLayers.indexOf(Vt);var Xt=this.markerLayers.indexOf(Vt);Xt>-1&&this.markerLayers.splice(Xt,1)}},{key:"addMarker",value:function(Vt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(Vt),Vt.addTo(this.scene)):this.unAddMarkers.push(Vt)}},{key:"addMarkers",value:function(){var Vt=this;this.unAddMarkers.forEach(function(Xt){Xt.addTo(Vt.scene),Vt.markers.push(Xt)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var Vt=this;this.unAddMarkerLayers.forEach(function(Xt){Vt.markerLayers.push(Xt),Xt.addTo(Vt.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(Vt){Vt.remove(),this.markers.indexOf(Vt);var Xt=this.markers.indexOf(Vt);Xt>-1&&this.markers.splice(Xt,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(Vt){this.scene=Vt,this.mapsService=Vt.get(s.a.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(Vt){Vt.remove()}),this.markers=[],this.markerLayers.forEach(function(Vt){Vt.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(Vt){Vt.destroy()}}]),pe}())||An),gr,hi,Ae=(gr=Object(e.injectable)(),gr(hi=function(){function pe(){n()(this,pe),this.scene=void 0,this.popup=void 0,this.mapsService=void 0,this.unAddPopup=void 0}return a()(pe,[{key:"removePopup",value:function(Vt){Vt.remove()}},{key:"destroy",value:function(){this.popup.remove()}},{key:"addPopup",value:function(Vt){this.popup&&this.popup.remove(),this.mapsService.map&&this.mapsService.getMarkerContainer()?(Vt.addTo(this.scene),this.popup=Vt):this.unAddPopup=Vt}},{key:"initPopup",value:function(){this.unAddPopup&&(this.addPopup(this.unAddPopup),this.unAddPopup=null)}},{key:"init",value:function(Vt){this.scene=Vt,this.mapsService=Vt.get(s.a.IMapService)}}]),pe}())||hi),Me=R("QkVN"),Qt=R.n(Me),ge={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo\u6D4B\u8BD5\u5730\u56FEtoken\uFF0C\u5982\u679C\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\u53BB\u5BF9\u5E94\u5730\u56FE\u8BF7\u6CE8\u518CToken",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},Wt=ge,re,Te;function ue(pe,ye){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(pe);ye&&(Xt=Xt.filter(function(Ue){return Object.getOwnPropertyDescriptor(pe,Ue).enumerable})),Vt.push.apply(Vt,Xt)}return Vt}function be(pe){for(var ye=1;ye<arguments.length;ye++){var Vt=arguments[ye]!=null?arguments[ye]:{};ye%2?ue(Object(Vt),!0).forEach(function(Xt){r()(pe,Xt,Vt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):ue(Object(Vt)).forEach(function(Xt){Object.defineProperty(pe,Xt,Object.getOwnPropertyDescriptor(Vt,Xt))})}return pe}var Xe={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Rn={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",selectColor:"blue",enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15}},tr=(re=Object(e.injectable)(),re(Te=function(){function pe(){n()(this,pe),this.sceneConfigCache={},this.layerConfigCache={}}return a()(pe,[{key:"getSceneConfig",value:function(Vt){return this.sceneConfigCache[Vt]}},{key:"getSceneWarninfo",value:function(Vt){return Wt[Vt]}},{key:"setSceneConfig",value:function(Vt,Xt){this.sceneConfigCache[Vt]=be(be({},Xe),Xt)}},{key:"getLayerConfig",value:function(Vt){return this.layerConfigCache[Vt]}},{key:"setLayerConfig",value:function(Vt,Xt,Ue){this.layerConfigCache[Xt]=be({},Qt()({},this.sceneConfigCache[Vt],Rn,Ue))}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),pe}())||Te),Mn=R("yG8O"),vn=R.n(Mn),Ar=R("U+yc"),or=R.n(Ar),cn=R("1ABj"),Pr=Math.PI/180,Sr=512,De=4003e4;function $e(pe){var ye=pe.latitude,Vt=ye===void 0?0:ye,Xt=pe.zoom,Ue=Xt===void 0?0:Xt,un=pe.scale,Zn=pe.highPrecision,ir=Zn===void 0?!1:Zn,vr=pe.flipY,ti=vr===void 0?!1:vr;un=un!==void 0?un:Math.pow(2,Ue);var Ci={},Ji=Sr*un,ua=Math.cos(Vt*Pr),la=Ji/360,qa=la/ua,Xa=Ji/De/ua;if(Ci.pixelsPerMeter=[Xa,-Xa,Xa],Ci.metersPerPixel=[1/Xa,-1/Xa,1/Xa],Ci.pixelsPerDegree=[la,-qa,Xa],Ci.degreesPerPixel=[1/la,-1/qa,1/Xa],ir){var Ho=Pr*Math.tan(Vt*Pr)/ua,wo=la*Ho/2,Su=Ji/De*Ho,Xs=Su/qa*Xa;Ci.pixelsPerDegree2=[0,-wo,Su],Ci.pixelsPerMeter2=[Xs,0,Xs],ti&&(Ci.pixelsPerDegree2[1]=-Ci.pixelsPerDegree2[1],Ci.pixelsPerMeter2[1]=-Ci.pixelsPerMeter2[1])}return ti&&(Ci.pixelsPerMeter[1]=-Ci.pixelsPerMeter[1],Ci.metersPerPixel[1]=-Ci.metersPerPixel[1],Ci.pixelsPerDegree[1]=-Ci.pixelsPerDegree[1],Ci.degreesPerPixel[1]=-Ci.degreesPerPixel[1]),Ci}var Ve=R("HthE"),En,xn,Nn,mn,Dn,$n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Wn=(En=Object(e.injectable)(),xn=Object(e.inject)(s.a.ICameraService),En(Nn=(mn=function(){function pe(){n()(this,pe),this.needRefresh=!0,vn()(this,"cameraService",Dn,this),this.coordinateSystem=void 0,this.viewportCenter=void 0,this.viewportCenterProjection=void 0,this.pixelsPerDegree=void 0,this.pixelsPerDegree2=void 0,this.pixelsPerMeter=void 0}return a()(pe,[{key:"refresh",value:function(){var Vt=this.cameraService.getZoom(),Xt=this.cameraService.getZoomScale(),Ue=this.cameraService.getCenter(),un=$e({latitude:Ue[1],zoom:Vt}),Zn=un.pixelsPerMeter,ir=un.pixelsPerDegree;this.viewportCenter=Ue,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=Zn,this.pixelsPerDegree=ir,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Ve.a.LNGLAT||this.coordinateSystem===Ve.a.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Ve.a.LNGLAT_OFFSET?this.calculateLnglatOffset(Ue,Vt):this.coordinateSystem===Ve.a.P20_OFFSET&&this.calculateLnglatOffset(Ue,Vt,Xt,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(Vt){this.coordinateSystem=Vt}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(Vt,Xt,Ue,un){var Zn=$e({latitude:Vt[1],zoom:Xt,scale:Ue,flipY:un,highPrecision:!0}),ir=Zn.pixelsPerMeter,vr=Zn.pixelsPerDegree,ti=Zn.pixelsPerDegree2,Ci=this.cameraService.getViewMatrix(),Ji=this.cameraService.getProjectionMatrix(),ua=ae.b.multiply([],Ji,Ci),la=this.cameraService.projectFlat([Math.fround(Vt[0]),Math.fround(Vt[1])],Math.pow(2,Xt));this.viewportCenterProjection=ae.e.transformMat4([],[la[0],la[1],0,1],ua),Ci=this.cameraService.getViewMatrixUncentered()||Ci,ua=ae.b.multiply([],Ji,Ci),ua=ae.b.multiply([],ua,$n),this.cameraService.setViewProjectionMatrix(ua),this.pixelsPerMeter=ir,this.pixelsPerDegree=vr,this.pixelsPerDegree2=ti}}]),pe}(),Dn=or()(mn.prototype,"cameraService",[xn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mn))||Nn),_n=R("PJYZ"),xr=R.n(_n),mr=R("yLV6"),Fr=R.n(mr),xi=R("V1cb"),Ta,Aa,to,Vo,Ro,ro,vs;function Jo(pe){var ye=Do();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function Do(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var xs={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancle"},Ra=(Ta=Object(e.injectable)(),Aa=Object(e.inject)(s.a.IMapService),to=Object(e.inject)(s.a.ILogService),Ta(Vo=(Ro=function(pe){gt()(Vt,pe);var ye=Jo(Vt);function Vt(){var Xt;n()(this,Vt);for(var Ue=arguments.length,un=new Array(Ue),Zn=0;Zn<Ue;Zn++)un[Zn]=arguments[Zn];return Xt=ye.call.apply(ye,[this].concat(un)),vn()(Xt,"mapService",ro,xr()(Xt)),vn()(Xt,"logger",vs,xr()(Xt)),Xt.hammertime=void 0,Xt.lastClickTime=0,Xt.lastClickXY=[-1,-1],Xt.clickTimer=void 0,Xt.$containter=void 0,Xt.onDrag=function(ir){var vr=Xt.interactionEvent(ir);vr.type=xs[vr.type],Xt.emit(xi.a.Drag,vr)},Xt.onHammer=function(ir){ir.srcEvent.stopPropagation();var vr=Xt.interactionEvent(ir);Xt.emit(xi.a.Hover,vr)},Xt.onTouch=function(ir){var vr=ir.touches[0];Xt.onHover({x:vr.pageX,y:vr.pageY,type:"touch"})},Xt.onHover=function(ir){var vr=ir.clientX,ti=ir.clientY,Ci=vr,Ji=ti,ua=ir.type,la=Xt.mapService.getMapContainer();if(la){var qa=la.getBoundingClientRect(),Xa=qa.top,Ho=qa.left;Ci=Ci-Ho-la.clientLeft,Ji=Ji-Xa-la.clientTop}var wo=Xt.mapService.containerToLngLat([Ci,Ji]);if(ua==="click"){if("ontouchstart"in document.documentElement)return;Xt.isDoubleTap(Ci,Ji,wo);return}if(ua==="touch"){Xt.isDoubleTap(Ci,Ji,wo);return}ua!=="click"&&ua!=="dblclick"&&Xt.emit(xi.a.Hover,{x:Ci,y:Ji,lngLat:wo,type:ua,target:ir})},Xt}return a()(Vt,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(xi.a.Hover)}},{key:"triggerHover",value:function(Ue){var un=Ue.x,Zn=Ue.y;this.emit(xi.a.Hover,{x:un,y:Zn})}},{key:"triggerSelect",value:function(Ue){this.emit(xi.a.Select,{featureId:Ue})}},{key:"triggerActive",value:function(Ue){this.emit(xi.a.Active,{featureId:Ue})}},{key:"addEventListenerOnMap",value:function(){var Ue=this.mapService.getMapContainer();if(Ue){var un=new Fr.a.Manager(Ue);un.add(new Fr.a.Tap({event:"dblclick",taps:2})),un.add(new Fr.a.Tap({event:"click"})),un.add(new Fr.a.Pan({threshold:0,pointers:0})),un.add(new Fr.a.Press({})),un.on("dblclick click",this.onHammer),un.on("panstart panmove panend pancancel",this.onDrag),Ue.addEventListener("mousemove",this.onHover),Ue.addEventListener("mousedown",this.onHover,!0),Ue.addEventListener("mouseup",this.onHover),Ue.addEventListener("contextmenu",this.onHover),this.hammertime=un,this.logger.debug("add event listeners on canvas")}}},{key:"removeEventListenerOnMap",value:function(){var Ue=this.mapService.getMapContainer();Ue&&(Ue.removeEventListener("mousemove",this.onHover),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),Ue.removeEventListener("mousedown",this.onHover),Ue.removeEventListener("mouseup",this.onHover),Ue.removeEventListener("contextmenu",this.onHover))}},{key:"interactionEvent",value:function(Ue){var un=Ue.type,Zn=Ue.pointerType,ir,vr;Zn==="touch"?(vr=Math.floor(Ue.pointers[0].clientY),ir=Math.floor(Ue.pointers[0].clientX)):(vr=Math.floor(Ue.srcEvent.y),ir=Math.floor(Ue.srcEvent.x));var ti=this.mapService.getMapContainer();if(ti){var Ci=ti.getBoundingClientRect(),Ji=Ci.top,ua=Ci.left;ir-=ua,vr-=Ji}var la=this.mapService.containerToLngLat([ir,vr]);return{x:ir,y:vr,lngLat:la,type:un,target:Ue.srcEvent}}},{key:"isDoubleTap",value:function(Ue,un,Zn){var ir=this,vr=new Date().getTime(),ti="click";vr-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-Ue)<10&&Math.abs(this.lastClickXY[1]-un)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),ti="dblclick",this.emit(xi.a.Hover,{x:Ue,y:un,lngLat:Zn,type:ti})):(this.lastClickTime=vr,this.lastClickXY=[Ue,un],this.clickTimer=setTimeout(function(){ti="click",ir.emit(xi.a.Hover,{x:Ue,y:un,lngLat:Zn,type:ti})},400))}}]),Vt}(T.a),ro=or()(Ro.prototype,"mapService",[Aa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vs=or()(Ro.prototype,"logger",[to],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ro))||Vo),$o=R("yXPU"),jo=R.n($o),Js=R("o0o1"),io=R.n(Js),so=R("o+pz"),Gs,Ne,se,Yt,Ee,sn,Fn,rr,qn,$r,bi;function wi(pe,ye){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(pe);ye&&(Xt=Xt.filter(function(Ue){return Object.getOwnPropertyDescriptor(pe,Ue).enumerable})),Vt.push.apply(Vt,Xt)}return Vt}function Vi(pe){for(var ye=1;ye<arguments.length;ye++){var Vt=arguments[ye]!=null?arguments[ye]:{};ye%2?wi(Object(Vt),!0).forEach(function(Xt){r()(pe,Xt,Vt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):wi(Object(Vt)).forEach(function(Xt){Object.defineProperty(pe,Xt,Object.getOwnPropertyDescriptor(Vt,Xt))})}return pe}var sa=(Gs=Object(e.injectable)(),Ne=Object(e.inject)(s.a.IRendererService),se=Object(e.inject)(s.a.IGlobalConfigService),Yt=Object(e.inject)(s.a.IInteractionService),Ee=Object(e.inject)(s.a.ILayerService),Gs(sn=(Fn=function(){function pe(){var ye=this;n()(this,pe),vn()(this,"rendererService",rr,this),vn()(this,"configService",qn,this),vn()(this,"interactionService",$r,this),vn()(this,"layerService",bi,this),this.pickingFBO=void 0,this.width=0,this.height=0,this.alreadyInPicking=!1,this.pickBufferScale=1,this.pickFromPickingFBO=function(Vt,Xt){var Ue,un=Xt.x,Zn=Xt.y,ir=Xt.lngLat,vr=Xt.type,ti=Xt.target,Ci=!1,Ji=ye.rendererService,ua=Ji.getViewportSize,la=Ji.readPixels,qa=Ji.getContainer,Xa=qa().getBoundingClientRect(),Ho=Xa.width,wo=Xa.height;Ho*=o.a.DPR,wo*=o.a.DPR;var Su=Vt.getLayerConfig(),Xs=Su.enableHighlight,ku=Su.enableSelect,hu=un*o.a.DPR,Gu=Zn*o.a.DPR;if(hu>Ho-1*o.a.DPR||hu<0||Gu>wo-1*o.a.DPR||Gu<0)return!1;var Zo;if(Zo=la({x:Math.floor(hu/ye.pickBufferScale),y:Math.floor((wo-(Zn+1)*o.a.DPR)/ye.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:ye.pickingFBO}),Zo[0]!==0||Zo[1]!==0||Zo[2]!==0){var lo=Object(o.k)(Zo),Bs=Vt.getSource().getFeatureById(lo);lo!==Vt.getCurrentPickId()&&vr==="mousemove"&&(vr="mouseenter");var _u={x:un,y:Zn,type:vr,lngLat:ir,featureId:lo,feature:Bs,target:ti};Bs&&(Ci=!0,Vt.setCurrentPickId(lo),ye.triggerHoverOnLayer(Vt,_u))}else{var Sl={x:un,y:Zn,lngLat:ir,type:Vt.getCurrentPickId()!==null&&vr==="mousemove"?"mouseout":"un"+vr,featureId:null,target:ti,feature:null};ye.triggerHoverOnLayer(Vt,Vi(Vi({},Sl),{},{type:"unpick"})),ye.triggerHoverOnLayer(Vt,Sl),Vt.setCurrentPickId(null)}if(Xs&&ye.highlightPickedFeature(Vt,Zo),ku&&vr==="click"&&((Ue=Zo)===null||Ue===void 0?void 0:Ue.toString())!==[0,0,0,0].toString()){var Yl=Object(o.k)(Zo);Vt.getCurrentSelectedId()===null||Yl!==Vt.getCurrentSelectedId()?(ye.selectFeature(Vt,Zo),Vt.setCurrentSelectedId(Yl)):(ye.selectFeature(Vt,new Uint8Array([0,0,0,0])),Vt.setCurrentSelectedId(null))}return Ci}}return a()(pe,[{key:"init",value:function(Vt){var Xt=this.rendererService,Ue=Xt.createTexture2D,un=Xt.createFramebuffer,Zn=Xt.getViewportSize,ir=Xt.getContainer,vr=ir().getBoundingClientRect(),ti=vr.width,Ci=vr.height;ti*=o.a.DPR,Ci*=o.a.DPR,this.pickBufferScale=this.configService.getSceneConfig(Vt).pickBufferScale||1,this.pickingFBO=un({color:Ue({width:Math.round(ti/this.pickBufferScale),height:Math.round(Ci/this.pickBufferScale),wrapS:so.a.CLAMP_TO_EDGE,wrapT:so.a.CLAMP_TO_EDGE})}),this.interactionService.on(xi.a.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var ye=jo()(io.a.mark(function Xt(Ue,un,Zn){var ir=this,vr,ti,Ci,Ji;return io.a.wrap(function(la){for(;;)switch(la.prev=la.next){case 0:vr=this.rendererService,ti=vr.useFramebuffer,Ci=vr.clear,Ji=vr.getContainer,this.resizePickingFBO(),ti(this.pickingFBO,function(){Ci({framebuffer:ir.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),Ue.hooks.beforePickingEncode.call(),Ue.renderModels(),Ue.hooks.afterPickingEncode.call();var qa=ir.pickBox(Ue,un);Zn(qa)});case 3:case"end":return la.stop()}},Xt,this)}));function Vt(Xt,Ue,un){return ye.apply(this,arguments)}return Vt}()},{key:"pickBox",value:function(Vt,Xt){var Ue=this,un=Xt.map(function(Sl){var Yl=Sl<0?0:Sl;return Math.floor(Yl*o.a.DPR/Ue.pickBufferScale)}),Zn=Ht()(un,4),ir=Zn[0],vr=Zn[1],ti=Zn[2],Ci=Zn[3],Ji=this.rendererService,ua=Ji.getViewportSize,la=Ji.readPixels,qa=Ji.getContainer,Xa=qa().getBoundingClientRect(),Ho=Xa.width,wo=Xa.height;if(Ho*=o.a.DPR,wo*=o.a.DPR,ir>(Ho-1)*o.a.DPR/this.pickBufferScale||ti<0||vr>(wo-1)*o.a.DPR/this.pickBufferScale||Ci<0)return[];var Su,Xs=Math.min(Ho/this.pickBufferScale,ti)-ir,ku=Math.min(wo/this.pickBufferScale,Ci)-vr;Su=la({x:ir,y:Math.floor(wo/this.pickBufferScale-(Ci+1)),width:Xs,height:ku,data:new Uint8Array(Xs*ku*4),framebuffer:this.pickingFBO});for(var hu=[],Gu={},Zo=0;Zo<Su.length/4;Zo=Zo+1){var lo=Su.slice(Zo*4,Zo*4+4),Bs=Object(o.k)(lo);if(Bs!==-1&&!Gu[Bs]){var _u=Vt.getSource().getFeatureById(Bs);hu.push(_u),Gu[Bs]=!0}}return hu}},{key:"pickingAllLayer",value:function(){var ye=jo()(io.a.mark(function Xt(Ue){return io.a.wrap(function(Zn){for(;;)switch(Zn.prev=Zn.next){case 0:if(!(this.alreadyInPicking||this.layerService.alreadyInRendering)){Zn.next=2;break}return Zn.abrupt("return");case 2:return this.alreadyInPicking=!0,Zn.next=5,this.pickingLayers(Ue);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return Zn.stop()}},Xt,this)}));function Vt(Xt){return ye.apply(this,arguments)}return Vt}()},{key:"resizePickingFBO",value:function(){var Vt=this.rendererService.getContainer,Xt=Vt().getBoundingClientRect(),Ue=Xt.width,un=Xt.height;Ue*=o.a.DPR,un*=o.a.DPR,(this.width!==Ue||this.height!==un)&&(this.pickingFBO.resize({width:Math.round(Ue/this.pickBufferScale),height:Math.round(un/this.pickBufferScale)}),this.width=Ue,this.height=un)}},{key:"pickingLayers",value:function(){var ye=jo()(io.a.mark(function Xt(Ue){var un=this,Zn,ir,vr,ti,Ci;return io.a.wrap(function(ua){for(;;)switch(ua.prev=ua.next){case 0:Zn=this.rendererService,ir=Zn.getViewportSize,vr=Zn.useFramebuffer,ti=Zn.clear,Ci=Zn.getContainer,this.resizePickingFBO(),vr(this.pickingFBO,function(){var la=un.layerService.getLayers();la.filter(function(qa){return qa.needPick(Ue.type)}).reverse().some(function(qa){ti({framebuffer:un.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),qa.hooks.beforePickingEncode.call(),qa.renderModels(),qa.hooks.afterPickingEncode.call();var Xa=un.pickFromPickingFBO(qa,Ue);return Xa&&!qa.getLayerConfig().enablePropagation})});case 3:case"end":return ua.stop()}},Xt,this)}));function Vt(Xt){return ye.apply(this,arguments)}return Vt}()},{key:"triggerHoverOnLayer",value:function(Vt,Xt){Vt.emit(Xt.type,Xt)}},{key:"highlightPickedFeature",value:function(Vt,Xt){var Ue=Ht()(Xt,3),un=Ue[0],Zn=Ue[1],ir=Ue[2];Vt.hooks.beforeHighlight.call([un,Zn,ir])}},{key:"selectFeature",value:function(Vt,Xt){var Ue=Ht()(Xt,3),un=Ue[0],Zn=Ue[1],ir=Ue[2];Vt.hooks.beforeSelect.call([un,Zn,ir])}}]),pe}(),rr=or()(Fn.prototype,"rendererService",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qn=or()(Fn.prototype,"configService",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$r=or()(Fn.prototype,"interactionService",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bi=or()(Fn.prototype,"layerService",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fn))||sn),$a=function(){function pe(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;n()(this,pe),this.autoStart=void 0,this.startTime=0,this.oldTime=0,this.running=!1,this.elapsedTime=0,this.autoStart=ye}return a()(pe,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var Vt=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var Xt=(typeof performance=="undefined"?Date:performance).now();Vt=(Xt-this.oldTime)/1e3,this.oldTime=Xt,this.elapsedTime+=Vt}return Vt}}]),pe}(),Ca,_o,Fa,uo,vo,Ja,To,hs=(Ca=Object(e.injectable)(),_o=Object(e.inject)(s.a.IRendererService),Fa=Object(e.inject)(s.a.IGlobalConfigService),Ca(uo=(vo=function(){function pe(){n()(this,pe),this.clock=new $a,this.alreadyInRendering=!1,this.layers=[],this.layerRenderID=void 0,this.sceneInited=!1,this.animateInstanceCount=0,vn()(this,"renderService",Ja,this),vn()(this,"configService",To,this)}return a()(pe,[{key:"add",value:function(Vt){this.sceneInited&&Vt.init(),this.layers.push(Vt)}},{key:"initLayers",value:function(){this.sceneInited=!0,this.layers.forEach(function(Vt){Vt.inited||Vt.init()})}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(Vt){return this.layers.find(function(Xt){return Xt.id===Vt})}},{key:"getLayerByName",value:function(Vt){return this.layers.find(function(Xt){return Xt.name===Vt})}},{key:"remove",value:function(Vt){var Xt=this.layers.indexOf(Vt);Xt>-1&&this.layers.splice(Xt,1),Vt.emit("remove",null),Vt.destroy(),this.renderLayers()}},{key:"removeAllLayers",value:function(){this.destroy()}},{key:"renderLayers",value:function(){this.alreadyInRendering||(this.alreadyInRendering=!0,this.clear(),this.updateRenderOrder(),this.layers.filter(function(Vt){return Vt.inited}).filter(function(Vt){return Vt.isVisible()}).forEach(function(Vt){Vt.hooks.beforeRenderData.call(),Vt.hooks.beforeRender.call(),Vt.render(),Vt.hooks.afterRender.call()}),this.alreadyInRendering=!1)}},{key:"updateRenderOrder",value:function(){this.layers.sort(function(Vt,Xt){return Vt.zIndex-Xt.zIndex})}},{key:"destroy",value:function(){this.layers.forEach(function(Vt){return Vt.destroy()}),this.layers=[],this.renderLayers()}},{key:"startAnimate",value:function(){this.animateInstanceCount++==0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount==0&&(this.stopRender(),this.clock.stop())}},{key:"clear",value:function(){this.renderService.clear({color:[0,0,0,0],depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){cancelAnimationFrame(this.layerRenderID)}}]),pe}(),Ja=or()(vo.prototype,"renderService",[_o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),To=or()(vo.prototype,"configService",[Fa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vo))||uo),zo=R("QILm"),bs=R.n(zo),Ao=R("RIqP"),Wa=R.n(Ao),Rs=R("J2iB"),ss=R.n(Rs),Ba=function(){function pe(ye){var Vt=this;n()(this,pe),this.name=void 0,this.type=void 0,this.scale=void 0,this.descriptor=void 0,this.featureBufferLayout=[],this.needRescale=!1,this.needRemapping=!1,this.needRegenerateVertices=!1,this.featureRange={startIndex:0,endIndex:Infinity},this.vertexAttribute=void 0,this.defaultCallback=function(Xt){if(Xt.length===0){var Ue;return((Ue=Vt.scale)===null||Ue===void 0?void 0:Ue.defaultValues)||[]}return Xt.map(function(un,Zn){var ir,vr=(ir=Vt.scale)===null||ir===void 0?void 0:ir.scalers[Zn].func,ti=vr(un);return ti})},this.setProps(ye)}return a()(pe,[{key:"setProps",value:function(Vt){Object.assign(this,Vt)}},{key:"mapping",value:function(Vt){var Xt;if((Xt=this.scale)!==null&&Xt!==void 0&&Xt.callback){var Ue,un=(Ue=this.scale)===null||Ue===void 0?void 0:Ue.callback.apply(Ue,Wa()(Vt));if(!ss()(un))return[un]}return this.defaultCallback(Vt)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),pe}(),gn,cr,Gr,Ui,Ua,xo;function po(pe,ye){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(pe);ye&&(Xt=Xt.filter(function(Ue){return Object.getOwnPropertyDescriptor(pe,Ue).enumerable})),Vt.push.apply(Vt,Xt)}return Vt}function ea(pe){for(var ye=1;ye<arguments.length;ye++){var Vt=arguments[ye]!=null?arguments[ye]:{};ye%2?po(Object(Vt),!0).forEach(function(Xt){r()(pe,Xt,Vt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):po(Object(Vt)).forEach(function(Xt){Object.defineProperty(pe,Xt,Object.getOwnPropertyDescriptor(Vt,Xt))})}return pe}function Qa(pe){return new Promise(function(ye){return setTimeout(ye,pe)})}var Ds=(gn={},r()(gn,so.a.FLOAT,4),r()(gn,so.a.UNSIGNED_BYTE,1),r()(gn,so.a.UNSIGNED_SHORT,2),gn),Es=(cr=Object(e.injectable)(),Gr=Object(e.inject)(s.a.IRendererService),cr(Ui=(Ua=function(){function pe(){n()(this,pe),this.attributesAndIndices=void 0,vn()(this,"rendererService",xo,this),this.attributes=[],this.triangulation=void 0,this.featureLayout={sizePerElement:0,elements:[]}}return a()(pe,[{key:"registerStyleAttribute",value:function(Vt){var Xt=this.getLayerStyleAttribute(Vt.name||"");return Xt?Xt.setProps(Vt):(Xt=new Ba(Vt),this.attributes.push(Xt)),Xt}},{key:"updateStyleAttribute",value:function(Vt,Xt,Ue){var un=this.getLayerStyleAttribute(Vt);un||(un=this.registerStyleAttribute(ea(ea({},Xt),{},{name:Vt})));var Zn=Xt.scale;Zn&&un&&(un.scale=Zn,un.needRescale=!0,un.needRemapping=!0,un.needRegenerateVertices=!0,Ue&&Ue.featureRange&&(un.featureRange=Ue.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(Vt){return this.attributes.find(function(Xt){return Xt.name===Vt})}},{key:"getLayerAttributeScale",value:function(Vt){var Xt,Ue=this.getLayerStyleAttribute(Vt),un=Ue==null||(Xt=Ue.scale)===null||Xt===void 0?void 0:Xt.scalers;return un&&un[0]?un[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(Vt,Xt){var Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,un=arguments.length>3?arguments[3]:void 0,Zn=this.attributes.find(function(ku){return ku.name===Vt});if(Zn&&Zn.descriptor){var ir=Zn.descriptor,vr=ir.update,ti=ir.buffer,Ci=ir.size,Ji=Ci===void 0?0:Ci,ua=Ds[ti.type||so.a.FLOAT];if(vr){var la=this.featureLayout,qa=la.elements,Xa=la.sizePerElement,Ho=qa.slice(Ue,un);if(!Ho.length)return;var wo=Ho[0].offset,Su=wo*Ji*ua,Xs=Ho.map(function(ku,hu){for(var Gu=ku.featureIdx,Zo=ku.vertices,lo=ku.normals,Bs=Zo.length/Xa,_u=[],Sl=0;Sl<Bs;Sl++){var Yl=lo?lo.slice(Sl*3,Sl*3+3):[];_u.push.apply(_u,Wa()(vr(Xt[Gu],Gu,Zo.slice(Sl*Xa,Sl*Xa+Xa),hu,Yl)))}return _u}).reduce(function(ku,hu){return ku.push.apply(ku,Wa()(hu)),ku},[]);Zn.vertexAttribute.updateBuffer({data:Xs,offset:Su})}}}},{key:"createAttributesAndIndices",value:function(Vt,Xt){var Ue=this;this.featureLayout={sizePerElement:0,elements:[]},Xt&&(this.triangulation=Xt);var un=this.attributes.map(function(wo){return wo.resetDescriptor(),wo.descriptor}),Zn=0,ir=[],vr=[],ti=[],Ci=3;Vt.forEach(function(wo,Su){var Xs=Ue.triangulation(wo),ku=Xs.indices,hu=Xs.vertices,Gu=Xs.normals,Zo=Xs.size;ku.forEach(function(Sl){vr.push(Sl+Zn)}),Ci=Zo;var lo=hu.length/Zo;Ue.featureLayout.sizePerElement=Ci,Ue.featureLayout.elements.push({featureIdx:Su,vertices:hu,normals:Gu,offset:Zn}),Zn+=lo;for(var Bs=function(Yl){var Mc=(Gu==null?void 0:Gu.slice(Yl*3,Yl*3+3))||[],Pc=hu.slice(Yl*Zo,Yl*Zo+Zo);un.forEach(function(Uc,wf){if(Uc&&Uc.update){var ff;(ff=Uc.buffer.data).push.apply(ff,Wa()(Uc.update(wo,Su,Pc,Yl,Mc)))}})},_u=0;_u<lo;_u++)Bs(_u)});var Ji=this.rendererService,ua=Ji.createAttribute,la=Ji.createBuffer,qa=Ji.createElements,Xa={};un.forEach(function(wo,Su){if(wo){var Xs=wo.buffer,ku=wo.update,hu=wo.name,Gu=bs()(wo,["buffer","update","name"]),Zo=ua(ea({buffer:la(Xs)},Gu));Xa[wo.name||""]=Zo,Ue.attributes[Su].vertexAttribute=Zo}});var Ho=qa({data:vr,type:so.a.UNSIGNED_INT,count:vr.length});return this.attributesAndIndices={attributes:Xa,elements:Ho},this.attributesAndIndices}},{key:"clearAllAttributes",value:function(){var Vt;this.attributes.forEach(function(Xt){Xt.vertexAttribute&&Xt.vertexAttribute.destroy()}),(Vt=this.attributesAndIndices)===null||Vt===void 0||Vt.elements.destroy(),this.attributes=[]}}]),pe}(),xo=or()(Ua.prototype,"rendererService",[Gr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ua))||Ui),Za=R("U8pU"),ru=R("KQm4"),Qo=R("rePB"),Os=R("1OyB"),$s=R("vuIU"),Ss=R("5ku3"),ps=typeof __VERSION__!="undefined"?__VERSION__:"untranspiled source",rs=Object(Ss.a)();function ws(pe){try{var ye=window[pe],Vt="__storage_test__";return ye.setItem(Vt,Vt),ye.removeItem(Vt),ye}catch(Xt){return null}}var _s=function(){function pe(ye,Vt){var Xt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";Object(Os.a)(this,pe),this.storage=ws(Xt),this.id=ye,this.config={},Object.assign(this.config,Vt),this._loadConfiguration()}return Object($s.a)(pe,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(Vt){return this.config={},this.updateConfiguration(Vt)}},{key:"updateConfiguration",value:function(Vt){if(Object.assign(this.config,Vt),this.storage){var Xt=JSON.stringify(this.config);this.storage.setItem(this.id,Xt)}return this}},{key:"_loadConfiguration",value:function(){var Vt={};if(this.storage){var Xt=this.storage.getItem(this.id);Vt=Xt?JSON.parse(Xt):{}}return Object.assign(this.config,Vt),this}}]),pe}();function Tu(pe){var ye;return pe<10?ye="".concat(pe.toFixed(2),"ms"):pe<100?ye="".concat(pe.toFixed(1),"ms"):pe<1e3?ye="".concat(pe.toFixed(0),"ms"):ye="".concat((pe/1e3).toFixed(2),"s"),ye}function Ru(pe){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,Vt=Math.max(ye-pe.length,0);return"".concat(" ".repeat(Vt)).concat(pe)}function Mo(pe){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,Vt=Math.max(ye-pe.length,0);return"".concat(pe).concat(" ".repeat(Vt))}function Qs(pe){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Vt=1e-16,Xt=ye.isInteger,Ue=Xt===void 0?!1:Xt;if(Array.isArray(pe)||ArrayBuffer.isView(pe))return Du(pe,ye);if(!Number.isFinite(pe))return String(pe);if(Math.abs(pe)<Vt)return Ue?"0":"0.";if(Ue||Math.abs(pe)>100&&Math.abs(pe)<1e4)return pe.toFixed(0);var un=pe.toPrecision(2),Zn=un.indexOf(".0");return Zn===un.length-2?un.slice(0,-1):un}function Du(pe,ye){for(var Vt=ye.maxElts,Xt=Vt===void 0?16:Vt,Ue=ye.size,un=Ue===void 0?1:Ue,Zn="[",ir=0;ir<pe.length&&ir<Xt;++ir)ir>0&&(Zn+=",".concat(ir%un==0?" ":"")),Zn+=Qs(pe[ir],ye);var vr=pe.length>Xt?"...":"]";return"".concat(Zn).concat(vr)}function Wu(pe,ye,Vt){var Xt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,Ue=pe.src.replace(/\(/g,"%28").replace(/\)/g,"%29");pe.width>Xt&&(Vt=Math.min(Vt,Xt/pe.width));var un=pe.width*Vt,Zn=pe.height*Vt,ir=["font-size:1px;","padding:".concat(Math.floor(Zn/2),"px ").concat(Math.floor(un/2),"px;"),"line-height:".concat(Zn,"px;"),"background:url(".concat(Ue,");"),"background-size:".concat(un,"px ").concat(Zn,"px;"),"color:transparent;"].join("");return["".concat(ye," %c+"),ir]}var il={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function ju(pe){return typeof pe=="string"?il[pe.toUpperCase()]||il.WHITE:pe}function Co(pe,ye,Vt){return!rs&&typeof pe=="string"&&(ye&&(ye=ju(ye),pe="[".concat(ye,"m").concat(pe,"[39m")),Vt&&(ye=ju(Vt),pe="[".concat(Vt+10,"m").concat(pe,"[49m"))),pe}function ka(pe){if(typeof Symbol=="undefined"||pe[Symbol.iterator]==null){if(Array.isArray(pe)||(pe=ba(pe))){var ye=0,Vt=function(){};return{s:Vt,n:function(){return ye>=pe.length?{done:!0}:{done:!1,value:pe[ye++]}},e:function(vr){throw vr},f:Vt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Xt,Ue=!0,un=!1,Zn;return{s:function(){Xt=pe[Symbol.iterator]()},n:function(){var vr=Xt.next();return Ue=vr.done,vr},e:function(vr){un=!0,Zn=vr},f:function(){try{!Ue&&Xt.return!=null&&Xt.return()}finally{if(un)throw Zn}}}}function ba(pe,ye){if(!!pe){if(typeof pe=="string")return Bo(pe,ye);var Vt=Object.prototype.toString.call(pe).slice(8,-1);if(Vt==="Object"&&pe.constructor&&(Vt=pe.constructor.name),Vt==="Map"||Vt==="Set")return Array.from(Vt);if(Vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Vt))return Bo(pe,ye)}}function Bo(pe,ye){(ye==null||ye>pe.length)&&(ye=pe.length);for(var Vt=0,Xt=new Array(ye);Vt<ye;Vt++)Xt[Vt]=pe[Vt];return Xt}function uu(pe){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],Vt=Object.getPrototypeOf(pe),Xt=Object.getOwnPropertyNames(Vt),Ue=ka(Xt),un;try{var Zn=function(){var vr=un.value;typeof pe[vr]=="function"&&(ye.find(function(ti){return vr===ti})||(pe[vr]=pe[vr].bind(pe)))};for(Ue.s();!(un=Ue.n()).done;)Zn()}catch(ir){Ue.e(ir)}finally{Ue.f()}}function Hu(pe,ye){if(!pe)throw new Error(ye||"Assertion failed")}var gs=R("K9nA");function qo(){var pe;if(rs&&gs.b.performance)pe=gs.b.performance.now();else if(gs.a.hrtime){var ye=gs.a.hrtime();pe=ye[0]*1e3+ye[1]/1e6}else pe=Date.now();return pe}var Is={debug:rs&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},iu={enabled:!0,level:0};function Fo(){}var Yu={},Ys={once:!0};function Ka(pe){for(var ye in pe)for(var Vt in pe[ye])return Vt||"untitled";return"empty"}var pl=function(){function pe(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Vt=ye.id;Object(Os.a)(this,pe),this.id=Vt,this.VERSION=ps,this._startTs=qo(),this._deltaTs=qo(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new _s("__probe-".concat(this.id,"__"),iu),this.userData={},this.timeStamp("".concat(this.id," started")),uu(this),Object.seal(this)}return Object($s.a)(pe,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((qo()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((qo()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var Vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:Vt}),this}},{key:"setLevel",value:function(Vt){return this._storage.updateConfiguration({level:Vt}),this}},{key:"assert",value:function(Vt,Xt){Hu(Vt,Xt)}},{key:"warn",value:function(Vt){return this._getLogFunction(0,Vt,Is.warn,arguments,Ys)}},{key:"error",value:function(Vt){return this._getLogFunction(0,Vt,Is.error,arguments)}},{key:"deprecated",value:function(Vt,Xt){return this.warn("`".concat(Vt,"` is deprecated and will be removed in a later version. Use `").concat(Xt,"` instead"))}},{key:"removed",value:function(Vt,Xt){return this.error("`".concat(Vt,"` has been removed. Use `").concat(Xt,"` instead"))}},{key:"probe",value:function(Vt,Xt){return this._getLogFunction(Vt,Xt,Is.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(Vt,Xt){return this._getLogFunction(Vt,Xt,Is.debug,arguments)}},{key:"info",value:function(Vt,Xt){return this._getLogFunction(Vt,Xt,console.info,arguments)}},{key:"once",value:function(Vt,Xt){return this._getLogFunction(Vt,Xt,Is.debug||Is.info,arguments,Ys)}},{key:"table",value:function(Vt,Xt,Ue){return Xt?this._getLogFunction(Vt,Xt,console.table||Fo,Ue&&[Ue],{tag:Ka(Xt)}):Fo}},{key:"image",value:function(Vt){var Xt=Vt.logLevel,Ue=Vt.priority,un=Vt.image,Zn=Vt.message,ir=Zn===void 0?"":Zn,vr=Vt.scale,ti=vr===void 0?1:vr;return this._shouldLog(Xt||Ue)?rs?ao({image:un,message:ir,scale:ti}):Ml({image:un,message:ir,scale:ti}):Fo}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(Vt){return this._storage.config[Vt]}},{key:"set",value:function(Vt,Xt){this._storage.updateConfiguration(Object(Qo.a)({},Vt,Xt))}},{key:"time",value:function(Vt,Xt){return this._getLogFunction(Vt,Xt,console.time?console.time:console.info)}},{key:"timeEnd",value:function(Vt,Xt){return this._getLogFunction(Vt,Xt,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(Vt,Xt){return this._getLogFunction(Vt,Xt,console.timeStamp||Fo)}},{key:"group",value:function(Vt,Xt){var Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};Ue=gl({logLevel:Vt,message:Xt,opts:Ue});var un=Ue,Zn=un.collapsed;return Ue.method=(Zn?console.groupCollapsed:console.group)||console.info,this._getLogFunction(Ue)}},{key:"groupCollapsed",value:function(Vt,Xt){var Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(Vt,Xt,Object.assign({},Ue,{collapsed:!0}))}},{key:"groupEnd",value:function(Vt){return this._getLogFunction(Vt,"",console.groupEnd||Fo)}},{key:"withGroup",value:function(Vt,Xt,Ue){this.group(Vt,Xt)();try{Ue()}finally{this.groupEnd(Vt)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(Vt){return this.isEnabled()&&this.getLevel()>=Gl(Vt)}},{key:"_getLogFunction",value:function(Vt,Xt,Ue){var un=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],Zn=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(Vt)){var ir;Zn=gl({logLevel:Vt,message:Xt,args:un,opts:Zn}),Ue=Ue||Zn.method,Hu(Ue),Zn.total=this.getTotal(),Zn.delta=this.getDelta(),this._deltaTs=qo();var vr=Zn.tag||Zn.message;if(Zn.once)if(!Yu[vr])Yu[vr]=qo();else return Fo;return Xt=Ec(this.id,Zn.message,Zn),(ir=Ue).bind.apply(ir,[console,Xt].concat(Object(ru.a)(Zn.args)))}return Fo}},{key:"level",set:function(Vt){this.setLevel(Vt)},get:function(){return this.getLevel()}},{key:"priority",set:function(Vt){this.level=Vt},get:function(){return this.level}}]),pe}();pl.VERSION=ps;function Gl(pe){if(!pe)return 0;var ye;switch(Object(Za.a)(pe)){case"number":ye=pe;break;case"object":ye=pe.logLevel||pe.priority||0;break;default:return 0}return Hu(Number.isFinite(ye)&&ye>=0),ye}function gl(pe){var ye=pe.logLevel,Vt=pe.message;pe.logLevel=Gl(ye);for(var Xt=pe.args?Array.from(pe.args):[];Xt.length&&Xt.shift()!==Vt;);switch(pe.args=Xt,Object(Za.a)(ye)){case"string":case"function":Vt!==void 0&&Xt.unshift(Vt),pe.message=ye;break;case"object":Object.assign(pe,ye);break;default:}typeof pe.message=="function"&&(pe.message=pe.message());var Ue=Object(Za.a)(pe.message);return Hu(Ue==="string"||Ue==="object"),Object.assign(pe,pe.opts)}function Ec(pe,ye,Vt){if(typeof ye=="string"){var Xt=Vt.time?Ru(Tu(Vt.total)):"";ye=Vt.time?"".concat(pe,": ").concat(Xt,"  ").concat(ye):"".concat(pe,": ").concat(ye),ye=Co(ye,Vt.color,Vt.background)}return ye}function Ml(pe){var ye=pe.image,Vt=pe.message,Xt=Vt===void 0?"":Vt,Ue=pe.scale,un=Ue===void 0?1:Ue,Zn=null;try{Zn=R(3)}catch(ir){}return Zn?function(){return Zn(ye,{fit:"box",width:"".concat(Math.round(80*un),"%")}).then(function(ir){return console.log(ir)})}:Fo}function ao(pe){var ye=pe.image,Vt=pe.message,Xt=Vt===void 0?"":Vt,Ue=pe.scale,un=Ue===void 0?1:Ue;if(typeof ye=="string"){var Zn=new Image;return Zn.onload=function(){var Ci,Ji=Wu(Zn,Xt,un);(Ci=console).log.apply(Ci,Object(ru.a)(Ji))},Zn.src=ye,Fo}var ir=ye.nodeName||"";if(ir.toLowerCase()==="img"){var vr;return(vr=console).log.apply(vr,Object(ru.a)(Wu(ye,Xt,un))),Fo}if(ir.toLowerCase()==="canvas"){var ti=new Image;return ti.onload=function(){var Ci;return(Ci=console).log.apply(Ci,Object(ru.a)(Wu(ti,Xt,un)))},ti.src=ye.toDataURL(),Fo}return Fo}var Au,ml,qs=new pl({id:"L7"}).enable(!1);qs.priority=5;var Bu=(Au=Object(e.injectable)(),Au(ml=function(){function pe(){n()(this,pe)}return a()(pe,[{key:"error",value:function(Vt){qs.error(Vt)()}},{key:"warn",value:function(Vt){qs.probe(1,Vt)()}},{key:"info",value:function(Vt){qs.info(3,Vt)()}},{key:"debug",value:function(Vt){qs.probe(4,Vt)()}}]),pe}())||ml),vu=R("xp6e"),pu=R("iegG"),Zs=R.n(pu),ds=window.document.documentElement.style,Ms=0;function al(pe){var ye=pe;if(typeof pe=="string"&&(ye=document.getElementById(pe)),ye){var Vt=document.createElement("div");return Vt.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,Vt.id="l7-scene-".concat(Ms++),Vt.classList.add("l7-scene"),ye.appendChild(Vt),Vt}return null}var Pl,jl,Nu,Zu,ol,gu,au,Ku,Ls,yl,ic,Tl,Bl,Vl,pc,Xu,Al,Nl,Oo,go,xl,sl,Vs,Da,bo,Ns,Cl,ul,Ju,Sc,Wl,$u,tu,Ws,is;function eu(pe){var ye=Fu();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function Fu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var us=(Pl=Object(e.injectable)(),jl=Object(e.inject)(s.a.SceneID),Nu=Object(e.inject)(s.a.IIconService),Zu=Object(e.inject)(s.a.IFontService),ol=Object(e.inject)(s.a.IControlService),gu=Object(e.inject)(s.a.ILogService),au=Object(e.inject)(s.a.IGlobalConfigService),Ku=Object(e.inject)(s.a.IMapService),Ls=Object(e.inject)(s.a.ICoordinateSystemService),yl=Object(e.inject)(s.a.IRendererService),ic=Object(e.inject)(s.a.ILayerService),Tl=Object(e.inject)(s.a.ICameraService),Bl=Object(e.inject)(s.a.IInteractionService),Vl=Object(e.inject)(s.a.IPickingService),pc=Object(e.inject)(s.a.IShaderModuleService),Xu=Object(e.inject)(s.a.IMarkerService),Al=Object(e.inject)(s.a.IPopupService),Pl(Nl=(Oo=function(pe){gt()(Vt,pe);var ye=eu(Vt);function Vt(){var Xt;return n()(this,Vt),Xt=ye.call(this),Xt.destroyed=!1,Xt.loaded=!1,vn()(Xt,"id",go,xr()(Xt)),vn()(Xt,"iconService",xl,xr()(Xt)),vn()(Xt,"fontService",sl,xr()(Xt)),vn()(Xt,"controlService",Vs,xr()(Xt)),vn()(Xt,"logger",Da,xr()(Xt)),vn()(Xt,"configService",bo,xr()(Xt)),vn()(Xt,"map",Ns,xr()(Xt)),vn()(Xt,"coordinateSystemService",Cl,xr()(Xt)),vn()(Xt,"rendererService",ul,xr()(Xt)),vn()(Xt,"layerService",Ju,xr()(Xt)),vn()(Xt,"cameraService",Sc,xr()(Xt)),vn()(Xt,"interactionService",Wl,xr()(Xt)),vn()(Xt,"pickingService",$u,xr()(Xt)),vn()(Xt,"shaderModuleService",tu,xr()(Xt)),vn()(Xt,"markerService",Ws,xr()(Xt)),vn()(Xt,"popupService",is,xr()(Xt)),Xt.inited=!1,Xt.initPromise=void 0,Xt.rendering=!1,Xt.$container=void 0,Xt.canvas=void 0,Xt.markerContainer=void 0,Xt.hooks=void 0,Xt.handleWindowResized=function(){Xt.emit("resize"),Xt.$container&&(Xt.initContainer(),o.a.triggerResize(),Xt.coordinateSystemService.needRefresh=!0,Xt.render())},Xt.handleMapCameraChanged=function(Ue){Xt.cameraService.update(Ue),Xt.render()},Xt.hooks={init:new vu.a},Xt}return a()(Vt,[{key:"init",value:function(Ue){var un=this;this.configService.setSceneConfig(this.id,Ue),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.fontService.init(),this.hooks.init.tapPromise("initMap",jo()(io.a.mark(function Zn(){return io.a.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return vr.next=2,new Promise(function(ti){un.map.onCameraChanged(function(Ci){un.cameraService.init(),un.cameraService.update(Ci),ti()}),un.map.init()});case 2:un.map.onCameraChanged(un.handleMapCameraChanged),un.map.addMarkerContainer(),un.markerService.addMarkers(),un.markerService.addMarkerLayers(),un.popupService.initPopup(),un.interactionService.init(),un.interactionService.on(xi.a.Drag,un.addSceneEvent.bind(un)),un.logger.debug("map ".concat(un.id," loaded"));case 10:case"end":return vr.stop()}},Zn)}))),this.hooks.init.tapPromise("initRenderer",jo()(io.a.mark(function Zn(){var ir;return io.a.wrap(function(ti){for(;;)switch(ti.prev=ti.next){case 0:if(ir=al(un.configService.getSceneConfig(un.id).id||""),un.$container=ir,!ir){ti.next=11;break}return un.canvas=o.a.create("canvas","",ir),un.setCanvas(),ti.next=7,un.rendererService.init(un.canvas,un.configService.getSceneConfig(un.id));case 7:Zs()(un.$container,un.handleWindowResized),window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)").addListener(un.handleWindowResized),ti.next=12;break;case 11:un.logger.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 12:un.pickingService.init(un.id),un.logger.debug("scene ".concat(un.id," renderer loaded"));case 14:case"end":return ti.stop()}},Zn)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(Ue){this.logger.debug("add layer ".concat(Ue.name," to scene ").concat(this.id)),this.layerService.add(Ue),this.render()}},{key:"render",value:function(){var Xt=jo()(io.a.mark(function un(){return io.a.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(!(this.rendering||this.destroyed)){ir.next=2;break}return ir.abrupt("return");case 2:if(this.rendering=!0,this.inited){ir.next=13;break}return ir.next=6,this.initPromise;case 6:this.destroyed&&this.destroy(),this.logger.info(" render inited"),this.layerService.initLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0;case 13:this.layerService.renderLayers(),this.logger.debug("scene ".concat(this.id," render")),this.rendering=!1;case 16:case"end":return ir.stop()}},un,this)}));function Ue(){return Xt.apply(this,arguments)}return Ue}()},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(Ue){var un,Zn=(un=this.$container)===null||un===void 0?void 0:un.getElementsByTagName("canvas")[0];this.render();var ir=Ue==="jpg"?Zn==null?void 0:Zn.toDataURL("image/jpeg"):Zn==null?void 0:Zn.toDataURL("image/png");return ir}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"addMarkerContainer",value:function(){var Ue=this.$container.parentElement;Ue!==null&&(this.markerContainer=o.a.create("div","l7-marker-container",Ue))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){if(!this.inited){this.destroyed=!0;return}this.emit("destroy"),this.layerService.destroy(),this.rendererService.destroy(),this.map.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.removeAllListeners(),this.inited=!1,Object(pu.unbind)(this.$container,this.handleWindowResized),window.matchMedia("screen and (min-resolution: 2dppx)").removeListener(this.handleWindowResized)}},{key:"initContainer",value:function(){var Ue,un,Zn=o.a.DPR,ir=((Ue=this.$container)===null||Ue===void 0?void 0:Ue.clientWidth)||400,vr=((un=this.$container)===null||un===void 0?void 0:un.clientHeight)||300,ti=this.canvas;ti&&(ti.width=ir*Zn,ti.height=vr*Zn,ti.style.width="".concat(ir,"px"),ti.style.height="".concat(vr,"px")),this.rendererService.viewport({x:0,y:0,width:Zn*ir,height:Zn*vr})}},{key:"setCanvas",value:function(){var Ue,un,Zn=o.a.DPR,ir=((Ue=this.$container)===null||Ue===void 0?void 0:Ue.clientWidth)||400,vr=((un=this.$container)===null||un===void 0?void 0:un.clientHeight)||300,ti=this.canvas;ti.width=ir*Zn,ti.height=vr*Zn,ti.style.width="".concat(ir,"px"),ti.style.height="".concat(vr,"px")}},{key:"addSceneEvent",value:function(Ue){this.emit(Ue.type,Ue)}}]),Vt}(E.EventEmitter),go=or()(Oo.prototype,"id",[jl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xl=or()(Oo.prototype,"iconService",[Nu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sl=or()(Oo.prototype,"fontService",[Zu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vs=or()(Oo.prototype,"controlService",[ol],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Da=or()(Oo.prototype,"logger",[gu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bo=or()(Oo.prototype,"configService",[au],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ns=or()(Oo.prototype,"map",[Ku],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cl=or()(Oo.prototype,"coordinateSystemService",[Ls],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ul=or()(Oo.prototype,"rendererService",[yl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ju=or()(Oo.prototype,"layerService",[ic],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sc=or()(Oo.prototype,"cameraService",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wl=or()(Oo.prototype,"interactionService",[Bl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$u=or()(Oo.prototype,"pickingService",[Vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tu=or()(Oo.prototype,"shaderModuleService",[pc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ws=or()(Oo.prototype,"markerService",[Xu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),is=or()(Oo.prototype,"popupService",[Al],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oo))||Nl),Wi=R("7tbW"),js=R.n(Wi);function Qu(pe){var ye=0;switch(pe){case"vec2":case"ivec2":ye=2;break;case"vec3":case"ivec3":ye=3;break;case"vec4":case"ivec4":case"mat2":ye=4;break;case"mat3":ye=9;break;case"mat4":ye=16;break;default:}return ye}var zu=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Uo(pe){var ye={};return pe=pe.replace(zu,function(Vt,Xt,Ue){var un=Ue.split(":"),Zn=un[0].trim(),ir="";switch(un.length>1&&(ir=un[1].trim()),Xt){case"bool":ir=ir==="true";break;case"float":case"int":ir=Number(ir);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":ir?ir=ir.replace("[","").replace("]","").split(",").reduce(function(vr,ti){return vr.push(Number(ti.trim())),vr},[]):ir=new Array(Qu(Xt)).fill(0);break;default:}return ye[Zn]=ir,"uniform ".concat(Xt," ").concat(Zn,`;
`)}),{content:pe,uniforms:ye}}var Wo,mu;function _i(pe,ye){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(pe);ye&&(Xt=Xt.filter(function(Ue){return Object.getOwnPropertyDescriptor(pe,Ue).enumerable})),Vt.push.apply(Vt,Xt)}return Vt}function yu(pe){for(var ye=1;ye<arguments.length;ye++){var Vt=arguments[ye]!=null?arguments[ye]:{};ye%2?_i(Object(Vt),!0).forEach(function(Xt){r()(pe,Xt,Vt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):_i(Object(Vt)).forEach(function(Xt){Object.defineProperty(pe,Xt,Object.getOwnPropertyDescriptor(Vt,Xt))})}return pe}var Cu="#define PI 3.14159265359",Ou=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,Ks=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,we=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,Pe=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,hn=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,tn=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}
`,On=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0
#define COORDINATE_SYSTEM_P20_OFFSET 6.0
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

uniform mat4 u_ViewMatrix;
uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewProjectionMatrix;
uniform float u_Zoom : 1;
uniform float u_ZoomScale : 1;

uniform float u_CoordinateSystem;
uniform vec2 u_ViewportCenter;
uniform vec4 u_ViewportCenterProjection;
uniform vec3 u_PixelsPerDegree;
uniform vec3 u_PixelsPerDegree2;
uniform vec3 u_PixelsPerMeter;

uniform vec2 u_ViewportSize;
uniform float u_DevicePixelRatio;
uniform float u_FocalDistance;
uniform vec3 u_CameraPosition;

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }
  return vector;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  return pixel;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  return pixel * -1.;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }
  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}

`,hr=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,Rr=/precision\s+(high|low|medium)p\s+float/,Xr=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,ni=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,zr=(Wo=Object(e.injectable)(),Wo(mu=function(){function pe(){n()(this,pe),this.moduleCache={},this.rawContentCache={}}return a()(pe,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:Cu,fs:Cu}),this.registerModule("decode",{vs:Ou,fs:""}),this.registerModule("projection",{vs:On,fs:""}),this.registerModule("project",{vs:tn,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:hr}),this.registerModule("lighting",{vs:we,fs:""}),this.registerModule("light",{vs:Ks,fs:""}),this.registerModule("picking",{vs:hn,fs:Pe})}},{key:"registerModule",value:function(Vt,Xt){if(!this.rawContentCache[Vt]){var Ue=Xt.vs,un=Xt.fs,Zn=Xt.uniforms,ir=Uo(Ue),vr=ir.content,ti=ir.uniforms,Ci=Uo(un),Ji=Ci.content,ua=Ci.uniforms;this.rawContentCache[Vt]={fs:Ji,uniforms:yu(yu(yu({},ti),ua),Zn),vs:vr}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(Vt){var Xt=this;if(this.moduleCache[Vt])return this.moduleCache[Vt];var Ue=this.rawContentCache[Vt].vs,un=this.rawContentCache[Vt].fs,Zn=this.processModule(Ue,[],"vs"),ir=Zn.content,vr=Zn.includeList,ti=this.processModule(un,[],"fs"),Ci=ti.content,Ji=ti.includeList,ua=Ci,la=js()(vr.concat(Ji).concat(Vt)).reduce(function(qa,Xa){return yu(yu({},qa),Xt.rawContentCache[Xa].uniforms)},{});return Rr.test(Ci)||(ua=Xr+Ci),this.moduleCache[Vt]={fs:ua.trim(),uniforms:la,vs:ir.trim()},this.moduleCache[Vt]}},{key:"processModule",value:function(Vt,Xt,Ue){var un=this,Zn=Vt.replace(ni,function(ir,vr){var ti=vr.split(" "),Ci=ti[0].replace(/"/g,"");if(Xt.indexOf(Ci)>-1)return"";var Ji=un.rawContentCache[Ci][Ue];Xt.push(Ci);var ua=un.processModule(Ji,Xt,Ue),la=ua.content;return la});return{content:Zn,includeList:Xt}}}]),pe}())||mu),li=R("iWIM"),yr=R.n(li),Kt=R("bPkA"),te,Le,Se,Dt,zt,oe=(te=Object(e.injectable)(),Le=Object(e.inject)(s.a.IShaderModuleService),te(Se=(Dt=function(){function pe(){n()(this,pe),vn()(this,"shaderModuleService",zt,this),this.rendererService=void 0,this.cameraService=void 0,this.mapService=void 0,this.interactionService=void 0,this.layerService=void 0,this.config=void 0}return a()(pe,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return Kt.a.Normal}},{key:"init",value:function(Vt,Xt){this.config=Xt,this.rendererService=Vt.getContainer().get(s.a.IRendererService),this.cameraService=Vt.getContainer().get(s.a.ICameraService),this.mapService=Vt.getContainer().get(s.a.IMapService),this.interactionService=Vt.getContainer().get(s.a.IInteractionService),this.layerService=Vt.getContainer().get(s.a.ILayerService)}},{key:"render",value:function(Vt){}}]),pe}(),zt=or()(Dt.prototype,"shaderModuleService",[Le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dt))||Se),ne,he;function Fe(pe){var ye=Ze();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function Ze(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var nn=(ne=Object(e.injectable)(),ne(he=function(pe){gt()(Vt,pe);var ye=Fe(Vt);function Vt(){return n()(this,Vt),ye.apply(this,arguments)}return a()(Vt,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(Ue,un){yr()(k()(Vt.prototype),"init",this).call(this,Ue,un)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),Vt}(oe))||he),Je,pn,fn,Hn,Un;function Vn(pe,ye){var Vt=typeof Symbol!="undefined"&&pe[Symbol.iterator]||pe["@@iterator"];if(!Vt){if(Array.isArray(pe)||(Vt=Gn(pe))||ye&&pe&&typeof pe.length=="number"){Vt&&(pe=Vt);var Xt=0,Ue=function(){};return{s:Ue,n:function(){return Xt>=pe.length?{done:!0}:{done:!1,value:pe[Xt++]}},e:function(ti){throw ti},f:Ue}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Zn=!1,ir;return{s:function(){Vt=Vt.call(pe)},n:function(){var ti=Vt.next();return un=ti.done,ti},e:function(ti){Zn=!0,ir=ti},f:function(){try{!un&&Vt.return!=null&&Vt.return()}finally{if(Zn)throw ir}}}}function Gn(pe,ye){if(!!pe){if(typeof pe=="string")return dr(pe,ye);var Vt=Object.prototype.toString.call(pe).slice(8,-1);if(Vt==="Object"&&pe.constructor&&(Vt=pe.constructor.name),Vt==="Map"||Vt==="Set")return Array.from(pe);if(Vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Vt))return dr(pe,ye)}}function dr(pe,ye){(ye==null||ye>pe.length)&&(ye=pe.length);for(var Vt=0,Xt=new Array(ye);Vt<ye;Vt++)Xt[Vt]=pe[Vt];return Xt}var br=(Je=Object(e.injectable)(),pn=Object(e.inject)(s.a.IPostProcessor),Je(fn=(Hn=function(){function pe(){n()(this,pe),this.passes=[],vn()(this,"postProcessor",Un,this),this.layer=void 0,this.renderFlag=void 0,this.width=0,this.height=0}return a()(pe,[{key:"setLayer",value:function(Vt){this.layer=Vt}},{key:"setRenderFlag",value:function(Vt){this.renderFlag=Vt}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var ye=jo()(io.a.mark(function Xt(){var Ue,un,Zn;return io.a.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:Ue=Vn(this.passes),vr.prev=1,Ue.s();case 3:if((un=Ue.n()).done){vr.next=9;break}return Zn=un.value,vr.next=7,Zn.render(this.layer);case 7:vr.next=3;break;case 9:vr.next=14;break;case 11:vr.prev=11,vr.t0=vr.catch(1),Ue.e(vr.t0);case 14:return vr.prev=14,Ue.f(),vr.finish(14);case 17:this.layer.renderModels();case 18:case"end":return vr.stop()}},Xt,this,[[1,11,14,17]])}));function Vt(){return ye.apply(this,arguments)}return Vt}()},{key:"resize",value:function(Vt,Xt){(this.width!==Vt||this.height!==Xt)&&(this.width=Vt,this.height=Xt)}},{key:"add",value:function(Vt,Xt){Vt.getType()===Kt.a.PostProcessing?this.postProcessor.add(Vt,this.layer,Xt):(Vt.init(this.layer,Xt),this.passes.push(Vt))}},{key:"insert",value:function(Vt,Xt,Ue){Vt.init(this.layer,Xt),this.passes.splice(Ue,0,Vt)}},{key:"destroy",value:function(){this.passes.length=0}}]),pe}(),Un=or()(Hn.prototype,"postProcessor",[pn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hn))||fn),Kr,mi,jr,oi,fi;function Hi(pe,ye){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(pe);ye&&(Xt=Xt.filter(function(Ue){return Object.getOwnPropertyDescriptor(pe,Ue).enumerable})),Vt.push.apply(Vt,Xt)}return Vt}function Di(pe){for(var ye=1;ye<arguments.length;ye++){var Vt=arguments[ye]!=null?arguments[ye]:{};ye%2?Hi(Object(Vt),!0).forEach(function(Xt){r()(pe,Xt,Vt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):Hi(Object(Vt)).forEach(function(Xt){Object.defineProperty(pe,Xt,Object.getOwnPropertyDescriptor(Vt,Xt))})}return pe}function Ma(pe){var ye=xa();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function xa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var Pa=(Kr=Object(e.injectable)(),mi=Object(e.inject)(s.a.ILogService),Kr(jr=(oi=function(pe){gt()(Vt,pe);var ye=Ma(Vt);function Vt(){var Xt;n()(this,Vt);for(var Ue=arguments.length,un=new Array(Ue),Zn=0;Zn<Ue;Zn++)un[Zn]=arguments[Zn];return Xt=ye.call.apply(ye,[this].concat(un)),vn()(Xt,"logger",fi,xr()(Xt)),Xt.pickingFBO=void 0,Xt.layer=void 0,Xt.width=0,Xt.height=0,Xt.alreadyInRendering=!1,Xt.pickFromPickingFBO=function(ir){var vr=ir.x,ti=ir.y,Ci=ir.lngLat,Ji=ir.type;if(!(!Xt.layer.isVisible()||!Xt.layer.needPick(Ji))){var ua=Xt.rendererService,la=ua.getViewportSize,qa=ua.readPixels,Xa=ua.useFramebuffer,Ho=la(),wo=Ho.width,Su=Ho.height,Xs=Xt.layer.getLayerConfig(),ku=Xs.enableHighlight,hu=Xs.enableSelect,Gu=vr*o.a.DPR,Zo=ti*o.a.DPR;if(!(Gu>wo||Gu<0||Zo>Su||Zo<0)){var lo;Xa(Xt.pickingFBO,function(){var Bs;if(lo=qa({x:Math.round(Gu),y:Math.round(Su-(ti+1)*o.a.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:Xt.pickingFBO}),lo[0]!==0||lo[1]!==0||lo[2]!==0){Xt.logger.debug("picked");var _u=Object(o.k)(lo),Sl=Xt.layer.getSource().getFeatureById(_u),Yl={x:vr,y:ti,type:Ji,lngLat:Ci,featureId:_u,feature:Sl};Sl&&(Xt.layer.setCurrentPickId(_u),Xt.triggerHoverOnLayer(Yl))}else{var Mc={x:vr,y:ti,lngLat:Ci,type:Xt.layer.getCurrentPickId()===null?"un"+Ji:"mouseout",featureId:null,feature:null};Xt.triggerHoverOnLayer(Di(Di({},Mc),{},{type:"unpick"})),Xt.triggerHoverOnLayer(Mc),Xt.layer.setCurrentPickId(null)}ku&&Xt.highlightPickedFeature(lo),hu&&Ji==="click"&&((Bs=lo)===null||Bs===void 0?void 0:Bs.toString())!==[0,0,0,0].toString()&&Xt.selectFeature(lo)})}}},Xt}return a()(Vt,[{key:"getType",value:function(){return Kt.a.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(Ue,un){yr()(k()(Vt.prototype),"init",this).call(this,Ue,un),this.layer=Ue;var Zn=this.rendererService,ir=Zn.createTexture2D,vr=Zn.createFramebuffer,ti=Zn.getViewportSize,Ci=ti(),Ji=Ci.width,ua=Ci.height;this.pickingFBO=vr({color:ir({width:Ji,height:ua,wrapS:so.a.CLAMP_TO_EDGE,wrapT:so.a.CLAMP_TO_EDGE})}),this.interactionService.on(xi.a.Hover,this.pickFromPickingFBO),this.interactionService.on(xi.a.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(xi.a.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(Ue){var un=this;if(!this.alreadyInRendering){var Zn=this.rendererService,ir=Zn.getViewportSize,vr=Zn.useFramebuffer,ti=Zn.clear,Ci=ir(),Ji=Ci.width,ua=Ci.height;this.alreadyInRendering=!0,(this.width!==Ji||this.height!==ua)&&(this.pickingFBO.resize({width:Ji,height:ua}),this.width=Ji,this.height=ua),vr(this.pickingFBO,function(){ti({framebuffer:un.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var la=un.layer.multiPassRenderer.getRenderFlag();un.layer.multiPassRenderer.setRenderFlag(!1),Ue.hooks.beforePickingEncode.call(),Ue.render(),Ue.hooks.afterPickingEncode.call(),un.layer.multiPassRenderer.setRenderFlag(la),un.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(Ue){this.layer.emit(Ue.type,Ue)}},{key:"highlightPickedFeature",value:function(Ue){var un=Ht()(Ue,3),Zn=un[0],ir=un[1],vr=un[2];this.layer.hooks.beforeHighlight.call([Zn,ir,vr]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(Ue){var un=Ht()(Ue,3),Zn=un[0],ir=un[1],vr=un[2];this.layer.hooks.beforeSelect.call([Zn,ir,vr]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(Ue){var un=Ue.featureId,Zn=Object(o.l)(un);this.selectFeature(new Uint8Array(Zn))}},{key:"highlightFeatureHandle",value:function(Ue){var un=Ue.featureId,Zn=Object(o.l)(un);this.highlightPickedFeature(new Uint8Array(Zn))}}]),Vt}(oe),fi=or()(oi.prototype,"logger",[mi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oi))||jr),ei=R("+em5"),Ea,Ga;function Ha(pe,ye){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(pe);ye&&(Xt=Xt.filter(function(Ue){return Object.getOwnPropertyDescriptor(pe,Ue).enumerable})),Vt.push.apply(Vt,Xt)}return Vt}function Li(pe){for(var ye=1;ye<arguments.length;ye++){var Vt=arguments[ye]!=null?arguments[ye]:{};ye%2?Ha(Object(Vt),!0).forEach(function(Xt){r()(pe,Xt,Vt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):Ha(Object(Vt)).forEach(function(Xt){Object.defineProperty(pe,Xt,Object.getOwnPropertyDescriptor(Vt,Xt))})}return pe}function Ia(pe){var ye=Eo();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function Eo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var Hs=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Fs=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ol=(Ea=Object(e.injectable)(),Ea(Ga=function(pe){gt()(Vt,pe);var ye=Ia(Vt);function Vt(){return n()(this,Vt),ye.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Fs,fs:Hs});var Ue=this.shaderModuleService.getModule("blur-pass"),un=Ue.vs,Zn=Ue.fs,ir=Ue.uniforms,vr=this.rendererService.getViewportSize(),ti=vr.width,Ci=vr.height;return{vs:un,fs:Zn,uniforms:Li(Li({},ir),{},{u_ViewportSize:[ti,Ci]})}}},{key:"convertOptionsToUniforms",value:function(Ue){var un={};return ss()(Ue.blurRadius)||(un.u_BlurDir=[Ue.blurRadius,0]),un}}]),Vt}(ei.a))||Ga),xu,j;function I(pe,ye){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(pe);ye&&(Xt=Xt.filter(function(Ue){return Object.getOwnPropertyDescriptor(pe,Ue).enumerable})),Vt.push.apply(Vt,Xt)}return Vt}function w(pe){for(var ye=1;ye<arguments.length;ye++){var Vt=arguments[ye]!=null?arguments[ye]:{};ye%2?I(Object(Vt),!0).forEach(function(Xt){r()(pe,Xt,Vt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):I(Object(Vt)).forEach(function(Xt){Object.defineProperty(pe,Xt,Object.getOwnPropertyDescriptor(Vt,Xt))})}return pe}function B(pe){var ye=D();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function D(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var W=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,tt=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,st=(xu=Object(e.injectable)(),xu(j=function(pe){gt()(Vt,pe);var ye=B(Vt);function Vt(){return n()(this,Vt),ye.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:tt,fs:W});var Ue=this.shaderModuleService.getModule("blur-pass"),un=Ue.vs,Zn=Ue.fs,ir=Ue.uniforms,vr=this.rendererService.getViewportSize(),ti=vr.width,Ci=vr.height;return{vs:un,fs:Zn,uniforms:w(w({},ir),{},{u_ViewportSize:[ti,Ci]})}}},{key:"convertOptionsToUniforms",value:function(Ue){var un={};return ss()(Ue.blurRadius)||(un.u_BlurDir=[0,Ue.blurRadius]),un}}]),Vt}(ei.a))||j),Ct,It;function Ut(pe,ye){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(pe);ye&&(Xt=Xt.filter(function(Ue){return Object.getOwnPropertyDescriptor(pe,Ue).enumerable})),Vt.push.apply(Vt,Xt)}return Vt}function Zt(pe){for(var ye=1;ye<arguments.length;ye++){var Vt=arguments[ye]!=null?arguments[ye]:{};ye%2?Ut(Object(Vt),!0).forEach(function(Xt){r()(pe,Xt,Vt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):Ut(Object(Vt)).forEach(function(Xt){Object.defineProperty(pe,Xt,Object.getOwnPropertyDescriptor(Vt,Xt))})}return pe}function qt(pe){var ye=de();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function de(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var me=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,je=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Oe=(Ct=Object(e.injectable)(),Ct(It=function(pe){gt()(Vt,pe);var ye=qt(Vt);function Vt(){return n()(this,Vt),ye.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:je,fs:me});var Ue=this.shaderModuleService.getModule("colorhalftone-pass"),un=Ue.vs,Zn=Ue.fs,ir=Ue.uniforms,vr=this.rendererService.getViewportSize(),ti=vr.width,Ci=vr.height;return{vs:un,fs:Zn,uniforms:Zt(Zt({},ir),{},{u_ViewportSize:[ti,Ci]})}}}]),Vt}(ei.a))||It),ke,qe;function an(pe){var ye=Xn();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function Xn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var kn=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,fr=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Mr=(ke=Object(e.injectable)(),ke(qe=function(pe){gt()(Vt,pe);var ye=an(Vt);function Vt(){return n()(this,Vt),ye.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:fr,fs:kn}),this.shaderModuleService.getModule("copy-pass")}}]),Vt}(ei.a))||qe),Qr,Zr;function Pi(pe,ye){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(pe);ye&&(Xt=Xt.filter(function(Ue){return Object.getOwnPropertyDescriptor(pe,Ue).enumerable})),Vt.push.apply(Vt,Xt)}return Vt}function Ri(pe){for(var ye=1;ye<arguments.length;ye++){var Vt=arguments[ye]!=null?arguments[ye]:{};ye%2?Pi(Object(Vt),!0).forEach(function(Xt){r()(pe,Xt,Vt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):Pi(Object(Vt)).forEach(function(Xt){Object.defineProperty(pe,Xt,Object.getOwnPropertyDescriptor(Vt,Xt))})}return pe}function Ki(pe){var ye=Xi();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function Xi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var Oa=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,ja=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ki=(Qr=Object(e.injectable)(),Qr(Zr=function(pe){gt()(Vt,pe);var ye=Ki(Vt);function Vt(){return n()(this,Vt),ye.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:ja,fs:Oa});var Ue=this.shaderModuleService.getModule("hexagonalpixelate-pass"),un=Ue.vs,Zn=Ue.fs,ir=Ue.uniforms,vr=this.rendererService.getViewportSize(),ti=vr.width,Ci=vr.height;return{vs:un,fs:Zn,uniforms:Ri(Ri({},ir),{},{u_ViewportSize:[ti,Ci]})}}}]),Vt}(ei.a))||Zr),Sa,ga;function Yi(pe,ye){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(pe);ye&&(Xt=Xt.filter(function(Ue){return Object.getOwnPropertyDescriptor(pe,Ue).enumerable})),Vt.push.apply(Vt,Xt)}return Vt}function _a(pe){for(var ye=1;ye<arguments.length;ye++){var Vt=arguments[ye]!=null?arguments[ye]:{};ye%2?Yi(Object(Vt),!0).forEach(function(Xt){r()(pe,Xt,Vt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):Yi(Object(Vt)).forEach(function(Xt){Object.defineProperty(pe,Xt,Object.getOwnPropertyDescriptor(Vt,Xt))})}return pe}function ra(pe){var ye=La();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function La(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var za=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Ps=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ls=(Sa=Object(e.injectable)(),Sa(ga=function(pe){gt()(Vt,pe);var ye=ra(Vt);function Vt(){return n()(this,Vt),ye.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:Ps,fs:za});var Ue=this.shaderModuleService.getModule("ink-pass"),un=Ue.vs,Zn=Ue.fs,ir=Ue.uniforms,vr=this.rendererService.getViewportSize(),ti=vr.width,Ci=vr.height;return{vs:un,fs:Zn,uniforms:_a(_a({},ir),{},{u_ViewportSize:[ti,Ci]})}}}]),Vt}(ei.a))||ga),Ts,ms;function nu(pe){var ye=Uu();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function Uu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var qu=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,_c=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ic=(Ts=Object(e.injectable)(),Ts(ms=function(pe){gt()(Vt,pe);var ye=nu(Vt);function Vt(){return n()(this,Vt),ye.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:_c,fs:qu}),this.shaderModuleService.getModule("noise-pass")}}]),Vt}(ei.a))||ms),wl,ac;function Gc(pe){var ye=ef();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function ef(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var Bc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Hc=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,nf=(wl=Object(e.injectable)(),wl(ac=function(pe){gt()(Vt,pe);var ye=Gc(Vt);function Vt(){return n()(this,Vt),ye.apply(this,arguments)}return a()(Vt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:Bc,fs:Hc}),this.shaderModuleService.getModule("sepia-pass")}}]),Vt}(ei.a))||ac),Cc,Yc,gc,lu,cu,Hl,ou=(Cc=Object(e.injectable)(),Yc=Object(e.inject)(s.a.IRendererService),gc=Object(e.postConstruct)(),Cc(lu=(cu=function(){function pe(){n()(this,pe),vn()(this,"rendererService",Hl,this),this.passes=[],this.readFBO=void 0,this.writeFBO=void 0}return a()(pe,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"render",value:function(){var ye=jo()(io.a.mark(function Xt(Ue){var un,Zn;return io.a.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:un=0;case 1:if(!(un<this.passes.length)){vr.next=10;break}return Zn=this.passes[un],Zn.setRenderToScreen(this.isLastEnabledPass(un)),vr.next=6,Zn.render(Ue);case 6:un!==this.passes.length-1&&this.swap();case 7:un++,vr.next=1;break;case 10:case"end":return vr.stop()}},Xt,this)}));function Vt(Xt){return ye.apply(this,arguments)}return Vt}()},{key:"resize",value:function(Vt,Xt){this.readFBO.resize({width:Vt,height:Xt}),this.writeFBO.resize({width:Vt,height:Xt})}},{key:"add",value:function(Vt,Xt,Ue){Vt.init(Xt,Ue),this.passes.push(Vt)}},{key:"insert",value:function(Vt,Xt,Ue,un){Vt.init(Ue,un),this.passes.splice(Xt,0,Vt)}},{key:"getPostProcessingPassByName",value:function(Vt){return this.passes.find(function(Xt){return Xt.getName()===Vt})}},{key:"init",value:function(){}},{key:"isLastEnabledPass",value:function(Vt){for(var Xt=Vt+1;Xt<this.passes.length;Xt++)if(this.passes[Xt].isEnabled())return!1;return!0}},{key:"swap",value:function(){var Vt=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=Vt}}]),pe}(),Hl=or()(cu.prototype,"rendererService",[Yc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),or()(cu.prototype,"init",[gc],Object.getOwnPropertyDescriptor(cu.prototype,"init"),cu.prototype),cu))||lu),fu,bu;function Eu(pe){var ye=Fl();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function Fl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var ll=(fu=Object(e.injectable)(),fu(bu=function(pe){gt()(Vt,pe);var ye=Eu(Vt);function Vt(){return n()(this,Vt),ye.apply(this,arguments)}return a()(Vt,[{key:"getType",value:function(){return Kt.a.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(Ue,un){yr()(k()(Vt.prototype),"init",this).call(this,Ue,un)}},{key:"render",value:function(Ue){var un=this.rendererService,Zn=un.useFramebuffer,ir=un.clear;Zn(null,function(){ir({color:[0,0,0,0],depth:1,stencil:0}),Ue.multiPassRenderer.setRenderFlag(!1),Ue.render(),Ue.multiPassRenderer.setRenderFlag(!0)})}}]),Vt}(oe))||bu),Jl,Nc,Zc,Fc,bl,rf,zc;function oc(pe,ye){var Vt=Object.keys(pe);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(pe);ye&&(Xt=Xt.filter(function(Ue){return Object.getOwnPropertyDescriptor(pe,Ue).enumerable})),Vt.push.apply(Vt,Xt)}return Vt}function El(pe){for(var ye=1;ye<arguments.length;ye++){var Vt=arguments[ye]!=null?arguments[ye]:{};ye%2?oc(Object(Vt),!0).forEach(function(Xt){r()(pe,Xt,Vt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(Vt)):oc(Object(Vt)).forEach(function(Xt){Object.defineProperty(pe,Xt,Object.getOwnPropertyDescriptor(Vt,Xt))})}return pe}function ph(pe){var ye=Cf();return function(){var Xt=k()(pe),Ue;if(ye){var un=k()(this).constructor;Ue=Reflect.construct(Xt,arguments,un)}else Ue=Xt.apply(this,arguments);return at()(this,Ue)}}function Cf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pe){return!1}}var vf=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,Kc=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Of=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function cf(pe,ye){for(var Vt=0,Xt=1/ye,Ue=pe;Ue>0;)Vt=Vt+Xt*(Ue%ye),Ue=Math.floor(Ue/ye),Xt=Xt/ye;return Vt}var Xc=1,Gf=(Jl=Object(e.injectable)(),Nc=Object(e.inject)(s.a.IShaderModuleService),Zc=Object(e.inject)(s.a.ILogService),Jl(Fc=(bl=function(pe){gt()(Vt,pe);var ye=ph(Vt);function Vt(){var Xt;n()(this,Vt);for(var Ue=arguments.length,un=new Array(Ue),Zn=0;Zn<Ue;Zn++)un[Zn]=arguments[Zn];return Xt=ye.call.apply(ye,[this].concat(un)),vn()(Xt,"shaderModuleService",rf,xr()(Xt)),vn()(Xt,"logger",zc,xr()(Xt)),Xt.haltonSequence=[],Xt.accumulatingId=0,Xt.frame=0,Xt.timer=void 0,Xt.sampleRenderTarget=void 0,Xt.prevRenderTarget=void 0,Xt.outputRenderTarget=void 0,Xt.copyRenderTarget=void 0,Xt.blendModel=void 0,Xt.outputModel=void 0,Xt.copyModel=void 0,Xt}return a()(Vt,[{key:"getType",value:function(){return Kt.a.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(Ue,un){yr()(k()(Vt.prototype),"init",this).call(this,Ue,un);var Zn=this.rendererService,ir=Zn.createFramebuffer,vr=Zn.createTexture2D;this.sampleRenderTarget=ir({color:vr({width:1,height:1,wrapS:so.a.CLAMP_TO_EDGE,wrapT:so.a.CLAMP_TO_EDGE})}),this.prevRenderTarget=ir({color:vr({width:1,height:1,wrapS:so.a.CLAMP_TO_EDGE,wrapT:so.a.CLAMP_TO_EDGE})}),this.outputRenderTarget=ir({color:vr({width:1,height:1,wrapS:so.a.CLAMP_TO_EDGE,wrapT:so.a.CLAMP_TO_EDGE})}),this.copyRenderTarget=ir({color:vr({width:1,height:1,wrapS:so.a.CLAMP_TO_EDGE,wrapT:so.a.CLAMP_TO_EDGE})});for(var ti=0;ti<30;ti++)this.haltonSequence.push([cf(ti,2),cf(ti,3)]);this.blendModel=this.createTriangleModel("blend-pass",vf),this.outputModel=this.createTriangleModel("copy-pass",Kc,{blend:{enable:!0,func:{srcRGB:so.a.ONE,dstRGB:so.a.ONE_MINUS_SRC_ALPHA,srcAlpha:so.a.ONE,dstAlpha:so.a.ONE_MINUS_SRC_ALPHA},equation:{rgb:so.a.FUNC_ADD,alpha:so.a.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",Kc)}},{key:"render",value:function(Ue){var un=this,Zn=this.rendererService,ir=Zn.clear,vr=Zn.getViewportSize,ti=Zn.useFramebuffer,Ci=vr(),Ji=Ci.width,ua=Ci.height;this.sampleRenderTarget.resize({width:Ji,height:ua}),this.prevRenderTarget.resize({width:Ji,height:ua}),this.outputRenderTarget.resize({width:Ji,height:ua}),this.copyRenderTarget.resize({width:Ji,height:ua}),this.resetFrame(),this.stopAccumulating();var la=Ue.multiPassRenderer.getPostProcessor().getReadFBO();ti(la,function(){ir({color:[0,0,0,0],depth:1,stencil:0,framebuffer:la}),Ue.multiPassRenderer.setRenderFlag(!1),Ue.render(),Ue.multiPassRenderer.setRenderFlag(!0)});var qa=function Xa(Ho){!un.accumulatingId||Ho!==un.accumulatingId||un.isFinished()||(un.doRender(Ue),requestAnimationFrame(function(){Xa(Ho)}))};this.accumulatingId=Xc++,this.timer=window.setTimeout(function(){qa(un.accumulatingId)},50)}},{key:"doRender",value:function(Ue){var un=this;this.logger.debug("accumulatingId: ".concat(this.accumulatingId));var Zn=this.rendererService,ir=Zn.clear,vr=Zn.getViewportSize,ti=Zn.useFramebuffer,Ci=vr(),Ji=Ci.width,ua=Ci.height,la=Ue.getLayerConfig(),qa=la.jitterScale,Xa=qa===void 0?1:qa,Ho=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((Ho[0]*2-1)/Ji*Xa,(Ho[1]*2-1)/ua*Xa),Ue.multiPassRenderer.setRenderFlag(!1),Ue.hooks.beforeRender.call(),ti(this.sampleRenderTarget,function(){ir({color:[0,0,0,0],depth:1,stencil:0,framebuffer:un.sampleRenderTarget}),Ue.render()}),Ue.hooks.afterRender.call(),Ue.multiPassRenderer.setRenderFlag(!0);var wo=Ue.getLayerConfig();ti(this.outputRenderTarget,function(){un.blendModel.draw({uniforms:{u_opacity:wo.opacity||1,u_MixRatio:un.frame===0?1:.9,u_Diffuse1:un.sampleRenderTarget,u_Diffuse2:un.frame===0?Ue.multiPassRenderer.getPostProcessor().getReadFBO():un.prevRenderTarget}})}),this.frame===0&&ir({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(ti(this.copyRenderTarget,function(){un.outputModel.draw({uniforms:{u_Texture:un.outputRenderTarget}})}),ti(Ue.multiPassRenderer.getPostProcessor().getReadFBO(),function(){un.copyModel.draw({uniforms:{u_Texture:un.copyRenderTarget}})}),Ue.multiPassRenderer.getPostProcessor().render(Ue));var Su=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=Su,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(Ue,un,Zn){this.shaderModuleService.registerModule(Ue,{vs:Of,fs:un});var ir=this.shaderModuleService.getModule(Ue),vr=ir.vs,ti=ir.fs,Ci=ir.uniforms,Ji=this.rendererService,ua=Ji.createAttribute,la=Ji.createBuffer,qa=Ji.createModel;return qa(El({vs:vr,fs:ti,attributes:{a_Position:ua({buffer:la({data:[-4,-4,4,-4,0,4],type:so.a.FLOAT}),size:2})},uniforms:El({},Ci),depth:{enable:!1},count:3},Zn))}}]),Vt}(oe),rf=or()(bl.prototype,"shaderModuleService",[Nc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zc=or()(bl.prototype,"logger",[Zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bl))||Fc),Jc=new e.Container;Jc.bind(s.a.IGlobalConfigService).to(tr).inSingletonScope(),Jc.bind(s.a.IShaderModuleService).to(zr).inSingletonScope(),Jc.bind(s.a.ILogService).to(Bu).inSingletonScope(),Object(e.decorate)(Object(e.injectable)(),E.EventEmitter),Jc.bind(s.a.IEventEmitter).to(E.EventEmitter);var af=u()(Jc,!1),Vc=function(ye){var Vt=af.lazyInject(ye);return function(Xt,Ue,un){Vt.call(this,Xt,Ue),un&&(un.initializer=function(){return Xt[Ue]})}},Ef=function(ye){var Vt=af.lazyMultiInject(ye);return function(Xt,Ue,un){Vt.call(this,Xt,Ue),un&&(un.initializer=function(){return Xt[Ue]})}},gh=dt.c=Jc,Sf=0;function Vf(){var pe=new e.Container;return pe.parent=Jc,pe.bind(s.a.SceneID).toConstantValue("".concat(Sf++)),pe.bind(s.a.ILayerService).to(hs).inSingletonScope(),pe.bind(s.a.ISceneService).to(us).inSingletonScope(),pe.bind(s.a.ICameraService).to(Ce).inSingletonScope(),pe.bind(s.a.ICoordinateSystemService).to(Wn).inSingletonScope(),pe.bind(s.a.IInteractionService).to(Ra).inSingletonScope(),pe.bind(s.a.IPickingService).to(sa).inSingletonScope(),pe.bind(s.a.IControlService).to(on).inSingletonScope(),pe.bind(s.a.IMarkerService).to(Bn).inSingletonScope(),pe.bind(s.a.IIconService).to(ee).inSingletonScope(),pe.bind(s.a.IFontService).to(z).inSingletonScope(),pe.bind(s.a.IPopupService).to(Ae).inSingletonScope(),pe.bind(s.a.INormalPass).to(nn).whenTargetNamed("clear"),pe.bind(s.a.INormalPass).to(Pa).whenTargetNamed("pixelPicking"),pe.bind(s.a.INormalPass).to(ll).whenTargetNamed("render"),pe.bind(s.a.INormalPass).to(Gf).whenTargetNamed("taa"),pe.bind(s.a.IFactoryNormalPass).toFactory(function(ye){return function(Vt){return ye.container.getNamed(s.a.INormalPass,Vt)}}),pe.bind(s.a.IPostProcessingPass).to(Mr).whenTargetNamed("copy"),pe.bind(s.a.IPostProcessingPass).to(Ol).whenTargetNamed("blurH"),pe.bind(s.a.IPostProcessingPass).to(st).whenTargetNamed("blurV"),pe.bind(s.a.IPostProcessingPass).to(Ic).whenTargetNamed("noise"),pe.bind(s.a.IPostProcessingPass).to(nf).whenTargetNamed("sepia"),pe.bind(s.a.IPostProcessingPass).to(Oe).whenTargetNamed("colorHalftone"),pe.bind(s.a.IPostProcessingPass).to(ki).whenTargetNamed("hexagonalPixelate"),pe.bind(s.a.IPostProcessingPass).to(ls).whenTargetNamed("ink"),pe.bind(s.a.IFactoryPostProcessingPass).toFactory(function(ye){return function(Vt){var Xt=ye.container.getNamed(s.a.IPostProcessingPass,Vt);return Xt.setName(Vt),Xt}}),pe}function Qf(pe){var ye=new e.Container;return ye.parent=pe,ye.bind(s.a.IStyleAttributeService).to(Es).inSingletonScope(),ye.bind(s.a.IMultiPassRenderer).to(br).inSingletonScope(),ye.bind(s.a.IPostProcessor).to(ou).inSingletonScope(),ye}},fbrv:function(_e,dt,R){"use strict";var V=this&&this.__spreadArray||function(l,f){for(var v=0,b=f.length,g=l.length;v<b;v++,g++)l[g]=f[v];return l};Object.defineProperty(dt,"__esModule",{value:!0}),dt.getFunctionName=dt.getBaseClassDependencyCount=dt.getDependencies=void 0;var E=R("Yk9n"),T=R("MON2"),e=R("FV85"),t=R("xfSm"),u=R("ujMp");Object.defineProperty(dt,"getFunctionName",{enumerable:!0,get:function(){return u.getFunctionName}});var s=R("dX1H");function c(l,f){var v=u.getFunctionName(f),b=r(l,v,f,!1);return b}dt.getDependencies=c;function r(l,f,v,b){var g=l.getConstructorMetadata(v),m=g.compilerGeneratedMetadata;if(m===void 0){var _=T.MISSING_INJECTABLE_ANNOTATION+" "+f+".";throw new Error(_)}var M=g.userGeneratedMetadata,x=Object.keys(M),y=v.length===0&&x.length>0,S=x.length>v.length,P=y||S?x.length:v.length,A=n(b,f,m,M,P),O=i(l,v),L=V(V([],A),O);return L}function h(l,f,v,b,g){var m=g[l.toString()]||[],_=o(m),M=_.unmanaged!==!0,x=b[l],y=_.inject||_.multiInject;if(x=y||x,x instanceof E.LazyServiceIdentifer&&(x=x.unwrap()),M){var S=x===Object,P=x===Function,A=x===void 0,O=S||P||A;if(!f&&O){var L=T.MISSING_INJECT_ANNOTATION+" argument "+l+" in class "+v+".";throw new Error(L)}var H=new s.Target(e.TargetTypeEnum.ConstructorArgument,_.targetName,x);return H.metadata=m,H}return null}function n(l,f,v,b,g){for(var m=[],_=0;_<g;_++){var M=_,x=h(M,l,f,v,b);x!==null&&m.push(x)}return m}function i(l,f){for(var v=l.getPropertiesMetadata(f),b=[],g=Object.keys(v),m=0,_=g;m<_.length;m++){var M=_[m],x=v[M],y=o(v[M]),S=y.targetName||M,P=y.inject||y.multiInject,A=new s.Target(e.TargetTypeEnum.ClassProperty,S,P);A.metadata=x,b.push(A)}var O=Object.getPrototypeOf(f.prototype).constructor;if(O!==Object){var L=i(l,O);b=V(V([],b),L)}return b}function a(l,f){var v=Object.getPrototypeOf(f.prototype).constructor;if(v!==Object){var b=u.getFunctionName(v),g=r(l,b,v,!0),m=g.map(function(x){return x.metadata.filter(function(y){return y.key===t.UNMANAGED_TAG})}),_=[].concat.apply([],m).length,M=g.length-_;return M>0?M:a(l,v)}else return 0}dt.getBaseClassDependencyCount=a;function o(l){var f={};return l.forEach(function(v){f[v.key.toString()]=v.value}),{inject:f[t.INJECT_TAG],multiInject:f[t.MULTI_INJECT_TAG],targetName:f[t.NAME_TAG],unmanaged:f[t.UNMANAGED_TAG]}}},fbvF:function(_e,dt,R){(function(V,E){_e.exports=E()})(this,function(){"use strict";var V=function(xe){return xe instanceof Uint8Array||xe instanceof Uint16Array||xe instanceof Uint32Array||xe instanceof Int8Array||xe instanceof Int16Array||xe instanceof Int32Array||xe instanceof Float32Array||xe instanceof Float64Array||xe instanceof Uint8ClampedArray},E=function(xe,Ke){for(var zn=Object.keys(Ke),lr=0;lr<zn.length;++lr)xe[zn[lr]]=Ke[zn[lr]];return xe},T=`
`;function e(ce){return typeof atob!="undefined"?atob(ce):"base64:"+ce}function t(ce){var xe=new Error("(regl) "+ce);throw console.error(xe),xe}function u(ce,xe){ce||t(xe)}function s(ce){return ce?": "+ce:""}function c(ce,xe,Ke){ce in xe||t("unknown parameter ("+ce+")"+s(Ke)+". possible values: "+Object.keys(xe).join())}function r(ce,xe){V(ce)||t("invalid parameter type"+s(xe)+". must be a typed array")}function h(ce,xe){switch(xe){case"number":return typeof ce=="number";case"object":return typeof ce=="object";case"string":return typeof ce=="string";case"boolean":return typeof ce=="boolean";case"function":return typeof ce=="function";case"undefined":return typeof ce=="undefined";case"symbol":return typeof ce=="symbol"}}function n(ce,xe,Ke){h(ce,xe)||t("invalid parameter type"+s(Ke)+". expected "+xe+", got "+typeof ce)}function i(ce,xe){ce>=0&&(ce|0)===ce||t("invalid parameter type, ("+ce+")"+s(xe)+". must be a nonnegative integer")}function a(ce,xe,Ke){xe.indexOf(ce)<0&&t("invalid value"+s(Ke)+". must be one of: "+xe)}var o=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function l(ce){Object.keys(ce).forEach(function(xe){o.indexOf(xe)<0&&t('invalid regl constructor argument "'+xe+'". must be one of '+o)})}function f(ce,xe){for(ce=ce+"";ce.length<xe;)ce=" "+ce;return ce}function v(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function b(ce,xe){this.number=ce,this.line=xe,this.errors=[]}function g(ce,xe,Ke){this.file=ce,this.line=xe,this.message=Ke}function m(){var ce=new Error,xe=(ce.stack||ce).toString(),Ke=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(xe);if(Ke)return Ke[1];var zn=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(xe);return zn?zn[1]:"unknown"}function _(){var ce=new Error,xe=(ce.stack||ce).toString(),Ke=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(xe);if(Ke)return Ke[1];var zn=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(xe);return zn?zn[1]:"unknown"}function M(ce,xe){var Ke=ce.split(`
`),zn=1,lr=0,pr={unknown:new v,0:new v};pr.unknown.name=pr[0].name=xe||m(),pr.unknown.lines.push(new b(0,""));for(var Qn=0;Qn<Ke.length;++Qn){var Jr=Ke[Qn],qr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Jr);if(qr)switch(qr[1]){case"line":var ri=/(\d+)(\s+\d+)?/.exec(qr[2]);ri&&(zn=ri[1]|0,ri[2]&&(lr=ri[2]|0,lr in pr||(pr[lr]=new v)));break;case"define":var ui=/SHADER_NAME(_B64)?\s+(.*)$/.exec(qr[2]);ui&&(pr[lr].name=ui[1]?e(ui[2]):ui[2]);break}pr[lr].lines.push(new b(zn++,Jr))}return Object.keys(pr).forEach(function(yi){var Ti=pr[yi];Ti.lines.forEach(function(pi){Ti.index[pi.number]=pi})}),pr}function x(ce){var xe=[];return ce.split(`
`).forEach(function(Ke){if(!(Ke.length<5)){var zn=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ke);zn?xe.push(new g(zn[1]|0,zn[2]|0,zn[3].trim())):Ke.length>0&&xe.push(new g("unknown",0,Ke))}}),xe}function y(ce,xe){xe.forEach(function(Ke){var zn=ce[Ke.file];if(zn){var lr=zn.index[Ke.line];if(lr){lr.errors.push(Ke),zn.hasErrors=!0;return}}ce.unknown.hasErrors=!0,ce.unknown.lines[0].errors.push(Ke)})}function S(ce,xe,Ke,zn,lr){if(!ce.getShaderParameter(xe,ce.COMPILE_STATUS)){var pr=ce.getShaderInfoLog(xe),Qn=zn===ce.FRAGMENT_SHADER?"fragment":"vertex";K(Ke,"string",Qn+" shader source must be a string",lr);var Jr=M(Ke,lr),qr=x(pr);y(Jr,qr),Object.keys(Jr).forEach(function(ri){var ui=Jr[ri];if(!ui.hasErrors)return;var yi=[""],Ti=[""];function pi(gi,Cr){yi.push(gi),Ti.push(Cr||"")}pi("file number "+ri+": "+ui.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ui.lines.forEach(function(gi){if(gi.errors.length>0){pi(f(gi.number,4)+"|  ","background-color:yellow; font-weight:bold"),pi(gi.line+T,"color:red; background-color:yellow; font-weight:bold");var Cr=0;gi.errors.forEach(function(Ir){var Mi=Ir.message,Gi=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Mi);if(Gi){var kr=Gi[1];switch(Mi=Gi[2],kr){case"assign":kr="=";break}Cr=Math.max(gi.line.indexOf(kr,Cr),0)}else Cr=0;pi(f("| ",6)),pi(f("^^^",Cr+3)+T,"font-weight:bold"),pi(f("| ",6)),pi(Mi+T,"font-weight:bold")}),pi(f("| ",6)+T)}else pi(f(gi.number,4)+"|  "),pi(gi.line+T,"color:red")}),typeof document!="undefined"&&!window.chrome?(Ti[0]=yi.join("%c"),console.log.apply(console,Ti)):console.log(yi.join(""))}),u.raise("Error compiling "+Qn+" shader, "+Jr[0].name)}}function P(ce,xe,Ke,zn,lr){if(!ce.getProgramParameter(xe,ce.LINK_STATUS)){var pr=ce.getProgramInfoLog(xe),Qn=M(Ke,lr),Jr=M(zn,lr),qr='Error linking program with vertex shader, "'+Jr[0].name+'", and fragment shader "'+Qn[0].name+'"';typeof document!="undefined"?console.log("%c"+qr+T+"%c"+pr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(qr+T+pr),u.raise(qr)}}function A(ce){ce._commandRef=m()}function O(ce,xe,Ke,zn){A(ce);function lr(qr){return qr?zn.id(qr):0}ce._fragId=lr(ce.static.frag),ce._vertId=lr(ce.static.vert);function pr(qr,ri){Object.keys(ri).forEach(function(ui){qr[zn.id(ui)]=!0})}var Qn=ce._uniformSet={};pr(Qn,xe.static),pr(Qn,xe.dynamic);var Jr=ce._attributeSet={};pr(Jr,Ke.static),pr(Jr,Ke.dynamic),ce._hasCount="count"in ce.static||"count"in ce.dynamic||"elements"in ce.static||"elements"in ce.dynamic}function L(ce,xe){var Ke=_();t(ce+" in command "+(xe||m())+(Ke==="unknown"?"":" called from "+Ke))}function H(ce,xe,Ke){ce||L(xe,Ke||m())}function F(ce,xe,Ke,zn){ce in xe||L("unknown parameter ("+ce+")"+s(Ke)+". possible values: "+Object.keys(xe).join(),zn||m())}function K(ce,xe,Ke,zn){h(ce,xe)||L("invalid parameter type"+s(Ke)+". expected "+xe+", got "+typeof ce,zn||m())}function G(ce){ce()}function U(ce,xe,Ke){ce.texture?a(ce.texture._texture.internalformat,xe,"unsupported texture format for attachment"):a(ce.renderbuffer._renderbuffer.format,Ke,"unsupported renderbuffer format for attachment")}var Z=33071,J=9728,rt=9984,vt=9985,mt=9986,ut=9987,Rt=5120,Ft=5121,wt=5122,Mt=5123,St=5124,At=5125,nt=5126,Pt=32819,z=32820,q=33635,gt=34042,et=36193,at={};at[Rt]=at[Ft]=1,at[wt]=at[Mt]=at[et]=at[q]=at[Pt]=at[z]=2,at[St]=at[At]=at[nt]=at[gt]=4;function xt(ce,xe){return ce===z||ce===Pt||ce===q?2:ce===gt?4:at[ce]*xe}function k(ce){return!(ce&ce-1)&&!!ce}function ot(ce,xe,Ke){var zn,lr=xe.width,pr=xe.height,Qn=xe.channels;u(lr>0&&lr<=Ke.maxTextureSize&&pr>0&&pr<=Ke.maxTextureSize,"invalid texture shape"),(ce.wrapS!==Z||ce.wrapT!==Z)&&u(k(lr)&&k(pr),"incompatible wrap mode for texture, both width and height must be power of 2"),xe.mipmask===1?lr!==1&&pr!==1&&u(ce.minFilter!==rt&&ce.minFilter!==mt&&ce.minFilter!==vt&&ce.minFilter!==ut,"min filter requires mipmap"):(u(k(lr)&&k(pr),"texture must be a square power of 2 to support mipmapping"),u(xe.mipmask===(lr<<1)-1,"missing or incomplete mipmap data")),xe.type===nt&&(Ke.extensions.indexOf("oes_texture_float_linear")<0&&u(ce.minFilter===J&&ce.magFilter===J,"filter not supported, must enable oes_texture_float_linear"),u(!ce.genMipmaps,"mipmap generation not supported with float textures"));var Jr=xe.images;for(zn=0;zn<16;++zn)if(Jr[zn]){var qr=lr>>zn,ri=pr>>zn;u(xe.mipmask&1<<zn,"missing mipmap data");var ui=Jr[zn];if(u(ui.width===qr&&ui.height===ri,"invalid shape for mip images"),u(ui.format===xe.format&&ui.internalformat===xe.internalformat&&ui.type===xe.type,"incompatible type for mip image"),!ui.compressed)if(ui.data){var yi=Math.ceil(xt(ui.type,Qn)*qr/ui.unpackAlignment)*ui.unpackAlignment;u(ui.data.byteLength===yi*ri,"invalid data for image, buffer size is inconsistent with image format")}else ui.element||ui.copy}else ce.genMipmaps||u((xe.mipmask&1<<zn)==0,"extra mipmap data");xe.compressed&&u(!ce.genMipmaps,"mipmap generation for compressed images not supported")}function it(ce,xe,Ke,zn){var lr=ce.width,pr=ce.height,Qn=ce.channels;u(lr>0&&lr<=zn.maxTextureSize&&pr>0&&pr<=zn.maxTextureSize,"invalid texture shape"),u(lr===pr,"cube map must be square"),u(xe.wrapS===Z&&xe.wrapT===Z,"wrap mode not supported by cube map");for(var Jr=0;Jr<Ke.length;++Jr){var qr=Ke[Jr];u(qr.width===lr&&qr.height===pr,"inconsistent cube map face shape"),xe.genMipmaps&&(u(!qr.compressed,"can not generate mipmap for compressed textures"),u(qr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ri=qr.images,ui=0;ui<16;++ui){var yi=ri[ui];if(yi){var Ti=lr>>ui,pi=pr>>ui;u(qr.mipmask&1<<ui,"missing mipmap data"),u(yi.width===Ti&&yi.height===pi,"invalid shape for mip images"),u(yi.format===ce.format&&yi.internalformat===ce.internalformat&&yi.type===ce.type,"incompatible type for mip image"),yi.compressed||(yi.data?u(yi.data.byteLength===Ti*pi*Math.max(xt(yi.type,Qn),yi.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):yi.element||yi.copy)}}}}var $=E(u,{optional:G,raise:t,commandRaise:L,command:H,parameter:c,commandParameter:F,constructor:l,type:n,commandType:K,isTypedArray:r,nni:i,oneOf:a,shaderError:S,linkError:P,callSite:_,saveCommandRef:A,saveDrawInfo:O,framebufferFormat:U,guessCommand:m,texture2D:ot,textureCube:it}),_t=0,yt=0,Nt=5,$t=6;function ee(ce,xe){this.id=_t++,this.type=ce,this.data=xe}function Gt(ce){return ce.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ht(ce){if(ce.length===0)return[];var xe=ce.charAt(0),Ke=ce.charAt(ce.length-1);if(ce.length>1&&xe===Ke&&(xe==='"'||xe==="'"))return['"'+Gt(ce.substr(1,ce.length-2))+'"'];var zn=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ce);if(zn)return Ht(ce.substr(0,zn.index)).concat(Ht(zn[1])).concat(Ht(ce.substr(zn.index+zn[0].length)));var lr=ce.split(".");if(lr.length===1)return['"'+Gt(ce)+'"'];for(var pr=[],Qn=0;Qn<lr.length;++Qn)pr=pr.concat(Ht(lr[Qn]));return pr}function ae(ce){return"["+Ht(ce).join("][")+"]"}function le(ce,xe){return new ee(ce,ae(xe+""))}function Be(ce){return typeof ce=="function"&&!ce._reglType||ce instanceof ee}function Ce(ce,xe){if(typeof ce=="function")return new ee(yt,ce);if(typeof ce=="number"||typeof ce=="boolean")return new ee(Nt,ce);if(Array.isArray(ce))return new ee($t,ce.map(function(Ke,zn){return Ce(Ke,xe+"["+zn+"]")}));if(ce instanceof ee)return ce;$(!1,"invalid option type in uniform "+xe)}var We={DynamicVariable:ee,define:le,isDynamic:Be,unbox:Ce,accessor:ae},Ye={next:typeof requestAnimationFrame=="function"?function(ce){return requestAnimationFrame(ce)}:function(ce){return setTimeout(ce,16)},cancel:typeof cancelAnimationFrame=="function"?function(ce){return cancelAnimationFrame(ce)}:clearTimeout},wn=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function er(){var ce={"":0},xe=[""];return{id:function(zn){var lr=ce[zn];return lr||(lr=ce[zn]=xe.length,xe.push(zn),lr)},str:function(zn){return xe[zn]}}}function Lr(ce,xe,Ke){var zn=document.createElement("canvas");E(zn.style,{border:0,margin:0,padding:0,top:0,left:0}),ce.appendChild(zn),ce===document.body&&(zn.style.position="absolute",E(ce.style,{margin:0,padding:0}));function lr(){var Jr=window.innerWidth,qr=window.innerHeight;if(ce!==document.body){var ri=ce.getBoundingClientRect();Jr=ri.right-ri.left,qr=ri.bottom-ri.top}zn.width=Ke*Jr,zn.height=Ke*qr,E(zn.style,{width:Jr+"px",height:qr+"px"})}var pr;ce!==document.body&&typeof ResizeObserver=="function"?(pr=new ResizeObserver(function(){setTimeout(lr)}),pr.observe(ce)):window.addEventListener("resize",lr,!1);function Qn(){pr?pr.disconnect():window.removeEventListener("resize",lr),ce.removeChild(zn)}return lr(),{canvas:zn,onDestroy:Qn}}function on(ce,xe){function Ke(zn){try{return ce.getContext(zn,xe)}catch(lr){return null}}return Ke("webgl")||Ke("experimental-webgl")||Ke("webgl-experimental")}function en(ce){return typeof ce.nodeName=="string"&&typeof ce.appendChild=="function"&&typeof ce.getBoundingClientRect=="function"}function An(ce){return typeof ce.drawArrays=="function"||typeof ce.drawElements=="function"}function Bn(ce){return typeof ce=="string"?ce.split():($(Array.isArray(ce),"invalid extension array"),ce)}function gr(ce){return typeof ce=="string"?($(typeof document!="undefined","not supported outside of DOM"),document.querySelector(ce)):ce}function hi(ce){var xe=ce||{},Ke,zn,lr,pr,Qn={},Jr=[],qr=[],ri=typeof window=="undefined"?1:window.devicePixelRatio,ui=!1,yi=function(Cr){Cr&&$.raise(Cr)},Ti=function(){};if(typeof xe=="string"?($(typeof document!="undefined","selector queries only supported in DOM enviroments"),Ke=document.querySelector(xe),$(Ke,"invalid query string for element")):typeof xe=="object"?en(xe)?Ke=xe:An(xe)?(pr=xe,lr=pr.canvas):($.constructor(xe),"gl"in xe?pr=xe.gl:"canvas"in xe?lr=gr(xe.canvas):"container"in xe&&(zn=gr(xe.container)),"attributes"in xe&&(Qn=xe.attributes,$.type(Qn,"object","invalid context attributes")),"extensions"in xe&&(Jr=Bn(xe.extensions)),"optionalExtensions"in xe&&(qr=Bn(xe.optionalExtensions)),"onDone"in xe&&($.type(xe.onDone,"function","invalid or missing onDone callback"),yi=xe.onDone),"profile"in xe&&(ui=!!xe.profile),"pixelRatio"in xe&&(ri=+xe.pixelRatio,$(ri>0,"invalid pixel ratio"))):$.raise("invalid arguments to regl"),Ke&&(Ke.nodeName.toLowerCase()==="canvas"?lr=Ke:zn=Ke),!pr){if(!lr){$(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var pi=Lr(zn||document.body,yi,ri);if(!pi)return null;lr=pi.canvas,Ti=pi.onDestroy}Qn.premultipliedAlpha===void 0&&(Qn.premultipliedAlpha=!0),pr=on(lr,Qn)}return pr?{gl:pr,canvas:lr,container:zn,extensions:Jr,optionalExtensions:qr,pixelRatio:ri,profile:ui,onDone:yi,onDestroy:Ti}:(Ti(),yi("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ae(ce,xe){var Ke={};function zn(Qn){$.type(Qn,"string","extension name must be string");var Jr=Qn.toLowerCase(),qr;try{qr=Ke[Jr]=ce.getExtension(Jr)}catch(ri){}return!!qr}for(var lr=0;lr<xe.extensions.length;++lr){var pr=xe.extensions[lr];if(!zn(pr))return xe.onDestroy(),xe.onDone('"'+pr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return xe.optionalExtensions.forEach(zn),{extensions:Ke,restore:function(){Object.keys(Ke).forEach(function(Jr){if(Ke[Jr]&&!zn(Jr))throw new Error("(regl): error restoring extension "+Jr)})}}}function Me(ce,xe){for(var Ke=Array(ce),zn=0;zn<ce;++zn)Ke[zn]=xe(zn);return Ke}var Qt=5120,ge=5121,Wt=5122,re=5123,Te=5124,ue=5125,be=5126;function Xe(ce){for(var xe=16;xe<=1<<28;xe*=16)if(ce<=xe)return xe;return 0}function Rn(ce){var xe,Ke;return xe=(ce>65535)<<4,ce>>>=xe,Ke=(ce>255)<<3,ce>>>=Ke,xe|=Ke,Ke=(ce>15)<<2,ce>>>=Ke,xe|=Ke,Ke=(ce>3)<<1,ce>>>=Ke,xe|=Ke,xe|ce>>1}function tr(){var ce=Me(8,function(){return[]});function xe(pr){var Qn=Xe(pr),Jr=ce[Rn(Qn)>>2];return Jr.length>0?Jr.pop():new ArrayBuffer(Qn)}function Ke(pr){ce[Rn(pr.byteLength)>>2].push(pr)}function zn(pr,Qn){var Jr=null;switch(pr){case Qt:Jr=new Int8Array(xe(Qn),0,Qn);break;case ge:Jr=new Uint8Array(xe(Qn),0,Qn);break;case Wt:Jr=new Int16Array(xe(2*Qn),0,Qn);break;case re:Jr=new Uint16Array(xe(2*Qn),0,Qn);break;case Te:Jr=new Int32Array(xe(4*Qn),0,Qn);break;case ue:Jr=new Uint32Array(xe(4*Qn),0,Qn);break;case be:Jr=new Float32Array(xe(4*Qn),0,Qn);break;default:return null}return Jr.length!==Qn?Jr.subarray(0,Qn):Jr}function lr(pr){Ke(pr.buffer)}return{alloc:xe,free:Ke,allocType:zn,freeType:lr}}var Mn=tr();Mn.zero=tr();var vn=3408,Ar=3410,or=3411,cn=3412,Pr=3413,Sr=3414,De=3415,$e=33901,Ve=33902,En=3379,xn=3386,Nn=34921,mn=36347,Dn=36348,$n=35661,Wn=35660,_n=34930,xr=36349,mr=34076,Fr=34024,xi=7936,Ta=7937,Aa=7938,to=35724,Vo=34047,Ro=36063,ro=34852,vs=3553,Jo=34067,Do=34069,xs=33984,Ra=6408,$o=5126,jo=5121,Js=36160,io=36053,so=36064,Gs=16384,Ne=function(xe,Ke){var zn=1;Ke.ext_texture_filter_anisotropic&&(zn=xe.getParameter(Vo));var lr=1,pr=1;Ke.webgl_draw_buffers&&(lr=xe.getParameter(ro),pr=xe.getParameter(Ro));var Qn=!!Ke.oes_texture_float;if(Qn){var Jr=xe.createTexture();xe.bindTexture(vs,Jr),xe.texImage2D(vs,0,Ra,1,1,0,Ra,$o,null);var qr=xe.createFramebuffer();if(xe.bindFramebuffer(Js,qr),xe.framebufferTexture2D(Js,so,vs,Jr,0),xe.bindTexture(vs,null),xe.checkFramebufferStatus(Js)!==io)Qn=!1;else{xe.viewport(0,0,1,1),xe.clearColor(1,0,0,1),xe.clear(Gs);var ri=Mn.allocType($o,4);xe.readPixels(0,0,1,1,Ra,$o,ri),xe.getError()?Qn=!1:(xe.deleteFramebuffer(qr),xe.deleteTexture(Jr),Qn=ri[0]===1),Mn.freeType(ri)}}var ui=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),yi=!0;if(!ui){var Ti=xe.createTexture(),pi=Mn.allocType(jo,36);xe.activeTexture(xs),xe.bindTexture(Jo,Ti),xe.texImage2D(Do,0,Ra,3,3,0,Ra,jo,pi),Mn.freeType(pi),xe.bindTexture(Jo,null),xe.deleteTexture(Ti),yi=!xe.getError()}return{colorBits:[xe.getParameter(Ar),xe.getParameter(or),xe.getParameter(cn),xe.getParameter(Pr)],depthBits:xe.getParameter(Sr),stencilBits:xe.getParameter(De),subpixelBits:xe.getParameter(vn),extensions:Object.keys(Ke).filter(function(gi){return!!Ke[gi]}),maxAnisotropic:zn,maxDrawbuffers:lr,maxColorAttachments:pr,pointSizeDims:xe.getParameter($e),lineWidthDims:xe.getParameter(Ve),maxViewportDims:xe.getParameter(xn),maxCombinedTextureUnits:xe.getParameter($n),maxCubeMapSize:xe.getParameter(mr),maxRenderbufferSize:xe.getParameter(Fr),maxTextureUnits:xe.getParameter(_n),maxTextureSize:xe.getParameter(En),maxAttributes:xe.getParameter(Nn),maxVertexUniforms:xe.getParameter(mn),maxVertexTextureUnits:xe.getParameter(Wn),maxVaryingVectors:xe.getParameter(Dn),maxFragmentUniforms:xe.getParameter(xr),glsl:xe.getParameter(to),renderer:xe.getParameter(Ta),vendor:xe.getParameter(xi),version:xe.getParameter(Aa),readFloat:Qn,npotTextureCube:yi}};function se(ce){return!!ce&&typeof ce=="object"&&Array.isArray(ce.shape)&&Array.isArray(ce.stride)&&typeof ce.offset=="number"&&ce.shape.length===ce.stride.length&&(Array.isArray(ce.data)||V(ce.data))}var Yt=function(xe){return Object.keys(xe).map(function(Ke){return xe[Ke]})},Ee={shape:bi,flatten:$r};function sn(ce,xe,Ke){for(var zn=0;zn<xe;++zn)Ke[zn]=ce[zn]}function Fn(ce,xe,Ke,zn){for(var lr=0,pr=0;pr<xe;++pr)for(var Qn=ce[pr],Jr=0;Jr<Ke;++Jr)zn[lr++]=Qn[Jr]}function rr(ce,xe,Ke,zn,lr,pr){for(var Qn=pr,Jr=0;Jr<xe;++Jr)for(var qr=ce[Jr],ri=0;ri<Ke;++ri)for(var ui=qr[ri],yi=0;yi<zn;++yi)lr[Qn++]=ui[yi]}function qn(ce,xe,Ke,zn,lr){for(var pr=1,Qn=Ke+1;Qn<xe.length;++Qn)pr*=xe[Qn];var Jr=xe[Ke];if(xe.length-Ke==4){var qr=xe[Ke+1],ri=xe[Ke+2],ui=xe[Ke+3];for(Qn=0;Qn<Jr;++Qn)rr(ce[Qn],qr,ri,ui,zn,lr),lr+=pr}else for(Qn=0;Qn<Jr;++Qn)qn(ce[Qn],xe,Ke+1,zn,lr),lr+=pr}function $r(ce,xe,Ke,zn){var lr=1;if(xe.length)for(var pr=0;pr<xe.length;++pr)lr*=xe[pr];else lr=0;var Qn=zn||Mn.allocType(Ke,lr);switch(xe.length){case 0:break;case 1:sn(ce,xe[0],Qn);break;case 2:Fn(ce,xe[0],xe[1],Qn);break;case 3:rr(ce,xe[0],xe[1],xe[2],Qn,0);break;default:qn(ce,xe,0,Qn,0)}return Qn}function bi(ce){for(var xe=[],Ke=ce;Ke.length;Ke=Ke[0])xe.push(Ke.length);return xe}var wi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Vi=5120,sa=5122,$a=5124,Ca=5121,_o=5123,Fa=5125,uo=5126,vo=5126,Ja={int8:Vi,int16:sa,int32:$a,uint8:Ca,uint16:_o,uint32:Fa,float:uo,float32:vo},To=35048,hs=35040,zo={dynamic:To,stream:hs,static:35044},bs=Ee.flatten,Ao=Ee.shape,Wa=35044,Rs=35040,ss=5121,Ba=5126,gn=[];gn[5120]=1,gn[5122]=2,gn[5124]=4,gn[5121]=1,gn[5123]=2,gn[5125]=4,gn[5126]=4;function cr(ce){return wi[Object.prototype.toString.call(ce)]|0}function Gr(ce,xe){for(var Ke=0;Ke<xe.length;++Ke)ce[Ke]=xe[Ke]}function Ui(ce,xe,Ke,zn,lr,pr,Qn){for(var Jr=0,qr=0;qr<Ke;++qr)for(var ri=0;ri<zn;++ri)ce[Jr++]=xe[lr*qr+pr*ri+Qn]}function Ua(ce,xe,Ke,zn){var lr=0,pr={};function Qn(Cr){this.id=lr++,this.buffer=ce.createBuffer(),this.type=Cr,this.usage=Wa,this.byteLength=0,this.dimension=1,this.dtype=ss,this.persistentData=null,Ke.profile&&(this.stats={size:0})}Qn.prototype.bind=function(){ce.bindBuffer(this.type,this.buffer)},Qn.prototype.destroy=function(){Ti(this)};var Jr=[];function qr(Cr,Ir){var Mi=Jr.pop();return Mi||(Mi=new Qn(Cr)),Mi.bind(),yi(Mi,Ir,Rs,0,1,!1),Mi}function ri(Cr){Jr.push(Cr)}function ui(Cr,Ir,Mi){Cr.byteLength=Ir.byteLength,ce.bufferData(Cr.type,Ir,Mi)}function yi(Cr,Ir,Mi,Gi,kr,ca){var Oi;if(Cr.usage=Mi,Array.isArray(Ir)){if(Cr.dtype=Gi||Ba,Ir.length>0){var Ai;if(Array.isArray(Ir[0])){Oi=Ao(Ir);for(var Ei=1,Ii=1;Ii<Oi.length;++Ii)Ei*=Oi[Ii];Cr.dimension=Ei,Ai=bs(Ir,Oi,Cr.dtype),ui(Cr,Ai,Mi),ca?Cr.persistentData=Ai:Mn.freeType(Ai)}else if(typeof Ir[0]=="number"){Cr.dimension=kr;var fa=Mn.allocType(Cr.dtype,Ir.length);Gr(fa,Ir),ui(Cr,fa,Mi),ca?Cr.persistentData=fa:Mn.freeType(fa)}else V(Ir[0])?(Cr.dimension=Ir[0].length,Cr.dtype=Gi||cr(Ir[0])||Ba,Ai=bs(Ir,[Ir.length,Ir[0].length],Cr.dtype),ui(Cr,Ai,Mi),ca?Cr.persistentData=Ai:Mn.freeType(Ai)):$.raise("invalid buffer data")}}else if(V(Ir))Cr.dtype=Gi||cr(Ir),Cr.dimension=kr,ui(Cr,Ir,Mi),ca&&(Cr.persistentData=new Uint8Array(new Uint8Array(Ir.buffer)));else if(se(Ir)){Oi=Ir.shape;var ma=Ir.stride,ji=Ir.offset,Si=0,di=0,Qi=0,aa=0;Oi.length===1?(Si=Oi[0],di=1,Qi=ma[0],aa=0):Oi.length===2?(Si=Oi[0],di=Oi[1],Qi=ma[0],aa=ma[1]):$.raise("invalid shape"),Cr.dtype=Gi||cr(Ir.data)||Ba,Cr.dimension=di;var $i=Mn.allocType(Cr.dtype,Si*di);Ui($i,Ir.data,Si,di,Qi,aa,ji),ui(Cr,$i,Mi),ca?Cr.persistentData=$i:Mn.freeType($i)}else Ir instanceof ArrayBuffer?(Cr.dtype=ss,Cr.dimension=kr,ui(Cr,Ir,Mi),ca&&(Cr.persistentData=new Uint8Array(new Uint8Array(Ir)))):$.raise("invalid buffer data")}function Ti(Cr){xe.bufferCount--,zn(Cr);var Ir=Cr.buffer;$(Ir,"buffer must not be deleted already"),ce.deleteBuffer(Ir),Cr.buffer=null,delete pr[Cr.id]}function pi(Cr,Ir,Mi,Gi){xe.bufferCount++;var kr=new Qn(Ir);pr[kr.id]=kr;function ca(Ei){var Ii=Wa,fa=null,ma=0,ji=0,Si=1;return Array.isArray(Ei)||V(Ei)||se(Ei)||Ei instanceof ArrayBuffer?fa=Ei:typeof Ei=="number"?ma=Ei|0:Ei&&($.type(Ei,"object","buffer arguments must be an object, a number or an array"),"data"in Ei&&($(fa===null||Array.isArray(fa)||V(fa)||se(fa),"invalid data for buffer"),fa=Ei.data),"usage"in Ei&&($.parameter(Ei.usage,zo,"invalid buffer usage"),Ii=zo[Ei.usage]),"type"in Ei&&($.parameter(Ei.type,Ja,"invalid buffer type"),ji=Ja[Ei.type]),"dimension"in Ei&&($.type(Ei.dimension,"number","invalid dimension"),Si=Ei.dimension|0),"length"in Ei&&($.nni(ma,"buffer length must be a nonnegative integer"),ma=Ei.length|0)),kr.bind(),fa?yi(kr,fa,Ii,ji,Si,Gi):(ma&&ce.bufferData(kr.type,ma,Ii),kr.dtype=ji||ss,kr.usage=Ii,kr.dimension=Si,kr.byteLength=ma),Ke.profile&&(kr.stats.size=kr.byteLength*gn[kr.dtype]),ca}function Oi(Ei,Ii){$(Ii+Ei.byteLength<=kr.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ei.byteLength+" starting from offset "+Ii+" to a buffer of size "+kr.byteLength),ce.bufferSubData(kr.type,Ii,Ei)}function Ai(Ei,Ii){var fa=(Ii||0)|0,ma;if(kr.bind(),V(Ei)||Ei instanceof ArrayBuffer)Oi(Ei,fa);else if(Array.isArray(Ei)){if(Ei.length>0)if(typeof Ei[0]=="number"){var ji=Mn.allocType(kr.dtype,Ei.length);Gr(ji,Ei),Oi(ji,fa),Mn.freeType(ji)}else if(Array.isArray(Ei[0])||V(Ei[0])){ma=Ao(Ei);var Si=bs(Ei,ma,kr.dtype);Oi(Si,fa),Mn.freeType(Si)}else $.raise("invalid buffer data")}else if(se(Ei)){ma=Ei.shape;var di=Ei.stride,Qi=0,aa=0,$i=0,co=0;ma.length===1?(Qi=ma[0],aa=1,$i=di[0],co=0):ma.length===2?(Qi=ma[0],aa=ma[1],$i=di[0],co=di[1]):$.raise("invalid shape");var mo=Array.isArray(Ei.data)?kr.dtype:cr(Ei.data),No=Mn.allocType(mo,Qi*aa);Ui(No,Ei.data,Qi,aa,$i,co,Ei.offset),Oi(No,fa),Mn.freeType(No)}else $.raise("invalid data for buffer subdata");return ca}return Mi||ca(Cr),ca._reglType="buffer",ca._buffer=kr,ca.subdata=Ai,Ke.profile&&(ca.stats=kr.stats),ca.destroy=function(){Ti(kr)},ca}function gi(){Yt(pr).forEach(function(Cr){Cr.buffer=ce.createBuffer(),ce.bindBuffer(Cr.type,Cr.buffer),ce.bufferData(Cr.type,Cr.persistentData||Cr.byteLength,Cr.usage)})}return Ke.profile&&(xe.getTotalBufferSize=function(){var Cr=0;return Object.keys(pr).forEach(function(Ir){Cr+=pr[Ir].stats.size}),Cr}),{create:pi,createStream:qr,destroyStream:ri,clear:function(){Yt(pr).forEach(Ti),Jr.forEach(Ti)},getBuffer:function(Ir){return Ir&&Ir._buffer instanceof Qn?Ir._buffer:null},restore:gi,_initBuffer:yi}}var xo=0,po=0,ea=1,Qa=1,Ds=4,Es=4,Za={points:xo,point:po,lines:ea,line:Qa,triangles:Ds,triangle:Es,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ru=0,Qo=1,Os=4,$s=5120,Ss=5121,ps=5122,rs=5123,ws=5124,_s=5125,Tu=34963,Ru=35040,Mo=35044;function Qs(ce,xe,Ke,zn){var lr={},pr=0,Qn={uint8:Ss,uint16:rs};xe.oes_element_index_uint&&(Qn.uint32=_s);function Jr(gi){this.id=pr++,lr[this.id]=this,this.buffer=gi,this.primType=Os,this.vertCount=0,this.type=0}Jr.prototype.bind=function(){this.buffer.bind()};var qr=[];function ri(gi){var Cr=qr.pop();return Cr||(Cr=new Jr(Ke.create(null,Tu,!0,!1)._buffer)),yi(Cr,gi,Ru,-1,-1,0,0),Cr}function ui(gi){qr.push(gi)}function yi(gi,Cr,Ir,Mi,Gi,kr,ca){gi.buffer.bind();var Oi;if(Cr){var Ai=ca;!ca&&(!V(Cr)||se(Cr)&&!V(Cr.data))&&(Ai=xe.oes_element_index_uint?_s:rs),Ke._initBuffer(gi.buffer,Cr,Ir,Ai,3)}else ce.bufferData(Tu,kr,Ir),gi.buffer.dtype=Oi||Ss,gi.buffer.usage=Ir,gi.buffer.dimension=3,gi.buffer.byteLength=kr;if(Oi=ca,!ca){switch(gi.buffer.dtype){case Ss:case $s:Oi=Ss;break;case rs:case ps:Oi=rs;break;case _s:case ws:Oi=_s;break;default:$.raise("unsupported type for element array")}gi.buffer.dtype=Oi}gi.type=Oi,$(Oi!==_s||!!xe.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ei=Gi;Ei<0&&(Ei=gi.buffer.byteLength,Oi===rs?Ei>>=1:Oi===_s&&(Ei>>=2)),gi.vertCount=Ei;var Ii=Mi;if(Mi<0){Ii=Os;var fa=gi.buffer.dimension;fa===1&&(Ii=ru),fa===2&&(Ii=Qo),fa===3&&(Ii=Os)}gi.primType=Ii}function Ti(gi){zn.elementsCount--,$(gi.buffer!==null,"must not double destroy elements"),delete lr[gi.id],gi.buffer.destroy(),gi.buffer=null}function pi(gi,Cr){var Ir=Ke.create(null,Tu,!0),Mi=new Jr(Ir._buffer);zn.elementsCount++;function Gi(kr){if(!kr)Ir(),Mi.primType=Os,Mi.vertCount=0,Mi.type=Ss;else if(typeof kr=="number")Ir(kr),Mi.primType=Os,Mi.vertCount=kr|0,Mi.type=Ss;else{var ca=null,Oi=Mo,Ai=-1,Ei=-1,Ii=0,fa=0;Array.isArray(kr)||V(kr)||se(kr)?ca=kr:($.type(kr,"object","invalid arguments for elements"),"data"in kr&&(ca=kr.data,$(Array.isArray(ca)||V(ca)||se(ca),"invalid data for element buffer")),"usage"in kr&&($.parameter(kr.usage,zo,"invalid element buffer usage"),Oi=zo[kr.usage]),"primitive"in kr&&($.parameter(kr.primitive,Za,"invalid element buffer primitive"),Ai=Za[kr.primitive]),"count"in kr&&($(typeof kr.count=="number"&&kr.count>=0,"invalid vertex count for elements"),Ei=kr.count|0),"type"in kr&&($.parameter(kr.type,Qn,"invalid buffer type"),fa=Qn[kr.type]),"length"in kr?Ii=kr.length|0:(Ii=Ei,fa===rs||fa===ps?Ii*=2:(fa===_s||fa===ws)&&(Ii*=4))),yi(Mi,ca,Oi,Ai,Ei,Ii,fa)}return Gi}return Gi(gi),Gi._reglType="elements",Gi._elements=Mi,Gi.subdata=function(kr,ca){return Ir.subdata(kr,ca),Gi},Gi.destroy=function(){Ti(Mi)},Gi}return{create:pi,createStream:ri,destroyStream:ui,getElements:function(Cr){return typeof Cr=="function"&&Cr._elements instanceof Jr?Cr._elements:null},clear:function(){Yt(lr).forEach(Ti)}}}var Du=new Float32Array(1),Wu=new Uint32Array(Du.buffer),il=5123;function ju(ce){for(var xe=Mn.allocType(il,ce.length),Ke=0;Ke<ce.length;++Ke)if(isNaN(ce[Ke]))xe[Ke]=65535;else if(ce[Ke]===Infinity)xe[Ke]=31744;else if(ce[Ke]===-Infinity)xe[Ke]=64512;else{Du[0]=ce[Ke];var zn=Wu[0],lr=zn>>>31<<15,pr=(zn<<1>>>24)-127,Qn=zn>>13&(1<<10)-1;if(pr<-24)xe[Ke]=lr;else if(pr<-14){var Jr=-14-pr;xe[Ke]=lr+(Qn+(1<<10)>>Jr)}else pr>15?xe[Ke]=lr+31744:xe[Ke]=lr+(pr+15<<10)+Qn}return xe}function Co(ce){return Array.isArray(ce)||V(ce)}var ka=function(xe){return!(xe&xe-1)&&!!xe},ba=34467,Bo=3553,uu=34067,Hu=34069,gs=6408,qo=6406,Is=6407,iu=6409,Fo=6410,Yu=32854,Ys=32855,Ka=36194,pl=32819,Gl=32820,gl=33635,Ec=34042,Ml=6402,ao=34041,Au=35904,ml=35906,qs=36193,Bu=33776,vu=33777,pu=33778,Zs=33779,ds=35986,Ms=35987,al=34798,Pl=35840,jl=35841,Nu=35842,Zu=35843,ol=36196,gu=5121,au=5123,Ku=5125,Ls=5126,yl=10242,ic=10243,Tl=10497,Bl=33071,Vl=33648,pc=10240,Xu=10241,Al=9728,Nl=9729,Oo=9984,go=9985,xl=9986,sl=9987,Vs=33170,Da=4352,bo=4353,Ns=4354,Cl=34046,ul=3317,Ju=37440,Sc=37441,Wl=37443,$u=37444,tu=33984,Ws=[Oo,xl,go,sl],is=[0,iu,Fo,Is,gs],eu={};eu[iu]=eu[qo]=eu[Ml]=1,eu[ao]=eu[Fo]=2,eu[Is]=eu[Au]=3,eu[gs]=eu[ml]=4;function Fu(ce){return"[object "+ce+"]"}var us=Fu("HTMLCanvasElement"),Wi=Fu("OffscreenCanvas"),js=Fu("CanvasRenderingContext2D"),Qu=Fu("ImageBitmap"),zu=Fu("HTMLImageElement"),Uo=Fu("HTMLVideoElement"),Wo=Object.keys(wi).concat([us,Wi,js,Qu,zu,Uo]),mu=[];mu[gu]=1,mu[Ls]=4,mu[qs]=2,mu[au]=2,mu[Ku]=4;var _i=[];_i[Yu]=2,_i[Ys]=2,_i[Ka]=2,_i[ao]=4,_i[Bu]=.5,_i[vu]=.5,_i[pu]=1,_i[Zs]=1,_i[ds]=.5,_i[Ms]=1,_i[al]=1,_i[Pl]=.5,_i[jl]=.25,_i[Nu]=.5,_i[Zu]=.25,_i[ol]=.5;function yu(ce){return Array.isArray(ce)&&(ce.length===0||typeof ce[0]=="number")}function Cu(ce){if(!Array.isArray(ce))return!1;var xe=ce.length;return!(xe===0||!Co(ce[0]))}function Ou(ce){return Object.prototype.toString.call(ce)}function Ks(ce){return Ou(ce)===us}function we(ce){return Ou(ce)===Wi}function Pe(ce){return Ou(ce)===js}function hn(ce){return Ou(ce)===Qu}function tn(ce){return Ou(ce)===zu}function On(ce){return Ou(ce)===Uo}function hr(ce){if(!ce)return!1;var xe=Ou(ce);return Wo.indexOf(xe)>=0?!0:yu(ce)||Cu(ce)||se(ce)}function Rr(ce){return wi[Object.prototype.toString.call(ce)]|0}function Xr(ce,xe){var Ke=xe.length;switch(ce.type){case gu:case au:case Ku:case Ls:var zn=Mn.allocType(ce.type,Ke);zn.set(xe),ce.data=zn;break;case qs:ce.data=ju(xe);break;default:$.raise("unsupported texture type, must specify a typed array")}}function ni(ce,xe){return Mn.allocType(ce.type===qs?Ls:ce.type,xe)}function zr(ce,xe){ce.type===qs?(ce.data=ju(xe),Mn.freeType(xe)):ce.data=xe}function li(ce,xe,Ke,zn,lr,pr){for(var Qn=ce.width,Jr=ce.height,qr=ce.channels,ri=Qn*Jr*qr,ui=ni(ce,ri),yi=0,Ti=0;Ti<Jr;++Ti)for(var pi=0;pi<Qn;++pi)for(var gi=0;gi<qr;++gi)ui[yi++]=xe[Ke*pi+zn*Ti+lr*gi+pr];zr(ce,ui)}function yr(ce,xe,Ke,zn,lr,pr){var Qn;if(typeof _i[ce]!="undefined"?Qn=_i[ce]:Qn=eu[ce]*mu[xe],pr&&(Qn*=6),lr){for(var Jr=0,qr=Ke;qr>=1;)Jr+=Qn*qr*qr,qr/=2;return Jr}else return Qn*Ke*zn}function Kt(ce,xe,Ke,zn,lr,pr,Qn){var Jr={"don't care":Da,"dont care":Da,nice:Ns,fast:bo},qr={repeat:Tl,clamp:Bl,mirror:Vl},ri={nearest:Al,linear:Nl},ui=E({mipmap:sl,"nearest mipmap nearest":Oo,"linear mipmap nearest":go,"nearest mipmap linear":xl,"linear mipmap linear":sl},ri),yi={none:0,browser:$u},Ti={uint8:gu,rgba4:pl,rgb565:gl,"rgb5 a1":Gl},pi={alpha:qo,luminance:iu,"luminance alpha":Fo,rgb:Is,rgba:gs,rgba4:Yu,"rgb5 a1":Ys,rgb565:Ka},gi={};xe.ext_srgb&&(pi.srgb=Au,pi.srgba=ml),xe.oes_texture_float&&(Ti.float32=Ti.float=Ls),xe.oes_texture_half_float&&(Ti.float16=Ti["half float"]=qs),xe.webgl_depth_texture&&(E(pi,{depth:Ml,"depth stencil":ao}),E(Ti,{uint16:au,uint32:Ku,"depth stencil":Ec})),xe.webgl_compressed_texture_s3tc&&E(gi,{"rgb s3tc dxt1":Bu,"rgba s3tc dxt1":vu,"rgba s3tc dxt3":pu,"rgba s3tc dxt5":Zs}),xe.webgl_compressed_texture_atc&&E(gi,{"rgb atc":ds,"rgba atc explicit alpha":Ms,"rgba atc interpolated alpha":al}),xe.webgl_compressed_texture_pvrtc&&E(gi,{"rgb pvrtc 4bppv1":Pl,"rgb pvrtc 2bppv1":jl,"rgba pvrtc 4bppv1":Nu,"rgba pvrtc 2bppv1":Zu}),xe.webgl_compressed_texture_etc1&&(gi["rgb etc1"]=ol);var Cr=Array.prototype.slice.call(ce.getParameter(ba));Object.keys(gi).forEach(function(jn){var Wr=gi[jn];Cr.indexOf(Wr)>=0&&(pi[jn]=Wr)});var Ir=Object.keys(pi);Ke.textureFormats=Ir;var Mi=[];Object.keys(pi).forEach(function(jn){var Wr=pi[jn];Mi[Wr]=jn});var Gi=[];Object.keys(Ti).forEach(function(jn){var Wr=Ti[jn];Gi[Wr]=jn});var kr=[];Object.keys(ri).forEach(function(jn){var Wr=ri[jn];kr[Wr]=jn});var ca=[];Object.keys(ui).forEach(function(jn){var Wr=ui[jn];ca[Wr]=jn});var Oi=[];Object.keys(qr).forEach(function(jn){var Wr=qr[jn];Oi[Wr]=jn});var Ai=Ir.reduce(function(jn,Wr){var Ur=pi[Wr];return Ur===iu||Ur===qo||Ur===iu||Ur===Fo||Ur===Ml||Ur===ao||xe.ext_srgb&&(Ur===Au||Ur===ml)?jn[Ur]=Ur:Ur===Ys||Wr.indexOf("rgba")>=0?jn[Ur]=gs:jn[Ur]=Is,jn},{});function Ei(){this.internalformat=gs,this.format=gs,this.type=gu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=$u,this.width=0,this.height=0,this.channels=0}function Ii(jn,Wr){jn.internalformat=Wr.internalformat,jn.format=Wr.format,jn.type=Wr.type,jn.compressed=Wr.compressed,jn.premultiplyAlpha=Wr.premultiplyAlpha,jn.flipY=Wr.flipY,jn.unpackAlignment=Wr.unpackAlignment,jn.colorSpace=Wr.colorSpace,jn.width=Wr.width,jn.height=Wr.height,jn.channels=Wr.channels}function fa(jn,Wr){if(!(typeof Wr!="object"||!Wr)){if("premultiplyAlpha"in Wr&&($.type(Wr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),jn.premultiplyAlpha=Wr.premultiplyAlpha),"flipY"in Wr&&($.type(Wr.flipY,"boolean","invalid texture flip"),jn.flipY=Wr.flipY),"alignment"in Wr&&($.oneOf(Wr.alignment,[1,2,4,8],"invalid texture unpack alignment"),jn.unpackAlignment=Wr.alignment),"colorSpace"in Wr&&($.parameter(Wr.colorSpace,yi,"invalid colorSpace"),jn.colorSpace=yi[Wr.colorSpace]),"type"in Wr){var Ur=Wr.type;$(xe.oes_texture_float||!(Ur==="float"||Ur==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),$(xe.oes_texture_half_float||!(Ur==="half float"||Ur==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),$(xe.webgl_depth_texture||!(Ur==="uint16"||Ur==="uint32"||Ur==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),$.parameter(Ur,Ti,"invalid texture type"),jn.type=Ti[Ur]}var na=jn.width,oo=jn.height,Sn=jn.channels,rn=!1;"shape"in Wr?($(Array.isArray(Wr.shape)&&Wr.shape.length>=2,"shape must be an array"),na=Wr.shape[0],oo=Wr.shape[1],Wr.shape.length===3&&(Sn=Wr.shape[2],$(Sn>0&&Sn<=4,"invalid number of channels"),rn=!0),$(na>=0&&na<=Ke.maxTextureSize,"invalid width"),$(oo>=0&&oo<=Ke.maxTextureSize,"invalid height")):("radius"in Wr&&(na=oo=Wr.radius,$(na>=0&&na<=Ke.maxTextureSize,"invalid radius")),"width"in Wr&&(na=Wr.width,$(na>=0&&na<=Ke.maxTextureSize,"invalid width")),"height"in Wr&&(oo=Wr.height,$(oo>=0&&oo<=Ke.maxTextureSize,"invalid height")),"channels"in Wr&&(Sn=Wr.channels,$(Sn>0&&Sn<=4,"invalid number of channels"),rn=!0)),jn.width=na|0,jn.height=oo|0,jn.channels=Sn|0;var nr=!1;if("format"in Wr){var Or=Wr.format;$(xe.webgl_depth_texture||!(Or==="depth"||Or==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),$.parameter(Or,pi,"invalid texture format");var wr=jn.internalformat=pi[Or];jn.format=Ai[wr],Or in Ti&&("type"in Wr||(jn.type=Ti[Or])),Or in gi&&(jn.compressed=!0),nr=!0}!rn&&nr?jn.channels=eu[jn.format]:rn&&!nr?jn.channels!==is[jn.format]&&(jn.format=jn.internalformat=is[jn.channels]):nr&&rn&&$(jn.channels===eu[jn.format],"number of channels inconsistent with specified format")}}function ma(jn){ce.pixelStorei(Ju,jn.flipY),ce.pixelStorei(Sc,jn.premultiplyAlpha),ce.pixelStorei(Wl,jn.colorSpace),ce.pixelStorei(ul,jn.unpackAlignment)}function ji(){Ei.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Si(jn,Wr){var Ur=null;if(hr(Wr)?Ur=Wr:Wr&&($.type(Wr,"object","invalid pixel data type"),fa(jn,Wr),"x"in Wr&&(jn.xOffset=Wr.x|0),"y"in Wr&&(jn.yOffset=Wr.y|0),hr(Wr.data)&&(Ur=Wr.data)),$(!jn.compressed||Ur instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Wr.copy){$(!Ur,"can not specify copy and data field for the same texture");var na=lr.viewportWidth,oo=lr.viewportHeight;jn.width=jn.width||na-jn.xOffset,jn.height=jn.height||oo-jn.yOffset,jn.needsCopy=!0,$(jn.xOffset>=0&&jn.xOffset<na&&jn.yOffset>=0&&jn.yOffset<oo&&jn.width>0&&jn.width<=na&&jn.height>0&&jn.height<=oo,"copy texture read out of bounds")}else if(!Ur)jn.width=jn.width||1,jn.height=jn.height||1,jn.channels=jn.channels||4;else if(V(Ur))jn.channels=jn.channels||4,jn.data=Ur,!("type"in Wr)&&jn.type===gu&&(jn.type=Rr(Ur));else if(yu(Ur))jn.channels=jn.channels||4,Xr(jn,Ur),jn.alignment=1,jn.needsFree=!0;else if(se(Ur)){var Sn=Ur.data;!Array.isArray(Sn)&&jn.type===gu&&(jn.type=Rr(Sn));var rn=Ur.shape,nr=Ur.stride,Or,wr,ur,ar,Er,Tn;rn.length===3?(ur=rn[2],Tn=nr[2]):($(rn.length===2,"invalid ndarray pixel data, must be 2 or 3D"),ur=1,Tn=1),Or=rn[0],wr=rn[1],ar=nr[0],Er=nr[1],jn.alignment=1,jn.width=Or,jn.height=wr,jn.channels=ur,jn.format=jn.internalformat=is[ur],jn.needsFree=!0,li(jn,Sn,ar,Er,Tn,Ur.offset)}else if(Ks(Ur)||we(Ur)||Pe(Ur))Ks(Ur)||we(Ur)?jn.element=Ur:jn.element=Ur.canvas,jn.width=jn.element.width,jn.height=jn.element.height,jn.channels=4;else if(hn(Ur))jn.element=Ur,jn.width=Ur.width,jn.height=Ur.height,jn.channels=4;else if(tn(Ur))jn.element=Ur,jn.width=Ur.naturalWidth,jn.height=Ur.naturalHeight,jn.channels=4;else if(On(Ur))jn.element=Ur,jn.width=Ur.videoWidth,jn.height=Ur.videoHeight,jn.channels=4;else if(Cu(Ur)){var Jn=jn.width||Ur[0].length,bn=jn.height||Ur.length,Tr=jn.channels;Co(Ur[0][0])?Tr=Tr||Ur[0][0].length:Tr=Tr||1;for(var Dr=Ee.shape(Ur),ci=1,Hr=0;Hr<Dr.length;++Hr)ci*=Dr[Hr];var ai=ni(jn,ci);Ee.flatten(Ur,Dr,"",ai),zr(jn,ai),jn.alignment=1,jn.width=Jn,jn.height=bn,jn.channels=Tr,jn.format=jn.internalformat=is[Tr],jn.needsFree=!0}jn.type===Ls?$(Ke.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):jn.type===qs&&$(Ke.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function di(jn,Wr,Ur){var na=jn.element,oo=jn.data,Sn=jn.internalformat,rn=jn.format,nr=jn.type,Or=jn.width,wr=jn.height;ma(jn),na?ce.texImage2D(Wr,Ur,rn,rn,nr,na):jn.compressed?ce.compressedTexImage2D(Wr,Ur,Sn,Or,wr,0,oo):jn.needsCopy?(zn(),ce.copyTexImage2D(Wr,Ur,rn,jn.xOffset,jn.yOffset,Or,wr,0)):ce.texImage2D(Wr,Ur,rn,Or,wr,0,rn,nr,oo||null)}function Qi(jn,Wr,Ur,na,oo){var Sn=jn.element,rn=jn.data,nr=jn.internalformat,Or=jn.format,wr=jn.type,ur=jn.width,ar=jn.height;ma(jn),Sn?ce.texSubImage2D(Wr,oo,Ur,na,Or,wr,Sn):jn.compressed?ce.compressedTexSubImage2D(Wr,oo,Ur,na,nr,ur,ar,rn):jn.needsCopy?(zn(),ce.copyTexSubImage2D(Wr,oo,Ur,na,jn.xOffset,jn.yOffset,ur,ar)):ce.texSubImage2D(Wr,oo,Ur,na,ur,ar,Or,wr,rn)}var aa=[];function $i(){return aa.pop()||new ji}function co(jn){jn.needsFree&&Mn.freeType(jn.data),ji.call(jn),aa.push(jn)}function mo(){Ei.call(this),this.genMipmaps=!1,this.mipmapHint=Da,this.mipmask=0,this.images=Array(16)}function No(jn,Wr,Ur){var na=jn.images[0]=$i();jn.mipmask=1,na.width=jn.width=Wr,na.height=jn.height=Ur,na.channels=jn.channels=4}function Ko(jn,Wr){var Ur=null;if(hr(Wr))Ur=jn.images[0]=$i(),Ii(Ur,jn),Si(Ur,Wr),jn.mipmask=1;else if(fa(jn,Wr),Array.isArray(Wr.mipmap))for(var na=Wr.mipmap,oo=0;oo<na.length;++oo)Ur=jn.images[oo]=$i(),Ii(Ur,jn),Ur.width>>=oo,Ur.height>>=oo,Si(Ur,na[oo]),jn.mipmask|=1<<oo;else Ur=jn.images[0]=$i(),Ii(Ur,jn),Si(Ur,Wr),jn.mipmask=1;Ii(jn,jn.images[0]),jn.compressed&&(jn.internalformat===Bu||jn.internalformat===vu||jn.internalformat===pu||jn.internalformat===Zs)&&$(jn.width%4==0&&jn.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Il(jn,Wr){for(var Ur=jn.images,na=0;na<Ur.length;++na){if(!Ur[na])return;di(Ur[na],Wr,na)}}var uc=[];function ts(){var jn=uc.pop()||new mo;Ei.call(jn),jn.mipmask=0;for(var Wr=0;Wr<16;++Wr)jn.images[Wr]=null;return jn}function _l(jn){for(var Wr=jn.images,Ur=0;Ur<Wr.length;++Ur)Wr[Ur]&&co(Wr[Ur]),Wr[Ur]=null;uc.push(jn)}function wu(){this.minFilter=Al,this.magFilter=Al,this.wrapS=Bl,this.wrapT=Bl,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Da}function Zl(jn,Wr){if("min"in Wr){var Ur=Wr.min;$.parameter(Ur,ui),jn.minFilter=ui[Ur],Ws.indexOf(jn.minFilter)>=0&&!("faces"in Wr)&&(jn.genMipmaps=!0)}if("mag"in Wr){var na=Wr.mag;$.parameter(na,ri),jn.magFilter=ri[na]}var oo=jn.wrapS,Sn=jn.wrapT;if("wrap"in Wr){var rn=Wr.wrap;typeof rn=="string"?($.parameter(rn,qr),oo=Sn=qr[rn]):Array.isArray(rn)&&($.parameter(rn[0],qr),$.parameter(rn[1],qr),oo=qr[rn[0]],Sn=qr[rn[1]])}else{if("wrapS"in Wr){var nr=Wr.wrapS;$.parameter(nr,qr),oo=qr[nr]}if("wrapT"in Wr){var Or=Wr.wrapT;$.parameter(Or,qr),Sn=qr[Or]}}if(jn.wrapS=oo,jn.wrapT=Sn,"anisotropic"in Wr){var wr=Wr.anisotropic;$(typeof wr=="number"&&wr>=1&&wr<=Ke.maxAnisotropic,"aniso samples must be between 1 and "),jn.anisotropic=Wr.anisotropic}if("mipmap"in Wr){var ur=!1;switch(typeof Wr.mipmap){case"string":$.parameter(Wr.mipmap,Jr,"invalid mipmap hint"),jn.mipmapHint=Jr[Wr.mipmap],jn.genMipmaps=!0,ur=!0;break;case"boolean":ur=jn.genMipmaps=Wr.mipmap;break;case"object":$(Array.isArray(Wr.mipmap),"invalid mipmap type"),jn.genMipmaps=!1,ur=!0;break;default:$.raise("invalid mipmap type")}ur&&!("min"in Wr)&&(jn.minFilter=Oo)}}function $l(jn,Wr){ce.texParameteri(Wr,Xu,jn.minFilter),ce.texParameteri(Wr,pc,jn.magFilter),ce.texParameteri(Wr,yl,jn.wrapS),ce.texParameteri(Wr,ic,jn.wrapT),xe.ext_texture_filter_anisotropic&&ce.texParameteri(Wr,Cl,jn.anisotropic),jn.genMipmaps&&(ce.hint(Vs,jn.mipmapHint),ce.generateMipmap(Wr))}var lc=0,mc={},cc=Ke.maxTextureUnits,fl=Array(cc).map(function(){return null});function Io(jn){Ei.call(this),this.mipmask=0,this.internalformat=gs,this.id=lc++,this.refCount=1,this.target=jn,this.texture=ce.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new wu,Qn.profile&&(this.stats={size:0})}function yc(jn){ce.activeTexture(tu),ce.bindTexture(jn.target,jn.texture)}function zs(){var jn=fl[0];jn?ce.bindTexture(jn.target,jn.texture):ce.bindTexture(Bo,null)}function Ya(jn){var Wr=jn.texture;$(Wr,"must not double destroy texture");var Ur=jn.unit,na=jn.target;Ur>=0&&(ce.activeTexture(tu+Ur),ce.bindTexture(na,null),fl[Ur]=null),ce.deleteTexture(Wr),jn.texture=null,jn.params=null,jn.pixels=null,jn.refCount=0,delete mc[jn.id],pr.textureCount--}E(Io.prototype,{bind:function(){var Wr=this;Wr.bindCount+=1;var Ur=Wr.unit;if(Ur<0){for(var na=0;na<cc;++na){var oo=fl[na];if(oo){if(oo.bindCount>0)continue;oo.unit=-1}fl[na]=Wr,Ur=na;break}Ur>=cc&&$.raise("insufficient number of texture units"),Qn.profile&&pr.maxTextureUnits<Ur+1&&(pr.maxTextureUnits=Ur+1),Wr.unit=Ur,ce.activeTexture(tu+Ur),ce.bindTexture(Wr.target,Wr.texture)}return Ur},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Ya(this)}});function So(jn,Wr){var Ur=new Io(Bo);mc[Ur.id]=Ur,pr.textureCount++;function na(rn,nr){var Or=Ur.texInfo;wu.call(Or);var wr=ts();return typeof rn=="number"?typeof nr=="number"?No(wr,rn|0,nr|0):No(wr,rn|0,rn|0):rn?($.type(rn,"object","invalid arguments to regl.texture"),Zl(Or,rn),Ko(wr,rn)):No(wr,1,1),Or.genMipmaps&&(wr.mipmask=(wr.width<<1)-1),Ur.mipmask=wr.mipmask,Ii(Ur,wr),$.texture2D(Or,wr,Ke),Ur.internalformat=wr.internalformat,na.width=wr.width,na.height=wr.height,yc(Ur),Il(wr,Bo),$l(Or,Bo),zs(),_l(wr),Qn.profile&&(Ur.stats.size=yr(Ur.internalformat,Ur.type,wr.width,wr.height,Or.genMipmaps,!1)),na.format=Mi[Ur.internalformat],na.type=Gi[Ur.type],na.mag=kr[Or.magFilter],na.min=ca[Or.minFilter],na.wrapS=Oi[Or.wrapS],na.wrapT=Oi[Or.wrapT],na}function oo(rn,nr,Or,wr){$(!!rn,"must specify image data");var ur=nr|0,ar=Or|0,Er=wr|0,Tn=$i();return Ii(Tn,Ur),Tn.width=0,Tn.height=0,Si(Tn,rn),Tn.width=Tn.width||(Ur.width>>Er)-ur,Tn.height=Tn.height||(Ur.height>>Er)-ar,$(Ur.type===Tn.type&&Ur.format===Tn.format&&Ur.internalformat===Tn.internalformat,"incompatible format for texture.subimage"),$(ur>=0&&ar>=0&&ur+Tn.width<=Ur.width&&ar+Tn.height<=Ur.height,"texture.subimage write out of bounds"),$(Ur.mipmask&1<<Er,"missing mipmap data"),$(Tn.data||Tn.element||Tn.needsCopy,"missing image data"),yc(Ur),Qi(Tn,Bo,ur,ar,Er),zs(),co(Tn),na}function Sn(rn,nr){var Or=rn|0,wr=nr|0||Or;if(Or===Ur.width&&wr===Ur.height)return na;na.width=Ur.width=Or,na.height=Ur.height=wr,yc(Ur);for(var ur=0;Ur.mipmask>>ur;++ur){var ar=Or>>ur,Er=wr>>ur;if(!ar||!Er)break;ce.texImage2D(Bo,ur,Ur.format,ar,Er,0,Ur.format,Ur.type,null)}return zs(),Qn.profile&&(Ur.stats.size=yr(Ur.internalformat,Ur.type,Or,wr,!1,!1)),na}return na(jn,Wr),na.subimage=oo,na.resize=Sn,na._reglType="texture2d",na._texture=Ur,Qn.profile&&(na.stats=Ur.stats),na.destroy=function(){Ur.decRef()},na}function as(jn,Wr,Ur,na,oo,Sn){var rn=new Io(uu);mc[rn.id]=rn,pr.cubeCount++;var nr=new Array(6);function Or(ar,Er,Tn,Jn,bn,Tr){var Dr,ci=rn.texInfo;for(wu.call(ci),Dr=0;Dr<6;++Dr)nr[Dr]=ts();if(typeof ar=="number"||!ar){var Hr=ar|0||1;for(Dr=0;Dr<6;++Dr)No(nr[Dr],Hr,Hr)}else if(typeof ar=="object")if(Er)Ko(nr[0],ar),Ko(nr[1],Er),Ko(nr[2],Tn),Ko(nr[3],Jn),Ko(nr[4],bn),Ko(nr[5],Tr);else if(Zl(ci,ar),fa(rn,ar),"faces"in ar){var ai=ar.faces;for($(Array.isArray(ai)&&ai.length===6,"cube faces must be a length 6 array"),Dr=0;Dr<6;++Dr)$(typeof ai[Dr]=="object"&&!!ai[Dr],"invalid input for cube map face"),Ii(nr[Dr],rn),Ko(nr[Dr],ai[Dr])}else for(Dr=0;Dr<6;++Dr)Ko(nr[Dr],ar);else $.raise("invalid arguments to cube map");for(Ii(rn,nr[0]),Ke.npotTextureCube||$(ka(rn.width)&&ka(rn.height),"your browser does not support non power or two texture dimensions"),ci.genMipmaps?rn.mipmask=(nr[0].width<<1)-1:rn.mipmask=nr[0].mipmask,$.textureCube(rn,ci,nr,Ke),rn.internalformat=nr[0].internalformat,Or.width=nr[0].width,Or.height=nr[0].height,yc(rn),Dr=0;Dr<6;++Dr)Il(nr[Dr],Hu+Dr);for($l(ci,uu),zs(),Qn.profile&&(rn.stats.size=yr(rn.internalformat,rn.type,Or.width,Or.height,ci.genMipmaps,!0)),Or.format=Mi[rn.internalformat],Or.type=Gi[rn.type],Or.mag=kr[ci.magFilter],Or.min=ca[ci.minFilter],Or.wrapS=Oi[ci.wrapS],Or.wrapT=Oi[ci.wrapT],Dr=0;Dr<6;++Dr)_l(nr[Dr]);return Or}function wr(ar,Er,Tn,Jn,bn){$(!!Er,"must specify image data"),$(typeof ar=="number"&&ar===(ar|0)&&ar>=0&&ar<6,"invalid face");var Tr=Tn|0,Dr=Jn|0,ci=bn|0,Hr=$i();return Ii(Hr,rn),Hr.width=0,Hr.height=0,Si(Hr,Er),Hr.width=Hr.width||(rn.width>>ci)-Tr,Hr.height=Hr.height||(rn.height>>ci)-Dr,$(rn.type===Hr.type&&rn.format===Hr.format&&rn.internalformat===Hr.internalformat,"incompatible format for texture.subimage"),$(Tr>=0&&Dr>=0&&Tr+Hr.width<=rn.width&&Dr+Hr.height<=rn.height,"texture.subimage write out of bounds"),$(rn.mipmask&1<<ci,"missing mipmap data"),$(Hr.data||Hr.element||Hr.needsCopy,"missing image data"),yc(rn),Qi(Hr,Hu+ar,Tr,Dr,ci),zs(),co(Hr),Or}function ur(ar){var Er=ar|0;if(Er!==rn.width){Or.width=rn.width=Er,Or.height=rn.height=Er,yc(rn);for(var Tn=0;Tn<6;++Tn)for(var Jn=0;rn.mipmask>>Jn;++Jn)ce.texImage2D(Hu+Tn,Jn,rn.format,Er>>Jn,Er>>Jn,0,rn.format,rn.type,null);return zs(),Qn.profile&&(rn.stats.size=yr(rn.internalformat,rn.type,Or.width,Or.height,!1,!0)),Or}}return Or(jn,Wr,Ur,na,oo,Sn),Or.subimage=wr,Or.resize=ur,Or._reglType="textureCube",Or._texture=rn,Qn.profile&&(Or.stats=rn.stats),Or.destroy=function(){rn.decRef()},Or}function xc(){for(var jn=0;jn<cc;++jn)ce.activeTexture(tu+jn),ce.bindTexture(Bo,null),fl[jn]=null;Yt(mc).forEach(Ya),pr.cubeCount=0,pr.textureCount=0}Qn.profile&&(pr.getTotalTextureSize=function(){var jn=0;return Object.keys(mc).forEach(function(Wr){jn+=mc[Wr].stats.size}),jn});function bc(){for(var jn=0;jn<cc;++jn){var Wr=fl[jn];Wr&&(Wr.bindCount=0,Wr.unit=-1,fl[jn]=null)}Yt(mc).forEach(function(Ur){Ur.texture=ce.createTexture(),ce.bindTexture(Ur.target,Ur.texture);for(var na=0;na<32;++na)if((Ur.mipmask&1<<na)!=0)if(Ur.target===Bo)ce.texImage2D(Bo,na,Ur.internalformat,Ur.width>>na,Ur.height>>na,0,Ur.internalformat,Ur.type,null);else for(var oo=0;oo<6;++oo)ce.texImage2D(Hu+oo,na,Ur.internalformat,Ur.width>>na,Ur.height>>na,0,Ur.internalformat,Ur.type,null);$l(Ur.texInfo,Ur.target)})}function sf(){for(var jn=0;jn<cc;++jn){var Wr=fl[jn];Wr&&(Wr.bindCount=0,Wr.unit=-1,fl[jn]=null),ce.activeTexture(tu+jn),ce.bindTexture(Bo,null),ce.bindTexture(uu,null)}}return{create2D:So,createCube:as,clear:xc,getTexture:function(Wr){return null},restore:bc,refresh:sf}}var te=36161,Le=32854,Se=32855,Dt=36194,zt=33189,oe=36168,ne=34041,he=35907,Fe=34836,Ze=34842,nn=34843,Je=[];Je[Le]=2,Je[Se]=2,Je[Dt]=2,Je[zt]=2,Je[oe]=1,Je[ne]=4,Je[he]=4,Je[Fe]=16,Je[Ze]=8,Je[nn]=6;function pn(ce,xe,Ke){return Je[ce]*xe*Ke}var fn=function(xe,Ke,zn,lr,pr){var Qn={rgba4:Le,rgb565:Dt,"rgb5 a1":Se,depth:zt,stencil:oe,"depth stencil":ne};Ke.ext_srgb&&(Qn.srgba=he),Ke.ext_color_buffer_half_float&&(Qn.rgba16f=Ze,Qn.rgb16f=nn),Ke.webgl_color_buffer_float&&(Qn.rgba32f=Fe);var Jr=[];Object.keys(Qn).forEach(function(gi){var Cr=Qn[gi];Jr[Cr]=gi});var qr=0,ri={};function ui(gi){this.id=qr++,this.refCount=1,this.renderbuffer=gi,this.format=Le,this.width=0,this.height=0,pr.profile&&(this.stats={size:0})}ui.prototype.decRef=function(){--this.refCount<=0&&yi(this)};function yi(gi){var Cr=gi.renderbuffer;$(Cr,"must not double destroy renderbuffer"),xe.bindRenderbuffer(te,null),xe.deleteRenderbuffer(Cr),gi.renderbuffer=null,gi.refCount=0,delete ri[gi.id],lr.renderbufferCount--}function Ti(gi,Cr){var Ir=new ui(xe.createRenderbuffer());ri[Ir.id]=Ir,lr.renderbufferCount++;function Mi(kr,ca){var Oi=0,Ai=0,Ei=Le;if(typeof kr=="object"&&kr){var Ii=kr;if("shape"in Ii){var fa=Ii.shape;$(Array.isArray(fa)&&fa.length>=2,"invalid renderbuffer shape"),Oi=fa[0]|0,Ai=fa[1]|0}else"radius"in Ii&&(Oi=Ai=Ii.radius|0),"width"in Ii&&(Oi=Ii.width|0),"height"in Ii&&(Ai=Ii.height|0);"format"in Ii&&($.parameter(Ii.format,Qn,"invalid renderbuffer format"),Ei=Qn[Ii.format])}else typeof kr=="number"?(Oi=kr|0,typeof ca=="number"?Ai=ca|0:Ai=Oi):kr?$.raise("invalid arguments to renderbuffer constructor"):Oi=Ai=1;if($(Oi>0&&Ai>0&&Oi<=zn.maxRenderbufferSize&&Ai<=zn.maxRenderbufferSize,"invalid renderbuffer size"),!(Oi===Ir.width&&Ai===Ir.height&&Ei===Ir.format))return Mi.width=Ir.width=Oi,Mi.height=Ir.height=Ai,Ir.format=Ei,xe.bindRenderbuffer(te,Ir.renderbuffer),xe.renderbufferStorage(te,Ei,Oi,Ai),$(xe.getError()===0,"invalid render buffer format"),pr.profile&&(Ir.stats.size=pn(Ir.format,Ir.width,Ir.height)),Mi.format=Jr[Ir.format],Mi}function Gi(kr,ca){var Oi=kr|0,Ai=ca|0||Oi;return Oi===Ir.width&&Ai===Ir.height||($(Oi>0&&Ai>0&&Oi<=zn.maxRenderbufferSize&&Ai<=zn.maxRenderbufferSize,"invalid renderbuffer size"),Mi.width=Ir.width=Oi,Mi.height=Ir.height=Ai,xe.bindRenderbuffer(te,Ir.renderbuffer),xe.renderbufferStorage(te,Ir.format,Oi,Ai),$(xe.getError()===0,"invalid render buffer format"),pr.profile&&(Ir.stats.size=pn(Ir.format,Ir.width,Ir.height))),Mi}return Mi(gi,Cr),Mi.resize=Gi,Mi._reglType="renderbuffer",Mi._renderbuffer=Ir,pr.profile&&(Mi.stats=Ir.stats),Mi.destroy=function(){Ir.decRef()},Mi}pr.profile&&(lr.getTotalRenderbufferSize=function(){var gi=0;return Object.keys(ri).forEach(function(Cr){gi+=ri[Cr].stats.size}),gi});function pi(){Yt(ri).forEach(function(gi){gi.renderbuffer=xe.createRenderbuffer(),xe.bindRenderbuffer(te,gi.renderbuffer),xe.renderbufferStorage(te,gi.format,gi.width,gi.height)}),xe.bindRenderbuffer(te,null)}return{create:Ti,clear:function(){Yt(ri).forEach(yi)},restore:pi}},Hn=36160,Un=36161,Vn=3553,Gn=34069,dr=36064,br=36096,Kr=36128,mi=33306,jr=36053,oi=36054,fi=36055,Hi=36057,Di=36061,Ma=36193,xa=5121,Pa=5126,ei=6407,Ea=6408,Ga=6402,Ha=[ei,Ea],Li=[];Li[Ea]=4,Li[ei]=3;var Ia=[];Ia[xa]=1,Ia[Pa]=4,Ia[Ma]=2;var Eo=32854,Hs=32855,Fs=36194,Ol=33189,xu=36168,j=34041,I=35907,w=34836,B=34842,D=34843,W=[Eo,Hs,Fs,I,B,D,w],tt={};tt[jr]="complete",tt[oi]="incomplete attachment",tt[Hi]="incomplete dimensions",tt[fi]="incomplete, missing attachment",tt[Di]="unsupported";function st(ce,xe,Ke,zn,lr,pr){var Qn={cur:null,next:null,dirty:!1,setFBO:null},Jr=["rgba"],qr=["rgba4","rgb565","rgb5 a1"];xe.ext_srgb&&qr.push("srgba"),xe.ext_color_buffer_half_float&&qr.push("rgba16f","rgb16f"),xe.webgl_color_buffer_float&&qr.push("rgba32f");var ri=["uint8"];xe.oes_texture_half_float&&ri.push("half float","float16"),xe.oes_texture_float&&ri.push("float","float32");function ui(ji,Si,di){this.target=ji,this.texture=Si,this.renderbuffer=di;var Qi=0,aa=0;Si?(Qi=Si.width,aa=Si.height):di&&(Qi=di.width,aa=di.height),this.width=Qi,this.height=aa}function yi(ji){ji&&(ji.texture&&ji.texture._texture.decRef(),ji.renderbuffer&&ji.renderbuffer._renderbuffer.decRef())}function Ti(ji,Si,di){if(!!ji)if(ji.texture){var Qi=ji.texture._texture,aa=Math.max(1,Qi.width),$i=Math.max(1,Qi.height);$(aa===Si&&$i===di,"inconsistent width/height for supplied texture"),Qi.refCount+=1}else{var co=ji.renderbuffer._renderbuffer;$(co.width===Si&&co.height===di,"inconsistent width/height for renderbuffer"),co.refCount+=1}}function pi(ji,Si){Si&&(Si.texture?ce.framebufferTexture2D(Hn,ji,Si.target,Si.texture._texture.texture,0):ce.framebufferRenderbuffer(Hn,ji,Un,Si.renderbuffer._renderbuffer.renderbuffer))}function gi(ji){var Si=Vn,di=null,Qi=null,aa=ji;typeof ji=="object"&&(aa=ji.data,"target"in ji&&(Si=ji.target|0)),$.type(aa,"function","invalid attachment data");var $i=aa._reglType;return $i==="texture2d"?(di=aa,$(Si===Vn)):$i==="textureCube"?(di=aa,$(Si>=Gn&&Si<Gn+6,"invalid cube map target")):$i==="renderbuffer"?(Qi=aa,Si=Un):$.raise("invalid regl object for attachment"),new ui(Si,di,Qi)}function Cr(ji,Si,di,Qi,aa){if(di){var $i=zn.create2D({width:ji,height:Si,format:Qi,type:aa});return $i._texture.refCount=0,new ui(Vn,$i,null)}else{var co=lr.create({width:ji,height:Si,format:Qi});return co._renderbuffer.refCount=0,new ui(Un,null,co)}}function Ir(ji){return ji&&(ji.texture||ji.renderbuffer)}function Mi(ji,Si,di){ji&&(ji.texture?ji.texture.resize(Si,di):ji.renderbuffer&&ji.renderbuffer.resize(Si,di),ji.width=Si,ji.height=di)}var Gi=0,kr={};function ca(){this.id=Gi++,kr[this.id]=this,this.framebuffer=ce.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Oi(ji){ji.colorAttachments.forEach(yi),yi(ji.depthAttachment),yi(ji.stencilAttachment),yi(ji.depthStencilAttachment)}function Ai(ji){var Si=ji.framebuffer;$(Si,"must not double destroy framebuffer"),ce.deleteFramebuffer(Si),ji.framebuffer=null,pr.framebufferCount--,delete kr[ji.id]}function Ei(ji){var Si;ce.bindFramebuffer(Hn,ji.framebuffer);var di=ji.colorAttachments;for(Si=0;Si<di.length;++Si)pi(dr+Si,di[Si]);for(Si=di.length;Si<Ke.maxColorAttachments;++Si)ce.framebufferTexture2D(Hn,dr+Si,Vn,null,0);ce.framebufferTexture2D(Hn,mi,Vn,null,0),ce.framebufferTexture2D(Hn,br,Vn,null,0),ce.framebufferTexture2D(Hn,Kr,Vn,null,0),pi(br,ji.depthAttachment),pi(Kr,ji.stencilAttachment),pi(mi,ji.depthStencilAttachment);var Qi=ce.checkFramebufferStatus(Hn);!ce.isContextLost()&&Qi!==jr&&$.raise("framebuffer configuration not supported, status = "+tt[Qi]),ce.bindFramebuffer(Hn,Qn.next?Qn.next.framebuffer:null),Qn.cur=Qn.next,ce.getError()}function Ii(ji,Si){var di=new ca;pr.framebufferCount++;function Qi($i,co){var mo;$(Qn.next!==di,"can not update framebuffer which is currently in use");var No=0,Ko=0,Il=!0,uc=!0,ts=null,_l=!0,wu="rgba",Zl="uint8",$l=1,lc=null,mc=null,cc=null,fl=!1;if(typeof $i=="number")No=$i|0,Ko=co|0||No;else if(!$i)No=Ko=1;else{$.type($i,"object","invalid arguments for framebuffer");var Io=$i;if("shape"in Io){var yc=Io.shape;$(Array.isArray(yc)&&yc.length>=2,"invalid shape for framebuffer"),No=yc[0],Ko=yc[1]}else"radius"in Io&&(No=Ko=Io.radius),"width"in Io&&(No=Io.width),"height"in Io&&(Ko=Io.height);("color"in Io||"colors"in Io)&&(ts=Io.color||Io.colors,Array.isArray(ts)&&$(ts.length===1||xe.webgl_draw_buffers,"multiple render targets not supported")),ts||("colorCount"in Io&&($l=Io.colorCount|0,$($l>0,"invalid color buffer count")),"colorTexture"in Io&&(_l=!!Io.colorTexture,wu="rgba4"),"colorType"in Io&&(Zl=Io.colorType,_l?($(xe.oes_texture_float||!(Zl==="float"||Zl==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),$(xe.oes_texture_half_float||!(Zl==="half float"||Zl==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Zl==="half float"||Zl==="float16"?($(xe.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),wu="rgba16f"):(Zl==="float"||Zl==="float32")&&($(xe.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),wu="rgba32f"),$.oneOf(Zl,ri,"invalid color type")),"colorFormat"in Io&&(wu=Io.colorFormat,Jr.indexOf(wu)>=0?_l=!0:qr.indexOf(wu)>=0?_l=!1:_l?$.oneOf(Io.colorFormat,Jr,"invalid color format for texture"):$.oneOf(Io.colorFormat,qr,"invalid color format for renderbuffer"))),("depthTexture"in Io||"depthStencilTexture"in Io)&&(fl=!!(Io.depthTexture||Io.depthStencilTexture),$(!fl||xe.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Io&&(typeof Io.depth=="boolean"?Il=Io.depth:(lc=Io.depth,uc=!1)),"stencil"in Io&&(typeof Io.stencil=="boolean"?uc=Io.stencil:(mc=Io.stencil,Il=!1)),"depthStencil"in Io&&(typeof Io.depthStencil=="boolean"?Il=uc=Io.depthStencil:(cc=Io.depthStencil,Il=!1,uc=!1))}var zs=null,Ya=null,So=null,as=null;if(Array.isArray(ts))zs=ts.map(gi);else if(ts)zs=[gi(ts)];else for(zs=new Array($l),mo=0;mo<$l;++mo)zs[mo]=Cr(No,Ko,_l,wu,Zl);$(xe.webgl_draw_buffers||zs.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),$(zs.length<=Ke.maxColorAttachments,"too many color attachments, not supported"),No=No||zs[0].width,Ko=Ko||zs[0].height,lc?Ya=gi(lc):Il&&!uc&&(Ya=Cr(No,Ko,fl,"depth","uint32")),mc?So=gi(mc):uc&&!Il&&(So=Cr(No,Ko,!1,"stencil","uint8")),cc?as=gi(cc):!lc&&!mc&&uc&&Il&&(as=Cr(No,Ko,fl,"depth stencil","depth stencil")),$(!!lc+!!mc+!!cc<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var xc=null;for(mo=0;mo<zs.length;++mo)if(Ti(zs[mo],No,Ko),$(!zs[mo]||zs[mo].texture&&Ha.indexOf(zs[mo].texture._texture.format)>=0||zs[mo].renderbuffer&&W.indexOf(zs[mo].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+mo+" is invalid"),zs[mo]&&zs[mo].texture){var bc=Li[zs[mo].texture._texture.format]*Ia[zs[mo].texture._texture.type];xc===null?xc=bc:$(xc===bc,"all color attachments much have the same number of bits per pixel.")}return Ti(Ya,No,Ko),$(!Ya||Ya.texture&&Ya.texture._texture.format===Ga||Ya.renderbuffer&&Ya.renderbuffer._renderbuffer.format===Ol,"invalid depth attachment for framebuffer object"),Ti(So,No,Ko),$(!So||So.renderbuffer&&So.renderbuffer._renderbuffer.format===xu,"invalid stencil attachment for framebuffer object"),Ti(as,No,Ko),$(!as||as.texture&&as.texture._texture.format===j||as.renderbuffer&&as.renderbuffer._renderbuffer.format===j,"invalid depth-stencil attachment for framebuffer object"),Oi(di),di.width=No,di.height=Ko,di.colorAttachments=zs,di.depthAttachment=Ya,di.stencilAttachment=So,di.depthStencilAttachment=as,Qi.color=zs.map(Ir),Qi.depth=Ir(Ya),Qi.stencil=Ir(So),Qi.depthStencil=Ir(as),Qi.width=di.width,Qi.height=di.height,Ei(di),Qi}function aa($i,co){$(Qn.next!==di,"can not resize a framebuffer which is currently in use");var mo=Math.max($i|0,1),No=Math.max(co|0||mo,1);if(mo===di.width&&No===di.height)return Qi;for(var Ko=di.colorAttachments,Il=0;Il<Ko.length;++Il)Mi(Ko[Il],mo,No);return Mi(di.depthAttachment,mo,No),Mi(di.stencilAttachment,mo,No),Mi(di.depthStencilAttachment,mo,No),di.width=Qi.width=mo,di.height=Qi.height=No,Ei(di),Qi}return Qi(ji,Si),E(Qi,{resize:aa,_reglType:"framebuffer",_framebuffer:di,destroy:function(){Ai(di),Oi(di)},use:function(co){Qn.setFBO({framebuffer:Qi},co)}})}function fa(ji){var Si=Array(6);function di(aa){var $i;$(Si.indexOf(Qn.next)<0,"can not update framebuffer which is currently in use");var co={color:null},mo=0,No=null,Ko="rgba",Il="uint8",uc=1;if(typeof aa=="number")mo=aa|0;else if(!aa)mo=1;else{$.type(aa,"object","invalid arguments for framebuffer");var ts=aa;if("shape"in ts){var _l=ts.shape;$(Array.isArray(_l)&&_l.length>=2,"invalid shape for framebuffer"),$(_l[0]===_l[1],"cube framebuffer must be square"),mo=_l[0]}else"radius"in ts&&(mo=ts.radius|0),"width"in ts?(mo=ts.width|0,"height"in ts&&$(ts.height===mo,"must be square")):"height"in ts&&(mo=ts.height|0);("color"in ts||"colors"in ts)&&(No=ts.color||ts.colors,Array.isArray(No)&&$(No.length===1||xe.webgl_draw_buffers,"multiple render targets not supported")),No||("colorCount"in ts&&(uc=ts.colorCount|0,$(uc>0,"invalid color buffer count")),"colorType"in ts&&($.oneOf(ts.colorType,ri,"invalid color type"),Il=ts.colorType),"colorFormat"in ts&&(Ko=ts.colorFormat,$.oneOf(ts.colorFormat,Jr,"invalid color format for texture"))),"depth"in ts&&(co.depth=ts.depth),"stencil"in ts&&(co.stencil=ts.stencil),"depthStencil"in ts&&(co.depthStencil=ts.depthStencil)}var wu;if(No)if(Array.isArray(No))for(wu=[],$i=0;$i<No.length;++$i)wu[$i]=No[$i];else wu=[No];else{wu=Array(uc);var Zl={radius:mo,format:Ko,type:Il};for($i=0;$i<uc;++$i)wu[$i]=zn.createCube(Zl)}for(co.color=Array(wu.length),$i=0;$i<wu.length;++$i){var $l=wu[$i];$(typeof $l=="function"&&$l._reglType==="textureCube","invalid cube map"),mo=mo||$l.width,$($l.width===mo&&$l.height===mo,"invalid cube map shape"),co.color[$i]={target:Gn,data:wu[$i]}}for($i=0;$i<6;++$i){for(var lc=0;lc<wu.length;++lc)co.color[lc].target=Gn+$i;$i>0&&(co.depth=Si[0].depth,co.stencil=Si[0].stencil,co.depthStencil=Si[0].depthStencil),Si[$i]?Si[$i](co):Si[$i]=Ii(co)}return E(di,{width:mo,height:mo,color:wu})}function Qi(aa){var $i,co=aa|0;if($(co>0&&co<=Ke.maxCubeMapSize,"invalid radius for cube fbo"),co===di.width)return di;var mo=di.color;for($i=0;$i<mo.length;++$i)mo[$i].resize(co);for($i=0;$i<6;++$i)Si[$i].resize(co);return di.width=di.height=co,di}return di(ji),E(di,{faces:Si,resize:Qi,_reglType:"framebufferCube",destroy:function(){Si.forEach(function($i){$i.destroy()})}})}function ma(){Qn.cur=null,Qn.next=null,Qn.dirty=!0,Yt(kr).forEach(function(ji){ji.framebuffer=ce.createFramebuffer(),Ei(ji)})}return E(Qn,{getFramebuffer:function(Si){if(typeof Si=="function"&&Si._reglType==="framebuffer"){var di=Si._framebuffer;if(di instanceof ca)return di}return null},create:Ii,createCube:fa,clear:function(){Yt(kr).forEach(Ai)},restore:ma})}var Ct=5126,It=34962;function Ut(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ct,this.offset=0,this.stride=0,this.divisor=0}function Zt(ce,xe,Ke,zn,lr){for(var pr=Ke.maxAttributes,Qn=new Array(pr),Jr=0;Jr<pr;++Jr)Qn[Jr]=new Ut;var qr=0,ri={},ui={Record:Ut,scope:{},state:Qn,currentVAO:null,targetVAO:null,restore:Ti()?kr:function(){},createVAO:ca,getVAO:gi,destroyBuffer:yi,setVAO:Ti()?Cr:Ir,clear:Ti()?Mi:function(){}};function yi(Oi){for(var Ai=0;Ai<Qn.length;++Ai){var Ei=Qn[Ai];Ei.buffer===Oi&&(ce.disableVertexAttribArray(Ai),Ei.buffer=null)}}function Ti(){return xe.oes_vertex_array_object}function pi(){return xe.angle_instanced_arrays}function gi(Oi){return typeof Oi=="function"&&Oi._vao?Oi._vao:null}function Cr(Oi){if(Oi!==ui.currentVAO){var Ai=Ti();Oi?Ai.bindVertexArrayOES(Oi.vao):Ai.bindVertexArrayOES(null),ui.currentVAO=Oi}}function Ir(Oi){if(Oi!==ui.currentVAO){if(Oi)Oi.bindAttrs();else for(var Ai=pi(),Ei=0;Ei<Qn.length;++Ei){var Ii=Qn[Ei];Ii.buffer?(ce.enableVertexAttribArray(Ei),ce.vertexAttribPointer(Ei,Ii.size,Ii.type,Ii.normalized,Ii.stride,Ii.offfset),Ai&&Ii.divisor&&Ai.vertexAttribDivisorANGLE(Ei,Ii.divisor)):(ce.disableVertexAttribArray(Ei),ce.vertexAttrib4f(Ei,Ii.x,Ii.y,Ii.z,Ii.w))}ui.currentVAO=Oi}}function Mi(){Yt(ri).forEach(function(Oi){Oi.destroy()})}function Gi(){this.id=++qr,this.attributes=[];var Oi=Ti();Oi?this.vao=Oi.createVertexArrayOES():this.vao=null,ri[this.id]=this,this.buffers=[]}Gi.prototype.bindAttrs=function(){for(var Oi=pi(),Ai=this.attributes,Ei=0;Ei<Ai.length;++Ei){var Ii=Ai[Ei];Ii.buffer?(ce.enableVertexAttribArray(Ei),ce.bindBuffer(It,Ii.buffer.buffer),ce.vertexAttribPointer(Ei,Ii.size,Ii.type,Ii.normalized,Ii.stride,Ii.offset),Oi&&Ii.divisor&&Oi.vertexAttribDivisorANGLE(Ei,Ii.divisor)):(ce.disableVertexAttribArray(Ei),ce.vertexAttrib4f(Ei,Ii.x,Ii.y,Ii.z,Ii.w))}for(var fa=Ai.length;fa<pr;++fa)ce.disableVertexAttribArray(fa)},Gi.prototype.refresh=function(){var Oi=Ti();Oi&&(Oi.bindVertexArrayOES(this.vao),this.bindAttrs(),ui.currentVAO=this)},Gi.prototype.destroy=function(){if(this.vao){var Oi=Ti();this===ui.currentVAO&&(ui.currentVAO=null,Oi.bindVertexArrayOES(null)),Oi.deleteVertexArrayOES(this.vao),this.vao=null}ri[this.id]&&(delete ri[this.id],zn.vaoCount-=1)};function kr(){var Oi=Ti();Oi&&Yt(ri).forEach(function(Ai){Ai.refresh()})}function ca(Oi){var Ai=new Gi;zn.vaoCount+=1;function Ei(Ii){$(Array.isArray(Ii),"arguments to vertex array constructor must be an array"),$(Ii.length<pr,"too many attributes"),$(Ii.length>0,"must specify at least one attribute");var fa={},ma=Ai.attributes;ma.length=Ii.length;for(var ji=0;ji<Ii.length;++ji){var Si=Ii[ji],di=ma[ji]=new Ut,Qi=Si.data||Si;if(Array.isArray(Qi)||V(Qi)||se(Qi)){var aa;Ai.buffers[ji]&&(aa=Ai.buffers[ji],V(Qi)&&aa._buffer.byteLength>=Qi.byteLength?aa.subdata(Qi):(aa.destroy(),Ai.buffers[ji]=null)),Ai.buffers[ji]||(aa=Ai.buffers[ji]=lr.create(Si,It,!1,!0)),di.buffer=lr.getBuffer(aa),di.size=di.buffer.dimension|0,di.normalized=!1,di.type=di.buffer.dtype,di.offset=0,di.stride=0,di.divisor=0,di.state=1,fa[ji]=1}else lr.getBuffer(Si)?(di.buffer=lr.getBuffer(Si),di.size=di.buffer.dimension|0,di.normalized=!1,di.type=di.buffer.dtype,di.offset=0,di.stride=0,di.divisor=0,di.state=1):lr.getBuffer(Si.buffer)?(di.buffer=lr.getBuffer(Si.buffer),di.size=(+Si.size||di.buffer.dimension)|0,di.normalized=!!Si.normalized||!1,"type"in Si?($.parameter(Si.type,Ja,"invalid buffer type"),di.type=Ja[Si.type]):di.type=di.buffer.dtype,di.offset=(Si.offset||0)|0,di.stride=(Si.stride||0)|0,di.divisor=(Si.divisor||0)|0,di.state=1,$(di.size>=1&&di.size<=4,"size must be between 1 and 4"),$(di.offset>=0,"invalid offset"),$(di.stride>=0&&di.stride<=255,"stride must be between 0 and 255"),$(di.divisor>=0,"divisor must be positive"),$(!di.divisor||!!xe.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Si?($(ji>0,"first attribute must not be a constant"),di.x=+Si.x||0,di.y=+Si.y||0,di.z=+Si.z||0,di.w=+Si.w||0,di.state=2):$(!1,"invalid attribute spec for location "+ji)}for(var $i=0;$i<Ai.buffers.length;++$i)!fa[$i]&&Ai.buffers[$i]&&(Ai.buffers[$i].destroy(),Ai.buffers[$i]=null);return Ai.refresh(),Ei}return Ei.destroy=function(){for(var Ii=0;Ii<Ai.buffers.length;++Ii)Ai.buffers[Ii]&&Ai.buffers[Ii].destroy();Ai.buffers.length=0,Ai.destroy()},Ei._vao=Ai,Ei._reglType="vao",Ei(Oi)}return ui}var qt=35632,de=35633,me=35718,je=35721;function Oe(ce,xe,Ke,zn){var lr={},pr={};function Qn(Cr,Ir,Mi,Gi){this.name=Cr,this.id=Ir,this.location=Mi,this.info=Gi}function Jr(Cr,Ir){for(var Mi=0;Mi<Cr.length;++Mi)if(Cr[Mi].id===Ir.id){Cr[Mi].location=Ir.location;return}Cr.push(Ir)}function qr(Cr,Ir,Mi){var Gi=Cr===qt?lr:pr,kr=Gi[Ir];if(!kr){var ca=xe.str(Ir);kr=ce.createShader(Cr),ce.shaderSource(kr,ca),ce.compileShader(kr),$.shaderError(ce,kr,ca,Cr,Mi),Gi[Ir]=kr}return kr}var ri={},ui=[],yi=0;function Ti(Cr,Ir){this.id=yi++,this.fragId=Cr,this.vertId=Ir,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,zn.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function pi(Cr,Ir,Mi){var Gi,kr,ca=qr(qt,Cr.fragId),Oi=qr(de,Cr.vertId),Ai=Cr.program=ce.createProgram();if(ce.attachShader(Ai,ca),ce.attachShader(Ai,Oi),Mi)for(Gi=0;Gi<Mi.length;++Gi){var Ei=Mi[Gi];ce.bindAttribLocation(Ai,Ei[0],Ei[1])}ce.linkProgram(Ai),$.linkError(ce,Ai,xe.str(Cr.fragId),xe.str(Cr.vertId),Ir);var Ii=ce.getProgramParameter(Ai,me);zn.profile&&(Cr.stats.uniformsCount=Ii);var fa=Cr.uniforms;for(Gi=0;Gi<Ii;++Gi)if(kr=ce.getActiveUniform(Ai,Gi),kr)if(kr.size>1)for(var ma=0;ma<kr.size;++ma){var ji=kr.name.replace("[0]","["+ma+"]");Jr(fa,new Qn(ji,xe.id(ji),ce.getUniformLocation(Ai,ji),kr))}else Jr(fa,new Qn(kr.name,xe.id(kr.name),ce.getUniformLocation(Ai,kr.name),kr));var Si=ce.getProgramParameter(Ai,je);zn.profile&&(Cr.stats.attributesCount=Si);var di=Cr.attributes;for(Gi=0;Gi<Si;++Gi)kr=ce.getActiveAttrib(Ai,Gi),kr&&Jr(di,new Qn(kr.name,xe.id(kr.name),ce.getAttribLocation(Ai,kr.name),kr))}zn.profile&&(Ke.getMaxUniformsCount=function(){var Cr=0;return ui.forEach(function(Ir){Ir.stats.uniformsCount>Cr&&(Cr=Ir.stats.uniformsCount)}),Cr},Ke.getMaxAttributesCount=function(){var Cr=0;return ui.forEach(function(Ir){Ir.stats.attributesCount>Cr&&(Cr=Ir.stats.attributesCount)}),Cr});function gi(){lr={},pr={};for(var Cr=0;Cr<ui.length;++Cr)pi(ui[Cr],null,ui[Cr].attributes.map(function(Ir){return[Ir.location,Ir.name]}))}return{clear:function(){var Ir=ce.deleteShader.bind(ce);Yt(lr).forEach(Ir),lr={},Yt(pr).forEach(Ir),pr={},ui.forEach(function(Mi){ce.deleteProgram(Mi.program)}),ui.length=0,ri={},Ke.shaderCount=0},program:function(Ir,Mi,Gi,kr){$.command(Ir>=0,"missing vertex shader",Gi),$.command(Mi>=0,"missing fragment shader",Gi);var ca=ri[Mi];ca||(ca=ri[Mi]={});var Oi=ca[Ir];if(Oi&&(Oi.refCount++,!kr))return Oi;var Ai=new Ti(Mi,Ir);return Ke.shaderCount++,pi(Ai,Gi,kr),Oi||(ca[Ir]=Ai),ui.push(Ai),E(Ai,{destroy:function(){if(Ai.refCount--,Ai.refCount<=0){ce.deleteProgram(Ai.program);var Ii=ui.indexOf(Ai);ui.splice(Ii,1),Ke.shaderCount--}ca[Ai.vertId].refCount<=0&&(ce.deleteShader(pr[Ai.vertId]),delete pr[Ai.vertId],delete ri[Ai.fragId][Ai.vertId]),Object.keys(ri[Ai.fragId]).length||(ce.deleteShader(lr[Ai.fragId]),delete lr[Ai.fragId],delete ri[Ai.fragId])}})},restore:gi,shader:qr,frag:-1,vert:-1}}var ke=6408,qe=5121,an=3333,Xn=5126;function kn(ce,xe,Ke,zn,lr,pr,Qn){function Jr(ui){var yi;xe.next===null?($(lr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),yi=qe):($(xe.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),yi=xe.next.colorAttachments[0].texture._texture.type,pr.oes_texture_float?($(yi===qe||yi===Xn,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),yi===Xn&&$(Qn.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):$(yi===qe,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ti=0,pi=0,gi=zn.framebufferWidth,Cr=zn.framebufferHeight,Ir=null;V(ui)?Ir=ui:ui&&($.type(ui,"object","invalid arguments to regl.read()"),Ti=ui.x|0,pi=ui.y|0,$(Ti>=0&&Ti<zn.framebufferWidth,"invalid x offset for regl.read"),$(pi>=0&&pi<zn.framebufferHeight,"invalid y offset for regl.read"),gi=(ui.width||zn.framebufferWidth-Ti)|0,Cr=(ui.height||zn.framebufferHeight-pi)|0,Ir=ui.data||null),Ir&&(yi===qe?$(Ir instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):yi===Xn&&$(Ir instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),$(gi>0&&gi+Ti<=zn.framebufferWidth,"invalid width for read pixels"),$(Cr>0&&Cr+pi<=zn.framebufferHeight,"invalid height for read pixels"),Ke();var Mi=gi*Cr*4;return Ir||(yi===qe?Ir=new Uint8Array(Mi):yi===Xn&&(Ir=Ir||new Float32Array(Mi))),$.isTypedArray(Ir,"data buffer for regl.read() must be a typedarray"),$(Ir.byteLength>=Mi,"data buffer for regl.read() too small"),ce.pixelStorei(an,4),ce.readPixels(Ti,pi,gi,Cr,ke,yi,Ir),Ir}function qr(ui){var yi;return xe.setFBO({framebuffer:ui.framebuffer},function(){yi=Jr(ui)}),yi}function ri(ui){return!ui||!("framebuffer"in ui)?Jr(ui):qr(ui)}return ri}function fr(ce){return Array.prototype.slice.call(ce)}function Mr(ce){return fr(ce).join("")}function Qr(){var ce=0,xe=[],Ke=[];function zn(yi){for(var Ti=0;Ti<Ke.length;++Ti)if(Ke[Ti]===yi)return xe[Ti];var pi="g"+ce++;return xe.push(pi),Ke.push(yi),pi}function lr(){var yi=[];function Ti(){yi.push.apply(yi,fr(arguments))}var pi=[];function gi(){var Cr="v"+ce++;return pi.push(Cr),arguments.length>0&&(yi.push(Cr,"="),yi.push.apply(yi,fr(arguments)),yi.push(";")),Cr}return E(Ti,{def:gi,toString:function(){return Mr([pi.length>0?"var "+pi.join(",")+";":"",Mr(yi)])}})}function pr(){var yi=lr(),Ti=lr(),pi=yi.toString,gi=Ti.toString;function Cr(Ir,Mi){Ti(Ir,Mi,"=",yi.def(Ir,Mi),";")}return E(function(){yi.apply(yi,fr(arguments))},{def:yi.def,entry:yi,exit:Ti,save:Cr,set:function(Mi,Gi,kr){Cr(Mi,Gi),yi(Mi,Gi,"=",kr,";")},toString:function(){return pi()+gi()}})}function Qn(){var yi=Mr(arguments),Ti=pr(),pi=pr(),gi=Ti.toString,Cr=pi.toString;return E(Ti,{then:function(){return Ti.apply(Ti,fr(arguments)),this},else:function(){return pi.apply(pi,fr(arguments)),this},toString:function(){var Mi=Cr();return Mi&&(Mi="else{"+Mi+"}"),Mr(["if(",yi,"){",gi(),"}",Mi])}})}var Jr=lr(),qr={};function ri(yi,Ti){var pi=[];function gi(){var kr="a"+pi.length;return pi.push(kr),kr}Ti=Ti||0;for(var Cr=0;Cr<Ti;++Cr)gi();var Ir=pr(),Mi=Ir.toString,Gi=qr[yi]=E(Ir,{arg:gi,toString:function(){return Mr(["function(",pi.join(),"){",Mi(),"}"])}});return Gi}function ui(){var yi=['"use strict";',Jr,"return {"];Object.keys(qr).forEach(function(gi){yi.push('"',gi,'":',qr[gi].toString(),",")}),yi.push("}");var Ti=Mr(yi).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),pi=Function.apply(null,xe.concat(Ti));return pi.apply(null,Ke)}return{global:Jr,link:zn,block:lr,proc:ri,scope:pr,cond:Qn,compile:ui}}var Zr="xyzw".split(""),Pi=5121,Ri=1,Ki=2,Xi=0,Oa=1,ja=2,ki=3,Sa=4,ga=5,Yi=6,_a="dither",ra="blend.enable",La="blend.color",za="blend.equation",Ps="blend.func",ls="depth.enable",Ts="depth.func",ms="depth.range",nu="depth.mask",Uu="colorMask",qu="cull.enable",_c="cull.face",Ic="frontFace",wl="lineWidth",ac="polygonOffset.enable",Gc="polygonOffset.offset",ef="sample.alpha",Bc="sample.enable",Hc="sample.coverage",nf="stencil.enable",Cc="stencil.mask",Yc="stencil.func",gc="stencil.opFront",lu="stencil.opBack",cu="scissor.enable",Hl="scissor.box",ou="viewport",fu="profile",bu="framebuffer",Eu="vert",Fl="frag",ll="elements",Jl="primitive",Nc="count",Zc="offset",Fc="instances",bl="vao",rf="Width",zc="Height",oc=bu+rf,El=bu+zc,ph=ou+rf,Cf=ou+zc,vf="drawingBuffer",Kc=vf+rf,Of=vf+zc,cf=[Ps,za,Yc,gc,lu,Hc,ou,Hl,Gc],Xc=34962,Gf=34963,Jc=35632,af=35633,Vc=3553,Ef=34067,gh=2884,Sf=3042,Vf=3024,Qf=2960,pe=2929,ye=3089,Vt=32823,Xt=32926,Ue=32928,un=5126,Zn=35664,ir=35665,vr=35666,ti=5124,Ci=35667,Ji=35668,ua=35669,la=35670,qa=35671,Xa=35672,Ho=35673,wo=35674,Su=35675,Xs=35676,ku=35678,hu=35680,Gu=4,Zo=1028,lo=1029,Bs=2304,_u=2305,Sl=32775,Yl=32776,Mc=519,Pc=7680,Uc=0,wf=1,ff=32774,Wf=513,qf=36160,Hf=36064,sc={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},_f=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],of={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},qc={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},pf={frag:Jc,vert:af},Lc={cw:Bs,ccw:_u};function Yf(ce){return Array.isArray(ce)||V(ce)||se(ce)}function If(ce){return ce.sort(function(xe,Ke){return xe===ou?-1:Ke===ou?1:xe<Ke?-1:1})}function Tc(ce,xe,Ke,zn){this.thisDep=ce,this.contextDep=xe,this.propDep=Ke,this.append=zn}function kc(ce){return ce&&!(ce.thisDep||ce.contextDep||ce.propDep)}function cl(ce){return new Tc(!1,!1,!1,ce)}function Oc(ce,xe){var Ke=ce.type;if(Ke===Xi){var zn=ce.data.length;return new Tc(!0,zn>=1,zn>=2,xe)}else if(Ke===Sa){var lr=ce.data;return new Tc(lr.thisDep,lr.contextDep,lr.propDep,xe)}else{if(Ke===ga)return new Tc(!1,!1,!1,xe);if(Ke===Yi){for(var pr=!1,Qn=!1,Jr=!1,qr=0;qr<ce.data.length;++qr){var ri=ce.data[qr];if(ri.type===Oa)Jr=!0;else if(ri.type===ja)Qn=!0;else if(ri.type===ki)pr=!0;else if(ri.type===Xi){pr=!0;var ui=ri.data;ui>=1&&(Qn=!0),ui>=2&&(Jr=!0)}else ri.type===Sa&&(pr=pr||ri.data.thisDep,Qn=Qn||ri.data.contextDep,Jr=Jr||ri.data.propDep)}return new Tc(pr,Qn,Jr,xe)}else return new Tc(Ke===ki,Ke===ja,Ke===Oa,xe)}}var Lf=new Tc(!1,!1,!1,function(){});function th(ce,xe,Ke,zn,lr,pr,Qn,Jr,qr,ri,ui,yi,Ti,pi,gi){var Cr=ri.Record,Ir={add:32774,subtract:32778,"reverse subtract":32779};Ke.ext_blend_minmax&&(Ir.min=Sl,Ir.max=Yl);var Mi=Ke.angle_instanced_arrays,Gi=Ke.webgl_draw_buffers,kr={dirty:!0,profile:gi.profile},ca={},Oi=[],Ai={},Ei={};function Ii(Sn){return Sn.replace(".","_")}function fa(Sn,rn,nr){var Or=Ii(Sn);Oi.push(Sn),ca[Or]=kr[Or]=!!nr,Ai[Or]=rn}function ma(Sn,rn,nr){var Or=Ii(Sn);Oi.push(Sn),Array.isArray(nr)?(kr[Or]=nr.slice(),ca[Or]=nr.slice()):kr[Or]=ca[Or]=nr,Ei[Or]=rn}fa(_a,Vf),fa(ra,Sf),ma(La,"blendColor",[0,0,0,0]),ma(za,"blendEquationSeparate",[ff,ff]),ma(Ps,"blendFuncSeparate",[wf,Uc,wf,Uc]),fa(ls,pe,!0),ma(Ts,"depthFunc",Wf),ma(ms,"depthRange",[0,1]),ma(nu,"depthMask",!0),ma(Uu,Uu,[!0,!0,!0,!0]),fa(qu,gh),ma(_c,"cullFace",lo),ma(Ic,Ic,_u),ma(wl,wl,1),fa(ac,Vt),ma(Gc,"polygonOffset",[0,0]),fa(ef,Xt),fa(Bc,Ue),ma(Hc,"sampleCoverage",[1,!1]),fa(nf,Qf),ma(Cc,"stencilMask",-1),ma(Yc,"stencilFunc",[Mc,0,-1]),ma(gc,"stencilOpSeparate",[Zo,Pc,Pc,Pc]),ma(lu,"stencilOpSeparate",[lo,Pc,Pc,Pc]),fa(cu,ye),ma(Hl,"scissor",[0,0,ce.drawingBufferWidth,ce.drawingBufferHeight]),ma(ou,ou,[0,0,ce.drawingBufferWidth,ce.drawingBufferHeight]);var ji={gl:ce,context:Ti,strings:xe,next:ca,current:kr,draw:yi,elements:pr,buffer:lr,shader:ui,attributes:ri.state,vao:ri,uniforms:qr,framebuffer:Jr,extensions:Ke,timer:pi,isBufferArgs:Yf},Si={primTypes:Za,compareFuncs:of,blendFuncs:sc,blendEquations:Ir,stencilOps:qc,glTypes:Ja,orientationType:Lc};$.optional(function(){ji.isArrayLike=Co}),Gi&&(Si.backBuffer=[lo],Si.drawBuffer=Me(zn.maxDrawbuffers,function(Sn){return Sn===0?[0]:Me(Sn,function(rn){return Hf+rn})}));var di=0;function Qi(){var Sn=Qr(),rn=Sn.link,nr=Sn.global;Sn.id=di++,Sn.batchId="0";var Or=rn(ji),wr=Sn.shared={props:"a0"};Object.keys(ji).forEach(function(Jn){wr[Jn]=nr.def(Or,".",Jn)}),$.optional(function(){Sn.CHECK=rn($),Sn.commandStr=$.guessCommand(),Sn.command=rn(Sn.commandStr),Sn.assert=function(Jn,bn,Tr){Jn("if(!(",bn,"))",this.CHECK,".commandRaise(",rn(Tr),",",this.command,");")},Si.invalidBlendCombinations=_f});var ur=Sn.next={},ar=Sn.current={};Object.keys(Ei).forEach(function(Jn){Array.isArray(kr[Jn])&&(ur[Jn]=nr.def(wr.next,".",Jn),ar[Jn]=nr.def(wr.current,".",Jn))});var Er=Sn.constants={};Object.keys(Si).forEach(function(Jn){Er[Jn]=nr.def(JSON.stringify(Si[Jn]))}),Sn.invoke=function(Jn,bn){switch(bn.type){case Xi:var Tr=["this",wr.context,wr.props,Sn.batchId];return Jn.def(rn(bn.data),".call(",Tr.slice(0,Math.max(bn.data.length+1,4)),")");case Oa:return Jn.def(wr.props,bn.data);case ja:return Jn.def(wr.context,bn.data);case ki:return Jn.def("this",bn.data);case Sa:return bn.data.append(Sn,Jn),bn.data.ref;case ga:return bn.data.toString();case Yi:return bn.data.map(function(Dr){return Sn.invoke(Jn,Dr)})}},Sn.attribCache={};var Tn={};return Sn.scopeAttrib=function(Jn){var bn=xe.id(Jn);if(bn in Tn)return Tn[bn];var Tr=ri.scope[bn];Tr||(Tr=ri.scope[bn]=new Cr);var Dr=Tn[bn]=rn(Tr);return Dr},Sn}function aa(Sn){var rn=Sn.static,nr=Sn.dynamic,Or;if(fu in rn){var wr=!!rn[fu];Or=cl(function(ar,Er){return wr}),Or.enable=wr}else if(fu in nr){var ur=nr[fu];Or=Oc(ur,function(ar,Er){return ar.invoke(Er,ur)})}return Or}function $i(Sn,rn){var nr=Sn.static,Or=Sn.dynamic;if(bu in nr){var wr=nr[bu];return wr?(wr=Jr.getFramebuffer(wr),$.command(wr,"invalid framebuffer object"),cl(function(ar,Er){var Tn=ar.link(wr),Jn=ar.shared;Er.set(Jn.framebuffer,".next",Tn);var bn=Jn.context;return Er.set(bn,"."+oc,Tn+".width"),Er.set(bn,"."+El,Tn+".height"),Tn})):cl(function(ar,Er){var Tn=ar.shared;Er.set(Tn.framebuffer,".next","null");var Jn=Tn.context;return Er.set(Jn,"."+oc,Jn+"."+Kc),Er.set(Jn,"."+El,Jn+"."+Of),"null"})}else if(bu in Or){var ur=Or[bu];return Oc(ur,function(ar,Er){var Tn=ar.invoke(Er,ur),Jn=ar.shared,bn=Jn.framebuffer,Tr=Er.def(bn,".getFramebuffer(",Tn,")");$.optional(function(){ar.assert(Er,"!"+Tn+"||"+Tr,"invalid framebuffer object")}),Er.set(bn,".next",Tr);var Dr=Jn.context;return Er.set(Dr,"."+oc,Tr+"?"+Tr+".width:"+Dr+"."+Kc),Er.set(Dr,"."+El,Tr+"?"+Tr+".height:"+Dr+"."+Of),Tr})}else return null}function co(Sn,rn,nr){var Or=Sn.static,wr=Sn.dynamic;function ur(Tn){if(Tn in Or){var Jn=Or[Tn];$.commandType(Jn,"object","invalid "+Tn,nr.commandStr);var bn=!0,Tr=Jn.x|0,Dr=Jn.y|0,ci,Hr;return"width"in Jn?(ci=Jn.width|0,$.command(ci>=0,"invalid "+Tn,nr.commandStr)):bn=!1,"height"in Jn?(Hr=Jn.height|0,$.command(Hr>=0,"invalid "+Tn,nr.commandStr)):bn=!1,new Tc(!bn&&rn&&rn.thisDep,!bn&&rn&&rn.contextDep,!bn&&rn&&rn.propDep,function(ha,fo){var da=ha.shared.context,Na=ci;"width"in Jn||(Na=fo.def(da,".",oc,"-",Tr));var ho=Hr;return"height"in Jn||(ho=fo.def(da,".",El,"-",Dr)),[Tr,Dr,Na,ho]})}else if(Tn in wr){var ai=wr[Tn],Bi=Oc(ai,function(ha,fo){var da=ha.invoke(fo,ai);$.optional(function(){ha.assert(fo,da+"&&typeof "+da+'==="object"',"invalid "+Tn)});var Na=ha.shared.context,ho=fo.def(da,".x|0"),cs=fo.def(da,".y|0"),Ll=fo.def('"width" in ',da,"?",da,".width|0:","(",Na,".",oc,"-",ho,")"),Rc=fo.def('"height" in ',da,"?",da,".height|0:","(",Na,".",El,"-",cs,")");return $.optional(function(){ha.assert(fo,Ll+">=0&&"+Rc+">=0","invalid "+Tn)}),[ho,cs,Ll,Rc]});return rn&&(Bi.thisDep=Bi.thisDep||rn.thisDep,Bi.contextDep=Bi.contextDep||rn.contextDep,Bi.propDep=Bi.propDep||rn.propDep),Bi}else return rn?new Tc(rn.thisDep,rn.contextDep,rn.propDep,function(ha,fo){var da=ha.shared.context;return[0,0,fo.def(da,".",oc),fo.def(da,".",El)]}):null}var ar=ur(ou);if(ar){var Er=ar;ar=new Tc(ar.thisDep,ar.contextDep,ar.propDep,function(Tn,Jn){var bn=Er.append(Tn,Jn),Tr=Tn.shared.context;return Jn.set(Tr,"."+ph,bn[2]),Jn.set(Tr,"."+Cf,bn[3]),bn})}return{viewport:ar,scissor_box:ur(Hl)}}function mo(Sn,rn){var nr=Sn.static,Or=typeof nr[Fl]=="string"&&typeof nr[Eu]=="string";if(Or){if(Object.keys(rn.dynamic).length>0)return null;var wr=rn.static,ur=Object.keys(wr);if(ur.length>0&&typeof wr[ur[0]]=="number"){for(var ar=[],Er=0;Er<ur.length;++Er)$(typeof wr[ur[Er]]=="number","must specify all vertex attribute locations when using vaos"),ar.push([wr[ur[Er]]|0,ur[Er]]);return ar}}return null}function No(Sn,rn,nr){var Or=Sn.static,wr=Sn.dynamic;function ur(bn){if(bn in Or){var Tr=xe.id(Or[bn]);$.optional(function(){ui.shader(pf[bn],Tr,$.guessCommand())});var Dr=cl(function(){return Tr});return Dr.id=Tr,Dr}else if(bn in wr){var ci=wr[bn];return Oc(ci,function(Hr,ai){var Bi=Hr.invoke(ai,ci),ha=ai.def(Hr.shared.strings,".id(",Bi,")");return $.optional(function(){ai(Hr.shared.shader,".shader(",pf[bn],",",ha,",",Hr.command,");")}),ha})}return null}var ar=ur(Fl),Er=ur(Eu),Tn=null,Jn;return kc(ar)&&kc(Er)?(Tn=ui.program(Er.id,ar.id,null,nr),Jn=cl(function(bn,Tr){return bn.link(Tn)})):Jn=new Tc(ar&&ar.thisDep||Er&&Er.thisDep,ar&&ar.contextDep||Er&&Er.contextDep,ar&&ar.propDep||Er&&Er.propDep,function(bn,Tr){var Dr=bn.shared.shader,ci;ar?ci=ar.append(bn,Tr):ci=Tr.def(Dr,".",Fl);var Hr;Er?Hr=Er.append(bn,Tr):Hr=Tr.def(Dr,".",Eu);var ai=Dr+".program("+Hr+","+ci;return $.optional(function(){ai+=","+bn.command}),Tr.def(ai+")")}),{frag:ar,vert:Er,progVar:Jn,program:Tn}}function Ko(Sn,rn){var nr=Sn.static,Or=Sn.dynamic;function wr(){if(ll in nr){var bn=nr[ll];Yf(bn)?bn=pr.getElements(pr.create(bn,!0)):bn&&(bn=pr.getElements(bn),$.command(bn,"invalid elements",rn.commandStr));var Tr=cl(function(ci,Hr){if(bn){var ai=ci.link(bn);return ci.ELEMENTS=ai,ai}return ci.ELEMENTS=null,null});return Tr.value=bn,Tr}else if(ll in Or){var Dr=Or[ll];return Oc(Dr,function(ci,Hr){var ai=ci.shared,Bi=ai.isBufferArgs,ha=ai.elements,fo=ci.invoke(Hr,Dr),da=Hr.def("null"),Na=Hr.def(Bi,"(",fo,")"),ho=ci.cond(Na).then(da,"=",ha,".createStream(",fo,");").else(da,"=",ha,".getElements(",fo,");");return $.optional(function(){ci.assert(ho.else,"!"+fo+"||"+da,"invalid elements")}),Hr.entry(ho),Hr.exit(ci.cond(Na).then(ha,".destroyStream(",da,");")),ci.ELEMENTS=da,da})}return null}var ur=wr();function ar(){if(Jl in nr){var bn=nr[Jl];return $.commandParameter(bn,Za,"invalid primitve",rn.commandStr),cl(function(Dr,ci){return Za[bn]})}else if(Jl in Or){var Tr=Or[Jl];return Oc(Tr,function(Dr,ci){var Hr=Dr.constants.primTypes,ai=Dr.invoke(ci,Tr);return $.optional(function(){Dr.assert(ci,ai+" in "+Hr,"invalid primitive, must be one of "+Object.keys(Za))}),ci.def(Hr,"[",ai,"]")})}else if(ur)return kc(ur)?ur.value?cl(function(Dr,ci){return ci.def(Dr.ELEMENTS,".primType")}):cl(function(){return Gu}):new Tc(ur.thisDep,ur.contextDep,ur.propDep,function(Dr,ci){var Hr=Dr.ELEMENTS;return ci.def(Hr,"?",Hr,".primType:",Gu)});return null}function Er(bn,Tr){if(bn in nr){var Dr=nr[bn]|0;return $.command(!Tr||Dr>=0,"invalid "+bn,rn.commandStr),cl(function(Hr,ai){return Tr&&(Hr.OFFSET=Dr),Dr})}else if(bn in Or){var ci=Or[bn];return Oc(ci,function(Hr,ai){var Bi=Hr.invoke(ai,ci);return Tr&&(Hr.OFFSET=Bi,$.optional(function(){Hr.assert(ai,Bi+">=0","invalid "+bn)})),Bi})}else if(Tr&&ur)return cl(function(Hr,ai){return Hr.OFFSET="0",0});return null}var Tn=Er(Zc,!0);function Jn(){if(Nc in nr){var bn=nr[Nc]|0;return $.command(typeof bn=="number"&&bn>=0,"invalid vertex count",rn.commandStr),cl(function(){return bn})}else if(Nc in Or){var Tr=Or[Nc];return Oc(Tr,function(Hr,ai){var Bi=Hr.invoke(ai,Tr);return $.optional(function(){Hr.assert(ai,"typeof "+Bi+'==="number"&&'+Bi+">=0&&"+Bi+"===("+Bi+"|0)","invalid vertex count")}),Bi})}else if(ur)if(kc(ur)){if(ur)return Tn?new Tc(Tn.thisDep,Tn.contextDep,Tn.propDep,function(Hr,ai){var Bi=ai.def(Hr.ELEMENTS,".vertCount-",Hr.OFFSET);return $.optional(function(){Hr.assert(ai,Bi+">=0","invalid vertex offset/element buffer too small")}),Bi}):cl(function(Hr,ai){return ai.def(Hr.ELEMENTS,".vertCount")});var Dr=cl(function(){return-1});return $.optional(function(){Dr.MISSING=!0}),Dr}else{var ci=new Tc(ur.thisDep||Tn.thisDep,ur.contextDep||Tn.contextDep,ur.propDep||Tn.propDep,function(Hr,ai){var Bi=Hr.ELEMENTS;return Hr.OFFSET?ai.def(Bi,"?",Bi,".vertCount-",Hr.OFFSET,":-1"):ai.def(Bi,"?",Bi,".vertCount:-1")});return $.optional(function(){ci.DYNAMIC=!0}),ci}return null}return{elements:ur,primitive:ar(),count:Jn(),instances:Er(Fc,!1),offset:Tn}}function Il(Sn,rn){var nr=Sn.static,Or=Sn.dynamic,wr={};return Oi.forEach(function(ur){var ar=Ii(ur);function Er(Tn,Jn){if(ur in nr){var bn=Tn(nr[ur]);wr[ar]=cl(function(){return bn})}else if(ur in Or){var Tr=Or[ur];wr[ar]=Oc(Tr,function(Dr,ci){return Jn(Dr,ci,Dr.invoke(ci,Tr))})}}switch(ur){case qu:case ra:case _a:case nf:case ls:case cu:case ac:case ef:case Bc:case nu:return Er(function(Tn){return $.commandType(Tn,"boolean",ur,rn.commandStr),Tn},function(Tn,Jn,bn){return $.optional(function(){Tn.assert(Jn,"typeof "+bn+'==="boolean"',"invalid flag "+ur,Tn.commandStr)}),bn});case Ts:return Er(function(Tn){return $.commandParameter(Tn,of,"invalid "+ur,rn.commandStr),of[Tn]},function(Tn,Jn,bn){var Tr=Tn.constants.compareFuncs;return $.optional(function(){Tn.assert(Jn,bn+" in "+Tr,"invalid "+ur+", must be one of "+Object.keys(of))}),Jn.def(Tr,"[",bn,"]")});case ms:return Er(function(Tn){return $.command(Co(Tn)&&Tn.length===2&&typeof Tn[0]=="number"&&typeof Tn[1]=="number"&&Tn[0]<=Tn[1],"depth range is 2d array",rn.commandStr),Tn},function(Tn,Jn,bn){$.optional(function(){Tn.assert(Jn,Tn.shared.isArrayLike+"("+bn+")&&"+bn+".length===2&&typeof "+bn+'[0]==="number"&&typeof '+bn+'[1]==="number"&&'+bn+"[0]<="+bn+"[1]","depth range must be a 2d array")});var Tr=Jn.def("+",bn,"[0]"),Dr=Jn.def("+",bn,"[1]");return[Tr,Dr]});case Ps:return Er(function(Tn){$.commandType(Tn,"object","blend.func",rn.commandStr);var Jn="srcRGB"in Tn?Tn.srcRGB:Tn.src,bn="srcAlpha"in Tn?Tn.srcAlpha:Tn.src,Tr="dstRGB"in Tn?Tn.dstRGB:Tn.dst,Dr="dstAlpha"in Tn?Tn.dstAlpha:Tn.dst;return $.commandParameter(Jn,sc,ar+".srcRGB",rn.commandStr),$.commandParameter(bn,sc,ar+".srcAlpha",rn.commandStr),$.commandParameter(Tr,sc,ar+".dstRGB",rn.commandStr),$.commandParameter(Dr,sc,ar+".dstAlpha",rn.commandStr),$.command(_f.indexOf(Jn+", "+Tr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Jn+", "+Tr+")",rn.commandStr),[sc[Jn],sc[Tr],sc[bn],sc[Dr]]},function(Tn,Jn,bn){var Tr=Tn.constants.blendFuncs;$.optional(function(){Tn.assert(Jn,bn+"&&typeof "+bn+'==="object"',"invalid blend func, must be an object")});function Dr(da,Na){var ho=Jn.def('"',da,Na,'" in ',bn,"?",bn,".",da,Na,":",bn,".",da);return $.optional(function(){Tn.assert(Jn,ho+" in "+Tr,"invalid "+ur+"."+da+Na+", must be one of "+Object.keys(sc))}),ho}var ci=Dr("src","RGB"),Hr=Dr("dst","RGB");$.optional(function(){var da=Tn.constants.invalidBlendCombinations;Tn.assert(Jn,da+".indexOf("+ci+'+", "+'+Hr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var ai=Jn.def(Tr,"[",ci,"]"),Bi=Jn.def(Tr,"[",Dr("src","Alpha"),"]"),ha=Jn.def(Tr,"[",Hr,"]"),fo=Jn.def(Tr,"[",Dr("dst","Alpha"),"]");return[ai,ha,Bi,fo]});case za:return Er(function(Tn){if(typeof Tn=="string")return $.commandParameter(Tn,Ir,"invalid "+ur,rn.commandStr),[Ir[Tn],Ir[Tn]];if(typeof Tn=="object")return $.commandParameter(Tn.rgb,Ir,ur+".rgb",rn.commandStr),$.commandParameter(Tn.alpha,Ir,ur+".alpha",rn.commandStr),[Ir[Tn.rgb],Ir[Tn.alpha]];$.commandRaise("invalid blend.equation",rn.commandStr)},function(Tn,Jn,bn){var Tr=Tn.constants.blendEquations,Dr=Jn.def(),ci=Jn.def(),Hr=Tn.cond("typeof ",bn,'==="string"');return $.optional(function(){function ai(Bi,ha,fo){Tn.assert(Bi,fo+" in "+Tr,"invalid "+ha+", must be one of "+Object.keys(Ir))}ai(Hr.then,ur,bn),Tn.assert(Hr.else,bn+"&&typeof "+bn+'==="object"',"invalid "+ur),ai(Hr.else,ur+".rgb",bn+".rgb"),ai(Hr.else,ur+".alpha",bn+".alpha")}),Hr.then(Dr,"=",ci,"=",Tr,"[",bn,"];"),Hr.else(Dr,"=",Tr,"[",bn,".rgb];",ci,"=",Tr,"[",bn,".alpha];"),Jn(Hr),[Dr,ci]});case La:return Er(function(Tn){return $.command(Co(Tn)&&Tn.length===4,"blend.color must be a 4d array",rn.commandStr),Me(4,function(Jn){return+Tn[Jn]})},function(Tn,Jn,bn){return $.optional(function(){Tn.assert(Jn,Tn.shared.isArrayLike+"("+bn+")&&"+bn+".length===4","blend.color must be a 4d array")}),Me(4,function(Tr){return Jn.def("+",bn,"[",Tr,"]")})});case Cc:return Er(function(Tn){return $.commandType(Tn,"number",ar,rn.commandStr),Tn|0},function(Tn,Jn,bn){return $.optional(function(){Tn.assert(Jn,"typeof "+bn+'==="number"',"invalid stencil.mask")}),Jn.def(bn,"|0")});case Yc:return Er(function(Tn){$.commandType(Tn,"object",ar,rn.commandStr);var Jn=Tn.cmp||"keep",bn=Tn.ref||0,Tr="mask"in Tn?Tn.mask:-1;return $.commandParameter(Jn,of,ur+".cmp",rn.commandStr),$.commandType(bn,"number",ur+".ref",rn.commandStr),$.commandType(Tr,"number",ur+".mask",rn.commandStr),[of[Jn],bn,Tr]},function(Tn,Jn,bn){var Tr=Tn.constants.compareFuncs;$.optional(function(){function ai(){Tn.assert(Jn,Array.prototype.join.call(arguments,""),"invalid stencil.func")}ai(bn+"&&typeof ",bn,'==="object"'),ai('!("cmp" in ',bn,")||(",bn,".cmp in ",Tr,")")});var Dr=Jn.def('"cmp" in ',bn,"?",Tr,"[",bn,".cmp]",":",Pc),ci=Jn.def(bn,".ref|0"),Hr=Jn.def('"mask" in ',bn,"?",bn,".mask|0:-1");return[Dr,ci,Hr]});case gc:case lu:return Er(function(Tn){$.commandType(Tn,"object",ar,rn.commandStr);var Jn=Tn.fail||"keep",bn=Tn.zfail||"keep",Tr=Tn.zpass||"keep";return $.commandParameter(Jn,qc,ur+".fail",rn.commandStr),$.commandParameter(bn,qc,ur+".zfail",rn.commandStr),$.commandParameter(Tr,qc,ur+".zpass",rn.commandStr),[ur===lu?lo:Zo,qc[Jn],qc[bn],qc[Tr]]},function(Tn,Jn,bn){var Tr=Tn.constants.stencilOps;$.optional(function(){Tn.assert(Jn,bn+"&&typeof "+bn+'==="object"',"invalid "+ur)});function Dr(ci){return $.optional(function(){Tn.assert(Jn,'!("'+ci+'" in '+bn+")||("+bn+"."+ci+" in "+Tr+")","invalid "+ur+"."+ci+", must be one of "+Object.keys(qc))}),Jn.def('"',ci,'" in ',bn,"?",Tr,"[",bn,".",ci,"]:",Pc)}return[ur===lu?lo:Zo,Dr("fail"),Dr("zfail"),Dr("zpass")]});case Gc:return Er(function(Tn){$.commandType(Tn,"object",ar,rn.commandStr);var Jn=Tn.factor|0,bn=Tn.units|0;return $.commandType(Jn,"number",ar+".factor",rn.commandStr),$.commandType(bn,"number",ar+".units",rn.commandStr),[Jn,bn]},function(Tn,Jn,bn){$.optional(function(){Tn.assert(Jn,bn+"&&typeof "+bn+'==="object"',"invalid "+ur)});var Tr=Jn.def(bn,".factor|0"),Dr=Jn.def(bn,".units|0");return[Tr,Dr]});case _c:return Er(function(Tn){var Jn=0;return Tn==="front"?Jn=Zo:Tn==="back"&&(Jn=lo),$.command(!!Jn,ar,rn.commandStr),Jn},function(Tn,Jn,bn){return $.optional(function(){Tn.assert(Jn,bn+'==="front"||'+bn+'==="back"',"invalid cull.face")}),Jn.def(bn,'==="front"?',Zo,":",lo)});case wl:return Er(function(Tn){return $.command(typeof Tn=="number"&&Tn>=zn.lineWidthDims[0]&&Tn<=zn.lineWidthDims[1],"invalid line width, must be a positive number between "+zn.lineWidthDims[0]+" and "+zn.lineWidthDims[1],rn.commandStr),Tn},function(Tn,Jn,bn){return $.optional(function(){Tn.assert(Jn,"typeof "+bn+'==="number"&&'+bn+">="+zn.lineWidthDims[0]+"&&"+bn+"<="+zn.lineWidthDims[1],"invalid line width")}),bn});case Ic:return Er(function(Tn){return $.commandParameter(Tn,Lc,ar,rn.commandStr),Lc[Tn]},function(Tn,Jn,bn){return $.optional(function(){Tn.assert(Jn,bn+'==="cw"||'+bn+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Jn.def(bn+'==="cw"?'+Bs+":"+_u)});case Uu:return Er(function(Tn){return $.command(Co(Tn)&&Tn.length===4,"color.mask must be length 4 array",rn.commandStr),Tn.map(function(Jn){return!!Jn})},function(Tn,Jn,bn){return $.optional(function(){Tn.assert(Jn,Tn.shared.isArrayLike+"("+bn+")&&"+bn+".length===4","invalid color.mask")}),Me(4,function(Tr){return"!!"+bn+"["+Tr+"]"})});case Hc:return Er(function(Tn){$.command(typeof Tn=="object"&&Tn,ar,rn.commandStr);var Jn="value"in Tn?Tn.value:1,bn=!!Tn.invert;return $.command(typeof Jn=="number"&&Jn>=0&&Jn<=1,"sample.coverage.value must be a number between 0 and 1",rn.commandStr),[Jn,bn]},function(Tn,Jn,bn){$.optional(function(){Tn.assert(Jn,bn+"&&typeof "+bn+'==="object"',"invalid sample.coverage")});var Tr=Jn.def('"value" in ',bn,"?+",bn,".value:1"),Dr=Jn.def("!!",bn,".invert");return[Tr,Dr]})}}),wr}function uc(Sn,rn){var nr=Sn.static,Or=Sn.dynamic,wr={};return Object.keys(nr).forEach(function(ur){var ar=nr[ur],Er;if(typeof ar=="number"||typeof ar=="boolean")Er=cl(function(){return ar});else if(typeof ar=="function"){var Tn=ar._reglType;Tn==="texture2d"||Tn==="textureCube"?Er=cl(function(Jn){return Jn.link(ar)}):Tn==="framebuffer"||Tn==="framebufferCube"?($.command(ar.color.length>0,'missing color attachment for framebuffer sent to uniform "'+ur+'"',rn.commandStr),Er=cl(function(Jn){return Jn.link(ar.color[0])})):$.commandRaise('invalid data for uniform "'+ur+'"',rn.commandStr)}else Co(ar)?Er=cl(function(Jn){var bn=Jn.global.def("[",Me(ar.length,function(Tr){return $.command(typeof ar[Tr]=="number"||typeof ar[Tr]=="boolean","invalid uniform "+ur,Jn.commandStr),ar[Tr]}),"]");return bn}):$.commandRaise('invalid or missing data for uniform "'+ur+'"',rn.commandStr);Er.value=ar,wr[ur]=Er}),Object.keys(Or).forEach(function(ur){var ar=Or[ur];wr[ur]=Oc(ar,function(Er,Tn){return Er.invoke(Tn,ar)})}),wr}function ts(Sn,rn){var nr=Sn.static,Or=Sn.dynamic,wr={};return Object.keys(nr).forEach(function(ur){var ar=nr[ur],Er=xe.id(ur),Tn=new Cr;if(Yf(ar))Tn.state=Ri,Tn.buffer=lr.getBuffer(lr.create(ar,Xc,!1,!0)),Tn.type=0;else{var Jn=lr.getBuffer(ar);if(Jn)Tn.state=Ri,Tn.buffer=Jn,Tn.type=0;else if($.command(typeof ar=="object"&&ar,"invalid data for attribute "+ur,rn.commandStr),"constant"in ar){var bn=ar.constant;Tn.buffer="null",Tn.state=Ki,typeof bn=="number"?Tn.x=bn:($.command(Co(bn)&&bn.length>0&&bn.length<=4,"invalid constant for attribute "+ur,rn.commandStr),Zr.forEach(function(ha,fo){fo<bn.length&&(Tn[ha]=bn[fo])}))}else{Yf(ar.buffer)?Jn=lr.getBuffer(lr.create(ar.buffer,Xc,!1,!0)):Jn=lr.getBuffer(ar.buffer),$.command(!!Jn,'missing buffer for attribute "'+ur+'"',rn.commandStr);var Tr=ar.offset|0;$.command(Tr>=0,'invalid offset for attribute "'+ur+'"',rn.commandStr);var Dr=ar.stride|0;$.command(Dr>=0&&Dr<256,'invalid stride for attribute "'+ur+'", must be integer betweeen [0, 255]',rn.commandStr);var ci=ar.size|0;$.command(!("size"in ar)||ci>0&&ci<=4,'invalid size for attribute "'+ur+'", must be 1,2,3,4',rn.commandStr);var Hr=!!ar.normalized,ai=0;"type"in ar&&($.commandParameter(ar.type,Ja,"invalid type for attribute "+ur,rn.commandStr),ai=Ja[ar.type]);var Bi=ar.divisor|0;"divisor"in ar&&($.command(Bi===0||Mi,'cannot specify divisor for attribute "'+ur+'", instancing not supported',rn.commandStr),$.command(Bi>=0,'invalid divisor for attribute "'+ur+'"',rn.commandStr)),$.optional(function(){var ha=rn.commandStr,fo=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ar).forEach(function(da){$.command(fo.indexOf(da)>=0,'unknown parameter "'+da+'" for attribute pointer "'+ur+'" (valid parameters are '+fo+")",ha)})}),Tn.buffer=Jn,Tn.state=Ri,Tn.size=ci,Tn.normalized=Hr,Tn.type=ai||Jn.dtype,Tn.offset=Tr,Tn.stride=Dr,Tn.divisor=Bi}}wr[ur]=cl(function(ha,fo){var da=ha.attribCache;if(Er in da)return da[Er];var Na={isStream:!1};return Object.keys(Tn).forEach(function(ho){Na[ho]=Tn[ho]}),Tn.buffer&&(Na.buffer=ha.link(Tn.buffer),Na.type=Na.type||Na.buffer+".dtype"),da[Er]=Na,Na})}),Object.keys(Or).forEach(function(ur){var ar=Or[ur];function Er(Tn,Jn){var bn=Tn.invoke(Jn,ar),Tr=Tn.shared,Dr=Tn.constants,ci=Tr.isBufferArgs,Hr=Tr.buffer;$.optional(function(){Tn.assert(Jn,bn+"&&(typeof "+bn+'==="object"||typeof '+bn+'==="function")&&('+ci+"("+bn+")||"+Hr+".getBuffer("+bn+")||"+Hr+".getBuffer("+bn+".buffer)||"+ci+"("+bn+'.buffer)||("constant" in '+bn+"&&(typeof "+bn+'.constant==="number"||'+Tr.isArrayLike+"("+bn+".constant))))",'invalid dynamic attribute "'+ur+'"')});var ai={isStream:Jn.def(!1)},Bi=new Cr;Bi.state=Ri,Object.keys(Bi).forEach(function(Na){ai[Na]=Jn.def(""+Bi[Na])});var ha=ai.buffer,fo=ai.type;Jn("if(",ci,"(",bn,")){",ai.isStream,"=true;",ha,"=",Hr,".createStream(",Xc,",",bn,");",fo,"=",ha,".dtype;","}else{",ha,"=",Hr,".getBuffer(",bn,");","if(",ha,"){",fo,"=",ha,".dtype;",'}else if("constant" in ',bn,"){",ai.state,"=",Ki,";","if(typeof "+bn+'.constant === "number"){',ai[Zr[0]],"=",bn,".constant;",Zr.slice(1).map(function(Na){return ai[Na]}).join("="),"=0;","}else{",Zr.map(function(Na,ho){return ai[Na]+"="+bn+".constant.length>"+ho+"?"+bn+".constant["+ho+"]:0;"}).join(""),"}}else{","if(",ci,"(",bn,".buffer)){",ha,"=",Hr,".createStream(",Xc,",",bn,".buffer);","}else{",ha,"=",Hr,".getBuffer(",bn,".buffer);","}",fo,'="type" in ',bn,"?",Dr.glTypes,"[",bn,".type]:",ha,".dtype;",ai.normalized,"=!!",bn,".normalized;");function da(Na){Jn(ai[Na],"=",bn,".",Na,"|0;")}return da("size"),da("offset"),da("stride"),da("divisor"),Jn("}}"),Jn.exit("if(",ai.isStream,"){",Hr,".destroyStream(",ha,");","}"),ai}wr[ur]=Oc(ar,Er)}),wr}function _l(Sn,rn){var nr=Sn.static,Or=Sn.dynamic;if(bl in nr){var wr=nr[bl];return wr!==null&&ri.getVAO(wr)===null&&(wr=ri.createVAO(wr)),cl(function(ar){return ar.link(ri.getVAO(wr))})}else if(bl in Or){var ur=Or[bl];return Oc(ur,function(ar,Er){var Tn=ar.invoke(Er,ur);return Er.def(ar.shared.vao+".getVAO("+Tn+")")})}return null}function wu(Sn){var rn=Sn.static,nr=Sn.dynamic,Or={};return Object.keys(rn).forEach(function(wr){var ur=rn[wr];Or[wr]=cl(function(ar,Er){return typeof ur=="number"||typeof ur=="boolean"?""+ur:ar.link(ur)})}),Object.keys(nr).forEach(function(wr){var ur=nr[wr];Or[wr]=Oc(ur,function(ar,Er){return ar.invoke(Er,ur)})}),Or}function Zl(Sn,rn,nr,Or,wr){var ur=Sn.static,ar=Sn.dynamic;$.optional(function(){var da=[bu,Eu,Fl,ll,Jl,Zc,Nc,Fc,fu,bl].concat(Oi);function Na(ho){Object.keys(ho).forEach(function(cs){$.command(da.indexOf(cs)>=0,'unknown parameter "'+cs+'"',wr.commandStr)})}Na(ur),Na(ar)});var Er=mo(Sn,rn),Tn=$i(Sn,wr),Jn=co(Sn,Tn,wr),bn=Ko(Sn,wr),Tr=Il(Sn,wr),Dr=No(Sn,wr,Er);function ci(da){var Na=Jn[da];Na&&(Tr[da]=Na)}ci(ou),ci(Ii(Hl));var Hr=Object.keys(Tr).length>0,ai={framebuffer:Tn,draw:bn,shader:Dr,state:Tr,dirty:Hr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(ai.profile=aa(Sn,wr),ai.uniforms=uc(nr,wr),ai.drawVAO=ai.scopeVAO=_l(Sn,wr),!ai.drawVAO&&Dr.program&&!Er&&Ke.angle_instanced_arrays){var Bi=!0,ha=Dr.program.attributes.map(function(da){var Na=rn.static[da];return Bi=Bi&&!!Na,Na});if(Bi&&ha.length>0){var fo=ri.getVAO(ri.createVAO(ha));ai.drawVAO=new Tc(null,null,null,function(da,Na){return da.link(fo)}),ai.useVAO=!0}}return Er?ai.useVAO=!0:ai.attributes=ts(rn,wr),ai.context=wu(Or,wr),ai}function $l(Sn,rn,nr){var Or=Sn.shared,wr=Or.context,ur=Sn.scope();Object.keys(nr).forEach(function(ar){rn.save(wr,"."+ar);var Er=nr[ar],Tn=Er.append(Sn,rn);Array.isArray(Tn)?ur(wr,".",ar,"=[",Tn.join(),"];"):ur(wr,".",ar,"=",Tn,";")}),rn(ur)}function lc(Sn,rn,nr,Or){var wr=Sn.shared,ur=wr.gl,ar=wr.framebuffer,Er;Gi&&(Er=rn.def(wr.extensions,".webgl_draw_buffers"));var Tn=Sn.constants,Jn=Tn.drawBuffer,bn=Tn.backBuffer,Tr;nr?Tr=nr.append(Sn,rn):Tr=rn.def(ar,".next"),Or||rn("if(",Tr,"!==",ar,".cur){"),rn("if(",Tr,"){",ur,".bindFramebuffer(",qf,",",Tr,".framebuffer);"),Gi&&rn(Er,".drawBuffersWEBGL(",Jn,"[",Tr,".colorAttachments.length]);"),rn("}else{",ur,".bindFramebuffer(",qf,",null);"),Gi&&rn(Er,".drawBuffersWEBGL(",bn,");"),rn("}",ar,".cur=",Tr,";"),Or||rn("}")}function mc(Sn,rn,nr){var Or=Sn.shared,wr=Or.gl,ur=Sn.current,ar=Sn.next,Er=Or.current,Tn=Or.next,Jn=Sn.cond(Er,".dirty");Oi.forEach(function(bn){var Tr=Ii(bn);if(!(Tr in nr.state)){var Dr,ci;if(Tr in ar){Dr=ar[Tr],ci=ur[Tr];var Hr=Me(kr[Tr].length,function(Bi){return Jn.def(Dr,"[",Bi,"]")});Jn(Sn.cond(Hr.map(function(Bi,ha){return Bi+"!=="+ci+"["+ha+"]"}).join("||")).then(wr,".",Ei[Tr],"(",Hr,");",Hr.map(function(Bi,ha){return ci+"["+ha+"]="+Bi}).join(";"),";"))}else{Dr=Jn.def(Tn,".",Tr);var ai=Sn.cond(Dr,"!==",Er,".",Tr);Jn(ai),Tr in Ai?ai(Sn.cond(Dr).then(wr,".enable(",Ai[Tr],");").else(wr,".disable(",Ai[Tr],");"),Er,".",Tr,"=",Dr,";"):ai(wr,".",Ei[Tr],"(",Dr,");",Er,".",Tr,"=",Dr,";")}}}),Object.keys(nr.state).length===0&&Jn(Er,".dirty=false;"),rn(Jn)}function cc(Sn,rn,nr,Or){var wr=Sn.shared,ur=Sn.current,ar=wr.current,Er=wr.gl;If(Object.keys(nr)).forEach(function(Tn){var Jn=nr[Tn];if(!(Or&&!Or(Jn))){var bn=Jn.append(Sn,rn);if(Ai[Tn]){var Tr=Ai[Tn];kc(Jn)?bn?rn(Er,".enable(",Tr,");"):rn(Er,".disable(",Tr,");"):rn(Sn.cond(bn).then(Er,".enable(",Tr,");").else(Er,".disable(",Tr,");")),rn(ar,".",Tn,"=",bn,";")}else if(Co(bn)){var Dr=ur[Tn];rn(Er,".",Ei[Tn],"(",bn,");",bn.map(function(ci,Hr){return Dr+"["+Hr+"]="+ci}).join(";"),";")}else rn(Er,".",Ei[Tn],"(",bn,");",ar,".",Tn,"=",bn,";")}})}function fl(Sn,rn){Mi&&(Sn.instancing=rn.def(Sn.shared.extensions,".angle_instanced_arrays"))}function Io(Sn,rn,nr,Or,wr){var ur=Sn.shared,ar=Sn.stats,Er=ur.current,Tn=ur.timer,Jn=nr.profile;function bn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Tr,Dr;function ci(da){Tr=rn.def(),da(Tr,"=",bn(),";"),typeof wr=="string"?da(ar,".count+=",wr,";"):da(ar,".count++;"),pi&&(Or?(Dr=rn.def(),da(Dr,"=",Tn,".getNumPendingQueries();")):da(Tn,".beginQuery(",ar,");"))}function Hr(da){da(ar,".cpuTime+=",bn(),"-",Tr,";"),pi&&(Or?da(Tn,".pushScopeStats(",Dr,",",Tn,".getNumPendingQueries(),",ar,");"):da(Tn,".endQuery();"))}function ai(da){var Na=rn.def(Er,".profile");rn(Er,".profile=",da,";"),rn.exit(Er,".profile=",Na,";")}var Bi;if(Jn){if(kc(Jn)){Jn.enable?(ci(rn),Hr(rn.exit),ai("true")):ai("false");return}Bi=Jn.append(Sn,rn),ai(Bi)}else Bi=rn.def(Er,".profile");var ha=Sn.block();ci(ha),rn("if(",Bi,"){",ha,"}");var fo=Sn.block();Hr(fo),rn.exit("if(",Bi,"){",fo,"}")}function yc(Sn,rn,nr,Or,wr){var ur=Sn.shared;function ar(Tn){switch(Tn){case Zn:case Ci:case qa:return 2;case ir:case Ji:case Xa:return 3;case vr:case ua:case Ho:return 4;default:return 1}}function Er(Tn,Jn,bn){var Tr=ur.gl,Dr=rn.def(Tn,".location"),ci=rn.def(ur.attributes,"[",Dr,"]"),Hr=bn.state,ai=bn.buffer,Bi=[bn.x,bn.y,bn.z,bn.w],ha=["buffer","normalized","offset","stride"];function fo(){rn("if(!",ci,".buffer){",Tr,".enableVertexAttribArray(",Dr,");}");var Na=bn.type,ho;if(bn.size?ho=rn.def(bn.size,"||",Jn):ho=Jn,rn("if(",ci,".type!==",Na,"||",ci,".size!==",ho,"||",ha.map(function(Ll){return ci+"."+Ll+"!=="+bn[Ll]}).join("||"),"){",Tr,".bindBuffer(",Xc,",",ai,".buffer);",Tr,".vertexAttribPointer(",[Dr,ho,Na,bn.normalized,bn.stride,bn.offset],");",ci,".type=",Na,";",ci,".size=",ho,";",ha.map(function(Ll){return ci+"."+Ll+"="+bn[Ll]+";"}).join(""),"}"),Mi){var cs=bn.divisor;rn("if(",ci,".divisor!==",cs,"){",Sn.instancing,".vertexAttribDivisorANGLE(",[Dr,cs],");",ci,".divisor=",cs,";}")}}function da(){rn("if(",ci,".buffer){",Tr,".disableVertexAttribArray(",Dr,");",ci,".buffer=null;","}if(",Zr.map(function(Na,ho){return ci+"."+Na+"!=="+Bi[ho]}).join("||"),"){",Tr,".vertexAttrib4f(",Dr,",",Bi,");",Zr.map(function(Na,ho){return ci+"."+Na+"="+Bi[ho]+";"}).join(""),"}")}Hr===Ri?fo():Hr===Ki?da():(rn("if(",Hr,"===",Ri,"){"),fo(),rn("}else{"),da(),rn("}"))}Or.forEach(function(Tn){var Jn=Tn.name,bn=nr.attributes[Jn],Tr;if(bn){if(!wr(bn))return;Tr=bn.append(Sn,rn)}else{if(!wr(Lf))return;var Dr=Sn.scopeAttrib(Jn);$.optional(function(){Sn.assert(rn,Dr+".state","missing attribute "+Jn)}),Tr={},Object.keys(new Cr).forEach(function(ci){Tr[ci]=rn.def(Dr,".",ci)})}Er(Sn.link(Tn),ar(Tn.info.type),Tr)})}function zs(Sn,rn,nr,Or,wr){for(var ur=Sn.shared,ar=ur.gl,Er,Tn=0;Tn<Or.length;++Tn){var Jn=Or[Tn],bn=Jn.name,Tr=Jn.info.type,Dr=nr.uniforms[bn],ci=Sn.link(Jn),Hr=ci+".location",ai;if(Dr){if(!wr(Dr))continue;if(kc(Dr)){var Bi=Dr.value;if($.command(Bi!==null&&typeof Bi!="undefined",'missing uniform "'+bn+'"',Sn.commandStr),Tr===ku||Tr===hu){$.command(typeof Bi=="function"&&(Tr===ku&&(Bi._reglType==="texture2d"||Bi._reglType==="framebuffer")||Tr===hu&&(Bi._reglType==="textureCube"||Bi._reglType==="framebufferCube")),"invalid texture for uniform "+bn,Sn.commandStr);var ha=Sn.link(Bi._texture||Bi.color[0]._texture);rn(ar,".uniform1i(",Hr,",",ha+".bind());"),rn.exit(ha,".unbind();")}else if(Tr===wo||Tr===Su||Tr===Xs){$.optional(function(){$.command(Co(Bi),"invalid matrix for uniform "+bn,Sn.commandStr),$.command(Tr===wo&&Bi.length===4||Tr===Su&&Bi.length===9||Tr===Xs&&Bi.length===16,"invalid length for matrix uniform "+bn,Sn.commandStr)});var fo=Sn.global.def("new Float32Array(["+Array.prototype.slice.call(Bi)+"])"),da=2;Tr===Su?da=3:Tr===Xs&&(da=4),rn(ar,".uniformMatrix",da,"fv(",Hr,",false,",fo,");")}else{switch(Tr){case un:$.commandType(Bi,"number","uniform "+bn,Sn.commandStr),Er="1f";break;case Zn:$.command(Co(Bi)&&Bi.length===2,"uniform "+bn,Sn.commandStr),Er="2f";break;case ir:$.command(Co(Bi)&&Bi.length===3,"uniform "+bn,Sn.commandStr),Er="3f";break;case vr:$.command(Co(Bi)&&Bi.length===4,"uniform "+bn,Sn.commandStr),Er="4f";break;case la:$.commandType(Bi,"boolean","uniform "+bn,Sn.commandStr),Er="1i";break;case ti:$.commandType(Bi,"number","uniform "+bn,Sn.commandStr),Er="1i";break;case qa:$.command(Co(Bi)&&Bi.length===2,"uniform "+bn,Sn.commandStr),Er="2i";break;case Ci:$.command(Co(Bi)&&Bi.length===2,"uniform "+bn,Sn.commandStr),Er="2i";break;case Xa:$.command(Co(Bi)&&Bi.length===3,"uniform "+bn,Sn.commandStr),Er="3i";break;case Ji:$.command(Co(Bi)&&Bi.length===3,"uniform "+bn,Sn.commandStr),Er="3i";break;case Ho:$.command(Co(Bi)&&Bi.length===4,"uniform "+bn,Sn.commandStr),Er="4i";break;case ua:$.command(Co(Bi)&&Bi.length===4,"uniform "+bn,Sn.commandStr),Er="4i";break}rn(ar,".uniform",Er,"(",Hr,",",Co(Bi)?Array.prototype.slice.call(Bi):Bi,");")}continue}else ai=Dr.append(Sn,rn)}else{if(!wr(Lf))continue;ai=rn.def(ur.uniforms,"[",xe.id(bn),"]")}Tr===ku?($(!Array.isArray(ai),"must specify a scalar prop for textures"),rn("if(",ai,"&&",ai,'._reglType==="framebuffer"){',ai,"=",ai,".color[0];","}")):Tr===hu&&($(!Array.isArray(ai),"must specify a scalar prop for cube maps"),rn("if(",ai,"&&",ai,'._reglType==="framebufferCube"){',ai,"=",ai,".color[0];","}")),$.optional(function(){function Rc(os,rh){Sn.assert(rn,os,'bad data or missing for uniform "'+bn+'".  '+rh)}function Ql(os){$(!Array.isArray(ai),"must not specify an array type for uniform"),Rc("typeof "+ai+'==="'+os+'"',"invalid type, expected "+os)}function $c(os,rh){Array.isArray(ai)?$(ai.length===os,"must have length "+os):Rc(ur.isArrayLike+"("+ai+")&&"+ai+".length==="+os,"invalid vector, should have length "+os,Sn.commandStr)}function Lh(os){$(!Array.isArray(ai),"must not specify a value type"),Rc("typeof "+ai+'==="function"&&'+ai+'._reglType==="texture'+(os===Vc?"2d":"Cube")+'"',"invalid texture type",Sn.commandStr)}switch(Tr){case ti:Ql("number");break;case Ci:$c(2,"number");break;case Ji:$c(3,"number");break;case ua:$c(4,"number");break;case un:Ql("number");break;case Zn:$c(2,"number");break;case ir:$c(3,"number");break;case vr:$c(4,"number");break;case la:Ql("boolean");break;case qa:$c(2,"boolean");break;case Xa:$c(3,"boolean");break;case Ho:$c(4,"boolean");break;case wo:$c(4,"number");break;case Su:$c(9,"number");break;case Xs:$c(16,"number");break;case ku:Lh(Vc);break;case hu:Lh(Ef);break}});var Na=1;switch(Tr){case ku:case hu:var ho=rn.def(ai,"._texture");rn(ar,".uniform1i(",Hr,",",ho,".bind());"),rn.exit(ho,".unbind();");continue;case ti:case la:Er="1i";break;case Ci:case qa:Er="2i",Na=2;break;case Ji:case Xa:Er="3i",Na=3;break;case ua:case Ho:Er="4i",Na=4;break;case un:Er="1f";break;case Zn:Er="2f",Na=2;break;case ir:Er="3f",Na=3;break;case vr:Er="4f",Na=4;break;case wo:Er="Matrix2fv";break;case Su:Er="Matrix3fv";break;case Xs:Er="Matrix4fv";break}if(rn(ar,".uniform",Er,"(",Hr,","),Er.charAt(0)==="M"){var cs=Math.pow(Tr-wo+2,2),Ll=Sn.global.def("new Float32Array(",cs,")");Array.isArray(ai)?rn("false,(",Me(cs,function(Rc){return Ll+"["+Rc+"]="+ai[Rc]}),",",Ll,")"):rn("false,(Array.isArray(",ai,")||",ai," instanceof Float32Array)?",ai,":(",Me(cs,function(Rc){return Ll+"["+Rc+"]="+ai+"["+Rc+"]"}),",",Ll,")")}else Na>1?rn(Me(Na,function(Rc){return Array.isArray(ai)?ai[Rc]:ai+"["+Rc+"]"})):($(!Array.isArray(ai),"uniform value must not be an array"),rn(ai));rn(");")}}function Ya(Sn,rn,nr,Or){var wr=Sn.shared,ur=wr.gl,ar=wr.draw,Er=Or.draw;function Tn(){var ho=Er.elements,cs,Ll=rn;return ho?((ho.contextDep&&Or.contextDynamic||ho.propDep)&&(Ll=nr),cs=ho.append(Sn,Ll)):cs=Ll.def(ar,".",ll),cs&&Ll("if("+cs+")"+ur+".bindBuffer("+Gf+","+cs+".buffer.buffer);"),cs}function Jn(){var ho=Er.count,cs,Ll=rn;return ho?((ho.contextDep&&Or.contextDynamic||ho.propDep)&&(Ll=nr),cs=ho.append(Sn,Ll),$.optional(function(){ho.MISSING&&Sn.assert(rn,"false","missing vertex count"),ho.DYNAMIC&&Sn.assert(Ll,cs+">=0","missing vertex count")})):(cs=Ll.def(ar,".",Nc),$.optional(function(){Sn.assert(Ll,cs+">=0","missing vertex count")})),cs}var bn=Tn();function Tr(ho){var cs=Er[ho];return cs?cs.contextDep&&Or.contextDynamic||cs.propDep?cs.append(Sn,nr):cs.append(Sn,rn):rn.def(ar,".",ho)}var Dr=Tr(Jl),ci=Tr(Zc),Hr=Jn();if(typeof Hr=="number"){if(Hr===0)return}else nr("if(",Hr,"){"),nr.exit("}");var ai,Bi;Mi&&(ai=Tr(Fc),Bi=Sn.instancing);var ha=bn+".type",fo=Er.elements&&kc(Er.elements);function da(){function ho(){nr(Bi,".drawElementsInstancedANGLE(",[Dr,Hr,ha,ci+"<<(("+ha+"-"+Pi+")>>1)",ai],");")}function cs(){nr(Bi,".drawArraysInstancedANGLE(",[Dr,ci,Hr,ai],");")}bn?fo?ho():(nr("if(",bn,"){"),ho(),nr("}else{"),cs(),nr("}")):cs()}function Na(){function ho(){nr(ur+".drawElements("+[Dr,Hr,ha,ci+"<<(("+ha+"-"+Pi+")>>1)"]+");")}function cs(){nr(ur+".drawArrays("+[Dr,ci,Hr]+");")}bn?fo?ho():(nr("if(",bn,"){"),ho(),nr("}else{"),cs(),nr("}")):cs()}Mi&&(typeof ai!="number"||ai>=0)?typeof ai=="string"?(nr("if(",ai,">0){"),da(),nr("}else if(",ai,"<0){"),Na(),nr("}")):da():Na()}function So(Sn,rn,nr,Or,wr){var ur=Qi(),ar=ur.proc("body",wr);return $.optional(function(){ur.commandStr=rn.commandStr,ur.command=ur.link(rn.commandStr)}),Mi&&(ur.instancing=ar.def(ur.shared.extensions,".angle_instanced_arrays")),Sn(ur,ar,nr,Or),ur.compile().body}function as(Sn,rn,nr,Or){fl(Sn,rn),nr.useVAO?nr.drawVAO?rn(Sn.shared.vao,".setVAO(",nr.drawVAO.append(Sn,rn),");"):rn(Sn.shared.vao,".setVAO(",Sn.shared.vao,".targetVAO);"):(rn(Sn.shared.vao,".setVAO(null);"),yc(Sn,rn,nr,Or.attributes,function(){return!0})),zs(Sn,rn,nr,Or.uniforms,function(){return!0}),Ya(Sn,rn,rn,nr)}function xc(Sn,rn){var nr=Sn.proc("draw",1);fl(Sn,nr),$l(Sn,nr,rn.context),lc(Sn,nr,rn.framebuffer),mc(Sn,nr,rn),cc(Sn,nr,rn.state),Io(Sn,nr,rn,!1,!0);var Or=rn.shader.progVar.append(Sn,nr);if(nr(Sn.shared.gl,".useProgram(",Or,".program);"),rn.shader.program)as(Sn,nr,rn,rn.shader.program);else{nr(Sn.shared.vao,".setVAO(null);");var wr=Sn.global.def("{}"),ur=nr.def(Or,".id"),ar=nr.def(wr,"[",ur,"]");nr(Sn.cond(ar).then(ar,".call(this,a0);").else(ar,"=",wr,"[",ur,"]=",Sn.link(function(Er){return So(as,Sn,rn,Er,1)}),"(",Or,");",ar,".call(this,a0);"))}Object.keys(rn.state).length>0&&nr(Sn.shared.current,".dirty=true;")}function bc(Sn,rn,nr,Or){Sn.batchId="a1",fl(Sn,rn);function wr(){return!0}yc(Sn,rn,nr,Or.attributes,wr),zs(Sn,rn,nr,Or.uniforms,wr),Ya(Sn,rn,rn,nr)}function sf(Sn,rn,nr,Or){fl(Sn,rn);var wr=nr.contextDep,ur=rn.def(),ar="a0",Er="a1",Tn=rn.def();Sn.shared.props=Tn,Sn.batchId=ur;var Jn=Sn.scope(),bn=Sn.scope();rn(Jn.entry,"for(",ur,"=0;",ur,"<",Er,";++",ur,"){",Tn,"=",ar,"[",ur,"];",bn,"}",Jn.exit);function Tr(ha){return ha.contextDep&&wr||ha.propDep}function Dr(ha){return!Tr(ha)}if(nr.needsContext&&$l(Sn,bn,nr.context),nr.needsFramebuffer&&lc(Sn,bn,nr.framebuffer),cc(Sn,bn,nr.state,Tr),nr.profile&&Tr(nr.profile)&&Io(Sn,bn,nr,!1,!0),Or)nr.useVAO?nr.drawVAO?Tr(nr.drawVAO)?bn(Sn.shared.vao,".setVAO(",nr.drawVAO.append(Sn,bn),");"):Jn(Sn.shared.vao,".setVAO(",nr.drawVAO.append(Sn,Jn),");"):Jn(Sn.shared.vao,".setVAO(",Sn.shared.vao,".targetVAO);"):(Jn(Sn.shared.vao,".setVAO(null);"),yc(Sn,Jn,nr,Or.attributes,Dr),yc(Sn,bn,nr,Or.attributes,Tr)),zs(Sn,Jn,nr,Or.uniforms,Dr),zs(Sn,bn,nr,Or.uniforms,Tr),Ya(Sn,Jn,bn,nr);else{var ci=Sn.global.def("{}"),Hr=nr.shader.progVar.append(Sn,bn),ai=bn.def(Hr,".id"),Bi=bn.def(ci,"[",ai,"]");bn(Sn.shared.gl,".useProgram(",Hr,".program);","if(!",Bi,"){",Bi,"=",ci,"[",ai,"]=",Sn.link(function(ha){return So(bc,Sn,nr,ha,2)}),"(",Hr,");}",Bi,".call(this,a0[",ur,"],",ur,");")}}function jn(Sn,rn){var nr=Sn.proc("batch",2);Sn.batchId="0",fl(Sn,nr);var Or=!1,wr=!0;Object.keys(rn.context).forEach(function(ci){Or=Or||rn.context[ci].propDep}),Or||($l(Sn,nr,rn.context),wr=!1);var ur=rn.framebuffer,ar=!1;ur?(ur.propDep?Or=ar=!0:ur.contextDep&&Or&&(ar=!0),ar||lc(Sn,nr,ur)):lc(Sn,nr,null),rn.state.viewport&&rn.state.viewport.propDep&&(Or=!0);function Er(ci){return ci.contextDep&&Or||ci.propDep}mc(Sn,nr,rn),cc(Sn,nr,rn.state,function(ci){return!Er(ci)}),(!rn.profile||!Er(rn.profile))&&Io(Sn,nr,rn,!1,"a1"),rn.contextDep=Or,rn.needsContext=wr,rn.needsFramebuffer=ar;var Tn=rn.shader.progVar;if(Tn.contextDep&&Or||Tn.propDep)sf(Sn,nr,rn,null);else{var Jn=Tn.append(Sn,nr);if(nr(Sn.shared.gl,".useProgram(",Jn,".program);"),rn.shader.program)sf(Sn,nr,rn,rn.shader.program);else{nr(Sn.shared.vao,".setVAO(null);");var bn=Sn.global.def("{}"),Tr=nr.def(Jn,".id"),Dr=nr.def(bn,"[",Tr,"]");nr(Sn.cond(Dr).then(Dr,".call(this,a0,a1);").else(Dr,"=",bn,"[",Tr,"]=",Sn.link(function(ci){return So(sf,Sn,rn,ci,2)}),"(",Jn,");",Dr,".call(this,a0,a1);"))}}Object.keys(rn.state).length>0&&nr(Sn.shared.current,".dirty=true;")}function Wr(Sn,rn){var nr=Sn.proc("scope",3);Sn.batchId="a2";var Or=Sn.shared,wr=Or.current;$l(Sn,nr,rn.context),rn.framebuffer&&rn.framebuffer.append(Sn,nr),If(Object.keys(rn.state)).forEach(function(ar){var Er=rn.state[ar],Tn=Er.append(Sn,nr);Co(Tn)?Tn.forEach(function(Jn,bn){nr.set(Sn.next[ar],"["+bn+"]",Jn)}):nr.set(Or.next,"."+ar,Tn)}),Io(Sn,nr,rn,!0,!0),[ll,Zc,Nc,Fc,Jl].forEach(function(ar){var Er=rn.draw[ar];!Er||nr.set(Or.draw,"."+ar,""+Er.append(Sn,nr))}),Object.keys(rn.uniforms).forEach(function(ar){var Er=rn.uniforms[ar].append(Sn,nr);Array.isArray(Er)&&(Er="["+Er.join()+"]"),nr.set(Or.uniforms,"["+xe.id(ar)+"]",Er)}),Object.keys(rn.attributes).forEach(function(ar){var Er=rn.attributes[ar].append(Sn,nr),Tn=Sn.scopeAttrib(ar);Object.keys(new Cr).forEach(function(Jn){nr.set(Tn,"."+Jn,Er[Jn])})}),rn.scopeVAO&&nr.set(Or.vao,".targetVAO",rn.scopeVAO.append(Sn,nr));function ur(ar){var Er=rn.shader[ar];Er&&nr.set(Or.shader,"."+ar,Er.append(Sn,nr))}ur(Eu),ur(Fl),Object.keys(rn.state).length>0&&(nr(wr,".dirty=true;"),nr.exit(wr,".dirty=true;")),nr("a1(",Sn.shared.context,",a0,",Sn.batchId,");")}function Ur(Sn){if(!(typeof Sn!="object"||Co(Sn))){for(var rn=Object.keys(Sn),nr=0;nr<rn.length;++nr)if(We.isDynamic(Sn[rn[nr]]))return!0;return!1}}function na(Sn,rn,nr){var Or=rn.static[nr];if(!Or||!Ur(Or))return;var wr=Sn.global,ur=Object.keys(Or),ar=!1,Er=!1,Tn=!1,Jn=Sn.global.def("{}");ur.forEach(function(Tr){var Dr=Or[Tr];if(We.isDynamic(Dr)){typeof Dr=="function"&&(Dr=Or[Tr]=We.unbox(Dr));var ci=Oc(Dr,null);ar=ar||ci.thisDep,Tn=Tn||ci.propDep,Er=Er||ci.contextDep}else{switch(wr(Jn,".",Tr,"="),typeof Dr){case"number":wr(Dr);break;case"string":wr('"',Dr,'"');break;case"object":Array.isArray(Dr)&&wr("[",Dr.join(),"]");break;default:wr(Sn.link(Dr));break}wr(";")}});function bn(Tr,Dr){ur.forEach(function(ci){var Hr=Or[ci];if(!!We.isDynamic(Hr)){var ai=Tr.invoke(Dr,Hr);Dr(Jn,".",ci,"=",ai,";")}})}rn.dynamic[nr]=new We.DynamicVariable(Sa,{thisDep:ar,contextDep:Er,propDep:Tn,ref:Jn,append:bn}),delete rn.static[nr]}function oo(Sn,rn,nr,Or,wr){var ur=Qi();ur.stats=ur.link(wr),Object.keys(rn.static).forEach(function(Er){na(ur,rn,Er)}),cf.forEach(function(Er){na(ur,Sn,Er)});var ar=Zl(Sn,rn,nr,Or,ur);return xc(ur,ar),Wr(ur,ar),jn(ur,ar),E(ur.compile(),{destroy:function(){ar.shader.program.destroy()}})}return{next:ca,current:kr,procs:function(){var Sn=Qi(),rn=Sn.proc("poll"),nr=Sn.proc("refresh"),Or=Sn.block();rn(Or),nr(Or);var wr=Sn.shared,ur=wr.gl,ar=wr.next,Er=wr.current;Or(Er,".dirty=false;"),lc(Sn,rn),lc(Sn,nr,null,!0);var Tn;Mi&&(Tn=Sn.link(Mi)),Ke.oes_vertex_array_object&&nr(Sn.link(Ke.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Jn=0;Jn<zn.maxAttributes;++Jn){var bn=nr.def(wr.attributes,"[",Jn,"]"),Tr=Sn.cond(bn,".buffer");Tr.then(ur,".enableVertexAttribArray(",Jn,");",ur,".bindBuffer(",Xc,",",bn,".buffer.buffer);",ur,".vertexAttribPointer(",Jn,",",bn,".size,",bn,".type,",bn,".normalized,",bn,".stride,",bn,".offset);").else(ur,".disableVertexAttribArray(",Jn,");",ur,".vertexAttrib4f(",Jn,",",bn,".x,",bn,".y,",bn,".z,",bn,".w);",bn,".buffer=null;"),nr(Tr),Mi&&nr(Tn,".vertexAttribDivisorANGLE(",Jn,",",bn,".divisor);")}return nr(Sn.shared.vao,".currentVAO=null;",Sn.shared.vao,".setVAO(",Sn.shared.vao,".targetVAO);"),Object.keys(Ai).forEach(function(Dr){var ci=Ai[Dr],Hr=Or.def(ar,".",Dr),ai=Sn.block();ai("if(",Hr,"){",ur,".enable(",ci,")}else{",ur,".disable(",ci,")}",Er,".",Dr,"=",Hr,";"),nr(ai),rn("if(",Hr,"!==",Er,".",Dr,"){",ai,"}")}),Object.keys(Ei).forEach(function(Dr){var ci=Ei[Dr],Hr=kr[Dr],ai,Bi,ha=Sn.block();if(ha(ur,".",ci,"("),Co(Hr)){var fo=Hr.length;ai=Sn.global.def(ar,".",Dr),Bi=Sn.global.def(Er,".",Dr),ha(Me(fo,function(da){return ai+"["+da+"]"}),");",Me(fo,function(da){return Bi+"["+da+"]="+ai+"["+da+"];"}).join("")),rn("if(",Me(fo,function(da){return ai+"["+da+"]!=="+Bi+"["+da+"]"}).join("||"),"){",ha,"}")}else ai=Or.def(ar,".",Dr),Bi=Or.def(Er,".",Dr),ha(ai,");",Er,".",Dr,"=",ai,";"),rn("if(",ai,"!==",Bi,"){",ha,"}");nr(ha)}),Sn.compile()}(),compile:oo}}function eh(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var nh=34918,Ac=34919,mh=35007,Ih=function(xe,Ke){if(!Ke.ext_disjoint_timer_query)return null;var zn=[];function lr(){return zn.pop()||Ke.ext_disjoint_timer_query.createQueryEXT()}function pr(Gi){zn.push(Gi)}var Qn=[];function Jr(Gi){var kr=lr();Ke.ext_disjoint_timer_query.beginQueryEXT(mh,kr),Qn.push(kr),gi(Qn.length-1,Qn.length,Gi)}function qr(){Ke.ext_disjoint_timer_query.endQueryEXT(mh)}function ri(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ui=[];function yi(){return ui.pop()||new ri}function Ti(Gi){ui.push(Gi)}var pi=[];function gi(Gi,kr,ca){var Oi=yi();Oi.startQueryIndex=Gi,Oi.endQueryIndex=kr,Oi.sum=0,Oi.stats=ca,pi.push(Oi)}var Cr=[],Ir=[];function Mi(){var Gi,kr,ca=Qn.length;if(ca!==0){Ir.length=Math.max(Ir.length,ca+1),Cr.length=Math.max(Cr.length,ca+1),Cr[0]=0,Ir[0]=0;var Oi=0;for(Gi=0,kr=0;kr<Qn.length;++kr){var Ai=Qn[kr];Ke.ext_disjoint_timer_query.getQueryObjectEXT(Ai,Ac)?(Oi+=Ke.ext_disjoint_timer_query.getQueryObjectEXT(Ai,nh),pr(Ai)):Qn[Gi++]=Ai,Cr[kr+1]=Oi,Ir[kr+1]=Gi}for(Qn.length=Gi,Gi=0,kr=0;kr<pi.length;++kr){var Ei=pi[kr],Ii=Ei.startQueryIndex,fa=Ei.endQueryIndex;Ei.sum+=Cr[fa]-Cr[Ii];var ma=Ir[Ii],ji=Ir[fa];ji===ma?(Ei.stats.gpuTime+=Ei.sum/1e6,Ti(Ei)):(Ei.startQueryIndex=ma,Ei.endQueryIndex=ji,pi[Gi++]=Ei)}pi.length=Gi}}return{beginQuery:Jr,endQuery:qr,pushScopeStats:gi,update:Mi,getNumPendingQueries:function(){return Qn.length},clear:function(){zn.push.apply(zn,Qn);for(var kr=0;kr<zn.length;kr++)Ke.ext_disjoint_timer_query.deleteQueryEXT(zn[kr]);Qn.length=0,zn.length=0},restore:function(){Qn.length=0,zn.length=0}}},jt=16384,bt=256,X=1024,Et=34962,Lt="webglcontextlost",ie="webglcontextrestored",ze=1,yn=2,dn=3;function Pn(ce,xe){for(var Ke=0;Ke<ce.length;++Ke)if(ce[Ke]===xe)return Ke;return-1}function Br(ce){var xe=hi(ce);if(!xe)return null;var Ke=xe.gl,zn=Ke.getContextAttributes(),lr=Ke.isContextLost(),pr=Ae(Ke,xe);if(!pr)return null;var Qn=er(),Jr=eh(),qr=pr.extensions,ri=Ih(Ke,qr),ui=wn(),yi=Ke.drawingBufferWidth,Ti=Ke.drawingBufferHeight,pi={tick:0,time:0,viewportWidth:yi,viewportHeight:Ti,framebufferWidth:yi,framebufferHeight:Ti,drawingBufferWidth:yi,drawingBufferHeight:Ti,pixelRatio:xe.pixelRatio},gi={},Cr={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ir=Ne(Ke,qr),Mi=Ua(Ke,Jr,xe,kr),Gi=Zt(Ke,qr,Ir,Jr,Mi);function kr(Ya){return Gi.destroyBuffer(Ya)}var ca=Qs(Ke,qr,Mi,Jr),Oi=Oe(Ke,Qn,Jr,xe),Ai=Kt(Ke,qr,Ir,function(){fa.procs.poll()},pi,Jr,xe),Ei=fn(Ke,qr,Ir,Jr,xe),Ii=st(Ke,qr,Ir,Ai,Ei,Jr),fa=th(Ke,Qn,qr,Ir,Mi,ca,Ai,Ii,gi,Gi,Oi,Cr,pi,ri,xe),ma=kn(Ke,Ii,fa.procs.poll,pi,zn,qr,Ir),ji=fa.next,Si=Ke.canvas,di=[],Qi=[],aa=[],$i=[xe.onDestroy],co=null;function mo(){if(di.length===0){ri&&ri.update(),co=null;return}co=Ye.next(mo),cc();for(var Ya=di.length-1;Ya>=0;--Ya){var So=di[Ya];So&&So(pi,null,0)}Ke.flush(),ri&&ri.update()}function No(){!co&&di.length>0&&(co=Ye.next(mo))}function Ko(){co&&(Ye.cancel(mo),co=null)}function Il(Ya){Ya.preventDefault(),lr=!0,Ko(),Qi.forEach(function(So){So()})}function uc(Ya){Ke.getError(),lr=!1,pr.restore(),Oi.restore(),Mi.restore(),Ai.restore(),Ei.restore(),Ii.restore(),Gi.restore(),ri&&ri.restore(),fa.procs.refresh(),No(),aa.forEach(function(So){So()})}Si&&(Si.addEventListener(Lt,Il,!1),Si.addEventListener(ie,uc,!1));function ts(){di.length=0,Ko(),Si&&(Si.removeEventListener(Lt,Il),Si.removeEventListener(ie,uc)),Oi.clear(),Ii.clear(),Ei.clear(),Ai.clear(),ca.clear(),Mi.clear(),Gi.clear(),ri&&ri.clear(),$i.forEach(function(Ya){Ya()})}function _l(Ya){$(!!Ya,"invalid args to regl({...})"),$.type(Ya,"object","invalid args to regl({...})");function So(wr){var ur=E({},wr);delete ur.uniforms,delete ur.attributes,delete ur.context,delete ur.vao,"stencil"in ur&&ur.stencil.op&&(ur.stencil.opBack=ur.stencil.opFront=ur.stencil.op,delete ur.stencil.op);function ar(Er){if(Er in ur){var Tn=ur[Er];delete ur[Er],Object.keys(Tn).forEach(function(Jn){ur[Er+"."+Jn]=Tn[Jn]})}}return ar("blend"),ar("depth"),ar("cull"),ar("stencil"),ar("polygonOffset"),ar("scissor"),ar("sample"),"vao"in wr&&(ur.vao=wr.vao),ur}function as(wr,ur){var ar={},Er={};return Object.keys(wr).forEach(function(Tn){var Jn=wr[Tn];if(We.isDynamic(Jn)){Er[Tn]=We.unbox(Jn,Tn);return}else if(ur&&Array.isArray(Jn)){for(var bn=0;bn<Jn.length;++bn)if(We.isDynamic(Jn[bn])){Er[Tn]=We.unbox(Jn,Tn);return}}ar[Tn]=Jn}),{dynamic:Er,static:ar}}var xc=as(Ya.context||{},!0),bc=as(Ya.uniforms||{},!0),sf=as(Ya.attributes||{},!1),jn=as(So(Ya),!1),Wr={gpuTime:0,cpuTime:0,count:0},Ur=fa.compile(jn,sf,bc,xc,Wr),na=Ur.draw,oo=Ur.batch,Sn=Ur.scope,rn=[];function nr(wr){for(;rn.length<wr;)rn.push(null);return rn}function Or(wr,ur){var ar;if(lr&&$.raise("context lost"),typeof wr=="function")return Sn.call(this,null,wr,0);if(typeof ur=="function")if(typeof wr=="number")for(ar=0;ar<wr;++ar)Sn.call(this,null,ur,ar);else if(Array.isArray(wr))for(ar=0;ar<wr.length;++ar)Sn.call(this,wr[ar],ur,ar);else return Sn.call(this,wr,ur,0);else if(typeof wr=="number"){if(wr>0)return oo.call(this,nr(wr|0),wr|0)}else if(Array.isArray(wr)){if(wr.length)return oo.call(this,wr,wr.length)}else return na.call(this,wr)}return E(Or,{stats:Wr,destroy:function(){Ur.destroy()}})}var wu=Ii.setFBO=_l({framebuffer:We.define.call(null,ze,"framebuffer")});function Zl(Ya,So){var as=0;fa.procs.poll();var xc=So.color;xc&&(Ke.clearColor(+xc[0]||0,+xc[1]||0,+xc[2]||0,+xc[3]||0),as|=jt),"depth"in So&&(Ke.clearDepth(+So.depth),as|=bt),"stencil"in So&&(Ke.clearStencil(So.stencil|0),as|=X),$(!!as,"called regl.clear with no buffer specified"),Ke.clear(as)}function $l(Ya){if($(typeof Ya=="object"&&Ya,"regl.clear() takes an object as input"),"framebuffer"in Ya)if(Ya.framebuffer&&Ya.framebuffer_reglType==="framebufferCube")for(var So=0;So<6;++So)wu(E({framebuffer:Ya.framebuffer.faces[So]},Ya),Zl);else wu(Ya,Zl);else Zl(null,Ya)}function lc(Ya){$.type(Ya,"function","regl.frame() callback must be a function"),di.push(Ya);function So(){var as=Pn(di,Ya);$(as>=0,"cannot cancel a frame twice");function xc(){var bc=Pn(di,xc);di[bc]=di[di.length-1],di.length-=1,di.length<=0&&Ko()}di[as]=xc}return No(),{cancel:So}}function mc(){var Ya=ji.viewport,So=ji.scissor_box;Ya[0]=Ya[1]=So[0]=So[1]=0,pi.viewportWidth=pi.framebufferWidth=pi.drawingBufferWidth=Ya[2]=So[2]=Ke.drawingBufferWidth,pi.viewportHeight=pi.framebufferHeight=pi.drawingBufferHeight=Ya[3]=So[3]=Ke.drawingBufferHeight}function cc(){pi.tick+=1,pi.time=Io(),mc(),fa.procs.poll()}function fl(){Ai.refresh(),mc(),fa.procs.refresh(),ri&&ri.update()}function Io(){return(wn()-ui)/1e3}fl();function yc(Ya,So){$.type(So,"function","listener callback must be a function");var as;switch(Ya){case"frame":return lc(So);case"lost":as=Qi;break;case"restore":as=aa;break;case"destroy":as=$i;break;default:$.raise("invalid event, must be one of frame,lost,restore,destroy")}return as.push(So),{cancel:function(){for(var bc=0;bc<as.length;++bc)if(as[bc]===So){as[bc]=as[as.length-1],as.pop();return}}}}var zs=E(_l,{clear:$l,prop:We.define.bind(null,ze),context:We.define.bind(null,yn),this:We.define.bind(null,dn),draw:_l({}),buffer:function(So){return Mi.create(So,Et,!1,!1)},elements:function(So){return ca.create(So,!1)},texture:Ai.create2D,cube:Ai.createCube,renderbuffer:Ei.create,framebuffer:Ii.create,framebufferCube:Ii.createCube,vao:Gi.createVAO,attributes:zn,frame:lc,on:yc,limits:Ir,hasExtension:function(So){return Ir.extensions.indexOf(So.toLowerCase())>=0},read:ma,destroy:ts,_gl:Ke,_refresh:fl,poll:function(){cc(),ri&&ri.update()},now:Io,stats:Jr});return xe.onDone(null,zs),zs}return Br})},fdMe:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return V});function V(E,T){var e=T.callback;return e&&(E.dataArray=E.dataArray.map(e)),E}},fhzG:function(_e,dt,R){"use strict";var V=R("q1tI"),E=R("lT4e");if(typeof V=="undefined")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var T=new V.Component().updater;_e.exports=E(V.Component,V.isValidElement,T)},fo6e:function(_e,dt){var R=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function V(E){return R.test(E)}_e.exports=V},g4R6:function(_e,dt){function R(V,E,T){return V===V&&(T!==void 0&&(V=V<=T?V:T),E!==void 0&&(V=V>=E?V:E)),V}_e.exports=R},gFfm:function(_e,dt){function R(V,E){for(var T=-1,e=V==null?0:V.length;++T<e&&E(V[T],T,V)!==!1;);return V}_e.exports=R},gMG2:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return M});var V={},E={},T=34,e=10,t=13;function u(x){return new Function("d","return {"+x.map(function(y,S){return JSON.stringify(y)+": d["+S+'] || ""'}).join(",")+"}")}function s(x,y){var S=u(x);return function(P,A){return y(S(P),A,x)}}function c(x){var y=Object.create(null),S=[];return x.forEach(function(P){for(var A in P)A in y||S.push(y[A]=A)}),S}function r(x,y){var S=x+"",P=S.length;return P<y?new Array(y-P+1).join(0)+S:S}function h(x){return x<0?"-"+r(-x,6):x>9999?"+"+r(x,6):r(x,4)}function n(x){var y=x.getUTCHours(),S=x.getUTCMinutes(),P=x.getUTCSeconds(),A=x.getUTCMilliseconds();return isNaN(x)?"Invalid Date":h(x.getUTCFullYear(),4)+"-"+r(x.getUTCMonth()+1,2)+"-"+r(x.getUTCDate(),2)+(A?"T"+r(y,2)+":"+r(S,2)+":"+r(P,2)+"."+r(A,3)+"Z":P?"T"+r(y,2)+":"+r(S,2)+":"+r(P,2)+"Z":S||y?"T"+r(y,2)+":"+r(S,2)+"Z":"")}var i=function(x){var y=new RegExp('["'+x+`
\r]`),S=x.charCodeAt(0);function P(U,Z){var J,rt,vt=A(U,function(mt,ut){if(J)return J(mt,ut-1);rt=mt,J=Z?s(mt,Z):u(mt)});return vt.columns=rt||[],vt}function A(U,Z){var J=[],rt=U.length,vt=0,mt=0,ut,Rt=rt<=0,Ft=!1;U.charCodeAt(rt-1)===e&&--rt,U.charCodeAt(rt-1)===t&&--rt;function wt(){if(Rt)return E;if(Ft)return Ft=!1,V;var St,At=vt,nt;if(U.charCodeAt(At)===T){for(;vt++<rt&&U.charCodeAt(vt)!==T||U.charCodeAt(++vt)===T;);return(St=vt)>=rt?Rt=!0:(nt=U.charCodeAt(vt++))===e?Ft=!0:nt===t&&(Ft=!0,U.charCodeAt(vt)===e&&++vt),U.slice(At+1,St-1).replace(/""/g,'"')}for(;vt<rt;){if((nt=U.charCodeAt(St=vt++))===e)Ft=!0;else if(nt===t)Ft=!0,U.charCodeAt(vt)===e&&++vt;else if(nt!==S)continue;return U.slice(At,St)}return Rt=!0,U.slice(At,rt)}for(;(ut=wt())!==E;){for(var Mt=[];ut!==V&&ut!==E;)Mt.push(ut),ut=wt();Z&&(Mt=Z(Mt,mt++))==null||J.push(Mt)}return J}function O(U,Z){return U.map(function(J){return Z.map(function(rt){return G(J[rt])}).join(x)})}function L(U,Z){return Z==null&&(Z=c(U)),[Z.map(G).join(x)].concat(O(U,Z)).join(`
`)}function H(U,Z){return Z==null&&(Z=c(U)),O(U,Z).join(`
`)}function F(U){return U.map(K).join(`
`)}function K(U){return U.map(G).join(x)}function G(U){return U==null?"":U instanceof Date?n(U):y.test(U+="")?'"'+U.replace(/"/g,'""')+'"':U}return{parse:P,parseRows:A,format:L,formatBody:H,formatRows:F,formatRow:K,formatValue:G}},a=i(","),o=a.parse,l=a.parseRows,f=a.format,v=a.formatBody,b=a.formatRows,g=a.formatRow,m=a.formatValue,_=R("5zYK");function M(x,y){var S=o(x);return Object(_.a)(S,y)}},gQMU:function(_e,dt,R){var V=R("0ZTe"),E=V("toUpperCase");_e.exports=E},gzZq:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.BindingToSyntax=void 0;var V=R("MON2"),E=R("FV85"),T=R("D9lx"),e=R("LKzl"),t=function(){function u(s){this._binding=s}return u.prototype.to=function(s){return this._binding.type=E.BindingTypeEnum.Instance,this._binding.implementationType=s,new T.BindingInWhenOnSyntax(this._binding)},u.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+V.INVALID_TO_SELF_VALUE);var s=this._binding.serviceIdentifier;return this.to(s)},u.prototype.toConstantValue=function(s){return this._binding.type=E.BindingTypeEnum.ConstantValue,this._binding.cache=s,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toDynamicValue=function(s){return this._binding.type=E.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=s,this._binding.implementationType=null,new T.BindingInWhenOnSyntax(this._binding)},u.prototype.toConstructor=function(s){return this._binding.type=E.BindingTypeEnum.Constructor,this._binding.implementationType=s,this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toFactory=function(s){return this._binding.type=E.BindingTypeEnum.Factory,this._binding.factory=s,this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toFunction=function(s){if(typeof s!="function")throw new Error(V.INVALID_FUNCTION_BINDING);var c=this.toConstantValue(s);return this._binding.type=E.BindingTypeEnum.Function,this._binding.scope=E.BindingScopeEnum.Singleton,c},u.prototype.toAutoFactory=function(s){return this._binding.type=E.BindingTypeEnum.Factory,this._binding.factory=function(c){var r=function(){return c.container.get(s)};return r},this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toProvider=function(s){return this._binding.type=E.BindingTypeEnum.Provider,this._binding.provider=s,this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toService=function(s){this.toDynamicValue(function(c){return c.container.get(s)})},u}();dt.BindingToSyntax=t},h1nZ:function(_e,dt,R){"use strict";var V=R("fX6N");R.d(dt,"container",function(){return V.c}),R.d(dt,"createSceneContainer",function(){return V.b}),R.d(dt,"createLayerContainer",function(){return V.a}),R.d(dt,"lazyInject",function(){return V.d});var E=R("+em5"),T=R("bB6j");R.d(dt,"TYPES",function(){return T.a});var e=R("8/Fi"),t=R("PUg6");R.d(dt,"BlendType",function(){return t.a});var u=R("cZlC");R.d(dt,"AttributeType",function(){return u.a}),R.d(dt,"ScaleTypes",function(){return u.b}),R.d(dt,"StyleScaleType",function(){return u.c});var s=R("O1je"),c=R.n(s);R.o(s,"CameraUniform")&&R.d(dt,"CameraUniform",function(){return s.CameraUniform}),R.o(s,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return s.CityBuildingLayer}),R.o(s,"Control")&&R.d(dt,"Control",function(){return s.Control}),R.o(s,"CoordinateSystem")&&R.d(dt,"CoordinateSystem",function(){return s.CoordinateSystem}),R.o(s,"CoordinateUniform")&&R.d(dt,"CoordinateUniform",function(){return s.CoordinateUniform}),R.o(s,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return s.HeatmapLayer}),R.o(s,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return s.ImageLayer}),R.o(s,"LineLayer")&&R.d(dt,"LineLayer",function(){return s.LineLayer}),R.o(s,"Logo")&&R.d(dt,"Logo",function(){return s.Logo}),R.o(s,"MapServiceEvent")&&R.d(dt,"MapServiceEvent",function(){return s.MapServiceEvent}),R.o(s,"Marker")&&R.d(dt,"Marker",function(){return s.Marker}),R.o(s,"PointLayer")&&R.d(dt,"PointLayer",function(){return s.PointLayer}),R.o(s,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return s.PolygonLayer}),R.o(s,"Popup")&&R.d(dt,"Popup",function(){return s.Popup}),R.o(s,"PositionType")&&R.d(dt,"PositionType",function(){return s.PositionType}),R.o(s,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return s.RasterLayer}),R.o(s,"Scale")&&R.d(dt,"Scale",function(){return s.Scale}),R.o(s,"Scene")&&R.d(dt,"Scene",function(){return s.Scene}),R.o(s,"SceneEventList")&&R.d(dt,"SceneEventList",function(){return s.SceneEventList}),R.o(s,"Zoom")&&R.d(dt,"Zoom",function(){return s.Zoom}),R.o(s,"gl")&&R.d(dt,"gl",function(){return s.gl});var r=R("L56e");R.d(dt,"MapServiceEvent",function(){return r.a});var h=R("HthE");R.d(dt,"CoordinateSystem",function(){return h.a}),R.d(dt,"CoordinateUniform",function(){return h.b});var n=R("/33/"),i=R.n(n);R.o(n,"CameraUniform")&&R.d(dt,"CameraUniform",function(){return n.CameraUniform}),R.o(n,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return n.CityBuildingLayer}),R.o(n,"Control")&&R.d(dt,"Control",function(){return n.Control}),R.o(n,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return n.HeatmapLayer}),R.o(n,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return n.ImageLayer}),R.o(n,"LineLayer")&&R.d(dt,"LineLayer",function(){return n.LineLayer}),R.o(n,"Logo")&&R.d(dt,"Logo",function(){return n.Logo}),R.o(n,"Marker")&&R.d(dt,"Marker",function(){return n.Marker}),R.o(n,"PointLayer")&&R.d(dt,"PointLayer",function(){return n.PointLayer}),R.o(n,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return n.PolygonLayer}),R.o(n,"Popup")&&R.d(dt,"Popup",function(){return n.Popup}),R.o(n,"PositionType")&&R.d(dt,"PositionType",function(){return n.PositionType}),R.o(n,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return n.RasterLayer}),R.o(n,"Scale")&&R.d(dt,"Scale",function(){return n.Scale}),R.o(n,"Scene")&&R.d(dt,"Scene",function(){return n.Scene}),R.o(n,"SceneEventList")&&R.d(dt,"SceneEventList",function(){return n.SceneEventList}),R.o(n,"Zoom")&&R.d(dt,"Zoom",function(){return n.Zoom}),R.o(n,"gl")&&R.d(dt,"gl",function(){return n.gl});var a=R("EfZ0");R.d(dt,"CameraUniform",function(){return a.a});var o=R("riiI"),l=R.n(o);R.o(o,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return o.CityBuildingLayer}),R.o(o,"Control")&&R.d(dt,"Control",function(){return o.Control}),R.o(o,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return o.HeatmapLayer}),R.o(o,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return o.ImageLayer}),R.o(o,"LineLayer")&&R.d(dt,"LineLayer",function(){return o.LineLayer}),R.o(o,"Logo")&&R.d(dt,"Logo",function(){return o.Logo}),R.o(o,"Marker")&&R.d(dt,"Marker",function(){return o.Marker}),R.o(o,"PointLayer")&&R.d(dt,"PointLayer",function(){return o.PointLayer}),R.o(o,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return o.PolygonLayer}),R.o(o,"Popup")&&R.d(dt,"Popup",function(){return o.Popup}),R.o(o,"PositionType")&&R.d(dt,"PositionType",function(){return o.PositionType}),R.o(o,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return o.RasterLayer}),R.o(o,"Scale")&&R.d(dt,"Scale",function(){return o.Scale}),R.o(o,"Scene")&&R.d(dt,"Scene",function(){return o.Scene}),R.o(o,"SceneEventList")&&R.d(dt,"SceneEventList",function(){return o.SceneEventList}),R.o(o,"Zoom")&&R.d(dt,"Zoom",function(){return o.Zoom}),R.o(o,"gl")&&R.d(dt,"gl",function(){return o.gl});var f=R("eg+a");R.d(dt,"SceneEventList",function(){return f.a});var v=R("bYl4"),b=R.n(v);R.o(v,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return v.CityBuildingLayer}),R.o(v,"Control")&&R.d(dt,"Control",function(){return v.Control}),R.o(v,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return v.HeatmapLayer}),R.o(v,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return v.ImageLayer}),R.o(v,"LineLayer")&&R.d(dt,"LineLayer",function(){return v.LineLayer}),R.o(v,"Logo")&&R.d(dt,"Logo",function(){return v.Logo}),R.o(v,"Marker")&&R.d(dt,"Marker",function(){return v.Marker}),R.o(v,"PointLayer")&&R.d(dt,"PointLayer",function(){return v.PointLayer}),R.o(v,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return v.PolygonLayer}),R.o(v,"Popup")&&R.d(dt,"Popup",function(){return v.Popup}),R.o(v,"PositionType")&&R.d(dt,"PositionType",function(){return v.PositionType}),R.o(v,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return v.RasterLayer}),R.o(v,"Scale")&&R.d(dt,"Scale",function(){return v.Scale}),R.o(v,"Scene")&&R.d(dt,"Scene",function(){return v.Scene}),R.o(v,"Zoom")&&R.d(dt,"Zoom",function(){return v.Zoom}),R.o(v,"gl")&&R.d(dt,"gl",function(){return v.gl});var g=R("FI6e"),m=R.n(g);R.o(g,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return g.CityBuildingLayer}),R.o(g,"Control")&&R.d(dt,"Control",function(){return g.Control}),R.o(g,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return g.HeatmapLayer}),R.o(g,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return g.ImageLayer}),R.o(g,"LineLayer")&&R.d(dt,"LineLayer",function(){return g.LineLayer}),R.o(g,"Logo")&&R.d(dt,"Logo",function(){return g.Logo}),R.o(g,"Marker")&&R.d(dt,"Marker",function(){return g.Marker}),R.o(g,"PointLayer")&&R.d(dt,"PointLayer",function(){return g.PointLayer}),R.o(g,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return g.PolygonLayer}),R.o(g,"Popup")&&R.d(dt,"Popup",function(){return g.Popup}),R.o(g,"PositionType")&&R.d(dt,"PositionType",function(){return g.PositionType}),R.o(g,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return g.RasterLayer}),R.o(g,"Scale")&&R.d(dt,"Scale",function(){return g.Scale}),R.o(g,"Scene")&&R.d(dt,"Scene",function(){return g.Scene}),R.o(g,"Zoom")&&R.d(dt,"Zoom",function(){return g.Zoom}),R.o(g,"gl")&&R.d(dt,"gl",function(){return g.gl});var _=R("D+ow"),M=R.n(_);R.o(_,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return _.CityBuildingLayer}),R.o(_,"Control")&&R.d(dt,"Control",function(){return _.Control}),R.o(_,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return _.HeatmapLayer}),R.o(_,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return _.ImageLayer}),R.o(_,"LineLayer")&&R.d(dt,"LineLayer",function(){return _.LineLayer}),R.o(_,"Logo")&&R.d(dt,"Logo",function(){return _.Logo}),R.o(_,"Marker")&&R.d(dt,"Marker",function(){return _.Marker}),R.o(_,"PointLayer")&&R.d(dt,"PointLayer",function(){return _.PointLayer}),R.o(_,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return _.PolygonLayer}),R.o(_,"Popup")&&R.d(dt,"Popup",function(){return _.Popup}),R.o(_,"PositionType")&&R.d(dt,"PositionType",function(){return _.PositionType}),R.o(_,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return _.RasterLayer}),R.o(_,"Scale")&&R.d(dt,"Scale",function(){return _.Scale}),R.o(_,"Scene")&&R.d(dt,"Scene",function(){return _.Scene}),R.o(_,"Zoom")&&R.d(dt,"Zoom",function(){return _.Zoom}),R.o(_,"gl")&&R.d(dt,"gl",function(){return _.gl});var x=R("AFH1");R.d(dt,"PositionType",function(){return x.a});var y=R("8uyu"),S=R.n(y);R.o(y,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return y.CityBuildingLayer}),R.o(y,"Control")&&R.d(dt,"Control",function(){return y.Control}),R.o(y,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return y.HeatmapLayer}),R.o(y,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return y.ImageLayer}),R.o(y,"LineLayer")&&R.d(dt,"LineLayer",function(){return y.LineLayer}),R.o(y,"Logo")&&R.d(dt,"Logo",function(){return y.Logo}),R.o(y,"Marker")&&R.d(dt,"Marker",function(){return y.Marker}),R.o(y,"PointLayer")&&R.d(dt,"PointLayer",function(){return y.PointLayer}),R.o(y,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return y.PolygonLayer}),R.o(y,"Popup")&&R.d(dt,"Popup",function(){return y.Popup}),R.o(y,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return y.RasterLayer}),R.o(y,"Scale")&&R.d(dt,"Scale",function(){return y.Scale}),R.o(y,"Scene")&&R.d(dt,"Scene",function(){return y.Scene}),R.o(y,"Zoom")&&R.d(dt,"Zoom",function(){return y.Zoom}),R.o(y,"gl")&&R.d(dt,"gl",function(){return y.gl});var P=R("J7lC"),A=R.n(P);R.o(P,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return P.CityBuildingLayer}),R.o(P,"Control")&&R.d(dt,"Control",function(){return P.Control}),R.o(P,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return P.HeatmapLayer}),R.o(P,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return P.ImageLayer}),R.o(P,"LineLayer")&&R.d(dt,"LineLayer",function(){return P.LineLayer}),R.o(P,"Logo")&&R.d(dt,"Logo",function(){return P.Logo}),R.o(P,"Marker")&&R.d(dt,"Marker",function(){return P.Marker}),R.o(P,"PointLayer")&&R.d(dt,"PointLayer",function(){return P.PointLayer}),R.o(P,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return P.PolygonLayer}),R.o(P,"Popup")&&R.d(dt,"Popup",function(){return P.Popup}),R.o(P,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return P.RasterLayer}),R.o(P,"Scale")&&R.d(dt,"Scale",function(){return P.Scale}),R.o(P,"Scene")&&R.d(dt,"Scene",function(){return P.Scene}),R.o(P,"Zoom")&&R.d(dt,"Zoom",function(){return P.Zoom}),R.o(P,"gl")&&R.d(dt,"gl",function(){return P.gl});var O=R("QGbF"),L=R.n(O);R.o(O,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return O.CityBuildingLayer}),R.o(O,"Control")&&R.d(dt,"Control",function(){return O.Control}),R.o(O,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return O.HeatmapLayer}),R.o(O,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return O.ImageLayer}),R.o(O,"LineLayer")&&R.d(dt,"LineLayer",function(){return O.LineLayer}),R.o(O,"Logo")&&R.d(dt,"Logo",function(){return O.Logo}),R.o(O,"Marker")&&R.d(dt,"Marker",function(){return O.Marker}),R.o(O,"PointLayer")&&R.d(dt,"PointLayer",function(){return O.PointLayer}),R.o(O,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return O.PolygonLayer}),R.o(O,"Popup")&&R.d(dt,"Popup",function(){return O.Popup}),R.o(O,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return O.RasterLayer}),R.o(O,"Scale")&&R.d(dt,"Scale",function(){return O.Scale}),R.o(O,"Scene")&&R.d(dt,"Scene",function(){return O.Scene}),R.o(O,"Zoom")&&R.d(dt,"Zoom",function(){return O.Zoom}),R.o(O,"gl")&&R.d(dt,"gl",function(){return O.gl});var H=R("V1cb"),F=R("4kj+"),K=R.n(F);R.o(F,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return F.CityBuildingLayer}),R.o(F,"Control")&&R.d(dt,"Control",function(){return F.Control}),R.o(F,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return F.HeatmapLayer}),R.o(F,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return F.ImageLayer}),R.o(F,"LineLayer")&&R.d(dt,"LineLayer",function(){return F.LineLayer}),R.o(F,"Logo")&&R.d(dt,"Logo",function(){return F.Logo}),R.o(F,"Marker")&&R.d(dt,"Marker",function(){return F.Marker}),R.o(F,"PointLayer")&&R.d(dt,"PointLayer",function(){return F.PointLayer}),R.o(F,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return F.PolygonLayer}),R.o(F,"Popup")&&R.d(dt,"Popup",function(){return F.Popup}),R.o(F,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return F.RasterLayer}),R.o(F,"Scale")&&R.d(dt,"Scale",function(){return F.Scale}),R.o(F,"Scene")&&R.d(dt,"Scene",function(){return F.Scene}),R.o(F,"Zoom")&&R.d(dt,"Zoom",function(){return F.Zoom}),R.o(F,"gl")&&R.d(dt,"gl",function(){return F.gl});var G=R("bzyH"),U=R.n(G);R.o(G,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return G.CityBuildingLayer}),R.o(G,"Control")&&R.d(dt,"Control",function(){return G.Control}),R.o(G,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return G.HeatmapLayer}),R.o(G,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return G.ImageLayer}),R.o(G,"LineLayer")&&R.d(dt,"LineLayer",function(){return G.LineLayer}),R.o(G,"Logo")&&R.d(dt,"Logo",function(){return G.Logo}),R.o(G,"Marker")&&R.d(dt,"Marker",function(){return G.Marker}),R.o(G,"PointLayer")&&R.d(dt,"PointLayer",function(){return G.PointLayer}),R.o(G,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return G.PolygonLayer}),R.o(G,"Popup")&&R.d(dt,"Popup",function(){return G.Popup}),R.o(G,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return G.RasterLayer}),R.o(G,"Scale")&&R.d(dt,"Scale",function(){return G.Scale}),R.o(G,"Scene")&&R.d(dt,"Scene",function(){return G.Scene}),R.o(G,"Zoom")&&R.d(dt,"Zoom",function(){return G.Zoom}),R.o(G,"gl")&&R.d(dt,"gl",function(){return G.gl});var Z=R("0eqD"),J=R.n(Z);R.o(Z,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return Z.CityBuildingLayer}),R.o(Z,"Control")&&R.d(dt,"Control",function(){return Z.Control}),R.o(Z,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return Z.HeatmapLayer}),R.o(Z,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return Z.ImageLayer}),R.o(Z,"LineLayer")&&R.d(dt,"LineLayer",function(){return Z.LineLayer}),R.o(Z,"Logo")&&R.d(dt,"Logo",function(){return Z.Logo}),R.o(Z,"Marker")&&R.d(dt,"Marker",function(){return Z.Marker}),R.o(Z,"PointLayer")&&R.d(dt,"PointLayer",function(){return Z.PointLayer}),R.o(Z,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return Z.PolygonLayer}),R.o(Z,"Popup")&&R.d(dt,"Popup",function(){return Z.Popup}),R.o(Z,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return Z.RasterLayer}),R.o(Z,"Scale")&&R.d(dt,"Scale",function(){return Z.Scale}),R.o(Z,"Scene")&&R.d(dt,"Scene",function(){return Z.Scene}),R.o(Z,"Zoom")&&R.d(dt,"Zoom",function(){return Z.Zoom}),R.o(Z,"gl")&&R.d(dt,"gl",function(){return Z.gl});var rt=R("/Uc5"),vt=R.n(rt);R.o(rt,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return rt.CityBuildingLayer}),R.o(rt,"Control")&&R.d(dt,"Control",function(){return rt.Control}),R.o(rt,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return rt.HeatmapLayer}),R.o(rt,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return rt.ImageLayer}),R.o(rt,"LineLayer")&&R.d(dt,"LineLayer",function(){return rt.LineLayer}),R.o(rt,"Logo")&&R.d(dt,"Logo",function(){return rt.Logo}),R.o(rt,"Marker")&&R.d(dt,"Marker",function(){return rt.Marker}),R.o(rt,"PointLayer")&&R.d(dt,"PointLayer",function(){return rt.PointLayer}),R.o(rt,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return rt.PolygonLayer}),R.o(rt,"Popup")&&R.d(dt,"Popup",function(){return rt.Popup}),R.o(rt,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return rt.RasterLayer}),R.o(rt,"Scale")&&R.d(dt,"Scale",function(){return rt.Scale}),R.o(rt,"Scene")&&R.d(dt,"Scene",function(){return rt.Scene}),R.o(rt,"Zoom")&&R.d(dt,"Zoom",function(){return rt.Zoom}),R.o(rt,"gl")&&R.d(dt,"gl",function(){return rt.gl});var mt=R("RMtq"),ut=R.n(mt);R.o(mt,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return mt.CityBuildingLayer}),R.o(mt,"Control")&&R.d(dt,"Control",function(){return mt.Control}),R.o(mt,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return mt.HeatmapLayer}),R.o(mt,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return mt.ImageLayer}),R.o(mt,"LineLayer")&&R.d(dt,"LineLayer",function(){return mt.LineLayer}),R.o(mt,"Logo")&&R.d(dt,"Logo",function(){return mt.Logo}),R.o(mt,"Marker")&&R.d(dt,"Marker",function(){return mt.Marker}),R.o(mt,"PointLayer")&&R.d(dt,"PointLayer",function(){return mt.PointLayer}),R.o(mt,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return mt.PolygonLayer}),R.o(mt,"Popup")&&R.d(dt,"Popup",function(){return mt.Popup}),R.o(mt,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return mt.RasterLayer}),R.o(mt,"Scale")&&R.d(dt,"Scale",function(){return mt.Scale}),R.o(mt,"Scene")&&R.d(dt,"Scene",function(){return mt.Scene}),R.o(mt,"Zoom")&&R.d(dt,"Zoom",function(){return mt.Zoom}),R.o(mt,"gl")&&R.d(dt,"gl",function(){return mt.gl});var Rt=R("1jvM"),Ft=R.n(Rt);R.o(Rt,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return Rt.CityBuildingLayer}),R.o(Rt,"Control")&&R.d(dt,"Control",function(){return Rt.Control}),R.o(Rt,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return Rt.HeatmapLayer}),R.o(Rt,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return Rt.ImageLayer}),R.o(Rt,"LineLayer")&&R.d(dt,"LineLayer",function(){return Rt.LineLayer}),R.o(Rt,"Logo")&&R.d(dt,"Logo",function(){return Rt.Logo}),R.o(Rt,"Marker")&&R.d(dt,"Marker",function(){return Rt.Marker}),R.o(Rt,"PointLayer")&&R.d(dt,"PointLayer",function(){return Rt.PointLayer}),R.o(Rt,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return Rt.PolygonLayer}),R.o(Rt,"Popup")&&R.d(dt,"Popup",function(){return Rt.Popup}),R.o(Rt,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return Rt.RasterLayer}),R.o(Rt,"Scale")&&R.d(dt,"Scale",function(){return Rt.Scale}),R.o(Rt,"Scene")&&R.d(dt,"Scene",function(){return Rt.Scene}),R.o(Rt,"Zoom")&&R.d(dt,"Zoom",function(){return Rt.Zoom}),R.o(Rt,"gl")&&R.d(dt,"gl",function(){return Rt.gl});var wt=R("bPkA"),Mt=R("PSsN"),St=R.n(Mt);R.o(Mt,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return Mt.CityBuildingLayer}),R.o(Mt,"Control")&&R.d(dt,"Control",function(){return Mt.Control}),R.o(Mt,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return Mt.HeatmapLayer}),R.o(Mt,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return Mt.ImageLayer}),R.o(Mt,"LineLayer")&&R.d(dt,"LineLayer",function(){return Mt.LineLayer}),R.o(Mt,"Logo")&&R.d(dt,"Logo",function(){return Mt.Logo}),R.o(Mt,"Marker")&&R.d(dt,"Marker",function(){return Mt.Marker}),R.o(Mt,"PointLayer")&&R.d(dt,"PointLayer",function(){return Mt.PointLayer}),R.o(Mt,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return Mt.PolygonLayer}),R.o(Mt,"Popup")&&R.d(dt,"Popup",function(){return Mt.Popup}),R.o(Mt,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return Mt.RasterLayer}),R.o(Mt,"Scale")&&R.d(dt,"Scale",function(){return Mt.Scale}),R.o(Mt,"Scene")&&R.d(dt,"Scene",function(){return Mt.Scene}),R.o(Mt,"Zoom")&&R.d(dt,"Zoom",function(){return Mt.Zoom}),R.o(Mt,"gl")&&R.d(dt,"gl",function(){return Mt.gl});var At=R("6NqC"),nt=R.n(At);R.o(At,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return At.CityBuildingLayer}),R.o(At,"Control")&&R.d(dt,"Control",function(){return At.Control}),R.o(At,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return At.HeatmapLayer}),R.o(At,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return At.ImageLayer}),R.o(At,"LineLayer")&&R.d(dt,"LineLayer",function(){return At.LineLayer}),R.o(At,"Logo")&&R.d(dt,"Logo",function(){return At.Logo}),R.o(At,"Marker")&&R.d(dt,"Marker",function(){return At.Marker}),R.o(At,"PointLayer")&&R.d(dt,"PointLayer",function(){return At.PointLayer}),R.o(At,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return At.PolygonLayer}),R.o(At,"Popup")&&R.d(dt,"Popup",function(){return At.Popup}),R.o(At,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return At.RasterLayer}),R.o(At,"Scale")&&R.d(dt,"Scale",function(){return At.Scale}),R.o(At,"Scene")&&R.d(dt,"Scene",function(){return At.Scene}),R.o(At,"Zoom")&&R.d(dt,"Zoom",function(){return At.Zoom}),R.o(At,"gl")&&R.d(dt,"gl",function(){return At.gl});var Pt=R("bTtR"),z=R.n(Pt);R.o(Pt,"CityBuildingLayer")&&R.d(dt,"CityBuildingLayer",function(){return Pt.CityBuildingLayer}),R.o(Pt,"Control")&&R.d(dt,"Control",function(){return Pt.Control}),R.o(Pt,"HeatmapLayer")&&R.d(dt,"HeatmapLayer",function(){return Pt.HeatmapLayer}),R.o(Pt,"ImageLayer")&&R.d(dt,"ImageLayer",function(){return Pt.ImageLayer}),R.o(Pt,"LineLayer")&&R.d(dt,"LineLayer",function(){return Pt.LineLayer}),R.o(Pt,"Logo")&&R.d(dt,"Logo",function(){return Pt.Logo}),R.o(Pt,"Marker")&&R.d(dt,"Marker",function(){return Pt.Marker}),R.o(Pt,"PointLayer")&&R.d(dt,"PointLayer",function(){return Pt.PointLayer}),R.o(Pt,"PolygonLayer")&&R.d(dt,"PolygonLayer",function(){return Pt.PolygonLayer}),R.o(Pt,"Popup")&&R.d(dt,"Popup",function(){return Pt.Popup}),R.o(Pt,"RasterLayer")&&R.d(dt,"RasterLayer",function(){return Pt.RasterLayer}),R.o(Pt,"Scale")&&R.d(dt,"Scale",function(){return Pt.Scale}),R.o(Pt,"Scene")&&R.d(dt,"Scene",function(){return Pt.Scene}),R.o(Pt,"Zoom")&&R.d(dt,"Zoom",function(){return Pt.Zoom}),R.o(Pt,"gl")&&R.d(dt,"gl",function(){return Pt.gl});var q=R("o+pz");R.d(dt,"gl",function(){return q.a})},h7MG:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.getBindingDictionary=dt.createMockRequest=dt.plan=void 0;var V=R("doU7"),E=R("MON2"),T=R("FV85"),e=R("xfSm"),t=R("qK8v"),u=R("ujMp"),s=R("oy+k"),c=R("GXnB"),r=R("yMAV"),h=R("fbrv"),n=R("xiII"),i=R("dX1H");function a(_){return _._bindingDictionary}dt.getBindingDictionary=a;function o(_,M,x,y,S,P){var A=_?e.MULTI_INJECT_TAG:e.INJECT_TAG,O=new c.Metadata(A,x),L=new i.Target(M,y,x,O);if(S!==void 0){var H=new c.Metadata(S,P);L.metadata.push(H)}return L}function l(_,M,x,y,S){var P=b(x.container,S.serviceIdentifier),A=[];return P.length===V.BindingCount.NoBindingsAvailable&&x.container.options.autoBindInjectable&&typeof S.serviceIdentifier=="function"&&_.getConstructorMetadata(S.serviceIdentifier).compilerGeneratedMetadata&&(x.container.bind(S.serviceIdentifier).toSelf(),P=b(x.container,S.serviceIdentifier)),M?A=P:A=P.filter(function(O){var L=new n.Request(O.serviceIdentifier,x,y,O,S);return O.constraint(L)}),f(S.serviceIdentifier,A,S,x.container),A}function f(_,M,x,y){switch(M.length){case V.BindingCount.NoBindingsAvailable:if(x.isOptional())return M;var S=u.getServiceIdentifierAsString(_),P=E.NOT_REGISTERED;throw P+=u.listMetadataForTarget(S,x),P+=u.listRegisteredBindingsForServiceIdentifier(y,S,b),new Error(P);case V.BindingCount.OnlyOneBindingAvailable:if(!x.isArray())return M;case V.BindingCount.MultipleBindingsAvailable:default:if(x.isArray())return M;var S=u.getServiceIdentifierAsString(_),P=E.AMBIGUOUS_MATCH+" "+S;throw P+=u.listRegisteredBindingsForServiceIdentifier(y,S,b),new Error(P)}}function v(_,M,x,y,S,P){var A,O;if(S===null){A=l(_,M,y,null,P),O=new n.Request(x,y,null,A,P);var L=new r.Plan(y,O);y.addPlan(L)}else A=l(_,M,y,S,P),O=S.addChildRequest(P.serviceIdentifier,A,P);A.forEach(function(H){var F=null;if(P.isArray())F=O.addChildRequest(H.serviceIdentifier,H,P);else{if(H.cache)return;F=O}if(H.type===T.BindingTypeEnum.Instance&&H.implementationType!==null){var K=h.getDependencies(_,H.implementationType);if(!y.container.options.skipBaseClassChecks){var G=h.getBaseClassDependencyCount(_,H.implementationType);if(K.length<G){var U=E.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(H.implementationType));throw new Error(U)}}K.forEach(function(Z){v(_,!1,Z.serviceIdentifier,y,F,Z)})}})}function b(_,M){var x=[],y=a(_);return y.hasKey(M)?x=y.get(M):_.parent!==null&&(x=b(_.parent,M)),x}function g(_,M,x,y,S,P,A,O){O===void 0&&(O=!1);var L=new s.Context(M),H=o(x,y,S,"",P,A);try{return v(_,O,S,L,null,H),L}catch(F){throw t.isStackOverflowExeption(F)&&L.plan&&u.circularDependencyToException(L.plan.rootRequest),F}}dt.plan=g;function m(_,M,x,y){var S=new i.Target(T.TargetTypeEnum.Variable,"",M,new c.Metadata(x,y)),P=new s.Context(_),A=new n.Request(M,P,null,[],S);return A}dt.createMockRequest=m},heNW:function(_e,dt){function R(V,E,T){switch(T.length){case 0:return V.call(E);case 1:return V.call(E,T[0]);case 2:return V.call(E,T[0],T[1]);case 3:return V.call(E,T[0],T[1],T[2])}return V.apply(E,T)}_e.exports=R},hi0z:function(_e,dt,R){"use strict";(function(V,E){_e.exports=E()})(this,function(){function V(h){var n=[];return h.AMapUI&&n.push(E(h.AMapUI)),h.Loca&&n.push(T(h.Loca)),Promise.all(n)}function E(h){return new Promise(function(n,i){var a=[];if(h.plugins)for(var o=0;o<h.plugins.length;o+=1)t.AMapUI.plugins.indexOf(h.plugins[o])==-1&&a.push(h.plugins[o]);if(u.AMapUI===e.failed)i("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(u.AMapUI===e.notload){u.AMapUI=e.loading,t.AMapUI.version=h.version||t.AMapUI.version,o=t.AMapUI.version;var l=document.body||document.head,f=document.createElement("script");f.type="text/javascript",f.src="https://webapi.amap.com/ui/"+o+"/main.js",f.onerror=function(v){u.AMapUI=e.failed,i("\u8BF7\u6C42 AMapUI \u5931\u8D25")},f.onload=function(){if(u.AMapUI=e.loaded,a.length)window.AMapUI.loadUI(a,function(){for(var v=0,b=a.length;v<b;v++){var g=a[v].split("/").slice(-1)[0];window.AMapUI[g]=arguments[v]}for(n();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()});else for(n();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()},l.appendChild(f)}else u.AMapUI===e.loaded?h.version&&h.version!==t.AMapUI.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):a.length?window.AMapUI.loadUI(a,function(){for(var v=0,b=a.length;v<b;v++){var g=a[v].split("/").slice(-1)[0];window.AMapUI[g]=arguments[v]}n()}):n():h.version&&h.version!==t.AMapUI.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):s.AMapUI.push(function(v){v?i(v):a.length?window.AMapUI.loadUI(a,function(){for(var b=0,g=a.length;b<g;b++){var m=a[b].split("/").slice(-1)[0];window.AMapUI[m]=arguments[b]}n()}):n()})})}function T(h){return new Promise(function(n,i){if(t.AMap.version.startsWith("2.0"))i("Loca \u6682\u4E0D\u9002\u914D JSAPI 2.0,\u8BF7\u4F7F\u7528 1.4.15");else if(u.Loca===e.failed)i("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(u.Loca===e.notload){u.Loca=e.loading,t.Loca.version=h.version||t.Loca.version;var a=t.Loca.version,o=t.key,l=document.body||document.head,f=document.createElement("script");f.type="text/javascript",f.src="https://webapi.amap.com/loca?v="+a+"&key="+o,f.onerror=function(v){u.Loca=e.failed,i("\u8BF7\u6C42 AMapUI \u5931\u8D25")},f.onload=function(){for(u.Loca=e.loaded,n();s.Loca.length;)s.Loca.splice(0,1)[0]()},l.appendChild(f)}else u.Loca===e.loaded?h.version&&h.version!==t.Loca.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):n():h.version&&h.version!==t.Loca.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):s.Loca.push(function(v){v?i(v):i()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var e;(function(h){h.notload="notload",h.loading="loading",h.loaded="loaded",h.failed="failed"})(e||(e={}));var t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},u={AMap:e.notload,AMapUI:e.notload,Loca:e.notload},s={AMap:[],AMapUI:[],Loca:[]},c=[],r=function(n){typeof n=="function"&&(u.AMap===e.loaded?n(window.AMap):c.push(n))};return{load:function(n){return new Promise(function(i,a){if(u.AMap==e.failed)a("");else if(u.AMap==e.notload){var o=n.key,l=n.version,f=n.plugins;o?(window.AMap&&location.host!=="lbs.amap.com"&&a("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),t.key=o,t.AMap.version=l||t.AMap.version,t.AMap.plugins=f||t.AMap.plugins,u.AMap=e.loading,l=document.body||document.head,window.___onAPILoaded=function(b){if(delete window.___onAPILoaded,b)u.AMap=e.failed,a(b);else for(u.AMap=e.loaded,V(n).then(function(){i(window.AMap)}).catch(a);c.length;)c.splice(0,1)[0]()},f=document.createElement("script"),f.type="text/javascript",f.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+t.AMap.version+"&key="+o+"&plugin="+t.AMap.plugins.join(","),f.onerror=function(b){u.AMap=e.failed,a(b)},l.appendChild(f)):a("\u8BF7\u586B\u5199key")}else if(u.AMap==e.loaded)if(n.key&&n.key!==t.key)a("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(n.version&&n.version!==t.AMap.version)a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(o=[],n.plugins)for(l=0;l<n.plugins.length;l+=1)t.AMap.plugins.indexOf(n.plugins[l])==-1&&o.push(n.plugins[l]);o.length?window.AMap.plugin(o,function(){V(n).then(function(){i(window.AMap)}).catch(a)}):V(n).then(function(){i(window.AMap)}).catch(a)}else if(n.key&&n.key!==t.key)a("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(n.version&&n.version!==t.AMap.version)a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var v=[];if(n.plugins)for(l=0;l<n.plugins.length;l+=1)t.AMap.plugins.indexOf(n.plugins[l])==-1&&v.push(n.plugins[l]);r(function(){v.length?window.AMap.plugin(v,function(){V(n).then(function(){i(window.AMap)}).catch(a)}):V(n).then(function(){i(window.AMap)}).catch(a)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},u={AMap:e.notload,AMapUI:e.notload,Loca:e.notload},s={AMap:[],AMapUI:[],Loca:[]}}}})},hypo:function(_e,dt,R){var V=R("O0oS");function E(T,e,t){e=="__proto__"&&V?V(T,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):T[e]=t}_e.exports=E},iWIM:function(_e,dt,R){var V=R("n3AX");function E(T,e,t){return typeof Reflect!="undefined"&&Reflect.get?(_e.exports=E=Reflect.get,_e.exports.default=_e.exports,_e.exports.__esModule=!0):(_e.exports=E=function(s,c,r){var h=V(s,c);if(!!h){var n=Object.getOwnPropertyDescriptor(h,c);return n.get?n.get.call(r):n.value}},_e.exports.default=_e.exports,_e.exports.__esModule=!0),E(T,e,t||T)}_e.exports=E,_e.exports.default=_e.exports,_e.exports.__esModule=!0},iegG:function(_e,dt){function R(V){var E=V.target||V.srcElement;E.__resizeRAF__&&cancelAnimationFrame(E.__resizeRAF__),E.__resizeRAF__=requestAnimationFrame(function(){var T=E.__resizeTrigger__,e=T&&T.__resizeListeners__;e&&e.forEach(function(t){t.call(T,V)})})}var dt=function(E,T){var e=this,t=e.document,u,s=t.attachEvent;typeof navigator!="undefined"&&(u=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function c(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",R)}if(!E.__resizeListeners__)if(E.__resizeListeners__=[],s)E.__resizeTrigger__=E,E.attachEvent("onresize",R);else{getComputedStyle(E).position==="static"&&(E.style.position="relative");var r=E.__resizeTrigger__=t.createElement("object");r.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),r.setAttribute("class","resize-sensor"),r.setAttribute("tabindex","-1"),r.__resizeElement__=E,r.onload=c,r.type="text/html",u&&E.appendChild(r),r.data="about:blank",u||E.appendChild(r)}E.__resizeListeners__.push(T)};_e.exports=typeof window=="undefined"?dt:dt.bind(window),_e.exports.unbind=function(V,E){var T=document.attachEvent,e=V.__resizeListeners__||[];if(E){var t=e.indexOf(E);t!==-1&&e.splice(t,1)}else e=V.__resizeListeners__=[];if(!e.length){if(T)V.detachEvent("onresize",R);else if(V.__resizeTrigger__){var u=V.__resizeTrigger__.contentDocument,s=u&&u.defaultView;s&&(s.removeEventListener("resize",R),delete s.__resizeTrigger__),V.__resizeTrigger__=!V.removeChild(V.__resizeTrigger__)}delete V.__resizeListeners__}}},itsj:function(_e,dt){function R(V,E){if(!(E==="constructor"&&typeof V[E]=="function")&&E!="__proto__")return V[E]}_e.exports=R},jCWc:function(_e,dt,R){"use strict";var V=R("cIOH"),E=R.n(V),T=R("1GLa")},"jIg/":function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.multiInject=void 0;var V=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(t){return function(u,s,c){var r=new E.Metadata(V.MULTI_INJECT_TAG,t);typeof c=="number"?T.tagParameter(u,s,c,r):T.tagProperty(u,s,r)}}dt.multiInject=e},jYQm:function(_e,dt,R){"use strict";var V=R("q1tI"),E=R.n(V),T=Object(V.createContext)({});dt.a=T},jYx5:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.optional=void 0;var V=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(){return function(t,u,s){var c=new E.Metadata(V.OPTIONAL_TAG,!0);typeof s=="number"?T.tagParameter(t,u,s,c):T.tagProperty(t,u,c)}}dt.optional=e},"jbM+":function(_e,dt,R){var V=R("R/W3");function E(T,e){var t=T==null?0:T.length;return!!t&&V(T,e,0)>-1}_e.exports=E},jeLo:function(_e,dt,R){var V=R("juv8"),E=R("mTTR");function T(e){return V(e,E(e))}_e.exports=T},juv8:function(_e,dt,R){var V=R("MrPd"),E=R("hypo");function T(e,t,u,s){var c=!u;u||(u={});for(var r=-1,h=t.length;++r<h;){var n=t[r],i=s?s(u[n],e[n],n,u,e):void 0;i===void 0&&(i=e[n]),c?E(u,n,i):V(u,n,i)}return u}_e.exports=T},"k5/I":function(_e,dt,R){"use strict";R.d(dt,"a",function(){return M}),R.d(dt,"b",function(){return H}),R.d(dt,"e",function(){return G}),R.d(dt,"f",function(){return J}),R.d(dt,"c",function(){return Rt}),R.d(dt,"d",function(){return k});var V=R("lSNA"),E=R.n(V),T=R("lwsE"),e=R.n(T),t=R("W8MJ"),u=R.n(t),s=R("7W2i"),c=R.n(s),r=R("a1gu"),h=R.n(r),n=R("Nsbk"),i=R.n(n),a=R("h1nZ"),o=R("Hel2"),l=R("uhBA");function f(ot,it){var $=Object.keys(ot);if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(ot);it&&(_t=_t.filter(function(yt){return Object.getOwnPropertyDescriptor(ot,yt).enumerable})),$.push.apply($,_t)}return $}function v(ot){for(var it=1;it<arguments.length;it++){var $=arguments[it]!=null?arguments[it]:{};it%2?f(Object($),!0).forEach(function(_t){E()(ot,_t,$[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ot,Object.getOwnPropertyDescriptors($)):f(Object($)).forEach(function(_t){Object.defineProperty(ot,_t,Object.getOwnPropertyDescriptor($,_t))})}return ot}function b(ot){var it=g();return function(){var _t=i()(ot),yt;if(it){var Nt=i()(this).constructor;yt=Reflect.construct(_t,arguments,Nt)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function g(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var m;(function(ot){ot.TOPRIGHT="topright",ot.TOPLEFT="topleft",ot.BOTTOMRIGHT="bottomright",ot.BOTTOMLEFT="bottomleft"})(m||(m={}));var _=0,M=function(ot){c()($,ot);var it=b($);function $(_t){var yt;return e()(this,$),yt=it.call(this),yt.controlOption=void 0,yt.container=void 0,yt.sceneContainer=void 0,yt.mapsService=void 0,yt.renderService=void 0,yt.layerService=void 0,yt.controlService=void 0,yt.isShow=void 0,yt.controlOption=v(v({},yt.getDefault()),_t||{}),yt}return u()($,[{key:"getDefault",value:function(){return{position:m.TOPRIGHT,name:"".concat(_++)}}},{key:"setPosition",value:function(yt){var Nt=this.controlService;return Nt&&Nt.removeControl(this),this.controlOption.position=yt,Nt&&Nt.addControl(this,this.sceneContainer),this}},{key:"addTo",value:function(yt){this.mapsService=yt.get(a.TYPES.IMapService),this.renderService=yt.get(a.TYPES.IRendererService),this.layerService=yt.get(a.TYPES.ILayerService),this.controlService=yt.get(a.TYPES.IControlService),this.sceneContainer=yt,this.isShow=!0,this.container=this.onAdd();var Nt=this.container,$t=this.controlOption.position,ee=this.controlService.controlCorners[$t];return o.a.addClass(Nt,"l7-control"),$t.indexOf("bottom")!==-1?ee.insertBefore(Nt,ee.firstChild):ee.appendChild(Nt),this}},{key:"onAdd",value:function(){throw new Error("Method not implemented.")}},{key:"onRemove",value:function(){throw new Error("Method not implemented.")}},{key:"hide",value:function(){var yt=this.container;o.a.addClass(yt,"l7-control-hide"),this.isShow=!1}},{key:"show",value:function(){var yt=this.container;o.a.removeClass(yt,"l7-control-hide"),this.isShow=!0}},{key:"remove",value:function(){if(!this.mapsService)return this;o.a.remove(this.container),this.onRemove()}},{key:"_refocusOnMap",value:function(yt){if(this.mapsService&&yt&&yt.screenX>0&&yt.screenY>0){var Nt=this.mapsService.getContainer();Nt!==null&&Nt.focus()}}}]),$}(l.EventEmitter),x=R("PJYZ"),y=R.n(x);function S(ot){var it=P();return function(){var _t=i()(ot),yt;if(it){var Nt=i()(this).constructor;yt=Reflect.construct(_t,arguments,Nt)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function P(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var A=function(ot){c()($,ot);var it=S($);function $(_t){var yt;return e()(this,$),yt=it.call(this,_t),yt.layerControlInputs=void 0,yt.layers=void 0,yt.lastZIndex=void 0,yt.handlingClick=void 0,yt.layersLink=void 0,yt.baseLayersList=void 0,yt.separator=void 0,yt.overlaysList=void 0,yt.form=void 0,yt.layerControlInputs=[],yt.layers=[],yt.lastZIndex=0,yt.handlingClick=!1,yt.initLayers(),Object(o.i)(["checkDisabledLayers","onLayerChange","collapse","extend","expand","onInputClick"],y()(yt)),yt}return u()($,[{key:"getDefault",value:function(){return{collapsed:!0,position:a.PositionType.TOPRIGHT,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,name:"layers"}}},{key:"onAdd",value:function(){var yt=this;return this.initLayout(),this.update(),this.mapsService.on("zoomend",this.checkDisabledLayers),this.layers.forEach(function(Nt){Nt.layer.on("remove",yt.onLayerChange),Nt.layer.on("add",yt.onLayerChange)}),this.container}},{key:"addVisualLayer",value:function(yt,Nt){return this.addLayer(yt,Nt,!0),this.mapsService?this.update():this}},{key:"expand",value:function(){var yt=this.renderService.getViewportSize(),Nt=yt.height;o.a.addClass(this.container,"l7-control-layers-expanded"),this.form.style.height="null";var $t=Nt-(this.container.offsetTop+50);return $t<this.form.clientHeight?(o.a.addClass(this.form,"l7-control-layers-scrollbar"),this.form.style.height=$t+"px"):o.a.removeClass(this.form,"l7-control-layers-scrollbar"),this.checkDisabledLayers(),this}},{key:"collapse",value:function(){return o.a.removeClass(this.container,"l7-control-layers-expanded"),this}},{key:"onRemove",value:function(){var yt=this;!this.mapsService||(this.mapsService.off("click",this.collapse),this.layers.forEach(function(Nt){Nt.layer.off("remove",yt.onLayerChange),Nt.layer.off("add",yt.onLayerChange)}))}},{key:"initLayout",value:function(){var yt="l7-control-layers",Nt=this.container=o.a.create("div",yt),$t=this.controlOption.collapsed;Nt.setAttribute("aria-haspopup","true");var ee=this.form=o.a.create("form",yt+"-list");$t&&(this.mapsService.on("click",this.collapse),Nt.addEventListener("mouseenter",this.expand),Nt.addEventListener("mouseleave",this.collapse)),this.layersLink=o.a.create("a",yt+"-toggle",Nt);var Gt=this.layersLink;Gt.title="Layers",$t||this.expand(),this.baseLayersList=o.a.create("div",yt+"-base",ee),this.separator=o.a.create("div",yt+"-separator",ee),this.overlaysList=o.a.create("div",yt+"-overlays",ee),Nt.appendChild(ee)}},{key:"initLayers",value:function(){var yt=this,Nt=this.controlOption,$t=Nt.baseLayers,ee=$t===void 0?{}:$t,Gt=Nt.overlayers,Ht=Gt===void 0?{}:Gt;Object.keys(ee).forEach(function(ae,le){yt.addLayer(ee[ae],ae,!1)}),Object.keys(Ht).forEach(function(ae,le){yt.addLayer(Ht[ae],ae,!0)})}},{key:"update",value:function(){if(!this.container)return this;o.a.empty(this.baseLayersList),o.a.empty(this.overlaysList),this.layerControlInputs=[];var yt,Nt,$t,ee,Gt=0;for($t=0;$t<this.layers.length;$t++)ee=this.layers[$t],this.addItem(ee),Nt=Nt||ee.overlay,yt=yt||!ee.overlay,Gt+=ee.overlay?0:1;return this.controlOption.hideSingleBase&&(yt=yt&&Gt>1,this.baseLayersList.style.display=yt?"":"none"),this.separator.style.display=Nt&&yt?"":"none",this}},{key:"checkDisabledLayers",value:function(){for(var yt=this.layerControlInputs,Nt,$t,ee=this.mapsService.getZoom(),Gt=yt.length-1;Gt>=0;Gt--)if(Nt=yt[Gt],$t=this.layerService.getLayer(Nt.layerId),$t&&$t.inited){var Ht=$t.getMinZoom(),ae=$t.getMaxZoom();Nt.disabled=ee<Ht||ee>ae}}},{key:"addLayer",value:function(yt,Nt,$t){this.mapsService&&(yt.on("add",this.onLayerChange),yt.on("remove",this.onLayerChange)),this.layers.push({layer:yt,name:Nt,overlay:$t});var ee=this.controlOption,Gt=ee.sortLayers,Ht=ee.sortFunction,ae=ee.autoZIndex;Gt&&this.layers.sort(function(le,Be){return Ht(le.layer,Be.layer,le.name,Be.name)}),ae&&yt.setZIndex&&(this.lastZIndex++,yt.setZIndex(this.lastZIndex)),this.expandIfNotCollapsed()}},{key:"expandIfNotCollapsed",value:function(){return this.mapsService&&!this.controlOption.collapsed&&this.expand(),this}},{key:"onLayerChange",value:function(yt){this.handlingClick||this.update();var Nt=this.layerService.getLayer(yt.target.layerId),$t=Nt!=null&&Nt.overlay?yt.type==="add"?"overlayadd":"overlayremove":yt.type==="add"?"baselayerchange":null;$t&&this.emit($t,Nt)}},{key:"createRadioElement",value:function(yt,Nt){var $t='<input type="radio" class="l7-control-layers-selector" name="'+yt+'"'+(Nt?' checked="checked"':"")+"/>",ee=document.createElement("div");return ee.innerHTML=$t,ee.firstChild}},{key:"addItem",value:function(yt){var Nt=document.createElement("label"),$t=this.layerService.getLayer(yt.layer.id),ee=$t&&$t.inited&&yt.layer.isVisible(),Gt;yt.overlay?(Gt=document.createElement("input"),Gt.type="checkbox",Gt.className="l7-control-layers-selector",Gt.defaultChecked=ee):Gt=this.createRadioElement("l7-base-layers",ee),this.layerControlInputs.push(Gt),Gt.layerId=yt.layer.id,Gt.addEventListener("click",this.onInputClick);var Ht=document.createElement("span");Ht.innerHTML=" "+yt.name;var ae=document.createElement("div");Nt.appendChild(ae),ae.appendChild(Gt),ae.appendChild(Ht);var le=yt.overlay?this.overlaysList:this.baseLayersList;return le.appendChild(Nt),this.checkDisabledLayers(),Nt}},{key:"onInputClick",value:function(){var yt=this.layerControlInputs,Nt,$t,ee=[],Gt=[];this.handlingClick=!0;for(var Ht=yt.length-1;Ht>=0;Ht--)Nt=yt[Ht],$t=this.layerService.getLayer(Nt.layerId),Nt.checked?ee.push($t):Nt.checked||Gt.push($t);Gt.forEach(function(ae){ae.hide()}),ee.forEach(function(ae){ae.show()}),this.handlingClick=!1}}]),$}(M);function O(ot){var it=L();return function(){var _t=i()(ot),yt;if(it){var Nt=i()(this).constructor;yt=Reflect.construct(_t,arguments,Nt)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function L(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var H=function(ot){c()($,ot);var it=O($);function $(){return e()(this,$),it.apply(this,arguments)}return u()($,[{key:"getDefault",value:function(){return{position:m.BOTTOMLEFT,name:"logo"}}},{key:"onAdd",value:function(){var yt="l7-control-logo",Nt=o.a.create("div",yt),$t=o.a.create("a","l7-ctrl-logo");return $t.target="_blank",$t.rel="noopener nofollow",$t.href="https://antv.alipay.com/l7",$t.setAttribute("aria-label","AntV logo"),$t.setAttribute("rel","noopener nofollow"),Nt.appendChild($t),Nt}},{key:"onRemove",value:function(){return null}}]),$}(M);function F(ot){var it=K();return function(){var _t=i()(ot),yt;if(it){var Nt=i()(this).constructor;yt=Reflect.construct(_t,arguments,Nt)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function K(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var G=function(ot){c()($,ot);var it=F($);function $(_t){var yt;return e()(this,$),yt=it.call(this,_t),yt.mScale=void 0,yt.iScale=void 0,Object(o.i)(["update"],y()(yt)),yt}return u()($,[{key:"getDefault",value:function(){return{position:m.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,name:"scale"}}},{key:"onAdd",value:function(){var yt="l7-control-scale",Nt=o.a.create("div",yt);this.addScales(yt+"-line",Nt);var $t=this.controlOption.updateWhenIdle;return this.mapsService.on($t?"moveend":"mapmove",this.update),this.mapsService.on($t?"zoomend":"zoomchange",this.update),this.update(),Nt}},{key:"onRemove",value:function(){var yt=this.controlOption.updateWhenIdle;this.mapsService.off(yt?"zoomend":"zoomchange",this.update),this.mapsService.off(yt?"moveend":"mapmove",this.update)}},{key:"update",value:function(){var yt=this.mapsService,Nt=this.controlOption.maxWidth,$t=yt.getSize()[1]/2,ee=yt.containerToLngLat([0,$t]),Gt=yt.containerToLngLat([Nt,$t]),Ht=Object(o.q)([ee.lng,ee.lat],[Gt.lng,Gt.lat]);this.updateScales(Ht)}},{key:"updateScales",value:function(yt){var Nt=this.controlOption,$t=Nt.metric,ee=Nt.imperial;$t&&yt&&this.updateMetric(yt),ee&&yt&&this.updateImperial(yt)}},{key:"updateMetric",value:function(yt){var Nt=this.getRoundNum(yt),$t=Nt<1e3?Nt+" m":Nt/1e3+" km";this.updateScale(this.mScale,$t,Nt/yt)}},{key:"updateImperial",value:function(yt){var Nt=yt*3.2808399,$t,ee,Gt;Nt>5280?($t=Nt/5280,ee=this.getRoundNum($t),this.updateScale(this.iScale,ee+" mi",ee/$t)):(Gt=this.getRoundNum(Nt),this.updateScale(this.iScale,Gt+" ft",Gt/Nt))}},{key:"updateScale",value:function(yt,Nt,$t){var ee=this.controlOption.maxWidth;yt.style.width=Math.round(ee*$t)+"px",yt.innerHTML=Nt}},{key:"getRoundNum",value:function(yt){var Nt=Math.pow(10,(Math.floor(yt)+"").length-1),$t=yt/Nt;return $t=$t>=10?10:$t>=5?5:$t>=3?3:$t>=2?2:1,Nt*$t}},{key:"addScales",value:function(yt,Nt){var $t=this.controlOption,ee=$t.metric,Gt=$t.imperial;ee&&(this.mScale=o.a.create("div",yt,Nt)),Gt&&(this.iScale=o.a.create("div",yt,Nt))}}]),$}(M);function U(ot){var it=Z();return function(){var _t=i()(ot),yt;if(it){var Nt=i()(this).constructor;yt=Reflect.construct(_t,arguments,Nt)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var J=function(ot){c()($,ot);var it=U($);function $(_t){var yt;return e()(this,$),yt=it.call(this,_t),yt.disabled=void 0,yt.zoomInButton=void 0,yt.zoomOutButton=void 0,Object(o.i)(["updateDisabled","zoomIn","zoomOut"],y()(yt)),yt}return u()($,[{key:"getDefault",value:function(){return{position:m.TOPLEFT,zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out",name:"zoom"}}},{key:"onAdd",value:function(){var yt="l7-control-zoom",Nt=o.a.create("div",yt+" l7-bar");return this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,yt+"-in",Nt,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,yt+"-out",Nt,this.zoomOut),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),this.updateDisabled(),Nt}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"zoomIn",value:function(){!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}},{key:"zoomOut",value:function(){!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}},{key:"createButton",value:function(yt,Nt,$t,ee,Gt){var Ht=o.a.create("a",$t,ee);return Ht.innerHTML=yt,Ht.title=Nt,Ht.href="javascript:void(0)",Ht.addEventListener("click",Gt),Ht}},{key:"updateDisabled",value:function(){var yt=this.mapsService,Nt="l7-disabled";o.a.removeClass(this.zoomInButton,Nt),o.a.removeClass(this.zoomOutButton,Nt),(this.disabled||yt.getZoom()<=yt.getMinZoom())&&o.a.addClass(this.zoomOutButton,Nt),(this.disabled||yt.getZoom()>=yt.getMaxZoom())&&o.a.addClass(this.zoomInButton,Nt)}}]),$}(M);function rt(ot,it){var $=Object.keys(ot);if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(ot);it&&(_t=_t.filter(function(yt){return Object.getOwnPropertyDescriptor(ot,yt).enumerable})),$.push.apply($,_t)}return $}function vt(ot){for(var it=1;it<arguments.length;it++){var $=arguments[it]!=null?arguments[it]:{};it%2?rt(Object($),!0).forEach(function(_t){E()(ot,_t,$[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ot,Object.getOwnPropertyDescriptors($)):rt(Object($)).forEach(function(_t){Object.defineProperty(ot,_t,Object.getOwnPropertyDescriptor($,_t))})}return ot}function mt(ot){var it=ut();return function(){var _t=i()(ot),yt;if(it){var Nt=i()(this).constructor;yt=Reflect.construct(_t,arguments,Nt)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function ut(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var Rt=function(ot){c()($,ot);var it=mt($);function $(_t){var yt;return e()(this,$),yt=it.call(this),yt.markerOption=void 0,yt.defaultMarker=void 0,yt.popup=void 0,yt.mapsService=void 0,yt.sceneSerive=void 0,yt.lngLat=void 0,yt.scene=void 0,yt.added=!1,yt.eventHandle=function(Nt){yt.emit(Nt.type,{target:Nt,data:yt.markerOption.extData,lngLat:yt.lngLat})},yt.markerOption=vt(vt({},yt.getDefault()),_t),Object(o.i)(["update","onMove","onUp","addDragHandler","onMapClick"],y()(yt)),yt.init(),yt}return u()($,[{key:"getDefault",value:function(){return{element:void 0,anchor:o.f.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(yt){this.scene=yt,this.mapsService=yt.get(a.TYPES.IMapService),this.sceneSerive=yt.get(a.TYPES.ISceneService);var Nt=this.markerOption,$t=Nt.element,ee=Nt.draggable;return this.mapsService.getMarkerContainer().appendChild($t),this.registerMarkerEvent($t),this.mapsService.on("camerachange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("mousedown",this.addDragHandler),this.mapsService.off("touchstart",this.addDragHandler),this.mapsService.off("mouseup",this.onUp),this.mapsService.off("touchend",this.onUp)),this.unRegisterMarkerEvent(),this.removeAllListeners();var yt=this.markerOption.element;return yt&&o.a.remove(yt),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(yt){return this.lngLat=yt,Array.isArray(yt)&&(this.lngLat={lng:yt[0],lat:yt[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(yt){var Nt=this;if(!this.added)return this.once("added",function(){Nt.setElement(yt)}),this;var $t=this.markerOption.element;return $t&&o.a.remove($t),this.markerOption.element=yt,this.init(),this.mapsService.getMarkerContainer().appendChild(yt),this.registerMarkerEvent(yt),this.update(),this}},{key:"openPopup",value:function(){var yt=this;if(!this.added)return this.once("added",function(){yt.openPopup()}),this;var Nt=this.popup;return Nt?(Nt.isOpen()||Nt.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var yt=this;this.added||this.once("added",function(){yt.closePopup()});var Nt=this.popup;return Nt&&Nt.remove(),this}},{key:"setPopup",value:function(yt){return this.popup=yt,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var yt=this.popup;if(yt)yt.isOpen()?yt.remove():yt.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(yt){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(yt){this.markerOption.extData=yt}},{key:"update",value:function(){if(!!this.mapsService){var yt=this.markerOption,Nt=yt.element,$t=yt.anchor;this.updatePosition(),o.a.setTransform(Nt,"".concat(o.e[$t]))}}},{key:"onMapClick",value:function(yt){var Nt=this.markerOption.element;this.popup&&Nt&&this.togglePopup()}},{key:"updatePosition",value:function(){if(!!this.mapsService){var yt=this.markerOption,Nt=yt.element,$t=yt.offsets,ee=this.lngLat,Gt=ee.lng,Ht=ee.lat,ae=this.mapsService.getBounds(),le=this.mapsService.lngLatToContainer([Gt,Ht]);if(Nt){Nt.style.display="block";var Be=this.mapsService.getContainer(),Ce=0,We=0;if(Be&&(Ce=Be.scrollWidth,We=Be.scrollHeight),Math.abs(ae[0][0])>180||Math.abs(ae[1][0])>180){if(le.x>Ce){var Ye=this.mapsService.lngLatToContainer([Gt-360,Ht]);le.x=Ye.x}if(le.x<0){var wn=this.mapsService.lngLatToContainer([Gt+360,Ht]);le.x=wn.x}}(le.x>Ce||le.x<0||le.y>We||le.y<0)&&(Nt.style.display="none"),Nt.style.left=le.x+$t[0]+"px",Nt.style.top=le.y-$t[1]+"px"}}}},{key:"init",value:function(){var yt=this,Nt=this.markerOption.element,$t=this.markerOption,ee=$t.color,Gt=$t.anchor;if(!Nt){this.defaultMarker=!0,Nt=o.a.create("div"),this.markerOption.element=Nt;var Ht=document.createElementNS("http://www.w3.org/2000/svg","svg");Ht.setAttributeNS(null,"display","block"),Ht.setAttributeNS(null,"height","48px"),Ht.setAttributeNS(null,"width","48px"),Ht.setAttributeNS(null,"viewBox","0 0 1024 1024");var ae=document.createElementNS("http://www.w3.org/2000/svg","path");ae.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),ae.setAttributeNS(null,"fill",ee),Ht.appendChild(ae),Nt.appendChild(Ht)}o.a.addClass(Nt,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(le){var Be,Ce,We=((Be=yt.markerOption)===null||Be===void 0?void 0:Be.style)&&((Ce=yt.markerOption)===null||Ce===void 0?void 0:Ce.style[le]);Nt&&(Nt.style[le]=We)}),Nt.addEventListener("click",function(le){yt.onMapClick(le)}),Nt.addEventListener("click",this.eventHandle),Object(o.g)(Nt,Gt,"marker")}},{key:"registerMarkerEvent",value:function(yt){yt.addEventListener("mousemove",this.eventHandle),yt.addEventListener("click",this.eventHandle),yt.addEventListener("mousedown",this.eventHandle),yt.addEventListener("mouseup",this.eventHandle),yt.addEventListener("dblclick",this.eventHandle),yt.addEventListener("contextmenu",this.eventHandle),yt.addEventListener("mouseover",this.eventHandle),yt.addEventListener("mouseout",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var yt=this.getElement();yt.removeEventListener("mousemove",this.eventHandle),yt.removeEventListener("click",this.eventHandle),yt.removeEventListener("mousedown",this.eventHandle),yt.removeEventListener("mouseup",this.eventHandle),yt.removeEventListener("dblclick",this.eventHandle),yt.removeEventListener("contextmenu",this.eventHandle),yt.removeEventListener("mouseover",this.eventHandle),yt.removeEventListener("mouseout",this.eventHandle)}},{key:"addDragHandler",value:function(yt){throw new Error("Method not implemented.")}},{key:"onUp",value:function(yt){throw new Error("Method not implemented.")}}]),$}(l.EventEmitter),Ft=R("QkVN"),wt=R.n(Ft),Mt=R("mpbz"),St=R.n(Mt);function At(ot,it){var $=Object.keys(ot);if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(ot);it&&(_t=_t.filter(function(yt){return Object.getOwnPropertyDescriptor(ot,yt).enumerable})),$.push.apply($,_t)}return $}function nt(ot){for(var it=1;it<arguments.length;it++){var $=arguments[it]!=null?arguments[it]:{};it%2?At(Object($),!0).forEach(function(_t){E()(ot,_t,$[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ot,Object.getOwnPropertyDescriptors($)):At(Object($)).forEach(function(_t){Object.defineProperty(ot,_t,Object.getOwnPropertyDescriptor($,_t))})}return ot}function Pt(ot){var it=z();return function(){var _t=i()(ot),yt;if(it){var Nt=i()(this).constructor;yt=Reflect.construct(_t,arguments,Nt)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var q=function(ot){c()($,ot);var it=Pt($);function $(_t){var yt,Nt;return e()(this,$),Nt=it.call(this),Nt.markers=[],Nt.markerLayerOption=void 0,Nt.clusterIndex=void 0,Nt.points=[],Nt.clusterMarkers=[],Nt.mapsService=void 0,Nt.scene=void 0,Nt.zoom=void 0,Nt.bbox=void 0,Nt.markerLayerOption=wt()(Nt.getDefault(),_t),Object(o.i)(["update"],y()(Nt)),Nt.zoom=((yt=Nt.markerLayerOption.clusterOption)===null||yt===void 0?void 0:yt.zoom)||-99,Nt}return u()($,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(yt){return this.scene=yt,this.mapsService=yt.get(a.TYPES.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update)),this.addMarkers(),this}},{key:"addMarker",value:function(yt){var Nt=this.markerLayerOption.cluster;Nt&&this.addPoint(yt,this.markers.length),this.markers.push(yt)}},{key:"removeMarker",value:function(yt){this.markers.indexOf(yt);var Nt=this.markers.indexOf(yt);Nt>-1&&this.markers.splice(Nt,1)}},{key:"getMarkers",value:function(){var yt=this.markerLayerOption.cluster;return yt?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var yt=this;this.getMarkers().forEach(function(Nt){Nt.addTo(yt.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(yt){yt.remove()}),this.clusterMarkers.forEach(function(yt){yt.remove()}),this.mapsService.off("camerachange",this.update),this.markers=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"addPoint",value:function(yt,Nt){var $t=yt.getLnglat(),ee=$t.lng,Gt=$t.lat,Ht={geometry:{type:"Point",coordinates:[ee,Gt]},properties:nt(nt({},yt.getExtData()),{},{marker_id:Nt})};this.points.push(Ht)}},{key:"initCluster",value:function(){if(!!this.markerLayerOption.cluster){var yt=this.markerLayerOption.clusterOption,Nt=yt.radius,$t=yt.minZoom,ee=$t===void 0?0:$t,Gt=yt.maxZoom;this.clusterIndex=new St.a({radius:Nt,minZoom:ee,maxZoom:Gt}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(yt,Nt){var $t=this,ee=yt[0].concat(yt[1]),Gt=this.clusterIndex.getClusters(ee,Nt);this.clusterMarkers.forEach(function(Ht){Ht.remove()}),this.clusterMarkers=[],Gt.forEach(function(Ht){var ae,le=$t.markerLayerOption.clusterOption,Be=le.field,Ce=le.method;if(Ht.properties&&(ae=Ht.properties)!==null&&ae!==void 0&&ae.cluster_id){var We,Ye=$t.getLeaves((We=Ht.properties)===null||We===void 0?void 0:We.cluster_id);if(Ht.properties.clusterData=Ye,Be&&Ce){var wn=Ye==null?void 0:Ye.map(function(An){var Bn=E()({},Be,An.properties[Be]);return Bn}),er=o.c.getColumn(wn,Be),Lr=o.c.getSatByColumn(Ce,er),on="point_"+Ce;Ht.properties[on]=Lr.toFixed(2)}}var en=$t.clusterMarker(Ht);$t.clusterMarkers.push(en),en.addTo($t.scene)})}},{key:"getLeaves",value:function(yt){var Nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Infinity,$t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return yt?this.clusterIndex.getLeaves(yt,Nt,$t):null}},{key:"clusterMarker",value:function(yt){var Nt=this.markerLayerOption.clusterOption,$t=Nt,ee=$t.element,Gt=ee===void 0?this.generateElement.bind(this):ee,Ht=new Rt({element:Gt(yt)}).setLnglat({lng:yt.geometry.coordinates[0],lat:yt.geometry.coordinates[1]});return Ht}},{key:"normalMarker",value:function(yt){var Nt=yt.properties.marker_id;return this.markers[Nt]}},{key:"update",value:function(){var yt=this.mapsService.getZoom(),Nt=this.mapsService.getBounds();(!this.bbox||Math.abs(yt-this.zoom)>=1||!Object(o.j)(this.bbox,Nt))&&(this.bbox=Object(o.r)(Nt,.5),this.zoom=Math.floor(yt),this.getClusterMarker(this.bbox,this.zoom))}},{key:"generateElement",value:function(yt){var Nt=o.a.create("div","l7-marker-cluster"),$t=o.a.create("div","",Nt),ee=o.a.create("span","",$t),Gt=this.markerLayerOption.clusterOption,Ht=Gt.field,ae=Gt.method;yt.properties.point_count=yt.properties.point_count||1;var le=Ht&&ae?yt.properties["point_"+ae]||yt.properties[Ht]:yt.properties.point_count;return ee.textContent=le,Nt}}]),$}(l.EventEmitter);function gt(ot,it){var $=Object.keys(ot);if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(ot);it&&(_t=_t.filter(function(yt){return Object.getOwnPropertyDescriptor(ot,yt).enumerable})),$.push.apply($,_t)}return $}function et(ot){for(var it=1;it<arguments.length;it++){var $=arguments[it]!=null?arguments[it]:{};it%2?gt(Object($),!0).forEach(function(_t){E()(ot,_t,$[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ot,Object.getOwnPropertyDescriptors($)):gt(Object($)).forEach(function(_t){Object.defineProperty(ot,_t,Object.getOwnPropertyDescriptor($,_t))})}return ot}function at(ot){var it=xt();return function(){var _t=i()(ot),yt;if(it){var Nt=i()(this).constructor;yt=Reflect.construct(_t,arguments,Nt)}else yt=_t.apply(this,arguments);return h()(this,yt)}}function xt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var k=function(ot){c()($,ot);var it=at($);function $(_t){var yt;return e()(this,$),yt=it.call(this),yt.popupOption=void 0,yt.mapsService=void 0,yt.sceneSerive=void 0,yt.lngLat=void 0,yt.content=void 0,yt.closeButton=void 0,yt.timeoutInstance=void 0,yt.container=void 0,yt.tip=void 0,yt.scene=void 0,yt.popupOption=et(et({},yt.getdefault()),_t),Object(o.i)(["update","onClickClose","remove"],y()(yt)),yt}return u()($,[{key:"addTo",value:function(yt){var Nt=this;return this.mapsService=yt.get(a.TYPES.IMapService),this.sceneSerive=yt.get(a.TYPES.ISceneService),this.mapsService.on("camerachange",this.update),this.scene=yt,this.update(),this.popupOption.closeOnClick&&(this.timeoutInstance=setTimeout(function(){Nt.mapsService.on("click",Nt.onClickClose)},30)),this.emit("open"),this}},{key:"close",value:function(){this.remove()}},{key:"open",value:function(){this.addTo(this.scene)}},{key:"setHTML",value:function(yt){var Nt=window.document.createDocumentFragment(),$t=window.document.createElement("body"),ee;for($t.innerHTML=yt;ee=$t.firstChild,!!ee;)Nt.appendChild(ee);return this.setDOMContent(Nt)}},{key:"setLnglat",value:function(yt){return this.lngLat=yt,Array.isArray(yt)&&(this.lngLat={lng:yt[0],lat:yt[1]}),this.mapsService&&this.mapsService.on("camerachange",this.update),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setText",value:function(yt){return this.setDOMContent(window.document.createTextNode(yt))}},{key:"setMaxWidth",value:function(yt){return this.popupOption.maxWidth=yt,this.update(),this}},{key:"setDOMContent",value:function(yt){return this.createContent(),this.content.appendChild(yt),this.update(),this}},{key:"remove",value:function(){return this.content&&this.removeDom(this.content),this.container&&(this.removeDom(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("click",this.onClickClose),delete this.mapsService),clearTimeout(this.timeoutInstance),this.emit("close"),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"createContent",value:function(){this.content&&o.a.remove(this.content),this.content=o.a.create("div","l7-popup-content",this.container),this.popupOption.closeButton&&(this.closeButton=o.a.create("button","l7-popup-close-button",this.content),this.closeButton.setAttribute("aria-label","Close popup"),this.closeButton.innerHTML="&#215;",this.closeButton.addEventListener("click",this.onClickClose))}},{key:"creatDom",value:function(yt,Nt,$t){var ee=window.document.createElement(yt);return Nt!==void 0&&(ee.className=Nt),$t&&$t.appendChild(ee),ee}},{key:"removeDom",value:function(yt){yt.parentNode&&yt.parentNode.removeChild(yt)}},{key:"getdefault",value:function(){return{closeButton:!0,closeOnClick:!0,maxWidth:"240px",offsets:[0,0],anchor:o.f.BOTTOM,className:"",stopPropagation:!0}}},{key:"onClickClose",value:function(yt){yt.stopPropagation&&yt.stopPropagation(),this.remove()}},{key:"update",value:function(){var yt=this,Nt=this.lngLat,$t=this.popupOption,ee=$t.className,Gt=$t.maxWidth,Ht=$t.anchor;if(!(!this.mapsService||!Nt||!this.content)){var ae=this.mapsService.getMarkerContainer();if(!this.container&&ae){this.container=this.creatDom("div","l7-popup",ae),this.tip=this.creatDom("div","l7-popup-tip",this.container),this.container.appendChild(this.content),ee&&ee.split(" ").forEach(function(Be){return yt.container.classList.add(Be)});var le=this.popupOption.stopPropagation;le&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(Be){yt.container.addEventListener(Be,function(Ce){Ce.stopPropagation()})})}Gt&&this.container.style.maxWidth!==Gt&&(this.container.style.maxWidth=Gt),this.updatePosition(),o.a.setTransform(this.container,"".concat(o.e[Ht])),Object(o.g)(this.container,Ht,"popup")}}},{key:"updatePosition",value:function(){if(!!this.mapsService){var yt=this.lngLat,Nt=yt.lng,$t=yt.lat,ee=this.popupOption.offsets,Gt=this.mapsService.lngLatToContainer([Nt,$t]);this.container.style.left=Gt.x+ee[0]+"px",this.container.style.top=Gt.y-ee[1]+"px"}}}]),$}(l.EventEmitter);R("BGjm")(`/* @antv/l7-component */
.l7-marker-container {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
 }

.l7-marker {
	position: absolute !important;
	top: 0;
	left: 0;
  z-index: 5;
  cursor: pointer;
}

.l7-marker-cluster {
  background-clip: padding-box;
  border-radius: 20px;
  background-color: rgba(181, 226, 140, 0.6);
  width: 40px;
  height: 40px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-left: 5px;
  margin-top: 5px;
  text-align: center;
  border-radius: 15px;
  font: 12px "Helvetica Neue", Arial, Helvetica, sans-serif;
  background-color: rgba(110, 204, 57, 0.6);
}
.l7-marker-cluster span {
  line-height: 30px;
}

.l7-popup-anchor-bottom,
.l7-popup-anchor-bottom-left,
.l7-popup-anchor-bottom-right {
    -webkit-flex-direction: column-reverse;
    -webkit-box-orient: vertical;
    -webkit-box-direction: reverse;
        -ms-flex-direction: column-reverse;
            flex-direction: column-reverse;
}

.l7-popup-close-button {
  position: absolute;
  right: 0;
  top: 0;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
  background-color: transparent;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

	/* layers control */

.l7-control-layers {
	-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.4);
	        box-shadow: 0 1px 5px rgba(0,0,0,0.4);
	background: #fff;
	border-radius: 5px;
	}
.l7-popup-anchor-top,
.l7-popup-anchor-top-left,
.l7-popup-anchor-top-right {
    -webkit-flex-direction: column;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
}


.l7-popup-anchor-left {
    -webkit-flex-direction: row;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
        -ms-flex-direction: row;
            flex-direction: row;
}

.l7-popup-anchor-right {
    -webkit-flex-direction: row-reverse;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: reverse;
        -ms-flex-direction: row-reverse;
            flex-direction: row-reverse;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  display: -webkit-flex;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
  z-index: 5;
}
.l7-popup-tip {
  width: 0;
  height: 0;
  border: 10px solid transparent;
  z-index: 1;
}
.l7-popup-anchor-top .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-top: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-top-left .l7-popup-tip {
	-webkit-align-self: flex-start;
	-ms-flex-item-align: start;
	    align-self: flex-start;
	border-top: none;
	border-left: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-top-right .l7-popup-tip {
	-webkit-align-self: flex-end;
	-ms-flex-item-align: end;
	    align-self: flex-end;
	border-top: none;
	border-right: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-bottom .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-bottom: none;
	border-top-color: #fff;
}

.l7-popup-anchor-bottom-left .l7-popup-tip {
	-webkit-align-self: flex-start;
	-ms-flex-item-align: start;
	    align-self: flex-start;
	border-bottom: none;
	border-left: none;
	border-top-color: #fff;
}

.l7-popup-anchor-bottom-right .l7-popup-tip {
	-webkit-align-self: flex-end;
	-ms-flex-item-align: end;
	    align-self: flex-end;
	border-bottom: none;
	border-right: none;
	border-top-color: #fff;
}

.l7-popup-anchor-left .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-left: none;
	border-right-color: #fff;
}

.l7-popup-anchor-right .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-right: none;
	border-left-color: #fff;
}

.l7-popup-close-button {
	position: absolute;
	right: 0;
	top: 0;
	border: 0;
	padding: 0;
	font-size: 25px;
	line-height: 20px;
	border-radius: 0 3px 0 0;
	cursor: pointer;
	background-color: transparent;
}

.l7-popup-close-button:hover {
	background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
	position: relative;
	background: #fff;
	border-radius: 3px;
	-webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
	        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
	padding: 10px 10px 15px;
	pointer-events: auto;
}

.l7-popup-anchor-top-left .l7-popup-content {
	border-top-left-radius: 0;
}

.l7-popup-anchor-top-right .l7-popup-content {
	border-top-right-radius: 0;
}

.l7-popup-anchor-bottom-left .l7-popup-content {
	border-bottom-left-radius: 0;
}

.l7-popup-anchor-bottom-right .l7-popup-content {
	border-bottom-right-radius: 0;
}

.l7-popup-track-pointer {
	display: none;
}

.l7-popup-track-pointer * {
	pointer-events: none;
	-webkit-user-select: none;
	   -moz-user-select: none;
	    -ms-user-select: none;
	        user-select: none;
}

.l7-map:hover .l7-popup-track-pointer {
	display: -webkit-box;
	display: -webkit-flex;
	display: -ms-flexbox;
	display: flex;
}

.l7-map:active .l7-popup-track-pointer {
	display: none;
}


.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

/* general toolbar styles */

.l7-bar {
	-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.65);
	        box-shadow: 0 1px 5px rgba(0,0,0,0.65);
	border-radius: 4px;
	}
.l7-bar a,
.l7-bar a:hover {
	background-color: #fff;
	width: 30px;
	height: 30px;
  font-size: 20px;
	display: block;
	text-align: center;
	text-decoration: none;
	color: #8E9DAB;
	}
.l7-bar a,
.l7-control-layers-toggle {
	background-position: 50% 50%;
	background-repeat: no-repeat;
	display: block;
	}
.l7-bar a:hover {
	background-color: #f4f4f4;
	}
.l7-bar a:first-child {
	border-top-left-radius: 2px;
	border-top-right-radius: 2px;
	}
.l7-bar a:last-child {
	border-bottom-left-radius: 2px;
	border-bottom-right-radius: 2px;
	border-bottom: none;
	}
.l7-bar a.l7-disabled {
	cursor: default;
	background-color: #f4f4f4;
	color: #bbb;
	}


/* control positioning */

.l7-control-container {
	font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
}
.l7-control-hide {
	display: none;
}
.l7-control {
	position: relative;
	z-index: 800;
	pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */
	pointer-events: auto;
	}
.l7-control {
	float: left;
	clear: both;
	}.l7-top,
  .l7-bottom {
    position: absolute;
    z-index: 1000;
    pointer-events: none;
    }
  .l7-top {
    top: 0;
    }
  .l7-right {
    right: 0;
    }
  .l7-bottom {
    bottom: 0;
    }
  .l7-left {
    left: 0;
    }

  .l7-control {
    float: left;
    clear: both;
    }
  .l7-right .l7-control {
    float: right;
    }
  .l7-top .l7-control {
    margin-top: 10px;
    }
  .l7-bottom .l7-control {
    margin-bottom: 10px;
    }
  .l7-left .l7-control {
    margin-left: 10px;
    }
  .l7-right .l7-control {
    margin-right: 10px;
    }

  /* attribution and scale controls */

.l7-control-container .l7-control-attribution {
	background: #fff;
	background: rgba(255, 255, 255, 0.7);
	margin: 0;
	}
.l7-control-attribution,
.l7-control-scale-line {
	padding: 0 5px;
  color: #333;
	}
.l7-control-attribution a {
	text-decoration: none;
	}
.l7-control-attribution a:hover {
	text-decoration: underline;
	}
.l7-container .l7-control-attribution,
.l7-container .l7-control-scale {
  font-size: 11px;
  padding: 5px 5px 2px 5px;
  background: rgba(255, 255, 255, 0.7);
	}
.l7-left .l7-control-scale {
	margin-left: 5px;
	}
.l7-bottom .l7-control-scale {
	margin-bottom: 5px;
	}
.l7-control-scale-line {
	border: 2px solid #000;
  border-top: none;
  color: #000;
	line-height: 1.1;
	padding: 2px 5px 1px;
	font-size: 11px;
	white-space: nowrap;
	overflow: hidden;
	-webkit-box-sizing: border-box;
	        box-sizing: border-box;

	background: #fff;
	}
.l7-control-scale-line:not(:first-child) {
	border-top: 2px solid #777;
	border-bottom: none;
	margin-top: -2px;
	}
.l7-control-scale-line:not(:first-child):not(:last-child) {
	border-bottom: 2px solid #777;
	}

.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
	-webkit-box-shadow: none;
	        box-shadow: none;
	}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
	border: 2px solid rgba(0,0,0,0.2);
	background-clip: padding-box;
  }
  /*logo */

  .l7-ctrl-logo {
    background-size: 100% 100%;
    width: 89px;
    height: 16px;
    margin: 0 0 -3px -3px;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    background-repeat: no-repeat;
    cursor: pointer;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAAAgCAYAAAHBIxK2AAAABGdBTUEAALGPC/xhBQAAIJZJREFUeAHtfAl8Tkf3/9z7PNmDRFbZSawhQcRSaqva1xCqpataqrT2UkuUUiqlaKtafe1VS1pUiypB0dIgIkpKRPZIELI/2/zO98akN48nltL3838//84nNzNzzpkzc+eee+bMOXMfxijNaMJ7LOrGO/HdYfZ8fb12gD2JJINJdR8WNHVQnRtSn7hilpz0u2DMKaEcFhZmhdzLNbiPyNVlwPxcm4Qh93Fr0gO4Ol5hfqiz6Q14G+QzGpYzQ9nXrUl7X/fgbrXdG3skX7m26+bNW2fQqJ5XmCs6RQKd6EQwB0zgtKgsvCidGF+N8wV/SBLqSKnXzx2WKIHw1xNxq2xtrKsBXqgrbePt1rivJFmloa5OoD129NcVQwa9Phxwaflw3ifvHCus1YIVjW7fwEF66dIhdYO/XV7Qk+9HY/5F7RA+w0G5TdRxq7gw10FBPWwA+3r9jpkYGcoJ5/7YiFxMiYCjLspsekOeCiJ1AhJJNER+8rfTX/j4BNcUMNCLMmhF+wC3cE9RZmMd/0IQjeTtGdwJjURD5EajsRQN1EwEHjAkUVce2LLhnKf8xGId3ZhkX4uxmj7MMKqJz0ZmMr3MJNZBmphV8WDBOCCgo+2QiE7DF3005wvU75e8vMLs4+P3HwwN7do5MzOu2NcjpPHRX/csCqjt2wvtxEAy8xJ3o+7j3jjkcurpn2xtrT0EPiS0oQPKSOfi/ygqL9H/qNbls8EXuer4+65xUa149QnBvGYFgapAN21EZ+pnuH3rrrnKdNA/zCRmjoqGzu36RoL21q38BLAAjRgo6iir63g1QAOcOoU27DAgwKtpPzVMKU+qBWIuve3Jx0zw4j/eQ0CASeNnjUi5mrYH72ZxUfFV0emJ479/BvrM9KxDAgZZEjziTp1d8+pL415sEdJloIAhF7QCZmnQoCkuLkkXNPfkozU8b4wVb30P4i4ADNQ41P08mtSBogHc27Vx70CPEHeUgRNwgUOuTqBR8wwODraGSIkrKipKxqVuI300mntri1jz9OOs0IHeHUdvms2t0iG+vn5nxmnan5QeUff6GGWttpidSjvGbCSZJdAAGTMwtjWSH2G5XrOp3oEv9wuWxqdeUPchZkW8OGqcedmcdujgUcMOH/zltmgL2YW2Fu22fbMz6q2xM+IEvmvHiCGyRq7AK3QLe959+T6v46co0uVBisLk0/9SqIIhcnQiVBPqULJ4dPVd2ypLg6Dx8wxuhAGDHrCOHTtqUfZ2b6KsYYIOuUiXL1/dKW4SMJRxkbbpG9nv5ecVutlt+PSoNvw7VPg8V4X5wqf4YQVp9g+NDQZDITr2cm/8lNIGlbvp+edGD/946eqJqOKmoBJRhjyjrclk0qlZAqeumw8YOEwE6ILdgh0raN9pcHeWx9n3mViPh9IKnlmBVBWI4bfoePDAEcOGPz9WWUDBzMe1cUdft5CnUfb2DvFR8rsz2avrkOdmT18wJisz5zDaqthVWjwAtzRgtBF9VbSdVofXIPWmB2CCouYqUBUFH59QbwwEqg0XykAi96/VuCEetRrm59msEfA+nqEtAUeqNEt324JGJEsDxpMi26gnaCpUxqJk6bahkGFp3akrZO8IBurcVGponpGW+VOdQP++uIAznzE1/cBBvRRZTc+OP0miUBJ78OiyxNxE6uX+KSP3vDIZuEE/z9BgWZZtHHj1oxZbkS6uJFNqIn+SWSy1AubjFtLd171xoHrQooyFQJRB7+0eHBrk2cxNtBW5mgYwoYNFXg5r7CvoFXWxajQ3mjiTc84wVkB2kTWt5NYk3lZ02SCvzphDDVrNZOY2p3mdA0wrhQoGSm5ig6SRyTsqwSxUaMKk+t4tXJIy4/IsoP82yNu7pYusKwk2WdslZmScvGHOyNs1tJ5GNrjVaeT2W2xsLCnuv5J6woQq/QtbXoLCMJqYtbWj208pKbGK4aamgWJR19XlCvpFEdxn6SDOl0byAjXB/cp8rlM/PteZ83k1T92PTuAw0Ly8GychmosWLB/v7xFSW+AeJQ/0auyLiYFEBgQ0dYKdDRsJfFOvpe0V76fgCVrgkNQTao63hAONr2vjFtAFltoTTFLzB415Al7RFdNipHRviWlLbzCHhZ05HxfEy9e7T/zX8FV+XLk+96e8Tl0xOJZfOpjdKp4kzboZXgGrouDj1rTunHnTQl1caoZ/unLNlKnTx32sNxobR0ZGakQTDCY8tEtEkG+LfihDg+NC2ccjpBXoyMTqVaLjTaFLduxe219XqH+67HYGKU5D0pbN30X5+vl0a9m6mZOPTxvFUIayPRAbM1RpS1uztp0a/SD6e9hcYlKVqgi7QEg/DAyRsAUsKSlNLyvT56Bs8e2Ias4LZzfnfEowJyOOVocZDs9jt8YnMDvUZzblZ+jis1rwtqg/KMHgwEThCUOCUS64U/An6iiL9oIGcFjwqMOQQB0JdTyEXd/tfR/1rMzsWCrPBxwPCxJMfJMELVYq0KO+fNkXk6CHRV/qXPSLXA0XZejpqiRZ0IgcY7hzu+AS2TB3quInaNnU2vzSlNqcT/fhHSqAVJgawAunEXxCPU4W9MMlcRN0ryZMAl2XcOHm6YlnYgMAToIOuxks+YBBErGrAa0YtKDDDkeYAaBFErjSUl2uKOfm5v1GE9y1nOLe/4IO+b3YchfKw0wy3lZ6m2arxyr4KV4RURH54qtS/fGufEMZZ7Hja/Ko0ptsgYML0+kKGM+4wbTbmGQUtPfLMfBrWWc3gIZenX4aJmUp9OQdqunk4nv2QmzMus0rO730wtj0qu2DqnuQjCYbrOjYrINq5JuRe/CKQp3QtRMweivm0yur+FBQf9xk6WFQX99Tvw2GDO0390jssWXW1vKf6n4q7Dc1EOXledJwQxF7RV/EomQbptMXssJlNyT5YSe4dq1m/s907eik1WprNKjdur9sW/1AWt7535Ur6/zvN2/lpcds/37eM892mEgTXGHuHD1y4qLRYK0YvrJsMly5knKu0tg0csmObbvfC2/ZbETK9bOnW4TU7xtGEw0a2geZbKysz/Xu9txQvV6fX6VOrMTw/hVsdF8b/tbGgX1feqF1m7Bq5hda+/o+pVgXm9Ztmzk0ctTBlMyEi/fnaoZ9g3HH1xmv5GgwI/m3+oAZUOzkj4fx7rQBt7qdxnhJDiuj/YlBe9dG1pLNbF9D8c2dem2xVMA3NQhjBk6WMyVaelmZVaL0+vmcB/Tz/zVa+8lIPlWW2SLMQh559ZSNCE2sbCq/FBuLyrrbLJVHsYZMr/sdfpiKJOv1pOxtyISp0tQRtHXqhNWQZffSy5d/LBOwJ5H71mrcAnzSSA2Z84ObJPlCbiujSZubkRefZI5X61hL5pavbzMvY4kuTCuzm6nXE4+Ztwf/lBRmcW1zcSkwxsXF6bWmEnbQSPJsoqWMZumwUqYC7QCVi3Y6tMmnCZdYDItiJezj0v3MaLJmRmXX58w0zKJ3w3ww2IwE+fk7JSUll9b2Crl4NfPcJXOav1OH7fyfdSs6cS7zl18Y65GRd36Pmk/S+dwex0/tHTN54pxNJ0/I2tTsM5WccqDFQgn9rW4nyphg4J95ut9gZis7p6Ym3BI4L9eQ+sS/ntrbLXDIE8/fLKaHVP7goyN5whKyKKMHcsWboSasqsznORfSRYEaz3v29uZt4JiDxMC8QVJLjzntg+ow+dBe7BhRJ1MwQ/AVkRbwQbBj7OtTXgVu49qt79LDrW/OX4yrqjEJ/OIPVrwlfM2CB/rW6XQ3wd9SgjsM41SsC9pLt+H0AptK2fdRjFdYHHwdhY0QOsL1VZDimkIHfLLD8xThcmCF+p3SjOxc0WlV+Zervm2x68dN/QQ+MLC2DVSHqOOVw6ZFXDRgCXjUBQ1y7Py+3bO+HyQLO0bArGV2auRrkxRv1orPPgjXF6XVARxJz0vCPvz4vbkoT50899yTenvAD0ljLx0L8Gr2Et4C9XXnTkEiecNKv/xiU/q1nHNXlQmN2iYVlpWwL0qLmSR3ZNFgQCpCogXuLDMa45WrTH8AcCVpTL8Q7ChbVDhAgO6XmwwGj7AWoa9lZ+UcBt3ufZvn6Ar0bUSbP/+42cJQ7NhbNjj3ybpW2p0G3LtP966DUIYk0TbZDr4Kk9Ho7lXLw1+0g6qo6Wtz8+f9sfmARQzqPZNWiCCBJ/NLtrOz9SkoKPxDlmT1SiJIHiuH6oAeF5e1o9XRGjWqa6pXrxbcqlm3YY7Wtifu6WDeU1xHF59an1cDki9wm8nnU7h3AV0fergDNrsln0+BtKUoP0yizYJr/57DhuJ1wnY5/mziepTVr6e3R0hrsbPLyck7BrxIZO/eAi2uuwE4I3Aok5rIAtzPPbjtxQuXtgCOOtQTwkqrPvlqMmBd2vcfDGeSpfGCXrS7H96SujCnBy+oj6LComSoEoGvUA0A6EvZ8DLaO9nYsUOoSzNy57Oi4mJyBu2SpuRcj2rGvZievUsRgleBf5gk6cpabd62egFoaYtr6NFl8DaUoz96LzTAq0kDlNWppLhE2UTg9Tuf8MdG2sw4DRjQU9H7e3b/FE2vomLoU3nJjm92rYSEwoXZuX3EJvDZsWtdz/+sjGlqMJqCXx/90jzALlz4syQl5awi7aj/EwnxPfC1srJy7ti232Sb6jZHRT+VJvm909I3pjKWayxjYdODeLkO1hnC2OLC/mhQWsJO6UvInCtjHQWDB+XKK2tvF3Dq5JkvVR4t/tzwiHk6namuefunwruvEq9ft86RW4Ef9sqQcK2WXRkzYtKBgtsFGYCNHjHpt3enzd+cnpvwo8pHbKQd2Wg9M3qDhjz9tqd+O7tao2XZqP+TKf8Ga3vyzP630EdGRpY+OTnutuiv0iQDqDOxVgaaSDLpjqMuResukoXHpwTw7jT5XnQlfHBBOgPcgxIiEqu+jG4NuoYN63a4mHzio0vJvy7Blhcwa2srWW0NAFZVgh0uaTSKj0LQYFERZVmy+WP1Z2uno25vZyd/tX5FO5T79x72faoF+xm4J5m4geLOPl7PHPvl1CeyLF1T875nkpdckq7qdOwIqY4aEz35i+XEXCYJ30MXs7dnSghSzaSqMunN2n36dZsBfG7uzYt3r0vpaVm/AHbkxJ4xJYWpD80PbapK6bmnL8+dvURRJXsPbXu5W49OU6n/ItA/zEapKr4PA8fC7OVVS1EXgwe8sq9Nh4aJ6nYWdyrFmayLvQsrIwleF8n4Jk9ntlCvo00gZ6ujE6UHBujQAZw2ZY52Cv8fvj/wwahXJu6VGFdu2sh4rdTs+M6+fl7dSAI+kTS0yfkbCWEndbhJIzPdjRu3TgcGBijqbcHc6Km21iz+b7C22KTEaGxFi1slHDyLsrGgKHr5kvYCsW3btkpeynskGYSrmaQnvTufLubhyL6WDGwK0zH9ypvSKMHoQXmuoaztz0diJoHu9VfePp6el3BYeOGstVYJ0Ys/VSR81OjhPmQqKAvbg3hqZNOd9PTsZNAt/3Rhi+5dW/cmy6SzaGfv7HS817NDlUUWsFWfrU9LzkxMFfjHyadMe3MZ7HPzCwJjMnK/8JbNI6rib1GSQfxpoTT7TRs+mYzLSJJoWkTYsKqYWIIbTNzWuaZTA0iWOT4l+2zKxx99fpXCUKxXv+5hn6/akP7n5eRztbw9O5rToi7cnx5+0rWIvi/uSU4/M2BgZJ/ZAwb2KiO9HynaXLp0rIAkTZeff/tc7MFju2Qm0T7r8RPcnJa43MjL1+PtocUif8SrE2ZkpWWX0Tmbex4q5q/KNFLLO8mcHSTXRc7nRsmzSkILCOzWsJkAypLjBXE4U+mdtmSCGclC+AEbC8US0Wh+u5Jz7jraIWREYfRGuJG064n7AAvxCHHIMxorpLcac4q9lHesYjLRb06qrgtZMoVpuecqzCi0tZRg2wq4pXEiKCDwlnIRMMD9WFvrjGqrwhK9RRj5kp+bwLgS37NI8C/wgTOgSPLyV7ibxoa9Rp7kV8nrVo1E3qSjJSr/CuNlBUxHTswSZmLFkhWTtLSGUqSEjO7yXEN1DZW1FBuQrQllxzK5FVuTc5HtnnOIwlRf1X6Waa1GM24KoNGQT69SkpiGFtIyYwwrMK1jb1+9/U9bApV6/7fyxGYAwewzZ1IdiosNBvF2PzHmD8FIWfcoKPIV7ZZ7Q8rImmJGPWPpR0jqdMxEAs5IgEkWCUm6mf6YRITIOXIFUC6heCvIyguhPIR5s1PE9TYrMixlWkM9ZqRwC2jLkywKSm4tPc005KKeOxe+qb+oKhE9fAUOvLLi0ubYH6AVNpoaLU++lnWezs8/OLbw8D09GUp8HkB7wHCEEwVHjBkOxqvX7x906kgOzMvn89qZWLm7SbSXmXwnqLHLMdVmWKAq5eolSY2wtDyp8aIcFNSqekl+Uftjhy5IbduGV0tKulrCdMEGrcRupeYm/iLoLOXkMpJqe4fUN+hZHRM3keQ9Wip3IGiSEIupmLjooXwByeoUA2daCrSw4nx2Kucye86qhJUq7MUKSznt+SqSHcq0KAqY1okZxqySrlcQUIEvJ7e+RDocW2JdmR3T8K0UT2lOwk1viKQnh2oUuaIqrFt120ct4ySGwaALHDPuVb8ZM9+OxjlFOh95oGXzrsvpxk2e/jb7ERB6VL6PQw9hS79427lUqzOOGBGZj5i64IcPYUp1paHDXxzs+UH07NUCvnrVumlzZ334h0ajuZqWc+68gKtz+Bq//CSmq4kbrRL/PDbPyalGKPDJySm7n27V+wtJywozshMPqduYl4Ugw/oHDm455A8ryDjEhp3CkV+/HxEYGKC0/XDRyreXLVmVbKeyE8HTPOE0DNmONhS3Gu0f4NPTHP+gOj7JGRwx4icYzRU7kUlfSzMW9+PJJMTLS03MztqahXs1YuuK8tmAqFgp70FM74eXxpeHTvhkR3eKY2wic6K5YmRoWBE51UdI825tuV/7h8Uh1qQzFAf26vusy8zZE1eKdt6+Xl1ooovbt+795fVUXRuC03rzzyecisZBYwoCsvETRgbcupFfunrl1mwSHtIW7EpqduKF5My4VBIG9w3rt7L+g3qtggsRI3t91IvzNq7d/sKVK1drk8bOtaSZ16zc3pw0sdV332/sLYSYzofd7tdj+H/Aw1O2/S0DhX8wlWvFv7eI0jpJqs1gs33brv09ej6TT7wqFKulIbt7utalw5RKxJwO4+yCEGMDFdjILbFCkNFw6k7py0XP8qu0Fm8nl4UTcW1nY81ORHXjPaL2SZcFcxq2xNbUXsSstB0oiCbA5TkWCCMvYQbda9KotCuVkCbTQGYyNCFb3ESh72wmayOlRbePV6L5m5UAOh+sK8wNh4tzxaeLF99lY6KjunGuri7h0BZf/GfZBfhQfDyaNEnPSUgw70o5bm8yuZrDUcdSTXftYL4EaiT5tobZJqXknsq+p52e+wB28vT+cfQyPYtyxOA+nw/oPXwPyiKl5ibE+Xs06UJb9x/OJB4OdXd3aUMmkPX2XWsnNAvu8EGZJDWhZfi62izyouPDRh2v9cabr/iGt2o6UvCa9c7CqfQFo0Gy0ZyJyyg/uiZw/0SuNocelX9qbvwv8F5+suxzv6VLPo211J6EvRZWnCXL5jUb+sKAoaDBh5SYKzyT1JxzRzAvlQQZRNN+kn6Oepq3JXn8gar+JKZBRPQbffnSJ+qEpAgdCTjnt/UbGCt7jkq+lbZwVmQqGPlcaVJWhRBHPcXd6ciG29xDbOecNtIGCm3VkKJLnqiy0JfcbIvxxx7fOc7Gxkpx6G3ZEDNn1rsLEy5cOb6GIkIuPXt3eef5FwaO3LxpByNteTM9Pb7yGO7az7+fPTBR+Km2bIyZPWPa/Pi1m1b0b0FONnt7Oz/0g0Su6oLLSVd+GP/G9G9154uLtZL2lsnGPo6XFjyDB0wx33JCC/8NBoavKQKBogB8noskH89jxs5dOw78MC7h5/VkUjiSQD+1fvPKDi8+/+ZhX0/lawzl5bv70jZ1dHTQTJ0xfr5gv+/HQ4vXr/smC/GC9Ixz6QL+T+aPo5ExrvT0E/BwX7I0RoR9TSajFebgmWc7TgINjk6OG/POKVnLctKzE06SECtNK2+67nKLOipdIEEOp7jI73QKg+lKWE3aDB56N5wPuUvCpInpCazEEM7yS86wQloh7tBVXFLEbpa8REL8fjkdl2Y158NItDOp/XnZimXM/ZW3lJY+WSH2dwttRt5o+6+3r+6C4A/6Tkq6EjNp4uz44pIS05wZi94V4164ZNYSN1cXKyz54hyowFnK+0X0GJGccXpneKuwQRcvJB3YvXPfAgSX6CPVeBK2avUb1huy79COLecuHp1Dx5fgU+wCId70zapnhNdZaGPwb9mq2SgBRx45uK87p1Xgjh3NjrV0FmHm92YtnirGggfYp09XV5PRFIBNIeDGohstke/9edtrCNmifC0l/YdXXxz3Cxy76dfPVz4DC4L/sYQvkhFh+HT1h62EEP+45+dFEGJ8xp6enXhSfUsWBRkEM45KubIDe5qE+DsE9XSlNM2lbMv0YP4OxaJIzsm+ePd6DivMb8vu6GKYviyJFRq7Se/d+hq4KMa104PZLBLgDXRiRkPhbU5h7s03PNgx4J9UCvBsGqDnBh/YoO07PDUefEtLyzK7tI9Yh80dQtTr1m7JPHL4+HLg6GxB9f2Hy0M1CNtg5wx4VUnWaO1bNn12YJBfizf69hr+5Zujpqx5PnLUp43rtZvVtFHHCBFAdHFxDlu28v1w8JEljf6FIaN/FseJ8DGe4I9wvYAj37Z113XZVnsaZxUyM8+nkYJJw5Gjn386/JFos3Tl+3NQ1nMpDB/aGbmpxkfL329Wu46fcqiD7je7U9u+n0M72jr5nhDt/ldzH7fgIJOJ+0+aNjaw34AeihI6ezph7YiX3zpGk3sjI/fsWfN7q1KQQUibvNIF51kECfMysmuNlFPUjy2sHchWvhzAyXNM9aWshDTsQOmD0vrShwWKkI704vZFddkXRDuXhJgsELKYS9n7CxKkF1b8KNFr8WQS3Gw6g74JztRNeefNDwXXyeNnzSIBI88gl40GpkRyhg4aeeD69RvKQ8aSHbNrfS+Exvy8yn9OQ7Q1z2kCd+D8BDZnGdcTTqTmJCTjRKgky3nQntezc0+JNl7etRT7WqM1XcOuX9ZoKnlvBB1yrdb6CmhwqU2cjNzEs/A2vPj82Nj0tMz9oLWzt/Pfd3DbYNjntJmr06x5Ywf6ZEIRbuBHvz5lWplOp7jrnvRxZPD/byZ8IE0u3IZ16wbaTpw8Zgn6pjBiQq9uQ2Po6/SyjJwEiy/qfQW5/AYkvviyNIEEcgIFqstweou07GgXA4sZ6cxrlNP89X9MDe7sILM9JK4v60CrYyUlejZy0Z/SrL+oHr8EB7w4q7hr78ZZcLMJritXL16jXr5FGZsoQdOqTfNRM2ZNrGvU81pVfXUGWnoZlN2seqOl8PgH/dFWtm4noF07te33KX0GmIv+GjdpOIzs4SCUN2xZ9Q5lyrPbuuW7uT/tPXjLykq6bMmzAfr/pVQs3WmG8W785rMRlCkr//w50eWrKWPx9zyHuzenvZs/MItOl1a85cGvajjbpJNYdYpd97C3YkfH2fGeK0qkdDCg3x4JoI3fXknH6hMNRnFLx9igZTnSwQd28IgExw9fpO9PTVbQVOR6CkFzslvP0pI/+36scLwRp+9A88a4Vxbt2bV3WHz8hUb0uzm3yn9i4H6tVbgHmCQqykcuptBX2/6uYXFk37d4+413pn62Jvo/YPLm+Nfmt+/QZouzs5PiL066dHnrhHEz4xB8QLDnkTv6hxuQtyWAPESKXV9VV5JReyM193QWBNTXlT4Y4boaeGF9fL26og3cbF9vjsmRtdqcq9nxVX6R9NCCDKYf50jfv+3EO5gYHYbjzItATZg1OzVG5t3IFrWmjeGPpL9cCQ8HXYpGw3rQB38XUX2SCd8ilOmMrouXzAmBpgJvsnUNg/u/shBlnMC2dD7Wzy24HTaAzVuFxtSrFxhBk6fd+u1X8+rXaT2Jlcmt6ZzVHQMYPKEk0SecYEVnd/WCpZNzjZoKjII28FrgvK9tDftjly//dkfQIL+WF5dF9nDyrl37WLeYZ+b3j+g5kzaX9s2aN3kV+OLC4iud2vXfiMMqdYJdfk2NBfT/jfTc0P49unXrVKXQiVEWFhUXvT12xgHaK+jpxf3doNH7IUjWf0DPZwXNvh8OHkFZMsiKshRw8/yRBBmNl+VLZ0fb8ZayzH4krdyEnpQnudbiKRxMAbry9Y5gJwnfOzpfUpZF804fp46dOwlxvY5dnnZ64aVIRbOC39ovN8/GAW9ZsrpoSYhBU82dnczPkbpiI5iUcrK1ra2Nl2M1x7oHf/lueOd2/TeYmEnxAID2iSSDdQbZVp6ff7J214IPZ3YnnnLdunUiyNSJuMvfSC/fi8eOnepAp6EOnss5Rydc/kp0EDORfuXOZeyoqSeDmzSIQVtg8Q3K4IGvzkSZW9vd87sdgP+3Ejw05n3hFxroMgffU6f7KBs4uM8fy5euTjFKRkf6ks4FRJ61PJojL7hTePH99z5Kwsuael3R2gBbTPcMwiKVBeBkxh0KtGw7mQ/dhbeUynihvrU2sKEr2JPb1Km7h238a+ylp4zc6IRNXsdObV3JTswqKCw0kUeCNmLxiWp68zLOBpTeLm5LGydt377dXJycnazhewUd/K/YLZPmk8aOf80/LSW96Ntvf8jFRGodXA5iyRf88Es5xQZda0GbkZZVtGP77ntocaKXlRW3wQOv5ugot+vUyqluUGB18CGT5hZ+jwuOfRx0FbzVOcLQaz7Z0Q6eCsDRHzayiodCI58URwXVbR6l/Lghavw6hYGZsDr/rYSNLSKQcfS7AwiOSGWF4eJewRAmRVAD59MPOjPytwUZncAN5yyzhVacDSFlbDJIbO1qkzQXuP9Gql+/bTXj7WLbUq1t4V3H+kN3q5zWOnq5Jn05Jdm6GvMTExPJnC9PCDgYC2/X1Mp6o38j1xv3m0Q1LT5wu985DghlzGcxdqUaKzvSRpLJXtaFhdUpND8mLsZhKQcPuhSTxRL+UWFCkM3bPexZC/N2/9b/nYF/Z+AxZuD/AA8zEhkTLyOGAAAAAElFTkSuQmCC');
}


	/* layers control */

.l7-control-layers {
	-webkit-box-shadow: 0 1px 8px rgba(0,0,0,0.4);
	        box-shadow: 0 1px 8px rgba(0,0,0,0.4);
	background: #fff;
	border-radius: 2px;
	}
.l7-control-layers-toggle {
	background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAAGf7Ah0AAAABGdBTUEAALGPC/xhBQAABzdJREFUWAnVV3lslEUUn/l2F0tpwdAih1HEqCReDcphNCo1EkgFkXa5PNpuC0Fo2e7Wgko8KiaKWrvbK5672xYFpNtiRRuNiY0aURA14BGviBcVlaKltVa6+42/N9v5Mrtt05rwj/PHzjt+8743b+a9N8vYwKgMNlUQyemnMtAkaJajvb3dToQSGp8e6boopkr4VYgEMYwO0vhCTfMVzBcMf8bx086YyODcuM80zTqp9IWat+7evW8sMdIxIqqCLa6oiAaJpuEtcBqcc2HEWMZ0JclgZR/Nchf++ubrzKjJSguXS4tVjXvPjfb3/UAAacGTn/MOMb7QnjNpNqP/bKZ50Ai0tqYmCi0n4zbM+W+lBc7JBOa+QPhDwcTsxJXE2+32edKCL9h8hRDmRzpIOWydAylhrcMfDN+ugBRKSdP3KwPhsFJIPth02FISIYQwYsDYcVfWhy/Bon4JgumffMGmiGTwQ0B/sHml4q2ZFAD3WQIQVhx0IdFw8B189lolN+w8w5PnjPmlhJgtA8/vfn3iye7u3yGzDljDxZEG4097Cp3rSSjBtMHunp6vFR+HHoIxmbgTe1xHKssDHecLNFUjMzbqMs5ZlHF7ute17M84+TMHDzr+OvR9JwKdCms9yRkzJq6bPTsWXh05QOPUN+PUHyPWMPhm6UHd7vaUohWZPSRE8OqxpTyibQa/qcTlbEP0vwF7AWUAT3JM9dy69FfSNza+MU4awNE8iQtXSkJuGLleV852ov2h5jkwVof0mUs8aO4LhTuYYFOAjExId0wcFIPahpaLTkWiX9ECfHG/sLNi1i8+HODfgLFFRI96+INNi0cNTgTS1obKQh03aAuk9DeELzcj4pACYivvwvXrFK/PcQZiQWo+hmidpYMUjQC7EOB6xdNsGfAHwk/RDdOVw9Dm+NTUSWtWLDohDVQ37JkbiUT2DwMeVswZP+gtdM4x3HnLDhjcGM2XLWOISaenIGee9MCSgqgMht/H/q/SZYk0qviV3oKcj5XcioESyOoqIseFYDYloxnAGm/hcrcuk3JV2XBMl+pKqn6mENux11+w12m6jpqMMFn7rPPTHdwfCm8yTfG4tMaNu+GepPUFiqbM7T105ARSPQU+dY/LOC/N2gI65WEkyWUEtjmSppfkLvlRLaQ5VnZFDtGGzbheNRROKZmbu/AvUvh3tE4Wff2/0IUC+y2q+4VVoXBW1BSvkR7Rb8BW84lWJQBdlGozcs7GLy3Nd35OSqTxBqtfgkc1+sPjcqbDgEl6xK0dH5lv545LOCVL1/F+3CoY4eyY1+WcBiC2KYEHQBd5XDkyndE17xCm2Ug6BLcSwb3LigE1AlOYu6TS4HUwVEw0Df1osfBnLDwnpiFDCQPuvQ73Fkqxg8/hEVYLXt66MXbbzOK8bKre1hhkgDT0RDja3fEHytwZxCMLH0YWPkD0fxqjqUZDejDSV3z1LbexqPkEPJxKWLqtKOGbvPnZL460NlE/KgfkIZiRrfjShsQcG2QQDUwwXjcuZcID61Ys6ErUJ/LDOiCfLUzUjVQdEg0O4jn/ABEq0iuIjrEcwE0x/KGWNbjPj4BO00Gni0ZOoIPzLR5X9vMqqaQDqDzzENra4V5zp8sBZQcROYjsLvYUOPdbEVBKeiZ193QjCmwtZCM+ldS6EWYTH3wuNSV1i+pFCj/IAaWgGUfBq0N78qPM3DZcp9TxcTQeyzZm3ON2LatXpSlOP8BIB6qDLddHmHnFrBlpNZmZmdZbNXEB9XsRlZXFennqGHzoXW5DaId4iSoc/Q365EjnRjszPnYXZL9NDWUtGsqzCjAw7xprTypbn7fkaILcYqkInzzeX06C8emO8sKlS7stZQLxVMPes/+O9FVAvEpXob+utY6gZmfrtMjf/RUI+2odhF7wJbq+Gzf3zTj5CAwyaoEwozVoCzN1KKK00z7WUbZx9dIOklsO6CAZpu87i5gpHoJ8gtLh9vZixSO2KckV7qysf5Sc5uq2tjOix3rL0FW3IJuSNV0XM/iDs85LqxvqeKUD8n3LxUobt5WVuLJlS9IM4O9i09VRwWtxLWfpcix+hXjs8mZdjn19YuOiuKRgufzXqOuqQi2r8O+yAk/tl2Q/RMW7ETe8UdX1GJhHDM5qjDHJ5e7bs07qBp7ZsTe9t6/vUXykkLKEdLFbLgLJSUn3rrt1yXEdX/1C23jzVG+5Keg/B5r2wJD9g/NcaUAJq4MvXxxl/TWoATcoGc0Av4eUKnIXZlsvXpLHO0CS2KgOtGQgdeuwqWuUjGbUgrdszLHRXXDLF0oe54AS0kyPnc5Iz/2CmV7EeIzSwcjvsHQPXkUhld/kCP6Xu+DRNjg/SWHh+SnODF+aPeVh9XCydAPEsA4kAqsCzcuiTPiw7+maTj6SwGsVk/9gY9xbUpizR8MNS47aAd0C7s35CG8VdrxYyjl/FcdUgo73nY77X9D/Au9RDMh+aBoVAAAAAElFTkSuQmCC');
	width: 30px;
  height: 30px;
  background-size: 20px 20px;
	}

.l7-touch .l7-control-layers-toggle {
	width: 44px;
	height: 44px;
	}
.l7-control-layers .l7-control-layers-list,
.l7-control-layers-expanded .l7-control-layers-toggle {
	display: none;
	}
.l7-control-layers-expanded .l7-control-layers-list {
	display: block;
	position: relative;
	}
.l7-control-layers-expanded {
	padding: 6px 10px 6px 6px;
	color: #59626B;
	background: #fff;
	}
.l7-control-layers-scrollbar {
	overflow-y: scroll;
	overflow-x: hidden;
	padding-right: 5px;
	}
.l7-control-layers-selector {
	margin-top: 2px;
	position: relative;
	top: 1px;
	}
.l7-control-layers label {
  display: block;
  padding: 8px;
  }
  .l7-control-layers label input[type="radio"],
  .l7-control-layers label input[type="checkbox"] {
  width: 14px;
  height: 14px;
  margin: 0;
}
.l7-control-layers-separator {
	height: 0;
	border-top: 1px solid #D8D8D8;
	margin: 5px -10px 5px -6px;
}
.mapboxgl-ctrl-logo {
  display: none !important;
 }
 .amap-logo{
  display: none !important;
 }


`)},kPKH:function(_e,dt,R){"use strict";var V=R("/kpp");dt.a=V.a},"kQ+U":function(_e,dt,R){"use strict";R.d(dt,"a",function(){return Gt});var V=R("lSNA"),E=R.n(V),T=R("lwsE"),e=R.n(T),t=R("W8MJ"),u=R.n(t),s=R("k5/I"),c=R("h1nZ"),r=R("yXPU"),h=R.n(r),n=R("o0o1"),i=R.n(n),a=R("4cb6"),o=R("fbvF"),l=R.n(o),f=function(){function Ht(ae,le){e()(this,Ht),this.attribute=void 0,this.buffer=void 0;var Be=le.buffer,Ce=le.offset,We=le.stride,Ye=le.normalized,wn=le.size,er=le.divisor;this.buffer=Be,this.attribute={buffer:Be.get(),offset:Ce||0,stride:We||0,normalized:Ye||!1,divisor:er||0},wn&&(this.attribute.size=wn)}return u()(Ht,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(le){this.buffer.subData(le)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Ht}(),v,b,g,m,_,M,x,y,S,P,A,O,L,H,F=(v={},E()(v,c.gl.POINTS,"points"),E()(v,c.gl.LINES,"lines"),E()(v,c.gl.LINE_LOOP,"line loop"),E()(v,c.gl.LINE_STRIP,"line strip"),E()(v,c.gl.TRIANGLES,"triangles"),E()(v,c.gl.TRIANGLE_FAN,"triangle fan"),E()(v,c.gl.TRIANGLE_STRIP,"triangle strip"),v),K=(b={},E()(b,c.gl.STATIC_DRAW,"static"),E()(b,c.gl.DYNAMIC_DRAW,"dynamic"),E()(b,c.gl.STREAM_DRAW,"stream"),b),G=(g={},E()(g,c.gl.BYTE,"int8"),E()(g,c.gl.UNSIGNED_INT,"int16"),E()(g,c.gl.INT,"int32"),E()(g,c.gl.UNSIGNED_BYTE,"uint8"),E()(g,c.gl.UNSIGNED_SHORT,"uint16"),E()(g,c.gl.UNSIGNED_INT,"uint32"),E()(g,c.gl.FLOAT,"float"),g),U=(m={},E()(m,c.gl.ALPHA,"alpha"),E()(m,c.gl.LUMINANCE,"luminance"),E()(m,c.gl.LUMINANCE_ALPHA,"luminance alpha"),E()(m,c.gl.RGB,"rgb"),E()(m,c.gl.RGBA,"rgba"),E()(m,c.gl.RGBA4,"rgba4"),E()(m,c.gl.RGB5_A1,"rgb5 a1"),E()(m,c.gl.RGB565,"rgb565"),E()(m,c.gl.DEPTH_COMPONENT,"depth"),E()(m,c.gl.DEPTH_STENCIL,"depth stencil"),m),Z=(_={},E()(_,c.gl.DONT_CARE,"dont care"),E()(_,c.gl.NICEST,"nice"),E()(_,c.gl.FASTEST,"fast"),_),J=(M={},E()(M,c.gl.NEAREST,"nearest"),E()(M,c.gl.LINEAR,"linear"),E()(M,c.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),E()(M,c.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),E()(M,c.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),E()(M,c.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),M),rt=(x={},E()(x,c.gl.REPEAT,"repeat"),E()(x,c.gl.CLAMP_TO_EDGE,"clamp"),E()(x,c.gl.MIRRORED_REPEAT,"mirror"),x),vt=(y={},E()(y,c.gl.NONE,"none"),E()(y,c.gl.BROWSER_DEFAULT_WEBGL,"browser"),y),mt=(S={},E()(S,c.gl.NEVER,"never"),E()(S,c.gl.ALWAYS,"always"),E()(S,c.gl.LESS,"less"),E()(S,c.gl.LEQUAL,"lequal"),E()(S,c.gl.GREATER,"greater"),E()(S,c.gl.GEQUAL,"gequal"),E()(S,c.gl.EQUAL,"equal"),E()(S,c.gl.NOTEQUAL,"notequal"),S),ut=(P={},E()(P,c.gl.FUNC_ADD,"add"),E()(P,c.gl.MIN_EXT,"min"),E()(P,c.gl.MAX_EXT,"max"),E()(P,c.gl.FUNC_SUBTRACT,"subtract"),E()(P,c.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),P),Rt=(A={},E()(A,c.gl.ZERO,"zero"),E()(A,c.gl.ONE,"one"),E()(A,c.gl.SRC_COLOR,"src color"),E()(A,c.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),E()(A,c.gl.SRC_ALPHA,"src alpha"),E()(A,c.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),E()(A,c.gl.DST_COLOR,"dst color"),E()(A,c.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),E()(A,c.gl.DST_ALPHA,"dst alpha"),E()(A,c.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),E()(A,c.gl.CONSTANT_COLOR,"constant color"),E()(A,c.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),E()(A,c.gl.CONSTANT_ALPHA,"constant alpha"),E()(A,c.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),E()(A,c.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),A),Ft=(O={},E()(O,c.gl.NEVER,"never"),E()(O,c.gl.ALWAYS,"always"),E()(O,c.gl.LESS,"less"),E()(O,c.gl.LEQUAL,"lequal"),E()(O,c.gl.GREATER,"greater"),E()(O,c.gl.GEQUAL,"gequal"),E()(O,c.gl.EQUAL,"equal"),E()(O,c.gl.NOTEQUAL,"notequal"),O),wt=(L={},E()(L,c.gl.ZERO,"zero"),E()(L,c.gl.KEEP,"keep"),E()(L,c.gl.REPLACE,"replace"),E()(L,c.gl.INVERT,"invert"),E()(L,c.gl.INCR,"increment"),E()(L,c.gl.DECR,"decrement"),E()(L,c.gl.INCR_WRAP,"increment wrap"),E()(L,c.gl.DECR_WRAP,"decrement wrap"),L),Mt=(H={},E()(H,c.gl.FRONT,"front"),E()(H,c.gl.BACK,"back"),H),St=function(){function Ht(ae,le){e()(this,Ht),this.buffer=void 0;var Be=le.data,Ce=le.usage,We=le.type;this.buffer=ae.buffer({data:Be,usage:K[Ce||c.gl.STATIC_DRAW],type:G[We||c.gl.UNSIGNED_BYTE]})}return u()(Ht,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(le){var Be=le.data,Ce=le.offset;this.buffer.subdata(Be,Ce)}}]),Ht}(),At=function(){function Ht(ae,le){e()(this,Ht),this.elements=void 0;var Be=le.data,Ce=le.usage,We=le.type,Ye=le.count;this.elements=ae.elements({data:Be,usage:K[Ce||c.gl.STATIC_DRAW],type:G[We||c.gl.UNSIGNED_BYTE],count:Ye})}return u()(Ht,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(le){var Be=le.data;this.elements.subdata(Be)}},{key:"destroy",value:function(){}}]),Ht}(),nt=function(){function Ht(ae,le){e()(this,Ht),this.framebuffer=void 0;var Be=le.width,Ce=le.height,We=le.color,Ye=le.colors,wn=le.depth,er=le.stencil,Lr={width:Be,height:Ce};Array.isArray(Ye)&&(Lr.colors=Ye.map(function(on){return on.get()})),We&&typeof We!="boolean"&&(Lr.color=We.get()),this.framebuffer=ae.framebuffer(Lr)}return u()(Ht,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(le){var Be=le.width,Ce=le.height;this.framebuffer.resize(Be,Ce)}}]),Ht}(),Pt=R("cDf5"),z=R.n(Pt),q=R("c6wG"),gt=R.n(q),et=R("YO3V"),at=R.n(et);function xt(Ht,ae){var le=Object.keys(Ht);if(Object.getOwnPropertySymbols){var Be=Object.getOwnPropertySymbols(Ht);ae&&(Be=Be.filter(function(Ce){return Object.getOwnPropertyDescriptor(Ht,Ce).enumerable})),le.push.apply(le,Be)}return le}function k(Ht){for(var ae=1;ae<arguments.length;ae++){var le=arguments[ae]!=null?arguments[ae]:{};ae%2?xt(Object(le),!0).forEach(function(Be){E()(Ht,Be,le[Be])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ht,Object.getOwnPropertyDescriptors(le)):xt(Object(le)).forEach(function(Be){Object.defineProperty(Ht,Be,Object.getOwnPropertyDescriptor(le,Be))})}return Ht}var ot=function(){function Ht(ae,le){e()(this,Ht),this.reGl=void 0,this.destroyed=!1,this.drawCommand=void 0,this.drawParams=void 0,this.options=void 0,this.uniforms={},this.reGl=ae;var Be=le.vs,Ce=le.fs,We=le.attributes,Ye=le.uniforms,wn=le.primitive,er=le.count,Lr=le.elements,on=le.depth,en=le.blend,An=le.stencil,Bn=le.cull,gr=le.instances,hi={};this.options=le,Ye&&(this.uniforms=this.extractUniforms(Ye),Object.keys(Ye).forEach(function(Qt){hi[Qt]=ae.prop(Qt)}));var Ae={};Object.keys(We).forEach(function(Qt){Ae[Qt]=We[Qt].get()});var Me={attributes:Ae,frag:Ce,uniforms:hi,vert:Be,primitive:F[wn===void 0?c.gl.TRIANGLES:wn]};gr&&(Me.instances=gr),er&&(Me.count=er),Lr&&(Me.elements=Lr.get()),this.initDepthDrawParams({depth:on},Me),this.initBlendDrawParams({blend:en},Me),this.initStencilDrawParams({stencil:An},Me),this.initCullDrawParams({cull:Bn},Me),this.drawCommand=ae(Me),this.drawParams=Me}return u()(Ht,[{key:"addUniforms",value:function(le){this.uniforms=k(k({},this.uniforms),this.extractUniforms(le))}},{key:"draw",value:function(le){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var Be=k(k({},this.uniforms),this.extractUniforms(le.uniforms||{})),Ce={};Object.keys(Be).forEach(function(We){var Ye=z()(Be[We]);Ye==="boolean"||Ye==="number"||Array.isArray(Be[We])||Be[We].BYTES_PER_ELEMENT?Ce[We]=Be[We]:Ce[We]=Be[We].get()}),this.drawCommand(Ce)}}},{key:"destroy",value:function(){this.drawParams.elements.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(le){le.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(le,Be){var Ce=le.depth;Ce&&(Be.depth={enable:Ce.enable===void 0?!0:!!Ce.enable,mask:Ce.mask===void 0?!0:!!Ce.mask,func:mt[Ce.func||c.gl.LESS],range:Ce.range||[0,1]})}},{key:"initBlendDrawParams",value:function(le,Be){var Ce=le.blend;if(Ce){var We=Ce.enable,Ye=Ce.func,wn=Ce.equation,er=Ce.color,Lr=er===void 0?[0,0,0,0]:er;Be.blend={enable:!!We,func:{srcRGB:Rt[Ye&&Ye.srcRGB||c.gl.SRC_ALPHA],srcAlpha:Rt[Ye&&Ye.srcAlpha||c.gl.SRC_ALPHA],dstRGB:Rt[Ye&&Ye.dstRGB||c.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:Rt[Ye&&Ye.dstAlpha||c.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:ut[wn&&wn.rgb||c.gl.FUNC_ADD],alpha:ut[wn&&wn.alpha||c.gl.FUNC_ADD]},color:Lr}}}},{key:"initStencilDrawParams",value:function(le,Be){var Ce=le.stencil;if(Ce){var We=Ce.enable,Ye=Ce.mask,wn=Ye===void 0?-1:Ye,er=Ce.func,Lr=er===void 0?{cmp:c.gl.ALWAYS,ref:0,mask:-1}:er,on=Ce.opFront,en=on===void 0?{fail:c.gl.KEEP,zfail:c.gl.KEEP,zpass:c.gl.KEEP}:on,An=Ce.opBack,Bn=An===void 0?{fail:c.gl.KEEP,zfail:c.gl.KEEP,zpass:c.gl.KEEP}:An;Be.stencil={enable:!!We,mask:wn,func:k(k({},Lr),{},{cmp:Ft[Lr.cmp]}),opFront:{fail:wt[en.fail],zfail:wt[en.zfail],zpass:wt[en.zpass]},opBack:{fail:wt[Bn.fail],zfail:wt[Bn.zfail],zpass:wt[Bn.zpass]}}}}},{key:"initCullDrawParams",value:function(le,Be){var Ce=le.cull;if(Ce){var We=Ce.enable,Ye=Ce.face,wn=Ye===void 0?c.gl.BACK:Ye;Be.cull={enable:!!We,face:Mt[wn]}}}},{key:"extractUniforms",value:function(le){var Be=this,Ce={};return Object.keys(le).forEach(function(We){Be.extractUniformsRecursively(We,le[We],Ce,"")}),Ce}},{key:"extractUniformsRecursively",value:function(le,Be,Ce,We){var Ye=this;if(Be===null||typeof Be=="number"||typeof Be=="boolean"||Array.isArray(Be)&&typeof Be[0]=="number"||gt()(Be)||Be===""||"resize"in Be){Ce["".concat(We&&We+".").concat(le)]=Be;return}at()(Be)&&Object.keys(Be).forEach(function(wn){Ye.extractUniformsRecursively(wn,Be[wn],Ce,"".concat(We&&We+".").concat(le))}),Array.isArray(Be)&&Be.forEach(function(wn,er){Object.keys(wn).forEach(function(Lr){Ye.extractUniformsRecursively(Lr,wn[Lr],Ce,"".concat(We&&We+".").concat(le,"[").concat(er,"]"))})})}}]),Ht}(),it=function(){function Ht(ae,le){e()(this,Ht),this.texture=void 0,this.width=void 0,this.height=void 0;var Be=le.data,Ce=le.type,We=Ce===void 0?c.gl.UNSIGNED_BYTE:Ce,Ye=le.width,wn=le.height,er=le.flipY,Lr=er===void 0?!1:er,on=le.format,en=on===void 0?c.gl.RGBA:on,An=le.mipmap,Bn=An===void 0?!1:An,gr=le.wrapS,hi=gr===void 0?c.gl.CLAMP_TO_EDGE:gr,Ae=le.wrapT,Me=Ae===void 0?c.gl.CLAMP_TO_EDGE:Ae,Qt=le.aniso,ge=Qt===void 0?0:Qt,Wt=le.alignment,re=Wt===void 0?1:Wt,Te=le.premultiplyAlpha,ue=Te===void 0?!1:Te,be=le.mag,Xe=be===void 0?c.gl.NEAREST:be,Rn=le.min,tr=Rn===void 0?c.gl.NEAREST:Rn,Mn=le.colorSpace,vn=Mn===void 0?c.gl.BROWSER_DEFAULT_WEBGL:Mn;this.width=Ye,this.height=wn;var Ar={width:Ye,height:wn,type:G[We],format:U[en],wrapS:rt[hi],wrapT:rt[Me],mag:J[Xe],min:J[tr],alignment:re,flipY:Lr,colorSpace:vt[vn],premultiplyAlpha:ue,aniso:ge};Be&&(Ar.data=Be),typeof Bn=="number"?Ar.mipmap=Z[Bn]:typeof Bn=="boolean"&&(Ar.mipmap=Bn),this.texture=ae.texture(Ar)}return u()(Ht,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(le)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(le){var Be=le.width,Ce=le.height;this.texture.resize(Be,Ce),this.width=Be,this.height=Ce}},{key:"destroy",value:function(){this.texture.destroy()}}]),Ht}(),$,_t,yt=($=Object(a.injectable)(),$(_t=function(){function Ht(){var ae=this;e()(this,Ht),this.gl=void 0,this.$container=void 0,this.canvas=void 0,this.width=void 0,this.height=void 0,this.isDirty=void 0,this.createModel=function(le){return new ot(ae.gl,le)},this.createAttribute=function(le){return new f(ae.gl,le)},this.createBuffer=function(le){return new St(ae.gl,le)},this.createElements=function(le){return new At(ae.gl,le)},this.createTexture2D=function(le){return new it(ae.gl,le)},this.createFramebuffer=function(le){return new nt(ae.gl,le)},this.useFramebuffer=function(le,Be){ae.gl({framebuffer:le?le.get():null})(Be)},this.clear=function(le){var Be=le.color,Ce=le.depth,We=le.stencil,Ye=le.framebuffer,wn=Ye===void 0?null:Ye,er={color:Be,depth:Ce,stencil:We};er.framebuffer=wn===null?wn:wn.get(),ae.gl.clear(er)},this.viewport=function(le){var Be=le.x,Ce=le.y,We=le.width,Ye=le.height;ae.gl._gl.viewport(Be,Ce,We,Ye),ae.width=We,ae.height=Ye,ae.gl._refresh()},this.readPixels=function(le){var Be=le.framebuffer,Ce=le.x,We=le.y,Ye=le.width,wn=le.height,er={x:Ce,y:We,width:Ye,height:wn};return Be&&(er.framebuffer=Be.get()),ae.gl.read(er)},this.getViewportSize=function(){return{width:ae.gl._gl.drawingBufferWidth,height:ae.gl._gl.drawingBufferHeight}},this.getContainer=function(){var le;return(le=ae.canvas)===null||le===void 0?void 0:le.parentElement},this.getCanvas=function(){return ae.canvas},this.getGLContext=function(){return ae.gl._gl},this.destroy=function(){ae.gl.destroy()}}return u()(Ht,[{key:"init",value:function(){var ae=h()(i.a.mark(function Be(Ce,We){var Ye=this;return i.a.wrap(function(er){for(;;)switch(er.prev=er.next){case 0:return this.canvas=Ce,er.next=3,new Promise(function(Lr,on){l()({canvas:Ye.canvas,attributes:{alpha:!0,antialias:We.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:We.preserveDrawingBuffer},extensions:["OES_element_index_uint","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(An,Bn){(An||!Bn)&&on(An),Lr(Bn)}})});case 3:this.gl=er.sent;case 4:case"end":return er.stop()}},Be,this)}));function le(Be,Ce){return ae.apply(this,arguments)}return le}()},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var le=this.getGLContext();le.disable(le.CULL_FACE)}},{key:"setDirty",value:function(le){this.isDirty=le}},{key:"getDirty",value:function(){return this.isDirty}}]),Ht}())||_t),Nt=R("Hel2");function $t(Ht,ae){var le=Object.keys(Ht);if(Object.getOwnPropertySymbols){var Be=Object.getOwnPropertySymbols(Ht);ae&&(Be=Be.filter(function(Ce){return Object.getOwnPropertyDescriptor(Ht,Ce).enumerable})),le.push.apply(le,Be)}return le}function ee(Ht){for(var ae=1;ae<arguments.length;ae++){var le=arguments[ae]!=null?arguments[ae]:{};ae%2?$t(Object(le),!0).forEach(function(Be){E()(Ht,Be,le[Be])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ht,Object.getOwnPropertyDescriptors(le)):$t(Object(le)).forEach(function(Be){Object.defineProperty(Ht,Be,Object.getOwnPropertyDescriptor(le,Be))})}return Ht}var Gt=function(){function Ht(ae){e()(this,Ht),this.sceneService=void 0,this.mapService=void 0,this.controlService=void 0,this.layerService=void 0,this.iconService=void 0,this.markerService=void 0,this.popupService=void 0,this.fontService=void 0,this.interactionService=void 0,this.container=void 0;var le=ae.id,Be=ae.map,Ce=Object(c.createSceneContainer)();this.container=Ce,Be.setContainer(Ce,le),Ce.bind(c.TYPES.IRendererService).to(yt).inSingletonScope(),this.sceneService=Ce.get(c.TYPES.ISceneService),this.mapService=Ce.get(c.TYPES.IMapService),this.iconService=Ce.get(c.TYPES.IIconService),this.fontService=Ce.get(c.TYPES.IFontService),this.controlService=Ce.get(c.TYPES.IControlService),this.layerService=Ce.get(c.TYPES.ILayerService),this.markerService=Ce.get(c.TYPES.IMarkerService),this.interactionService=Ce.get(c.TYPES.IInteractionService),this.popupService=Ce.get(c.TYPES.IPopupService),this.initComponent(le),this.sceneService.init(ae),this.initControl()}return u()(Ht,[{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"exportPng",value:function(le){return this.sceneService.exportPng(le)}},{key:"exportMap",value:function(le){return this.sceneService.exportPng(le)}},{key:"registerRenderService",value:function(le){var Be=this;if(this.sceneService.loaded){var Ce=new le(this);Ce.init()}else this.on("loaded",function(){var We=new le(Be);We.init()})}},{key:"map",get:function(){return this.mapService.map}},{key:"addLayer",value:function(le){var Be=Object(c.createLayerContainer)(this.container);le.setContainer(Be),this.sceneService.addLayer(le)}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(le){return this.layerService.getLayer(le)}},{key:"getLayerByName",value:function(le){return this.layerService.getLayerByName(le)}},{key:"removeLayer",value:function(le){this.layerService.remove(le)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"addImage",value:function(le,Be){this.iconService.addImage(le,Be)}},{key:"hasImage",value:function(le){return this.iconService.hasImage(le)}},{key:"removeImage",value:function(le){this.iconService.removeImage(le)}},{key:"addIconFontGlyphs",value:function(le,Be){this.fontService.addIconGlyphs(Be)}},{key:"addControl",value:function(le){this.controlService.addControl(le,this.container)}},{key:"removeControl",value:function(le){this.controlService.removeControl(le)}},{key:"getControlByName",value:function(le){return this.controlService.getControlByName(le)}},{key:"addMarker",value:function(le){this.markerService.addMarker(le)}},{key:"addMarkerLayer",value:function(le){this.markerService.addMarkerLayer(le)}},{key:"removeMarkerLayer",value:function(le){this.markerService.removeMarkerLayer(le)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(le){this.popupService.addPopup(le)}},{key:"on",value:function(le,Be){c.SceneEventList.indexOf(le)===-1?this.mapService.on(le,Be):this.sceneService.on(le,Be)}},{key:"off",value:function(le,Be){c.SceneEventList.indexOf(le)===-1?this.mapService.off(le,Be):this.sceneService.off(le,Be)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(le){return this.mapService.getCenter(le)}},{key:"setCenter",value:function(le,Be){return this.mapService.setCenter(le,Be)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(le){return this.mapService.setPitch(le)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(le){this.mapService.setRotation(le)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(le){this.mapService.panTo(le)}},{key:"panBy",value:function(le){this.mapService.panBy(le)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(le){this.mapService.setZoom(le)}},{key:"fitBounds",value:function(le,Be){var Ce=this.sceneService.getSceneConfig(),We=Ce.fitBoundsOptions,Ye=Ce.animate;this.mapService.fitBounds(le,Be||ee(ee({},We),{},{animate:Ye}))}},{key:"setZoomAndCenter",value:function(le,Be){this.mapService.setZoomAndCenter(le,Be)}},{key:"setMapStyle",value:function(le){this.mapService.setMapStyle(le)}},{key:"setMapStatus",value:function(le){this.mapService.setMapStatus(le)}},{key:"pixelToLngLat",value:function(le){return this.mapService.pixelToLngLat(le)}},{key:"lngLatToPixel",value:function(le){return this.mapService.lngLatToPixel(le)}},{key:"containerToLngLat",value:function(le){return this.mapService.containerToLngLat(le)}},{key:"lngLatToContainer",value:function(le){return this.mapService.lngLatToContainer(le)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(le,Be){this.container.bind(c.TYPES.IPostProcessingPass).to(le).whenTargetNamed(Be)}},{key:"initComponent",value:function(le){this.controlService.init({container:Nt.a.getContainer(le)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var le=this.sceneService.getSceneConfig(),Be=le.logoVisible,Ce=le.logoPosition;Be&&this.addControl(new s.b({position:Ce}))}}]),Ht}()},l94r:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return rt});var V=R("lSNA"),E=R.n(V),T=R("lwsE"),e=R.n(T),t=R("W8MJ"),u=R.n(t),s=R("7W2i"),c=R.n(s),r=R("a1gu"),h=R.n(r),n=R("Nsbk"),i=R.n(n),a=R("JBE3"),o=R.n(a),l=R("4qC0"),f=R.n(l),v=R("lSCD"),b=R.n(v),g=R("BkRI"),m=R.n(g),_=R("xp6e"),M=R("Hel2"),x=R("uhBA"),y=R("rlAn"),S=R("qxNg");function P(vt){if(vt.length===0)throw new Error("max requires at least one data point");for(var mt=vt[0],ut=1;ut<vt.length;ut++)vt[ut]>mt&&(mt=vt[ut]);return mt}function A(vt){if(vt.length===0)throw new Error("min requires at least one data point");for(var mt=vt[0],ut=1;ut<vt.length;ut++)vt[ut]<mt&&(mt=vt[ut]);return mt}function O(vt){if(vt.length===0)return 0;for(var mt=vt[0],ut=0,Rt,Ft=1;Ft<vt.length;Ft++)Rt=mt+vt[Ft]*1,Math.abs(mt)>=Math.abs(vt[Ft])?ut+=mt-Rt+vt[Ft]:ut+=vt[Ft]-Rt+mt,mt=Rt;return mt+ut*1}function L(vt){if(vt.length===0)throw new Error("mean requires at least one data point");return O(vt)/vt.length}var H={min:A,max:P,mean:L,sum:O};function F(vt,mt){return vt.map(function(ut){return ut[mt]*1})}function K(vt,mt){var ut=Object.keys(vt);if(Object.getOwnPropertySymbols){var Rt=Object.getOwnPropertySymbols(vt);mt&&(Rt=Rt.filter(function(Ft){return Object.getOwnPropertyDescriptor(vt,Ft).enumerable})),ut.push.apply(ut,Rt)}return ut}function G(vt){for(var mt=1;mt<arguments.length;mt++){var ut=arguments[mt]!=null?arguments[mt]:{};mt%2?K(Object(ut),!0).forEach(function(Rt){E()(vt,Rt,ut[Rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(vt,Object.getOwnPropertyDescriptors(ut)):K(Object(ut)).forEach(function(Rt){Object.defineProperty(vt,Rt,Object.getOwnPropertyDescriptor(ut,Rt))})}return vt}function U(vt){var mt=Z();return function(){var Rt=i()(vt),Ft;if(mt){var wt=i()(this).constructor;Ft=Reflect.construct(Rt,arguments,wt)}else Ft=Rt.apply(this,arguments);return h()(this,Ft)}}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(vt){return!1}}function J(vt,mt){if(Array.isArray(mt))return mt}var rt=function(vt){c()(ut,vt);var mt=U(ut);function ut(Rt,Ft){var wt;return e()(this,ut),wt=mt.call(this),wt.data=void 0,wt.extent=void 0,wt.hooks={init:new _.c},wt.parser={type:"geojson"},wt.transforms=[],wt.cluster=!1,wt.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},wt.invalidExtent=!1,wt.originData=void 0,wt.rawData=void 0,wt.cfg={},wt.clusterIndex=void 0,wt.originData=Rt,wt.initCfg(Ft),wt.hooks.init.tap("parser",function(){wt.excuteParser()}),wt.hooks.init.tap("cluster",function(){wt.initCluster()}),wt.hooks.init.tap("transform",function(){wt.executeTrans()}),wt.init(),wt}return u()(ut,[{key:"setData",value:function(Ft,wt){this.rawData=Ft,this.originData=Ft,this.initCfg(wt),this.init(),this.emit("update")}},{key:"getClusters",value:function(Ft){return this.clusterIndex.getClusters(this.caculClusterExtent(2),Ft)}},{key:"getClustersLeaves",value:function(Ft){return this.clusterIndex.getLeaves(Ft,Infinity)}},{key:"updateClusterData",value:function(Ft){var wt=this,Mt=this.clusterOptions,St=Mt.method,At=St===void 0?"sum":St,nt=Mt.field,Pt=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(Ft));this.clusterOptions.zoom=Ft,Pt.forEach(function(z){z.id||(z.properties.point_count=1)}),(nt||b()(At))&&(Pt=Pt.map(function(z){var q=z.id;if(q){var gt=wt.clusterIndex.getLeaves(q,Infinity),et=gt.map(function(k){return k.properties}),at;if(f()(At)&&nt){var xt=F(et,nt);at=H[At](xt)}b()(At)&&(at=At(et)),z.properties.stat=at}else z.properties.point_count=1;return z})),this.data=Object(y.getParser)("geojson")({type:"FeatureCollection",features:Pt}),this.executeTrans()}},{key:"getFeatureById",value:function(Ft){var wt=this.parser.type,Mt=wt===void 0?"geojson":wt;if(Mt==="geojson"&&!this.cluster){var St=Ft<this.originData.features.length?this.originData.features[Ft]:"null",At=m()(St);if(this.transforms.length!==0){var nt=this.data.dataArray.find(function(Pt){return Pt._id===Ft});At.properties=nt}return At}else return Ft<this.data.dataArray.length?this.data.dataArray[Ft]:"null"}},{key:"getFeatureId",value:function(Ft,wt){var Mt=this.data.dataArray.find(function(St){return St[Ft]===name});return Mt==null?void 0:Mt._id}},{key:"destroy",value:function(){this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null}},{key:"caculClusterExtent",value:function(Ft){var wt=[[-Infinity,-Infinity],[Infinity,Infinity]];return this.invalidExtent||(wt=Object(M.r)(Object(M.h)(this.extent),Ft)),wt[0].concat(wt[1])}},{key:"initCfg",value:function(Ft){this.cfg=o()(this.cfg,Ft,J);var wt=this.cfg;wt&&(wt.parser&&(this.parser=wt.parser),wt.transforms&&(this.transforms=wt.transforms),this.cluster=wt.cluster||!1,wt.clusterOptions&&(this.cluster=!0,this.clusterOptions=G(G({},this.clusterOptions),wt.clusterOptions)))}},{key:"excuteParser",value:function(){var Ft=this.parser,wt=Ft.type||"geojson",Mt=Object(y.getParser)(wt);this.data=Mt(this.originData,Ft),this.extent=Object(M.m)(this.data.dataArray),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3]}},{key:"executeTrans",value:function(){var Ft=this,wt=this.transforms;wt.forEach(function(Mt){var St=Mt.type,At=Object(y.getTransform)(St)(Ft.data,Mt);Object.assign(Ft.data,At)})}},{key:"initCluster",value:function(){if(!!this.cluster){var Ft=this.clusterOptions||{};this.clusterIndex=Object(S.a)(this.data,Ft)}}},{key:"init",value:function(){this.hooks.init.call(this)}}]),ut}(x.EventEmitter)},lJbI:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return V});function V(E,T){var e=T.extent,t=T.width,u=T.height,s=T.min,c=T.max,r={_id:1,dataArray:[{_id:1,data:Array.from(E),width:t,height:u,min:s,max:c,coordinates:[[e[0],e[1]],[e[2],e[3]]]}]};return r}},lT4e:function(_e,dt,R){"use strict";var V=R("MgzW"),E={},T=function(i){};function e(n,i,a,o,l,f,v,b){if(T(i),!n){var g;if(i===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var m=[a,o,l,f,v,b],_=0;g=new Error(i.replace(/%s/g,function(){return m[_++]})),g.name="Invariant Violation"}throw g.framesToPop=1,g}}var t=function(){};if(!1)var u;var s="mixins";function c(n){return n}var r;r={};function h(n,i,a){var o=[],l={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},f={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},v={displayName:function(G,U){G.displayName=U},mixins:function(G,U){if(U)for(var Z=0;Z<U.length;Z++)m(G,U[Z])},childContextTypes:function(G,U){G.childContextTypes=V({},G.childContextTypes,U)},contextTypes:function(G,U){G.contextTypes=V({},G.contextTypes,U)},getDefaultProps:function(G,U){G.getDefaultProps?G.getDefaultProps=x(G.getDefaultProps,U):G.getDefaultProps=U},propTypes:function(G,U){G.propTypes=V({},G.propTypes,U)},statics:function(G,U){_(G,U)},autobind:function(){}};function b(K,G,U){for(var Z in G)G.hasOwnProperty(Z)}function g(K,G){var U=l.hasOwnProperty(G)?l[G]:null;L.hasOwnProperty(G)&&e(U==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",G),K&&e(U==="DEFINE_MANY"||U==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",G)}function m(K,G){if(!G){if(!1)var U,Z;return}e(typeof G!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),e(!i(G),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var J=K.prototype,rt=J.__reactAutoBindPairs;G.hasOwnProperty(s)&&v.mixins(K,G.mixins);for(var vt in G)if(!!G.hasOwnProperty(vt)&&vt!==s){var mt=G[vt],ut=J.hasOwnProperty(vt);if(g(ut,vt),v.hasOwnProperty(vt))v[vt](K,mt);else{var Rt=l.hasOwnProperty(vt),Ft=typeof mt=="function",wt=Ft&&!Rt&&!ut&&G.autobind!==!1;if(wt)rt.push(vt,mt),J[vt]=mt;else if(ut){var Mt=l[vt];e(Rt&&(Mt==="DEFINE_MANY_MERGED"||Mt==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",Mt,vt),Mt==="DEFINE_MANY_MERGED"?J[vt]=x(J[vt],mt):Mt==="DEFINE_MANY"&&(J[vt]=y(J[vt],mt))}else J[vt]=mt}}}function _(K,G){if(!!G)for(var U in G){var Z=G[U];if(!!G.hasOwnProperty(U)){var J=U in v;e(!J,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',U);var rt=U in K;if(rt){var vt=f.hasOwnProperty(U)?f[U]:null;e(vt==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",U),K[U]=x(K[U],Z);return}K[U]=Z}}}function M(K,G){e(K&&G&&typeof K=="object"&&typeof G=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var U in G)G.hasOwnProperty(U)&&(e(K[U]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",U),K[U]=G[U]);return K}function x(K,G){return function(){var Z=K.apply(this,arguments),J=G.apply(this,arguments);if(Z==null)return J;if(J==null)return Z;var rt={};return M(rt,Z),M(rt,J),rt}}function y(K,G){return function(){K.apply(this,arguments),G.apply(this,arguments)}}function S(K,G){var U=G.bind(K);if(!1)var Z,J;return U}function P(K){for(var G=K.__reactAutoBindPairs,U=0;U<G.length;U+=2){var Z=G[U],J=G[U+1];K[Z]=S(K,J)}}var A={componentDidMount:function(){this.__isMounted=!0}},O={componentWillUnmount:function(){this.__isMounted=!1}},L={replaceState:function(G,U){this.updater.enqueueReplaceState(this,G,U)},isMounted:function(){return!!this.__isMounted}},H=function(){};V(H.prototype,n.prototype,L);function F(K){var G=c(function(Z,J,rt){this.__reactAutoBindPairs.length&&P(this),this.props=Z,this.context=J,this.refs=E,this.updater=rt||a,this.state=null;var vt=this.getInitialState?this.getInitialState():null;e(typeof vt=="object"&&!Array.isArray(vt),"%s.getInitialState(): must return an object or null",G.displayName||"ReactCompositeComponent"),this.state=vt});G.prototype=new H,G.prototype.constructor=G,G.prototype.__reactAutoBindPairs=[],o.forEach(m.bind(null,G)),m(G,A),m(G,K),m(G,O),G.getDefaultProps&&(G.defaultProps=G.getDefaultProps()),e(G.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var U in l)G.prototype[U]||(G.prototype[U]=null);return G}return F}_e.exports=h},lnY3:function(_e,dt,R){},lwsE:function(_e,dt){function R(V,E){if(!(V instanceof E))throw new TypeError("Cannot call a class as a function")}_e.exports=R,_e.exports.default=_e.exports,_e.exports.__esModule=!0},mNvP:function(_e,dt,R){(function(V,E){/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var T;(function(e){(function(t){var u=typeof E=="object"?E:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),s=c(e);typeof u.Reflect=="undefined"?u.Reflect=e:s=c(u.Reflect,s),t(s);function c(r,h){return function(n,i){typeof r[n]!="function"&&Object.defineProperty(r,n,{configurable:!0,writable:!0,value:i}),h&&h(n,i)}}})(function(t){var u=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",c=s&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",r=s&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",h=typeof Object.create=="function",n={__proto__:[]}instanceof Array,i=!h&&!n,a={create:h?function(){return ee(Object.create(null))}:n?function(){return ee({__proto__:null})}:function(){return ee({})},has:i?function(Gt,Ht){return u.call(Gt,Ht)}:function(Gt,Ht){return Ht in Gt},get:i?function(Gt,Ht){return u.call(Gt,Ht)?Gt[Ht]:void 0}:function(Gt,Ht){return Gt[Ht]}},o=Object.getPrototypeOf(Function),l=typeof V=="object"&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).REFLECT_METADATA_USE_MAP_POLYFILL==="true",f=!l&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:yt(),v=!l&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Nt(),b=!l&&typeof WeakMap=="function"?WeakMap:$t(),g=new b;function m(Gt,Ht,ae,le){if(Rt(ae)){if(!q(Gt))throw new TypeError;if(!et(Ht))throw new TypeError;return H(Gt,Ht)}else{if(!q(Gt))throw new TypeError;if(!Mt(Ht))throw new TypeError;if(!Mt(le)&&!Rt(le)&&!Ft(le))throw new TypeError;return Ft(le)&&(le=void 0),ae=z(ae),F(Gt,Ht,ae,le)}}t("decorate",m);function _(Gt,Ht){function ae(le,Be){if(!Mt(le))throw new TypeError;if(!Rt(Be)&&!at(Be))throw new TypeError;rt(Gt,Ht,le,Be)}return ae}t("metadata",_);function M(Gt,Ht,ae,le){if(!Mt(ae))throw new TypeError;return Rt(le)||(le=z(le)),rt(Gt,Ht,ae,le)}t("defineMetadata",M);function x(Gt,Ht,ae){if(!Mt(Ht))throw new TypeError;return Rt(ae)||(ae=z(ae)),G(Gt,Ht,ae)}t("hasMetadata",x);function y(Gt,Ht,ae){if(!Mt(Ht))throw new TypeError;return Rt(ae)||(ae=z(ae)),U(Gt,Ht,ae)}t("hasOwnMetadata",y);function S(Gt,Ht,ae){if(!Mt(Ht))throw new TypeError;return Rt(ae)||(ae=z(ae)),Z(Gt,Ht,ae)}t("getMetadata",S);function P(Gt,Ht,ae){if(!Mt(Ht))throw new TypeError;return Rt(ae)||(ae=z(ae)),J(Gt,Ht,ae)}t("getOwnMetadata",P);function A(Gt,Ht){if(!Mt(Gt))throw new TypeError;return Rt(Ht)||(Ht=z(Ht)),vt(Gt,Ht)}t("getMetadataKeys",A);function O(Gt,Ht){if(!Mt(Gt))throw new TypeError;return Rt(Ht)||(Ht=z(Ht)),mt(Gt,Ht)}t("getOwnMetadataKeys",O);function L(Gt,Ht,ae){if(!Mt(Ht))throw new TypeError;Rt(ae)||(ae=z(ae));var le=K(Ht,ae,!1);if(Rt(le)||!le.delete(Gt))return!1;if(le.size>0)return!0;var Be=g.get(Ht);return Be.delete(ae),Be.size>0||g.delete(Ht),!0}t("deleteMetadata",L);function H(Gt,Ht){for(var ae=Gt.length-1;ae>=0;--ae){var le=Gt[ae],Be=le(Ht);if(!Rt(Be)&&!Ft(Be)){if(!et(Be))throw new TypeError;Ht=Be}}return Ht}function F(Gt,Ht,ae,le){for(var Be=Gt.length-1;Be>=0;--Be){var Ce=Gt[Be],We=Ce(Ht,ae,le);if(!Rt(We)&&!Ft(We)){if(!Mt(We))throw new TypeError;le=We}}return le}function K(Gt,Ht,ae){var le=g.get(Gt);if(Rt(le)){if(!ae)return;le=new f,g.set(Gt,le)}var Be=le.get(Ht);if(Rt(Be)){if(!ae)return;Be=new f,le.set(Ht,Be)}return Be}function G(Gt,Ht,ae){var le=U(Gt,Ht,ae);if(le)return!0;var Be=_t(Ht);return Ft(Be)?!1:G(Gt,Be,ae)}function U(Gt,Ht,ae){var le=K(Ht,ae,!1);return Rt(le)?!1:nt(le.has(Gt))}function Z(Gt,Ht,ae){var le=U(Gt,Ht,ae);if(le)return J(Gt,Ht,ae);var Be=_t(Ht);if(!Ft(Be))return Z(Gt,Be,ae)}function J(Gt,Ht,ae){var le=K(Ht,ae,!1);if(!Rt(le))return le.get(Gt)}function rt(Gt,Ht,ae,le){var Be=K(ae,le,!0);Be.set(Gt,Ht)}function vt(Gt,Ht){var ae=mt(Gt,Ht),le=_t(Gt);if(le===null)return ae;var Be=vt(le,Ht);if(Be.length<=0)return ae;if(ae.length<=0)return Be;for(var Ce=new v,We=[],Ye=0,wn=ae;Ye<wn.length;Ye++){var er=wn[Ye],Lr=Ce.has(er);Lr||(Ce.add(er),We.push(er))}for(var on=0,en=Be;on<en.length;on++){var er=en[on],Lr=Ce.has(er);Lr||(Ce.add(er),We.push(er))}return We}function mt(Gt,Ht){var ae=[],le=K(Gt,Ht,!1);if(Rt(le))return ae;for(var Be=le.keys(),Ce=k(Be),We=0;;){var Ye=it(Ce);if(!Ye)return ae.length=We,ae;var wn=ot(Ye);try{ae[We]=wn}catch(er){try{$(Ce)}finally{throw er}}We++}}function ut(Gt){if(Gt===null)return 1;switch(typeof Gt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Gt===null?1:6;default:return 6}}function Rt(Gt){return Gt===void 0}function Ft(Gt){return Gt===null}function wt(Gt){return typeof Gt=="symbol"}function Mt(Gt){return typeof Gt=="object"?Gt!==null:typeof Gt=="function"}function St(Gt,Ht){switch(ut(Gt)){case 0:return Gt;case 1:return Gt;case 2:return Gt;case 3:return Gt;case 4:return Gt;case 5:return Gt}var ae=Ht===3?"string":Ht===5?"number":"default",le=xt(Gt,c);if(le!==void 0){var Be=le.call(Gt,ae);if(Mt(Be))throw new TypeError;return Be}return At(Gt,ae==="default"?"number":ae)}function At(Gt,Ht){if(Ht==="string"){var ae=Gt.toString;if(gt(ae)){var le=ae.call(Gt);if(!Mt(le))return le}var Be=Gt.valueOf;if(gt(Be)){var le=Be.call(Gt);if(!Mt(le))return le}}else{var Be=Gt.valueOf;if(gt(Be)){var le=Be.call(Gt);if(!Mt(le))return le}var Ce=Gt.toString;if(gt(Ce)){var le=Ce.call(Gt);if(!Mt(le))return le}}throw new TypeError}function nt(Gt){return!!Gt}function Pt(Gt){return""+Gt}function z(Gt){var Ht=St(Gt,3);return wt(Ht)?Ht:Pt(Ht)}function q(Gt){return Array.isArray?Array.isArray(Gt):Gt instanceof Object?Gt instanceof Array:Object.prototype.toString.call(Gt)==="[object Array]"}function gt(Gt){return typeof Gt=="function"}function et(Gt){return typeof Gt=="function"}function at(Gt){switch(ut(Gt)){case 3:return!0;case 4:return!0;default:return!1}}function xt(Gt,Ht){var ae=Gt[Ht];if(ae!=null){if(!gt(ae))throw new TypeError;return ae}}function k(Gt){var Ht=xt(Gt,r);if(!gt(Ht))throw new TypeError;var ae=Ht.call(Gt);if(!Mt(ae))throw new TypeError;return ae}function ot(Gt){return Gt.value}function it(Gt){var Ht=Gt.next();return Ht.done?!1:Ht}function $(Gt){var Ht=Gt.return;Ht&&Ht.call(Gt)}function _t(Gt){var Ht=Object.getPrototypeOf(Gt);if(typeof Gt!="function"||Gt===o||Ht!==o)return Ht;var ae=Gt.prototype,le=ae&&Object.getPrototypeOf(ae);if(le==null||le===Object.prototype)return Ht;var Be=le.constructor;return typeof Be!="function"||Be===Gt?Ht:Be}function yt(){var Gt={},Ht=[],ae=function(){function We(Ye,wn,er){this._index=0,this._keys=Ye,this._values=wn,this._selector=er}return We.prototype["@@iterator"]=function(){return this},We.prototype[r]=function(){return this},We.prototype.next=function(){var Ye=this._index;if(Ye>=0&&Ye<this._keys.length){var wn=this._selector(this._keys[Ye],this._values[Ye]);return Ye+1>=this._keys.length?(this._index=-1,this._keys=Ht,this._values=Ht):this._index++,{value:wn,done:!1}}return{value:void 0,done:!0}},We.prototype.throw=function(Ye){throw this._index>=0&&(this._index=-1,this._keys=Ht,this._values=Ht),Ye},We.prototype.return=function(Ye){return this._index>=0&&(this._index=-1,this._keys=Ht,this._values=Ht),{value:Ye,done:!0}},We}();return function(){function We(){this._keys=[],this._values=[],this._cacheKey=Gt,this._cacheIndex=-2}return Object.defineProperty(We.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),We.prototype.has=function(Ye){return this._find(Ye,!1)>=0},We.prototype.get=function(Ye){var wn=this._find(Ye,!1);return wn>=0?this._values[wn]:void 0},We.prototype.set=function(Ye,wn){var er=this._find(Ye,!0);return this._values[er]=wn,this},We.prototype.delete=function(Ye){var wn=this._find(Ye,!1);if(wn>=0){for(var er=this._keys.length,Lr=wn+1;Lr<er;Lr++)this._keys[Lr-1]=this._keys[Lr],this._values[Lr-1]=this._values[Lr];return this._keys.length--,this._values.length--,Ye===this._cacheKey&&(this._cacheKey=Gt,this._cacheIndex=-2),!0}return!1},We.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Gt,this._cacheIndex=-2},We.prototype.keys=function(){return new ae(this._keys,this._values,le)},We.prototype.values=function(){return new ae(this._keys,this._values,Be)},We.prototype.entries=function(){return new ae(this._keys,this._values,Ce)},We.prototype["@@iterator"]=function(){return this.entries()},We.prototype[r]=function(){return this.entries()},We.prototype._find=function(Ye,wn){return this._cacheKey!==Ye&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Ye)),this._cacheIndex<0&&wn&&(this._cacheIndex=this._keys.length,this._keys.push(Ye),this._values.push(void 0)),this._cacheIndex},We}();function le(We,Ye){return We}function Be(We,Ye){return Ye}function Ce(We,Ye){return[We,Ye]}}function Nt(){return function(){function Gt(){this._map=new f}return Object.defineProperty(Gt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Gt.prototype.has=function(Ht){return this._map.has(Ht)},Gt.prototype.add=function(Ht){return this._map.set(Ht,Ht),this},Gt.prototype.delete=function(Ht){return this._map.delete(Ht)},Gt.prototype.clear=function(){this._map.clear()},Gt.prototype.keys=function(){return this._map.keys()},Gt.prototype.values=function(){return this._map.values()},Gt.prototype.entries=function(){return this._map.entries()},Gt.prototype["@@iterator"]=function(){return this.keys()},Gt.prototype[r]=function(){return this.keys()},Gt}()}function $t(){var Gt=16,Ht=a.create(),ae=le();return function(){function wn(){this._key=le()}return wn.prototype.has=function(er){var Lr=Be(er,!1);return Lr!==void 0?a.has(Lr,this._key):!1},wn.prototype.get=function(er){var Lr=Be(er,!1);return Lr!==void 0?a.get(Lr,this._key):void 0},wn.prototype.set=function(er,Lr){var on=Be(er,!0);return on[this._key]=Lr,this},wn.prototype.delete=function(er){var Lr=Be(er,!1);return Lr!==void 0?delete Lr[this._key]:!1},wn.prototype.clear=function(){this._key=le()},wn}();function le(){var wn;do wn="@@WeakMap@@"+Ye();while(a.has(Ht,wn));return Ht[wn]=!0,wn}function Be(wn,er){if(!u.call(wn,ae)){if(!er)return;Object.defineProperty(wn,ae,{value:a.create()})}return wn[ae]}function Ce(wn,er){for(var Lr=0;Lr<er;++Lr)wn[Lr]=Math.random()*255|0;return wn}function We(wn){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(wn)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(wn)):Ce(new Uint8Array(wn),wn):Ce(new Array(wn),wn)}function Ye(){var wn=We(Gt);wn[6]=wn[6]&79|64,wn[8]=wn[8]&191|128;for(var er="",Lr=0;Lr<Gt;++Lr){var on=wn[Lr];(Lr===4||Lr===6||Lr===8)&&(er+="-"),on<16&&(er+="0"),er+=on.toString(16).toLowerCase()}return er}}function ee(Gt){return Gt.__=void 0,delete Gt.__,Gt}})})(T||(T={}))}).call(this,R("Q2Ig"),R("IyRk"))},mTTR:function(_e,dt,R){var V=R("b80T"),E=R("QcOe"),T=R("MMmD");function e(t){return T(t)?V(t,!0):E(t)}_e.exports=e},mc0g:function(_e,dt){function R(V){return function(E,T,e){for(var t=-1,u=Object(E),s=e(E),c=s.length;c--;){var r=s[V?c:++t];if(T(u[r],r,u)===!1)break}return E}}_e.exports=R},mhV4:function(_e,dt,R){var V=R("ZK94");_e.exports.geometry=E,_e.exports.ring=e;function E(u){var s=0,c;switch(u.type){case"Polygon":return T(u.coordinates);case"MultiPolygon":for(c=0;c<u.coordinates.length;c++)s+=T(u.coordinates[c]);return s;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(c=0;c<u.geometries.length;c++)s+=E(u.geometries[c]);return s}}function T(u){var s=0;if(u&&u.length>0){s+=Math.abs(e(u[0]));for(var c=1;c<u.length;c++)s-=Math.abs(e(u[c]))}return s}function e(u){var s,c,r,h,n,i,a,o=0,l=u.length;if(l>2){for(a=0;a<l;a++)a===l-2?(h=l-2,n=l-1,i=0):a===l-1?(h=l-1,n=0,i=1):(h=a,n=a+1,i=a+2),s=u[h],c=u[n],r=u[i],o+=(t(r[0])-t(s[0]))*Math.sin(t(c[1]));o=o*V.RADIUS*V.RADIUS/2}return o}function t(u){return u*Math.PI/180}},mpbz:function(_e,dt,R){(function(V,E){_e.exports=E()})(this,function(){"use strict";function V(S,P,A,O,L,H){if(!(L-O<=A)){var F=O+L>>1;E(S,P,F,O,L,H%2),V(S,P,A,O,F-1,H+1),V(S,P,A,F+1,L,H+1)}}function E(S,P,A,O,L,H){for(;L>O;){if(L-O>600){var F=L-O+1,K=A-O+1,G=Math.log(F),U=.5*Math.exp(2*G/3),Z=.5*Math.sqrt(G*U*(F-U)/F)*(K-F/2<0?-1:1),J=Math.max(O,Math.floor(A-K*U/F+Z)),rt=Math.min(L,Math.floor(A+(F-K)*U/F+Z));E(S,P,A,J,rt,H)}var vt=P[2*A+H],mt=O,ut=L;for(T(S,P,O,A),P[2*L+H]>vt&&T(S,P,O,L);mt<ut;){for(T(S,P,mt,ut),mt++,ut--;P[2*mt+H]<vt;)mt++;for(;P[2*ut+H]>vt;)ut--}P[2*O+H]===vt?T(S,P,O,ut):(ut++,T(S,P,ut,L)),ut<=A&&(O=ut+1),A<=ut&&(L=ut-1)}}function T(S,P,A,O){e(S,A,O),e(P,2*A,2*O),e(P,2*A+1,2*O+1)}function e(S,P,A){var O=S[P];S[P]=S[A],S[A]=O}function t(S,P,A,O,L,H,F){for(var K=[0,S.length-1,0],G=[],U,Z;K.length;){var J=K.pop(),rt=K.pop(),vt=K.pop();if(rt-vt<=F){for(var mt=vt;mt<=rt;mt++)U=P[2*mt],Z=P[2*mt+1],U>=A&&U<=L&&Z>=O&&Z<=H&&G.push(S[mt]);continue}var ut=Math.floor((vt+rt)/2);U=P[2*ut],Z=P[2*ut+1],U>=A&&U<=L&&Z>=O&&Z<=H&&G.push(S[ut]);var Rt=(J+1)%2;(J===0?A<=U:O<=Z)&&(K.push(vt),K.push(ut-1),K.push(Rt)),(J===0?L>=U:H>=Z)&&(K.push(ut+1),K.push(rt),K.push(Rt))}return G}function u(S,P,A,O,L,H){for(var F=[0,S.length-1,0],K=[],G=L*L;F.length;){var U=F.pop(),Z=F.pop(),J=F.pop();if(Z-J<=H){for(var rt=J;rt<=Z;rt++)s(P[2*rt],P[2*rt+1],A,O)<=G&&K.push(S[rt]);continue}var vt=Math.floor((J+Z)/2),mt=P[2*vt],ut=P[2*vt+1];s(mt,ut,A,O)<=G&&K.push(S[vt]);var Rt=(U+1)%2;(U===0?A-L<=mt:O-L<=ut)&&(F.push(J),F.push(vt-1),F.push(Rt)),(U===0?A+L>=mt:O+L>=ut)&&(F.push(vt+1),F.push(Z),F.push(Rt))}return K}function s(S,P,A,O){var L=S-A,H=P-O;return L*L+H*H}var c=function(P){return P[0]},r=function(P){return P[1]},h=function(P,A,O,L,H){A===void 0&&(A=c),O===void 0&&(O=r),L===void 0&&(L=64),H===void 0&&(H=Float64Array),this.nodeSize=L,this.points=P;for(var F=P.length<65536?Uint16Array:Uint32Array,K=this.ids=new F(P.length),G=this.coords=new H(P.length*2),U=0;U<P.length;U++)K[U]=U,G[2*U]=A(P[U]),G[2*U+1]=O(P[U]);V(K,G,L,0,K.length-1,0)};h.prototype.range=function(P,A,O,L){return t(this.ids,this.coords,P,A,O,L,this.nodeSize)},h.prototype.within=function(P,A,O){return u(this.ids,this.coords,P,A,O,this.nodeSize)};var n={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(P){return P}},i=Math.fround||function(S){return function(P){return S[0]=+P,S[0]}}(new Float32Array(1)),a=function(P){this.options=M(Object.create(n),P),this.trees=new Array(this.options.maxZoom+1)};a.prototype.load=function(P){var A=this.options,O=A.log,L=A.minZoom,H=A.maxZoom,F=A.nodeSize;O&&console.time("total time");var K="prepare "+P.length+" points";O&&console.time(K),this.points=P;for(var G=[],U=0;U<P.length;U++)!P[U].geometry||G.push(l(P[U],U));this.trees[H+1]=new h(G,x,y,F,Float32Array),O&&console.timeEnd(K);for(var Z=H;Z>=L;Z--){var J=+Date.now();G=this._cluster(G,Z),this.trees[Z]=new h(G,x,y,F,Float32Array),O&&console.log("z%d: %d clusters in %dms",Z,G.length,+Date.now()-J)}return O&&console.timeEnd("total time"),this},a.prototype.getClusters=function(P,A){var O=((P[0]+180)%360+360)%360-180,L=Math.max(-90,Math.min(90,P[1])),H=P[2]===180?180:((P[2]+180)%360+360)%360-180,F=Math.max(-90,Math.min(90,P[3]));if(P[2]-P[0]>=360)O=-180,H=180;else if(O>H){var K=this.getClusters([O,L,180,F],A),G=this.getClusters([-180,L,H,F],A);return K.concat(G)}for(var U=this.trees[this._limitZoom(A)],Z=U.range(b(O),g(F),b(H),g(L)),J=[],rt=0,vt=Z;rt<vt.length;rt+=1){var mt=vt[rt],ut=U.points[mt];J.push(ut.numPoints?f(ut):this.points[ut.index])}return J},a.prototype.getChildren=function(P){var A=this._getOriginId(P),O=this._getOriginZoom(P),L="No cluster with the specified id.",H=this.trees[O];if(!H)throw new Error(L);var F=H.points[A];if(!F)throw new Error(L);for(var K=this.options.radius/(this.options.extent*Math.pow(2,O-1)),G=H.within(F.x,F.y,K),U=[],Z=0,J=G;Z<J.length;Z+=1){var rt=J[Z],vt=H.points[rt];vt.parentId===P&&U.push(vt.numPoints?f(vt):this.points[vt.index])}if(U.length===0)throw new Error(L);return U},a.prototype.getLeaves=function(P,A,O){A=A||10,O=O||0;var L=[];return this._appendLeaves(L,P,A,O,0),L},a.prototype.getTile=function(P,A,O){var L=this.trees[this._limitZoom(P)],H=Math.pow(2,P),F=this.options,K=F.extent,G=F.radius,U=G/K,Z=(O-U)/H,J=(O+1+U)/H,rt={features:[]};return this._addTileFeatures(L.range((A-U)/H,Z,(A+1+U)/H,J),L.points,A,O,H,rt),A===0&&this._addTileFeatures(L.range(1-U/H,Z,1,J),L.points,H,O,H,rt),A===H-1&&this._addTileFeatures(L.range(0,Z,U/H,J),L.points,-1,O,H,rt),rt.features.length?rt:null},a.prototype.getClusterExpansionZoom=function(P){for(var A=this._getOriginZoom(P)-1;A<=this.options.maxZoom;){var O=this.getChildren(P);if(A++,O.length!==1)break;P=O[0].properties.cluster_id}return A},a.prototype._appendLeaves=function(P,A,O,L,H){for(var F=this.getChildren(A),K=0,G=F;K<G.length;K+=1){var U=G[K],Z=U.properties;if(Z&&Z.cluster?H+Z.point_count<=L?H+=Z.point_count:H=this._appendLeaves(P,Z.cluster_id,O,L,H):H<L?H++:P.push(U),P.length===O)break}return H},a.prototype._addTileFeatures=function(P,A,O,L,H,F){for(var K=0,G=P;K<G.length;K+=1){var U=G[K],Z=A[U],J=Z.numPoints,rt=void 0,vt=void 0,mt=void 0;if(J)rt=v(Z),vt=Z.x,mt=Z.y;else{var ut=this.points[Z.index];rt=ut.properties,vt=b(ut.geometry.coordinates[0]),mt=g(ut.geometry.coordinates[1])}var Rt={type:1,geometry:[[Math.round(this.options.extent*(vt*H-O)),Math.round(this.options.extent*(mt*H-L))]],tags:rt},Ft=void 0;J?Ft=Z.id:this.options.generateId?Ft=Z.index:this.points[Z.index].id&&(Ft=this.points[Z.index].id),Ft!==void 0&&(Rt.id=Ft),F.features.push(Rt)}},a.prototype._limitZoom=function(P){return Math.max(this.options.minZoom,Math.min(+P,this.options.maxZoom+1))},a.prototype._cluster=function(P,A){for(var O=[],L=this.options,H=L.radius,F=L.extent,K=L.reduce,G=L.minPoints,U=H/(F*Math.pow(2,A)),Z=0;Z<P.length;Z++){var J=P[Z];if(!(J.zoom<=A)){J.zoom=A;for(var rt=this.trees[A+1],vt=rt.within(J.x,J.y,U),mt=J.numPoints||1,ut=mt,Rt=0,Ft=vt;Rt<Ft.length;Rt+=1){var wt=Ft[Rt],Mt=rt.points[wt];Mt.zoom>A&&(ut+=Mt.numPoints||1)}if(ut>=G){for(var St=J.x*mt,At=J.y*mt,nt=K&&mt>1?this._map(J,!0):null,Pt=(Z<<5)+(A+1)+this.points.length,z=0,q=vt;z<q.length;z+=1){var gt=q[z],et=rt.points[gt];if(!(et.zoom<=A)){et.zoom=A;var at=et.numPoints||1;St+=et.x*at,At+=et.y*at,et.parentId=Pt,K&&(nt||(nt=this._map(J,!0)),K(nt,this._map(et)))}}J.parentId=Pt,O.push(o(St/ut,At/ut,Pt,ut,nt))}else if(O.push(J),ut>1)for(var xt=0,k=vt;xt<k.length;xt+=1){var ot=k[xt],it=rt.points[ot];it.zoom<=A||(it.zoom=A,O.push(it))}}}return O},a.prototype._getOriginId=function(P){return P-this.points.length>>5},a.prototype._getOriginZoom=function(P){return(P-this.points.length)%32},a.prototype._map=function(P,A){if(P.numPoints)return A?M({},P.properties):P.properties;var O=this.points[P.index].properties,L=this.options.map(O);return A&&L===O?M({},L):L};function o(S,P,A,O,L){return{x:i(S),y:i(P),zoom:Infinity,id:A,parentId:-1,numPoints:O,properties:L}}function l(S,P){var A=S.geometry.coordinates,O=A[0],L=A[1];return{x:i(b(O)),y:i(g(L)),zoom:Infinity,index:P,parentId:-1}}function f(S){return{type:"Feature",id:S.id,properties:v(S),geometry:{type:"Point",coordinates:[m(S.x),_(S.y)]}}}function v(S){var P=S.numPoints,A=P>=1e4?Math.round(P/1e3)+"k":P>=1e3?Math.round(P/100)/10+"k":P;return M(M({},S.properties),{cluster:!0,cluster_id:S.id,point_count:P,point_count_abbreviated:A})}function b(S){return S/360+.5}function g(S){var P=Math.sin(S*Math.PI/180),A=.5-.25*Math.log((1+P)/(1-P))/Math.PI;return A<0?0:A>1?1:A}function m(S){return(S-.5)*360}function _(S){var P=(180-S*360)*Math.PI/180;return 360*Math.atan(Math.exp(P))/Math.PI-90}function M(S,P){for(var A in P)S[A]=P[A];return S}function x(S){return S.x}function y(S){return S.y}return a})},"mv/X":function(_e,dt,R){var V=R("ljhN"),E=R("MMmD"),T=R("wJg7"),e=R("GoyQ");function t(u,s,c){if(!e(c))return!1;var r=typeof s;return(r=="number"?E(c)&&T(s,c.length):r=="string"&&s in c)?V(c[s],u):!1}_e.exports=t},"n+fv":function(_e,dt,R){"use strict";R.r(dt),R.d(dt,"create",function(){return E}),R.d(dt,"clone",function(){return T}),R.d(dt,"length",function(){return e}),R.d(dt,"fromValues",function(){return t}),R.d(dt,"copy",function(){return u}),R.d(dt,"set",function(){return s}),R.d(dt,"add",function(){return c}),R.d(dt,"subtract",function(){return r}),R.d(dt,"multiply",function(){return h}),R.d(dt,"divide",function(){return n}),R.d(dt,"ceil",function(){return i}),R.d(dt,"floor",function(){return a}),R.d(dt,"min",function(){return o}),R.d(dt,"max",function(){return l}),R.d(dt,"round",function(){return f}),R.d(dt,"scale",function(){return v}),R.d(dt,"scaleAndAdd",function(){return b}),R.d(dt,"distance",function(){return g}),R.d(dt,"squaredDistance",function(){return m}),R.d(dt,"squaredLength",function(){return _}),R.d(dt,"negate",function(){return M}),R.d(dt,"inverse",function(){return x}),R.d(dt,"normalize",function(){return y}),R.d(dt,"dot",function(){return S}),R.d(dt,"cross",function(){return P}),R.d(dt,"lerp",function(){return A}),R.d(dt,"hermite",function(){return O}),R.d(dt,"bezier",function(){return L}),R.d(dt,"random",function(){return H}),R.d(dt,"transformMat4",function(){return F}),R.d(dt,"transformMat3",function(){return K}),R.d(dt,"transformQuat",function(){return G}),R.d(dt,"rotateX",function(){return U}),R.d(dt,"rotateY",function(){return Z}),R.d(dt,"rotateZ",function(){return J}),R.d(dt,"angle",function(){return rt}),R.d(dt,"zero",function(){return vt}),R.d(dt,"str",function(){return mt}),R.d(dt,"exactEquals",function(){return ut}),R.d(dt,"equals",function(){return Rt}),R.d(dt,"sub",function(){return Ft}),R.d(dt,"mul",function(){return wt}),R.d(dt,"div",function(){return Mt}),R.d(dt,"dist",function(){return St}),R.d(dt,"sqrDist",function(){return At}),R.d(dt,"len",function(){return nt}),R.d(dt,"sqrLen",function(){return Pt}),R.d(dt,"forEach",function(){return z});var V=R("yU0y");function E(){var q=new V.a(3);return V.a!=Float32Array&&(q[0]=0,q[1]=0,q[2]=0),q}function T(q){var gt=new V.a(3);return gt[0]=q[0],gt[1]=q[1],gt[2]=q[2],gt}function e(q){var gt=q[0],et=q[1],at=q[2];return Math.hypot(gt,et,at)}function t(q,gt,et){var at=new V.a(3);return at[0]=q,at[1]=gt,at[2]=et,at}function u(q,gt){return q[0]=gt[0],q[1]=gt[1],q[2]=gt[2],q}function s(q,gt,et,at){return q[0]=gt,q[1]=et,q[2]=at,q}function c(q,gt,et){return q[0]=gt[0]+et[0],q[1]=gt[1]+et[1],q[2]=gt[2]+et[2],q}function r(q,gt,et){return q[0]=gt[0]-et[0],q[1]=gt[1]-et[1],q[2]=gt[2]-et[2],q}function h(q,gt,et){return q[0]=gt[0]*et[0],q[1]=gt[1]*et[1],q[2]=gt[2]*et[2],q}function n(q,gt,et){return q[0]=gt[0]/et[0],q[1]=gt[1]/et[1],q[2]=gt[2]/et[2],q}function i(q,gt){return q[0]=Math.ceil(gt[0]),q[1]=Math.ceil(gt[1]),q[2]=Math.ceil(gt[2]),q}function a(q,gt){return q[0]=Math.floor(gt[0]),q[1]=Math.floor(gt[1]),q[2]=Math.floor(gt[2]),q}function o(q,gt,et){return q[0]=Math.min(gt[0],et[0]),q[1]=Math.min(gt[1],et[1]),q[2]=Math.min(gt[2],et[2]),q}function l(q,gt,et){return q[0]=Math.max(gt[0],et[0]),q[1]=Math.max(gt[1],et[1]),q[2]=Math.max(gt[2],et[2]),q}function f(q,gt){return q[0]=Math.round(gt[0]),q[1]=Math.round(gt[1]),q[2]=Math.round(gt[2]),q}function v(q,gt,et){return q[0]=gt[0]*et,q[1]=gt[1]*et,q[2]=gt[2]*et,q}function b(q,gt,et,at){return q[0]=gt[0]+et[0]*at,q[1]=gt[1]+et[1]*at,q[2]=gt[2]+et[2]*at,q}function g(q,gt){var et=gt[0]-q[0],at=gt[1]-q[1],xt=gt[2]-q[2];return Math.hypot(et,at,xt)}function m(q,gt){var et=gt[0]-q[0],at=gt[1]-q[1],xt=gt[2]-q[2];return et*et+at*at+xt*xt}function _(q){var gt=q[0],et=q[1],at=q[2];return gt*gt+et*et+at*at}function M(q,gt){return q[0]=-gt[0],q[1]=-gt[1],q[2]=-gt[2],q}function x(q,gt){return q[0]=1/gt[0],q[1]=1/gt[1],q[2]=1/gt[2],q}function y(q,gt){var et=gt[0],at=gt[1],xt=gt[2],k=et*et+at*at+xt*xt;return k>0&&(k=1/Math.sqrt(k)),q[0]=gt[0]*k,q[1]=gt[1]*k,q[2]=gt[2]*k,q}function S(q,gt){return q[0]*gt[0]+q[1]*gt[1]+q[2]*gt[2]}function P(q,gt,et){var at=gt[0],xt=gt[1],k=gt[2],ot=et[0],it=et[1],$=et[2];return q[0]=xt*$-k*it,q[1]=k*ot-at*$,q[2]=at*it-xt*ot,q}function A(q,gt,et,at){var xt=gt[0],k=gt[1],ot=gt[2];return q[0]=xt+at*(et[0]-xt),q[1]=k+at*(et[1]-k),q[2]=ot+at*(et[2]-ot),q}function O(q,gt,et,at,xt,k){var ot=k*k,it=ot*(2*k-3)+1,$=ot*(k-2)+k,_t=ot*(k-1),yt=ot*(3-2*k);return q[0]=gt[0]*it+et[0]*$+at[0]*_t+xt[0]*yt,q[1]=gt[1]*it+et[1]*$+at[1]*_t+xt[1]*yt,q[2]=gt[2]*it+et[2]*$+at[2]*_t+xt[2]*yt,q}function L(q,gt,et,at,xt,k){var ot=1-k,it=ot*ot,$=k*k,_t=it*ot,yt=3*k*it,Nt=3*$*ot,$t=$*k;return q[0]=gt[0]*_t+et[0]*yt+at[0]*Nt+xt[0]*$t,q[1]=gt[1]*_t+et[1]*yt+at[1]*Nt+xt[1]*$t,q[2]=gt[2]*_t+et[2]*yt+at[2]*Nt+xt[2]*$t,q}function H(q,gt){gt=gt||1;var et=V.c()*2*Math.PI,at=V.c()*2-1,xt=Math.sqrt(1-at*at)*gt;return q[0]=Math.cos(et)*xt,q[1]=Math.sin(et)*xt,q[2]=at*gt,q}function F(q,gt,et){var at=gt[0],xt=gt[1],k=gt[2],ot=et[3]*at+et[7]*xt+et[11]*k+et[15];return ot=ot||1,q[0]=(et[0]*at+et[4]*xt+et[8]*k+et[12])/ot,q[1]=(et[1]*at+et[5]*xt+et[9]*k+et[13])/ot,q[2]=(et[2]*at+et[6]*xt+et[10]*k+et[14])/ot,q}function K(q,gt,et){var at=gt[0],xt=gt[1],k=gt[2];return q[0]=at*et[0]+xt*et[3]+k*et[6],q[1]=at*et[1]+xt*et[4]+k*et[7],q[2]=at*et[2]+xt*et[5]+k*et[8],q}function G(q,gt,et){var at=et[0],xt=et[1],k=et[2],ot=et[3],it=gt[0],$=gt[1],_t=gt[2],yt=xt*_t-k*$,Nt=k*it-at*_t,$t=at*$-xt*it,ee=xt*$t-k*Nt,Gt=k*yt-at*$t,Ht=at*Nt-xt*yt,ae=ot*2;return yt*=ae,Nt*=ae,$t*=ae,ee*=2,Gt*=2,Ht*=2,q[0]=it+yt+ee,q[1]=$+Nt+Gt,q[2]=_t+$t+Ht,q}function U(q,gt,et,at){var xt=[],k=[];return xt[0]=gt[0]-et[0],xt[1]=gt[1]-et[1],xt[2]=gt[2]-et[2],k[0]=xt[0],k[1]=xt[1]*Math.cos(at)-xt[2]*Math.sin(at),k[2]=xt[1]*Math.sin(at)+xt[2]*Math.cos(at),q[0]=k[0]+et[0],q[1]=k[1]+et[1],q[2]=k[2]+et[2],q}function Z(q,gt,et,at){var xt=[],k=[];return xt[0]=gt[0]-et[0],xt[1]=gt[1]-et[1],xt[2]=gt[2]-et[2],k[0]=xt[2]*Math.sin(at)+xt[0]*Math.cos(at),k[1]=xt[1],k[2]=xt[2]*Math.cos(at)-xt[0]*Math.sin(at),q[0]=k[0]+et[0],q[1]=k[1]+et[1],q[2]=k[2]+et[2],q}function J(q,gt,et,at){var xt=[],k=[];return xt[0]=gt[0]-et[0],xt[1]=gt[1]-et[1],xt[2]=gt[2]-et[2],k[0]=xt[0]*Math.cos(at)-xt[1]*Math.sin(at),k[1]=xt[0]*Math.sin(at)+xt[1]*Math.cos(at),k[2]=xt[2],q[0]=k[0]+et[0],q[1]=k[1]+et[1],q[2]=k[2]+et[2],q}function rt(q,gt){var et=q[0],at=q[1],xt=q[2],k=gt[0],ot=gt[1],it=gt[2],$=Math.sqrt(et*et+at*at+xt*xt),_t=Math.sqrt(k*k+ot*ot+it*it),yt=$*_t,Nt=yt&&S(q,gt)/yt;return Math.acos(Math.min(Math.max(Nt,-1),1))}function vt(q){return q[0]=0,q[1]=0,q[2]=0,q}function mt(q){return"vec3("+q[0]+", "+q[1]+", "+q[2]+")"}function ut(q,gt){return q[0]===gt[0]&&q[1]===gt[1]&&q[2]===gt[2]}function Rt(q,gt){var et=q[0],at=q[1],xt=q[2],k=gt[0],ot=gt[1],it=gt[2];return Math.abs(et-k)<=V.b*Math.max(1,Math.abs(et),Math.abs(k))&&Math.abs(at-ot)<=V.b*Math.max(1,Math.abs(at),Math.abs(ot))&&Math.abs(xt-it)<=V.b*Math.max(1,Math.abs(xt),Math.abs(it))}var Ft=r,wt=h,Mt=n,St=g,At=m,nt=e,Pt=_,z=function(){var q=E();return function(gt,et,at,xt,k,ot){var it,$;for(et||(et=3),at||(at=0),xt?$=Math.min(xt*et+at,gt.length):$=gt.length,it=at;it<$;it+=et)q[0]=gt[it],q[1]=gt[it+1],q[2]=gt[it+2],k(q,q,ot),gt[it]=q[0],gt[it+1]=q[1],gt[it+2]=q[2];return gt}}()},n2J3:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.unmanaged=void 0;var V=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(){return function(t,u,s){var c=new E.Metadata(V.UNMANAGED_TAG,!0);T.tagParameter(t,u,s,c)}}dt.unmanaged=e},n3AX:function(_e,dt,R){var V=R("Nsbk");function E(T,e){for(;!Object.prototype.hasOwnProperty.call(T,e)&&(T=V(T),T!==null););return T}_e.exports=E,_e.exports.default=_e.exports,_e.exports.__esModule=!0},"o+pz":function(_e,dt,R){"use strict";R.d(dt,"a",function(){return V});var V;(function(E){E[E.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",E[E.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",E[E.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",E[E.POINTS=0]="POINTS",E[E.LINES=1]="LINES",E[E.LINE_LOOP=2]="LINE_LOOP",E[E.LINE_STRIP=3]="LINE_STRIP",E[E.TRIANGLES=4]="TRIANGLES",E[E.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",E[E.TRIANGLE_FAN=6]="TRIANGLE_FAN",E[E.ZERO=0]="ZERO",E[E.ONE=1]="ONE",E[E.SRC_COLOR=768]="SRC_COLOR",E[E.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",E[E.SRC_ALPHA=770]="SRC_ALPHA",E[E.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",E[E.DST_ALPHA=772]="DST_ALPHA",E[E.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",E[E.DST_COLOR=774]="DST_COLOR",E[E.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",E[E.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",E[E.FUNC_ADD=32774]="FUNC_ADD",E[E.BLEND_EQUATION=32777]="BLEND_EQUATION",E[E.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",E[E.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",E[E.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",E[E.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",E[E.MAX_EXT=32776]="MAX_EXT",E[E.MIN_EXT=32775]="MIN_EXT",E[E.BLEND_DST_RGB=32968]="BLEND_DST_RGB",E[E.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",E[E.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",E[E.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",E[E.CONSTANT_COLOR=32769]="CONSTANT_COLOR",E[E.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",E[E.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",E[E.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",E[E.BLEND_COLOR=32773]="BLEND_COLOR",E[E.ARRAY_BUFFER=34962]="ARRAY_BUFFER",E[E.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",E[E.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",E[E.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",E[E.STREAM_DRAW=35040]="STREAM_DRAW",E[E.STATIC_DRAW=35044]="STATIC_DRAW",E[E.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",E[E.BUFFER_SIZE=34660]="BUFFER_SIZE",E[E.BUFFER_USAGE=34661]="BUFFER_USAGE",E[E.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",E[E.FRONT=1028]="FRONT",E[E.BACK=1029]="BACK",E[E.FRONT_AND_BACK=1032]="FRONT_AND_BACK",E[E.CULL_FACE=2884]="CULL_FACE",E[E.BLEND=3042]="BLEND",E[E.DITHER=3024]="DITHER",E[E.STENCIL_TEST=2960]="STENCIL_TEST",E[E.DEPTH_TEST=2929]="DEPTH_TEST",E[E.SCISSOR_TEST=3089]="SCISSOR_TEST",E[E.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",E[E.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",E[E.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",E[E.NO_ERROR=0]="NO_ERROR",E[E.INVALID_ENUM=1280]="INVALID_ENUM",E[E.INVALID_VALUE=1281]="INVALID_VALUE",E[E.INVALID_OPERATION=1282]="INVALID_OPERATION",E[E.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",E[E.CW=2304]="CW",E[E.CCW=2305]="CCW",E[E.LINE_WIDTH=2849]="LINE_WIDTH",E[E.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",E[E.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",E[E.CULL_FACE_MODE=2885]="CULL_FACE_MODE",E[E.FRONT_FACE=2886]="FRONT_FACE",E[E.DEPTH_RANGE=2928]="DEPTH_RANGE",E[E.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",E[E.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",E[E.DEPTH_FUNC=2932]="DEPTH_FUNC",E[E.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",E[E.STENCIL_FUNC=2962]="STENCIL_FUNC",E[E.STENCIL_FAIL=2964]="STENCIL_FAIL",E[E.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",E[E.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",E[E.STENCIL_REF=2967]="STENCIL_REF",E[E.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",E[E.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",E[E.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",E[E.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",E[E.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",E[E.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",E[E.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",E[E.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",E[E.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",E[E.VIEWPORT=2978]="VIEWPORT",E[E.SCISSOR_BOX=3088]="SCISSOR_BOX",E[E.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",E[E.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",E[E.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",E[E.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",E[E.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",E[E.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",E[E.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",E[E.RED_BITS=3410]="RED_BITS",E[E.GREEN_BITS=3411]="GREEN_BITS",E[E.BLUE_BITS=3412]="BLUE_BITS",E[E.ALPHA_BITS=3413]="ALPHA_BITS",E[E.DEPTH_BITS=3414]="DEPTH_BITS",E[E.STENCIL_BITS=3415]="STENCIL_BITS",E[E.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",E[E.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",E[E.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",E[E.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",E[E.SAMPLES=32937]="SAMPLES",E[E.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",E[E.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",E[E.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",E[E.DONT_CARE=4352]="DONT_CARE",E[E.FASTEST=4353]="FASTEST",E[E.NICEST=4354]="NICEST",E[E.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",E[E.BYTE=5120]="BYTE",E[E.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",E[E.SHORT=5122]="SHORT",E[E.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",E[E.INT=5124]="INT",E[E.UNSIGNED_INT=5125]="UNSIGNED_INT",E[E.FLOAT=5126]="FLOAT",E[E.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",E[E.ALPHA=6406]="ALPHA",E[E.RGB=6407]="RGB",E[E.RGBA=6408]="RGBA",E[E.LUMINANCE=6409]="LUMINANCE",E[E.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",E[E.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",E[E.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",E[E.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",E[E.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",E[E.VERTEX_SHADER=35633]="VERTEX_SHADER",E[E.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",E[E.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",E[E.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",E[E.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",E[E.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",E[E.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",E[E.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",E[E.SHADER_TYPE=35663]="SHADER_TYPE",E[E.DELETE_STATUS=35712]="DELETE_STATUS",E[E.LINK_STATUS=35714]="LINK_STATUS",E[E.VALIDATE_STATUS=35715]="VALIDATE_STATUS",E[E.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",E[E.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",E[E.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",E[E.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",E[E.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",E[E.NEVER=512]="NEVER",E[E.LESS=513]="LESS",E[E.EQUAL=514]="EQUAL",E[E.LEQUAL=515]="LEQUAL",E[E.GREATER=516]="GREATER",E[E.NOTEQUAL=517]="NOTEQUAL",E[E.GEQUAL=518]="GEQUAL",E[E.ALWAYS=519]="ALWAYS",E[E.KEEP=7680]="KEEP",E[E.REPLACE=7681]="REPLACE",E[E.INCR=7682]="INCR",E[E.DECR=7683]="DECR",E[E.INVERT=5386]="INVERT",E[E.INCR_WRAP=34055]="INCR_WRAP",E[E.DECR_WRAP=34056]="DECR_WRAP",E[E.VENDOR=7936]="VENDOR",E[E.RENDERER=7937]="RENDERER",E[E.VERSION=7938]="VERSION",E[E.NEAREST=9728]="NEAREST",E[E.LINEAR=9729]="LINEAR",E[E.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",E[E.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",E[E.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",E[E.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",E[E.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",E[E.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",E[E.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",E[E.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",E[E.TEXTURE_2D=3553]="TEXTURE_2D",E[E.TEXTURE=5890]="TEXTURE",E[E.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",E[E.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",E[E.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",E[E.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",E[E.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",E[E.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",E[E.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",E[E.TEXTURE0=33984]="TEXTURE0",E[E.TEXTURE1=33985]="TEXTURE1",E[E.TEXTURE2=33986]="TEXTURE2",E[E.TEXTURE3=33987]="TEXTURE3",E[E.TEXTURE4=33988]="TEXTURE4",E[E.TEXTURE5=33989]="TEXTURE5",E[E.TEXTURE6=33990]="TEXTURE6",E[E.TEXTURE7=33991]="TEXTURE7",E[E.TEXTURE8=33992]="TEXTURE8",E[E.TEXTURE9=33993]="TEXTURE9",E[E.TEXTURE10=33994]="TEXTURE10",E[E.TEXTURE11=33995]="TEXTURE11",E[E.TEXTURE12=33996]="TEXTURE12",E[E.TEXTURE13=33997]="TEXTURE13",E[E.TEXTURE14=33998]="TEXTURE14",E[E.TEXTURE15=33999]="TEXTURE15",E[E.TEXTURE16=34e3]="TEXTURE16",E[E.TEXTURE17=34001]="TEXTURE17",E[E.TEXTURE18=34002]="TEXTURE18",E[E.TEXTURE19=34003]="TEXTURE19",E[E.TEXTURE20=34004]="TEXTURE20",E[E.TEXTURE21=34005]="TEXTURE21",E[E.TEXTURE22=34006]="TEXTURE22",E[E.TEXTURE23=34007]="TEXTURE23",E[E.TEXTURE24=34008]="TEXTURE24",E[E.TEXTURE25=34009]="TEXTURE25",E[E.TEXTURE26=34010]="TEXTURE26",E[E.TEXTURE27=34011]="TEXTURE27",E[E.TEXTURE28=34012]="TEXTURE28",E[E.TEXTURE29=34013]="TEXTURE29",E[E.TEXTURE30=34014]="TEXTURE30",E[E.TEXTURE31=34015]="TEXTURE31",E[E.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",E[E.REPEAT=10497]="REPEAT",E[E.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",E[E.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",E[E.FLOAT_VEC2=35664]="FLOAT_VEC2",E[E.FLOAT_VEC3=35665]="FLOAT_VEC3",E[E.FLOAT_VEC4=35666]="FLOAT_VEC4",E[E.INT_VEC2=35667]="INT_VEC2",E[E.INT_VEC3=35668]="INT_VEC3",E[E.INT_VEC4=35669]="INT_VEC4",E[E.BOOL=35670]="BOOL",E[E.BOOL_VEC2=35671]="BOOL_VEC2",E[E.BOOL_VEC3=35672]="BOOL_VEC3",E[E.BOOL_VEC4=35673]="BOOL_VEC4",E[E.FLOAT_MAT2=35674]="FLOAT_MAT2",E[E.FLOAT_MAT3=35675]="FLOAT_MAT3",E[E.FLOAT_MAT4=35676]="FLOAT_MAT4",E[E.SAMPLER_2D=35678]="SAMPLER_2D",E[E.SAMPLER_CUBE=35680]="SAMPLER_CUBE",E[E.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",E[E.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",E[E.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",E[E.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",E[E.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",E[E.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",E[E.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",E[E.COMPILE_STATUS=35713]="COMPILE_STATUS",E[E.LOW_FLOAT=36336]="LOW_FLOAT",E[E.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",E[E.HIGH_FLOAT=36338]="HIGH_FLOAT",E[E.LOW_INT=36339]="LOW_INT",E[E.MEDIUM_INT=36340]="MEDIUM_INT",E[E.HIGH_INT=36341]="HIGH_INT",E[E.FRAMEBUFFER=36160]="FRAMEBUFFER",E[E.RENDERBUFFER=36161]="RENDERBUFFER",E[E.RGBA4=32854]="RGBA4",E[E.RGB5_A1=32855]="RGB5_A1",E[E.RGB565=36194]="RGB565",E[E.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",E[E.STENCIL_INDEX=6401]="STENCIL_INDEX",E[E.STENCIL_INDEX8=36168]="STENCIL_INDEX8",E[E.DEPTH_STENCIL=34041]="DEPTH_STENCIL",E[E.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",E[E.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",E[E.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",E[E.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",E[E.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",E[E.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",E[E.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",E[E.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",E[E.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",E[E.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",E[E.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",E[E.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",E[E.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",E[E.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",E[E.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",E[E.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",E[E.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",E[E.NONE=0]="NONE",E[E.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",E[E.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",E[E.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",E[E.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",E[E.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",E[E.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",E[E.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",E[E.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",E[E.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",E[E.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",E[E.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",E[E.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",E[E.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",E[E.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"})(V||(V={}))},"oCl/":function(_e,dt,R){var V=R("CH3K"),E=R("LcsW"),T=R("MvSz"),e=R("0ycA"),t=Object.getOwnPropertySymbols,u=t?function(s){for(var c=[];s;)V(c,T(s)),s=E(s);return c}:e;_e.exports=u},oIFs:function(_e,dt,R){},oShl:function(_e,dt,R){var V=R("Nsbk"),E=R("SksO"),T=R("xfeJ"),e=R("sXyB");function t(u){var s=typeof Map=="function"?new Map:void 0;return _e.exports=t=function(r){if(r===null||!T(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s!="undefined"){if(s.has(r))return s.get(r);s.set(r,h)}function h(){return e(r,arguments,V(this).constructor)}return h.prototype=Object.create(r.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),E(h,r)},_e.exports.default=_e.exports,_e.exports.__esModule=!0,t(u)}_e.exports=t,_e.exports.default=_e.exports,_e.exports.__esModule=!0},oaX6:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.targetName=void 0;var V=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(t){return function(u,s,c){var r=new E.Metadata(V.NAME_TAG,t);T.tagParameter(u,s,c,r)}}dt.targetName=e},"otv/":function(_e,dt,R){var V=R("nmnc"),E=V?V.prototype:void 0,T=E?E.valueOf:void 0;function e(t){return T?Object(T.call(t)):{}}_e.exports=e},"oy+k":function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.Context=void 0;var V=R("d9O0"),E=function(){function T(e){this.id=V.id(),this.container=e}return T.prototype.addPlan=function(e){this.plan=e},T.prototype.setCurrentRequest=function(e){this.currentRequest=e},T}();dt.Context=E},pFRH:function(_e,dt,R){var V=R("cvCv"),E=R("O0oS"),T=R("zZ0H"),e=E?function(t,u){return E(t,"toString",{configurable:!0,enumerable:!1,value:V(u),writable:!0})}:T;_e.exports=e},q4HE:function(_e,dt){var R="\\ud800-\\udfff",V="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=V+E+T,t="\\ufe0e\\ufe0f",u="["+R+"]",s="["+e+"]",c="\\ud83c[\\udffb-\\udfff]",r="(?:"+s+"|"+c+")",h="[^"+R+"]",n="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",a="\\u200d",o=r+"?",l="["+t+"]?",f="(?:"+a+"(?:"+[h,n,i].join("|")+")"+l+o+")*",v=l+o+f,b="(?:"+[h+s+"?",s,n,i,u].join("|")+")",g=RegExp(c+"(?="+c+")|"+b+v,"g");function m(_){for(var M=g.lastIndex=0;g.test(_);)++M;return M}_e.exports=m},qK8v:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.isStackOverflowExeption=void 0;var V=R("MON2");function E(T){return T instanceof RangeError||T.message===V.STACK_OVERFLOW}dt.isStackOverflowExeption=E},qRkn:function(_e,dt,R){var V=R("3cYt"),E={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},T=V(E);_e.exports=T},qd8s:function(_e,dt,R){(function(V,E){var T=200,e="__lodash_hash_undefined__",t=800,u=16,s=9007199254740991,c="[object Arguments]",r="[object Array]",h="[object AsyncFunction]",n="[object Boolean]",i="[object Date]",a="[object Error]",o="[object Function]",l="[object GeneratorFunction]",f="[object Map]",v="[object Number]",b="[object Null]",g="[object Object]",m="[object Proxy]",_="[object RegExp]",M="[object Set]",x="[object String]",y="[object Undefined]",S="[object WeakMap]",P="[object ArrayBuffer]",A="[object DataView]",O="[object Float32Array]",L="[object Float64Array]",H="[object Int8Array]",F="[object Int16Array]",K="[object Int32Array]",G="[object Uint8Array]",U="[object Uint8ClampedArray]",Z="[object Uint16Array]",J="[object Uint32Array]",rt=/[\\^$.*+?()[\]{}|]/g,vt=/^\[object .+?Constructor\]$/,mt=/^(?:0|[1-9]\d*)$/,ut={};ut[O]=ut[L]=ut[H]=ut[F]=ut[K]=ut[G]=ut[U]=ut[Z]=ut[J]=!0,ut[c]=ut[r]=ut[P]=ut[n]=ut[A]=ut[i]=ut[a]=ut[o]=ut[f]=ut[v]=ut[g]=ut[_]=ut[M]=ut[x]=ut[S]=!1;var Rt=typeof V=="object"&&V&&V.Object===Object&&V,Ft=typeof self=="object"&&self&&self.Object===Object&&self,wt=Rt||Ft||Function("return this")(),Mt=dt&&!dt.nodeType&&dt,St=Mt&&typeof E=="object"&&E&&!E.nodeType&&E,At=St&&St.exports===Mt,nt=At&&Rt.process,Pt=function(){try{var gn=St&&St.require&&St.require("util").types;return gn||nt&&nt.binding&&nt.binding("util")}catch(cr){}}(),z=Pt&&Pt.isTypedArray;function q(gn,cr,Gr){switch(Gr.length){case 0:return gn.call(cr);case 1:return gn.call(cr,Gr[0]);case 2:return gn.call(cr,Gr[0],Gr[1]);case 3:return gn.call(cr,Gr[0],Gr[1],Gr[2])}return gn.apply(cr,Gr)}function gt(gn,cr){for(var Gr=-1,Ui=Array(gn);++Gr<gn;)Ui[Gr]=cr(Gr);return Ui}function et(gn){return function(cr){return gn(cr)}}function at(gn,cr){return gn==null?void 0:gn[cr]}function xt(gn,cr){return function(Gr){return gn(cr(Gr))}}var k=Array.prototype,ot=Function.prototype,it=Object.prototype,$=wt["__core-js_shared__"],_t=ot.toString,yt=it.hasOwnProperty,Nt=function(){var gn=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||"");return gn?"Symbol(src)_1."+gn:""}(),$t=it.toString,ee=_t.call(Object),Gt=RegExp("^"+_t.call(yt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=At?wt.Buffer:void 0,ae=wt.Symbol,le=wt.Uint8Array,Be=Ht?Ht.allocUnsafe:void 0,Ce=xt(Object.getPrototypeOf,Object),We=Object.create,Ye=it.propertyIsEnumerable,wn=k.splice,er=ae?ae.toStringTag:void 0,Lr=function(){try{var gn=Js(Object,"defineProperty");return gn({},"",{}),gn}catch(cr){}}(),on=Ht?Ht.isBuffer:void 0,en=Math.max,An=Date.now,Bn=Js(wt,"Map"),gr=Js(Object,"create"),hi=function(){function gn(){}return function(cr){if(!Ja(cr))return{};if(We)return We(cr);gn.prototype=cr;var Gr=new gn;return gn.prototype=void 0,Gr}}();function Ae(gn){var cr=-1,Gr=gn==null?0:gn.length;for(this.clear();++cr<Gr;){var Ui=gn[cr];this.set(Ui[0],Ui[1])}}function Me(){this.__data__=gr?gr(null):{},this.size=0}function Qt(gn){var cr=this.has(gn)&&delete this.__data__[gn];return this.size-=cr?1:0,cr}function ge(gn){var cr=this.__data__;if(gr){var Gr=cr[gn];return Gr===e?void 0:Gr}return yt.call(cr,gn)?cr[gn]:void 0}function Wt(gn){var cr=this.__data__;return gr?cr[gn]!==void 0:yt.call(cr,gn)}function re(gn,cr){var Gr=this.__data__;return this.size+=this.has(gn)?0:1,Gr[gn]=gr&&cr===void 0?e:cr,this}Ae.prototype.clear=Me,Ae.prototype.delete=Qt,Ae.prototype.get=ge,Ae.prototype.has=Wt,Ae.prototype.set=re;function Te(gn){var cr=-1,Gr=gn==null?0:gn.length;for(this.clear();++cr<Gr;){var Ui=gn[cr];this.set(Ui[0],Ui[1])}}function ue(){this.__data__=[],this.size=0}function be(gn){var cr=this.__data__,Gr=$n(cr,gn);if(Gr<0)return!1;var Ui=cr.length-1;return Gr==Ui?cr.pop():wn.call(cr,Gr,1),--this.size,!0}function Xe(gn){var cr=this.__data__,Gr=$n(cr,gn);return Gr<0?void 0:cr[Gr][1]}function Rn(gn){return $n(this.__data__,gn)>-1}function tr(gn,cr){var Gr=this.__data__,Ui=$n(Gr,gn);return Ui<0?(++this.size,Gr.push([gn,cr])):Gr[Ui][1]=cr,this}Te.prototype.clear=ue,Te.prototype.delete=be,Te.prototype.get=Xe,Te.prototype.has=Rn,Te.prototype.set=tr;function Mn(gn){var cr=-1,Gr=gn==null?0:gn.length;for(this.clear();++cr<Gr;){var Ui=gn[cr];this.set(Ui[0],Ui[1])}}function vn(){this.size=0,this.__data__={hash:new Ae,map:new(Bn||Te),string:new Ae}}function Ar(gn){var cr=jo(this,gn).delete(gn);return this.size-=cr?1:0,cr}function or(gn){return jo(this,gn).get(gn)}function cn(gn){return jo(this,gn).has(gn)}function Pr(gn,cr){var Gr=jo(this,gn),Ui=Gr.size;return Gr.set(gn,cr),this.size+=Gr.size==Ui?0:1,this}Mn.prototype.clear=vn,Mn.prototype.delete=Ar,Mn.prototype.get=or,Mn.prototype.has=cn,Mn.prototype.set=Pr;function Sr(gn){var cr=this.__data__=new Te(gn);this.size=cr.size}function De(){this.__data__=new Te,this.size=0}function $e(gn){var cr=this.__data__,Gr=cr.delete(gn);return this.size=cr.size,Gr}function Ve(gn){return this.__data__.get(gn)}function En(gn){return this.__data__.has(gn)}function xn(gn,cr){var Gr=this.__data__;if(Gr instanceof Te){var Ui=Gr.__data__;if(!Bn||Ui.length<T-1)return Ui.push([gn,cr]),this.size=++Gr.size,this;Gr=this.__data__=new Mn(Ui)}return Gr.set(gn,cr),this.size=Gr.size,this}Sr.prototype.clear=De,Sr.prototype.delete=$e,Sr.prototype.get=Ve,Sr.prototype.has=En,Sr.prototype.set=xn;function Nn(gn,cr){var Gr=$a(gn),Ui=!Gr&&sa(gn),Ua=!Gr&&!Ui&&Fa(gn),xo=!Gr&&!Ui&&!Ua&&zo(gn),po=Gr||Ui||Ua||xo,ea=po?gt(gn.length,String):[],Qa=ea.length;for(var Ds in gn)(cr||yt.call(gn,Ds))&&!(po&&(Ds=="length"||Ua&&(Ds=="offset"||Ds=="parent")||xo&&(Ds=="buffer"||Ds=="byteLength"||Ds=="byteOffset")||Gs(Ds,Qa)))&&ea.push(Ds);return ea}function mn(gn,cr,Gr){(Gr!==void 0&&!Vi(gn[cr],Gr)||Gr===void 0&&!(cr in gn))&&Wn(gn,cr,Gr)}function Dn(gn,cr,Gr){var Ui=gn[cr];(!(yt.call(gn,cr)&&Vi(Ui,Gr))||Gr===void 0&&!(cr in gn))&&Wn(gn,cr,Gr)}function $n(gn,cr){for(var Gr=gn.length;Gr--;)if(Vi(gn[Gr][0],cr))return Gr;return-1}function Wn(gn,cr,Gr){cr=="__proto__"&&Lr?Lr(gn,cr,{configurable:!0,enumerable:!0,value:Gr,writable:!0}):gn[cr]=Gr}var _n=$o();function xr(gn){return gn==null?gn===void 0?y:b:er&&er in Object(gn)?io(gn):Fn(gn)}function mr(gn){return To(gn)&&xr(gn)==c}function Fr(gn){if(!Ja(gn)||Yt(gn))return!1;var cr=uo(gn)?Gt:vt;return cr.test(wi(gn))}function xi(gn){return To(gn)&&vo(gn.length)&&!!ut[xr(gn)]}function Ta(gn){if(!Ja(gn))return sn(gn);var cr=Ee(gn),Gr=[];for(var Ui in gn)Ui=="constructor"&&(cr||!yt.call(gn,Ui))||Gr.push(Ui);return Gr}function Aa(gn,cr,Gr,Ui,Ua){gn!==cr&&_n(cr,function(xo,po){if(Ua||(Ua=new Sr),Ja(xo))to(gn,cr,po,Gr,Aa,Ui,Ua);else{var ea=Ui?Ui(qn(gn,po),xo,po+"",gn,cr,Ua):void 0;ea===void 0&&(ea=xo),mn(gn,po,ea)}},Ao)}function to(gn,cr,Gr,Ui,Ua,xo,po){var ea=qn(gn,Gr),Qa=qn(cr,Gr),Ds=po.get(Qa);if(Ds){mn(gn,Gr,Ds);return}var Es=xo?xo(ea,Qa,Gr+"",gn,cr,po):void 0,Za=Es===void 0;if(Za){var ru=$a(Qa),Qo=!ru&&Fa(Qa),Os=!ru&&!Qo&&zo(Qa);Es=Qa,ru||Qo||Os?$a(ea)?Es=ea:_o(ea)?Es=Do(ea):Qo?(Za=!1,Es=ro(Qa,!0)):Os?(Za=!1,Es=Jo(Qa,!0)):Es=[]:hs(Qa)||sa(Qa)?(Es=ea,sa(ea)?Es=bs(ea):(!Ja(ea)||uo(ea))&&(Es=so(Qa))):Za=!1}Za&&(po.set(Qa,Es),Ua(Es,Qa,Ui,xo,po),po.delete(Qa)),mn(gn,Gr,Es)}function Vo(gn,cr){return $r(rr(gn,cr,ss),gn+"")}var Ro=Lr?function(gn,cr){return Lr(gn,"toString",{configurable:!0,enumerable:!1,value:Rs(cr),writable:!0})}:ss;function ro(gn,cr){if(cr)return gn.slice();var Gr=gn.length,Ui=Be?Be(Gr):new gn.constructor(Gr);return gn.copy(Ui),Ui}function vs(gn){var cr=new gn.constructor(gn.byteLength);return new le(cr).set(new le(gn)),cr}function Jo(gn,cr){var Gr=cr?vs(gn.buffer):gn.buffer;return new gn.constructor(Gr,gn.byteOffset,gn.length)}function Do(gn,cr){var Gr=-1,Ui=gn.length;for(cr||(cr=Array(Ui));++Gr<Ui;)cr[Gr]=gn[Gr];return cr}function xs(gn,cr,Gr,Ui){var Ua=!Gr;Gr||(Gr={});for(var xo=-1,po=cr.length;++xo<po;){var ea=cr[xo],Qa=Ui?Ui(Gr[ea],gn[ea],ea,Gr,gn):void 0;Qa===void 0&&(Qa=gn[ea]),Ua?Wn(Gr,ea,Qa):Dn(Gr,ea,Qa)}return Gr}function Ra(gn){return Vo(function(cr,Gr){var Ui=-1,Ua=Gr.length,xo=Ua>1?Gr[Ua-1]:void 0,po=Ua>2?Gr[2]:void 0;for(xo=gn.length>3&&typeof xo=="function"?(Ua--,xo):void 0,po&&Ne(Gr[0],Gr[1],po)&&(xo=Ua<3?void 0:xo,Ua=1),cr=Object(cr);++Ui<Ua;){var ea=Gr[Ui];ea&&gn(cr,ea,Ui,xo)}return cr})}function $o(gn){return function(cr,Gr,Ui){for(var Ua=-1,xo=Object(cr),po=Ui(cr),ea=po.length;ea--;){var Qa=po[gn?ea:++Ua];if(Gr(xo[Qa],Qa,xo)===!1)break}return cr}}function jo(gn,cr){var Gr=gn.__data__;return se(cr)?Gr[typeof cr=="string"?"string":"hash"]:Gr.map}function Js(gn,cr){var Gr=at(gn,cr);return Fr(Gr)?Gr:void 0}function io(gn){var cr=yt.call(gn,er),Gr=gn[er];try{gn[er]=void 0;var Ui=!0}catch(xo){}var Ua=$t.call(gn);return Ui&&(cr?gn[er]=Gr:delete gn[er]),Ua}function so(gn){return typeof gn.constructor=="function"&&!Ee(gn)?hi(Ce(gn)):{}}function Gs(gn,cr){var Gr=typeof gn;return cr=cr==null?s:cr,!!cr&&(Gr=="number"||Gr!="symbol"&&mt.test(gn))&&gn>-1&&gn%1==0&&gn<cr}function Ne(gn,cr,Gr){if(!Ja(Gr))return!1;var Ui=typeof cr;return(Ui=="number"?Ca(Gr)&&Gs(cr,Gr.length):Ui=="string"&&cr in Gr)?Vi(Gr[cr],gn):!1}function se(gn){var cr=typeof gn;return cr=="string"||cr=="number"||cr=="symbol"||cr=="boolean"?gn!=="__proto__":gn===null}function Yt(gn){return!!Nt&&Nt in gn}function Ee(gn){var cr=gn&&gn.constructor,Gr=typeof cr=="function"&&cr.prototype||it;return gn===Gr}function sn(gn){var cr=[];if(gn!=null)for(var Gr in Object(gn))cr.push(Gr);return cr}function Fn(gn){return $t.call(gn)}function rr(gn,cr,Gr){return cr=en(cr===void 0?gn.length-1:cr,0),function(){for(var Ui=arguments,Ua=-1,xo=en(Ui.length-cr,0),po=Array(xo);++Ua<xo;)po[Ua]=Ui[cr+Ua];Ua=-1;for(var ea=Array(cr+1);++Ua<cr;)ea[Ua]=Ui[Ua];return ea[cr]=Gr(po),q(gn,this,ea)}}function qn(gn,cr){if(!(cr==="constructor"&&typeof gn[cr]=="function")&&cr!="__proto__")return gn[cr]}var $r=bi(Ro);function bi(gn){var cr=0,Gr=0;return function(){var Ui=An(),Ua=u-(Ui-Gr);if(Gr=Ui,Ua>0){if(++cr>=t)return arguments[0]}else cr=0;return gn.apply(void 0,arguments)}}function wi(gn){if(gn!=null){try{return _t.call(gn)}catch(cr){}try{return gn+""}catch(cr){}}return""}function Vi(gn,cr){return gn===cr||gn!==gn&&cr!==cr}var sa=mr(function(){return arguments}())?mr:function(gn){return To(gn)&&yt.call(gn,"callee")&&!Ye.call(gn,"callee")},$a=Array.isArray;function Ca(gn){return gn!=null&&vo(gn.length)&&!uo(gn)}function _o(gn){return To(gn)&&Ca(gn)}var Fa=on||Ba;function uo(gn){if(!Ja(gn))return!1;var cr=xr(gn);return cr==o||cr==l||cr==h||cr==m}function vo(gn){return typeof gn=="number"&&gn>-1&&gn%1==0&&gn<=s}function Ja(gn){var cr=typeof gn;return gn!=null&&(cr=="object"||cr=="function")}function To(gn){return gn!=null&&typeof gn=="object"}function hs(gn){if(!To(gn)||xr(gn)!=g)return!1;var cr=Ce(gn);if(cr===null)return!0;var Gr=yt.call(cr,"constructor")&&cr.constructor;return typeof Gr=="function"&&Gr instanceof Gr&&_t.call(Gr)==ee}var zo=z?et(z):xi;function bs(gn){return xs(gn,Ao(gn))}function Ao(gn){return Ca(gn)?Nn(gn,!0):Ta(gn)}var Wa=Ra(function(gn,cr,Gr,Ui){Aa(gn,cr,Gr,Ui)});function Rs(gn){return function(){return gn}}function ss(gn){return gn}function Ba(){return!1}E.exports=Wa}).call(this,R("IyRk"),R("hOG+")(_e))},quyA:function(_e,dt){var R="\\ud800-\\udfff",V="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=V+E+T,t="\\ufe0e\\ufe0f",u="\\u200d",s=RegExp("["+u+R+e+t+"]");function c(r){return s.test(r)}_e.exports=c},qxNg:function(_e,dt,R){"use strict";R.d(dt,"a",function(){return s});var V=R("lSNA"),E=R.n(V),T=R("mpbz"),e=R.n(T);function t(r,h){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);h&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),n.push.apply(n,i)}return n}function u(r){for(var h=1;h<arguments.length;h++){var n=arguments[h]!=null?arguments[h]:{};h%2?t(Object(n),!0).forEach(function(i){E()(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function s(r,h){var n=h.radius,i=n===void 0?40:n,a=h.maxZoom,o=a===void 0?18:a,l=h.minZoom,f=l===void 0?0:l,v=h.zoom,b=v===void 0?2:v;if(r.pointIndex){var g=r.pointIndex.getClusters(r.extent,Math.floor(b));return r.dataArray=c(g),r}var m=new e.a({radius:i,minZoom:f,maxZoom:o}),_={type:"FeatureCollection",features:[]};return _.features=r.dataArray.map(function(M){return{type:"Feature",geometry:{type:"Point",coordinates:M.coordinates},properties:u({},M)}}),m.load(_.features),m}function c(r){return r.map(function(h,n){return u({coordinates:h.geometry.coordinates,_id:n+1},h.properties)})}},riiI:function(_e,dt){},rlAn:function(_e,dt,R){"use strict";var V=R("ISu3"),E=R("gMG2"),T=R("5gLl"),e=R("BpBL"),t=R("5zYK"),u=R("lJbI"),s=R("l94r"),c=R("qxNg"),r=R("Y8BV"),h=R("VIsB"),n=R("+VLl"),i=R("aF1E"),a=R("fdMe");R.d(dt,"getTransform",function(){return V.b}),R.d(dt,"getParser",function(){return V.a});var o=R("U1ZX"),l=R.n(o);dt.default=s.a,Object(V.c)("geojson",T.a),Object(V.c)("image",e.a),Object(V.c)("csv",E.a),Object(V.c)("json",t.a),Object(V.c)("raster",u.a),Object(V.d)("cluster",c.a),Object(V.d)("filter",r.a),Object(V.d)("join",i.a),Object(V.d)("map",a.a),Object(V.d)("grid",h.a),Object(V.d)("hexagon",n.a)},rxlC:function(_e,dt,R){"use strict";_e.exports=E,_e.exports.default=E;var V=1e20;function E(s,c,r,h,n,i){this.fontSize=s||24,this.buffer=c===void 0?3:c,this.cutoff=h||.25,this.fontFamily=n||"sans-serif",this.fontWeight=i||"normal",this.radius=r||8;var a=this.size=this.fontSize+this.buffer*2,o=a+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Uint16Array(o),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function T(s,c,r,h,n,i,a){i.fill(V,0,c*r),a.fill(0,0,c*r);for(var o=(c-h)/2,l=0;l<n;l++)for(var f=0;f<h;f++){var v=(l+o)*c+f+o,b=s.data[4*(l*h+f)+3]/255;if(b===1)i[v]=0,a[v]=V;else if(b===0)i[v]=V,a[v]=0;else{var g=Math.max(0,.5-b),m=Math.max(0,b-.5);i[v]=g*g,a[v]=m*m}}}function e(s,c,r,h,n,i,a){for(var o=0;o<c*r;o++){var l=Math.sqrt(h[o])-Math.sqrt(n[o]);s[o]=Math.round(255-255*(l/i+a))}}E.prototype._draw=function(s,c){var r=this.ctx.measureText(s),h=r.width,n=2*this.buffer,i,a,o,l,f,v,b,g;c&&this.useMetrics?(f=Math.floor(r.actualBoundingBoxAscent),g=this.buffer+Math.ceil(r.actualBoundingBoxAscent),v=this.buffer,b=this.buffer,a=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),l=Math.min(this.size-v,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),i=a+n,o=l+n,this.ctx.textBaseline="alphabetic"):(i=a=this.size,o=l=this.size,f=19*this.fontSize/24,v=b=0,g=this.middle,this.ctx.textBaseline="middle");var m;a&&l&&(this.ctx.clearRect(b,v,a,l),this.ctx.fillText(s,this.buffer,g),m=this.ctx.getImageData(b,v,a,l));var _=new Uint8ClampedArray(i*o);return T(m,i,o,a,l,this.gridOuter,this.gridInner),t(this.gridOuter,i,o,this.f,this.v,this.z),t(this.gridInner,i,o,this.f,this.v,this.z),e(_,i,o,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:_,metrics:{width:a,height:l,sdfWidth:i,sdfHeight:o,top:f,left:0,advance:h}}},E.prototype.draw=function(s){return this._draw(s,!1).data},E.prototype.drawWithMetrics=function(s){return this._draw(s,!0)};function t(s,c,r,h,n,i){for(var a=0;a<c;a++)u(s,a,c,r,h,n,i);for(var o=0;o<r;o++)u(s,o*c,1,c,h,n,i)}function u(s,c,r,h,n,i,a){var o,l,f,v;for(i[0]=0,a[0]=-V,a[1]=V,o=0;o<h;o++)n[o]=s[c+o*r];for(o=1,l=0,f=0;o<h;o++){do v=i[l],f=(n[o]-n[v]+o*o-v*v)/(o-v)/2;while(f<=a[l]&&--l>-1);l++,i[l]=o,a[l]=f,a[l+1]=V}for(o=0,l=0;o<h;o++){for(;a[l+1]<o;)l++;v=i[l],s[c+o*r]=n[v]+(o-v)*(o-v)}}},sGsY:function(_e,dt,R){"use strict";var V=R("rePB"),E=R("wx14"),T=R("q1tI"),e=R("TSYQ"),t=R.n(e),u=R("H84U"),s=R("/ezw"),c=R("B6l+"),r=R.n(c),h=function(K){var G=K.value,U=K.formatter,Z=K.precision,J=K.decimalSeparator,rt=K.groupSeparator,vt=rt===void 0?"":rt,mt=K.prefixCls,ut;if(typeof U=="function")ut=U(G);else{var Rt=String(G),Ft=Rt.match(/^(-?)(\d*)(\.(\d+))?$/);if(!Ft||Rt==="-")ut=Rt;else{var wt=Ft[1],Mt=Ft[2]||"0",St=Ft[4]||"";Mt=Mt.replace(/\B(?=(\d{3})+(?!\d))/g,vt),typeof Z=="number"&&(St=r()(St,Z,"0").slice(0,Z)),St&&(St="".concat(J).concat(St)),ut=[T.createElement("span",{key:"int",className:"".concat(mt,"-content-value-int")},wt,Mt),St&&T.createElement("span",{key:"decimal",className:"".concat(mt,"-content-value-decimal")},St)]}}return T.createElement("span",{className:"".concat(mt,"-content-value")},ut)},n=h,i=function(K){var G=K.prefixCls,U=K.className,Z=K.style,J=K.valueStyle,rt=K.value,vt=rt===void 0?0:rt,mt=K.title,ut=K.valueRender,Rt=K.prefix,Ft=K.suffix,wt=K.loading,Mt=K.direction,St=K.onMouseEnter,At=K.onMouseLeave,nt=T.createElement(n,Object(E.a)({},K,{value:vt})),Pt=t()(G,Object(V.a)({},"".concat(G,"-rtl"),Mt==="rtl"),U);return T.createElement("div",{className:Pt,style:Z,onMouseEnter:St,onMouseLeave:At},mt&&T.createElement("div",{className:"".concat(G,"-title")},mt),T.createElement(s.a,{paragraph:!1,loading:wt},T.createElement("div",{style:J,className:"".concat(G,"-content")},Rt&&T.createElement("span",{className:"".concat(G,"-content-prefix")},Rt),ut?ut(nt):nt,Ft&&T.createElement("span",{className:"".concat(G,"-content-suffix")},Ft))))};i.defaultProps={decimalSeparator:".",groupSeparator:",",loading:!1};var a=Object(u.c)({prefixCls:"statistic"})(i),o=a,l=R("1OyB"),f=R("vuIU"),v=R("Ji7U"),b=R("LK+K"),g=R("ODXe"),m=R("QQZ/"),_=R.n(m),M=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function x(F,K){var G=F,U=/\[[^\]]*]/g,Z=(K.match(U)||[]).map(function(mt){return mt.slice(1,-1)}),J=K.replace(U,"[]"),rt=M.reduce(function(mt,ut){var Rt=Object(g.a)(ut,2),Ft=Rt[0],wt=Rt[1];if(mt.indexOf(Ft)!==-1){var Mt=Math.floor(G/wt);return G-=Mt*wt,mt.replace(new RegExp("".concat(Ft,"+"),"g"),function(St){var At=St.length;return _()(Mt.toString(),At,"0")})}return mt},J),vt=0;return rt.replace(U,function(){var mt=Z[vt];return vt+=1,mt})}function y(F,K){var G=K.format,U=G===void 0?"":G,Z=new Date(F).getTime(),J=Date.now(),rt=Math.max(Z-J,0);return x(rt,U)}var S=R("0n0R"),P=1e3/30;function A(F){return new Date(F).getTime()}var O=function(F){Object(v.a)(G,F);var K=Object(b.a)(G);function G(){var U;return Object(l.a)(this,G),U=K.apply(this,arguments),U.syncTimer=function(){var Z=U.props.value,J=A(Z);J>=Date.now()?U.startTimer():U.stopTimer()},U.startTimer=function(){if(!U.countdownId){var Z=U.props,J=Z.onChange,rt=Z.value,vt=A(rt);U.countdownId=window.setInterval(function(){U.forceUpdate(),J&&vt>Date.now()&&J(vt-Date.now())},P)}},U.stopTimer=function(){var Z=U.props,J=Z.onFinish,rt=Z.value;if(U.countdownId){clearInterval(U.countdownId),U.countdownId=void 0;var vt=A(rt);J&&vt<Date.now()&&J()}},U.formatCountdown=function(Z,J){var rt=U.props.format;return y(Z,Object(E.a)(Object(E.a)({},J),{format:rt}))},U.valueRender=function(Z){return Object(S.a)(Z,{title:void 0})},U}return Object(f.a)(G,[{key:"componentDidMount",value:function(){this.syncTimer()}},{key:"componentDidUpdate",value:function(){this.syncTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){return T.createElement(o,Object(E.a)({valueRender:this.valueRender},this.props,{formatter:this.formatCountdown}))}}]),G}(T.Component);O.defaultProps={format:"HH:mm:ss"};var L=O;o.Countdown=L;var H=dt.a=o},sKgW:function(_e,dt){var R=9007199254740991,V=Math.floor;function E(T,e){var t="";if(!T||e<1||e>R)return t;do e%2&&(t+=T),e=V(e/2),e&&(T+=T);while(e);return t}_e.exports=E},sXyB:function(_e,dt,R){var V=R("SksO"),E=R("b48C");function T(e,t,u){return E()?(_e.exports=T=Reflect.construct,_e.exports.default=_e.exports,_e.exports.__esModule=!0):(_e.exports=T=function(c,r,h){var n=[null];n.push.apply(n,r);var i=Function.bind.apply(c,n),a=new i;return h&&V(a,h.prototype),a},_e.exports.default=_e.exports,_e.exports.__esModule=!0),T.apply(null,arguments)}_e.exports=T,_e.exports.default=_e.exports,_e.exports.__esModule=!0},sgoq:function(_e,dt,R){var V=R("asDA"),E=R("TKrE"),T=R("6nK8"),e="['\u2019]",t=RegExp(e,"g");function u(s){return function(c){return V(T(E(c).replace(t,"")),s,"")}}_e.exports=u},sxDa:function(_e,dt,R){"use strict";R.d(dt,"e",function(){return Wl}),R.d(dt,"f",function(){return _i}),R.d(dt,"d",function(){return Hu}),R.d(dt,"a",function(){return xs}),R.d(dt,"c",function(){return xo}),R.d(dt,"g",function(){return hr}),R.d(dt,"b",function(){return Ao});var V=R("h1nZ"),E=R("lwsE"),T=R.n(E),e=R("W8MJ"),t=R.n(e),u=R("7W2i"),s=R.n(u),c=R("a1gu"),r=R.n(c),h=R("Nsbk"),n=R.n(h),i=R("QILm"),a=R.n(i),o=R("lSNA"),l=R.n(o),f=R("yG8O"),v=R.n(f),b=R("PJYZ"),g=R.n(b),m=R("U+yc"),_=R.n(m),M=R("1ABj"),x=R("GoyQ"),y=R.n(x),S=R("lSCD"),P=R.n(S),A=R("xp6e"),O=R("Hel2"),L=R("uhBA"),H=R("4U9+"),F=R.n(H),K=R("4cb6"),G,U,Z,J,rt;function vt(Y){return Y.map(function(pt){return typeof pt=="string"&&(pt=[pt,{}]),pt})}var mt=(G=Object(K.injectable)(),U=Object(K.inject)(V.TYPES.IGlobalConfigService),G(Z=(J=function(){function Y(){T()(this,Y),v()(this,"configService",rt,this),this.enabled=void 0}return t()(Y,[{key:"apply",value:function(ft,lt){var ht=this,Ot=lt.rendererService,kt=lt.postProcessingPassFactory,fe=lt.normalPassFactory;ft.hooks.init.tap("MultiPassRendererPlugin",function(){var Ie=ft.getLayerConfig(),Qe=Ie.enableMultiPassRenderer,In=Ie.passes,sr=In===void 0?[]:In;ht.enabled=!!Qe&&ft.getLayerConfig().enableMultiPassRenderer!==!1,ht.enabled&&(ft.multiPassRenderer=ht.createMultiPassRenderer(ft,sr,kt,fe),ft.multiPassRenderer.setRenderFlag(!0))}),ft.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){})}},{key:"createMultiPassRenderer",value:function(ft,lt,ht,Ot){var kt=ft.multiPassRenderer,fe=ft.getLayerConfig(),Ie=fe.enablePicking,Qe=fe.enableTAA;return Ie&&kt.add(Ot("pixelPicking")),kt}}]),Y}(),rt=_()(J.prototype,"configService",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J))||Z),ut,Rt=(ut={},l()(ut,V.BlendType.additive,{enable:!0,func:{srcRGB:V.gl.ONE,dstRGB:V.gl.ONE,srcAlpha:1,dstAlpha:1}}),l()(ut,V.BlendType.none,{enable:!1}),l()(ut,V.BlendType.normal,{enable:!0,func:{srcRGB:V.gl.SRC_ALPHA,dstRGB:V.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),l()(ut,V.BlendType.subtractive,{enable:!0,func:{srcRGB:V.gl.ONE,dstRGB:V.gl.ONE,srcAlpha:V.gl.ZERO,dstAlpha:V.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:V.gl.FUNC_SUBTRACT,alpha:V.gl.FUNC_SUBTRACT}}),l()(ut,V.BlendType.max,{enable:!0,func:{srcRGB:V.gl.ONE,dstRGB:V.gl.ONE},equation:{rgb:V.gl.MAX_EXT}}),l()(ut,V.BlendType.min,{enable:!0,func:{srcRGB:V.gl.ONE,dstRGB:V.gl.ONE},equation:{rgb:V.gl.MIN_EXT}}),ut),Ft={properties:{enablePicking:{type:"boolean"},enableHighlight:{type:"boolean"},highlightColor:{oneOf:[{type:"array",items:{type:"number",minimum:0,maximum:1}},{type:"string"}]}}},wt,Mt,St,At,nt,Pt,z;function q(Y,pt){var ft=typeof Symbol!="undefined"&&Y[Symbol.iterator]||Y["@@iterator"];if(!ft){if(Array.isArray(Y)||(ft=gt(Y))||pt&&Y&&typeof Y.length=="number"){ft&&(Y=ft);var lt=0,ht=function(){};return{s:ht,n:function(){return lt>=Y.length?{done:!0}:{done:!1,value:Y[lt++]}},e:function(Qe){throw Qe},f:ht}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ot=!0,kt=!1,fe;return{s:function(){ft=ft.call(Y)},n:function(){var Qe=ft.next();return Ot=Qe.done,Qe},e:function(Qe){kt=!0,fe=Qe},f:function(){try{!Ot&&ft.return!=null&&ft.return()}finally{if(kt)throw fe}}}}function gt(Y,pt){if(!!Y){if(typeof Y=="string")return et(Y,pt);var ft=Object.prototype.toString.call(Y).slice(8,-1);if(ft==="Object"&&Y.constructor&&(ft=Y.constructor.name),ft==="Map"||ft==="Set")return Array.from(Y);if(ft==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ft))return et(Y,pt)}}function et(Y,pt){(pt==null||pt>Y.length)&&(pt=Y.length);for(var ft=0,lt=new Array(pt);ft<pt;ft++)lt[ft]=Y[ft];return lt}function at(Y,pt){var ft=Object.keys(Y);if(Object.getOwnPropertySymbols){var lt=Object.getOwnPropertySymbols(Y);pt&&(lt=lt.filter(function(ht){return Object.getOwnPropertyDescriptor(Y,ht).enumerable})),ft.push.apply(ft,lt)}return ft}function xt(Y){for(var pt=1;pt<arguments.length;pt++){var ft=arguments[pt]!=null?arguments[pt]:{};pt%2?at(Object(ft),!0).forEach(function(lt){l()(Y,lt,ft[lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(ft)):at(Object(ft)).forEach(function(lt){Object.defineProperty(Y,lt,Object.getOwnPropertyDescriptor(ft,lt))})}return Y}function k(Y){var pt=ot();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function ot(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var it=0,$=(wt=Object(V.lazyInject)(V.TYPES.ILogService),Mt=Object(V.lazyInject)(V.TYPES.IGlobalConfigService),St=Object(V.lazyInject)(V.TYPES.IShaderModuleService),At=function(Y){s()(ft,Y);var pt=k(ft);function ft(){var lt,ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return T()(this,ft),lt=pt.call(this),lt.id="".concat(it++),lt.name="".concat(it),lt.type=void 0,lt.visible=!0,lt.zIndex=0,lt.minZoom=void 0,lt.maxZoom=void 0,lt.inited=!1,lt.layerModelNeedUpdate=!1,lt.pickedFeatureID=null,lt.selectedFeatureID=null,lt.styleNeedUpdate=!1,lt.dataState={dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1},lt.hooks={init:new A.b,afterInit:new A.b,beforeRender:new A.b,beforeRenderData:new A.d,afterRender:new A.c,beforePickingEncode:new A.c,afterPickingEncode:new A.c,beforeHighlight:new A.c(["pickedColor"]),afterHighlight:new A.c,beforeSelect:new A.c(["pickedColor"]),afterSelect:new A.c,beforeDestroy:new A.c,afterDestroy:new A.c},lt.models=[],lt.multiPassRenderer=void 0,lt.plugins=void 0,lt.sourceOption=void 0,lt.layerModel=void 0,v()(lt,"logger",nt,g()(lt)),v()(lt,"configService",Pt,g()(lt)),v()(lt,"shaderModuleService",z,g()(lt)),lt.cameraService=void 0,lt.coordinateService=void 0,lt.iconService=void 0,lt.fontService=void 0,lt.pickingService=void 0,lt.rendererService=void 0,lt.layerService=void 0,lt.interactionService=void 0,lt.mapService=void 0,lt.styleAttributeService=void 0,lt.layerSource=void 0,lt.postProcessingPassFactory=void 0,lt.normalPassFactory=void 0,lt.animateOptions={enable:!1},lt.container=void 0,lt.encodedData=void 0,lt.configSchema=void 0,lt.currentPickId=null,lt.rawConfig=void 0,lt.needUpdateConfig=void 0,lt.pendingStyleAttributes=[],lt.scaleOptions={},lt.animateStartTime=void 0,lt.aniamateStatus=!1,lt.sourceEvent=function(){lt.dataState.dataSourceNeedUpdate=!0;var Ot=lt.getLayerConfig(),kt=Ot.autoFit,fe=Ot.fitBoundsOptions;kt&&lt.fitBounds(fe),lt.emit("dataUpdate"),lt.reRender()},lt.name=ht.name||lt.id,lt.zIndex=ht.zIndex||0,lt.rawConfig=ht,lt}return t()(ft,[{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(ht){if(!this.inited)this.needUpdateConfig=xt(xt({},this.needUpdateConfig),ht);else{var Ot=this.container.get(V.TYPES.SceneID);this.configService.setLayerConfig(Ot,this.id,xt(xt(xt({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),ht)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(ht){this.container=ht}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(ht){return this.plugins.push(ht),this}},{key:"init",value:function(){var ht=this,Ot=this.container.get(V.TYPES.SceneID),kt=this.rawConfig.enableMultiPassRenderer,fe=kt===void 0?!1:kt;this.configService.setLayerConfig(Ot,this.id,{enableMultiPassRenderer:fe}),this.iconService=this.container.get(V.TYPES.IIconService),this.fontService=this.container.get(V.TYPES.IFontService),this.rendererService=this.container.get(V.TYPES.IRendererService),this.layerService=this.container.get(V.TYPES.ILayerService),this.interactionService=this.container.get(V.TYPES.IInteractionService),this.pickingService=this.container.get(V.TYPES.IPickingService),this.mapService=this.container.get(V.TYPES.IMapService),this.cameraService=this.container.get(V.TYPES.ICameraService),this.coordinateService=this.container.get(V.TYPES.ICoordinateSystemService),this.postProcessingPassFactory=this.container.get(V.TYPES.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(V.TYPES.IFactoryNormalPass),this.styleAttributeService=this.container.get(V.TYPES.IStyleAttributeService),this.multiPassRenderer=this.container.get(V.TYPES.IMultiPassRenderer),this.multiPassRenderer.setLayer(this),this.pendingStyleAttributes.forEach(function(sr){var Vr=sr.attributeName,ii=sr.attributeField,zi=sr.attributeValues,Zi=sr.updateOptions;ht.styleAttributeService.updateStyleAttribute(Vr,{scale:xt({field:ii},ht.splitValuesAndCallbackInAttribute(zi,ht.getLayerConfig()[Vr]))},Zi)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(V.TYPES.ILayerPlugin);var Ie=q(this.plugins),Qe;try{for(Ie.s();!(Qe=Ie.n()).done;){var In=Qe.value;In.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}}catch(sr){Ie.e(sr)}finally{Ie.f()}return this.hooks.init.call(),this.hooks.afterInit.call(),this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this}},{key:"prepareBuildModel",value:function(){this.inited=!0,this.updateLayerConfig(xt(xt({},this.getDefaultConfig()),this.rawConfig));var ht=this.getLayerConfig(),Ot=ht.animateOption;Ot!=null&&Ot.enable&&(this.layerService.startAnimate(),this.aniamateStatus=!0)}},{key:"color",value:function(ht,Ot,kt){return this.updateStyleAttribute("color",ht,Ot,kt),this}},{key:"rotate",value:function(ht,Ot,kt){return this.updateStyleAttribute("rotate",ht,Ot,kt),this}},{key:"size",value:function(ht,Ot,kt){return this.updateStyleAttribute("size",ht,Ot,kt),this}},{key:"filter",value:function(ht,Ot,kt){return this.updateStyleAttribute("filter",ht,Ot,kt),this}},{key:"shape",value:function(ht,Ot,kt){return this.updateStyleAttribute("shape",ht,Ot,kt),this}},{key:"label",value:function(ht,Ot,kt){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:ht,attributeValues:Ot,updateOptions:kt}),this}},{key:"animate",value:function(ht){var Ot={};return y()(ht)?(Ot.enable=!0,Ot=xt(xt({},Ot),ht)):Ot.enable=ht,this.updateLayerConfig({animateOption:Ot}),this}},{key:"source",value:function(ht,Ot){return this.sourceOption={data:ht,options:Ot},this}},{key:"setData",value:function(ht,Ot){var kt=this;return this.inited?this.layerSource.setData(ht,Ot):this.on("inited",function(){kt.layerSource.setData(ht,Ot)}),this}},{key:"style",value:function(ht){var Ot=this,kt=ht.passes,fe=a()(ht,["passes"]);return kt&&vt(kt).forEach(function(Ie){var Qe=Ot.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(Ie[0]);Qe&&Qe.updateOptions(Ie[1])}),this.rawConfig=xt(xt({},this.rawConfig),fe),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),this}},{key:"scale",value:function(ht,Ot){return y()(ht)?this.scaleOptions=xt(xt({},this.scaleOptions),ht):this.scaleOptions[ht]=Ot,this}},{key:"render",value:function(){return this.renderModels(),this}},{key:"active",value:function(ht){var Ot={};return Ot.enableHighlight=y()(ht)?!0:ht,y()(ht)?(Ot.enableHighlight=!0,ht.color&&(Ot.highlightColor=ht.color)):Ot.enableHighlight=!!ht,this.updateLayerConfig(Ot),this}},{key:"setActive",value:function(ht,Ot){var kt=this;if(y()(ht)){var fe=ht.x,Ie=fe===void 0?0:fe,Qe=ht.y,In=Qe===void 0?0:Qe;this.updateLayerConfig({highlightColor:y()(Ot)?Ot.color:this.getLayerConfig().highlightColor}),this.pick({x:Ie,y:In})}else this.updateLayerConfig({pickedFeatureID:ht,highlightColor:y()(Ot)?Ot.color:this.getLayerConfig().highlightColor}),this.hooks.beforeSelect.call(Object(O.l)(ht)).then(function(){setTimeout(function(){kt.reRender()},1)})}},{key:"select",value:function(ht){var Ot={};return Ot.enableSelect=y()(ht)?!0:ht,y()(ht)?(Ot.enableSelect=!0,ht.color&&(Ot.selectColor=ht.color)):Ot.enableSelect=!!ht,this.updateLayerConfig(Ot),this}},{key:"setSelect",value:function(ht,Ot){var kt=this;if(y()(ht)){var fe=ht.x,Ie=fe===void 0?0:fe,Qe=ht.y,In=Qe===void 0?0:Qe;this.updateLayerConfig({selectColor:y()(Ot)?Ot.color:this.getLayerConfig().selectColor}),this.pick({x:Ie,y:In})}else this.updateLayerConfig({pickedFeatureID:ht,selectColor:y()(Ot)?Ot.color:this.getLayerConfig().selectColor}),this.hooks.beforeSelect.call(Object(O.l)(ht)).then(function(){setTimeout(function(){kt.reRender()},1)})}},{key:"setBlend",value:function(ht){this.updateLayerConfig({blend:ht}),this.layerModelNeedUpdate=!0,this.reRender()}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this}},{key:"setIndex",value:function(ht){return this.zIndex=ht,this.layerService.updateRenderOrder(),this}},{key:"setCurrentPickId",value:function(ht){this.currentPickId=ht}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(ht){this.selectedFeatureID=ht}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var ht=this.mapService.getZoom(),Ot=this.getLayerConfig(),kt=Ot.visible,fe=Ot.minZoom,Ie=fe===void 0?-Infinity:fe,Qe=Ot.maxZoom,In=Qe===void 0?Infinity:Qe;return!!kt&&ht>=Ie&&ht<=In}},{key:"setMinZoom",value:function(ht){return this.updateLayerConfig({minZoom:ht}),this}},{key:"getMinZoom",value:function(){var ht=this.getLayerConfig(),Ot=ht.minZoom;return Ot}},{key:"getMaxZoom",value:function(){var ht=this.getLayerConfig(),Ot=ht.maxZoom;return Ot}},{key:"get",value:function(ht){var Ot=this.getLayerConfig();return Ot[ht]}},{key:"setMaxZoom",value:function(ht){return this.updateLayerConfig({maxZoom:ht}),this}},{key:"fitBounds",value:function(ht){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var Ot=this.getSource(),kt=Ot.extent,fe=kt.some(function(Ie){return Math.abs(Ie)===Infinity});return fe?this:(this.mapService.fitBounds([[kt[0],kt[1]],[kt[2],kt[3]]],ht),this)}},{key:"destroy",value:function(){this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),this.multiPassRenderer.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),this.emit("remove",{target:this,type:"remove"}),this.removeAllListeners()}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){this.models.forEach(function(ht){return ht.destroy()}),this.layerModel.clearModels()}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(ht){return ht.needRescale||ht.needRemapping||ht.needRegenerateVertices}).length}},{key:"setSource",value:function(ht){this.layerSource=ht;var Ot=this.mapService.getZoom();this.layerSource.cluster&&this.layerSource.updateClusterData(Ot),this.layerSource.on("update",this.sourceEvent)}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(ht){this.encodedData=ht}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getConfigSchemaForValidation",value:function(){return this.configSchema||(this.configSchema=F()([Ft,this.getConfigSchema()])),this.configSchema}},{key:"getLegendItems",value:function(ht){var Ot=this.styleAttributeService.getLayerAttributeScale(ht);if(Ot){if(Ot.ticks){var kt=Ot.ticks().map(function(Ie){return l()({value:Ie},ht,Ot(Ie))});return kt}else if(Ot.invertExtent){var fe=Ot.range().map(function(Ie){return l()({value:Ot.invertExtent(Ie)},ht,Ie)});return fe}}else return[]}},{key:"pick",value:function(ht){var Ot=ht.x,kt=ht.y;this.interactionService.triggerHover({x:Ot,y:kt})}},{key:"boxSelect",value:function(ht,Ot){this.pickingService.boxPickLayer(this,ht,Ot)}},{key:"buildLayerModel",value:function(ht){var Ot=ht.moduleName,kt=ht.vertexShader,fe=ht.fragmentShader,Ie=ht.triangulation,Qe=a()(ht,["moduleName","vertexShader","fragmentShader","triangulation"]);this.shaderModuleService.registerModule(Ot,{vs:kt,fs:fe});var In=this.shaderModuleService.getModule(Ot),sr=In.vs,Vr=In.fs,ii=In.uniforms,zi=this.rendererService.createModel,Zi=this.styleAttributeService.createAttributesAndIndices(this.encodedData,Ie),oa=Zi.attributes,no=Zi.elements;return zi(xt({attributes:oa,uniforms:ii,fs:Vr,vs:sr,elements:no,blend:Rt[V.BlendType.normal]},Qe))}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.aniamateStatus&&(this.layerService.stopAnimate(),this.aniamateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(ht){var Ot=this.getLayerConfig(),kt=Ot.enableHighlight,fe=kt===void 0?!0:kt,Ie=Ot.enableSelect,Qe=Ie===void 0?!0:Ie,In=this.eventNames().indexOf(ht)!==-1||this.eventNames().indexOf("un"+ht)!==-1;return(ht==="click"||ht==="dblclick")&&Qe&&(In=!0),ht==="mousemove"&&(fe||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(In=!0),this.isVisible()&&In}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"rebuildModels",value:function(){throw new Error("Method not implemented.")}},{key:"renderModels",value:function(){var ht=this;return this.layerModelNeedUpdate&&this.layerModel&&(this.models=this.layerModel.buildModels(),this.hooks.beforeRender.call(),this.layerModelNeedUpdate=!1),this.models.forEach(function(Ot){Ot.draw({uniforms:ht.layerModel.getUninforms()})}),this}},{key:"getConfigSchema",value:function(){throw new Error("Method not implemented.")}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"reRender",value:function(){this.inited&&this.layerService.renderLayers()}},{key:"splitValuesAndCallbackInAttribute",value:function(ht,Ot){return{values:P()(ht)?void 0:ht||Ot,callback:P()(ht)?ht:void 0}}},{key:"updateStyleAttribute",value:function(ht,Ot,kt,fe){this.inited?this.styleAttributeService.updateStyleAttribute(ht,{scale:xt({field:Ot},this.splitValuesAndCallbackInAttribute(kt,this.getLayerConfig()[Ot]))},fe):this.pendingStyleAttributes.push({attributeName:ht,attributeField:Ot,attributeValues:kt,updateOptions:fe})}}]),ft}(L.EventEmitter),nt=_()(At.prototype,"logger",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pt=_()(At.prototype,"configService",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=_()(At.prototype,"shaderModuleService",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),At),_t,yt,Nt,$t,ee,Gt=(_t=Object(V.lazyInject)(V.TYPES.IGlobalConfigService),yt=Object(V.lazyInject)(V.TYPES.IShaderModuleService),Nt=function(){function Y(pt){T()(this,Y),this.triangulation=void 0,this.layer=void 0,v()(this,"configService",$t,this),v()(this,"shaderModuleService",ee,this),this.rendererService=void 0,this.iconService=void 0,this.fontService=void 0,this.styleAttributeService=void 0,this.mapService=void 0,this.cameraService=void 0,this.layerService=void 0,this.layer=pt,this.rendererService=pt.getContainer().get(V.TYPES.IRendererService),this.styleAttributeService=pt.getContainer().get(V.TYPES.IStyleAttributeService),this.mapService=pt.getContainer().get(V.TYPES.IMapService),this.iconService=pt.getContainer().get(V.TYPES.IIconService),this.fontService=pt.getContainer().get(V.TYPES.IFontService),this.cameraService=pt.getContainer().get(V.TYPES.ICameraService),this.layerService=pt.getContainer().get(V.TYPES.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate()}return t()(Y,[{key:"getBlend",value:function(){var ft=this.layer.getLayerConfig(),lt=ft.blend,ht=lt===void 0?"normal":lt;return Rt[V.BlendType[ht]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){return!1}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){throw new Error("Method not implemented.")}},{key:"clearModels",value:function(){}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(ft){return[ft.enable?0:1,ft.duration||4,ft.interval||.2,ft.trailLength||.1]}},{key:"startModelAnimate",value:function(){var ft=this.layer.getLayerConfig(),lt=ft.animateOption;lt.enable&&this.layer.setAnimateStartTime()}}]),Y}(),$t=_()(Nt.prototype,"configService",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=_()(Nt.prototype,"shaderModuleService",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt),Ht=R("J4zp"),ae=R.n(Ht),le=R("RIqP"),Be=R.n(le),Ce=R("VmRL"),We=R.n(Ce),Ye=R("IOcx"),wn=Ye.c.create(),er=Ye.c.create(),Lr=Ye.c.create(),on=Ye.c.create(),en=Ye.c.create();function An(Y,pt,ft,lt,ht){Ye.c.add(Y,ft,lt),Ye.c.normalize(Y,Y),pt=Ye.c.fromValues(-Y[1],Y[0]);var Ot=Ye.c.fromValues(-ft[1],ft[0]);return[ht/Ye.c.dot(pt,Ot),pt]}function Bn(Y,pt){return Ye.c.set(Y,-pt[1],pt[0])}function gr(Y,pt,ft){return Ye.c.sub(Y,pt,ft),Ye.c.normalize(Y,Y),Y}function hi(Y,pt){return Y[0]===pt[0]&&Y[1]===pt[1]}function Ae(Y){for(var pt=new Map,ft=0;ft<Y.length;ft++){var lt=Y[0].toString()+"-"+Y[1].toString();pt.get(lt)?(Y.splice(ft,1),ft++):pt.set(lt,lt)}return Y}var Me=function(){function Y(){var pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};T()(this,Y),this.complex=void 0,this.join=void 0,this.cap=void 0,this.miterLimit=void 0,this.thickness=void 0,this.normal=void 0,this.lastFlip=-1,this.miter=Ye.c.fromValues(0,0),this.started=!1,this.dash=!1,this.totalDistance=0,this.join=pt.join||"miter",this.cap=pt.cap||"butt",this.miterLimit=pt.miterLimit||10,this.thickness=pt.thickness||1,this.dash=pt.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0}}return t()(Y,[{key:"extrude",value:function(ft){var lt=this.complex;if(ft.length<=1)return lt;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var ht=ft.length,Ot=lt.startIndex,kt=1;kt<ht;kt++){var fe=ft[kt-1],Ie=ft[kt],Qe=kt<ft.length-1?ft[kt+1]:null,In=this.segment(lt,Ot,fe,Ie,Qe);Ot+=In}if(this.dash)for(var sr=0;sr<lt.positions.length/6;sr++)lt.positions[sr*6+5]=this.totalDistance;return lt.startIndex=lt.positions.length/6,lt}},{key:"segment",value:function(ft,lt,ht,Ot,kt){var fe=0,Ie=ft.indices,Qe=ft.positions,In=ft.normals,sr=this.cap==="square",Vr=this.join==="bevel",ii=Object(O.d)([Ot[0],Ot[1]]),zi=Object(O.d)([ht[0],ht[1]]);gr(Lr,ii,zi);var Zi=0;if(this.dash&&(Zi=this.lineSegmentDistance(ii,zi),this.totalDistance+=Zi),this.normal||(this.normal=Ye.c.create(),Bn(this.normal,Lr)),!this.started)if(this.started=!0,sr){var oa=Ye.c.create(),no=Ye.c.create();Ye.c.add(oa,this.normal,Lr),Ye.c.add(no,this.normal,Lr),In.push(no[0],no[1],0),In.push(oa[0],oa[1],0),Qe.push(ht[0],ht[1],0,this.totalDistance-Zi,-this.thickness,0),Qe.push(ht[0],ht[1],0,this.totalDistance-Zi,this.thickness,0)}else this.extrusions(Qe,In,ht,this.normal,this.thickness,this.totalDistance-Zi);if(Ie.push(lt+0,lt+1,lt+2),kt){var fs=Object(O.d)([kt[0],kt[1]]);hi(ii,fs)&&Ye.c.add(fs,ii,Ye.c.normalize(fs,Ye.c.subtract(fs,ii,zi))),gr(on,fs,ii);var Yo=An(en,Ye.c.create(),Lr,on,this.thickness),Pu=ae()(Yo,2),Po=Pu[0],Vu=Pu[1],vl=Ye.c.dot(en,this.normal)<0?-1:1,rc=Vr;if(!rc&&this.join==="miter"){var Xo=Po;Xo>this.miterLimit&&(rc=!0)}rc?(In.push(this.normal[0],this.normal[1],0),In.push(Vu[0],Vu[1],0),Qe.push(Ot[0],Ot[1],0,this.totalDistance,-this.thickness*vl,0),Qe.push(Ot[0],Ot[1],0,this.totalDistance,this.thickness*vl,0),Ie.push.apply(Ie,Be()(this.lastFlip!==-vl?[lt,lt+2,lt+3]:[lt+2,lt+1,lt+3])),Ie.push(lt+2,lt+3,lt+4),Bn(wn,on),Ye.c.copy(this.normal,wn),In.push(this.normal[0],this.normal[1],0),Qe.push(Ot[0],Ot[1],0,this.totalDistance,-this.thickness*vl,0),fe+=3):(this.extrusions(Qe,In,Ot,Vu,Po,this.totalDistance),Ie.push.apply(Ie,Be()(this.lastFlip===1?[lt,lt+2,lt+3]:[lt+2,lt+1,lt+3])),vl=-1,Ye.c.copy(this.normal,Vu),fe+=2),this.lastFlip=vl}else{if(Bn(this.normal,Lr),sr){var Go=Ye.c.create(),ks=Ye.c.create();Ye.c.sub(ks,Lr,this.normal),Ye.c.add(Go,Lr,this.normal),In.push(ks[0],ks[1],0),In.push(Go[0],Go[1],0),Qe.push(Ot[0],Ot[1],0,this.totalDistance,this.thickness,0),Qe.push(Ot[0],Ot[1],0,this.totalDistance,this.thickness,0)}else this.extrusions(Qe,In,Ot,this.normal,this.thickness,this.totalDistance);Ie.push.apply(Ie,Be()(this.lastFlip===1?[lt,lt+2,lt+3]:[lt+2,lt+1,lt+3])),fe+=2}return fe}},{key:"extrusions",value:function(ft,lt,ht,Ot,kt,fe){lt.push(Ot[0],Ot[1],0),lt.push(Ot[0],Ot[1],0),ft.push(ht[0],ht[1],0,fe,-kt,0),ft.push(ht[0],ht[1],0,fe,kt,0)}},{key:"lineSegmentDistance",value:function(ft,lt){var ht=lt[0]-ft[0],Ot=lt[1]-ft[1];return Math.sqrt(ht*ht+Ot*Ot)}}]),Y}(),Qt=R("UB5X"),ge=R.n(Qt);function Wt(Y){if(ge()(Y[0]))return Y;if(ge()(Y[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(ge()(Y[0][0][0])){var pt=Y,ft=0,lt=0,ht=0;return pt.forEach(function(Ot){Ot.forEach(function(kt){ft+=kt[0],lt+=kt[1],ht++})}),[ft/ht,lt/ht,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function re(Y){var pt=Y[0][0],ft=Y[0][Y[0].length-1];pt[0]===ft[0]&&pt[1]===ft[1]&&(Y[0]=Y[0].slice(0,Y[0].length-1));for(var lt=Y[0].length,ht=We.a.flatten(Y),Ot=ht.vertices,kt=ht.dimensions,fe=[],Ie=[],Qe=0;Qe<Ot.length/kt;Qe++)kt===2?fe.push(Ot[Qe*2],Ot[Qe*2+1],1):fe.push(Ot[Qe*3],Ot[Qe*3+1],1);var In=We()(ht.vertices,ht.holes,ht.dimensions);Ie.push.apply(Ie,Be()(In));for(var sr=function(zi){var Zi=ht.vertices.slice(zi*kt,(zi+1)*kt),oa=ht.vertices.slice((zi+1)*kt,(zi+2)*kt);oa.length===0&&(oa=ht.vertices.slice(0,kt));var no=fe.length/3;fe.push(Zi[0],Zi[1],1,oa[0],oa[1],1,Zi[0],Zi[1],0,oa[0],oa[1],0),Ie.push.apply(Ie,Be()([0,2,1,2,3,1].map(function(Go){return Go+no})))},Vr=0;Vr<lt;Vr++)sr(Vr);return{positions:fe,index:Ie}}function Te(Y){var pt=We.a.flatten(Y),ft=We()(pt.vertices,pt.holes,pt.dimensions);return{positions:pt.vertices,index:ft}}function ue(Y){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ft=Y[0][0],lt=Y[0][Y[0].length-1];ft[0]===lt[0]&&ft[1]===lt[1]&&(Y[0]=Y[0].slice(0,Y[0].length-1));for(var ht=Y[0].length,Ot=We.a.flatten(Y),kt=Ot.vertices,fe=Ot.dimensions,Ie=[],Qe=[],In=[],sr=0;sr<kt.length/fe;sr++)fe===2?Ie.push(kt[sr*2],kt[sr*2+1],1,-1,-1):Ie.push(kt[sr*3],kt[sr*3+1],1,-1,-1),In.push(0,0,1);var Vr=We()(Ot.vertices,Ot.holes,Ot.dimensions);Qe.push.apply(Qe,Be()(Vr));for(var ii=function(oa){var no=Ot.vertices.slice(oa*fe,(oa+1)*fe),Go=Ot.vertices.slice((oa+1)*fe,(oa+2)*fe);Go.length===0&&(Go=Ot.vertices.slice(0,fe));var ks=Ie.length/5;Ie.push(no[0],no[1],1,0,0,Go[0],Go[1],1,.1,0,no[0],no[1],0,0,.8,Go[0],Go[1],0,.1,.8);var fs=be([Go[0],Go[1],1],[no[0],no[1],0],[no[0],no[1],1],pt);In.push.apply(In,Be()(fs).concat(Be()(fs),Be()(fs),Be()(fs))),Qe.push.apply(Qe,Be()([1,2,0,3,2,1].map(function(Yo){return Yo+ks})))},zi=0;zi<ht;zi++)ii(zi);return{positions:Ie,index:Qe,normals:In}}function be(Y,pt,ft){var lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,ht=Ye.d.create(),Ot=Ye.d.create(),kt=Ye.d.create();lt&&(Y=Object(O.p)(Y),pt=Object(O.p)(pt),ft=Object(O.p)(ft));var fe=Ye.d.fromValues.apply(Ye.d,Be()(Y)),Ie=Ye.d.fromValues.apply(Ye.d,Be()(pt)),Qe=Ye.d.fromValues.apply(Ye.d,Be()(ft));Ye.d.sub(ht,Qe,Ie),Ye.d.sub(Ot,fe,Ie),Ye.d.cross(kt,ht,Ot);var In=Ye.d.create();return Ye.d.normalize(In,kt),In}var Xe,Rn;(function(Y){Y.CYLINDER="cylinder",Y.SQUARECOLUMN="squareColumn",Y.TRIANGLECOLUMN="triangleColumn",Y.HEXAGONCOLUMN="hexagonColumn",Y.PENTAGONCOLUMN="pentagonColumn"})(Rn||(Rn={}));var tr;(function(Y){Y.CIRCLE="circle",Y.SQUARE="square",Y.TRIANGLE="triangle",Y.HEXAGON="hexagon",Y.PENTAGON="pentagon"})(tr||(tr={}));function Mn(Y){for(var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ft=Math.PI*2/Y,lt=[],ht=0;ht<Y;ht++)lt.push(ft*ht+pt*Math.PI/12);var Ot=lt.map(function(kt){var fe=Math.sin(kt+Math.PI/4),Ie=Math.cos(kt+Math.PI/4);return[fe,Ie,0]});return Ot}function vn(){return Mn(30)}function Ar(){return Mn(4)}function or(){return Mn(3)}function cn(){return Mn(6,1)}function Pr(){return Mn(5)}var Sr=(Xe={},l()(Xe,tr.CIRCLE,vn),l()(Xe,tr.HEXAGON,cn),l()(Xe,tr.TRIANGLE,or),l()(Xe,tr.SQUARE,Ar),l()(Xe,tr.PENTAGON,Pr),l()(Xe,Rn.CYLINDER,vn),l()(Xe,Rn.HEXAGONCOLUMN,cn),l()(Xe,Rn.TRIANGLECOLUMN,or),l()(Xe,Rn.SQUARECOLUMN,Ar),l()(Xe,Rn.PENTAGONCOLUMN,Pr),Xe),De={};function $e(Y){var pt=Wt(Y.coordinates);return{vertices:[].concat(Be()(pt),Be()(pt),Be()(pt),Be()(pt)),indices:[0,1,2,2,3,0],size:pt.length}}function Ve(Y){var pt=Y.shape,ft=xr(pt,!1),lt=ft.positions,ht=ft.index,Ot=ft.normals;return{vertices:lt,indices:ht,normals:Ot,size:5}}function En(Y){var pt=Wt(Y.coordinates);return{vertices:Be()(pt),indices:[0],size:pt.length}}function xn(Y){var pt=Y.coordinates,ft=pt;Array.isArray(ft[0][0])||(ft=[pt]);var lt=new Me({dash:!0,join:"bevel"});ft.forEach(function(Ot){lt.extrude(Ot)});var ht=lt.complex;return{vertices:ht.positions,indices:ht.indices,normals:ht.normals,size:6}}function Nn(Y){var pt=Y.coordinates,ft=We.a.flatten(pt),lt=ft.vertices,ht=ft.dimensions,Ot=ft.holes;return{indices:We()(lt,Ot,ht),vertices:lt,size:ht}}function mn(Y){var pt=Y.coordinates,ft=ue(pt,!0),lt=ft.positions,ht=ft.index,Ot=ft.normals;return{vertices:lt,indices:ht,normals:Ot,size:5}}function Dn(Y){var pt=Y.shape,ft=Ta(pt),lt=ft.positions,ht=ft.index;return{vertices:lt,indices:ht,size:3}}function $n(Y){var pt=Y.coordinates,ft=[].concat(Be()(pt[0]),[0,0,1,pt[1][0],pt[0][1],0,1,1],Be()(pt[1]),[0,1,0],Be()(pt[0]),[0,0,1],Be()(pt[1]),[0,1,0,pt[0][0],pt[1][1],0,0,0]),lt=[0,1,2,3,4,5];return{vertices:ft,indices:lt,size:5}}function Wn(Y){for(var pt=30,ft=Y.coordinates,lt=[],ht=[],Ot=function(Ie){lt.push(Ie,1,Ie,ft[0][0],ft[0][1],ft[1][0],ft[1][1],Ie,-1,Ie,ft[0][0],ft[0][1],ft[1][0],ft[1][1]),Ie!==pt-1&&ht.push.apply(ht,Be()([0,1,2,1,3,2].map(function(Qe){return Ie*2+Qe})))},kt=0;kt<pt;kt++)Ot(kt);return{vertices:lt,indices:ht,size:7}}function _n(Y){var pt=Y.coordinates;pt.length===2&&pt.push(0);var ft=Y.size,lt=Aa(-1,1),ht=Aa(1,1),Ot=Aa(-1,-1),kt=Aa(1,-1),fe=[].concat(Be()(pt),Be()(lt),Be()(pt),Be()(Ot),Be()(pt),Be()(kt),Be()(pt),Be()(ht)),Ie=[0,1,2,3,0,2];return{vertices:fe,indices:Ie,size:5}}function xr(Y){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(De&&De[Y])return De[Y];var ft=Sr[Y]?Sr[Y]():Sr.cylinder(),lt=ue([ft],pt);return De[Y]=lt,lt}function mr(Y,pt){for(var ft=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,ht=new Float32Array(Y.length/ft*3),Ot,kt,fe,Ie=Ye.d.create(),Qe=Ye.d.create(),In=Ye.d.create(),sr=0,Vr=pt.length;sr<Vr;sr+=3){Ot=pt[sr+0]*3,kt=pt[sr+1]*3,fe=pt[sr+2]*3;var ii=[Y[Ot],Y[Ot+1]],zi=[Y[kt],Y[kt+1]],Zi=[Y[fe],Y[fe+1]];lt&&(ii=Object(O.p)(ii),zi=Object(O.p)(zi),Zi=Object(O.p)(Zi));var oa=ii,no=ae()(oa,2),Go=no[0],ks=no[1],fs=Ye.d.fromValues(Go,ks,Y[Ot+2]),Yo=zi,Pu=ae()(Yo,2),Po=Pu[0],Vu=Pu[1],vl=Ye.d.fromValues(Po,Vu,Y[kt+2]),rc=Zi,Xo=ae()(rc,2),vc=Xo[0],kl=Xo[1],$f=Ye.d.fromValues(vc,kl,Y[fe+2]);Ye.d.sub(Ie,$f,vl),Ye.d.sub(Qe,fs,vl),Ye.d.cross(In,Ie,Qe),ht[Ot]+=Ie[0],ht[Ot+1]+=Ie[1],ht[Ot+2]+=Ie[2],ht[kt]+=Ie[0],ht[kt+1]+=Ie[1],ht[kt+2]+=Ie[2],ht[fe]+=Ie[0],ht[fe+1]+=Ie[1],ht[fe+2]+=Ie[2]}return Fr(ht),ht}function Fr(Y){for(var pt=0,ft=Y.length;pt<ft;pt+=3){var lt=Ye.d.fromValues(Y[pt],Y[pt+1],Y[pt+2]),ht=Ye.d.create();Ye.d.normalize(ht,lt),Y.set(ht,pt)}}function xi(Y){var pt=Y[0][0],ft=Y[0][Y[0].length-1];return pt[0]===ft[0]&&pt[1]===ft[1]}function Ta(Y){var pt=["cylinder","triangleColumn","hexagonColumn","squareColumn"],ft=Sr[Y]?Sr[Y]():Sr.circle(),lt=pt.indexOf(Y)===-1?Te([ft]):re([ft]);return lt}function Aa(Y,pt){var ft=(Y+1)/2,lt=(pt+1)/2;return[ft,lt]}function to(Y){var pt=Vo();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Vo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ro=`uniform float u_opacity: 1.0;
uniform vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];
uniform float u_near : 0;
uniform float u_far : 1;
varying vec4 v_Color;
varying vec2 v_texCoord;
uniform float u_Zoom : 1;
uniform float u_time;

#pragma include "picking"

vec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {
    float s = step(hot, n);
    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);

    return mix(darkColor, color, s);
}
float random (vec2 st) {
    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);
}

float LinearizeDepth()
{
    float z = gl_FragCoord.z * 2.0 - 1.0;
    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));
}

vec3 fog(vec3 color, vec3 fogColor, float depth){
    float fogFactor=clamp(depth,0.0,1.0);
    vec3 output_color=mix(fogColor,color,fogFactor);
    return output_color;
}

float sdRect(vec2 p, vec2 sz) {
  vec2 d = abs(p) - sz;
  float outside = length(max(d, 0.));
  float inside = min(max(d.x, d.y), 0.);
  return outside + inside;
}

void main() {
  gl_FragColor = v_Color;
  vec3 baseColor = u_baseColor.xyz;
  vec3 brightColor = u_brightColor.xyz;
  vec3 windowColor = u_windowColor.xyz;
  float targetColId = 5.;
  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;
  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);
  if(v_texCoord.x < 0.) { //\u9876\u90E8\u989C\u8272
       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);
       gl_FragColor = vec4( foggedColor, v_Color.w);
  }else { // \u4FA7\u9762\u989C\u8272
        vec2 st = v_texCoord;
        vec2  UvScale = v_texCoord;
        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));
        float tStart = 0.25 * tStep;
        float tEnd = 0.75 * tStep;
        float u = mod(UvScale.x, tStep);
        float v = mod(UvScale.y, tStep);
        float ux = floor(UvScale.x/tStep);
        float uy = floor(UvScale.y/tStep);
        float n = random(vec2(ux,uy));
        float lightP = u_time;
        float head = 1.0- step(0.005,st.y);
        /*step3*/
        // \u5C06\u7A97\u6237\u989C\u8272\u548C\u5899\u9762\u989C\u8272\u533A\u522B\u5F00\u6765
        float sU = step(tStart, u) - step(tEnd, u);
        float sV = step(tStart, v) - step(tEnd, v);
        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));
        float dist = sdRect(vec2(u,v), windowSize);
        float s = sU * sV;

        float curColId = floor(UvScale.x / tStep);
        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);

        float mLightP = mod(lightP, 2.);
        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);
        if(ux == targetColId){
            n =0.;
        }
        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );
        float hot = smoothstep(1.0,0.0,timeP);
        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);
        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);
        float sFinal = s * sCol * sRow;
        color += mix(baseColor, brightColor, sFinal*n);
        if (st.y<0.01){
        color = baseColor;
         }
        if(head ==1.0) { // \u9876\u90E8\u4EAE\u7EBF
            color = brightColor;
        }
        color = color * v_Color.rgb;

        vec3 foggedColor = fog(color,fogColor,depth);

        gl_FragColor = vec4(foggedColor,1.0);
  }
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,ro=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

attribute vec2 a_Uv;
varying vec2 v_texCoord;

varying vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);
   v_texCoord = a_Uv;
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,vs=function(Y){s()(ft,Y);var pt=to(ft);function ft(){return T()(this,ft),pt.apply(this,arguments)}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ot===void 0?1:Ot,fe=ht.baseColor,Ie=fe===void 0?"rgb(16,16,16)":fe,Qe=ht.brightColor,In=Qe===void 0?"rgb(255,176,38)":Qe,sr=ht.windowColor,Vr=sr===void 0?"rgb(30,60,89)":sr,ii=ht.time,zi=ii===void 0?0:ii;return{u_opacity:kt,u_baseColor:Object(O.s)(Ie),u_brightColor:Object(O.s)(In),u_windowColor:Object(O.s)(Vr),u_time:this.layer.getLayerAnimateTime()||zi}}},{key:"initModels",value:function(){return this.startModelAnimate(),[this.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:ro,fragmentShader:Ro,triangulation:mn})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:V.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Ot,kt,fe,Ie,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ot,kt,fe,Ie){var Qe=Ot.size,In=Qe===void 0?10:Qe;return Array.isArray(In)?[In[0]]:[In]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:V.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Ot,kt,fe,Ie){var Qe=Ot.size;return[fe[3],fe[4]]}}})}}]),ft}(Gt);function Jo(Y){var pt=Do();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Do(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var xs=function(Y){s()(ft,Y);var pt=Jo(ft);function ft(){var lt;T()(this,ft);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=pt.call.apply(pt,[this].concat(Ot)),lt.type="PolygonLayer",lt}return t()(ft,[{key:"buildModels",value:function(){this.layerModel=new vs(this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"setLight",value:function(ht){this.updateLayerConfig({time:ht})}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){return"citybuilding"}}]),ft}($);function Ra(Y){var pt=$o();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function $o(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var jo=`precision highp float;\r
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807\r
attribute vec3 a_Position;\r
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807\r
attribute vec3 a_Pos;\r
attribute float a_Size;\r
attribute vec4 a_Color;\r
uniform vec2 u_radius;\r
uniform float u_coverage: 0.9;\r
uniform float u_angle: 0;\r
uniform mat4 u_ModelMatrix;\r
varying vec4 v_color;\r
\r
#pragma include "projection"\r
#pragma include "project"\r
#pragma include "picking"\r
\r
void main() {\r
  v_color = a_Color;\r
\r
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\r
  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage ;\r
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r
  gl_Position = project_common_position_to_clipspace(project_pos);\r
\r
  setPickingColor(a_PickingColor);\r
}\r
`,Js=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,io=function(Y){s()(ft,Y);var pt=Ra(ft);function ft(){return T()(this,ft),pt.apply(this,arguments)}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.coverage,fe=ht.angle;return{u_opacity:Ot||1,u_coverage:kt||.9,u_angle:fe||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"gridheatmap",vertexShader:jo,fragmentShader:Js,triangulation:Dn,depth:{enable:!1},primitive:V.gl.TRIANGLES,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:V.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Ot,kt){var fe=Ot.coordinates;return[fe[0],fe[1],0]}}})}}]),ft}(Gt);function so(Y){var pt=Gs();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Gs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ne=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;

attribute vec3 a_Normal;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
varying vec4 v_color;

#pragma include "projection"
#pragma include "project"
#pragma include "light"
#pragma include "picking"

void main() {
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
  vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));
  float lightWeight = calc_lighting(project_pos);
  v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);

  gl_Position = project_common_position_to_clipspace(project_pos);
  setPickingColor(a_PickingColor);
}
`,se=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Yt=function(Y){s()(ft,Y);var pt=so(ft);function ft(){return T()(this,ft),pt.apply(this,arguments)}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.coverage,fe=ht.angle;return{u_opacity:Ot||1,u_coverage:kt||1,u_angle:fe||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"grid3dheatmap",vertexShader:Ne,fragmentShader:se,triangulation:Ve,depth:{enable:!0},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ot,kt,fe,Ie){var Qe=Ot.size;return Array.isArray(Qe)?[Qe[0]]:[Qe]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:V.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Ot,kt,fe,Ie,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:V.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Ot,kt){var fe=Ot.coordinates;return[fe[0],fe[1],0]}}})}}]),ft}(Gt);function Ee(Y,pt){for(var ft=[],lt=[],ht=[],Ot=Y+1,kt=pt+1,fe=Y/2,Ie=pt/2,Qe=0;Qe<kt;Qe++)for(var In=Qe-Ie,sr=0;sr<Ot;sr++){var Vr=sr-fe;lt.push(Vr/fe,-In/Ie,0),ht.push(sr/Y),ht.push(1-Qe/pt)}for(var ii=0;ii<pt;ii++)for(var zi=0;zi<Y;zi++){var Zi=zi+Ot*ii,oa=zi+Ot*(ii+1),no=zi+1+Ot*(ii+1),Go=zi+1+Ot*ii;ft.push(Zi,oa,Go),ft.push(oa,no,Go)}return{vertices:lt,indices:ft,uvs:ht}}function sn(Y,pt){var ft=Object.keys(Y);if(Object.getOwnPropertySymbols){var lt=Object.getOwnPropertySymbols(Y);pt&&(lt=lt.filter(function(ht){return Object.getOwnPropertyDescriptor(Y,ht).enumerable})),ft.push.apply(ft,lt)}return ft}function Fn(Y){for(var pt=1;pt<arguments.length;pt++){var ft=arguments[pt]!=null?arguments[pt]:{};pt%2?sn(Object(ft),!0).forEach(function(lt){l()(Y,lt,ft[lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(ft)):sn(Object(ft)).forEach(function(lt){Object.defineProperty(Y,lt,Object.getOwnPropertyDescriptor(ft,lt))})}return Y}function rr(Y){var pt=qn();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function qn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var $r=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
   
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor = color;
    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;
     gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;

}
`,bi=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
uniform mat4 u_ModelMatrix;
uniform mat4 u_InverseViewProjectionMatrix;
uniform mat4 u_ViewProjectionMatrixUncentered;
varying float v_intensity;

vec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {
    float t2 = t * t;
    float one_minus_t = 1.0 - t;
    float one_minus_t2 = one_minus_t * one_minus_t;
    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);
}
vec2 toBezier(float t, vec4 p){
    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));
}
#pragma include "projection"
void main() {
  v_texCoord = a_Uv;

  vec2 pos =(a_Uv * vec2(2.0) - vec2(1.0));


  vec4 p1 = vec4(pos, 0.0, 1.0);
	vec4 p2 = vec4(pos, 1.0, 1.0);

	vec4 inverseP1 = u_InverseViewProjectionMatrix * p1;
	vec4 inverseP2 = u_InverseViewProjectionMatrix * p2;

  inverseP1 = inverseP1 / inverseP1.w;
	inverseP2 = inverseP2 / inverseP2.w;

	float zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z);
	vec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);

  vec4 b= vec4(0.5000, 0, 1, 0.5000);
  float fh;

  v_intensity = texture2D(u_texture, v_texCoord).r;
  fh = toBezier(v_intensity, b).y;
  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.), 1.0);

}
`,wi=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor =color;
    gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;

}
`,Vi=`precision highp float;
uniform float u_intensity;
varying float v_weight;
varying vec2 v_extrude;
#define GAUSS_COEF  0.3989422804014327
void main(){
    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);
    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);
    gl_FragColor = vec4(val, 1., 1., 1.);
}
`,sa=`precision highp float;
attribute vec3 a_Position;
attribute float a_Size;
attribute vec2 a_Dir;
uniform float u_intensity;
uniform float u_radius;
varying vec2 v_extrude;
varying float v_weight;
uniform mat4 u_ModelMatrix;

#define GAUSS_COEF  0.3989422804014327

#pragma include "projection"

void main(){
    v_weight = a_Size;
    float ZERO = 1.0 / 255.0 / 16.0;
    float extrude_x = a_Dir.x * 2.0 -1.0;
    float extrude_y = a_Dir.y * 2.0 -1.0;
    vec2 extrude_dir = normalize(vec2(extrude_x,extrude_y));
    float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 3.0;
    v_extrude = extrude_dir * S;

    vec2 offset = project_pixel(v_extrude * u_radius);
    vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));
}
`,$a=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
varying float v_intensity;
void main() {
  v_texCoord = a_Uv;
  v_intensity = texture2D(u_texture, v_texCoord).r;
  gl_Position = vec4(a_Position.xy, 0, 1.);
}
`,Ca=function(Y){s()(ft,Y);var pt=rr(ft);function ft(){var lt;T()(this,ft);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=pt.call.apply(pt,[this].concat(Ot)),lt.texture=void 0,lt.colorTexture=void 0,lt.heatmapFramerBuffer=void 0,lt.intensityModel=void 0,lt.colorModel=void 0,lt.shapeType=void 0,lt}return t()(ft,[{key:"render",value:function(){var ht=this,Ot=this.rendererService,kt=Ot.clear,fe=Ot.useFramebuffer;fe(this.heatmapFramerBuffer,function(){kt({color:[0,0,0,0],depth:1,stencil:0,framebuffer:ht.heatmapFramerBuffer}),ht.drawIntensityMode()}),this.layer.styleNeedUpdate&&this.updateColorTexture(),this.shapeType==="heatmap"?this.drawColorMode():this.draw3DHeatMap()}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){var ht,Ot=this.rendererService,kt=Ot.createFramebuffer,fe=Ot.clear,Ie=Ot.getViewportSize,Qe=Ot.createTexture2D,In=Ot.useFramebuffer,sr=this.styleAttributeService.getLayerStyleAttribute("shape"),Vr=(sr==null||(ht=sr.scale)===null||ht===void 0?void 0:ht.field)||"heatmap";this.shapeType=Vr,this.intensityModel=this.buildHeatMapIntensity(),this.colorModel=Vr==="heatmap"?this.buildHeatmapColor():this.build3dHeatMap();var ii=this.layer.getLayerConfig(),zi=ii.rampColors,Zi=Object(O.n)(zi),oa=Ie(),no=oa.width,Go=oa.height;return this.heatmapFramerBuffer=kt({color:Qe({width:Math.floor(no/4),height:Math.floor(Go/4),wrapS:V.gl.CLAMP_TO_EDGE,wrapT:V.gl.CLAMP_TO_EDGE,min:V.gl.LINEAR,mag:V.gl.LINEAR}),depth:!1}),this.updateColorTexture(),[this.intensityModel,this.colorModel]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:V.AttributeType.Attribute,descriptor:{name:"a_Dir",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Ot,kt,fe,Ie){return[fe[3],fe[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ot,kt,fe,Ie){var Qe=Ot.size,In=Qe===void 0?1:Qe;return[In]}}})}},{key:"buildHeatMapIntensity",value:function(){return this.layer.buildLayerModel({moduleName:"heatmapintensity",vertexShader:sa,fragmentShader:Vi,triangulation:_n,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:V.gl.ONE,srcAlpha:1,dstRGB:V.gl.ONE,dstAlpha:1}}})}},{key:"buildHeatmapColor",value:function(){this.shaderModuleService.registerModule("heatmapColor",{vs:$a,fs:wi});var ht=this.shaderModuleService.getModule("heatmapColor"),Ot=ht.vs,kt=ht.fs,fe=ht.uniforms,Ie=this.rendererService,Qe=Ie.createAttribute,In=Ie.createElements,sr=Ie.createBuffer,Vr=Ie.createModel;return Vr({vs:Ot,fs:kt,attributes:{a_Position:Qe({buffer:sr({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:V.gl.FLOAT}),size:3}),a_Uv:Qe({buffer:sr({data:[0,1,1,1,0,0,1,0],type:V.gl.FLOAT}),size:2})},uniforms:Fn({},fe),depth:{enable:!1},blend:this.getBlend(),count:6,elements:In({data:[0,2,1,2,3,1],type:V.gl.UNSIGNED_INT,count:6})})}},{key:"drawIntensityMode",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.intensity,fe=kt===void 0?10:kt,Ie=ht.radius,Qe=Ie===void 0?5:Ie;this.intensityModel.draw({uniforms:{u_opacity:Ot||1,u_radius:Qe,u_intensity:fe}})}},{key:"drawColorMode",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity;this.colorModel.draw({uniforms:{u_opacity:Ot||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer}})}},{key:"draw3DHeatMap",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ye.b.invert(Ye.b.create(),Ye.b.fromValues.apply(Ye.b,Be()(this.cameraService.getViewProjectionMatrixUncentered())));this.colorModel.draw({uniforms:{u_opacity:Ot||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:Be()(kt)}})}},{key:"build3dHeatMap",value:function(){var ht=this.rendererService.getViewportSize,Ot=ht(),kt=Ot.width,fe=Ot.height,Ie=Ee(kt/4,fe/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:bi,fs:$r});var Qe=this.shaderModuleService.getModule("heatmap3dColor"),In=Qe.vs,sr=Qe.fs,Vr=Qe.uniforms,ii=this.rendererService,zi=ii.createAttribute,Zi=ii.createElements,oa=ii.createBuffer,no=ii.createModel;return no({vs:In,fs:sr,attributes:{a_Position:zi({buffer:oa({data:Ie.vertices,type:V.gl.FLOAT}),size:3}),a_Uv:zi({buffer:oa({data:Ie.uvs,type:V.gl.FLOAT}),size:2})},primitive:V.gl.TRIANGLES,uniforms:Fn({},Vr),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:V.gl.SRC_ALPHA,srcAlpha:1,dstRGB:V.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:Zi({data:Ie.indices,type:V.gl.UNSIGNED_INT,count:Ie.indices.length})})}},{key:"updateStyle",value:function(){this.updateColorTexture()}},{key:"updateColorTexture",value:function(){var ht=this.rendererService.createTexture2D;this.texture&&this.texture.destroy();var Ot=this.layer.getLayerConfig(),kt=Ot.rampColors,fe=Object(O.n)(kt);this.colorTexture=ht({data:new Uint8Array(fe.data),width:fe.width,height:fe.height,wrapS:V.gl.CLAMP_TO_EDGE,wrapT:V.gl.CLAMP_TO_EDGE,min:V.gl.NEAREST,mag:V.gl.NEAREST,flipY:!1})}}]),ft}(Gt);function _o(Y){var pt=Fa();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Fa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var uo=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,vo=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
varying vec4 v_color;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

void main() {
  v_color = a_Color;
    
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));
  setPickingColor(a_PickingColor);
}
`,Ja=function(Y){s()(ft,Y);var pt=_o(ft);function ft(){return T()(this,ft),pt.apply(this,arguments)}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.coverage,fe=ht.angle;return{u_opacity:Ot||1,u_coverage:kt||.9,u_angle:fe||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"hexagonheatmap",vertexShader:vo,fragmentShader:uo,triangulation:Dn,depth:{enable:!1},primitive:V.gl.TRIANGLES,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:V.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Ot,kt){var fe=Ot.coordinates;return[fe[0],fe[1],0]}}})}}]),ft}(Gt),To={heatmap:Ca,heatmap3d:Ca,grid:io,grid3d:Yt,hexagon:Ja},hs=To;function zo(Y){var pt=bs();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function bs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ao=function(Y){s()(ft,Y);var pt=zo(ft);function ft(){var lt;T()(this,ft);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=pt.call.apply(pt,[this].concat(Ot)),lt.type="HeatMapLayer",lt}return t()(ft,[{key:"buildModels",value:function(){var ht=this.getModelType();this.layerModel=new hs[ht](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"renderModels",value:function(){var ht=this,Ot=this.getModelType();return Ot==="heatmap"?(this.layerModel&&this.layerModel.render(),this):(this.layerModelNeedUpdate&&(this.models=this.layerModel.buildModels(),this.layerModelNeedUpdate=!1),this.models.forEach(function(kt){return kt.draw({uniforms:ht.layerModel.getUninforms()})}),this)}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var ht,Ot=this.styleAttributeService.getLayerStyleAttribute("shape"),kt=this.getLayerConfig(),fe=kt.shape3d,Ie=this.getSource(),Qe=Ie.data.type,In=(Ot==null||(ht=Ot.scale)===null||ht===void 0?void 0:ht.field)||"heatmap";return In==="heatmap"||In==="heatmap3d"?"heatmap":Qe==="hexagon"?(fe==null?void 0:fe.indexOf(In))===-1?"hexagon":"grid3d":Qe==="grid"?(fe==null?void 0:fe.indexOf(In))===-1?"grid":"grid3d":"heatmap"}}]),ft}($);function Wa(Y){var pt=Rs();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Rs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var ss=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
}
`,Ba=`precision highp float;
uniform mat4 u_ModelMatrix;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
}
`,gn=function(Y){s()(ft,Y);var pt=Wa(ft);function ft(){var lt;T()(this,ft);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=pt.call.apply(pt,[this].concat(Ot)),lt.texture=void 0,lt}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity;return{u_opacity:Ot||1,u_texture:this.texture}}},{key:"initModels",value:function(){var ht=this,Ot=this.layer.getSource(),kt=this.rendererService.createTexture2D;return this.texture=kt({height:0,width:0}),Ot.data.images.then(function(fe){ht.texture=kt({data:fe[0],width:fe[0].width,height:fe[0].height}),ht.layerService.renderLayers()}),[this.layer.buildLayerModel({moduleName:"RasterImage",vertexShader:Ba,fragmentShader:ss,triangulation:$n,primitive:V.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:V.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Ot,kt,fe,Ie){return[fe[3],fe[4]]}}})}}]),ft}(Gt),cr={image:gn},Gr=cr;function Ui(Y){var pt=Ua();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Ua(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var xo=function(Y){s()(ft,Y);var pt=Ui(ft);function ft(){var lt;T()(this,ft);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=pt.call.apply(pt,[this].concat(Ot)),lt.type="ImageLayer",lt}return t()(ft,[{key:"buildModels",value:function(){var ht=this.getModelType();this.layerModel=new Gr[ht](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var ht=this.getModelType(),Ot={image:{}};return Ot[ht]}},{key:"getModelType",value:function(){return"image"}}]),ft}($);function po(Y){var pt=ea();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function ea(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Qa=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,Ds=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;
#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}
vec2 interpolate (vec2 source, vec2 target, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;
  vec2 source = a_Instance.rg;
  vec2 target =  a_Instance.ba;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  if(u_line_type == LineTypeDash) {
      v_distance_ratio = segmentIndex / segmentNumber;
      float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
      v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
    }
  if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio), 0.0, 1.0));
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}
`,Es={solid:0,dash:1},Za=function(Y){s()(ft,Y);var pt=po(ft);function ft(){return T()(this,ft),pt.apply(this,arguments)}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.lineType,fe=kt===void 0?"solid":kt,Ie=ht.dashArray,Qe=Ie===void 0?[10,5]:Ie;return Qe.length===2&&Qe.push(0,0),{u_opacity:Ot||1,segmentNumber:30,u_line_type:Es[fe||"solid"],u_dash_array:Qe,u_blur:.9}}},{key:"getAnimateUniforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.animateOption;return{u_aimate:this.animateOption2Array(Ot),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:Ds,fragmentShader:Qa,triangulation:Wn,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ot,kt,fe,Ie){var Qe=Ot.size,In=Qe===void 0?1:Qe;return Array.isArray(In)?[In[0]]:[In]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:V.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:4,update:function(Ot,kt,fe,Ie){return[fe[3],fe[4],fe[5],fe[6]]}}})}}]),ft}(Gt);function ru(Y){var pt=Qo();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Qo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Os=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform mat4 u_ModelMatrix;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;
varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

   if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  setPickingColor(a_PickingColor);
}
`,$s=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,Ss={solid:0,dash:1},ps=function(Y){s()(ft,Y);var pt=ru(ft);function ft(){return T()(this,ft),pt.apply(this,arguments)}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.lineType,fe=kt===void 0?"solid":kt,Ie=ht.dashArray,Qe=Ie===void 0?[10,5]:Ie;return Qe.length===2&&Qe.push(0,0),{u_opacity:Ot||1,segmentNumber:30,u_line_type:Ss[fe]||0,u_dash_array:Qe}}},{key:"getAnimateUniforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.animateOption;return{u_aimate:this.animateOption2Array(Ot),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc3Dline",vertexShader:Os,fragmentShader:$s,triangulation:Wn,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ot,kt,fe,Ie){var Qe=Ot.size,In=Qe===void 0?1:Qe;return Array.isArray(In)?[In[0]]:[In]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:V.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:4,update:function(Ot,kt,fe,Ie){return[fe[3],fe[4],fe[5],fe[6]]}}})}}]),ft}(Gt);function rs(Y){var pt=ws();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function ws(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var _s=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,Tu=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
    vec2 x = mix(source, target, ratio);
    vec2 center = mix(source, target, 0.5);
    float dSourceCenter = distance(source, center);
    float dXCenter = distance(x, center);
    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
     float vertex_height = paraboloid(source, target, segmentRatio);

    return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
    );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}
vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(abs(angularDist - PI) < 0.001) {
    return (1.0 - t) * source + t * target;
  }
  float a = sin((1.0 - t) * angularDist) / sin(angularDist);
  float b = sin(t * angularDist) / sin(angularDist);
  vec2 sin_source = sin(source);
  vec2 cos_source = cos(source);
  vec2 sin_target = sin(target);
  vec2 cos_target = cos(target);
  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
  float z = a * sin_source.y + b * sin_target.y;
  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
}

void main() {
  v_color = a_Color;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba);
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
  if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));
  setPickingColor(a_PickingColor);
}

`,Ru={solid:0,dash:1},Mo=function(Y){s()(ft,Y);var pt=rs(ft);function ft(){return T()(this,ft),pt.apply(this,arguments)}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.lineType,fe=kt===void 0?"solid":kt,Ie=ht.dashArray,Qe=Ie===void 0?[10,5]:Ie;return Qe.length===2&&Qe.push(0,0),{u_opacity:Ot||1,segmentNumber:30,u_line_type:Ru[fe]||0,u_dash_array:Qe}}},{key:"getAnimateUniforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.animateOption;return{u_aimate:this.animateOption2Array(Ot),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:Tu,fragmentShader:_s,triangulation:Wn,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ot,kt,fe,Ie){var Qe=Ot.size,In=Qe===void 0?1:Qe;return Array.isArray(In)?[In[0]]:[In]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:V.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:4,update:function(Ot,kt,fe,Ie){return[fe[3],fe[4],fe[5],fe[6]]}}})}}]),ft}(Gt);function Qs(Y){var pt=Du();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Du(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Wu=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
uniform float u_blur : 0.99;
uniform float u_line_type: 0.0;
uniform float u_opacity : 1.0;
varying vec4 v_color;
varying vec2 v_normal;


// dash
uniform float u_dash_offset : 0.0;
uniform float u_dash_ratio : 0.1;
varying float v_distance_ratio;
varying vec4 v_dash_array;
varying float v_side;


#pragma include "picking"

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
// [animate, duration, interval, trailLength],
void main() {
  gl_FragColor = v_color;
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
 // dash line
  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
    // gl_FragColor.a *=(1.0- step(v_dash_array.x, mod(v_distance_ratio, dashLength)));
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,il=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

// dash line
attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5.\uFF0C0, 0];
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;
varying vec4 v_dash_array;
varying vec2 v_normal;
varying float v_distance_ratio;
varying float v_side;


void main() {

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = a_Distance / a_Total_Distance;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  }
  if(u_aimate.x == Animate) {
      v_distance_ratio = a_Distance / a_Total_Distance;
  }
  v_normal = vec2(reverse_offset_normal(a_Normal) * sign(a_Miter));
  v_color = a_Color;
  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  vec2 offset = project_pixel(size.xy);
  v_side = a_Miter * a_Size.x;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  setPickingColor(a_PickingColor);
}
`,ju={solid:0,dash:1},Co=function(Y){s()(ft,Y);var pt=Qs(ft);function ft(){return T()(this,ft),pt.apply(this,arguments)}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.lineType,fe=kt===void 0?"solid":kt,Ie=ht.dashArray,Qe=Ie===void 0?[10,5,0,0]:Ie;return Qe.length===2&&Qe.push(0,0),{u_opacity:Ot||1,u_line_type:ju[fe],u_dash_array:Qe}}},{key:"getAnimateUniforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.animateOption;return{u_aimate:this.animateOption2Array(Ot),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"line",vertexShader:il,fragmentShader:Wu,triangulation:xn,primitive:V.gl.TRIANGLES,blend:this.getBlend(),depth:{enable:!1}})]}},{key:"registerBuiltinAttributes",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.lineType,kt=Ot===void 0?"solid":Ot;this.styleAttributeService.registerStyleAttribute({name:"distance",type:V.AttributeType.Attribute,descriptor:{name:"a_Distance",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ie,Qe,In,sr){return[In[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:V.AttributeType.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ie,Qe,In,sr){return[In[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Ie,Qe,In,sr){var Vr=Ie.size,ii=Vr===void 0?1:Vr;return Array.isArray(ii)?[ii[0],ii[1]]:[ii,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:V.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Ie,Qe,In,sr,Vr){return Vr}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:V.AttributeType.Attribute,descriptor:{name:"a_Miter",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ie,Qe,In,sr){return[In[4]]}}})}}]),ft}(Gt),ka={arc:Za,arc3d:ps,greatcircle:Mo,line:Co},ba=ka;function Bo(Y){var pt=uu();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function uu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Hu=function(Y){s()(ft,Y);var pt=Bo(ft);function ft(){var lt;T()(this,ft);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=pt.call.apply(pt,[this].concat(Ot)),lt.type="LineLayer",lt}return t()(ft,[{key:"buildModels",value:function(){var ht=this.getModelType();this.layerModel=new ba[ht](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var ht=this.getModelType(),Ot={line:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"}};return Ot[ht]}},{key:"getModelType",value:function(){var ht,Ot=this.styleAttributeService.getLayerStyleAttribute("shape"),kt=Ot==null||(ht=Ot.scale)===null||ht===void 0?void 0:ht.field;return kt||"line"}}]),ft}($);function gs(Y){var pt=qo();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function qo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Is=`varying vec4 v_color;
uniform float u_opacity: 1.0;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,iu=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform mat4 u_ModelMatrix;
uniform vec2 u_offsets;
varying vec4 v_color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec3 size = a_Size * a_Position;

  vec2 offset = project_pixel(size.xy);

  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  vec4 pos = vec4(project_pos.xy + offset, project_pixel(size.z), 1.0);

  float lightWeight = calc_lighting(pos);
  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  gl_Position = project_common_position_to_clipspace(pos);
  setPickingColor(a_PickingColor);
}
`,Fo=function(Y){s()(ft,Y);var pt=gs(ft);function ft(){return T()(this,ft),pt.apply(this,arguments)}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.offsets;return{u_opacity:Ot||1,u_offsets:kt||[0,0]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointExtrude2",vertexShader:iu,fragmentShader:Is,triangulation:Ve,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Ot,kt,fe,Ie){var Qe=Ot.size;if(Qe){var In=[];return Array.isArray(Qe)&&(In=Qe.length===2?[Qe[0],Qe[0],Qe[1]]:Qe),Array.isArray(Qe)||(In=[Qe]),In}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:V.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Ot,kt,fe,Ie,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:V.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Ot,kt){var fe=Wt(Ot.coordinates);return[fe[0],fe[1],0]}}})}}]),ft}(Gt);function Yu(Y){var pt=Ys();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Ys(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ka=`#define Animate 0.0

uniform float u_blur : 0;
uniform float u_opacity : 1;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  lowp float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);
  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;
  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  // gl_FragColor = v_color * color_t;
  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;
  if(u_aimate.x == Animate) {
    float d = length(v_data.xy);
    float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_aimate.z - u_aimate.y * u_time)), 0.0, 1.0);
    gl_FragColor = vec4(gl_FragColor.xyz, intensity);
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,pl=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec2 a_Extrude;
attribute float a_Size;
attribute float a_Shape;
uniform mat4 u_ModelMatrix;

uniform float u_stroke_width : 2;
uniform vec2 u_offsets;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "projection"
#pragma include "picking"

void main() {
  // unpack color(vec2)
  v_color = a_Color;
  vec2 extrude = a_Extrude;

  float shape_type = a_Shape;

  float newSize = setPickingSize(a_Size);

  // radius(16-bit)
  v_radius = newSize;

  vec2 offset = project_pixel(extrude * (newSize + u_stroke_width) + u_offsets);
  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));





  // TODO: billboard
  // anti-alias
  float antialiasblur = 1.0 / u_DevicePixelRatio / (newSize + u_stroke_width);

  // construct point coords
  v_data = vec4(extrude, antialiasblur,shape_type);

  setPickingColor(a_PickingColor);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

}
`,Gl=function(Y){s()(ft,Y);var pt=Yu(ft);function ft(){return T()(this,ft),pt.apply(this,arguments)}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ot===void 0?1:Ot,fe=ht.stroke,Ie=fe===void 0?"rgb(0,0,0,0)":fe,Qe=ht.strokeWidth,In=Qe===void 0?1:Qe,sr=ht.strokeOpacity,Vr=sr===void 0?1:sr,ii=ht.offsets,zi=ii===void 0?[0,0]:ii;return{u_opacity:kt,u_stroke_width:In,u_stroke_color:Object(O.s)(Ie),u_stroke_opacity:Vr,u_offsets:[-zi[0],zi[1]]}}},{key:"getAnimateUniforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.animateOption;return{u_aimate:this.animateOption2Array(Ot),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),$e)}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointfill",vertexShader:pl,fragmentShader:Ka,triangulation:$e,depth:{enable:!1},blend:this.getBlend()})]}},{key:"animateOption2Array",value:function(ht){return[ht.enable?0:1,ht.speed||1,ht.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var ht=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:V.AttributeType.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(kt,fe,Ie,Qe){var In=[1,1,-1,1,-1,-1,1,-1],sr=Qe%4*2;return[In[sr],In[sr+1]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(kt,fe,Ie,Qe){var In=kt.size,sr=In===void 0?5:In;return Array.isArray(sr)?[sr[0]]:[sr]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:V.AttributeType.Attribute,descriptor:{name:"a_Shape",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(kt,fe,Ie,Qe){var In=kt.shape,sr=In===void 0?2:In,Vr=ht.layer.getLayerConfig().shape2d,ii=Vr.indexOf(sr);return[ii]}}})}}]),ft}(Gt);function gl(Y){var pt=Ec();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Ec(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ml=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [1, 1, 1, 1];
uniform float u_stroke_opacity : 1;
uniform float u_opacity : 1;

varying float v_size;
#pragma include "picking"
void main(){
vec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
vec4 textureColor=texture2D(u_texture,pos);
if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
      gl_FragColor= textureColor;
}else {
      gl_FragColor= step(0.01, textureColor.z) * v_color;
}
gl_FragColor.a =gl_FragColor.a * u_opacity;
gl_FragColor = filterColor(gl_FragColor);
}
`,ao=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform float u_stroke_width : 1;
uniform vec2 u_offsets;
varying float v_size;

#pragma include "projection"
#pragma include "picking"

void main() {
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   v_size = a_Size;
   vec2 offset = project_pixel(u_offsets);
   gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);

}
`,Au=function(Y){s()(ft,Y);var pt=gl(ft);function ft(){var lt;T()(this,ft);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=pt.call.apply(pt,[this].concat(Ot)),lt.texture=void 0,lt}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity;return{u_opacity:Ot||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128]}}},{key:"initModels",value:function(){var ht=this;return this.initIconFontGlyphs(),this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",function(){ht.updateTexture(),ht.layer.render()}),[this.layer.buildLayerModel({moduleName:"pointiconImage",vertexShader:ao,fragmentShader:Ml,triangulation:En,primitive:V.gl.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var ht=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(kt,fe,Ie,Qe){var In=kt.size;return Array.isArray(In)?[In[0]]:[In]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:V.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(kt,fe,Ie,Qe){var In=ht.fontService.mapping,sr=kt.shape,Vr=ht.fontService.getGlyph(sr),ii=In[Vr],zi=ii.x,Zi=ii.y;return[zi,Zi]}}})}},{key:"updateTexture",value:function(){var ht=this.rendererService.createTexture2D,Ot=this.fontService.canvas;this.texture=ht({data:Ot,mag:V.gl.LINEAR,min:V.gl.LINEAR,width:Ot.width,height:Ot.height})}},{key:"initIconFontGlyphs",value:function(){var ht=this,Ot=this.layer.getLayerConfig(),kt=Ot.fontWeight,fe=kt===void 0?"normal":kt,Ie=Ot.fontFamily,Qe=Ie===void 0?"sans-serif":Ie,In=this.layer.getEncodedData(),sr=[];In.forEach(function(Vr){var ii=Vr.shape,zi=ii===void 0?"":ii;zi=zi.toString();var Zi=ht.fontService.getGlyph(zi);sr.indexOf(Zi)===-1&&sr.push(Zi)}),this.fontService.setFontOptions({characterSet:sr,fontWeight:fe,fontFamily:Qe,fontSize:48})}}]),ft}(Gt);function ml(Y){var pt=qs();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function qs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Bu=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [1, 1, 1, 1];
uniform float u_stroke_opacity : 1;
uniform float u_opacity : 1;

varying float v_size;
#pragma include "picking"
void main(){
vec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
vec4 textureColor=texture2D(u_texture,pos);
if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
      gl_FragColor= textureColor;
}else {
      gl_FragColor= step(0.01, textureColor.z) * v_color;
}
gl_FragColor.a =gl_FragColor.a * u_opacity;
gl_FragColor = filterColor(gl_FragColor);
}
`,vu=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform float u_stroke_width : 1;
uniform vec2 u_offsets;
varying float v_size;

#pragma include "projection"
#pragma include "picking"

void main() {
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   v_size = a_Size;
   vec2 offset = project_pixel(u_offsets);
   gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);

}
`,pu=function(Y){s()(ft,Y);var pt=ml(ft);function ft(){var lt;T()(this,ft);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=pt.call.apply(pt,[this].concat(Ot)),lt.texture=void 0,lt.updateTexture=function(){var fe=lt.rendererService.createTexture2D;if(lt.texture){lt.texture.update({data:lt.iconService.getCanvas()}),lt.layer.render();return}lt.texture=fe({data:lt.iconService.getCanvas(),mag:V.gl.NEAREST,min:V.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:lt.iconService.canvasHeight||128})},lt}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=ht.offsets,fe=kt===void 0?[0,0]:kt;return this.rendererService.getDirty()&&this.texture.bind(),{u_opacity:Ot||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_offsets:[-fe[0],fe[1]]}}},{key:"initModels",value:function(){return this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){this.texture&&this.texture.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:vu,fragmentShader:Bu,triangulation:En,primitive:V.gl.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var ht=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(kt,fe,Ie,Qe){var In=kt.size,sr=In===void 0?5:In;return Array.isArray(sr)?[sr[0]]:[sr]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:V.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(kt,fe,Ie,Qe){var In=ht.iconService.getIconMap(),sr=kt.shape,Vr=In[sr]||{x:0,y:0},ii=Vr.x,zi=Vr.y;return[ii,zi]}}})}}]),ft}(Gt);function Zs(Y){var pt=ds();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function ds(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ms=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
varying vec4 v_color;

#pragma include "picking"
void main() {
  gl_FragColor = v_color;
  gl_FragColor.a =gl_FragColor.a * u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,al=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform vec2 u_offsets;

#pragma include "projection"
#pragma include "picking"
void main() {
  v_color = a_Color;
  vec2 offset = project_pixel(u_offsets);
  vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
    setPickingColor(a_PickingColor);
}
`;function Pl(Y){var pt=Y.coordinates;return{vertices:Be()(pt),indices:[0],size:pt.length}}var jl=function(Y){s()(ft,Y);var pt=Zs(ft);function ft(){return T()(this,ft),pt.apply(this,arguments)}return t()(ft,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ot===void 0?1:Ot,fe=ht.stroke,Ie=fe===void 0?"rgb(0,0,0,0)":fe,Qe=ht.strokeWidth,In=Qe===void 0?1:Qe,sr=ht.offsets,Vr=sr===void 0?[0,0]:sr;return{u_opacity:kt,u_stroke_width:In,u_stroke_color:Object(O.s)(Ie),u_offsets:[-Vr[0],Vr[1]]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"normalpoint",vertexShader:al,fragmentShader:Ms,triangulation:Pl,depth:{enable:!1},primitive:V.gl.POINTS,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ot,kt,fe,Ie){var Qe=Ot.size,In=Qe===void 0?1:Qe;return Array.isArray(In)?[In[0]]:[In]}}})}},{key:"defaultStyleOptions",value:function(){return{blend:V.BlendType.additive}}}]),ft}(Gt);function Nu(Y,pt){var ft=typeof Symbol!="undefined"&&Y[Symbol.iterator]||Y["@@iterator"];if(!ft){if(Array.isArray(Y)||(ft=Zu(Y))||pt&&Y&&typeof Y.length=="number"){ft&&(Y=ft);var lt=0,ht=function(){};return{s:ht,n:function(){return lt>=Y.length?{done:!0}:{done:!1,value:Y[lt++]}},e:function(Qe){throw Qe},f:ht}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ot=!0,kt=!1,fe;return{s:function(){ft=ft.call(Y)},n:function(){var Qe=ft.next();return Ot=Qe.done,Qe},e:function(Qe){kt=!0,fe=Qe},f:function(){try{!Ot&&ft.return!=null&&ft.return()}finally{if(kt)throw fe}}}}function Zu(Y,pt){if(!!Y){if(typeof Y=="string")return ol(Y,pt);var ft=Object.prototype.toString.call(Y).slice(8,-1);if(ft==="Object"&&Y.constructor&&(ft=Y.constructor.name),ft==="Map"||ft==="Set")return Array.from(Y);if(ft==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ft))return ol(Y,pt)}}function ol(Y,pt){(pt==null||pt>Y.length)&&(pt=Y.length);for(var ft=0,lt=new Array(pt);ft<pt;ft++)lt[ft]=Y[ft];return lt}var gu=function(){function Y(pt,ft,lt){T()(this,Y),this.boxCells=[],this.xCellCount=void 0,this.yCellCount=void 0,this.boxKeys=void 0,this.bboxes=void 0,this.width=void 0,this.height=void 0,this.xScale=void 0,this.yScale=void 0,this.boxUid=void 0;var ht=this.boxCells;this.xCellCount=Math.ceil(pt/lt),this.yCellCount=Math.ceil(ft/lt);for(var Ot=0;Ot<this.xCellCount*this.yCellCount;Ot++)ht.push([]);this.boxKeys=[],this.bboxes=[],this.width=pt,this.height=ft,this.xScale=this.xCellCount/pt,this.yScale=this.yCellCount/ft,this.boxUid=0}return t()(Y,[{key:"insert",value:function(ft,lt,ht,Ot,kt){this.forEachCell(lt,ht,Ot,kt,this.insertBoxCell,this.boxUid++),this.boxKeys.push(ft),this.bboxes.push(lt),this.bboxes.push(ht),this.bboxes.push(Ot),this.bboxes.push(kt)}},{key:"query",value:function(ft,lt,ht,Ot,kt){return this.queryHitTest(ft,lt,ht,Ot,!1,kt)}},{key:"hitTest",value:function(ft,lt,ht,Ot,kt){return this.queryHitTest(ft,lt,ht,Ot,!0,kt)}},{key:"insertBoxCell",value:function(ft,lt,ht,Ot,kt,fe){this.boxCells[kt].push(fe)}},{key:"queryHitTest",value:function(ft,lt,ht,Ot,kt,fe){if(ht<0||ft>this.width||Ot<0||lt>this.height)return kt?!1:[];var Ie=[];if(ft<=0&&lt<=0&&this.width<=ht&&this.height<=Ot){if(kt)return!0;for(var Qe=0;Qe<this.boxKeys.length;Qe++)Ie.push({key:this.boxKeys[Qe],x1:this.bboxes[Qe*4],y1:this.bboxes[Qe*4+1],x2:this.bboxes[Qe*4+2],y2:this.bboxes[Qe*4+3]});return fe?Ie.filter(fe):Ie}var In={hitTest:kt,seenUids:{box:{},circle:{}}};return this.forEachCell(ft,lt,ht,Ot,this.queryCell,Ie,In,fe),kt?Ie.length>0:Ie}},{key:"queryCell",value:function(ft,lt,ht,Ot,kt,fe,Ie,Qe){var In=Ie.seenUids,sr=this.boxCells[kt];if(sr!==null){var Vr=this.bboxes,ii=Nu(sr),zi;try{for(ii.s();!(zi=ii.n()).done;){var Zi=zi.value;if(!In.box[Zi]){In.box[Zi]=!0;var oa=Zi*4;if(ft<=Vr[oa+2]&&lt<=Vr[oa+3]&&ht>=Vr[oa+0]&&Ot>=Vr[oa+1]&&(!Qe||Qe(this.boxKeys[Zi]))){if(Ie.hitTest)return fe.push(!0),!0;fe.push({key:this.boxKeys[Zi],x1:Vr[oa],y1:Vr[oa+1],x2:Vr[oa+2],y2:Vr[oa+3]})}}}}catch(no){ii.e(no)}finally{ii.f()}}return!1}},{key:"forEachCell",value:function(ft,lt,ht,Ot,kt,fe,Ie,Qe){for(var In=this.convertToXCellCoord(ft),sr=this.convertToYCellCoord(lt),Vr=this.convertToXCellCoord(ht),ii=this.convertToYCellCoord(Ot),zi=In;zi<=Vr;zi++)for(var Zi=sr;Zi<=ii;Zi++){var oa=this.xCellCount*Zi+zi;if(kt.call(this,ft,lt,ht,Ot,oa,fe,Ie,Qe))return}}},{key:"convertToXCellCoord",value:function(ft){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(ft*this.xScale)))}},{key:"convertToYCellCoord",value:function(ft){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(ft*this.yScale)))}}]),Y}(),au=gu,Ku=function(){function Y(pt,ft){T()(this,Y),this.width=void 0,this.height=void 0,this.grid=void 0,this.viewportPadding=100,this.screenRightBoundary=void 0,this.screenBottomBoundary=void 0,this.gridRightBoundary=void 0,this.gridBottomBoundary=void 0,this.width=pt,this.height=ft,this.viewportPadding=Math.max(pt,ft),this.grid=new au(pt+this.viewportPadding,ft+this.viewportPadding,25),this.screenRightBoundary=pt+this.viewportPadding,this.screenBottomBoundary=ft+this.viewportPadding,this.gridRightBoundary=pt+2*this.viewportPadding,this.gridBottomBoundary=ft+2*this.viewportPadding}return t()(Y,[{key:"placeCollisionBox",value:function(ft){var lt=ft.x1+ft.anchorPointX+this.viewportPadding,ht=ft.y1+ft.anchorPointY+this.viewportPadding,Ot=ft.x2+ft.anchorPointX+this.viewportPadding,kt=ft.y2+ft.anchorPointY+this.viewportPadding;return!this.isInsideGrid(lt,ht,Ot,kt)||this.grid.hitTest(lt,ht,Ot,kt)?{box:[]}:{box:[lt,ht,Ot,kt]}}},{key:"insertCollisionBox",value:function(ft,lt){var ht={featureIndex:lt};this.grid.insert(ht,ft[0],ft[1],ft[2],ft[3])}},{key:"project",value:function(ft,lt,ht){var Ot=Ye.e.fromValues(lt,ht,0,1),kt=Ye.e.create(),fe=Ye.b.fromValues.apply(Ye.b,Be()(ft));return Ye.e.transformMat4(kt,Ot,fe),{x:(kt[0]/kt[3]+1)/2*this.width+this.viewportPadding,y:(-kt[1]/kt[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(ft,lt,ht,Ot){return ht>=0&&ft<this.gridRightBoundary&&Ot>=0&&lt<this.gridBottomBoundary}}]),Y}();function Ls(Y,pt){var ft=typeof Symbol!="undefined"&&Y[Symbol.iterator]||Y["@@iterator"];if(!ft){if(Array.isArray(Y)||(ft=yl(Y))||pt&&Y&&typeof Y.length=="number"){ft&&(Y=ft);var lt=0,ht=function(){};return{s:ht,n:function(){return lt>=Y.length?{done:!0}:{done:!1,value:Y[lt++]}},e:function(Qe){throw Qe},f:ht}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ot=!0,kt=!1,fe;return{s:function(){ft=ft.call(Y)},n:function(){var Qe=ft.next();return Ot=Qe.done,Qe},e:function(Qe){kt=!0,fe=Qe},f:function(){try{!Ot&&ft.return!=null&&ft.return()}finally{if(kt)throw fe}}}}function yl(Y,pt){if(!!Y){if(typeof Y=="string")return ic(Y,pt);var ft=Object.prototype.toString.call(Y).slice(8,-1);if(ft==="Object"&&Y.constructor&&(ft=Y.constructor.name),ft==="Map"||ft==="Set")return Array.from(Y);if(ft==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ft))return ic(Y,pt)}}function ic(Y,pt){(pt==null||pt>Y.length)&&(pt=Y.length);for(var ft=0,lt=new Array(pt);ft<pt;ft++)lt[ft]=Y[ft];return lt}function Tl(Y){var pt=.5,ft=.5;switch(Y){case"right":case"top-right":case"bottom-right":pt=1;break;case"left":case"top-left":case"bottom-left":pt=0;break;default:pt=.5}switch(Y){case"bottom":case"bottom-right":case"bottom-left":ft=1;break;case"top":case"top-right":case"top-left":ft=0;break;default:ft=.5}return{horizontalAlign:pt,verticalAlign:ft}}function Bl(Y,pt,ft,lt,ht){if(!!ht){var Ot=Y[lt],kt=Ot.glyph;if(kt)for(var fe=pt[kt].advance*Ot.scale,Ie=(Y[lt].x+fe)*ht,Qe=ft;Qe<=lt;Qe++)Y[Qe].x-=Ie}}function Vl(Y,pt,ft,lt,ht,Ot,kt){var fe=(pt-ft)*ht,Ie=(-lt*kt+.5)*Ot,Qe=Ls(Y),In;try{for(Qe.s();!(In=Qe.n()).done;){var sr=In.value;sr.x+=fe,sr.y+=Ie}}catch(Vr){Qe.e(Vr)}finally{Qe.f()}}function pc(Y,pt,ft,lt,ht,Ot,kt){var fe=-8,Ie=0,Qe=fe,In=0,sr=Y.positionedGlyphs,Vr=Ot==="right"?1:Ot==="left"?0:.5,ii=sr.length;ft.forEach(function(Go){if(Go.split("").forEach(function(fs){var Yo=pt[fs],Pu=0;Yo&&(sr.push({glyph:fs,x:Ie,y:Qe+Pu,vertical:!1,scale:1,metrics:Yo}),Ie+=Yo.advance+kt)}),sr.length!==ii){var ks=Ie-kt;In=Math.max(ks,In),Bl(sr,pt,ii,sr.length-1,Vr)}Ie=0,Qe+=lt});var zi=Tl(ht),Zi=zi.horizontalAlign,oa=zi.verticalAlign;Vl(sr,Vr,Zi,oa,In,lt,ft.length);var no=Qe-fe;Y.top+=-oa*no,Y.bottom=Y.top+no,Y.left+=-Zi*In,Y.right=Y.left+In}function Xu(Y,pt,ft,lt,ht,Ot){var kt=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],fe=Y.split(`
`),Ie=[],Qe={positionedGlyphs:Ie,top:kt[1],bottom:kt[1],left:kt[0],right:kt[0],lineCount:fe.length,text:Y};return pc(Qe,pt,fe,ft,lt,ht,Ot),Ie.length?Qe:!1}function Al(Y){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],ft=arguments.length>2?arguments[2]:void 0,lt=Y.positionedGlyphs,ht=lt===void 0?[]:lt,Ot=[],kt=Ls(ht),fe;try{for(kt.s();!(fe=kt.n()).done;){var Ie=fe.value,Qe=Ie.metrics,In=4,sr=Qe.advance*Ie.scale/2,Vr=ft?[Ie.x+sr,Ie.y]:[0,0],ii=ft?[0,0]:[Ie.x+sr+pt[0],Ie.y+pt[1]],zi=(0-In)*Ie.scale-sr+ii[0],Zi=(0-In)*Ie.scale+ii[1],oa=zi+Qe.width*Ie.scale,no=Zi+Qe.height*Ie.scale,Go={x:zi,y:Zi},ks={x:oa,y:Zi},fs={x:zi,y:no},Yo={x:oa,y:no};Ot.push({tl:Go,tr:ks,bl:fs,br:Yo,tex:Qe,glyphOffset:Vr})}}catch(Pu){kt.e(Pu)}finally{kt.f()}return Ot}function Nl(Y,pt){var ft=typeof Symbol!="undefined"&&Y[Symbol.iterator]||Y["@@iterator"];if(!ft){if(Array.isArray(Y)||(ft=Oo(Y))||pt&&Y&&typeof Y.length=="number"){ft&&(Y=ft);var lt=0,ht=function(){};return{s:ht,n:function(){return lt>=Y.length?{done:!0}:{done:!1,value:Y[lt++]}},e:function(Qe){throw Qe},f:ht}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ot=!0,kt=!1,fe;return{s:function(){ft=ft.call(Y)},n:function(){var Qe=ft.next();return Ot=Qe.done,Qe},e:function(Qe){kt=!0,fe=Qe},f:function(){try{!Ot&&ft.return!=null&&ft.return()}finally{if(kt)throw fe}}}}function Oo(Y,pt){if(!!Y){if(typeof Y=="string")return go(Y,pt);var ft=Object.prototype.toString.call(Y).slice(8,-1);if(ft==="Object"&&Y.constructor&&(ft=Y.constructor.name),ft==="Map"||ft==="Set")return Array.from(Y);if(ft==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ft))return go(Y,pt)}}function go(Y,pt){(pt==null||pt>Y.length)&&(pt=Y.length);for(var ft=0,lt=new Array(pt);ft<pt;ft++)lt[ft]=Y[ft];return lt}function xl(Y){var pt=sl();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function sl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Vs=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;
// uniform float u_font_size : 24.0;
uniform float u_opacity : 1.0;
uniform float u_stroke_opacity: 1.0;
uniform vec4 u_stroke : [0, 0, 0, 1];
uniform float u_strokeWidth : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec4 v_color;
varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;

#pragma include "picking"
void main() {
  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  // float fontScale = u_font_size / FONT_SIZE;

  lowp float buff = (6.0 - u_strokeWidth / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke.rgb, u_stroke.a * u_opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor.a= gl_FragColor.a * alpha;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Da=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;
attribute vec4 a_Color;
attribute float a_Size;
attribute float a_Rotate;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;

varying vec2 v_uv;
varying float v_gamma_scale;
varying vec4 v_color;
varying float v_fontScale;

#pragma include "projection"
#pragma include "picking"

void main() {
  v_color = a_Color;
  v_uv = a_tex / u_sdf_map_size;

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
   v_fontScale = fontScale;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
 highp float angle_sin = sin(a_Rotate);
 highp float angle_cos = cos(a_Rotate);
 mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  gl_Position = vec4(projected_position.xy / projected_position.w
    + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`;function bo(Y){var pt=this,ft=Y.id,lt=[],ht=[];if(!pt.glyphInfoMap||!pt.glyphInfoMap[ft])return{vertices:[],indices:[],size:7};var Ot=pt.glyphInfoMap[ft].centroid,kt=Ot.length===2?[Ot[0],Ot[1],0]:Ot;return pt.glyphInfoMap[ft].glyphQuads.forEach(function(fe,Ie){lt.push.apply(lt,Be()(kt).concat([fe.tex.x,fe.tex.y+fe.tex.height,fe.tl.x,fe.tl.y],Be()(kt),[fe.tex.x+fe.tex.width,fe.tex.y+fe.tex.height,fe.tr.x,fe.tr.y],Be()(kt),[fe.tex.x+fe.tex.width,fe.tex.y,fe.br.x,fe.br.y],Be()(kt),[fe.tex.x,fe.tex.y,fe.bl.x,fe.bl.y])),ht.push(0+Ie*4,1+Ie*4,2+Ie*4,2+Ie*4,3+Ie*4,0+Ie*4)}),{vertices:lt,indices:ht,size:7}}var Ns=function(Y){s()(ft,Y);var pt=xl(ft);function ft(){var lt;T()(this,ft);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=pt.call.apply(pt,[this].concat(Ot)),lt.glyphInfo=void 0,lt.glyphInfoMap={},lt.texture=void 0,lt.currentZoom=-1,lt.extent=void 0,lt.textureHeight=0,lt.textCount=0,lt.preTextStyle={},lt.buildModels=function(){return lt.initGlyph(),lt.updateTexture(),lt.filterGlyphs(),[lt.layer.buildLayerModel({moduleName:"pointText",vertexShader:Da,fragmentShader:Vs,triangulation:bo.bind(g()(lt)),depth:{enable:!1},blend:lt.getBlend()})]},lt}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ot===void 0?1:Ot,fe=ht.stroke,Ie=fe===void 0?"#fff":fe,Qe=ht.strokeWidth,In=Qe===void 0?0:Qe,sr=ht.strokeOpacity,Vr=sr===void 0?1:sr,ii=ht.textAnchor,zi=ii===void 0?"center":ii,Zi=ht.textAllowOverlap,oa=Zi===void 0?!1:Zi,no=ht.halo,Go=no===void 0?.5:no,ks=ht.gamma,fs=ks===void 0?2:ks,Yo=this.fontService,Pu=Yo.canvas,Po=Yo.mapping;return Object.keys(Po).length!==this.textCount&&(this.updateTexture(),this.textCount=Object.keys(Po).length),this.preTextStyle={textAnchor:zi,textAllowOverlap:oa},{u_opacity:kt,u_stroke_opacity:Vr,u_sdf_map:this.texture,u_stroke:Object(O.s)(Ie),u_halo_blur:Go,u_gamma_scale:fs,u_sdf_map_size:[Pu.width,Pu.height],u_strokeWidth:In}}},{key:"initModels",value:function(){this.layer.on("remapping",this.buildModels),this.extent=this.textExtent();var ht=this.layer.getLayerConfig(),Ot=ht.textAnchor,kt=Ot===void 0?"center":Ot,fe=ht.textAllowOverlap,Ie=fe===void 0?!0:fe;return this.preTextStyle={textAnchor:kt,textAllowOverlap:Ie},this.buildModels()}},{key:"needUpdate",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.textAllowOverlap,kt=Ot===void 0?!1:Ot,fe=this.mapService.getZoom(),Ie=this.mapService.getBounds(),Qe=Object(O.j)(this.extent,Ie);return!kt&&(Math.abs(this.currentZoom-fe)>1||!Qe)||kt!==this.preTextStyle.textAllowOverlap?(this.reBuildModel(),!0):!1}},{key:"clearModels",value:function(){this.layer.off("remapping",this.buildModels)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:V.AttributeType.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ot,kt,fe,Ie){var Qe=Ot.rotate,In=Qe===void 0?0:Qe;return Array.isArray(In)?[In[0]]:[In]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:V.AttributeType.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Ot,kt,fe,Ie){return[fe[5],fe[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ot,kt,fe,Ie){var Qe=Ot.size,In=Qe===void 0?12:Qe;return Array.isArray(In)?[In[0]]:[In]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:V.AttributeType.Attribute,descriptor:{name:"a_tex",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Ot,kt,fe,Ie){return[fe[3],fe[4]]}}})}},{key:"textExtent",value:function(){var ht=this.mapService.getBounds();return Object(O.r)(ht,.5)}},{key:"initTextFont",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.fontWeight,kt=Ot===void 0?"400":Ot,fe=ht.fontFamily,Ie=fe===void 0?"sans-serif":fe,Qe=this.layer.getEncodedData(),In=[];Qe.forEach(function(sr){var Vr=sr.shape,ii=Vr===void 0?"":Vr;ii=ii.toString();var zi=Nl(ii),Zi;try{for(zi.s();!(Zi=zi.n()).done;){var oa=Zi.value;In.indexOf(oa)===-1&&In.push(oa)}}catch(no){zi.e(no)}finally{zi.f()}}),this.fontService.setFontOptions({characterSet:In,fontWeight:kt,fontFamily:Ie})}},{key:"generateGlyphLayout",value:function(){var ht=this,Ot=this.fontService.mapping,kt=this.layer.getLayerConfig(),fe=kt.spacing,Ie=fe===void 0?2:fe,Qe=kt.textAnchor,In=Qe===void 0?"center":Qe,sr=kt.textOffset,Vr=this.layer.getEncodedData();this.glyphInfo=Vr.map(function(ii){var zi=ii.shape,Zi=zi===void 0?"":zi,oa=ii.coordinates,no=ii.id,Go=ii.size,ks=Go===void 0?1:Go,fs=Xu(Zi.toString(),Ot,ks,In,"center",Ie,sr),Yo=Al(fs,sr,!1);return ii.shaping=fs,ii.glyphQuads=Yo,ii.centroid=Wt(oa),ht.glyphInfoMap[no]={shaping:fs,glyphQuads:Yo,centroid:Wt(oa)},ii})}},{key:"filterGlyphs",value:function(){var ht=this,Ot=this.layer.getLayerConfig(),kt=Ot.padding,fe=kt===void 0?[4,4]:kt,Ie=Ot.textAllowOverlap,Qe=Ie===void 0?!1:Ie;if(!Qe){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var In=this.rendererService.getViewportSize(),sr=In.width,Vr=In.height,ii=new Ku(sr,Vr),zi=this.glyphInfo.filter(function(Zi){var oa=Zi.shaping,no=Zi.id,Go=no===void 0?0:no,ks=Zi.centroid,fs=Zi.size,Yo=fs/24,Pu=ht.mapService.lngLatToContainer(ks),Po=ii.placeCollisionBox({x1:oa.left*Yo-fe[0],x2:oa.right*Yo+fe[0],y1:oa.top*Yo-fe[1],y2:oa.bottom*Yo+fe[1],anchorPointX:Pu.x,anchorPointY:Pu.y}),Vu=Po.box;return Vu&&Vu.length?(ii.insertCollisionBox(Vu,Go),!0):!1});zi.forEach(function(Zi){ht.glyphInfoMap[Zi.id]=Zi})}}},{key:"initGlyph",value:function(){this.initTextFont(),this.generateGlyphLayout()}},{key:"updateTexture",value:function(){var ht=this.rendererService.createTexture2D,Ot=this.fontService.canvas;this.textureHeight=Ot.height,this.texture&&this.texture.destroy(),this.texture=ht({data:Ot,mag:V.gl.LINEAR,min:V.gl.LINEAR,width:Ot.width,height:Ot.height})}},{key:"reBuildModel",value:function(){this.filterGlyphs(),this.layer.models=[this.layer.buildLayerModel({moduleName:"pointText",vertexShader:Da,fragmentShader:Vs,triangulation:bo.bind(this),depth:{enable:!1},blend:this.getBlend()})]}}]),ft}(Gt),Cl={fill:Gl,image:pu,normal:jl,extrude:Fo,text:Ns,icon:Au},ul=Cl;function Ju(Y){var pt=Sc();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Sc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Wl=function(Y){s()(ft,Y);var pt=Ju(ft);function ft(){var lt;T()(this,ft);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=pt.call.apply(pt,[this].concat(Ot)),lt.type="PointLayer",lt}return t()(ft,[{key:"buildModels",value:function(){var ht=this.getModelType();this.layerModel=new ul[ht](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var ht=this.getModelType(),Ot={normal:{blend:"additive"},fill:{blend:"normal"},extrude:{},image:{},icon:{},text:{blend:"normal"}};return Ot[ht]}},{key:"getModelType",value:function(){var ht=this.getEncodedData(),Ot=this.getLayerConfig(),kt=Ot.shape2d,fe=Ot.shape3d,Ie=this.iconService.getIconMap(),Qe=ht.find(function(sr){return sr.hasOwnProperty("shape")});if(Qe){var In=Qe.shape;return In==="dot"?"normal":(kt==null?void 0:kt.indexOf(In))!==-1?"fill":(fe==null?void 0:fe.indexOf(In))!==-1?"extrude":Ie.hasOwnProperty(In)?"image":this.fontService.getGlyph(In)!==""?"icon":"text"}else return"normal"}}]),ft}($);function $u(Y){var pt=tu();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function tu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ws=`uniform float u_opacity: 1.0;
varying vec4 v_Color;

#pragma include "picking"

void main() {
  gl_FragColor = v_Color;
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,is=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

varying vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,eu=function(Y){s()(ft,Y);var pt=$u(ft);function ft(){return T()(this,ft),pt.apply(this,arguments)}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ot===void 0?1:Ot;return{u_opacity:kt}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygonExtrude",vertexShader:is,fragmentShader:Ws,triangulation:mn})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:V.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Ot,kt,fe,Ie,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ot,kt,fe,Ie){var Qe=Ot.size,In=Qe===void 0?10:Qe;return Array.isArray(In)?[In[0]]:[In]}}})}}]),ft}(Gt);function Fu(Y){var pt=us();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function us(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Wi=`uniform float u_opacity: 1.0;
varying vec4 v_Color;

#pragma include "picking"

void main() {
  gl_FragColor = v_Color;
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,js=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

varying vec4 v_Color;

#pragma include "projection"
#pragma include "picking"

void main() {
  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`,Qu=function(Y){s()(ft,Y);var pt=Fu(ft);function ft(){return T()(this,ft),pt.apply(this,arguments)}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ot===void 0?1:Ot;return{u_opacity:kt}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygon",vertexShader:js,fragmentShader:Wi,triangulation:Nn,blend:this.getBlend(),depth:{enable:!1}})]}},{key:"registerBuiltinAttributes",value:function(){}}]),ft}(Gt),zu={fill:Qu,line:Co,extrude:eu,text:Ns,point_fill:Gl,point_image:pu,point_normal:jl,point_extrude:Fo},Uo=zu;function Wo(Y){var pt=mu();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function mu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var _i=function(Y){s()(ft,Y);var pt=Wo(ft);function ft(){var lt;T()(this,ft);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=pt.call.apply(pt,[this].concat(Ot)),lt.type="PolygonLayer",lt}return t()(ft,[{key:"buildModels",value:function(){var ht=this.getModelType();this.layerModel=new Uo[ht](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var ht,Ot=this.styleAttributeService.getLayerStyleAttribute("shape"),kt=Ot==null||(ht=Ot.scale)===null||ht===void 0?void 0:ht.field;return kt==="fill"?"fill":kt==="extrude"?"extrude":kt==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var ht=this.getEncodedData(),Ot=this.getLayerConfig(),kt=Ot.shape2d,fe=Ot.shape3d,Ie=this.iconService.getIconMap(),Qe=ht.find(function(sr){return sr.hasOwnProperty("shape")});if(Qe){var In=Qe.shape;return In==="dot"?"point_normal":(kt==null?void 0:kt.indexOf(In))!==-1?"point_fill":(fe==null?void 0:fe.indexOf(In))!==-1?"point_extrude":Ie.hasOwnProperty(In)?"point_image":"text"}else return"fill"}}]),ft}($);function yu(Y){var pt=Cu();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function Cu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var Ou=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_min;
uniform float u_max;
uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
varying vec2 v_texCoord;

void main() {

  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;
  if (value == u_noDataValue)
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))
    gl_FragColor = vec4(0, 0, 0, 0);
  else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);
    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
  }


}
`,Ks=`precision highp float;
uniform mat4 u_ModelMatrix;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
}
`,we=function(Y){s()(ft,Y);var pt=yu(ft);function ft(){var lt;T()(this,ft);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=pt.call.apply(pt,[this].concat(Ot)),lt.texture=void 0,lt.colorTexture=void 0,lt}return t()(ft,[{key:"getUninforms",value:function(){var ht=this.layer.getLayerConfig(),Ot=ht.opacity,kt=Ot===void 0?1:Ot,fe=ht.clampLow,Ie=fe===void 0?!0:fe,Qe=ht.clampHigh,In=Qe===void 0?!0:Qe,sr=ht.noDataValue,Vr=sr===void 0?-9999999:sr,ii=ht.domain,zi=ii===void 0?[0,1]:ii;return this.updateColorTexure(),{u_opacity:kt||1,u_texture:this.texture,u_domain:zi,u_clampLow:Ie,u_clampHigh:typeof In!="undefined"?In:Ie,u_noDataValue:Vr,u_colorTexture:this.colorTexture}}},{key:"initModels",value:function(){var ht=this.layer.getSource(),Ot=this.rendererService.createTexture2D,kt=ht.data.dataArray[0];this.texture=Ot({data:kt.data,width:kt.width,height:kt.height,format:V.gl.LUMINANCE,type:V.gl.FLOAT});var fe=this.layer.getLayerConfig(),Ie=fe.rampColors,Qe=Object(O.n)(Ie);return this.colorTexture=Ot({data:Qe.data,width:Qe.width,height:Qe.height,flipY:!1}),[this.layer.buildLayerModel({moduleName:"RasterImageData",vertexShader:Ks,fragmentShader:Ou,triangulation:$n,primitive:V.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:V.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Ot,kt,fe,Ie){return[fe[3],fe[4]]}}})}},{key:"updateColorTexure",value:function(){var ht=this.rendererService.createTexture2D,Ot=this.layer.getLayerConfig(),kt=Ot.rampColors,fe=Object(O.n)(kt);this.colorTexture=ht({data:fe.data,width:fe.width,height:fe.height,flipY:!1})}}]),ft}(Gt),Pe={raster:we,raster3d:we},hn=Pe;function tn(Y){var pt=On();return function(){var lt=n()(Y),ht;if(pt){var Ot=n()(this).constructor;ht=Reflect.construct(lt,arguments,Ot)}else ht=lt.apply(this,arguments);return r()(this,ht)}}function On(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Y){return!1}}var hr=function(Y){s()(ft,Y);var pt=tn(ft);function ft(){var lt;T()(this,ft);for(var ht=arguments.length,Ot=new Array(ht),kt=0;kt<ht;kt++)Ot[kt]=arguments[kt];return lt=pt.call.apply(pt,[this].concat(Ot)),lt.type="RasterLayer",lt}return t()(ft,[{key:"buildModels",value:function(){var ht=this.getModelType();this.layerModel=new hn[ht](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var ht=this.getModelType(),Ot={raster:{},raster3d:{}};return Ot[ht]}},{key:"getModelType",value:function(){return"raster"}}]),ft}($),Rr,Xr,ni,zr,li,yr,Kt;function te(Y,pt){var ft=Object.keys(Y);if(Object.getOwnPropertySymbols){var lt=Object.getOwnPropertySymbols(Y);pt&&(lt=lt.filter(function(ht){return Object.getOwnPropertyDescriptor(Y,ht).enumerable})),ft.push.apply(ft,lt)}return ft}function Le(Y){for(var pt=1;pt<arguments.length;pt++){var ft=arguments[pt]!=null?arguments[pt]:{};pt%2?te(Object(ft),!0).forEach(function(lt){l()(Y,lt,ft[lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(ft)):te(Object(ft)).forEach(function(lt){Object.defineProperty(Y,lt,Object.getOwnPropertyDescriptor(ft,lt))})}return Y}var Se=(Rr=Object(K.injectable)(),Xr=Object(K.inject)(V.TYPES.IGlobalConfigService),ni=Object(K.inject)(V.TYPES.ILogService),Rr(zr=(li=function(){function Y(){T()(this,Y),v()(this,"configService",yr,this),v()(this,"logger",Kt,this)}return t()(Y,[{key:"apply",value:function(ft,lt){var ht=this,Ot=lt.styleAttributeService;ft.hooks.init.tap("DataMappingPlugin",function(){ht.generateMaping(ft,{styleAttributeService:Ot})}),ft.hooks.beforeRenderData.tap("DataMappingPlugin",function(){return ft.dataState.dataMappingNeedUpdate=!1,ht.generateMaping(ft,{styleAttributeService:Ot}),!0}),ft.hooks.beforeRender.tap("DataMappingPlugin",function(){if(!ft.layerModelNeedUpdate){var kt=Ot.getLayerStyleAttributes()||[],fe=Ot.getLayerStyleAttribute("filter"),Ie=ft.getSource().data.dataArray,Qe=kt.filter(function(sr){return sr.needRemapping}),In=Ie;fe!=null&&fe.needRemapping&&fe!==null&&fe!==void 0&&fe.scale&&(In=Ie.filter(function(sr){return ht.applyAttributeMapping(fe,sr)[0]})),Qe.length&&(fe!=null&&fe.needRemapping?(ft.setEncodedData(ht.mapping(kt,In)),fe.needRemapping=!1):ft.setEncodedData(ht.mapping(Qe,In,ft.getEncodedData())),ht.logger.debug("remapping finished"),ft.emit("remapping",null))}})}},{key:"generateMaping",value:function(ft,lt){var ht=this,Ot=lt.styleAttributeService,kt=Ot.getLayerStyleAttributes()||[],fe=Ot.getLayerStyleAttribute("filter"),Ie=ft.getSource().data.dataArray,Qe=Ie;fe!=null&&fe.scale&&(Qe=Ie.filter(function(In){return ht.applyAttributeMapping(fe,In)[0]})),ft.setEncodedData(this.mapping(kt,Qe))}},{key:"mapping",value:function(ft,lt,ht){var Ot=this;return lt.map(function(kt,fe){var Ie=ht?ht[fe]:{},Qe=Le({id:kt._id,coordinates:kt.coordinates},Ie);return ft.filter(function(In){return In.scale!==void 0}).forEach(function(In){var sr=Ot.applyAttributeMapping(In,kt);In.needRemapping=!1,In.name==="color"&&(sr=sr.map(function(Vr){return Object(O.s)(Vr)})),Qe[In.name]=Array.isArray(sr)&&sr.length===1?sr[0]:sr}),Qe})}},{key:"applyAttributeMapping",value:function(ft,lt){var ht;if(!ft.scale)return[];var Ot=(ft==null||(ht=ft.scale)===null||ht===void 0?void 0:ht.scalers)||[],kt=[];return Ot.forEach(function(fe){var Ie,Qe=fe.field;(lt.hasOwnProperty(Qe)||((Ie=ft.scale)===null||Ie===void 0?void 0:Ie.type)==="variable")&&kt.push(lt[Qe])}),ft.mapping?ft.mapping(kt):[]}}]),Y}(),yr=_()(li.prototype,"configService",[Xr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kt=_()(li.prototype,"logger",[ni],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),li))||zr),Dt=R("rlAn"),zt,oe,ne=(zt=Object(K.injectable)(),zt(oe=function(){function Y(){T()(this,Y),this.mapService=void 0}return t()(Y,[{key:"apply",value:function(ft){var lt=this;this.mapService=ft.getContainer().get(V.TYPES.IMapService),ft.hooks.init.tap("DataSourcePlugin",function(){var ht=ft.sourceOption,Ot=ht.data,kt=ht.options;ft.setSource(new Dt.default(Ot,kt)),lt.updateClusterData(ft)}),ft.hooks.beforeRenderData.tap("DataSourcePlugin",function(){var ht=lt.updateClusterData(ft),Ot=ft.dataState.dataSourceNeedUpdate;return ft.dataState.dataSourceNeedUpdate=!1,ht||Ot})}},{key:"updateClusterData",value:function(ft){var lt=ft.getSource(),ht=lt.cluster,Ot=lt.clusterOptions,kt=Ot.zoom,fe=kt===void 0?0:kt,Ie=Ot.maxZoom,Qe=Ie===void 0?16:Ie,In=this.mapService.getZoom()-1,sr=ft.dataState.dataSourceNeedUpdate;return ht&&(sr||Math.abs(fe-In)>1)&&Qe>fe?(lt.updateClusterData(Math.floor(In)),!0):!1}}]),Y}())||oe),he=R("7tbW"),Fe=R.n(he),Ze=R("4qC0"),nn=R.n(Ze),Je=R("J2iB"),pn=R.n(Je),fn=function(Y,pt){return Y<pt?-1:Y>pt?1:Y>=pt?0:NaN},Hn=function(Y){return Y.length===1&&(Y=Un(Y)),{left:function(ft,lt,ht,Ot){for(ht==null&&(ht=0),Ot==null&&(Ot=ft.length);ht<Ot;){var kt=ht+Ot>>>1;Y(ft[kt],lt)<0?ht=kt+1:Ot=kt}return ht},right:function(ft,lt,ht,Ot){for(ht==null&&(ht=0),Ot==null&&(Ot=ft.length);ht<Ot;){var kt=ht+Ot>>>1;Y(ft[kt],lt)>0?Ot=kt:ht=kt+1}return ht}}};function Un(Y){return function(pt,ft){return fn(Y(pt),ft)}}var Vn=Hn(fn),Gn=Vn.right,dr=Vn.left,br=Gn,Kr=function(Y,pt){pt==null&&(pt=mi);for(var ft=0,lt=Y.length-1,ht=Y[0],Ot=new Array(lt<0?0:lt);ft<lt;)Ot[ft]=pt(ht,ht=Y[++ft]);return Ot};function mi(Y,pt){return[Y,pt]}var jr=function(Y,pt,ft){var lt=Y.length,ht=pt.length,Ot=new Array(lt*ht),kt,fe,Ie,Qe;for(ft==null&&(ft=mi),kt=Ie=0;kt<lt;++kt)for(Qe=Y[kt],fe=0;fe<ht;++fe,++Ie)Ot[Ie]=ft(Qe,pt[fe]);return Ot},oi=function(Y,pt){return pt<Y?-1:pt>Y?1:pt>=Y?0:NaN},fi=function(Y){return Y===null?NaN:+Y},Hi=function(Y,pt){var ft=Y.length,lt=0,ht=-1,Ot=0,kt,fe,Ie=0;if(pt==null)for(;++ht<ft;)isNaN(kt=fi(Y[ht]))||(fe=kt-Ot,Ot+=fe/++lt,Ie+=fe*(kt-Ot));else for(;++ht<ft;)isNaN(kt=fi(pt(Y[ht],ht,Y)))||(fe=kt-Ot,Ot+=fe/++lt,Ie+=fe*(kt-Ot));if(lt>1)return Ie/(lt-1)},Di=function(Y,pt){var ft=Hi(Y,pt);return ft&&Math.sqrt(ft)},Ma=function(Y,pt){var ft=Y.length,lt=-1,ht,Ot,kt;if(pt==null){for(;++lt<ft;)if((ht=Y[lt])!=null&&ht>=ht)for(Ot=kt=ht;++lt<ft;)(ht=Y[lt])!=null&&(Ot>ht&&(Ot=ht),kt<ht&&(kt=ht))}else for(;++lt<ft;)if((ht=pt(Y[lt],lt,Y))!=null&&ht>=ht)for(Ot=kt=ht;++lt<ft;)(ht=pt(Y[lt],lt,Y))!=null&&(Ot>ht&&(Ot=ht),kt<ht&&(kt=ht));return[Ot,kt]},xa=Array.prototype,Pa=xa.slice,ei=xa.map,Ea=function(Y){return function(){return Y}},Ga=function(Y){return Y},Ha=function(Y,pt,ft){Y=+Y,pt=+pt,ft=(ht=arguments.length)<2?(pt=Y,Y=0,1):ht<3?1:+ft;for(var lt=-1,ht=Math.max(0,Math.ceil((pt-Y)/ft))|0,Ot=new Array(ht);++lt<ht;)Ot[lt]=Y+lt*ft;return Ot},Li=Math.sqrt(50),Ia=Math.sqrt(10),Eo=Math.sqrt(2),Hs=function(Y,pt,ft){var lt,ht=-1,Ot,kt,fe;if(pt=+pt,Y=+Y,ft=+ft,Y===pt&&ft>0)return[Y];if((lt=pt<Y)&&(Ot=Y,Y=pt,pt=Ot),(fe=Fs(Y,pt,ft))===0||!isFinite(fe))return[];if(fe>0)for(Y=Math.ceil(Y/fe),pt=Math.floor(pt/fe),kt=new Array(Ot=Math.ceil(pt-Y+1));++ht<Ot;)kt[ht]=(Y+ht)*fe;else for(Y=Math.floor(Y*fe),pt=Math.ceil(pt*fe),kt=new Array(Ot=Math.ceil(Y-pt+1));++ht<Ot;)kt[ht]=(Y-ht)/fe;return lt&&kt.reverse(),kt};function Fs(Y,pt,ft){var lt=(pt-Y)/Math.max(0,ft),ht=Math.floor(Math.log(lt)/Math.LN10),Ot=lt/Math.pow(10,ht);return ht>=0?(Ot>=Li?10:Ot>=Ia?5:Ot>=Eo?2:1)*Math.pow(10,ht):-Math.pow(10,-ht)/(Ot>=Li?10:Ot>=Ia?5:Ot>=Eo?2:1)}function Ol(Y,pt,ft){var lt=Math.abs(pt-Y)/Math.max(0,ft),ht=Math.pow(10,Math.floor(Math.log(lt)/Math.LN10)),Ot=lt/ht;return Ot>=Li?ht*=10:Ot>=Ia?ht*=5:Ot>=Eo&&(ht*=2),pt<Y?-ht:ht}var xu=function(Y){return Math.ceil(Math.log(Y.length)/Math.LN2)+1},j=function(){var Y=Ga,pt=Ma,ft=xu;function lt(ht){var Ot,kt=ht.length,fe,Ie=new Array(kt);for(Ot=0;Ot<kt;++Ot)Ie[Ot]=Y(ht[Ot],Ot,ht);var Qe=pt(Ie),In=Qe[0],sr=Qe[1],Vr=ft(Ie,In,sr);Array.isArray(Vr)||(Vr=Ol(In,sr,Vr),Vr=Ha(Math.ceil(In/Vr)*Vr,sr,Vr));for(var ii=Vr.length;Vr[0]<=In;)Vr.shift(),--ii;for(;Vr[ii-1]>sr;)Vr.pop(),--ii;var zi=new Array(ii+1),Zi;for(Ot=0;Ot<=ii;++Ot)Zi=zi[Ot]=[],Zi.x0=Ot>0?Vr[Ot-1]:In,Zi.x1=Ot<ii?Vr[Ot]:sr;for(Ot=0;Ot<kt;++Ot)fe=Ie[Ot],In<=fe&&fe<=sr&&zi[br(Vr,fe,0,ii)].push(ht[Ot]);return zi}return lt.value=function(ht){return arguments.length?(Y=typeof ht=="function"?ht:Ea(ht),lt):Y},lt.domain=function(ht){return arguments.length?(pt=typeof ht=="function"?ht:Ea([ht[0],ht[1]]),lt):pt},lt.thresholds=function(ht){return arguments.length?(ft=typeof ht=="function"?ht:Array.isArray(ht)?Ea(Pa.call(ht)):Ea(ht),lt):ft},lt},I=function(Y,pt,ft){if(ft==null&&(ft=fi),!!(lt=Y.length)){if((pt=+pt)<=0||lt<2)return+ft(Y[0],0,Y);if(pt>=1)return+ft(Y[lt-1],lt-1,Y);var lt,ht=(lt-1)*pt,Ot=Math.floor(ht),kt=+ft(Y[Ot],Ot,Y),fe=+ft(Y[Ot+1],Ot+1,Y);return kt+(fe-kt)*(ht-Ot)}},w=function(Y,pt,ft){return Y=ei.call(Y,fi).sort(fn),Math.ceil((ft-pt)/(2*(I(Y,.75)-I(Y,.25))*Math.pow(Y.length,-1/3)))},B=function(Y,pt,ft){return Math.ceil((ft-pt)/(3.5*Di(Y)*Math.pow(Y.length,-1/3)))},D=function(Y,pt){var ft=Y.length,lt=-1,ht,Ot;if(pt==null){for(;++lt<ft;)if((ht=Y[lt])!=null&&ht>=ht)for(Ot=ht;++lt<ft;)(ht=Y[lt])!=null&&ht>Ot&&(Ot=ht)}else for(;++lt<ft;)if((ht=pt(Y[lt],lt,Y))!=null&&ht>=ht)for(Ot=ht;++lt<ft;)(ht=pt(Y[lt],lt,Y))!=null&&ht>Ot&&(Ot=ht);return Ot},W=function(Y,pt){var ft=Y.length,lt=ft,ht=-1,Ot,kt=0;if(pt==null)for(;++ht<ft;)isNaN(Ot=fi(Y[ht]))?--lt:kt+=Ot;else for(;++ht<ft;)isNaN(Ot=fi(pt(Y[ht],ht,Y)))?--lt:kt+=Ot;if(lt)return kt/lt},tt=function(Y,pt){var ft=Y.length,lt=-1,ht,Ot=[];if(pt==null)for(;++lt<ft;)isNaN(ht=fi(Y[lt]))||Ot.push(ht);else for(;++lt<ft;)isNaN(ht=fi(pt(Y[lt],lt,Y)))||Ot.push(ht);return I(Ot.sort(fn),.5)},st=function(Y){for(var pt=Y.length,ft,lt=-1,ht=0,Ot,kt;++lt<pt;)ht+=Y[lt].length;for(Ot=new Array(ht);--pt>=0;)for(kt=Y[pt],ft=kt.length;--ft>=0;)Ot[--ht]=kt[ft];return Ot},Ct=function(Y,pt){var ft=Y.length,lt=-1,ht,Ot;if(pt==null){for(;++lt<ft;)if((ht=Y[lt])!=null&&ht>=ht)for(Ot=ht;++lt<ft;)(ht=Y[lt])!=null&&Ot>ht&&(Ot=ht)}else for(;++lt<ft;)if((ht=pt(Y[lt],lt,Y))!=null&&ht>=ht)for(Ot=ht;++lt<ft;)(ht=pt(Y[lt],lt,Y))!=null&&Ot>ht&&(Ot=ht);return Ot},It=function(Y,pt){for(var ft=pt.length,lt=new Array(ft);ft--;)lt[ft]=Y[pt[ft]];return lt},Ut=function(Y,pt){if(!!(ft=Y.length)){var ft,lt=0,ht=0,Ot,kt=Y[ht];for(pt==null&&(pt=fn);++lt<ft;)(pt(Ot=Y[lt],kt)<0||pt(kt,kt)!==0)&&(kt=Ot,ht=lt);if(pt(kt,kt)===0)return ht}},Zt=function(Y,pt,ft){for(var lt=(ft==null?Y.length:ft)-(pt=pt==null?0:+pt),ht,Ot;lt;)Ot=Math.random()*lt--|0,ht=Y[lt+pt],Y[lt+pt]=Y[Ot+pt],Y[Ot+pt]=ht;return Y},qt=function(Y,pt){var ft=Y.length,lt=-1,ht,Ot=0;if(pt==null)for(;++lt<ft;)(ht=+Y[lt])&&(Ot+=ht);else for(;++lt<ft;)(ht=+pt(Y[lt],lt,Y))&&(Ot+=ht);return Ot},de=function(Y){if(!(Ot=Y.length))return[];for(var pt=-1,ft=Ct(Y,me),lt=new Array(ft);++pt<ft;)for(var ht=-1,Ot,kt=lt[pt]=new Array(Ot);++ht<Ot;)kt[ht]=Y[ht][pt];return lt};function me(Y){return Y.length}var je=function(){return de(arguments)},Oe=function(Y,pt){return Y<pt?-1:Y>pt?1:Y>=pt?0:NaN},ke=function(Y){return Y.length===1&&(Y=qe(Y)),{left:function(ft,lt,ht,Ot){for(ht==null&&(ht=0),Ot==null&&(Ot=ft.length);ht<Ot;){var kt=ht+Ot>>>1;Y(ft[kt],lt)<0?ht=kt+1:Ot=kt}return ht},right:function(ft,lt,ht,Ot){for(ht==null&&(ht=0),Ot==null&&(Ot=ft.length);ht<Ot;){var kt=ht+Ot>>>1;Y(ft[kt],lt)>0?Ot=kt:ht=kt+1}return ht}}};function qe(Y){return function(pt,ft){return Oe(Y(pt),ft)}}var an=ke(Oe),Xn=an.right,kn=an.left,fr=Xn,Mr=function(Y,pt){pt==null&&(pt=Qr);for(var ft=0,lt=Y.length-1,ht=Y[0],Ot=new Array(lt<0?0:lt);ft<lt;)Ot[ft]=pt(ht,ht=Y[++ft]);return Ot};function Qr(Y,pt){return[Y,pt]}var Zr=function(Y,pt,ft){var lt=Y.length,ht=pt.length,Ot=new Array(lt*ht),kt,fe,Ie,Qe;for(ft==null&&(ft=Qr),kt=Ie=0;kt<lt;++kt)for(Qe=Y[kt],fe=0;fe<ht;++fe,++Ie)Ot[Ie]=ft(Qe,pt[fe]);return Ot},Pi=function(Y,pt){return pt<Y?-1:pt>Y?1:pt>=Y?0:NaN},Ri=function(Y){return Y===null?NaN:+Y},Ki=function(Y,pt){var ft=Y.length,lt=0,ht=-1,Ot=0,kt,fe,Ie=0;if(pt==null)for(;++ht<ft;)isNaN(kt=Ri(Y[ht]))||(fe=kt-Ot,Ot+=fe/++lt,Ie+=fe*(kt-Ot));else for(;++ht<ft;)isNaN(kt=Ri(pt(Y[ht],ht,Y)))||(fe=kt-Ot,Ot+=fe/++lt,Ie+=fe*(kt-Ot));if(lt>1)return Ie/(lt-1)},Xi=function(Y,pt){var ft=Ki(Y,pt);return ft&&Math.sqrt(ft)},Oa=function(Y,pt){var ft=Y.length,lt=-1,ht,Ot,kt;if(pt==null){for(;++lt<ft;)if((ht=Y[lt])!=null&&ht>=ht)for(Ot=kt=ht;++lt<ft;)(ht=Y[lt])!=null&&(Ot>ht&&(Ot=ht),kt<ht&&(kt=ht))}else for(;++lt<ft;)if((ht=pt(Y[lt],lt,Y))!=null&&ht>=ht)for(Ot=kt=ht;++lt<ft;)(ht=pt(Y[lt],lt,Y))!=null&&(Ot>ht&&(Ot=ht),kt<ht&&(kt=ht));return[Ot,kt]},ja=Array.prototype,ki=ja.slice,Sa=ja.map,ga=function(Y){return function(){return Y}},Yi=function(Y){return Y},_a=function(Y,pt,ft){Y=+Y,pt=+pt,ft=(ht=arguments.length)<2?(pt=Y,Y=0,1):ht<3?1:+ft;for(var lt=-1,ht=Math.max(0,Math.ceil((pt-Y)/ft))|0,Ot=new Array(ht);++lt<ht;)Ot[lt]=Y+lt*ft;return Ot},ra=Math.sqrt(50),La=Math.sqrt(10),za=Math.sqrt(2),Ps=function(Y,pt,ft){var lt,ht=-1,Ot,kt,fe;if(pt=+pt,Y=+Y,ft=+ft,Y===pt&&ft>0)return[Y];if((lt=pt<Y)&&(Ot=Y,Y=pt,pt=Ot),(fe=ls(Y,pt,ft))===0||!isFinite(fe))return[];if(fe>0)for(Y=Math.ceil(Y/fe),pt=Math.floor(pt/fe),kt=new Array(Ot=Math.ceil(pt-Y+1));++ht<Ot;)kt[ht]=(Y+ht)*fe;else for(Y=Math.floor(Y*fe),pt=Math.ceil(pt*fe),kt=new Array(Ot=Math.ceil(Y-pt+1));++ht<Ot;)kt[ht]=(Y-ht)/fe;return lt&&kt.reverse(),kt};function ls(Y,pt,ft){var lt=(pt-Y)/Math.max(0,ft),ht=Math.floor(Math.log(lt)/Math.LN10),Ot=lt/Math.pow(10,ht);return ht>=0?(Ot>=ra?10:Ot>=La?5:Ot>=za?2:1)*Math.pow(10,ht):-Math.pow(10,-ht)/(Ot>=ra?10:Ot>=La?5:Ot>=za?2:1)}function Ts(Y,pt,ft){var lt=Math.abs(pt-Y)/Math.max(0,ft),ht=Math.pow(10,Math.floor(Math.log(lt)/Math.LN10)),Ot=lt/ht;return Ot>=ra?ht*=10:Ot>=La?ht*=5:Ot>=za&&(ht*=2),pt<Y?-ht:ht}var ms=function(Y){return Math.ceil(Math.log(Y.length)/Math.LN2)+1},nu=function(){var Y=Yi,pt=Oa,ft=ms;function lt(ht){var Ot,kt=ht.length,fe,Ie=new Array(kt);for(Ot=0;Ot<kt;++Ot)Ie[Ot]=Y(ht[Ot],Ot,ht);var Qe=pt(Ie),In=Qe[0],sr=Qe[1],Vr=ft(Ie,In,sr);Array.isArray(Vr)||(Vr=Ts(In,sr,Vr),Vr=_a(Math.ceil(In/Vr)*Vr,sr,Vr));for(var ii=Vr.length;Vr[0]<=In;)Vr.shift(),--ii;for(;Vr[ii-1]>sr;)Vr.pop(),--ii;var zi=new Array(ii+1),Zi;for(Ot=0;Ot<=ii;++Ot)Zi=zi[Ot]=[],Zi.x0=Ot>0?Vr[Ot-1]:In,Zi.x1=Ot<ii?Vr[Ot]:sr;for(Ot=0;Ot<kt;++Ot)fe=Ie[Ot],In<=fe&&fe<=sr&&zi[fr(Vr,fe,0,ii)].push(ht[Ot]);return zi}return lt.value=function(ht){return arguments.length?(Y=typeof ht=="function"?ht:ga(ht),lt):Y},lt.domain=function(ht){return arguments.length?(pt=typeof ht=="function"?ht:ga([ht[0],ht[1]]),lt):pt},lt.thresholds=function(ht){return arguments.length?(ft=typeof ht=="function"?ht:Array.isArray(ht)?ga(ki.call(ht)):ga(ht),lt):ft},lt},Uu=function(Y,pt,ft){if(ft==null&&(ft=Ri),!!(lt=Y.length)){if((pt=+pt)<=0||lt<2)return+ft(Y[0],0,Y);if(pt>=1)return+ft(Y[lt-1],lt-1,Y);var lt,ht=(lt-1)*pt,Ot=Math.floor(ht),kt=+ft(Y[Ot],Ot,Y),fe=+ft(Y[Ot+1],Ot+1,Y);return kt+(fe-kt)*(ht-Ot)}},qu=function(Y,pt,ft){return Y=Sa.call(Y,Ri).sort(Oe),Math.ceil((ft-pt)/(2*(Uu(Y,.75)-Uu(Y,.25))*Math.pow(Y.length,-1/3)))},_c=function(Y,pt,ft){return Math.ceil((ft-pt)/(3.5*Xi(Y)*Math.pow(Y.length,-1/3)))},Ic=function(Y,pt){var ft=Y.length,lt=-1,ht,Ot;if(pt==null){for(;++lt<ft;)if((ht=Y[lt])!=null&&ht>=ht)for(Ot=ht;++lt<ft;)(ht=Y[lt])!=null&&ht>Ot&&(Ot=ht)}else for(;++lt<ft;)if((ht=pt(Y[lt],lt,Y))!=null&&ht>=ht)for(Ot=ht;++lt<ft;)(ht=pt(Y[lt],lt,Y))!=null&&ht>Ot&&(Ot=ht);return Ot},wl=function(Y,pt){var ft=Y.length,lt=ft,ht=-1,Ot,kt=0;if(pt==null)for(;++ht<ft;)isNaN(Ot=Ri(Y[ht]))?--lt:kt+=Ot;else for(;++ht<ft;)isNaN(Ot=Ri(pt(Y[ht],ht,Y)))?--lt:kt+=Ot;if(lt)return kt/lt},ac=function(Y,pt){var ft=Y.length,lt=-1,ht,Ot=[];if(pt==null)for(;++lt<ft;)isNaN(ht=Ri(Y[lt]))||Ot.push(ht);else for(;++lt<ft;)isNaN(ht=Ri(pt(Y[lt],lt,Y)))||Ot.push(ht);return Uu(Ot.sort(Oe),.5)},Gc=function(Y){for(var pt=Y.length,ft,lt=-1,ht=0,Ot,kt;++lt<pt;)ht+=Y[lt].length;for(Ot=new Array(ht);--pt>=0;)for(kt=Y[pt],ft=kt.length;--ft>=0;)Ot[--ht]=kt[ft];return Ot},ef=function(Y,pt){var ft=Y.length,lt=-1,ht,Ot;if(pt==null){for(;++lt<ft;)if((ht=Y[lt])!=null&&ht>=ht)for(Ot=ht;++lt<ft;)(ht=Y[lt])!=null&&Ot>ht&&(Ot=ht)}else for(;++lt<ft;)if((ht=pt(Y[lt],lt,Y))!=null&&ht>=ht)for(Ot=ht;++lt<ft;)(ht=pt(Y[lt],lt,Y))!=null&&Ot>ht&&(Ot=ht);return Ot},Bc=function(Y,pt){for(var ft=pt.length,lt=new Array(ft);ft--;)lt[ft]=Y[pt[ft]];return lt},Hc=function(Y,pt){if(!!(ft=Y.length)){var ft,lt=0,ht=0,Ot,kt=Y[ht];for(pt==null&&(pt=Oe);++lt<ft;)(pt(Ot=Y[lt],kt)<0||pt(kt,kt)!==0)&&(kt=Ot,ht=lt);if(pt(kt,kt)===0)return ht}},nf=function(Y,pt,ft){for(var lt=(ft==null?Y.length:ft)-(pt=pt==null?0:+pt),ht,Ot;lt;)Ot=Math.random()*lt--|0,ht=Y[lt+pt],Y[lt+pt]=Y[Ot+pt],Y[Ot+pt]=ht;return Y},Cc=function(Y,pt){var ft=Y.length,lt=-1,ht,Ot=0;if(pt==null)for(;++lt<ft;)(ht=+Y[lt])&&(Ot+=ht);else for(;++lt<ft;)(ht=+pt(Y[lt],lt,Y))&&(Ot+=ht);return Ot},Yc=function(Y){if(!(Ot=Y.length))return[];for(var pt=-1,ft=ef(Y,gc),lt=new Array(ft);++pt<ft;)for(var ht=-1,Ot,kt=lt[pt]=new Array(Ot);++ht<Ot;)kt[ht]=Y[ht][pt];return lt};function gc(Y){return Y.length}var lu=function(){return Yc(arguments)};function cu(Y,pt){switch(arguments.length){case 0:break;case 1:this.range(Y);break;default:this.range(pt).domain(Y);break}return this}function Hl(Y,pt){switch(arguments.length){case 0:break;case 1:this.interpolator(Y);break;default:this.interpolator(pt).domain(Y);break}return this}var ou="$";function fu(){}fu.prototype=bu.prototype={constructor:fu,has:function(pt){return ou+pt in this},get:function(pt){return this[ou+pt]},set:function(pt,ft){return this[ou+pt]=ft,this},remove:function(pt){var ft=ou+pt;return ft in this&&delete this[ft]},clear:function(){for(var pt in this)pt[0]===ou&&delete this[pt]},keys:function(){var pt=[];for(var ft in this)ft[0]===ou&&pt.push(ft.slice(1));return pt},values:function(){var pt=[];for(var ft in this)ft[0]===ou&&pt.push(this[ft]);return pt},entries:function(){var pt=[];for(var ft in this)ft[0]===ou&&pt.push({key:ft.slice(1),value:this[ft]});return pt},size:function(){var pt=0;for(var ft in this)ft[0]===ou&&++pt;return pt},empty:function(){for(var pt in this)if(pt[0]===ou)return!1;return!0},each:function(pt){for(var ft in this)ft[0]===ou&&pt(this[ft],ft.slice(1),this)}};function bu(Y,pt){var ft=new fu;if(Y instanceof fu)Y.each(function(fe,Ie){ft.set(Ie,fe)});else if(Array.isArray(Y)){var lt=-1,ht=Y.length,Ot;if(pt==null)for(;++lt<ht;)ft.set(lt,Y[lt]);else for(;++lt<ht;)ft.set(pt(Ot=Y[lt],lt,Y),Ot)}else if(Y)for(var kt in Y)ft.set(kt,Y[kt]);return ft}var Eu=bu,Fl=function(){var Y=[],pt=[],ft,lt,ht;function Ot(fe,Ie,Qe,In){if(Ie>=Y.length)return ft!=null&&fe.sort(ft),lt!=null?lt(fe):fe;for(var sr=-1,Vr=fe.length,ii=Y[Ie++],zi,Zi,oa=Eu(),no,Go=Qe();++sr<Vr;)(no=oa.get(zi=ii(Zi=fe[sr])+""))?no.push(Zi):oa.set(zi,[Zi]);return oa.each(function(ks,fs){In(Go,fs,Ot(ks,Ie,Qe,In))}),Go}function kt(fe,Ie){if(++Ie>Y.length)return fe;var Qe,In=pt[Ie-1];return lt!=null&&Ie>=Y.length?Qe=fe.entries():(Qe=[],fe.each(function(sr,Vr){Qe.push({key:Vr,values:kt(sr,Ie)})})),In!=null?Qe.sort(function(sr,Vr){return In(sr.key,Vr.key)}):Qe}return ht={object:function(Ie){return Ot(Ie,0,ll,Jl)},map:function(Ie){return Ot(Ie,0,Nc,Zc)},entries:function(Ie){return kt(Ot(Ie,0,Nc,Zc),0)},key:function(Ie){return Y.push(Ie),ht},sortKeys:function(Ie){return pt[Y.length-1]=Ie,ht},sortValues:function(Ie){return ft=Ie,ht},rollup:function(Ie){return lt=Ie,ht}}};function ll(){return{}}function Jl(Y,pt,ft){Y[pt]=ft}function Nc(){return Eu()}function Zc(Y,pt,ft){Y.set(pt,ft)}function Fc(){}var bl=Eu.prototype;Fc.prototype=rf.prototype={constructor:Fc,has:bl.has,add:function(pt){return pt+="",this[ou+pt]=pt,this},remove:bl.remove,clear:bl.clear,values:bl.keys,size:bl.size,empty:bl.empty,each:bl.each};function rf(Y,pt){var ft=new Fc;if(Y instanceof Fc)Y.each(function(Ot){ft.add(Ot)});else if(Y){var lt=-1,ht=Y.length;if(pt==null)for(;++lt<ht;)ft.add(Y[lt]);else for(;++lt<ht;)ft.add(pt(Y[lt],lt,Y))}return ft}var zc=rf,oc=function(Y){var pt=[];for(var ft in Y)pt.push(ft);return pt},El=function(Y){var pt=[];for(var ft in Y)pt.push(Y[ft]);return pt},ph=function(Y){var pt=[];for(var ft in Y)pt.push({key:ft,value:Y[ft]});return pt},Cf=Array.prototype,vf=Cf.map,Kc=Cf.slice,Of={name:"implicit"};function cf(){var Y=Eu(),pt=[],ft=[],lt=Of;function ht(Ot){var kt=Ot+"",fe=Y.get(kt);if(!fe){if(lt!==Of)return lt;Y.set(kt,fe=pt.push(Ot))}return ft[(fe-1)%ft.length]}return ht.domain=function(Ot){if(!arguments.length)return pt.slice();pt=[],Y=Eu();for(var kt=-1,fe=Ot.length,Ie,Qe;++kt<fe;)Y.has(Qe=(Ie=Ot[kt])+"")||Y.set(Qe,pt.push(Ie));return ht},ht.range=function(Ot){return arguments.length?(ft=Kc.call(Ot),ht):ft.slice()},ht.unknown=function(Ot){return arguments.length?(lt=Ot,ht):lt},ht.copy=function(){return cf(pt,ft).unknown(lt)},cu.apply(ht,arguments),ht}function Xc(){var Y=cf().unknown(void 0),pt=Y.domain,ft=Y.range,lt=[0,1],ht,Ot,kt=!1,fe=0,Ie=0,Qe=.5;delete Y.unknown;function In(){var sr=pt().length,Vr=lt[1]<lt[0],ii=lt[Vr-0],zi=lt[1-Vr];ht=(zi-ii)/Math.max(1,sr-fe+Ie*2),kt&&(ht=Math.floor(ht)),ii+=(zi-ii-ht*(sr-fe))*Qe,Ot=ht*(1-fe),kt&&(ii=Math.round(ii),Ot=Math.round(Ot));var Zi=_a(sr).map(function(oa){return ii+ht*oa});return ft(Vr?Zi.reverse():Zi)}return Y.domain=function(sr){return arguments.length?(pt(sr),In()):pt()},Y.range=function(sr){return arguments.length?(lt=[+sr[0],+sr[1]],In()):lt.slice()},Y.rangeRound=function(sr){return lt=[+sr[0],+sr[1]],kt=!0,In()},Y.bandwidth=function(){return Ot},Y.step=function(){return ht},Y.round=function(sr){return arguments.length?(kt=!!sr,In()):kt},Y.padding=function(sr){return arguments.length?(fe=Math.min(1,Ie=+sr),In()):fe},Y.paddingInner=function(sr){return arguments.length?(fe=Math.min(1,sr),In()):fe},Y.paddingOuter=function(sr){return arguments.length?(Ie=+sr,In()):Ie},Y.align=function(sr){return arguments.length?(Qe=Math.max(0,Math.min(1,sr)),In()):Qe},Y.copy=function(){return Xc(pt(),lt).round(kt).paddingInner(fe).paddingOuter(Ie).align(Qe)},cu.apply(In(),arguments)}function Gf(Y){var pt=Y.copy;return Y.padding=Y.paddingOuter,delete Y.paddingInner,delete Y.paddingOuter,Y.copy=function(){return Gf(pt())},Y}function Jc(){return Gf(Xc.apply(null,arguments).paddingInner(1))}var af=R("FmoU");function Vc(Y,pt,ft,lt,ht){var Ot=Y*Y,kt=Ot*Y;return((1-3*Y+3*Ot-kt)*pt+(4-6*Ot+3*kt)*ft+(1+3*Y+3*Ot-3*kt)*lt+kt*ht)/6}var Ef=function(Y){var pt=Y.length-1;return function(ft){var lt=ft<=0?ft=0:ft>=1?(ft=1,pt-1):Math.floor(ft*pt),ht=Y[lt],Ot=Y[lt+1],kt=lt>0?Y[lt-1]:2*ht-Ot,fe=lt<pt-1?Y[lt+2]:2*Ot-ht;return Vc((ft-lt/pt)*pt,kt,ht,Ot,fe)}},gh=function(Y){var pt=Y.length;return function(ft){var lt=Math.floor(((ft%=1)<0?++ft:ft)*pt),ht=Y[(lt+pt-1)%pt],Ot=Y[lt%pt],kt=Y[(lt+1)%pt],fe=Y[(lt+2)%pt];return Vc((ft-lt/pt)*pt,ht,Ot,kt,fe)}},Sf=function(Y){return function(){return Y}};function Vf(Y,pt){return function(ft){return Y+ft*pt}}function Qf(Y,pt,ft){return Y=Math.pow(Y,ft),pt=Math.pow(pt,ft)-Y,ft=1/ft,function(lt){return Math.pow(Y+lt*pt,ft)}}function pe(Y,pt){var ft=pt-Y;return ft?Vf(Y,ft>180||ft<-180?ft-360*Math.round(ft/360):ft):Sf(isNaN(Y)?pt:Y)}function ye(Y){return(Y=+Y)==1?Vt:function(pt,ft){return ft-pt?Qf(pt,ft,Y):Sf(isNaN(pt)?ft:pt)}}function Vt(Y,pt){var ft=pt-Y;return ft?Vf(Y,ft):Sf(isNaN(Y)?pt:Y)}var Xt=function Y(pt){var ft=ye(pt);function lt(ht,Ot){var kt=ft((ht=Object(af.b)(ht)).r,(Ot=Object(af.b)(Ot)).r),fe=ft(ht.g,Ot.g),Ie=ft(ht.b,Ot.b),Qe=Vt(ht.opacity,Ot.opacity);return function(In){return ht.r=kt(In),ht.g=fe(In),ht.b=Ie(In),ht.opacity=Qe(In),ht+""}}return lt.gamma=Y,lt}(1);function Ue(Y){return function(pt){var ft=pt.length,lt=new Array(ft),ht=new Array(ft),Ot=new Array(ft),kt,fe;for(kt=0;kt<ft;++kt)fe=Object(af.b)(pt[kt]),lt[kt]=fe.r||0,ht[kt]=fe.g||0,Ot[kt]=fe.b||0;return lt=Y(lt),ht=Y(ht),Ot=Y(Ot),fe.opacity=1,function(Ie){return fe.r=lt(Ie),fe.g=ht(Ie),fe.b=Ot(Ie),fe+""}}}var un=Ue(Ef),Zn=Ue(gh),ir=function(Y,pt){pt||(pt=[]);var ft=Y?Math.min(pt.length,Y.length):0,lt=pt.slice(),ht;return function(Ot){for(ht=0;ht<ft;++ht)lt[ht]=Y[ht]*(1-Ot)+pt[ht]*Ot;return lt}};function vr(Y){return ArrayBuffer.isView(Y)&&!(Y instanceof DataView)}var ti=function(Y,pt){return(vr(pt)?ir:Ci)(Y,pt)};function Ci(Y,pt){var ft=pt?pt.length:0,lt=Y?Math.min(ft,Y.length):0,ht=new Array(lt),Ot=new Array(ft),kt;for(kt=0;kt<lt;++kt)ht[kt]=Xs(Y[kt],pt[kt]);for(;kt<ft;++kt)Ot[kt]=pt[kt];return function(fe){for(kt=0;kt<lt;++kt)Ot[kt]=ht[kt](fe);return Ot}}var Ji=function(Y,pt){var ft=new Date;return Y=+Y,pt=+pt,function(lt){return ft.setTime(Y*(1-lt)+pt*lt),ft}},ua=function(Y,pt){return Y=+Y,pt=+pt,function(ft){return Y*(1-ft)+pt*ft}},la=function(Y,pt){var ft={},lt={},ht;(Y===null||typeof Y!="object")&&(Y={}),(pt===null||typeof pt!="object")&&(pt={});for(ht in pt)ht in Y?ft[ht]=Xs(Y[ht],pt[ht]):lt[ht]=pt[ht];return function(Ot){for(ht in ft)lt[ht]=ft[ht](Ot);return lt}},qa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xa=new RegExp(qa.source,"g");function Ho(Y){return function(){return Y}}function wo(Y){return function(pt){return Y(pt)+""}}var Su=function(Y,pt){var ft=qa.lastIndex=Xa.lastIndex=0,lt,ht,Ot,kt=-1,fe=[],Ie=[];for(Y=Y+"",pt=pt+"";(lt=qa.exec(Y))&&(ht=Xa.exec(pt));)(Ot=ht.index)>ft&&(Ot=pt.slice(ft,Ot),fe[kt]?fe[kt]+=Ot:fe[++kt]=Ot),(lt=lt[0])===(ht=ht[0])?fe[kt]?fe[kt]+=ht:fe[++kt]=ht:(fe[++kt]=null,Ie.push({i:kt,x:ua(lt,ht)})),ft=Xa.lastIndex;return ft<pt.length&&(Ot=pt.slice(ft),fe[kt]?fe[kt]+=Ot:fe[++kt]=Ot),fe.length<2?Ie[0]?wo(Ie[0].x):Ho(pt):(pt=Ie.length,function(Qe){for(var In=0,sr;In<pt;++In)fe[(sr=Ie[In]).i]=sr.x(Qe);return fe.join("")})},Xs=function(Y,pt){var ft=typeof pt,lt;return pt==null||ft==="boolean"?Sf(pt):(ft==="number"?ua:ft==="string"?(lt=Object(af.a)(pt))?(pt=lt,Xt):Su:pt instanceof af.a?Xt:pt instanceof Date?Ji:vr(pt)?ir:Array.isArray(pt)?Ci:typeof pt.valueOf!="function"&&typeof pt.toString!="function"||isNaN(pt)?la:ua)(Y,pt)},ku=function(Y,pt){return Y=+Y,pt=+pt,function(ft){return Math.round(Y*(1-ft)+pt*ft)}},hu=function(Y){return function(){return Y}},Gu=function(Y){return+Y},Zo=[0,1];function lo(Y){return Y}function Bs(Y,pt){return(pt-=Y=+Y)?function(ft){return(ft-Y)/pt}:hu(isNaN(pt)?NaN:.5)}function _u(Y){var pt=Y[0],ft=Y[Y.length-1],lt;return pt>ft&&(lt=pt,pt=ft,ft=lt),function(ht){return Math.max(pt,Math.min(ft,ht))}}function Sl(Y,pt,ft){var lt=Y[0],ht=Y[1],Ot=pt[0],kt=pt[1];return ht<lt?(lt=Bs(ht,lt),Ot=ft(kt,Ot)):(lt=Bs(lt,ht),Ot=ft(Ot,kt)),function(fe){return Ot(lt(fe))}}function Yl(Y,pt,ft){var lt=Math.min(Y.length,pt.length)-1,ht=new Array(lt),Ot=new Array(lt),kt=-1;for(Y[lt]<Y[0]&&(Y=Y.slice().reverse(),pt=pt.slice().reverse());++kt<lt;)ht[kt]=Bs(Y[kt],Y[kt+1]),Ot[kt]=ft(pt[kt],pt[kt+1]);return function(fe){var Ie=fr(Y,fe,1,lt)-1;return Ot[Ie](ht[Ie](fe))}}function Mc(Y,pt){return pt.domain(Y.domain()).range(Y.range()).interpolate(Y.interpolate()).clamp(Y.clamp()).unknown(Y.unknown())}function Pc(){var Y=Zo,pt=Zo,ft=Xs,lt,ht,Ot,kt=lo,fe,Ie,Qe;function In(){return fe=Math.min(Y.length,pt.length)>2?Yl:Sl,Ie=Qe=null,sr}function sr(Vr){return isNaN(Vr=+Vr)?Ot:(Ie||(Ie=fe(Y.map(lt),pt,ft)))(lt(kt(Vr)))}return sr.invert=function(Vr){return kt(ht((Qe||(Qe=fe(pt,Y.map(lt),ua)))(Vr)))},sr.domain=function(Vr){return arguments.length?(Y=vf.call(Vr,Gu),kt===lo||(kt=_u(Y)),In()):Y.slice()},sr.range=function(Vr){return arguments.length?(pt=Kc.call(Vr),In()):pt.slice()},sr.rangeRound=function(Vr){return pt=Kc.call(Vr),ft=ku,In()},sr.clamp=function(Vr){return arguments.length?(kt=Vr?_u(Y):lo,sr):kt!==lo},sr.interpolate=function(Vr){return arguments.length?(ft=Vr,In()):ft},sr.unknown=function(Vr){return arguments.length?(Ot=Vr,sr):Ot},function(Vr,ii){return lt=Vr,ht=ii,In()}}function Uc(Y,pt){return Pc()(Y,pt)}var wf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ff(Y){if(!(pt=wf.exec(Y)))throw new Error("invalid format: "+Y);var pt;return new Wf({fill:pt[1],align:pt[2],sign:pt[3],symbol:pt[4],zero:pt[5],width:pt[6],comma:pt[7],precision:pt[8]&&pt[8].slice(1),trim:pt[9],type:pt[10]})}ff.prototype=Wf.prototype;function Wf(Y){this.fill=Y.fill===void 0?" ":Y.fill+"",this.align=Y.align===void 0?">":Y.align+"",this.sign=Y.sign===void 0?"-":Y.sign+"",this.symbol=Y.symbol===void 0?"":Y.symbol+"",this.zero=!!Y.zero,this.width=Y.width===void 0?void 0:+Y.width,this.comma=!!Y.comma,this.precision=Y.precision===void 0?void 0:+Y.precision,this.trim=!!Y.trim,this.type=Y.type===void 0?"":Y.type+""}Wf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var qf=function(Y){return Math.abs(Y=Math.round(Y))>=1e21?Y.toLocaleString("en").replace(/,/g,""):Y.toString(10)};function Hf(Y,pt){if((ft=(Y=pt?Y.toExponential(pt-1):Y.toExponential()).indexOf("e"))<0)return null;var ft,lt=Y.slice(0,ft);return[lt.length>1?lt[0]+lt.slice(2):lt,+Y.slice(ft+1)]}var sc=function(Y){return Y=Hf(Math.abs(Y)),Y?Y[1]:NaN},_f=function(Y,pt){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sc(pt)/3)))*3-sc(Math.abs(Y)))},of=function(Y,pt){return function(ft,lt){for(var ht=ft.length,Ot=[],kt=0,fe=Y[0],Ie=0;ht>0&&fe>0&&(Ie+fe+1>lt&&(fe=Math.max(1,lt-Ie)),Ot.push(ft.substring(ht-=fe,ht+fe)),!((Ie+=fe+1)>lt));)fe=Y[kt=(kt+1)%Y.length];return Ot.reverse().join(pt)}},qc=function(Y){return function(pt){return pt.replace(/[0-9]/g,function(ft){return Y[+ft]})}},pf=function(Y){t:for(var pt=Y.length,ft=1,lt=-1,ht;ft<pt;++ft)switch(Y[ft]){case".":lt=ht=ft;break;case"0":lt===0&&(lt=ft),ht=ft;break;default:if(!+Y[ft])break t;lt>0&&(lt=0);break}return lt>0?Y.slice(0,lt)+Y.slice(ht+1):Y},Lc,Yf=function(Y,pt){var ft=Hf(Y,pt);if(!ft)return Y+"";var lt=ft[0],ht=ft[1],Ot=ht-(Lc=Math.max(-8,Math.min(8,Math.floor(ht/3)))*3)+1,kt=lt.length;return Ot===kt?lt:Ot>kt?lt+new Array(Ot-kt+1).join("0"):Ot>0?lt.slice(0,Ot)+"."+lt.slice(Ot):"0."+new Array(1-Ot).join("0")+Hf(Y,Math.max(0,pt+Ot-1))[0]},If=function(Y,pt){var ft=Hf(Y,pt);if(!ft)return Y+"";var lt=ft[0],ht=ft[1];return ht<0?"0."+new Array(-ht).join("0")+lt:lt.length>ht+1?lt.slice(0,ht+1)+"."+lt.slice(ht+1):lt+new Array(ht-lt.length+2).join("0")},Tc={"%":function(pt,ft){return(pt*100).toFixed(ft)},b:function(pt){return Math.round(pt).toString(2)},c:function(pt){return pt+""},d:qf,e:function(pt,ft){return pt.toExponential(ft)},f:function(pt,ft){return pt.toFixed(ft)},g:function(pt,ft){return pt.toPrecision(ft)},o:function(pt){return Math.round(pt).toString(8)},p:function(pt,ft){return If(pt*100,ft)},r:If,s:Yf,X:function(pt){return Math.round(pt).toString(16).toUpperCase()},x:function(pt){return Math.round(pt).toString(16)}},kc=function(Y){return Y},cl=Array.prototype.map,Oc=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],Lf=function(Y){var pt=Y.grouping===void 0||Y.thousands===void 0?kc:of(cl.call(Y.grouping,Number),Y.thousands+""),ft=Y.currency===void 0?"":Y.currency[0]+"",lt=Y.currency===void 0?"":Y.currency[1]+"",ht=Y.decimal===void 0?".":Y.decimal+"",Ot=Y.numerals===void 0?kc:qc(cl.call(Y.numerals,String)),kt=Y.percent===void 0?"%":Y.percent+"",fe=Y.minus===void 0?"-":Y.minus+"",Ie=Y.nan===void 0?"NaN":Y.nan+"";function Qe(sr){sr=ff(sr);var Vr=sr.fill,ii=sr.align,zi=sr.sign,Zi=sr.symbol,oa=sr.zero,no=sr.width,Go=sr.comma,ks=sr.precision,fs=sr.trim,Yo=sr.type;Yo==="n"?(Go=!0,Yo="g"):Tc[Yo]||(ks===void 0&&(ks=12),fs=!0,Yo="g"),(oa||Vr==="0"&&ii==="=")&&(oa=!0,Vr="0",ii="=");var Pu=Zi==="$"?ft:Zi==="#"&&/[boxX]/.test(Yo)?"0"+Yo.toLowerCase():"",Po=Zi==="$"?lt:/[%p]/.test(Yo)?kt:"",Vu=Tc[Yo],vl=/[defgprs%]/.test(Yo);ks=ks===void 0?6:/[gprs]/.test(Yo)?Math.max(1,Math.min(21,ks)):Math.max(0,Math.min(20,ks));function rc(Xo){var vc=Pu,kl=Po,$f,zd,od;if(Yo==="c")kl=Vu(Xo)+kl,Xo="";else{Xo=+Xo;var sd=Xo<0||1/Xo<0;if(Xo=isNaN(Xo)?Ie:Vu(Math.abs(Xo),ks),fs&&(Xo=pf(Xo)),sd&&+Xo==0&&zi!=="+"&&(sd=!1),vc=(sd?zi==="("?zi:fe:zi==="-"||zi==="("?"":zi)+vc,kl=(Yo==="s"?Oc[8+Lc/3]:"")+kl+(sd&&zi==="("?")":""),vl){for($f=-1,zd=Xo.length;++$f<zd;)if(od=Xo.charCodeAt($f),48>od||od>57){kl=(od===46?ht+Xo.slice($f+1):Xo.slice($f))+kl,Xo=Xo.slice(0,$f);break}}}Go&&!oa&&(Xo=pt(Xo,Infinity));var ud=vc.length+Xo.length+kl.length,kf=ud<no?new Array(no-ud+1).join(Vr):"";switch(Go&&oa&&(Xo=pt(kf+Xo,kf.length?no-kl.length:Infinity),kf=""),ii){case"<":Xo=vc+Xo+kl+kf;break;case"=":Xo=vc+kf+Xo+kl;break;case"^":Xo=kf.slice(0,ud=kf.length>>1)+vc+Xo+kl+kf.slice(ud);break;default:Xo=kf+vc+Xo+kl;break}return Ot(Xo)}return rc.toString=function(){return sr+""},rc}function In(sr,Vr){var ii=Qe((sr=ff(sr),sr.type="f",sr)),zi=Math.max(-8,Math.min(8,Math.floor(sc(Vr)/3)))*3,Zi=Math.pow(10,-zi),oa=Oc[8+zi/3];return function(no){return ii(Zi*no)+oa}}return{format:Qe,formatPrefix:In}},th,eh,nh;Ac({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Ac(Y){return th=Lf(Y),eh=th.format,nh=th.formatPrefix,th}var mh=function(Y,pt){return Y=Math.abs(Y),pt=Math.abs(pt)-Y,Math.max(0,sc(pt)-sc(Y))+1},Ih=function(Y){return Math.max(0,-sc(Math.abs(Y)))},jt=function(Y,pt,ft,lt){var ht=Ts(Y,pt,ft),Ot;switch(lt=ff(lt==null?",f":lt),lt.type){case"s":{var kt=Math.max(Math.abs(Y),Math.abs(pt));return lt.precision==null&&!isNaN(Ot=_f(ht,kt))&&(lt.precision=Ot),nh(lt,kt)}case"":case"e":case"g":case"p":case"r":{lt.precision==null&&!isNaN(Ot=mh(ht,Math.max(Math.abs(Y),Math.abs(pt))))&&(lt.precision=Ot-(lt.type==="e"));break}case"f":case"%":{lt.precision==null&&!isNaN(Ot=Ih(ht))&&(lt.precision=Ot-(lt.type==="%")*2);break}}return eh(lt)};function bt(Y){var pt=Y.domain;return Y.ticks=function(ft){var lt=pt();return Ps(lt[0],lt[lt.length-1],ft==null?10:ft)},Y.tickFormat=function(ft,lt){var ht=pt();return jt(ht[0],ht[ht.length-1],ft==null?10:ft,lt)},Y.nice=function(ft){ft==null&&(ft=10);var lt=pt(),ht=0,Ot=lt.length-1,kt=lt[ht],fe=lt[Ot],Ie;return fe<kt&&(Ie=kt,kt=fe,fe=Ie,Ie=ht,ht=Ot,Ot=Ie),Ie=ls(kt,fe,ft),Ie>0?(kt=Math.floor(kt/Ie)*Ie,fe=Math.ceil(fe/Ie)*Ie,Ie=ls(kt,fe,ft)):Ie<0&&(kt=Math.ceil(kt*Ie)/Ie,fe=Math.floor(fe*Ie)/Ie,Ie=ls(kt,fe,ft)),Ie>0?(lt[ht]=Math.floor(kt/Ie)*Ie,lt[Ot]=Math.ceil(fe/Ie)*Ie,pt(lt)):Ie<0&&(lt[ht]=Math.ceil(kt*Ie)/Ie,lt[Ot]=Math.floor(fe*Ie)/Ie,pt(lt)),Y},Y}function X(){var Y=Uc(lo,lo);return Y.copy=function(){return Mc(Y,X())},cu.apply(Y,arguments),bt(Y)}function Et(Y){var pt;function ft(lt){return isNaN(lt=+lt)?pt:lt}return ft.invert=ft,ft.domain=ft.range=function(lt){return arguments.length?(Y=vf.call(lt,Gu),ft):Y.slice()},ft.unknown=function(lt){return arguments.length?(pt=lt,ft):pt},ft.copy=function(){return Et(Y).unknown(pt)},Y=arguments.length?vf.call(Y,Gu):[0,1],bt(ft)}var Lt=function(Y,pt){Y=Y.slice();var ft=0,lt=Y.length-1,ht=Y[ft],Ot=Y[lt],kt;return Ot<ht&&(kt=ft,ft=lt,lt=kt,kt=ht,ht=Ot,Ot=kt),Y[ft]=pt.floor(ht),Y[lt]=pt.ceil(Ot),Y};function ie(Y){return Math.log(Y)}function ze(Y){return Math.exp(Y)}function yn(Y){return-Math.log(-Y)}function dn(Y){return-Math.exp(-Y)}function Pn(Y){return isFinite(Y)?+("1e"+Y):Y<0?0:Y}function Br(Y){return Y===10?Pn:Y===Math.E?Math.exp:function(pt){return Math.pow(Y,pt)}}function ce(Y){return Y===Math.E?Math.log:Y===10&&Math.log10||Y===2&&Math.log2||(Y=Math.log(Y),function(pt){return Math.log(pt)/Y})}function xe(Y){return function(pt){return-Y(-pt)}}function Ke(Y){var pt=Y(ie,ze),ft=pt.domain,lt=10,ht,Ot;function kt(){return ht=ce(lt),Ot=Br(lt),ft()[0]<0?(ht=xe(ht),Ot=xe(Ot),Y(yn,dn)):Y(ie,ze),pt}return pt.base=function(fe){return arguments.length?(lt=+fe,kt()):lt},pt.domain=function(fe){return arguments.length?(ft(fe),kt()):ft()},pt.ticks=function(fe){var Ie=ft(),Qe=Ie[0],In=Ie[Ie.length-1],sr;(sr=In<Qe)&&(Vr=Qe,Qe=In,In=Vr);var Vr=ht(Qe),ii=ht(In),zi,Zi,oa,no=fe==null?10:+fe,Go=[];if(!(lt%1)&&ii-Vr<no){if(Vr=Math.round(Vr)-1,ii=Math.round(ii)+1,Qe>0){for(;Vr<ii;++Vr)for(Zi=1,zi=Ot(Vr);Zi<lt;++Zi)if(oa=zi*Zi,!(oa<Qe)){if(oa>In)break;Go.push(oa)}}else for(;Vr<ii;++Vr)for(Zi=lt-1,zi=Ot(Vr);Zi>=1;--Zi)if(oa=zi*Zi,!(oa<Qe)){if(oa>In)break;Go.push(oa)}}else Go=Ps(Vr,ii,Math.min(ii-Vr,no)).map(Ot);return sr?Go.reverse():Go},pt.tickFormat=function(fe,Ie){if(Ie==null&&(Ie=lt===10?".0e":","),typeof Ie!="function"&&(Ie=eh(Ie)),fe===Infinity)return Ie;fe==null&&(fe=10);var Qe=Math.max(1,lt*fe/pt.ticks().length);return function(In){var sr=In/Ot(Math.round(ht(In)));return sr*lt<lt-.5&&(sr*=lt),sr<=Qe?Ie(In):""}},pt.nice=function(){return ft(Lt(ft(),{floor:function(Ie){return Ot(Math.floor(ht(Ie)))},ceil:function(Ie){return Ot(Math.ceil(ht(Ie)))}}))},pt}function zn(){var Y=Ke(Pc()).domain([1,10]);return Y.copy=function(){return Mc(Y,zn()).base(Y.base())},cu.apply(Y,arguments),Y}function lr(Y){return function(pt){return Math.sign(pt)*Math.log1p(Math.abs(pt/Y))}}function pr(Y){return function(pt){return Math.sign(pt)*Math.expm1(Math.abs(pt))*Y}}function Qn(Y){var pt=1,ft=Y(lr(pt),pr(pt));return ft.constant=function(lt){return arguments.length?Y(lr(pt=+lt),pr(pt)):pt},bt(ft)}function Jr(){var Y=Qn(Pc());return Y.copy=function(){return Mc(Y,Jr()).constant(Y.constant())},cu.apply(Y,arguments)}function qr(Y){return function(pt){return pt<0?-Math.pow(-pt,Y):Math.pow(pt,Y)}}function ri(Y){return Y<0?-Math.sqrt(-Y):Math.sqrt(Y)}function ui(Y){return Y<0?-Y*Y:Y*Y}function yi(Y){var pt=Y(lo,lo),ft=1;function lt(){return ft===1?Y(lo,lo):ft===.5?Y(ri,ui):Y(qr(ft),qr(1/ft))}return pt.exponent=function(ht){return arguments.length?(ft=+ht,lt()):ft},bt(pt)}function Ti(){var Y=yi(Pc());return Y.copy=function(){return Mc(Y,Ti()).exponent(Y.exponent())},cu.apply(Y,arguments),Y}function pi(){return Ti.apply(null,arguments).exponent(.5)}function gi(){var Y=[],pt=[],ft=[],lt;function ht(){var kt=0,fe=Math.max(1,pt.length);for(ft=new Array(fe-1);++kt<fe;)ft[kt-1]=Uu(Y,kt/fe);return Ot}function Ot(kt){return isNaN(kt=+kt)?lt:pt[fr(ft,kt)]}return Ot.invertExtent=function(kt){var fe=pt.indexOf(kt);return fe<0?[NaN,NaN]:[fe>0?ft[fe-1]:Y[0],fe<ft.length?ft[fe]:Y[Y.length-1]]},Ot.domain=function(kt){if(!arguments.length)return Y.slice();Y=[];for(var fe=0,Ie=kt.length,Qe;fe<Ie;++fe)Qe=kt[fe],Qe!=null&&!isNaN(Qe=+Qe)&&Y.push(Qe);return Y.sort(Oe),ht()},Ot.range=function(kt){return arguments.length?(pt=Kc.call(kt),ht()):pt.slice()},Ot.unknown=function(kt){return arguments.length?(lt=kt,Ot):lt},Ot.quantiles=function(){return ft.slice()},Ot.copy=function(){return gi().domain(Y).range(pt).unknown(lt)},cu.apply(Ot,arguments)}function Cr(){var Y=0,pt=1,ft=1,lt=[.5],ht=[0,1],Ot;function kt(Ie){return Ie<=Ie?ht[fr(lt,Ie,0,ft)]:Ot}function fe(){var Ie=-1;for(lt=new Array(ft);++Ie<ft;)lt[Ie]=((Ie+1)*pt-(Ie-ft)*Y)/(ft+1);return kt}return kt.domain=function(Ie){return arguments.length?(Y=+Ie[0],pt=+Ie[1],fe()):[Y,pt]},kt.range=function(Ie){return arguments.length?(ft=(ht=Kc.call(Ie)).length-1,fe()):ht.slice()},kt.invertExtent=function(Ie){var Qe=ht.indexOf(Ie);return Qe<0?[NaN,NaN]:Qe<1?[Y,lt[0]]:Qe>=ft?[lt[ft-1],pt]:[lt[Qe-1],lt[Qe]]},kt.unknown=function(Ie){return arguments.length&&(Ot=Ie),kt},kt.thresholds=function(){return lt.slice()},kt.copy=function(){return Cr().domain([Y,pt]).range(ht).unknown(Ot)},cu.apply(bt(kt),arguments)}function Ir(){var Y=[.5],pt=[0,1],ft,lt=1;function ht(Ot){return Ot<=Ot?pt[fr(Y,Ot,0,lt)]:ft}return ht.domain=function(Ot){return arguments.length?(Y=Kc.call(Ot),lt=Math.min(Y.length,pt.length-1),ht):Y.slice()},ht.range=function(Ot){return arguments.length?(pt=Kc.call(Ot),lt=Math.min(Y.length,pt.length-1),ht):pt.slice()},ht.invertExtent=function(Ot){var kt=pt.indexOf(Ot);return[Y[kt-1],Y[kt]]},ht.unknown=function(Ot){return arguments.length?(ft=Ot,ht):ft},ht.copy=function(){return Ir().domain(Y).range(pt).unknown(ft)},cu.apply(ht,arguments)}var Mi=new Date,Gi=new Date;function kr(Y,pt,ft,lt){function ht(Ot){return Y(Ot=arguments.length===0?new Date:new Date(+Ot)),Ot}return ht.floor=function(Ot){return Y(Ot=new Date(+Ot)),Ot},ht.ceil=function(Ot){return Y(Ot=new Date(Ot-1)),pt(Ot,1),Y(Ot),Ot},ht.round=function(Ot){var kt=ht(Ot),fe=ht.ceil(Ot);return Ot-kt<fe-Ot?kt:fe},ht.offset=function(Ot,kt){return pt(Ot=new Date(+Ot),kt==null?1:Math.floor(kt)),Ot},ht.range=function(Ot,kt,fe){var Ie=[],Qe;if(Ot=ht.ceil(Ot),fe=fe==null?1:Math.floor(fe),!(Ot<kt)||!(fe>0))return Ie;do Ie.push(Qe=new Date(+Ot)),pt(Ot,fe),Y(Ot);while(Qe<Ot&&Ot<kt);return Ie},ht.filter=function(Ot){return kr(function(kt){if(kt>=kt)for(;Y(kt),!Ot(kt);)kt.setTime(kt-1)},function(kt,fe){if(kt>=kt)if(fe<0)for(;++fe<=0;)for(;pt(kt,-1),!Ot(kt););else for(;--fe>=0;)for(;pt(kt,1),!Ot(kt););})},ft&&(ht.count=function(Ot,kt){return Mi.setTime(+Ot),Gi.setTime(+kt),Y(Mi),Y(Gi),Math.floor(ft(Mi,Gi))},ht.every=function(Ot){return Ot=Math.floor(Ot),!isFinite(Ot)||!(Ot>0)?null:Ot>1?ht.filter(lt?function(kt){return lt(kt)%Ot==0}:function(kt){return ht.count(0,kt)%Ot==0}):ht}),ht}var ca=kr(function(Y){Y.setMonth(0,1),Y.setHours(0,0,0,0)},function(Y,pt){Y.setFullYear(Y.getFullYear()+pt)},function(Y,pt){return pt.getFullYear()-Y.getFullYear()},function(Y){return Y.getFullYear()});ca.every=function(Y){return!isFinite(Y=Math.floor(Y))||!(Y>0)?null:kr(function(pt){pt.setFullYear(Math.floor(pt.getFullYear()/Y)*Y),pt.setMonth(0,1),pt.setHours(0,0,0,0)},function(pt,ft){pt.setFullYear(pt.getFullYear()+ft*Y)})};var Oi=ca,Ai=ca.range,Ei=kr(function(Y){Y.setDate(1),Y.setHours(0,0,0,0)},function(Y,pt){Y.setMonth(Y.getMonth()+pt)},function(Y,pt){return pt.getMonth()-Y.getMonth()+(pt.getFullYear()-Y.getFullYear())*12},function(Y){return Y.getMonth()}),Ii=Ei,fa=Ei.range,ma=1e3,ji=6e4,Si=36e5,di=864e5,Qi=6048e5;function aa(Y){return kr(function(pt){pt.setDate(pt.getDate()-(pt.getDay()+7-Y)%7),pt.setHours(0,0,0,0)},function(pt,ft){pt.setDate(pt.getDate()+ft*7)},function(pt,ft){return(ft-pt-(ft.getTimezoneOffset()-pt.getTimezoneOffset())*ji)/Qi})}var $i=aa(0),co=aa(1),mo=aa(2),No=aa(3),Ko=aa(4),Il=aa(5),uc=aa(6),ts=$i.range,_l=co.range,wu=mo.range,Zl=No.range,$l=Ko.range,lc=Il.range,mc=uc.range,cc=kr(function(Y){Y.setHours(0,0,0,0)},function(Y,pt){Y.setDate(Y.getDate()+pt)},function(Y,pt){return(pt-Y-(pt.getTimezoneOffset()-Y.getTimezoneOffset())*ji)/di},function(Y){return Y.getDate()-1}),fl=cc,Io=cc.range,yc=kr(function(Y){Y.setTime(Y-Y.getMilliseconds()-Y.getSeconds()*ma-Y.getMinutes()*ji)},function(Y,pt){Y.setTime(+Y+pt*Si)},function(Y,pt){return(pt-Y)/Si},function(Y){return Y.getHours()}),zs=yc,Ya=yc.range,So=kr(function(Y){Y.setTime(Y-Y.getMilliseconds()-Y.getSeconds()*ma)},function(Y,pt){Y.setTime(+Y+pt*ji)},function(Y,pt){return(pt-Y)/ji},function(Y){return Y.getMinutes()}),as=So,xc=So.range,bc=kr(function(Y){Y.setTime(Y-Y.getMilliseconds())},function(Y,pt){Y.setTime(+Y+pt*ma)},function(Y,pt){return(pt-Y)/ma},function(Y){return Y.getUTCSeconds()}),sf=bc,jn=bc.range,Wr=kr(function(){},function(Y,pt){Y.setTime(+Y+pt)},function(Y,pt){return pt-Y});Wr.every=function(Y){return Y=Math.floor(Y),!isFinite(Y)||!(Y>0)?null:Y>1?kr(function(pt){pt.setTime(Math.floor(pt/Y)*Y)},function(pt,ft){pt.setTime(+pt+ft*Y)},function(pt,ft){return(ft-pt)/Y}):Wr};var Ur=Wr,na=Wr.range;function oo(Y){return kr(function(pt){pt.setUTCDate(pt.getUTCDate()-(pt.getUTCDay()+7-Y)%7),pt.setUTCHours(0,0,0,0)},function(pt,ft){pt.setUTCDate(pt.getUTCDate()+ft*7)},function(pt,ft){return(ft-pt)/Qi})}var Sn=oo(0),rn=oo(1),nr=oo(2),Or=oo(3),wr=oo(4),ur=oo(5),ar=oo(6),Er=Sn.range,Tn=rn.range,Jn=nr.range,bn=Or.range,Tr=wr.range,Dr=ur.range,ci=ar.range,Hr=kr(function(Y){Y.setUTCHours(0,0,0,0)},function(Y,pt){Y.setUTCDate(Y.getUTCDate()+pt)},function(Y,pt){return(pt-Y)/di},function(Y){return Y.getUTCDate()-1}),ai=Hr,Bi=Hr.range,ha=kr(function(Y){Y.setUTCMonth(0,1),Y.setUTCHours(0,0,0,0)},function(Y,pt){Y.setUTCFullYear(Y.getUTCFullYear()+pt)},function(Y,pt){return pt.getUTCFullYear()-Y.getUTCFullYear()},function(Y){return Y.getUTCFullYear()});ha.every=function(Y){return!isFinite(Y=Math.floor(Y))||!(Y>0)?null:kr(function(pt){pt.setUTCFullYear(Math.floor(pt.getUTCFullYear()/Y)*Y),pt.setUTCMonth(0,1),pt.setUTCHours(0,0,0,0)},function(pt,ft){pt.setUTCFullYear(pt.getUTCFullYear()+ft*Y)})};var fo=ha,da=ha.range;function Na(Y){if(0<=Y.y&&Y.y<100){var pt=new Date(-1,Y.m,Y.d,Y.H,Y.M,Y.S,Y.L);return pt.setFullYear(Y.y),pt}return new Date(Y.y,Y.m,Y.d,Y.H,Y.M,Y.S,Y.L)}function ho(Y){if(0<=Y.y&&Y.y<100){var pt=new Date(Date.UTC(-1,Y.m,Y.d,Y.H,Y.M,Y.S,Y.L));return pt.setUTCFullYear(Y.y),pt}return new Date(Date.UTC(Y.y,Y.m,Y.d,Y.H,Y.M,Y.S,Y.L))}function cs(Y,pt,ft){return{y:Y,m:pt,d:ft,H:0,M:0,S:0,L:0}}function Ll(Y){var pt=Y.dateTime,ft=Y.date,lt=Y.time,ht=Y.periods,Ot=Y.days,kt=Y.shortDays,fe=Y.months,Ie=Y.shortMonths,Qe=gf(ht),In=ih(ht),sr=gf(Ot),Vr=ih(Ot),ii=gf(kt),zi=ih(kt),Zi=gf(fe),oa=ih(fe),no=gf(Ie),Go=ih(Ie),ks={a:sd,A:ud,b:kf,B:Wd,c:null,d:Mf,e:Mf,f:Kf,g:ve,G:Ge,H:Od,I:wd,j:Ud,L:fc,m:Id,M:d,p:Hd,q:Yd,Q:Us,s:Va,S:p,u:C,U:N,V:ct,w:Tt,W:Bt,x:null,X:null,y:Jt,Y:Re,Z:He,"%":yo},fs={a:Zd,A:Kd,b:Xd,B:Jd,c:null,d:ln,e:ln,f:_r,g:eo,G:ya,H:Ln,I:Cn,j:Kn,L:Yn,m:Nr,M:Yr,p:$d,q:Qd,Q:Us,s:Va,S:vi,u:si,U:Ni,V:ia,w:pa,W:va,x:null,X:null,y:qi,Y:wa,Z:es,"%":yo},Yo={a:rc,A:Xo,b:vc,B:kl,c:$f,d:Zf,e:Zf,f:Zh,g:cd,G:ld,H:hd,I:hd,j:ah,L:Rf,m:fd,M:tc,p:vl,q:Cd,Q:dd,s:xh,S:Rh,u:Pd,U:ql,V:tl,w:yh,W:Td,x:zd,X:od,y:cd,Y:ld,Z:Ad,"%":Kh};ks.x=Pu(ft,ks),ks.X=Pu(lt,ks),ks.c=Pu(pt,ks),fs.x=Pu(ft,fs),fs.X=Pu(lt,fs),fs.c=Pu(pt,fs);function Pu(Lo,su){return function(ys){var ta=[],df=-1,Xl=0,xf=Lo.length,bf,Yh,Vd;for(ys instanceof Date||(ys=new Date(+ys));++df<xf;)Lo.charCodeAt(df)===37&&(ta.push(Lo.slice(Xl,df)),(Yh=Rc[bf=Lo.charAt(++df)])!=null?bf=Lo.charAt(++df):Yh=bf==="e"?" ":"0",(Vd=su[bf])&&(bf=Vd(ys,Yh)),ta.push(bf),Xl=df+1);return ta.push(Lo.slice(Xl,df)),ta.join("")}}function Po(Lo,su){return function(ys){var ta=cs(1900,void 0,1),df=Vu(ta,Lo,ys+="",0),Xl,xf;if(df!=ys.length)return null;if("Q"in ta)return new Date(ta.Q);if("s"in ta)return new Date(ta.s*1e3+("L"in ta?ta.L:0));if(su&&!("Z"in ta)&&(ta.Z=0),"p"in ta&&(ta.H=ta.H%12+ta.p*12),ta.m===void 0&&(ta.m="q"in ta?ta.q:0),"V"in ta){if(ta.V<1||ta.V>53)return null;"w"in ta||(ta.w=1),"Z"in ta?(Xl=ho(cs(ta.y,0,1)),xf=Xl.getUTCDay(),Xl=xf>4||xf===0?rn.ceil(Xl):rn(Xl),Xl=ai.offset(Xl,(ta.V-1)*7),ta.y=Xl.getUTCFullYear(),ta.m=Xl.getUTCMonth(),ta.d=Xl.getUTCDate()+(ta.w+6)%7):(Xl=Na(cs(ta.y,0,1)),xf=Xl.getDay(),Xl=xf>4||xf===0?co.ceil(Xl):co(Xl),Xl=fl.offset(Xl,(ta.V-1)*7),ta.y=Xl.getFullYear(),ta.m=Xl.getMonth(),ta.d=Xl.getDate()+(ta.w+6)%7)}else("W"in ta||"U"in ta)&&("w"in ta||(ta.w="u"in ta?ta.u%7:"W"in ta?1:0),xf="Z"in ta?ho(cs(ta.y,0,1)).getUTCDay():Na(cs(ta.y,0,1)).getDay(),ta.m=0,ta.d="W"in ta?(ta.w+6)%7+ta.W*7-(xf+5)%7:ta.w+ta.U*7-(xf+6)%7);return"Z"in ta?(ta.H+=ta.Z/100|0,ta.M+=ta.Z%100,ho(ta)):Na(ta)}}function Vu(Lo,su,ys,ta){for(var df=0,Xl=su.length,xf=ys.length,bf,Yh;df<Xl;){if(ta>=xf)return-1;if(bf=su.charCodeAt(df++),bf===37){if(bf=su.charAt(df++),Yh=Yo[bf in Rc?su.charAt(df++):bf],!Yh||(ta=Yh(Lo,ys,ta))<0)return-1}else if(bf!=ys.charCodeAt(ta++))return-1}return ta}function vl(Lo,su,ys){var ta=Qe.exec(su.slice(ys));return ta?(Lo.p=In[ta[0].toLowerCase()],ys+ta[0].length):-1}function rc(Lo,su,ys){var ta=ii.exec(su.slice(ys));return ta?(Lo.w=zi[ta[0].toLowerCase()],ys+ta[0].length):-1}function Xo(Lo,su,ys){var ta=sr.exec(su.slice(ys));return ta?(Lo.w=Vr[ta[0].toLowerCase()],ys+ta[0].length):-1}function vc(Lo,su,ys){var ta=no.exec(su.slice(ys));return ta?(Lo.m=Go[ta[0].toLowerCase()],ys+ta[0].length):-1}function kl(Lo,su,ys){var ta=Zi.exec(su.slice(ys));return ta?(Lo.m=oa[ta[0].toLowerCase()],ys+ta[0].length):-1}function $f(Lo,su,ys){return Vu(Lo,pt,su,ys)}function zd(Lo,su,ys){return Vu(Lo,ft,su,ys)}function od(Lo,su,ys){return Vu(Lo,lt,su,ys)}function sd(Lo){return kt[Lo.getDay()]}function ud(Lo){return Ot[Lo.getDay()]}function kf(Lo){return Ie[Lo.getMonth()]}function Wd(Lo){return fe[Lo.getMonth()]}function Hd(Lo){return ht[+(Lo.getHours()>=12)]}function Yd(Lo){return 1+~~(Lo.getMonth()/3)}function Zd(Lo){return kt[Lo.getUTCDay()]}function Kd(Lo){return Ot[Lo.getUTCDay()]}function Xd(Lo){return Ie[Lo.getUTCMonth()]}function Jd(Lo){return fe[Lo.getUTCMonth()]}function $d(Lo){return ht[+(Lo.getUTCHours()>=12)]}function Qd(Lo){return 1+~~(Lo.getUTCMonth()/3)}return{format:function(su){var ys=Pu(su+="",ks);return ys.toString=function(){return su},ys},parse:function(su){var ys=Po(su+="",!1);return ys.toString=function(){return su},ys},utcFormat:function(su){var ys=Pu(su+="",fs);return ys.toString=function(){return su},ys},utcParse:function(su){var ys=Po(su+="",!0);return ys.toString=function(){return su},ys}}}var Rc={"-":"",_:" ","0":"0"},Ql=/^\s*\d+/,$c=/^%/,Lh=/[\\^$*+?|[\]().{}]/g;function os(Y,pt,ft){var lt=Y<0?"-":"",ht=(lt?-Y:Y)+"",Ot=ht.length;return lt+(Ot<ft?new Array(ft-Ot+1).join(pt)+ht:ht)}function rh(Y){return Y.replace(Lh,"\\$&")}function gf(Y){return new RegExp("^(?:"+Y.map(rh).join("|")+")","i")}function ih(Y){for(var pt={},ft=-1,lt=Y.length;++ft<lt;)pt[Y[ft].toLowerCase()]=ft;return pt}function yh(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+1));return lt?(Y.w=+lt[0],ft+lt[0].length):-1}function Pd(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+1));return lt?(Y.u=+lt[0],ft+lt[0].length):-1}function ql(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+2));return lt?(Y.U=+lt[0],ft+lt[0].length):-1}function tl(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+2));return lt?(Y.V=+lt[0],ft+lt[0].length):-1}function Td(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+2));return lt?(Y.W=+lt[0],ft+lt[0].length):-1}function ld(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+4));return lt?(Y.y=+lt[0],ft+lt[0].length):-1}function cd(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+2));return lt?(Y.y=+lt[0]+(+lt[0]>68?1900:2e3),ft+lt[0].length):-1}function Ad(Y,pt,ft){var lt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(pt.slice(ft,ft+6));return lt?(Y.Z=lt[1]?0:-(lt[2]+(lt[3]||"00")),ft+lt[0].length):-1}function Cd(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+1));return lt?(Y.q=lt[0]*3-3,ft+lt[0].length):-1}function fd(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+2));return lt?(Y.m=lt[0]-1,ft+lt[0].length):-1}function Zf(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+2));return lt?(Y.d=+lt[0],ft+lt[0].length):-1}function ah(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+3));return lt?(Y.m=0,Y.d=+lt[0],ft+lt[0].length):-1}function hd(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+2));return lt?(Y.H=+lt[0],ft+lt[0].length):-1}function tc(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+2));return lt?(Y.M=+lt[0],ft+lt[0].length):-1}function Rh(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+2));return lt?(Y.S=+lt[0],ft+lt[0].length):-1}function Rf(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+3));return lt?(Y.L=+lt[0],ft+lt[0].length):-1}function Zh(Y,pt,ft){var lt=Ql.exec(pt.slice(ft,ft+6));return lt?(Y.L=Math.floor(lt[0]/1e3),ft+lt[0].length):-1}function Kh(Y,pt,ft){var lt=$c.exec(pt.slice(ft,ft+1));return lt?ft+lt[0].length:-1}function dd(Y,pt,ft){var lt=Ql.exec(pt.slice(ft));return lt?(Y.Q=+lt[0],ft+lt[0].length):-1}function xh(Y,pt,ft){var lt=Ql.exec(pt.slice(ft));return lt?(Y.s=+lt[0],ft+lt[0].length):-1}function Mf(Y,pt){return os(Y.getDate(),pt,2)}function Od(Y,pt){return os(Y.getHours(),pt,2)}function wd(Y,pt){return os(Y.getHours()%12||12,pt,2)}function Ud(Y,pt){return os(1+fl.count(Oi(Y),Y),pt,3)}function fc(Y,pt){return os(Y.getMilliseconds(),pt,3)}function Kf(Y,pt){return fc(Y,pt)+"000"}function Id(Y,pt){return os(Y.getMonth()+1,pt,2)}function d(Y,pt){return os(Y.getMinutes(),pt,2)}function p(Y,pt){return os(Y.getSeconds(),pt,2)}function C(Y){var pt=Y.getDay();return pt===0?7:pt}function N(Y,pt){return os($i.count(Oi(Y)-1,Y),pt,2)}function Q(Y){var pt=Y.getDay();return pt>=4||pt===0?Ko(Y):Ko.ceil(Y)}function ct(Y,pt){return Y=Q(Y),os(Ko.count(Oi(Y),Y)+(Oi(Y).getDay()===4),pt,2)}function Tt(Y){return Y.getDay()}function Bt(Y,pt){return os(co.count(Oi(Y)-1,Y),pt,2)}function Jt(Y,pt){return os(Y.getFullYear()%100,pt,2)}function ve(Y,pt){return Y=Q(Y),os(Y.getFullYear()%100,pt,2)}function Re(Y,pt){return os(Y.getFullYear()%1e4,pt,4)}function Ge(Y,pt){var ft=Y.getDay();return Y=ft>=4||ft===0?Ko(Y):Ko.ceil(Y),os(Y.getFullYear()%1e4,pt,4)}function He(Y){var pt=Y.getTimezoneOffset();return(pt>0?"-":(pt*=-1,"+"))+os(pt/60|0,"0",2)+os(pt%60,"0",2)}function ln(Y,pt){return os(Y.getUTCDate(),pt,2)}function Ln(Y,pt){return os(Y.getUTCHours(),pt,2)}function Cn(Y,pt){return os(Y.getUTCHours()%12||12,pt,2)}function Kn(Y,pt){return os(1+ai.count(fo(Y),Y),pt,3)}function Yn(Y,pt){return os(Y.getUTCMilliseconds(),pt,3)}function _r(Y,pt){return Yn(Y,pt)+"000"}function Nr(Y,pt){return os(Y.getUTCMonth()+1,pt,2)}function Yr(Y,pt){return os(Y.getUTCMinutes(),pt,2)}function vi(Y,pt){return os(Y.getUTCSeconds(),pt,2)}function si(Y){var pt=Y.getUTCDay();return pt===0?7:pt}function Ni(Y,pt){return os(Sn.count(fo(Y)-1,Y),pt,2)}function Fi(Y){var pt=Y.getUTCDay();return pt>=4||pt===0?wr(Y):wr.ceil(Y)}function ia(Y,pt){return Y=Fi(Y),os(wr.count(fo(Y),Y)+(fo(Y).getUTCDay()===4),pt,2)}function pa(Y){return Y.getUTCDay()}function va(Y,pt){return os(rn.count(fo(Y)-1,Y),pt,2)}function qi(Y,pt){return os(Y.getUTCFullYear()%100,pt,2)}function eo(Y,pt){return Y=Fi(Y),os(Y.getUTCFullYear()%100,pt,2)}function wa(Y,pt){return os(Y.getUTCFullYear()%1e4,pt,4)}function ya(Y,pt){var ft=Y.getUTCDay();return Y=ft>=4||ft===0?wr(Y):wr.ceil(Y),os(Y.getUTCFullYear()%1e4,pt,4)}function es(){return"+0000"}function yo(){return"%"}function Us(Y){return+Y}function Va(Y){return Math.floor(+Y/1e3)}var ko,Iu,Lu,el,hl;Rl({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Rl(Y){return ko=Ll(Y),Iu=ko.format,Lu=ko.parse,el=ko.utcFormat,hl=ko.utcParse,ko}var Kl=1e3,dl=Kl*60,hc=dl*60,zl=hc*24,Dc=zl*7,ec=zl*30,Ul=zl*365;function dc(Y){return new Date(Y)}function As(Y){return Y instanceof Date?+Y:+new Date(+Y)}function ns(Y,pt,ft,lt,ht,Ot,kt,fe,Ie){var Qe=Uc(lo,lo),In=Qe.invert,sr=Qe.domain,Vr=Ie(".%L"),ii=Ie(":%S"),zi=Ie("%I:%M"),Zi=Ie("%I %p"),oa=Ie("%a %d"),no=Ie("%b %d"),Go=Ie("%B"),ks=Ie("%Y"),fs=[[kt,1,Kl],[kt,5,5*Kl],[kt,15,15*Kl],[kt,30,30*Kl],[Ot,1,dl],[Ot,5,5*dl],[Ot,15,15*dl],[Ot,30,30*dl],[ht,1,hc],[ht,3,3*hc],[ht,6,6*hc],[ht,12,12*hc],[lt,1,zl],[lt,2,2*zl],[ft,1,Dc],[pt,1,ec],[pt,3,3*ec],[Y,1,Ul]];function Yo(Po){return(kt(Po)<Po?Vr:Ot(Po)<Po?ii:ht(Po)<Po?zi:lt(Po)<Po?Zi:pt(Po)<Po?ft(Po)<Po?oa:no:Y(Po)<Po?Go:ks)(Po)}function Pu(Po,Vu,vl,rc){if(Po==null&&(Po=10),typeof Po=="number"){var Xo=Math.abs(vl-Vu)/Po,vc=ke(function(kl){return kl[2]}).right(fs,Xo);vc===fs.length?(rc=Ts(Vu/Ul,vl/Ul,Po),Po=Y):vc?(vc=fs[Xo/fs[vc-1][2]<fs[vc][2]/Xo?vc-1:vc],rc=vc[1],Po=vc[0]):(rc=Math.max(Ts(Vu,vl,Po),1),Po=fe)}return rc==null?Po:Po.every(rc)}return Qe.invert=function(Po){return new Date(In(Po))},Qe.domain=function(Po){return arguments.length?sr(vf.call(Po,As)):sr().map(dc)},Qe.ticks=function(Po,Vu){var vl=sr(),rc=vl[0],Xo=vl[vl.length-1],vc=Xo<rc,kl;return vc&&(kl=rc,rc=Xo,Xo=kl),kl=Pu(Po,rc,Xo,Vu),kl=kl?kl.range(rc,Xo+1):[],vc?kl.reverse():kl},Qe.tickFormat=function(Po,Vu){return Vu==null?Yo:Ie(Vu)},Qe.nice=function(Po,Vu){var vl=sr();return(Po=Pu(Po,vl[0],vl[vl.length-1],Vu))?sr(Lt(vl,Po)):Qe},Qe.copy=function(){return Mc(Qe,ns(Y,pt,ft,lt,ht,Ot,kt,fe,Ie))},Qe}var du=function(){return cu.apply(ns(Oi,Ii,$i,fl,zs,as,sf,Ur,Iu).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},Mu=kr(function(Y){Y.setUTCDate(1),Y.setUTCHours(0,0,0,0)},function(Y,pt){Y.setUTCMonth(Y.getUTCMonth()+pt)},function(Y,pt){return pt.getUTCMonth()-Y.getUTCMonth()+(pt.getUTCFullYear()-Y.getUTCFullYear())*12},function(Y){return Y.getUTCMonth()}),jc=Mu,nl=Mu.range,rl=kr(function(Y){Y.setUTCMinutes(0,0,0)},function(Y,pt){Y.setTime(+Y+pt*Si)},function(Y,pt){return(pt-Y)/Si},function(Y){return Y.getUTCHours()}),wc=rl,Cs=rl.range,Pf=kr(function(Y){Y.setUTCSeconds(0,0)},function(Y,pt){Y.setTime(+Y+pt*ji)},function(Y,pt){return(pt-Y)/ji},function(Y){return Y.getUTCMinutes()}),uf=Pf,Tf=Pf.range,lf=function(){return cu.apply(ns(fo,jc,Sn,ai,wc,uf,sf,Ur,el).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function nc(){var Y=0,pt=1,ft,lt,ht,Ot,kt=lo,fe=!1,Ie;function Qe(In){return isNaN(In=+In)?Ie:kt(ht===0?.5:(In=(Ot(In)-ft)*ht,fe?Math.max(0,Math.min(1,In)):In))}return Qe.domain=function(In){return arguments.length?(ft=Ot(Y=+In[0]),lt=Ot(pt=+In[1]),ht=ft===lt?0:1/(lt-ft),Qe):[Y,pt]},Qe.clamp=function(In){return arguments.length?(fe=!!In,Qe):fe},Qe.interpolator=function(In){return arguments.length?(kt=In,Qe):kt},Qe.unknown=function(In){return arguments.length?(Ie=In,Qe):Ie},function(In){return Ot=In,ft=In(Y),lt=In(pt),ht=ft===lt?0:1/(lt-ft),Qe}}function Wc(Y,pt){return pt.domain(Y.domain()).interpolator(Y.interpolator()).clamp(Y.clamp()).unknown(Y.unknown())}function Df(){var Y=bt(nc()(lo));return Y.copy=function(){return Wc(Y,Df())},Hl.apply(Y,arguments)}function jf(){var Y=Ke(nc()).domain([1,10]);return Y.copy=function(){return Wc(Y,jf()).base(Y.base())},Hl.apply(Y,arguments)}function Dh(){var Y=Qn(nc());return Y.copy=function(){return Wc(Y,Dh()).constant(Y.constant())},Hl.apply(Y,arguments)}function mf(){var Y=yi(nc());return Y.copy=function(){return Wc(Y,mf()).exponent(Y.exponent())},Hl.apply(Y,arguments)}function Xh(){return mf.apply(null,arguments).exponent(.5)}function jh(){var Y=[],pt=lo;function ft(lt){if(!isNaN(lt=+lt))return pt((fr(Y,lt)-1)/(Y.length-1))}return ft.domain=function(lt){if(!arguments.length)return Y.slice();Y=[];for(var ht=0,Ot=lt.length,kt;ht<Ot;++ht)kt=lt[ht],kt!=null&&!isNaN(kt=+kt)&&Y.push(kt);return Y.sort(Oe),ft},ft.interpolator=function(lt){return arguments.length?(pt=lt,ft):pt},ft.copy=function(){return jh(pt).domain(Y)},Hl.apply(ft,arguments)}function Bf(){var Y=0,pt=.5,ft=1,lt,ht,Ot,kt,fe,Ie=lo,Qe,In=!1,sr;function Vr(ii){return isNaN(ii=+ii)?sr:(ii=.5+((ii=+Qe(ii))-ht)*(ii<ht?kt:fe),Ie(In?Math.max(0,Math.min(1,ii)):ii))}return Vr.domain=function(ii){return arguments.length?(lt=Qe(Y=+ii[0]),ht=Qe(pt=+ii[1]),Ot=Qe(ft=+ii[2]),kt=lt===ht?0:.5/(ht-lt),fe=ht===Ot?0:.5/(Ot-ht),Vr):[Y,pt,ft]},Vr.clamp=function(ii){return arguments.length?(In=!!ii,Vr):In},Vr.interpolator=function(ii){return arguments.length?(Ie=ii,Vr):Ie},Vr.unknown=function(ii){return arguments.length?(sr=ii,Vr):sr},function(ii){return Qe=ii,lt=ii(Y),ht=ii(pt),Ot=ii(ft),kt=lt===ht?0:.5/(ht-lt),fe=ht===Ot?0:.5/(Ot-ht),Vr}}function Jh(){var Y=bt(Bf()(lo));return Y.copy=function(){return Wc(Y,Jh())},Hl.apply(Y,arguments)}function Bh(){var Y=Ke(Bf()).domain([.1,1,10]);return Y.copy=function(){return Wc(Y,Bh()).base(Y.base())},Hl.apply(Y,arguments)}function $h(){var Y=Qn(Bf());return Y.copy=function(){return Wc(Y,$h()).constant(Y.constant())},Hl.apply(Y,arguments)}function Nf(){var Y=yi(Bf());return Y.copy=function(){return Wc(Y,Nf()).exponent(Y.exponent())},Hl.apply(Y,arguments)}function Nh(){return Nf.apply(null,arguments).exponent(.5)}var tf,oh,Ff,bh,Fh,sh,uh,zh,Qh=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,Eh=(tf={},l()(tf,V.ScaleTypes.LINEAR,X),l()(tf,V.ScaleTypes.POWER,Ti),l()(tf,V.ScaleTypes.LOG,zn),l()(tf,V.ScaleTypes.IDENTITY,Et),l()(tf,V.ScaleTypes.TIME,du),l()(tf,V.ScaleTypes.QUANTILE,gi),l()(tf,V.ScaleTypes.QUANTIZE,Cr),l()(tf,V.ScaleTypes.THRESHOLD,Ir),l()(tf,V.ScaleTypes.CAT,cf),tf),qh=(oh=Object(K.injectable)(),Ff=Object(K.inject)(V.TYPES.IGlobalConfigService),bh=Object(K.inject)(V.TYPES.ILogService),oh(Fh=(sh=function(){function Y(){T()(this,Y),v()(this,"configService",uh,this),v()(this,"logger",zh,this),this.scaleCache={},this.scaleOptions={}}return t()(Y,[{key:"apply",value:function(ft,lt){var ht=this,Ot=lt.styleAttributeService;ft.hooks.init.tap("FeatureScalePlugin",function(){ht.scaleOptions=ft.getScaleOptions();var kt=Ot.getLayerStyleAttributes(),fe=ft.getSource().data.dataArray;fe.length!==0&&ht.caculateScalesForAttributes(kt||[],fe)}),ft.hooks.beforeRenderData.tap("FeatureScalePlugin",function(){ht.scaleOptions=ft.getScaleOptions();var kt=Ot.getLayerStyleAttributes(),fe=ft.getSource().data.dataArray;return ht.caculateScalesForAttributes(kt||[],fe),ft.layerModelNeedUpdate=!0,!0}),ft.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!ft.layerModelNeedUpdate){ht.scaleOptions=ft.getScaleOptions();var kt=Ot.getLayerStyleAttributes();if(kt){var fe=ft.getSource().data.dataArray;if(fe.length===0)return;var Ie=kt.filter(function(Qe){return Qe.needRescale});Ie.length&&(ht.caculateScalesForAttributes(Ie,fe),ht.logger.debug("rescale finished"))}}})}},{key:"isNumber",value:function(ft){return!isNaN(parseFloat(ft))&&isFinite(ft)}},{key:"caculateScalesForAttributes",value:function(ft,lt){var ht=this;this.scaleCache={},ft.forEach(function(Ot){if(Ot.scale){var kt=Ot.scale,fe=Ot.name;kt.names=ht.parseFields(Ot.scale.field||[]);var Ie=[];kt.names.forEach(function(Qe){Ie.push(ht.getOrCreateScale(Qe,Ot,lt))}),Ie.some(function(Qe){return Qe.type===V.StyleScaleType.VARIABLE})?(kt.type=V.StyleScaleType.VARIABLE,Ie.forEach(function(Qe){if(!kt.callback){var In;if(kt.values&&kt.values!=="text"){var sr;if(((sr=Qe.option)===null||sr===void 0?void 0:sr.type)==="linear"&&kt.values.length>2){var Vr=Qe.scale.ticks(kt.values.length);fe==="color"&&Qe.scale.domain(Vr)}Qe.scale.range(kt.values)}else((In=Qe.option)===null||In===void 0?void 0:In.type)==="cat"&&Qe.scale.range(Qe.option.domain)}})):(kt.type=V.StyleScaleType.CONSTANT,kt.defaultValues=Ie.map(function(Qe,In){return Qe.scale(kt.names[In])})),kt.scalers=Ie.map(function(Qe){return{field:Qe.field,func:Qe.scale,option:Qe.option}}),Ot.needRescale=!1}})}},{key:"getOrCreateScale",value:function(ft,lt,ht){var Ot,kt=[ft,lt.name].join("_"),fe=(Ot=lt.scale)===null||Ot===void 0?void 0:Ot.values,Ie=this.createScale(ft,lt.name,fe,ht);return Ie}},{key:"parseFields",value:function(ft){return Array.isArray(ft)?ft:nn()(ft)?ft.split("*"):[ft]}},{key:"createScale",value:function(ft,lt,ht,Ot){var kt,fe=this.scaleOptions[lt]&&this.scaleOptions[lt].field===ft?this.scaleOptions[lt]:this.scaleOptions[ft],Ie={field:ft,scale:void 0,type:V.StyleScaleType.VARIABLE,option:fe};if(!Ot||!Ot.length)return fe&&fe.type?Ie.scale=this.createDefaultScale(fe):(Ie.scale=cf([ft]),Ie.type=V.StyleScaleType.CONSTANT),Ie;var Qe=(kt=Ot.find(function(Vr){return!pn()(Vr[ft])}))===null||kt===void 0?void 0:kt[ft];if(this.isNumber(ft)||pn()(Qe)&&!fe)Ie.scale=cf([ft]),Ie.type=V.StyleScaleType.CONSTANT;else{var In=fe&&fe.type||this.getDefaultType(Qe);ht==="text"&&(In=V.ScaleTypes.CAT);var sr=this.createDefaultScaleConfig(In,ft,Ot);Object.assign(sr,fe),Ie.scale=this.createDefaultScale(sr),Ie.option=sr}return Ie}},{key:"getDefaultType",value:function(ft){var lt=V.ScaleTypes.LINEAR;return typeof ft=="string"&&(lt=Qh.test(ft)?V.ScaleTypes.TIME:V.ScaleTypes.CAT),lt}},{key:"createDefaultScaleConfig",value:function(ft,lt,ht){var Ot={type:ft},kt=(ht==null?void 0:ht.map(function(fe){return fe[lt]}))||[];return ft!==V.ScaleTypes.CAT&&ft!==V.ScaleTypes.QUANTILE?Ot.domain=Ma(kt):ft===V.ScaleTypes.CAT?Ot.domain=Fe()(kt):ft===V.ScaleTypes.QUANTILE&&(Ot.domain=kt),Ot}},{key:"createDefaultScale",value:function(ft){var lt=ft.type,ht=ft.domain,Ot=Eh[lt]();return ht&&Ot.domain(ht),Ot}}]),Y}(),uh=_()(sh.prototype,"configService",[Ff],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zh=_()(sh.prototype,"logger",[bh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sh))||Fh),Sh,_h,Mh,lh,Xf,ch,fh;function Ph(Y,pt){var ft=Object.keys(Y);if(Object.getOwnPropertySymbols){var lt=Object.getOwnPropertySymbols(Y);pt&&(lt=lt.filter(function(ht){return Object.getOwnPropertyDescriptor(Y,ht).enumerable})),ft.push.apply(ft,lt)}return ft}function vd(Y){for(var pt=1;pt<arguments.length;pt++){var ft=arguments[pt]!=null?arguments[pt]:{};pt%2?Ph(Object(ft),!0).forEach(function(lt){l()(Y,lt,ft[lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(ft)):Ph(Object(ft)).forEach(function(lt){Object.defineProperty(Y,lt,Object.getOwnPropertyDescriptor(ft,lt))})}return Y}var pd=(Sh=Object(K.injectable)(),_h=Object(K.inject)(V.TYPES.ICameraService),Mh=Object(K.inject)(V.TYPES.IRendererService),Sh(lh=(Xf=function(){function Y(){T()(this,Y),v()(this,"cameraService",ch,this),v()(this,"rendererService",fh,this)}return t()(Y,[{key:"apply",value:function(ft){ft.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){ft.models.forEach(function(lt){lt.addUniforms(vd({},ft.layerModel.getAnimateUniforms()))})})}}]),Y}(),ch=_()(Xf.prototype,"cameraService",[_h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fh=_()(Xf.prototype,"rendererService",[Mh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xf))||lh),gd,td,Ld=(gd=Object(K.injectable)(),gd(td=function(){function Y(){T()(this,Y)}return t()(Y,[{key:"apply",value:function(ft){ft.hooks.init.tap("LayerModelPlugin",function(){ft.prepareBuildModel(),ft.buildModels(),ft.styleNeedUpdate=!1}),ft.hooks.beforeRenderData.tap("DataSourcePlugin",function(){return ft.prepareBuildModel(),ft.clearModels(),ft.buildModels(),ft.layerModelNeedUpdate=!1,!1})}}]),Y}())||td),ed,kd,Gd=(ed=Object(K.injectable)(),ed(kd=function(){function Y(){T()(this,Y)}return t()(Y,[{key:"apply",value:function(ft){ft.hooks.afterInit.tap("LayerStylePlugin",function(){ft.updateLayerConfig({});var lt=ft.getLayerConfig(),ht=lt.autoFit,Ot=lt.fitBoundsOptions;ht&&setTimeout(function(){ft.fitBounds(Ot)},100)})}}]),Y}())||kd),Th,Dl;function hf(Y,pt){var ft=Object.keys(Y);if(Object.getOwnPropertySymbols){var lt=Object.getOwnPropertySymbols(Y);pt&&(lt=lt.filter(function(ht){return Object.getOwnPropertyDescriptor(Y,ht).enumerable})),ft.push.apply(ft,lt)}return ft}function Uh(Y){for(var pt=1;pt<arguments.length;pt++){var ft=arguments[pt]!=null?arguments[pt]:{};pt%2?hf(Object(ft),!0).forEach(function(lt){l()(Y,lt,ft[lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(ft)):hf(Object(ft)).forEach(function(lt){Object.defineProperty(Y,lt,Object.getOwnPropertyDescriptor(ft,lt))})}return Y}var zf={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},md={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},Rd={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},nd={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5},Uf=["ambient","diffuse","specular"];function rd(Y){var pt={u_DirectionalLights:new Array(3).fill(Uh({},Rd)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(Uh({},nd)),u_NumOfSpotLights:0};return(!Y||!Y.length)&&(Y=[md]),Y.forEach(function(ft,lt){var ht=ft.type,Ot=ht===void 0?"directional":ht,kt=a()(ft,["type"]),fe=zf[Ot].lights,Ie=zf[Ot].num,Qe=pt[Ie];pt[fe][Qe]=Uh(Uh({},pt[fe][Qe]),kt),pt[Ie]++}),pt}var kh=(Th=Object(K.injectable)(),Th(Dl=function(){function Y(){T()(this,Y)}return t()(Y,[{key:"apply",value:function(ft){ft.hooks.beforeRender.tap("LightingPlugin",function(){var lt=ft.getLayerConfig(),ht=lt.enableLighting;ht&&ft.models.forEach(function(Ot){return Ot.addUniforms(Uh({},rd()))})})}}]),Y}())||Dl),Gh,Vh,Ah={NONE:0,ENCODE:1,HIGHLIGHT:2},Dd=(Gh=Object(K.injectable)(),Gh(Vh=function(){function Y(){T()(this,Y)}return t()(Y,[{key:"apply",value:function(ft,lt){var ht=lt.rendererService,Ot=lt.styleAttributeService;ft.hooks.init.tap("PixelPickingPlugin",function(){var kt=ft.getLayerConfig(),fe=kt.enablePicking;Ot.registerStyleAttribute({name:"pickingColor",type:V.AttributeType.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:V.gl.FLOAT},size:3,update:function(Qe,In){var sr=Qe.id;return fe?Object(O.l)(sr):[0,0,0]}}})}),ft.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var kt=ft.getLayerConfig(),fe=kt.enablePicking;fe&&ft.isVisible()&&ft.models.forEach(function(Ie){return Ie.addUniforms({u_PickingStage:Ah.ENCODE})})}),ft.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var kt=ft.getLayerConfig(),fe=kt.enablePicking;fe&&ft.isVisible()&&ft.models.forEach(function(Ie){return Ie.addUniforms({u_PickingStage:Ah.HIGHLIGHT})})}),ft.hooks.beforeHighlight.tap("PixelPickingPlugin",function(kt){var fe=ft.getLayerConfig(),Ie=fe.highlightColor,Qe=typeof Ie=="string"?Object(O.s)(Ie):Ie||[1,0,0,1];ft.updateLayerConfig({pickedFeatureID:Object(O.k)(new Uint8Array(kt))}),ft.models.forEach(function(In){return In.addUniforms({u_PickingStage:Ah.HIGHLIGHT,u_PickingColor:kt,u_HighlightColor:Qe.map(function(sr){return sr*255})})})}),ft.hooks.beforeSelect.tap("PixelPickingPlugin",function(kt){var fe=ft.getLayerConfig(),Ie=fe.selectColor,Qe=typeof Ie=="string"?Object(O.s)(Ie):Ie||[1,0,0,1];ft.updateLayerConfig({pickedFeatureID:Object(O.k)(new Uint8Array(kt))}),ft.models.forEach(function(In){return In.addUniforms({u_PickingStage:Ah.HIGHLIGHT,u_PickingColor:kt,u_HighlightColor:Qe.map(function(sr){return sr*255})})})})}}]),Y}())||Vh),Ch,yd,xd,id,bd,jd=(Ch=Object(K.injectable)(),yd=Object(K.inject)(V.TYPES.ILogService),Ch(xd=(id=function(){function Y(){T()(this,Y),v()(this,"logger",bd,this)}return t()(Y,[{key:"apply",value:function(ft,lt){var ht=this,Ot=lt.styleAttributeService;ft.hooks.init.tap("RegisterStyleAttributePlugin",function(){ht.registerBuiltinAttributes(Ot)})}},{key:"registerBuiltinAttributes",value:function(ft){ft.registerStyleAttribute({name:"position",type:V.AttributeType.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:V.gl.FLOAT},size:3,update:function(ht,Ot,kt){return kt.length===2?[kt[0],kt[1],0]:[kt[0],kt[1],kt[2]]}}}),ft.registerStyleAttribute({name:"filter",type:V.AttributeType.Attribute,descriptor:{name:"filter",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(ht,Ot){var kt=ht.filter;return kt?[1]:[0]}}}),ft.registerStyleAttribute({name:"color",type:V.AttributeType.Attribute,descriptor:{name:"a_Color",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:4,update:function(ht,Ot){var kt=ht.color;return!kt||!kt.length?[1,1,1,1]:kt}}})}}]),Y}(),bd=_()(id.prototype,"logger",[yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),id))||xd),Qc,Wh,Ed,yf,Bd,Oh,Jf,hh,dh,wh=(Qc=Object(K.injectable)(),Wh=Object(K.inject)(V.TYPES.ICameraService),Ed=Object(K.inject)(V.TYPES.ICoordinateSystemService),yf=Object(K.inject)(V.TYPES.IRendererService),Qc(Bd=(Oh=function(){function Y(){T()(this,Y),v()(this,"cameraService",Jf,this),v()(this,"coordinateSystemService",hh,this),v()(this,"rendererService",dh,this)}return t()(Y,[{key:"apply",value:function(ft){var lt=this;ft.hooks.beforeRender.tap("ShaderUniformPlugin",function(){lt.coordinateSystemService.refresh();var ht=lt.rendererService.getViewportSize(),Ot=ht.width,kt=ht.height;ft.models.forEach(function(fe){var Ie;return fe.addUniforms((Ie={},l()(Ie,V.CameraUniform.ProjectionMatrix,lt.cameraService.getProjectionMatrix()),l()(Ie,V.CameraUniform.ViewMatrix,lt.cameraService.getViewMatrix()),l()(Ie,V.CameraUniform.ViewProjectionMatrix,lt.cameraService.getViewProjectionMatrix()),l()(Ie,V.CameraUniform.Zoom,lt.cameraService.getZoom()),l()(Ie,V.CameraUniform.ZoomScale,lt.cameraService.getZoomScale()),l()(Ie,V.CameraUniform.FocalDistance,lt.cameraService.getFocalDistance()),l()(Ie,V.CameraUniform.CameraPosition,lt.cameraService.getCameraPosition()),l()(Ie,V.CoordinateUniform.CoordinateSystem,lt.coordinateSystemService.getCoordinateSystem()),l()(Ie,V.CoordinateUniform.ViewportCenter,lt.coordinateSystemService.getViewportCenter()),l()(Ie,V.CoordinateUniform.ViewportCenterProjection,lt.coordinateSystemService.getViewportCenterProjection()),l()(Ie,V.CoordinateUniform.PixelsPerDegree,lt.coordinateSystemService.getPixelsPerDegree()),l()(Ie,V.CoordinateUniform.PixelsPerDegree2,lt.coordinateSystemService.getPixelsPerDegree2()),l()(Ie,V.CoordinateUniform.PixelsPerMeter,lt.coordinateSystemService.getPixelsPerMeter()),l()(Ie,"u_ViewportSize",[Ot,kt]),l()(Ie,"u_DevicePixelRatio",window.devicePixelRatio),l()(Ie,"u_ModelMatrix",[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),l()(Ie,"u_PickingBuffer",ft.getLayerConfig().pickingBuffer||0),Ie))})})}}]),Y}(),Jf=_()(Oh.prototype,"cameraService",[Wh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hh=_()(Oh.prototype,"coordinateSystemService",[Ed],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dh=_()(Oh.prototype,"rendererService",[yf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oh))||Bd),vh,Sd,Nd=(vh=Object(K.injectable)(),vh(Sd=function(){function Y(){T()(this,Y)}return t()(Y,[{key:"apply",value:function(ft){ft.hooks.beforeRender.tap("UpdateModelPlugin",function(){ft.layerModel&&ft.layerModel.needUpdate()})}}]),Y}())||Sd),_d,Md,ad,Hh,Af,Fd=(_d=Object(K.injectable)(),Md=Object(K.inject)(V.TYPES.ILogService),_d(ad=(Hh=function(){function Y(){T()(this,Y),v()(this,"logger",Af,this)}return t()(Y,[{key:"apply",value:function(ft,lt){var ht=this,Ot=lt.styleAttributeService;ft.hooks.init.tap("UpdateStyleAttributePlugin",function(){ht.initStyleAttribute(ft,{styleAttributeService:Ot})}),ft.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){ft.layerModelNeedUpdate||ht.updateStyleAtrribute(ft,{styleAttributeService:Ot})})}},{key:"updateStyleAtrribute",value:function(ft,lt){var ht=this,Ot=lt.styleAttributeService,kt=Ot.getLayerStyleAttributes()||[],fe=Ot.getLayerStyleAttribute("filter"),Ie=Ot.getLayerStyleAttribute("shape");if(fe&&fe.needRegenerateVertices||Ie&&Ie.needRegenerateVertices){ft.layerModelNeedUpdate=!0,kt.forEach(function(Qe){return Qe.needRegenerateVertices=!1});return}kt.filter(function(Qe){return Qe.needRegenerateVertices}).forEach(function(Qe){Ot.updateAttributeByFeatureRange(Qe.name,ft.getEncodedData(),Qe.featureRange.startIndex,Qe.featureRange.endIndex),Qe.needRegenerateVertices=!1,ht.logger.debug("regenerate vertex attributes: ".concat(Qe.name," finished"))})}},{key:"initStyleAttribute",value:function(ft,lt){var ht=this,Ot=lt.styleAttributeService,kt=Ot.getLayerStyleAttributes()||[];kt.filter(function(fe){return fe.needRegenerateVertices}).forEach(function(fe){Ot.updateAttributeByFeatureRange(fe.name,ft.getEncodedData(),fe.featureRange.startIndex,fe.featureRange.endIndex),fe.needRegenerateVertices=!1,ht.logger.debug("init vertex attributes: ".concat(fe.name," finished"))})}}]),Y}(),Af=_()(Hh.prototype,"logger",[Md],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hh))||ad);V.container.bind(V.TYPES.ILayerPlugin).to(ne).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(jd).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(qh).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(Se).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(Gd).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(Fd).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(Nd).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(mt).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(wh).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(pd).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(kh).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(Dd).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(Ld).inRequestScope()},t2Dn:function(_e,dt,R){var V=R("hypo"),E=R("ljhN");function T(e,t,u){(u!==void 0&&!E(e[t],u)||u===void 0&&!(t in e))&&V(e,t,u)}_e.exports=T},u6S6:function(_e,dt,R){var V=R("6acW"),E=R("sgoq"),T=E(function(e,t,u){return t=t.toLowerCase(),e+(u?V(t):t)});_e.exports=T},uhBA:function(_e,dt,R){"use strict";var V=Object.prototype.hasOwnProperty,E="~";function T(){}Object.create&&(T.prototype=Object.create(null),new T().__proto__||(E=!1));function e(c,r,h){this.fn=c,this.context=r,this.once=h||!1}function t(c,r,h,n,i){if(typeof h!="function")throw new TypeError("The listener must be a function");var a=new e(h,n||c,i),o=E?E+r:r;return c._events[o]?c._events[o].fn?c._events[o]=[c._events[o],a]:c._events[o].push(a):(c._events[o]=a,c._eventsCount++),c}function u(c,r){--c._eventsCount==0?c._events=new T:delete c._events[r]}function s(){this._events=new T,this._eventsCount=0}s.prototype.eventNames=function(){var r=[],h,n;if(this._eventsCount===0)return r;for(n in h=this._events)V.call(h,n)&&r.push(E?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(h)):r},s.prototype.listeners=function(r){var h=E?E+r:r,n=this._events[h];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=new Array(a);i<a;i++)o[i]=n[i].fn;return o},s.prototype.listenerCount=function(r){var h=E?E+r:r,n=this._events[h];return n?n.fn?1:n.length:0},s.prototype.emit=function(r,h,n,i,a,o){var l=E?E+r:r;if(!this._events[l])return!1;var f=this._events[l],v=arguments.length,b,g;if(f.fn){switch(f.once&&this.removeListener(r,f.fn,void 0,!0),v){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,h),!0;case 3:return f.fn.call(f.context,h,n),!0;case 4:return f.fn.call(f.context,h,n,i),!0;case 5:return f.fn.call(f.context,h,n,i,a),!0;case 6:return f.fn.call(f.context,h,n,i,a,o),!0}for(g=1,b=new Array(v-1);g<v;g++)b[g-1]=arguments[g];f.fn.apply(f.context,b)}else{var m=f.length,_;for(g=0;g<m;g++)switch(f[g].once&&this.removeListener(r,f[g].fn,void 0,!0),v){case 1:f[g].fn.call(f[g].context);break;case 2:f[g].fn.call(f[g].context,h);break;case 3:f[g].fn.call(f[g].context,h,n);break;case 4:f[g].fn.call(f[g].context,h,n,i);break;default:if(!b)for(_=1,b=new Array(v-1);_<v;_++)b[_-1]=arguments[_];f[g].fn.apply(f[g].context,b)}}return!0},s.prototype.on=function(r,h,n){return t(this,r,h,n,!1)},s.prototype.once=function(r,h,n){return t(this,r,h,n,!0)},s.prototype.removeListener=function(r,h,n,i){var a=E?E+r:r;if(!this._events[a])return this;if(!h)return u(this,a),this;var o=this._events[a];if(o.fn)o.fn===h&&(!i||o.once)&&(!n||o.context===n)&&u(this,a);else{for(var l=0,f=[],v=o.length;l<v;l++)(o[l].fn!==h||i&&!o[l].once||n&&o[l].context!==n)&&f.push(o[l]);f.length?this._events[a]=f.length===1?f[0]:f:u(this,a)}return this},s.prototype.removeAllListeners=function(r){var h;return r?(h=E?E+r:r,this._events[h]&&u(this,h)):(this._events=new T,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=E,s.EventEmitter=s,_e.exports=s},ujMp:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.circularDependencyToException=dt.listMetadataForTarget=dt.listRegisteredBindingsForServiceIdentifier=dt.getServiceIdentifierAsString=dt.getFunctionName=void 0;var V=R("MON2");function E(r){if(typeof r=="function"){var h=r;return h.name}else{if(typeof r=="symbol")return r.toString();var h=r;return h}}dt.getServiceIdentifierAsString=E;function T(r,h,n){var i="",a=n(r,h);return a.length!==0&&(i=`
Registered bindings:`,a.forEach(function(o){var l="Object";o.implementationType!==null&&(l=c(o.implementationType)),i=i+`
 `+l,o.constraint.metaData&&(i=i+" - "+o.constraint.metaData)})),i}dt.listRegisteredBindingsForServiceIdentifier=T;function e(r,h){return r.parentRequest===null?!1:r.parentRequest.serviceIdentifier===h?!0:e(r.parentRequest,h)}function t(r){function h(i,a){a===void 0&&(a=[]);var o=E(i.serviceIdentifier);return a.push(o),i.parentRequest!==null?h(i.parentRequest,a):a}var n=h(r);return n.reverse().join(" --> ")}function u(r){r.childRequests.forEach(function(h){if(e(h,h.serviceIdentifier)){var n=t(h);throw new Error(V.CIRCULAR_DEPENDENCY+" "+n)}else u(h)})}dt.circularDependencyToException=u;function s(r,h){if(h.isTagged()||h.isNamed()){var n="",i=h.getNamedTag(),a=h.getCustomTags();return i!==null&&(n+=i.toString()+`
`),a!==null&&a.forEach(function(o){n+=o.toString()+`
`})," "+r+`
 `+r+" - "+n}else return" "+r}dt.listMetadataForTarget=s;function c(r){if(r.name)return r.name;var h=r.toString(),n=h.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+h}dt.getFunctionName=c},"vN+2":function(_e,dt){function R(){}_e.exports=R},"w/wX":function(_e,dt,R){var V=R("QqLw"),E=R("ExA7"),T="[object Set]";function e(t){return E(t)&&V(t)==T}_e.exports=e},w26f:function(_e,dt,R){(function(V){var E=200,T="__lodash_hash_undefined__",e=1/0,t="[object Function]",u="[object GeneratorFunction]",s=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,r=typeof V=="object"&&V&&V.Object===Object&&V,h=typeof self=="object"&&self&&self.Object===Object&&self,n=r||h||Function("return this")();function i(Ce,We){var Ye=Ce?Ce.length:0;return!!Ye&&l(Ce,We,0)>-1}function a(Ce,We,Ye){for(var wn=-1,er=Ce?Ce.length:0;++wn<er;)if(Ye(We,Ce[wn]))return!0;return!1}function o(Ce,We,Ye,wn){for(var er=Ce.length,Lr=Ye+(wn?1:-1);wn?Lr--:++Lr<er;)if(We(Ce[Lr],Lr,Ce))return Lr;return-1}function l(Ce,We,Ye){if(We!==We)return o(Ce,f,Ye);for(var wn=Ye-1,er=Ce.length;++wn<er;)if(Ce[wn]===We)return wn;return-1}function f(Ce){return Ce!==Ce}function v(Ce,We){return Ce.has(We)}function b(Ce,We){return Ce==null?void 0:Ce[We]}function g(Ce){var We=!1;if(Ce!=null&&typeof Ce.toString!="function")try{We=!!(Ce+"")}catch(Ye){}return We}function m(Ce){var We=-1,Ye=Array(Ce.size);return Ce.forEach(function(wn){Ye[++We]=wn}),Ye}var _=Array.prototype,M=Function.prototype,x=Object.prototype,y=n["__core-js_shared__"],S=function(){var Ce=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||"");return Ce?"Symbol(src)_1."+Ce:""}(),P=M.toString,A=x.hasOwnProperty,O=x.toString,L=RegExp("^"+P.call(A).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=_.splice,F=yt(n,"Map"),K=yt(n,"Set"),G=yt(Object,"create");function U(Ce){var We=-1,Ye=Ce?Ce.length:0;for(this.clear();++We<Ye;){var wn=Ce[We];this.set(wn[0],wn[1])}}function Z(){this.__data__=G?G(null):{}}function J(Ce){return this.has(Ce)&&delete this.__data__[Ce]}function rt(Ce){var We=this.__data__;if(G){var Ye=We[Ce];return Ye===T?void 0:Ye}return A.call(We,Ce)?We[Ce]:void 0}function vt(Ce){var We=this.__data__;return G?We[Ce]!==void 0:A.call(We,Ce)}function mt(Ce,We){var Ye=this.__data__;return Ye[Ce]=G&&We===void 0?T:We,this}U.prototype.clear=Z,U.prototype.delete=J,U.prototype.get=rt,U.prototype.has=vt,U.prototype.set=mt;function ut(Ce){var We=-1,Ye=Ce?Ce.length:0;for(this.clear();++We<Ye;){var wn=Ce[We];this.set(wn[0],wn[1])}}function Rt(){this.__data__=[]}function Ft(Ce){var We=this.__data__,Ye=k(We,Ce);if(Ye<0)return!1;var wn=We.length-1;return Ye==wn?We.pop():H.call(We,Ye,1),!0}function wt(Ce){var We=this.__data__,Ye=k(We,Ce);return Ye<0?void 0:We[Ye][1]}function Mt(Ce){return k(this.__data__,Ce)>-1}function St(Ce,We){var Ye=this.__data__,wn=k(Ye,Ce);return wn<0?Ye.push([Ce,We]):Ye[wn][1]=We,this}ut.prototype.clear=Rt,ut.prototype.delete=Ft,ut.prototype.get=wt,ut.prototype.has=Mt,ut.prototype.set=St;function At(Ce){var We=-1,Ye=Ce?Ce.length:0;for(this.clear();++We<Ye;){var wn=Ce[We];this.set(wn[0],wn[1])}}function nt(){this.__data__={hash:new U,map:new(F||ut),string:new U}}function Pt(Ce){return _t(this,Ce).delete(Ce)}function z(Ce){return _t(this,Ce).get(Ce)}function q(Ce){return _t(this,Ce).has(Ce)}function gt(Ce,We){return _t(this,Ce).set(Ce,We),this}At.prototype.clear=nt,At.prototype.delete=Pt,At.prototype.get=z,At.prototype.has=q,At.prototype.set=gt;function et(Ce){var We=-1,Ye=Ce?Ce.length:0;for(this.__data__=new At;++We<Ye;)this.add(Ce[We])}function at(Ce){return this.__data__.set(Ce,T),this}function xt(Ce){return this.__data__.has(Ce)}et.prototype.add=et.prototype.push=at,et.prototype.has=xt;function k(Ce,We){for(var Ye=Ce.length;Ye--;)if(Ht(Ce[Ye][0],We))return Ye;return-1}function ot(Ce){if(!le(Ce)||$t(Ce))return!1;var We=ae(Ce)||g(Ce)?L:c;return We.test(ee(Ce))}function it(Ce,We,Ye){var wn=-1,er=i,Lr=Ce.length,on=!0,en=[],An=en;if(Ye)on=!1,er=a;else if(Lr>=E){var Bn=We?null:$(Ce);if(Bn)return m(Bn);on=!1,er=v,An=new et}else An=We?[]:en;t:for(;++wn<Lr;){var gr=Ce[wn],hi=We?We(gr):gr;if(gr=Ye||gr!==0?gr:0,on&&hi===hi){for(var Ae=An.length;Ae--;)if(An[Ae]===hi)continue t;We&&An.push(hi),en.push(gr)}else er(An,hi,Ye)||(An!==en&&An.push(hi),en.push(gr))}return en}var $=K&&1/m(new K([,-0]))[1]==e?function(Ce){return new K(Ce)}:Be;function _t(Ce,We){var Ye=Ce.__data__;return Nt(We)?Ye[typeof We=="string"?"string":"hash"]:Ye.map}function yt(Ce,We){var Ye=b(Ce,We);return ot(Ye)?Ye:void 0}function Nt(Ce){var We=typeof Ce;return We=="string"||We=="number"||We=="symbol"||We=="boolean"?Ce!=="__proto__":Ce===null}function $t(Ce){return!!S&&S in Ce}function ee(Ce){if(Ce!=null){try{return P.call(Ce)}catch(We){}try{return Ce+""}catch(We){}}return""}function Gt(Ce){return Ce&&Ce.length?it(Ce):[]}function Ht(Ce,We){return Ce===We||Ce!==Ce&&We!==We}function ae(Ce){var We=le(Ce)?O.call(Ce):"";return We==t||We==u}function le(Ce){var We=typeof Ce;return!!Ce&&(We=="object"||We=="function")}function Be(){}_e.exports=Gt}).call(this,R("IyRk"))},wclG:function(_e,dt,R){var V=R("pFRH"),E=R("88Gu"),T=E(V);_e.exports=T},wnjb:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.MetadataReader=void 0;var V=R("xfSm"),E=function(){function T(){}return T.prototype.getConstructorMetadata=function(e){var t=Reflect.getMetadata(V.PARAM_TYPES,e),u=Reflect.getMetadata(V.TAGGED,e);return{compilerGeneratedMetadata:t,userGeneratedMetadata:u||{}}},T.prototype.getPropertiesMetadata=function(e){var t=Reflect.getMetadata(V.TAGGED_PROP,e)||[];return t},T}();dt.MetadataReader=E},wrZu:function(_e,dt,R){var V=R("+K+b"),E=R("XYm9"),T=R("b2z7"),e=R("otv/"),t=R("yP5f"),u="[object Boolean]",s="[object Date]",c="[object Map]",r="[object Number]",h="[object RegExp]",n="[object Set]",i="[object String]",a="[object Symbol]",o="[object ArrayBuffer]",l="[object DataView]",f="[object Float32Array]",v="[object Float64Array]",b="[object Int8Array]",g="[object Int16Array]",m="[object Int32Array]",_="[object Uint8Array]",M="[object Uint8ClampedArray]",x="[object Uint16Array]",y="[object Uint32Array]";function S(P,A,O){var L=P.constructor;switch(A){case o:return V(P);case u:case s:return new L(+P);case l:return E(P,O);case f:case v:case b:case g:case m:case _:case M:case x:case y:return t(P,O);case c:return new L;case r:case i:return new L(P);case h:return T(P);case n:return new L;case a:return e(P)}}_e.exports=S},wy8a:function(_e,dt,R){var V=R("KxBF");function E(T,e,t){var u=T.length;return t=t===void 0?u:t,!e&&t>=u?T:V(T,e,t)}_e.exports=E},xfSm:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.NON_CUSTOM_TAG_KEYS=dt.POST_CONSTRUCT=dt.DESIGN_PARAM_TYPES=dt.PARAM_TYPES=dt.TAGGED_PROP=dt.TAGGED=dt.MULTI_INJECT_TAG=dt.INJECT_TAG=dt.OPTIONAL_TAG=dt.UNMANAGED_TAG=dt.NAME_TAG=dt.NAMED_TAG=void 0,dt.NAMED_TAG="named",dt.NAME_TAG="name",dt.UNMANAGED_TAG="unmanaged",dt.OPTIONAL_TAG="optional",dt.INJECT_TAG="inject",dt.MULTI_INJECT_TAG="multi_inject",dt.TAGGED="inversify:tagged",dt.TAGGED_PROP="inversify:tagged_props",dt.PARAM_TYPES="inversify:paramtypes",dt.DESIGN_PARAM_TYPES="design:paramtypes",dt.POST_CONSTRUCT="post_construct";function V(){return[dt.INJECT_TAG,dt.MULTI_INJECT_TAG,dt.NAME_TAG,dt.UNMANAGED_TAG,dt.NAMED_TAG,dt.OPTIONAL_TAG]}dt.NON_CUSTOM_TAG_KEYS=V()},xfeJ:function(_e,dt){function R(V){return Function.toString.call(V).indexOf("[native code]")!==-1}_e.exports=R,_e.exports.default=_e.exports,_e.exports.__esModule=!0},xiII:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.Request=void 0;var V=R("d9O0"),E=function(){function T(e,t,u,s,c){this.id=V.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=u,this.target=c,this.childRequests=[],this.bindings=Array.isArray(s)?s:[s],this.requestScope=u===null?new Map:null}return T.prototype.addChildRequest=function(e,t,u){var s=new T(e,this.parentContext,this,t,u);return this.childRequests.push(s),s},T}();dt.Request=E},xp6e:function(_e,dt,R){"use strict";(function(V){R.d(dt,"a",function(){return rt}),R.d(dt,"b",function(){return Rt}),R.d(dt,"c",function(){return G}),R.d(dt,"d",function(){return ut});/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function E(Ft,wt,Mt,St){function At(nt){return nt instanceof Mt?nt:new Mt(function(Pt){Pt(nt)})}return new(Mt||(Mt=Promise))(function(nt,Pt){function z(et){try{gt(St.next(et))}catch(at){Pt(at)}}function q(et){try{gt(St.throw(et))}catch(at){Pt(at)}}function gt(et){et.done?nt(et.value):At(et.value).then(z,q)}gt((St=St.apply(Ft,wt||[])).next())})}function T(Ft,wt){var Mt={label:0,sent:function(){if(nt[0]&1)throw nt[1];return nt[1]},trys:[],ops:[]},St,At,nt,Pt;return Pt={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&(Pt[Symbol.iterator]=function(){return this}),Pt;function z(gt){return function(et){return q([gt,et])}}function q(gt){if(St)throw new TypeError("Generator is already executing.");for(;Mt;)try{if(St=1,At&&(nt=gt[0]&2?At.return:gt[0]?At.throw||((nt=At.return)&&nt.call(At),0):At.next)&&!(nt=nt.call(At,gt[1])).done)return nt;switch(At=0,nt&&(gt=[gt[0]&2,nt.value]),gt[0]){case 0:case 1:nt=gt;break;case 4:return Mt.label++,{value:gt[1],done:!1};case 5:Mt.label++,At=gt[1],gt=[0];continue;case 7:gt=Mt.ops.pop(),Mt.trys.pop();continue;default:if(nt=Mt.trys,!(nt=nt.length>0&&nt[nt.length-1])&&(gt[0]===6||gt[0]===2)){Mt=0;continue}if(gt[0]===3&&(!nt||gt[1]>nt[0]&&gt[1]<nt[3])){Mt.label=gt[1];break}if(gt[0]===6&&Mt.label<nt[1]){Mt.label=nt[1],nt=gt;break}if(nt&&Mt.label<nt[2]){Mt.label=nt[2],Mt.ops.push(gt);break}nt[2]&&Mt.ops.pop(),Mt.trys.pop();continue}gt=wt.call(Ft,Mt)}catch(et){gt=[6,et],At=0}finally{St=nt=0}if(gt[0]&5)throw gt[1];return{value:gt[0]?gt[1]:void 0,done:!0}}}function e(Ft,wt){var Mt=typeof Symbol=="function"&&Ft[Symbol.iterator];if(!Mt)return Ft;var St=Mt.call(Ft),At,nt=[],Pt;try{for(;(wt===void 0||wt-- >0)&&!(At=St.next()).done;)nt.push(At.value)}catch(z){Pt={error:z}}finally{try{At&&!At.done&&(Mt=St.return)&&Mt.call(St)}finally{if(Pt)throw Pt.error}}return nt}function t(){for(var Ft=[],wt=0;wt<arguments.length;wt++)Ft=Ft.concat(e(arguments[wt]));return Ft}function u(Ft){return Ft&&Ft.__esModule&&Object.prototype.hasOwnProperty.call(Ft,"default")?Ft.default:Ft}function s(Ft,wt){return wt={exports:{}},Ft(wt,wt.exports),wt.exports}var c=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=Mt;function Mt(St){return St&&typeof St.length=="number"&&St.length>=0&&St.length%1==0}Ft.exports=wt.default});u(c);var r=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=function(Mt){return function(){for(var St=[],At=arguments.length;At--;)St[At]=arguments[At];var nt=St.pop();return Mt.call(this,St,nt)}},Ft.exports=wt.default});u(r);var h=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0}),wt.fallback=At,wt.wrap=nt;var Mt=wt.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,St=wt.hasNextTick=typeof V=="object"&&typeof V.nextTick=="function";function At(z){setTimeout(z,0)}function nt(z){return function(q){for(var gt=[],et=arguments.length-1;et-- >0;)gt[et]=arguments[et+1];return z(function(){return q.apply(void 0,gt)})}}var Pt;Mt?Pt=setImmediate:St?Pt=V.nextTick:Pt=At,wt.default=nt(Pt)});u(h);var n=h.fallback,i=h.wrap,a=h.hasSetImmediate,o=h.hasNextTick,l=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=nt;var Mt=At(r),St=At(h);function At(q){return q&&q.__esModule?q:{default:q}}function nt(q){return(0,f.isAsync)(q)?function(){for(var gt=[],et=arguments.length;et--;)gt[et]=arguments[et];var at=gt.pop(),xt=q.apply(this,gt);return Pt(xt,at)}:(0,Mt.default)(function(gt,et){var at;try{at=q.apply(this,gt)}catch(xt){return et(xt)}if(at&&typeof at.then=="function")return Pt(at,et);et(null,at)})}function Pt(q,gt){return q.then(function(et){z(gt,null,et)},function(et){z(gt,et&&et.message?et:new Error(et))})}function z(q,gt,et){try{q(gt,et)}catch(at){(0,St.default)(function(xt){throw xt},at)}}Ft.exports=wt.default});u(l);var f=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0}),wt.isAsyncIterable=wt.isAsyncGenerator=wt.isAsync=void 0;var Mt=St(l);function St(q){return q&&q.__esModule?q:{default:q}}function At(q){return q[Symbol.toStringTag]==="AsyncFunction"}function nt(q){return q[Symbol.toStringTag]==="AsyncGenerator"}function Pt(q){return typeof q[Symbol.asyncIterator]=="function"}function z(q){if(typeof q!="function")throw new Error("expected a function");return At(q)?(0,Mt.default)(q):q}wt.default=z,wt.isAsync=At,wt.isAsyncGenerator=nt,wt.isAsyncIterable=Pt});u(f);var v=f.isAsyncIterable,b=f.isAsyncGenerator,g=f.isAsync,m=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=Mt;function Mt(St,At){if(At===void 0&&(At=St.length),!At)throw new Error("arity is undefined");function nt(){for(var Pt=this,z=[],q=arguments.length;q--;)z[q]=arguments[q];return typeof z[At-1]=="function"?St.apply(this,z):new Promise(function(gt,et){z[At-1]=function(at){for(var xt=[],k=arguments.length-1;k-- >0;)xt[k]=arguments[k+1];if(at)return et(at);gt(xt.length>1?xt:xt[0])},St.apply(Pt,z)})}return Object.defineProperty(nt,"name",{configurable:!0,value:"awaitable("+St.name+")"}),nt}Ft.exports=wt.default});u(m);var _=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0});var Mt=nt(c),St=nt(f),At=nt(m);function nt(Pt){return Pt&&Pt.__esModule?Pt:{default:Pt}}wt.default=(0,At.default)(function(Pt,z,q){var gt=(0,Mt.default)(z)?[]:{};Pt(z,function(et,at,xt){(0,St.default)(et)(function(k){for(var ot,it=[],$=arguments.length-1;$-- >0;)it[$]=arguments[$+1];it.length<2&&(ot=it,it=ot[0]),gt[at]=it,xt(k)})},function(et){return q(et,gt)})},3),Ft.exports=wt.default});u(_);var M=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=Mt;function Mt(St){function At(){for(var nt=[],Pt=arguments.length;Pt--;)nt[Pt]=arguments[Pt];if(St!==null){var z=St;St=null,z.apply(this,nt)}}return Object.assign(At,St),At}Ft.exports=wt.default});u(M);var x=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=function(Mt){return Mt[Symbol.iterator]&&Mt[Symbol.iterator]()},Ft.exports=wt.default});u(x);var y=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=q;var Mt=At(c),St=At(x);function At(gt){return gt&&gt.__esModule?gt:{default:gt}}function nt(gt){var et=-1,at=gt.length;return function(){return++et<at?{value:gt[et],key:et}:null}}function Pt(gt){var et=-1;return function(){var xt=gt.next();return xt.done?null:(et++,{value:xt.value,key:et})}}function z(gt){var et=gt?Object.keys(gt):[],at=-1,xt=et.length;return function(){var ot=et[++at];return at<xt?{value:gt[ot],key:ot}:null}}function q(gt){if((0,Mt.default)(gt))return nt(gt);var et=(0,St.default)(gt);return et?Pt(et):z(gt)}Ft.exports=wt.default});u(y);var S=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=Mt;function Mt(St){return function(){for(var At=[],nt=arguments.length;nt--;)At[nt]=arguments[nt];if(St===null)throw new Error("Callback was already called.");var Pt=St;St=null,Pt.apply(this,At)}}Ft.exports=wt.default});u(S);var P=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0});var Mt={};wt.default=Mt,Ft.exports=wt.default});u(P);var A=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=At;var Mt=St(P);function St(nt){return nt&&nt.__esModule?nt:{default:nt}}function At(nt,Pt,z,q){var gt=!1,et=!1,at=!1,xt=0,k=0;function ot(){xt>=Pt||at||gt||(at=!0,nt.next().then(function(_t){var yt=_t.value,Nt=_t.done;if(!(et||gt)){if(at=!1,Nt){gt=!0,xt<=0&&q(null);return}xt++,z(yt,k,it),k++,ot()}}).catch($))}function it(_t,yt){if(xt-=1,!et){if(_t)return $(_t);if(_t===!1){gt=!0,et=!0;return}if(yt===Mt.default||gt&&xt<=0)return gt=!0,q(null);ot()}}function $(_t){et||(at=!1,gt=!0,q(_t))}ot()}Ft.exports=wt.default});u(A);var O=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0});var Mt=z(M),St=z(y),At=z(S),nt=z(A),Pt=z(P);function z(q){return q&&q.__esModule?q:{default:q}}wt.default=function(q){return function(gt,et,at){if(at=(0,Mt.default)(at),q<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!gt)return at(null);if((0,f.isAsyncGenerator)(gt))return(0,nt.default)(gt,q,et,at);if((0,f.isAsyncIterable)(gt))return(0,nt.default)(gt[Symbol.asyncIterator](),q,et,at);var xt=(0,St.default)(gt),k=!1,ot=!1,it=0,$=!1;function _t(Nt,$t){if(!ot)if(it-=1,Nt)k=!0,at(Nt);else if(Nt===!1)k=!0,ot=!0;else{if($t===Pt.default||k&&it<=0)return k=!0,at(null);$||yt()}}function yt(){for($=!0;it<q&&!k;){var Nt=xt();if(Nt===null){k=!0,it<=0&&at(null);return}it+=1,et(Nt.value,Nt.key,(0,At.default)(_t))}$=!1}yt()}},Ft.exports=wt.default});u(O);var L=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0});var Mt=nt(O),St=nt(f),At=nt(m);function nt(z){return z&&z.__esModule?z:{default:z}}function Pt(z,q,gt,et){return(0,Mt.default)(q)(z,(0,St.default)(gt),et)}wt.default=(0,At.default)(Pt,4),Ft.exports=wt.default});u(L);var H=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0});var Mt=At(L),St=At(m);function At(Pt){return Pt&&Pt.__esModule?Pt:{default:Pt}}function nt(Pt,z,q){return(0,Mt.default)(Pt,1,z,q)}wt.default=(0,St.default)(nt,3),Ft.exports=wt.default});u(H);var F=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=nt;var Mt=At(_),St=At(H);function At(Pt){return Pt&&Pt.__esModule?Pt:{default:Pt}}function nt(Pt,z){return(0,Mt.default)(St.default,Pt,z)}Ft.exports=wt.default}),K=u(F),G=function(){function Ft(){for(var wt=arguments,Mt=[],St=0;St<arguments.length;St++)Mt[St]=wt[St];this.args=[],this.tasks=[]}return Ft.prototype.call=function(){for(var wt=arguments,Mt=[],St=0;St<arguments.length;St++)Mt[St]=wt[St];return this.args=Mt,K(this.tasks)},Ft.prototype.tap=function(wt,Mt){var St=this;this.tasks.push(function(At){Mt.apply(void 0,t(St.args)),At(null,wt)})},Ft}(),U=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0});var Mt=gt(c),St=gt(P),At=gt(L),nt=gt(M),Pt=gt(S),z=gt(f),q=gt(m);function gt(k){return k&&k.__esModule?k:{default:k}}function et(k,ot,it){it=(0,nt.default)(it);var $=0,_t=0,yt=k.length,Nt=!1;yt===0&&it(null);function $t(ee,Gt){ee===!1&&(Nt=!0),Nt!==!0&&(ee?it(ee):(++_t===yt||Gt===St.default)&&it(null))}for(;$<yt;$++)ot(k[$],$,(0,Pt.default)($t))}function at(k,ot,it){return(0,At.default)(k,Infinity,ot,it)}function xt(k,ot,it){var $=(0,Mt.default)(k)?et:at;return $(k,(0,z.default)(ot),it)}wt.default=(0,q.default)(xt,3),Ft.exports=wt.default});u(U);var Z=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0}),wt.default=nt;var Mt=At(U),St=At(_);function At(Pt){return Pt&&Pt.__esModule?Pt:{default:Pt}}function nt(Pt,z){return(0,St.default)(Mt.default,Pt,z)}Ft.exports=wt.default}),J=u(Z),rt=function(){function Ft(){for(var wt=arguments,Mt=[],St=0;St<arguments.length;St++)Mt[St]=wt[St];this.tasks=[]}return Ft.prototype.promise=function(){for(var wt=arguments,Mt=[],St=0;St<arguments.length;St++)Mt[St]=wt[St];return J(this.tasks)},Ft.prototype.tapPromise=function(wt,Mt){var St=this;this.tasks.push(function(At){return E(St,void 0,void 0,function(){return T(this,function(nt){switch(nt.label){case 0:return[4,Mt()];case 1:return nt.sent(),At(null,wt),[2]}})})})},Ft}(),vt=s(function(Ft,wt){Object.defineProperty(wt,"__esModule",{value:!0});var Mt=Pt(M),St=Pt(S),At=Pt(f),nt=Pt(m);function Pt(q){return q&&q.__esModule?q:{default:q}}function z(q,gt){if(gt=(0,Mt.default)(gt),!Array.isArray(q))return gt(new Error("First argument to waterfall must be an array of functions"));if(!q.length)return gt();var et=0;function at(k){var ot=(0,At.default)(q[et++]);ot.apply(void 0,k.concat([(0,St.default)(xt)]))}function xt(k){for(var ot=[],it=arguments.length-1;it-- >0;)ot[it]=arguments[it+1];if(k!==!1){if(k||et===q.length)return gt.apply(void 0,[k].concat(ot));at(ot)}}at([])}wt.default=(0,nt.default)(z),Ft.exports=wt.default}),mt=u(vt),ut=function(){function Ft(){for(var wt=arguments,Mt=[],St=0;St<arguments.length;St++)Mt[St]=wt[St];this.tasks=[]}return Ft.prototype.call=function(){for(var wt=arguments,Mt=[],St=0;St<arguments.length;St++)Mt[St]=wt[St];return mt(this.tasks)},Ft.prototype.tap=function(wt,Mt){this.tasks.length===0?this.tasks.push(function(St){var At=Mt();St(At?null:!1,At)}):this.tasks.push(function(St,At){var nt=Mt();At(nt?null:!1,wt)})},Ft}(),Rt=function(){function Ft(){for(var wt=arguments,Mt=[],St=0;St<arguments.length;St++)Mt[St]=wt[St];this.tasks=[]}return Ft.prototype.call=function(){for(var wt=arguments,Mt=[],St=0;St<arguments.length;St++)Mt[St]=wt[St];return K(this.tasks)},Ft.prototype.tap=function(wt,Mt){this.tasks.push(function(St){var At=Mt();St(At,wt)})},Ft}()}).call(this,R("Q2Ig"))},yG8O:function(_e,dt){function R(V,E,T,e){!T||Object.defineProperty(V,E,{enumerable:T.enumerable,configurable:T.configurable,writable:T.writable,value:T.initializer?T.initializer.call(e):void 0})}_e.exports=R,_e.exports.default=_e.exports,_e.exports.__esModule=!0},yHx3:function(_e,dt){var R=Object.prototype,V=R.hasOwnProperty;function E(T){var e=T.length,t=new T.constructor(e);return e&&typeof T[0]=="string"&&V.call(T,"index")&&(t.index=T.index,t.input=T.input),t}_e.exports=E},yLV6:function(_e,dt,R){var V;/*! Hammer.JS - v2.0.7 - 2016-04-22
* http://hammerjs.github.io/
*
* Copyright (c) 2016 Jorik Tangelder;
* Licensed under the MIT license */(function(E,T,e,t){"use strict";var u=["","webkit","Moz","MS","ms","o"],s=T.createElement("div"),c="function",r=Math.round,h=Math.abs,n=Date.now;function i(se,Yt,Ee){return setTimeout(m(se,Ee),Yt)}function a(se,Yt,Ee){return Array.isArray(se)?(o(se,Ee[Yt],Ee),!0):!1}function o(se,Yt,Ee){var sn;if(!!se)if(se.forEach)se.forEach(Yt,Ee);else if(se.length!==t)for(sn=0;sn<se.length;)Yt.call(Ee,se[sn],sn,se),sn++;else for(sn in se)se.hasOwnProperty(sn)&&Yt.call(Ee,se[sn],sn,se)}function l(se,Yt,Ee){var sn="DEPRECATED METHOD: "+Yt+`
`+Ee+` AT 
`;return function(){var Fn=new Error("get-stack-trace"),rr=Fn&&Fn.stack?Fn.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",qn=E.console&&(E.console.warn||E.console.log);return qn&&qn.call(E.console,sn,rr),se.apply(this,arguments)}}var f;typeof Object.assign!="function"?f=function(Yt){if(Yt===t||Yt===null)throw new TypeError("Cannot convert undefined or null to object");for(var Ee=Object(Yt),sn=1;sn<arguments.length;sn++){var Fn=arguments[sn];if(Fn!==t&&Fn!==null)for(var rr in Fn)Fn.hasOwnProperty(rr)&&(Ee[rr]=Fn[rr])}return Ee}:f=Object.assign;var v=l(function(Yt,Ee,sn){for(var Fn=Object.keys(Ee),rr=0;rr<Fn.length;)(!sn||sn&&Yt[Fn[rr]]===t)&&(Yt[Fn[rr]]=Ee[Fn[rr]]),rr++;return Yt},"extend","Use `assign`."),b=l(function(Yt,Ee){return v(Yt,Ee,!0)},"merge","Use `assign`.");function g(se,Yt,Ee){var sn=Yt.prototype,Fn;Fn=se.prototype=Object.create(sn),Fn.constructor=se,Fn._super=sn,Ee&&f(Fn,Ee)}function m(se,Yt){return function(){return se.apply(Yt,arguments)}}function _(se,Yt){return typeof se==c?se.apply(Yt&&Yt[0]||t,Yt):se}function M(se,Yt){return se===t?Yt:se}function x(se,Yt,Ee){o(A(Yt),function(sn){se.addEventListener(sn,Ee,!1)})}function y(se,Yt,Ee){o(A(Yt),function(sn){se.removeEventListener(sn,Ee,!1)})}function S(se,Yt){for(;se;){if(se==Yt)return!0;se=se.parentNode}return!1}function P(se,Yt){return se.indexOf(Yt)>-1}function A(se){return se.trim().split(/\s+/g)}function O(se,Yt,Ee){if(se.indexOf&&!Ee)return se.indexOf(Yt);for(var sn=0;sn<se.length;){if(Ee&&se[sn][Ee]==Yt||!Ee&&se[sn]===Yt)return sn;sn++}return-1}function L(se){return Array.prototype.slice.call(se,0)}function H(se,Yt,Ee){for(var sn=[],Fn=[],rr=0;rr<se.length;){var qn=Yt?se[rr][Yt]:se[rr];O(Fn,qn)<0&&sn.push(se[rr]),Fn[rr]=qn,rr++}return Ee&&(Yt?sn=sn.sort(function(bi,wi){return bi[Yt]>wi[Yt]}):sn=sn.sort()),sn}function F(se,Yt){for(var Ee,sn,Fn=Yt[0].toUpperCase()+Yt.slice(1),rr=0;rr<u.length;){if(Ee=u[rr],sn=Ee?Ee+Fn:Yt,sn in se)return sn;rr++}return t}var K=1;function G(){return K++}function U(se){var Yt=se.ownerDocument||se;return Yt.defaultView||Yt.parentWindow||E}var Z=/mobile|tablet|ip(ad|hone|od)|android/i,J="ontouchstart"in E,rt=F(E,"PointerEvent")!==t,vt=J&&Z.test(navigator.userAgent),mt="touch",ut="pen",Rt="mouse",Ft="kinect",wt=25,Mt=1,St=2,At=4,nt=8,Pt=1,z=2,q=4,gt=8,et=16,at=z|q,xt=gt|et,k=at|xt,ot=["x","y"],it=["clientX","clientY"];function $(se,Yt){var Ee=this;this.manager=se,this.callback=Yt,this.element=se.element,this.target=se.options.inputTarget,this.domHandler=function(sn){_(se.options.enable,[se])&&Ee.handler(sn)},this.init()}$.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(U(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(U(this.element),this.evWin,this.domHandler)}};function _t(se){var Yt,Ee=se.options.inputClass;return Ee?Yt=Ee:rt?Yt=hi:vt?Yt=ue:J?Yt=tr:Yt=on,new Yt(se,yt)}function yt(se,Yt,Ee){var sn=Ee.pointers.length,Fn=Ee.changedPointers.length,rr=Yt&Mt&&sn-Fn==0,qn=Yt&(At|nt)&&sn-Fn==0;Ee.isFirst=!!rr,Ee.isFinal=!!qn,rr&&(se.session={}),Ee.eventType=Yt,Nt(se,Ee),se.emit("hammer.input",Ee),se.recognize(Ee),se.session.prevInput=Ee}function Nt(se,Yt){var Ee=se.session,sn=Yt.pointers,Fn=sn.length;Ee.firstInput||(Ee.firstInput=Gt(Yt)),Fn>1&&!Ee.firstMultiple?Ee.firstMultiple=Gt(Yt):Fn===1&&(Ee.firstMultiple=!1);var rr=Ee.firstInput,qn=Ee.firstMultiple,$r=qn?qn.center:rr.center,bi=Yt.center=Ht(sn);Yt.timeStamp=n(),Yt.deltaTime=Yt.timeStamp-rr.timeStamp,Yt.angle=Ce($r,bi),Yt.distance=Be($r,bi),$t(Ee,Yt),Yt.offsetDirection=le(Yt.deltaX,Yt.deltaY);var wi=ae(Yt.deltaTime,Yt.deltaX,Yt.deltaY);Yt.overallVelocityX=wi.x,Yt.overallVelocityY=wi.y,Yt.overallVelocity=h(wi.x)>h(wi.y)?wi.x:wi.y,Yt.scale=qn?Ye(qn.pointers,sn):1,Yt.rotation=qn?We(qn.pointers,sn):0,Yt.maxPointers=Ee.prevInput?Yt.pointers.length>Ee.prevInput.maxPointers?Yt.pointers.length:Ee.prevInput.maxPointers:Yt.pointers.length,ee(Ee,Yt);var Vi=se.element;S(Yt.srcEvent.target,Vi)&&(Vi=Yt.srcEvent.target),Yt.target=Vi}function $t(se,Yt){var Ee=Yt.center,sn=se.offsetDelta||{},Fn=se.prevDelta||{},rr=se.prevInput||{};(Yt.eventType===Mt||rr.eventType===At)&&(Fn=se.prevDelta={x:rr.deltaX||0,y:rr.deltaY||0},sn=se.offsetDelta={x:Ee.x,y:Ee.y}),Yt.deltaX=Fn.x+(Ee.x-sn.x),Yt.deltaY=Fn.y+(Ee.y-sn.y)}function ee(se,Yt){var Ee=se.lastInterval||Yt,sn=Yt.timeStamp-Ee.timeStamp,Fn,rr,qn,$r;if(Yt.eventType!=nt&&(sn>wt||Ee.velocity===t)){var bi=Yt.deltaX-Ee.deltaX,wi=Yt.deltaY-Ee.deltaY,Vi=ae(sn,bi,wi);rr=Vi.x,qn=Vi.y,Fn=h(Vi.x)>h(Vi.y)?Vi.x:Vi.y,$r=le(bi,wi),se.lastInterval=Yt}else Fn=Ee.velocity,rr=Ee.velocityX,qn=Ee.velocityY,$r=Ee.direction;Yt.velocity=Fn,Yt.velocityX=rr,Yt.velocityY=qn,Yt.direction=$r}function Gt(se){for(var Yt=[],Ee=0;Ee<se.pointers.length;)Yt[Ee]={clientX:r(se.pointers[Ee].clientX),clientY:r(se.pointers[Ee].clientY)},Ee++;return{timeStamp:n(),pointers:Yt,center:Ht(Yt),deltaX:se.deltaX,deltaY:se.deltaY}}function Ht(se){var Yt=se.length;if(Yt===1)return{x:r(se[0].clientX),y:r(se[0].clientY)};for(var Ee=0,sn=0,Fn=0;Fn<Yt;)Ee+=se[Fn].clientX,sn+=se[Fn].clientY,Fn++;return{x:r(Ee/Yt),y:r(sn/Yt)}}function ae(se,Yt,Ee){return{x:Yt/se||0,y:Ee/se||0}}function le(se,Yt){return se===Yt?Pt:h(se)>=h(Yt)?se<0?z:q:Yt<0?gt:et}function Be(se,Yt,Ee){Ee||(Ee=ot);var sn=Yt[Ee[0]]-se[Ee[0]],Fn=Yt[Ee[1]]-se[Ee[1]];return Math.sqrt(sn*sn+Fn*Fn)}function Ce(se,Yt,Ee){Ee||(Ee=ot);var sn=Yt[Ee[0]]-se[Ee[0]],Fn=Yt[Ee[1]]-se[Ee[1]];return Math.atan2(Fn,sn)*180/Math.PI}function We(se,Yt){return Ce(Yt[1],Yt[0],it)+Ce(se[1],se[0],it)}function Ye(se,Yt){return Be(Yt[0],Yt[1],it)/Be(se[0],se[1],it)}var wn={mousedown:Mt,mousemove:St,mouseup:At},er="mousedown",Lr="mousemove mouseup";function on(){this.evEl=er,this.evWin=Lr,this.pressed=!1,$.apply(this,arguments)}g(on,$,{handler:function(Yt){var Ee=wn[Yt.type];Ee&Mt&&Yt.button===0&&(this.pressed=!0),Ee&St&&Yt.which!==1&&(Ee=At),!!this.pressed&&(Ee&At&&(this.pressed=!1),this.callback(this.manager,Ee,{pointers:[Yt],changedPointers:[Yt],pointerType:Rt,srcEvent:Yt}))}});var en={pointerdown:Mt,pointermove:St,pointerup:At,pointercancel:nt,pointerout:nt},An={2:mt,3:ut,4:Rt,5:Ft},Bn="pointerdown",gr="pointermove pointerup pointercancel";E.MSPointerEvent&&!E.PointerEvent&&(Bn="MSPointerDown",gr="MSPointerMove MSPointerUp MSPointerCancel");function hi(){this.evEl=Bn,this.evWin=gr,$.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}g(hi,$,{handler:function(Yt){var Ee=this.store,sn=!1,Fn=Yt.type.toLowerCase().replace("ms",""),rr=en[Fn],qn=An[Yt.pointerType]||Yt.pointerType,$r=qn==mt,bi=O(Ee,Yt.pointerId,"pointerId");rr&Mt&&(Yt.button===0||$r)?bi<0&&(Ee.push(Yt),bi=Ee.length-1):rr&(At|nt)&&(sn=!0),!(bi<0)&&(Ee[bi]=Yt,this.callback(this.manager,rr,{pointers:Ee,changedPointers:[Yt],pointerType:qn,srcEvent:Yt}),sn&&Ee.splice(bi,1))}});var Ae={touchstart:Mt,touchmove:St,touchend:At,touchcancel:nt},Me="touchstart",Qt="touchstart touchmove touchend touchcancel";function ge(){this.evTarget=Me,this.evWin=Qt,this.started=!1,$.apply(this,arguments)}g(ge,$,{handler:function(Yt){var Ee=Ae[Yt.type];if(Ee===Mt&&(this.started=!0),!!this.started){var sn=Wt.call(this,Yt,Ee);Ee&(At|nt)&&sn[0].length-sn[1].length==0&&(this.started=!1),this.callback(this.manager,Ee,{pointers:sn[0],changedPointers:sn[1],pointerType:mt,srcEvent:Yt})}}});function Wt(se,Yt){var Ee=L(se.touches),sn=L(se.changedTouches);return Yt&(At|nt)&&(Ee=H(Ee.concat(sn),"identifier",!0)),[Ee,sn]}var re={touchstart:Mt,touchmove:St,touchend:At,touchcancel:nt},Te="touchstart touchmove touchend touchcancel";function ue(){this.evTarget=Te,this.targetIds={},$.apply(this,arguments)}g(ue,$,{handler:function(Yt){var Ee=re[Yt.type],sn=be.call(this,Yt,Ee);!sn||this.callback(this.manager,Ee,{pointers:sn[0],changedPointers:sn[1],pointerType:mt,srcEvent:Yt})}});function be(se,Yt){var Ee=L(se.touches),sn=this.targetIds;if(Yt&(Mt|St)&&Ee.length===1)return sn[Ee[0].identifier]=!0,[Ee,Ee];var Fn,rr,qn=L(se.changedTouches),$r=[],bi=this.target;if(rr=Ee.filter(function(wi){return S(wi.target,bi)}),Yt===Mt)for(Fn=0;Fn<rr.length;)sn[rr[Fn].identifier]=!0,Fn++;for(Fn=0;Fn<qn.length;)sn[qn[Fn].identifier]&&$r.push(qn[Fn]),Yt&(At|nt)&&delete sn[qn[Fn].identifier],Fn++;if(!!$r.length)return[H(rr.concat($r),"identifier",!0),$r]}var Xe=2500,Rn=25;function tr(){$.apply(this,arguments);var se=m(this.handler,this);this.touch=new ue(this.manager,se),this.mouse=new on(this.manager,se),this.primaryTouch=null,this.lastTouches=[]}g(tr,$,{handler:function(Yt,Ee,sn){var Fn=sn.pointerType==mt,rr=sn.pointerType==Rt;if(!(rr&&sn.sourceCapabilities&&sn.sourceCapabilities.firesTouchEvents)){if(Fn)Mn.call(this,Ee,sn);else if(rr&&Ar.call(this,sn))return;this.callback(Yt,Ee,sn)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Mn(se,Yt){se&Mt?(this.primaryTouch=Yt.changedPointers[0].identifier,vn.call(this,Yt)):se&(At|nt)&&vn.call(this,Yt)}function vn(se){var Yt=se.changedPointers[0];if(Yt.identifier===this.primaryTouch){var Ee={x:Yt.clientX,y:Yt.clientY};this.lastTouches.push(Ee);var sn=this.lastTouches,Fn=function(){var qn=sn.indexOf(Ee);qn>-1&&sn.splice(qn,1)};setTimeout(Fn,Xe)}}function Ar(se){for(var Yt=se.srcEvent.clientX,Ee=se.srcEvent.clientY,sn=0;sn<this.lastTouches.length;sn++){var Fn=this.lastTouches[sn],rr=Math.abs(Yt-Fn.x),qn=Math.abs(Ee-Fn.y);if(rr<=Rn&&qn<=Rn)return!0}return!1}var or=F(s.style,"touchAction"),cn=or!==t,Pr="compute",Sr="auto",De="manipulation",$e="none",Ve="pan-x",En="pan-y",xn=Dn();function Nn(se,Yt){this.manager=se,this.set(Yt)}Nn.prototype={set:function(Yt){Yt==Pr&&(Yt=this.compute()),cn&&this.manager.element.style&&xn[Yt]&&(this.manager.element.style[or]=Yt),this.actions=Yt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Yt=[];return o(this.manager.recognizers,function(Ee){_(Ee.options.enable,[Ee])&&(Yt=Yt.concat(Ee.getTouchAction()))}),mn(Yt.join(" "))},preventDefaults:function(Yt){var Ee=Yt.srcEvent,sn=Yt.offsetDirection;if(this.manager.session.prevented){Ee.preventDefault();return}var Fn=this.actions,rr=P(Fn,$e)&&!xn[$e],qn=P(Fn,En)&&!xn[En],$r=P(Fn,Ve)&&!xn[Ve];if(rr){var bi=Yt.pointers.length===1,wi=Yt.distance<2,Vi=Yt.deltaTime<250;if(bi&&wi&&Vi)return}if(!($r&&qn)&&(rr||qn&&sn&at||$r&&sn&xt))return this.preventSrc(Ee)},preventSrc:function(Yt){this.manager.session.prevented=!0,Yt.preventDefault()}};function mn(se){if(P(se,$e))return $e;var Yt=P(se,Ve),Ee=P(se,En);return Yt&&Ee?$e:Yt||Ee?Yt?Ve:En:P(se,De)?De:Sr}function Dn(){if(!cn)return!1;var se={},Yt=E.CSS&&E.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Ee){se[Ee]=Yt?E.CSS.supports("touch-action",Ee):!0}),se}var $n=1,Wn=2,_n=4,xr=8,mr=xr,Fr=16,xi=32;function Ta(se){this.options=f({},this.defaults,se||{}),this.id=G(),this.manager=null,this.options.enable=M(this.options.enable,!0),this.state=$n,this.simultaneous={},this.requireFail=[]}Ta.prototype={defaults:{},set:function(Yt){return f(this.options,Yt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Yt){if(a(Yt,"recognizeWith",this))return this;var Ee=this.simultaneous;return Yt=Vo(Yt,this),Ee[Yt.id]||(Ee[Yt.id]=Yt,Yt.recognizeWith(this)),this},dropRecognizeWith:function(Yt){return a(Yt,"dropRecognizeWith",this)?this:(Yt=Vo(Yt,this),delete this.simultaneous[Yt.id],this)},requireFailure:function(Yt){if(a(Yt,"requireFailure",this))return this;var Ee=this.requireFail;return Yt=Vo(Yt,this),O(Ee,Yt)===-1&&(Ee.push(Yt),Yt.requireFailure(this)),this},dropRequireFailure:function(Yt){if(a(Yt,"dropRequireFailure",this))return this;Yt=Vo(Yt,this);var Ee=O(this.requireFail,Yt);return Ee>-1&&this.requireFail.splice(Ee,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Yt){return!!this.simultaneous[Yt.id]},emit:function(Yt){var Ee=this,sn=this.state;function Fn(rr){Ee.manager.emit(rr,Yt)}sn<xr&&Fn(Ee.options.event+Aa(sn)),Fn(Ee.options.event),Yt.additionalEvent&&Fn(Yt.additionalEvent),sn>=xr&&Fn(Ee.options.event+Aa(sn))},tryEmit:function(Yt){if(this.canEmit())return this.emit(Yt);this.state=xi},canEmit:function(){for(var Yt=0;Yt<this.requireFail.length;){if(!(this.requireFail[Yt].state&(xi|$n)))return!1;Yt++}return!0},recognize:function(Yt){var Ee=f({},Yt);if(!_(this.options.enable,[this,Ee])){this.reset(),this.state=xi;return}this.state&(mr|Fr|xi)&&(this.state=$n),this.state=this.process(Ee),this.state&(Wn|_n|xr|Fr)&&this.tryEmit(Ee)},process:function(Yt){},getTouchAction:function(){},reset:function(){}};function Aa(se){return se&Fr?"cancel":se&xr?"end":se&_n?"move":se&Wn?"start":""}function to(se){return se==et?"down":se==gt?"up":se==z?"left":se==q?"right":""}function Vo(se,Yt){var Ee=Yt.manager;return Ee?Ee.get(se):se}function Ro(){Ta.apply(this,arguments)}g(Ro,Ta,{defaults:{pointers:1},attrTest:function(Yt){var Ee=this.options.pointers;return Ee===0||Yt.pointers.length===Ee},process:function(Yt){var Ee=this.state,sn=Yt.eventType,Fn=Ee&(Wn|_n),rr=this.attrTest(Yt);return Fn&&(sn&nt||!rr)?Ee|Fr:Fn||rr?sn&At?Ee|xr:Ee&Wn?Ee|_n:Wn:xi}});function ro(){Ro.apply(this,arguments),this.pX=null,this.pY=null}g(ro,Ro,{defaults:{event:"pan",threshold:10,pointers:1,direction:k},getTouchAction:function(){var Yt=this.options.direction,Ee=[];return Yt&at&&Ee.push(En),Yt&xt&&Ee.push(Ve),Ee},directionTest:function(Yt){var Ee=this.options,sn=!0,Fn=Yt.distance,rr=Yt.direction,qn=Yt.deltaX,$r=Yt.deltaY;return rr&Ee.direction||(Ee.direction&at?(rr=qn===0?Pt:qn<0?z:q,sn=qn!=this.pX,Fn=Math.abs(Yt.deltaX)):(rr=$r===0?Pt:$r<0?gt:et,sn=$r!=this.pY,Fn=Math.abs(Yt.deltaY))),Yt.direction=rr,sn&&Fn>Ee.threshold&&rr&Ee.direction},attrTest:function(Yt){return Ro.prototype.attrTest.call(this,Yt)&&(this.state&Wn||!(this.state&Wn)&&this.directionTest(Yt))},emit:function(Yt){this.pX=Yt.deltaX,this.pY=Yt.deltaY;var Ee=to(Yt.direction);Ee&&(Yt.additionalEvent=this.options.event+Ee),this._super.emit.call(this,Yt)}});function vs(){Ro.apply(this,arguments)}g(vs,Ro,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[$e]},attrTest:function(Yt){return this._super.attrTest.call(this,Yt)&&(Math.abs(Yt.scale-1)>this.options.threshold||this.state&Wn)},emit:function(Yt){if(Yt.scale!==1){var Ee=Yt.scale<1?"in":"out";Yt.additionalEvent=this.options.event+Ee}this._super.emit.call(this,Yt)}});function Jo(){Ta.apply(this,arguments),this._timer=null,this._input=null}g(Jo,Ta,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Sr]},process:function(Yt){var Ee=this.options,sn=Yt.pointers.length===Ee.pointers,Fn=Yt.distance<Ee.threshold,rr=Yt.deltaTime>Ee.time;if(this._input=Yt,!Fn||!sn||Yt.eventType&(At|nt)&&!rr)this.reset();else if(Yt.eventType&Mt)this.reset(),this._timer=i(function(){this.state=mr,this.tryEmit()},Ee.time,this);else if(Yt.eventType&At)return mr;return xi},reset:function(){clearTimeout(this._timer)},emit:function(Yt){this.state===mr&&(Yt&&Yt.eventType&At?this.manager.emit(this.options.event+"up",Yt):(this._input.timeStamp=n(),this.manager.emit(this.options.event,this._input)))}});function Do(){Ro.apply(this,arguments)}g(Do,Ro,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[$e]},attrTest:function(Yt){return this._super.attrTest.call(this,Yt)&&(Math.abs(Yt.rotation)>this.options.threshold||this.state&Wn)}});function xs(){Ro.apply(this,arguments)}g(xs,Ro,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:at|xt,pointers:1},getTouchAction:function(){return ro.prototype.getTouchAction.call(this)},attrTest:function(Yt){var Ee=this.options.direction,sn;return Ee&(at|xt)?sn=Yt.overallVelocity:Ee&at?sn=Yt.overallVelocityX:Ee&xt&&(sn=Yt.overallVelocityY),this._super.attrTest.call(this,Yt)&&Ee&Yt.offsetDirection&&Yt.distance>this.options.threshold&&Yt.maxPointers==this.options.pointers&&h(sn)>this.options.velocity&&Yt.eventType&At},emit:function(Yt){var Ee=to(Yt.offsetDirection);Ee&&this.manager.emit(this.options.event+Ee,Yt),this.manager.emit(this.options.event,Yt)}});function Ra(){Ta.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}g(Ra,Ta,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[De]},process:function(Yt){var Ee=this.options,sn=Yt.pointers.length===Ee.pointers,Fn=Yt.distance<Ee.threshold,rr=Yt.deltaTime<Ee.time;if(this.reset(),Yt.eventType&Mt&&this.count===0)return this.failTimeout();if(Fn&&rr&&sn){if(Yt.eventType!=At)return this.failTimeout();var qn=this.pTime?Yt.timeStamp-this.pTime<Ee.interval:!0,$r=!this.pCenter||Be(this.pCenter,Yt.center)<Ee.posThreshold;this.pTime=Yt.timeStamp,this.pCenter=Yt.center,!$r||!qn?this.count=1:this.count+=1,this._input=Yt;var bi=this.count%Ee.taps;if(bi===0)return this.hasRequireFailures()?(this._timer=i(function(){this.state=mr,this.tryEmit()},Ee.interval,this),Wn):mr}return xi},failTimeout:function(){return this._timer=i(function(){this.state=xi},this.options.interval,this),xi},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==mr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function $o(se,Yt){return Yt=Yt||{},Yt.recognizers=M(Yt.recognizers,$o.defaults.preset),new io(se,Yt)}$o.VERSION="2.0.7",$o.defaults={domEvents:!1,touchAction:Pr,enable:!0,inputTarget:null,inputClass:null,preset:[[Do,{enable:!1}],[vs,{enable:!1},["rotate"]],[xs,{direction:at}],[ro,{direction:at},["swipe"]],[Ra],[Ra,{event:"doubletap",taps:2},["tap"]],[Jo]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var jo=1,Js=2;function io(se,Yt){this.options=f({},$o.defaults,Yt||{}),this.options.inputTarget=this.options.inputTarget||se,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=se,this.input=_t(this),this.touchAction=new Nn(this,this.options.touchAction),so(this,!0),o(this.options.recognizers,function(Ee){var sn=this.add(new Ee[0](Ee[1]));Ee[2]&&sn.recognizeWith(Ee[2]),Ee[3]&&sn.requireFailure(Ee[3])},this)}io.prototype={set:function(Yt){return f(this.options,Yt),Yt.touchAction&&this.touchAction.update(),Yt.inputTarget&&(this.input.destroy(),this.input.target=Yt.inputTarget,this.input.init()),this},stop:function(Yt){this.session.stopped=Yt?Js:jo},recognize:function(Yt){var Ee=this.session;if(!Ee.stopped){this.touchAction.preventDefaults(Yt);var sn,Fn=this.recognizers,rr=Ee.curRecognizer;(!rr||rr&&rr.state&mr)&&(rr=Ee.curRecognizer=null);for(var qn=0;qn<Fn.length;)sn=Fn[qn],Ee.stopped!==Js&&(!rr||sn==rr||sn.canRecognizeWith(rr))?sn.recognize(Yt):sn.reset(),!rr&&sn.state&(Wn|_n|xr)&&(rr=Ee.curRecognizer=sn),qn++}},get:function(Yt){if(Yt instanceof Ta)return Yt;for(var Ee=this.recognizers,sn=0;sn<Ee.length;sn++)if(Ee[sn].options.event==Yt)return Ee[sn];return null},add:function(Yt){if(a(Yt,"add",this))return this;var Ee=this.get(Yt.options.event);return Ee&&this.remove(Ee),this.recognizers.push(Yt),Yt.manager=this,this.touchAction.update(),Yt},remove:function(Yt){if(a(Yt,"remove",this))return this;if(Yt=this.get(Yt),Yt){var Ee=this.recognizers,sn=O(Ee,Yt);sn!==-1&&(Ee.splice(sn,1),this.touchAction.update())}return this},on:function(Yt,Ee){if(Yt!==t&&Ee!==t){var sn=this.handlers;return o(A(Yt),function(Fn){sn[Fn]=sn[Fn]||[],sn[Fn].push(Ee)}),this}},off:function(Yt,Ee){if(Yt!==t){var sn=this.handlers;return o(A(Yt),function(Fn){Ee?sn[Fn]&&sn[Fn].splice(O(sn[Fn],Ee),1):delete sn[Fn]}),this}},emit:function(Yt,Ee){this.options.domEvents&&Gs(Yt,Ee);var sn=this.handlers[Yt]&&this.handlers[Yt].slice();if(!(!sn||!sn.length)){Ee.type=Yt,Ee.preventDefault=function(){Ee.srcEvent.preventDefault()};for(var Fn=0;Fn<sn.length;)sn[Fn](Ee),Fn++}},destroy:function(){this.element&&so(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function so(se,Yt){var Ee=se.element;if(!!Ee.style){var sn;o(se.options.cssProps,function(Fn,rr){sn=F(Ee.style,rr),Yt?(se.oldCssProps[sn]=Ee.style[sn],Ee.style[sn]=Fn):Ee.style[sn]=se.oldCssProps[sn]||""}),Yt||(se.oldCssProps={})}}function Gs(se,Yt){var Ee=T.createEvent("Event");Ee.initEvent(se,!0,!0),Ee.gesture=Yt,Yt.target.dispatchEvent(Ee)}f($o,{INPUT_START:Mt,INPUT_MOVE:St,INPUT_END:At,INPUT_CANCEL:nt,STATE_POSSIBLE:$n,STATE_BEGAN:Wn,STATE_CHANGED:_n,STATE_ENDED:xr,STATE_RECOGNIZED:mr,STATE_CANCELLED:Fr,STATE_FAILED:xi,DIRECTION_NONE:Pt,DIRECTION_LEFT:z,DIRECTION_RIGHT:q,DIRECTION_UP:gt,DIRECTION_DOWN:et,DIRECTION_HORIZONTAL:at,DIRECTION_VERTICAL:xt,DIRECTION_ALL:k,Manager:io,Input:$,TouchAction:Nn,TouchInput:ue,MouseInput:on,PointerEventInput:hi,TouchMouseInput:tr,SingleTouchInput:ge,Recognizer:Ta,AttrRecognizer:Ro,Tap:Ra,Pan:ro,Swipe:xs,Pinch:vs,Rotate:Do,Press:Jo,on:x,off:y,each:o,merge:b,extend:v,assign:f,inherit:g,bindFn:m,prefixed:F});var Ne=typeof E!="undefined"?E:typeof self!="undefined"?self:{};Ne.Hammer=$o,V=function(){return $o}.call(dt,R,dt,_e),V!==t&&(_e.exports=V)})(window,document,"Hammer")},yMAV:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.Plan=void 0;var V=function(){function E(T,e){this.parentContext=T,this.rootRequest=e}return E}();dt.Plan=V},yP5f:function(_e,dt,R){var V=R("+K+b");function E(T,e){var t=e?V(T.buffer):T.buffer;return new T.constructor(t,T.byteOffset,T.length)}_e.exports=E},"yP6+":function(_e,dt,R){(function(E,T){_e.exports=T(R("q1tI"))})(this,function(V){return function(E){var T={};function e(t){if(T[t])return T[t].exports;var u=T[t]={i:t,l:!1,exports:{}};return E[t].call(u.exports,u,u.exports,e),u.l=!0,u.exports}return e.m=E,e.c=T,e.i=function(t){return t},e.d=function(t,u,s){e.o(t,u)||Object.defineProperty(t,u,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var u=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(u,"a",u),u},e.o=function(t,u){return Object.prototype.hasOwnProperty.call(t,u)},e.p="",e(e.s=546)}([function(E,T,e){var t=e(166),u=e(16),s=t.mix({},t,{assign:t.mix,merge:t.deepMix,cloneDeep:t.clone,isFinite,isNaN,snapEqual:t.isNumberEqual,remove:t.pull,inArray:t.contains,toAllPadding:function(r){var h=0,n=0,i=0,a=0;return s.isNumber(r)||s.isString(r)?h=n=i=a=r:s.isArray(r)?(h=r[0],i=s.isNil(r[1])?r[0]:r[1],a=s.isNil(r[2])?r[0]:r[2],n=s.isNil(r[3])?i:r[3]):s.isObject(r)&&(h=r.top||0,i=r.right||0,a=r.bottom||0,n=r.left||0),[h,i,a,n]},getClipByRange:function(r){var h=r.tl,n=r.br,i=new u.Rect({attrs:{x:h.x,y:h.y,width:n.x-h.x,height:n.y-h.y}});return i}});s.Array={groupToMap:t.groupToMap,group:t.group,merge:t.merge,values:t.valuesOfKey,getRange:t.getRange,firstValue:t.firstValue,remove:t.pull},E.exports=s},function(E,T,e){var t=e(150),u={};t.merge(u,t,{mixin:function(c,r){var h=c.CFG?"CFG":"ATTRS";if(c&&r){c._mixins=r,c[h]=c[h]||{};var n={};u.each(r,function(i){u.augment(c,i);var a=i[h];a&&u.merge(n,a)}),c[h]=u.merge(n,c[h])}}}),E.exports=u},function(E,T,e){var t=e(39),u=e(4),s=function(r,h){if(!!r){var n=void 0;if(u(r))for(var i=0,a=r.length;i<a&&(n=h(r[i],i),n!==!1);i++);else if(t(r)){for(var o in r)if(r.hasOwnProperty(o)&&(n=h(r[o],o),n===!1))break}}};E.exports=s},function(E,T,e){var t=e(31),u=e(166),s=u.mix({assign:u.mix,isFinite,isNaN,Group:t.Group,Event:t.Event},u);E.exports=s},function(E,T,e){var t=e(17),u=Array.isArray?Array.isArray:function(s){return t(s,"Array")};E.exports=u},function(E,T,e){var t=e(0),u=e(132),s={version:"3.5.15",renderer:"canvas",trackingInfo:{},animate:!0,widthRatio:{column:1/2,rose:.9999999,multiplePie:1/1.3},showSinglePoint:!1,connectNulls:!1,scales:{},registerTheme:function(r,h){u[r]=h},setTheme:function(r){var h={};t.isObject(r)?h=r:t.indexOf(Object.keys(u),r)!==-1?h=u[r]:h=u.default,t.deepMix(s,h)}};s.setTheme("default"),E.exports=s},function(E,T){var e=function(u){return u==null};E.exports=e},function(E,T,e){var t=e(1),u=e(331),s=e(133),c=e(76),r=function i(a){i.superclass.constructor.call(this,a)};r.ATTRS={},t.extend(r,s);var h={matrix:"matrix",path:"path",points:"points",lineDash:"lineDash"};function n(i){for(var a=[],o=0;o<i.length;o++)t.isArray(i[o])?a.push([].concat(i[o])):a.push(i[o]);return a}t.augment(r,u,{isShape:!0,drawInner:function(a){var o=this,l=o._attrs;o.createPath(a);var f=a.globalAlpha;if(o.hasFill()){var v=l.fillOpacity;!t.isNil(v)&&v!==1?(a.globalAlpha=v,a.fill(),a.globalAlpha=f):a.fill()}if(o.hasStroke()){var b=o._attrs.lineWidth;if(b>0){var g=l.strokeOpacity;!t.isNil(g)&&g!==1&&(a.globalAlpha=g),a.stroke()}}o.afterPath(a)},afterPath:function(){},isHitBox:function(){return!0},isHit:function(a,o){var l=this,f=[a,o,1];if(l.invert(f),l.isHitBox()){var v=l.getBBox();if(v&&!c.box(v.minX,v.maxX,v.minY,v.maxY,f[0],f[1]))return!1}var b=l._attrs.clip;if(b){if(b.invert(f,l.get("canvas")),b.isPointInPath(f[0],f[1]))return l.isPointInPath(f[0],f[1])}else return l.isPointInPath(f[0],f[1]);return!1},calculateBox:function(){return null},getHitLineWidth:function(){var a=this._attrs,o=a.lineAppendWidth||0,l=a.lineWidth||0;return l+o},clearTotalMatrix:function(){this._cfg.totalMatrix=null,this._cfg.region=null},clearBBox:function(){this._cfg.box=null,this._cfg.region=null},getBBox:function(){var a=this._cfg.box;return a||(a=this.calculateBox(),a&&(a.x=a.minX,a.y=a.minY,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY),this._cfg.box=a),a},clone:function(){var a=this,o=null,l=a._attrs,f={};return t.each(l,function(v,b){h[b]&&t.isArray(l[b])?f[b]=n(l[b]):f[b]=l[b]}),o=new a.constructor({attrs:f}),o._cfg.zIndex=a._cfg.zIndex,o}}),E.exports=r},function(E,T,e){function t(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function u(M,x){M.prototype=Object.create(x.prototype),M.prototype.constructor=M,M.__proto__=x}var s=e(65),c=e(227),r=e(120),h=e(0),n=e(5),i=e(294),a=e(9),o=e(300),l=e(298),f=e(299),v=e(313),b=["color","shape","size"],g="_origin";function m(M){return(h.isString(M)||h.isPlainObject(M))&&(M=[M]),h.each(M,function(x,y){h.isObject(x)||(M[y]={type:x})}),M}var _=function(M){u(y,M);var x=y.prototype;x.getDefaultCfg=function(){return{_id:null,type:"base",coord:null,attrs:{},view:null,data:[],scales:{},container:null,labelContainer:null,shapeContainer:null,attrOptions:{},styleOptions:null,selectedOptions:null,activedOptions:null,hasDefaultAdjust:!1,adjusts:null,shapeType:null,generatePoints:!1,sortable:!1,labelCfg:null,shareTooltip:!0,tooltipCfg:null,animate:!0,animateCfg:null,visible:!0}};function y(S){var P;return P=M.call(this,S)||this,P.viewTheme=P.get("viewTheme"),h.assign(t(P),o,l,f),P.get("container")&&P._initContainer(),P._initOptions(),P}return x._initOptions=function(){var P=this.get("adjusts");P&&(P=m(P),this.set("adjusts",P))},x._createScale=function(P,A){var O=this.get("scales"),L=O[P];return L||(L=this.get("view").createScale(P,A),O[P]=L),L},x._setAttrOptions=function(P,A){var O=this.get("attrOptions");O[P]=A},x._createAttrOption=function(P,A,O,L){var H={};H.field=A,O?h.isFunction(O)?H.callback=O:H.values=O:P!=="color"&&(H.values=L),this._setAttrOptions(P,H)},x.position=function(P){return this._setAttrOptions("position",{field:P}),this},x.color=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("color",P,A,O.colors),this},x.size=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("size",P,A,O.sizes),this},x.shape=function(P,A){var O=this.viewTheme||n,L=this.get("type"),H=O.shapes[L]||[];return this._createAttrOption("shape",P,A,H),this},x.opacity=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("opacity",P,A,O.opacities),this},x.style=function(P,A){var O=this.get("styleOptions");O||(O={},this.set("styleOptions",O)),h.isObject(P)&&(A=P,P=null);var L;return P&&(L=v(P)),O.fields=L,O.style=A,this},x.label=function(P,A,O){var L=this,H=L.get("labelCfg");H||(H={},L.set("labelCfg",H));var F;return P&&(F=v(P)),H.fields=F,h.isFunction(A)?(O||(O={}),H.callback=A):h.isObject(A)&&(O=A),H.globalCfg=O,this},x.tooltip=function(P,A){var O=this.get("tooltipCfg");if(O||(O={}),P===!1)this.set("tooltipCfg",!1);else{var L;P&&(L=v(P)),O.fields=L,O.cfg=A}return this.set("tooltipCfg",O),this},x.animate=function(P){return this.set("animateCfg",P),this},x.active=function(P,A){return P===!1?this.set("allowActive",!1):h.isObject(P)?(this.set("allowActive",!0),this.set("activedOptions",P)):(this.set("allowActive",!0),this.set("activedOptions",A)),this},x.adjust=function(P){return this.get("hasDefaultAdjust")||(P&&(P=m(P)),this.set("adjusts",P)),this},x.select=function(P,A){return P===!1?this.set("allowSelect",!1):h.isObject(P)?(this.set("allowSelect",!0),this.set("selectedOptions",P)):(this.set("allowSelect",!0),this.set("selectedOptions",A)),this},x.hasAdjust=function(P){var A=this,O=A.get("adjusts");if(!P)return!1;var L=!1;return h.each(O,function(H){if(H.type===P)return L=!0,!1}),L},x.hasStack=function(){var P=this.get("isStacked");return h.isNil(P)&&(P=this.hasAdjust("stack"),this.set("isStacked",P)),P},x.isInCircle=function(){var P=this.get("coord");return P&&P.isPolar},x._initContainer=function(){var P=this,A=P.get("shapeContainer");if(!A){var O=P.get("container"),L=P.get("view"),H=L&&L.get("_id");A=O.addGroup({viewId:H,visible:P.get("visible")}),P.set("shapeContainer",A)}},x.init=function(){var P=this;if(P._initContainer(),P._initAttrs(),P.get("tooltipCfg")&&P.get("tooltipCfg").fields){var A=P.get("tooltipCfg").fields;h.each(A,function(L){P._createScale(L)})}var O=P._processData();P.get("adjusts")&&P._adjust(O),P.set("dataArray",O)},x._initAttrs=function(){var P=this,A=P.get("attrs"),O=P.get("attrOptions"),L=P.get("coord"),H=P.viewTheme||n,F=!1;for(var K in O)if(O.hasOwnProperty(K)){var G=O[K],U=h.upperFirst(K),Z=v(G.field);K==="position"&&(G.coord=L,Z.length===1&&L.type==="theta"&&(Z.unshift("1"),F=!0));for(var J=[],rt=0;rt<Z.length;rt++){var vt=Z[rt],mt=P._createScale(vt);K==="color"&&h.isNil(G.values)&&(mt.values.length<=8?G.values=F?H.colors_pie:H.colors:mt.values.length<=16?G.values=F?H.colors_pie_16:H.colors_16:G.values=H.colors_24,h.isNil(G.values)&&(G.values=H.colors)),J.push(mt)}if(L.type==="theta"&&K==="position"&&J.length>1){var ut=J[1],Rt=0,Ft=Math.max.apply(null,ut.values);isFinite(Ft)||(Ft=1),ut.change({nice:!1,min:Rt,max:Ft})}G.scales=J;var wt=new s[U](G);A[K]=wt}},x._processData=function(){for(var P=this,A=this.get("data"),O=[],L=this._groupData(A),H=0;H<L.length;H++){var F=L[H],K=P._saveOrigin(F);O.push(P._numberic(K))}return O},x._groupData=function(P){var A=this._getGroupScales(),O=A.map(function(L){return L.field});return h.Array.group(P,O)},x._saveOrigin=function(P){for(var A=[],O=0;O<P.length;O++){var L=P[O],H={};for(var F in L)H[F]=L[F];H[g]=L,A.push(H)}return A},x._numberic=function(P){for(var A=this.getAttr("position"),O=A.scales,L=[],H=0;H<P.length;H++){for(var F=P[H],K=!0,G=0;G<Math.min(2,O.length);G++){var U=O[G];if(U.isCategory){var Z=U.field;F[Z]=U.translate(F[Z]),Number.isNaN(F[Z])&&(K=!1)}}K&&L.push(F)}return L},x._getGroupScales=function(){var P=this,A=P.get("groupScales");if(!A){A=[];var O=P.get("attrs");h.each(O,function(L){if(b.includes(L.type)){var H=L.scales;h.each(H,function(F){F.isCategory&&h.indexOf(A,F)===-1&&A.push(F)})}}),P.set("groupScales",A)}return A},x._updateStackRange=function(P,A,O){for(var L=h.Array.merge(O),H=A.min,F=A.max,K=0;K<L.length;K++){var G=L[K];if(!!h.isArray(G[P])){var U=Math.min.apply(null,G[P]),Z=Math.max.apply(null,G[P]);U<H&&(H=U),Z>F&&(F=Z)}}(H<A.min||F>A.max)&&A.change({min:H,max:F})},x._adjust=function(P){if(!(!P||!P.length)){var A=this,O=A.get("adjusts"),L=this.viewTheme||n,H=A.getYScale(),F=A.getXScale(),K=F.field,G=H?H.field:null;h.each(O,function(U){var Z=h.mix({xField:K,yField:G},U),J=h.upperFirst(U.type);if(J==="Dodge"){var rt=[];if(F.isCategory||F.isIdentity)rt.push("x");else if(!H)rt.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");Z.adjustNames=rt,Z.dodgeRatio=Z.dodgeRatio||L.widthRatio.column}else if(J==="Stack"){var vt=A.get("coord");if(!H){Z.height=vt.getHeight();var mt=A.getDefaultValue("size")||3;Z.size=mt}!vt.isTransposed&&h.isNil(Z.reverseOrder)&&(Z.reverseOrder=!0)}var ut=new c[J](Z);ut.processAdjust(P),J==="Stack"&&H&&A._updateStackRange(G,H,P)})}},x.setCoord=function(P){this.set("coord",P);var A=this.getAttr("position"),O=this.get("shapeContainer");O.setMatrix(P.matrix),A&&(A.coord=P)},x.paint=function(){var P=this,A=P.get("dataArray"),O=[],L=P.getShapeFactory();L.setCoord(P.get("coord")),P.set("shapeFactory",L);var H=P.get("shapeContainer");P._beforeMapping(A);for(var F=0;F<A.length;F++){var K=A[F],G=F;K=P._mapping(K),O.push(K),P.draw(K,H,L,G)}P.get("labelCfg")&&P._addLabels(h.union.apply(null,O),H.get("children")),P.get("sortable")?P.set("dataArray",O):P._sort(O)},x._sort=function(P){var A=this,O=A.getXScale(),L=O.field;h.each(P,function(H){H.sort(function(F,K){return O.translate(F[g][L])-O.translate(K[g][L])})}),A.set("dataArray",P)},x._beforeMapping=function(P){var A=this;if(A.get("sortable")){var O=A.getXScale(),L=O.field;h.each(P,function(H){H.sort(function(F,K){return O.translate(F[L])-O.translate(K[L])})})}A.get("generatePoints")&&(h.each(P,function(H){A._generatePoints(H)}),h.each(P,function(H,F){var K=P[F+1];K&&(H[0].nextPoints=K[0].points)}))},x._addLabels=function(P,A){var O=this,L=O.get("type"),H=O.get("viewTheme")||n,F=O.get("coord"),K=i.getLabelsClass(F.type,L),G=O.get("container"),U=h.map(O.get("labelCfg").fields,function(J){return O._createScale(J)}),Z=G.addGroup(K,{_id:this.get("_id"),labelCfg:h.mix({scales:U},O.get("labelCfg")),coord:F,geom:O,geomType:L,yScale:O.getYScale(),viewTheme:H,visible:O.get("visible")});Z.showLabels(P,A),O.set("labelContainer",Z)},x.getShapeFactory=function(){var P=this.get("shapeFactory");if(!P){var A=this.get("shapeType");P=a.getShapeFactory(A),this.set("shapeFactory",P)}return P},x._generatePoints=function(P){for(var A=this,O=A.getShapeFactory(),L=A.getAttr("shape"),H=0;H<P.length;H++){var F=P[H],K=A.createShapePointsCfg(F),G=L?A._getAttrValues(L,F):null,U=O.getShapePoints(G,K);F.points=U}},x.createShapePointsCfg=function(P){var A=this.getXScale(),O=this.getYScale(),L=this._normalizeValues(P[A.field],A),H;return O?H=this._normalizeValues(P[O.field],O):H=P.y?P.y:.1,{x:L,y:H,y0:O?O.scale(this.getYMinValue()):void 0}},x.getYMinValue=function(){var P=this.getYScale(),A=P.min,O=P.max,L;return A>=0?L=A:O<=0?L=O:L=0,L},x._normalizeValues=function(P,A){var O=[];if(h.isArray(P))for(var L=0;L<P.length;L++){var H=P[L];O.push(A.scale(H))}else O=A.scale(P);return O},x._mapping=function(P){for(var A=this,O=A.get("attrs"),L=[],H=0;H<P.length;H++){var F=P[H],K={};K[g]=F[g],K.points=F.points,K.nextPoints=F.nextPoints;for(var G in O)if(O.hasOwnProperty(G)){var U=O[G],Z=U.names,J=A._getAttrValues(U,F);if(Z.length>1)for(var rt=0;rt<J.length;rt++){var vt=J[rt],mt=Z[rt];K[mt]=h.isArray(vt)&&vt.length===1?vt[0]:vt}else K[Z[0]]=J.length===1?J[0]:J}L.push(K)}return L},x._getAttrValues=function(P,A){for(var O=P.scales,L=[],H=0;H<O.length;H++){var F=O[H],K=F.field;F.type==="identity"?L.push(F.value):L.push(A[K])}var G=P.mapping.apply(P,L);return G},x.getAttrValue=function(P,A){var O=this.getAttr(P),L=null;if(O){var H=this._getAttrValues(O,A);L=H[0]}return L},x.getDefaultValue=function(P){var A=this.get(P),O=this.getAttr(P);if(O){var L=O.getScale(P);L.type==="identity"&&(A=L.value)}return A},x.draw=function(P,A,O,L){for(var H=this,F=0;F<P.length;F++){var K=P[F];H.drawPoint(K,A,O,L+F)}},x.getCallbackCfg=function(P,A,O){if(!P)return A;var L={},H=P.map(function(F){return O[F]});return h.each(A,function(F,K){h.isFunction(F)?L[K]=F.apply(null,H):L[K]=F}),L},x._getShapeId=function(P){var A=this.get("_id"),O=this.get("keyFields");if(O&&O.length>0)h.each(O,function(rt){A+="-"+P[rt]});else{var L=this.get("type"),H=this.getXScale(),F=this.getYScale(),K=H.field||"x",G=F.field||"y",U=P[G],Z;H.isIdentity?Z=H.value:Z=P[K],L==="interval"||L==="schema"?A+="-"+Z:L==="line"||L==="area"||L==="path"?A+="-"+L:A+="-"+Z+"-"+U;var J=this._getGroupScales();h.isEmpty(J)||h.each(J,function(rt){var vt=rt.field;rt.type!=="identity"&&(A+="-"+P[vt])})}return A},x.getDrawCfg=function(P){var A=this,O={origin:P,x:P.x,y:P.y,color:P.color,size:P.size,shape:P.shape,isInCircle:A.isInCircle(),opacity:P.opacity},L=A.get("styleOptions");return L&&L.style&&(O.style=A.getCallbackCfg(L.fields,L.style,P[g])),A.get("generatePoints")&&(O.points=P.points,O.nextPoints=P.nextPoints),A.get("animate")&&(O._id=A._getShapeId(P[g])),O},x.appendShapeInfo=function(P,A){P&&(P.setSilent("index",A),P.setSilent("coord",this.get("coord")),this.get("animate")&&this.get("animateCfg")&&P.setSilent("animateCfg",this.get("animateCfg")))},x._applyViewThemeShapeStyle=function(P,A,O){var L=this,H=L.viewTheme||n,F=O.name;A?A&&(A.indexOf("hollow")>-1||A.indexOf("liquid")>-1)&&(F="hollow"+h.upperFirst(F)):O.defaultShapeType.indexOf("hollow")>-1&&(F="hollow"+h.upperFirst(F));var K=H.shape[F]||{};P.style=h.mix({},K,P.style)},x.drawPoint=function(P,A,O,L){var H=this,F=P.shape,K=H.getDrawCfg(P);H._applyViewThemeShapeStyle(K,F,O);var G=O.drawShape(F,K,A);H.appendShapeInfo(G,L)},x.getAttr=function(P){return this.get("attrs")[P]},x.getXScale=function(){return this.getAttr("position").scales[0]},x.getYScale=function(){return this.getAttr("position").scales[1]},x.getShapes=function(){var P=[],A=this.get("shapeContainer"),O=A.get("children");return h.each(O,function(L){L.get("origin")&&P.push(L)}),P},x.getAttrsForLegend=function(){var P=this.get("attrs"),A=[];return h.each(P,function(O){b.includes(O.type)&&A.push(O)}),A},x.getFieldsForLegend=function(){var P=[],A=this.get("attrOptions");return h.each(b,function(O){var L=A[O];L&&L.field&&h.isString(L.field)&&(P=P.concat(L.field.split("*")))}),h.uniq(P)},x.changeVisible=function(P,A){var O=this;O.set("visible",P);var L=this.get("shapeContainer");L&&L.set("visible",P);var H=this.get("labelContainer");if(H&&H.set("visible",P),!A&&L){var F=L.get("canvas");F.draw()}},x.reset=function(){this.set("attrOptions",{}),this.clearInner()},x.clearInner=function(){this.clearActivedShapes(),this.clearSelected();var P=this.get("shapeContainer");P&&P.clear();var A=this.get("labelContainer");A&&A.remove(),this.set("attrs",{}),this.set("groupScales",null),this.set("labelContainer",null),this.set("xDistance",null),this.set("isStacked",null)},x.clear=function(){this.clearInner(),this.set("scales",{})},x.destroy=function(){this.clear();var P=this.get("shapeContainer");P&&P.remove(),this.offEvents(),M.prototype.destroy.call(this)},x.bindEvents=function(){this.get("view")&&(this._bindActiveAction(),this._bindSelectedAction())},x.offEvents=function(){this.get("view")&&(this._offActiveAction(),this._offSelectedAction())},y}(r);E.exports=_},function(E,T,e){var t=e(0),u=e(25),s=t.PathUtil,c={},r={_coord:null,draw:function(i,a){return this.drawShape?this.drawShape(i,a):null},setCoord:function(i){this._coord=i},parsePath:function(i,a){var o=this._coord;return i=s.parsePathString(i),o.isPolar&&a!==!1?i=u.convertPolarPath(o,i):i=u.convertNormalPath(o,i),i},parsePoint:function(i){var a=this._coord;return a.convertPoint(i)},parsePoints:function(i){var a=this._coord,o=[];return t.each(i,function(l){o.push(a.convertPoint(l))}),o}},h={defaultShapeType:null,setCoord:function(i){this._coord=i},getShape:function(i){var a=this;t.isArray(i)&&(i=i[0]);var o=a[i]||a[a.defaultShapeType];return o._coord=a._coord,o},getShapePoints:function(i,a){var o=this.getShape(i),l=o.getPoints||o.getShapePoints||this.getDefaultPoints,f=l(a);return f},getDefaultPoints:function(){return[]},getMarkerCfg:function(i,a){var o=this.getShape(i);if(!o.getMarkerCfg){var l=this.defaultShapeType;o=this.getShape(l)}return o.getMarkerCfg(a)},getSelectedCfg:function(){return{}},drawShape:function(i,a,o){var l=this.getShape(i),f=l.draw(a,o);return f&&(f.setSilent("origin",a.origin),f._id=a.yIndex?a._id+a.yIndex:a._id,f.name=this.name),f}};c.registerFactory=function(n,i){var a=t.upperFirst(n),o=t.assign({},h,i);return c[a]=o,o.name=n,o},c.registerShape=function(n,i,a){var o=t.upperFirst(n),l=c[o],f=t.assign({},r,a);return l[i]=f,f},c.getShapeFactory=function(n){var i=this;n=n||"point";var a=t.upperFirst(n);return i[a]},E.exports=c},function(E,T){function e(u,s){for(var c in s)s.hasOwnProperty(c)&&c!=="constructor"&&s[c]!==void 0&&(u[c]=s[c])}var t=function(s,c,r,h){return c&&e(s,c),r&&e(s,r),h&&e(s,h),s};E.exports=t},function(E,T,e){var t=e(17),u=function(c){return t(c,"Number")};E.exports=u},function(E,T,e){"use strict";var t=e(89);e.d(T,"f",function(){return t.h}),e.d(T,"e",function(){return t.g}),e.d(T,"d",function(){return t.f});var u=e(440);e.d(T,"c",function(){return u.b}),e.d(T,"b",function(){return u.a});var s=e(439);e.d(T,"a",function(){return s.a})},function(E,T,e){"use strict";e.d(T,"d",function(){return h}),e.d(T,"a",function(){return n}),e.d(T,"b",function(){return o}),e.d(T,"c",function(){return l}),T.g=f,T.e=v,T.f=b;var t=e(442),u=e(103),s=e.i(t.a)("start","end","cancel","interrupt"),c=[],r=0,h=1,n=2,i=3,a=4,o=5,l=6;T.h=function(m,_,M,x,y,S){var P=m.__transition;if(!P)m.__transition={};else if(M in P)return;g(m,M,{name:_,index:x,group:y,on:s,tween:c,time:S.time,delay:S.delay,duration:S.duration,ease:S.ease,timer:null,state:r})};function f(m,_){var M=b(m,_);if(M.state>r)throw new Error("too late; already scheduled");return M}function v(m,_){var M=b(m,_);if(M.state>i)throw new Error("too late; already running");return M}function b(m,_){var M=m.__transition;if(!M||!(M=M[_]))throw new Error("transition not found");return M}function g(m,_,M){var x=m.__transition,y;x[_]=M,M.timer=e.i(u.timer)(S,0,M.time);function S(L){M.state=h,M.timer.restart(P,M.delay,M.time),M.delay<=L&&P(L-M.delay)}function P(L){var H,F,K,G;if(M.state!==h)return O();for(H in x)if(G=x[H],G.name===M.name){if(G.state===i)return e.i(u.timeout)(P);G.state===a?(G.state=l,G.timer.stop(),G.on.call("interrupt",m,m.__data__,G.index,G.group),delete x[H]):+H<_&&(G.state=l,G.timer.stop(),G.on.call("cancel",m,m.__data__,G.index,G.group),delete x[H])}if(e.i(u.timeout)(function(){M.state===i&&(M.state=a,M.timer.restart(A,M.delay,M.time),A(L))}),M.state=n,M.on.call("start",m,m.__data__,M.index,M.group),M.state===n){for(M.state=i,y=new Array(K=M.tween.length),H=0,F=-1;H<K;++H)(G=M.tween[H].value.call(m,m.__data__,M.index,M.group))&&(y[++F]=G);y.length=F+1}}function A(L){for(var H=L<M.duration?M.ease.call(null,L/M.duration):(M.timer.restart(O),M.state=o,1),F=-1,K=y.length;++F<K;)y[F].call(m,H);M.state===o&&(M.on.call("end",m,m.__data__,M.index,M.group),O())}function O(){M.state=l,M.timer.stop(),delete x[_];for(var L in x)return;delete m.__transition}}},function(E,T,e){var t=e(17),u=function(c){return t(c,"Function")};E.exports=u},function(E,T,e){var t=e(17),u=function(c){return t(c,"String")};E.exports=u},function(E,T,e){var t=e(31);E.exports=t},function(E,T){var e={}.toString,t=function(s,c){return e.call(s)==="[object "+c+"]"};E.exports=t},function(E,T,e){"use strict";e.d(T,"c",function(){return J}),T.b=rt;var t=e(505),u=e(506),s=e(493),c=e(487),r=e(216),h=e(492),n=e(496),i=e(498),a=e(501),o=e(508),l=e(484),f=e(500),v=e(499),b=e(507),g=e(491),m=e(490),_=e(483),M=e(218),x=e(502),y=e(485),S=e(509),P=e(494),A=e(503),O=e(497),L=e(482),H=e(495),F=e(504),K=e(486),G=e(488),U=e(99),Z=e(489),J=[null];function rt(mt,ut){this._groups=mt,this._parents=ut}function vt(){return new rt([[document.documentElement]],J)}rt.prototype=vt.prototype={constructor:rt,select:t.a,selectAll:u.a,filter:s.a,data:c.a,enter:r.a,exit:h.a,join:n.a,merge:i.a,order:a.a,sort:o.a,call:l.a,nodes:f.a,node:v.a,size:b.a,empty:g.a,each:m.a,attr:_.a,style:M.b,property:x.a,classed:y.a,text:S.a,html:P.a,raise:A.a,lower:O.a,append:L.a,insert:H.a,remove:F.a,clone:K.a,datum:G.a,on:U.c,dispatch:Z.a},T.a=vt},function(E,T){E.exports={FONT_FAMILY:'"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"'}},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var g=r(this).constructor;b=Reflect.construct(v,arguments,g)}else b=v.apply(this,arguments);return u(this,b)}}function u(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(3),i=e(109),a=e(36),o=["min","max","median","start","end"],l=function(f){h(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var g=b.prototype;return g.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return n.mix({},_,{xScales:null,yScales:null,el:null})},g.render=function(){},g.clear=function(){var _=this,M=_.get("el");M&&M.remove(),this.set("el",null)},g.destroy=function(){this.clear(),f.prototype.destroy.call(this)},g.changeVisible=function(_){var M=this;M.set("visible",_);var x=M.get("el");!x||(x.set?x.set("visible",_):x.style.display=_?"":"none")},g.parsePoint=function(_,M){var x=this,y=x.get("xScales"),S=x.get("yScales");n.isFunction(M)&&(M=M(y,S));var P,A;if(n.isArray(M)&&n.isString(M[0])&&M[0].indexOf("%")!==-1)return this._parsePercentPoint(_,M);if(n.isArray(M))P=x._getNormalizedValue(M[0],i.getFirstScale(y)),A=x._getNormalizedValue(M[1],i.getFirstScale(S));else for(var O in M){var L=M[O];y[O]&&(P=x._getNormalizedValue(L,y[O])),S[O]&&(A=x._getNormalizedValue(L,S[O],"y"))}return!n.isNil(P)&&!n.isNil(A)&&!isNaN(P)&&!isNaN(A)?_.convert({x:P,y:A}):null},g._getNormalizedValue=function(_,M){var x;if(n.indexOf(o,_)!==-1){var y;_==="start"?x=0:_==="end"?x=1:_==="median"?(y=M.isCategory?(M.values.length-1)/2:(M.min+M.max)/2,x=M.scale(y)):(M.isCategory?y=_==="min"?0:M.values.length-1:y=M[_],x=M.scale(y))}else x=M.scale(_);return x},g._parsePercentPoint=function(_,M){var x=parseFloat(M[0])/100,y=parseFloat(M[1])/100,S=_.start,P=_.end,A={x:Math.min(S.x,P.x),y:Math.min(S.y,P.y)},O=_.width*x+A.x,L=_.height*y+A.y;return{x:O,y:L}},b}(a);E.exports=l},function(E,T){var e=function(u){return u!==null&&typeof u!="function"&&isFinite(u.length)};E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(478);e.d(T,"create",function(){return t.a});var u=e(61);e.d(T,"creator",function(){return u.a});var s=e(479);e.d(T,"local",function(){return s.a});var c=e(214);e.d(T,"matcher",function(){return c.a});var r=e(480);e.d(T,"mouse",function(){return r.a});var h=e(97);e.d(T,"namespace",function(){return h.a});var n=e(98);e.d(T,"namespaces",function(){return n.a});var i=e(62);e.d(T,"clientPoint",function(){return i.a});var a=e(215);e.d(T,"select",function(){return a.a});var o=e(481);e.d(T,"selectAll",function(){return o.a});var l=e(18);e.d(T,"selection",function(){return l.a});var f=e(100);e.d(T,"selector",function(){return f.a});var v=e(219);e.d(T,"selectorAll",function(){return v.a});var b=e(218);e.d(T,"style",function(){return b.a});var g=e(510);e.d(T,"touch",function(){return g.a});var m=e(511);e.d(T,"touches",function(){return m.a});var _=e(102);e.d(T,"window",function(){return _.a});var M=e(99);e.d(T,"event",function(){return M.a}),e.d(T,"customEvent",function(){return M.b})},function(E,T,e){var t=e(0),u={splitPoints:function(c){var r=[],h=c.x,n=c.y;return n=t.isArray(n)?n:[n],t.each(n,function(i,a){var o={x:t.isArray(h)?h[a]:h,y:i};r.push(o)}),r},addFillAttrs:function(c,r){r.color&&(c.fill=r.color),t.isNumber(r.opacity)&&(c.opacity=c.fillOpacity=r.opacity)},addStrokeAttrs:function(c,r){r.color&&(c.stroke=r.color),t.isNumber(r.opacity)&&(c.opacity=c.strokeOpacity=r.opacity)}};E.exports=u},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function f(v,b){for(var g=0;g<b.length;g++){var m=b[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,b,g){return b&&f(v.prototype,b),g&&f(v,g),v}}(),u=e(42),s=h(u),c=e(29),r=h(c);function h(f){return f&&f.__esModule?f:{default:f}}function n(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")}function i(f,v){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:f}function a(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(f,v):f.__proto__=v)}var o=function(f){a(v,f);function v(b,g){n(this,v);var m=i(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b));return m.getParentInfo=function(){return{id:m.id,name:m.name}},m.name=g,m}return t(v,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.context.getViewId}}},{key:"componentWillMount",value:function(){var g=this.context;this.id=g.createId(),g.addElement(this.name,this.id,this.props,g.getParentInfo(),g.getViewId())}},{key:"componentWillReceiveProps",value:function(g){this.context.updateElement(this.name,this.id,g,this.context.getParentInfo(),this.context.getViewId())}},{key:"componentWillUnmount",value:function(){this.context.deleteElement(this.name,this.id)}},{key:"render",value:function(){var g=this.props.children;return g?g.length&&(g=s.default.createElement("div",null,g)):g=null,g}}]),v}(u.Component);o.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},o.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func};function l(f){var v=function(b){a(g,b);function g(m){return n(this,g),i(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,m,f))}return t(g,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.context.getViewId}}}]),g}(o);return v.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},v.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},v.displayName=f,v}o.generateBaseTypedComponent=l,T.default=o},function(E,T,e){var t=e(0),u=e(314);function s(a,o){if(!a.length)return[];for(var l=[],f=0,v=a.length;f<v;f++){var b=a[f];f===0?l.push(["M",b.x,b.y]):l.push(["L",b.x,b.y])}return o&&l.push(["Z"]),l}function c(a,o){var l=a.getCenter(),f=Math.sqrt(Math.pow(o.x-l.x,2)+Math.pow(o.y-l.y,2));return f}function r(a,o){for(var l=a.length,f=[a[0]],v=1;v<l;v=v+2){var b=o.convertPoint({x:a[v],y:a[v+1]});f.push(b.x,b.y)}return f}function h(a,o,l){var f=l.isTransposed,v=l.startAngle,b=l.endAngle,g={x:a[1],y:a[2]},m={x:o[1],y:o[2]},_=[],M=f?"y":"x",x=Math.abs(m[M]-g[M])*(b-v),y=m[M]>=g[M]?1:0,S=x>Math.PI?1:0,P=l.convertPoint(m),A=c(l,P);if(A>=.5)if(x===Math.PI*2){var O={x:(m.x+g.x)/2,y:(m.y+g.y)/2},L=l.convertPoint(O);_.push(["A",A,A,0,S,y,L.x,L.y]),_.push(["A",A,A,0,S,y,P.x,P.y])}else _.push(["A",A,A,0,S,y,P.x,P.y]);return _}function n(a){t.each(a,function(o,l){var f=o;if(f[0].toLowerCase()==="a"){var v=a[l-1],b=a[l+1];b&&b[0].toLowerCase()==="a"?v&&v[0].toLowerCase()==="l"&&(v[0]="M"):v&&v[0].toLowerCase()==="a"&&b&&b[0].toLowerCase()==="l"&&(b[0]="M")}})}var i={getLinePath:function(o,l){return s(o,l)},getSplinePath:function(o,l,f){var v=[],b=o[0],g=null;if(o.length<=2)return i.getLinePath(o,l);t.each(o,function(_){(!g||!(g.x===_.x&&g.y===_.y))&&(v.push(_.x),v.push(_.y),g=_)}),f=f||[[0,0],[1,1]];var m=u.catmullRom2bezier(v,l,f);return m.unshift(["M",b.x,b.y]),m},getPointRadius:function(o,l){var f=c(o,l);return f},getPointAngle:function(o,l){var f=o.getCenter(),v=Math.atan2(l.y-f.y,l.x-f.x);return v},convertNormalPath:function(o,l){var f=[];return t.each(l,function(v){var b=v[0];switch(b.toLowerCase()){case"m":case"l":case"c":f.push(r(v,o));break;case"z":default:f.push(v);break}}),f},convertPolarPath:function(o,l){var f=[],v,b,g,m;return t.each(l,function(_,M){var x=_[0];switch(x.toLowerCase()){case"m":case"c":case"q":f.push(r(_,o));break;case"l":v=l[M-1],b=_,g=o.isTransposed,m=g?v[v.length-2]===b[1]:v[v.length-1]===b[2],m?f=f.concat(h(v,b,o)):f.push(r(_,o));break;case"z":default:f.push(_);break}}),n(f),f}};E.exports=i},function(E,T,e){var t=e(10),u=e(2),s=e(39),c=e(6),r=function(){var h=n.prototype;h._initDefaultCfg=function(){this.type="base",this.formatter=null,this.range=[0,1],this.ticks=null,this.values=[]};function n(i){this._initDefaultCfg(),t(this,i),this.init()}return h.init=function(){},h.getTicks=function(){var a=this,o=a.ticks,l=[];return u(o,function(f){var v;s(f)?v=f:v={text:a.getText(f),tickValue:f,value:a.scale(f)},l.push(v)}),l},h.getText=function(a,o){var l=this.formatter;return a=l?l(a,o):a,(c(a)||!a.toString)&&(a=""),a.toString()},h.rangeMin=function(){return this.range[0]},h.rangeMax=function(){var a=this.range;return a[a.length-1]},h.invert=function(a){return a},h.translate=function(a){return a},h.scale=function(a){return a},h.clone=function(){var a=this,o=a.constructor,l={};return u(a,function(f,v){l[v]=a[v]}),new o(l)},h.change=function(a){return this.ticks=null,t(this,a),this.init(),this},n}();E.exports=r},function(E,T,e){"use strict";T.b=P,T.a=A,T.c=O;var t=e(22),u=e(519),s=e(520),c=e(521),r=e(522),h=e(523),n=e(525),i=e(526),a=e(527),o=e(528),l=e(529),f=e(530),v=e(531),b=e(532),g=e(533),m=e(534),_=e(535),M=e(536),x=e(63),y=e(524),S=0;function P(H,F,K,G){this._groups=H,this._parents=F,this._name=K,this._id=G}function A(H){return e.i(t.selection)().transition(H)}function O(){return++S}var L=t.selection.prototype;P.prototype=A.prototype={constructor:P,select:l.a,selectAll:f.a,filter:n.a,merge:i.a,selection:v.a,transition:M.a,call:L.call,nodes:L.nodes,node:L.node,size:L.size,empty:L.empty,each:L.each,on:a.a,attr:u.a,attrTween:s.a,style:b.a,styleTween:g.a,text:m.a,textTween:_.a,remove:o.a,tween:x.a,delay:c.a,duration:r.a,ease:h.a,end:y.a}},function(E,T,e){var t=e(0),u=t.DomUtil,s=["start","process","end","reset"],c=function(){var r=h.prototype;r.getDefaultCfg=function(){return{startEvent:"mousedown",processEvent:"mousemove",endEvent:"mouseup",resetEvent:"dblclick"}},r._start=function(i){var a=this;a.preStart&&a.preStart(i),a.start(i),a.onStart&&a.onStart(i)},r._process=function(i){var a=this;a.preProcess&&a.preProcess(i),a.process(i),a.onProcess&&a.onProcess(i)},r._end=function(i){var a=this;a.preEnd&&a.preEnd(i),a.end(i),a.onEnd&&a.onEnd(i)},r._reset=function(i){var a=this;a.preReset&&a.preReset(i),a.reset(i),a.onReset&&a.onReset(i)},r.start=function(){},r.process=function(){},r.end=function(){},r.reset=function(){};function h(n,i){var a=this,o=a.getDefaultCfg();t.assign(a,o,n),a.view=a.chart=i,a.canvas=i.get("canvas"),a._bindEvents()}return r._bindEvents=function(){var i=this,a=i.canvas,o=a.get("canvasDOM");i._clearEvents(),t.each(s,function(l){var f=t.upperFirst(l);i["_on"+f+"Listener"]=u.addEventListener(o,i[l+"Event"],t.wrapBehavior(i,"_"+l))})},r._clearEvents=function(){var i=this;t.each(s,function(a){var o="_on"+t.upperFirst(a)+"Listener";i[o]&&i[o].remove()})},r.destroy=function(){this._clearEvents()},h}();E.exports=c},function(E,T,e){var t=e(224),u=!0;E.exports=e(541)(t.isElement,u)},function(E,T,e){E.exports={Axis:e(240),Component:e(66),Guide:e(248),Label:e(252),Legend:e(258),Tooltip:e(263)}},function(E,T,e){E.exports={Canvas:e(328),Group:e(134),Shape:e(7),Arc:e(136),Circle:e(137),Dom:e(138),Ellipse:e(139),Fan:e(140),Image:e(141),Line:e(142),Marker:e(74),Path:e(145),Polygon:e(146),Polyline:e(147),Rect:e(148),Text:e(149),PathSegment:e(50),PathUtil:e(77),Event:e(135),version:"3.3.6"}},function(E,T,e){"use strict";T.b=c,T.c=r,T.a=h;var t=e(209);function u(n,i){return function(a){return n+a*i}}function s(n,i,a){return n=Math.pow(n,a),i=Math.pow(i,a)-n,a=1/a,function(o){return Math.pow(n+o*i,a)}}function c(n,i){var a=i-n;return a?u(n,a>180||a<-180?a-360*Math.round(a/360):a):e.i(t.a)(isNaN(n)?i:n)}function r(n){return(n=+n)==1?h:function(i,a){return a-i?s(i,a,n):e.i(t.a)(isNaN(i)?a:i)}}function h(n,i){var a=i-n;return a?u(n,a):e.i(t.a)(isNaN(n)?i:n)}},function(E,T,e){var t=e(10),u=function(){var s=c.prototype;s._initDefaultCfg=function(){this.adjustNames=["x","y"]};function c(r){this._initDefaultCfg(),t(this,r)}return s.processAdjust=function(){},c}();E.exports=u},function(E,T,e){var t=e(15),u=e(4),s=e(6),c=e(10),r=e(2);function h(i,a){return t(a)?a:i.invert(i.scale(a))}var n=function(){function i(o){var l=this;this.type="base",this.name=null,this.method=null,this.values=[],this.scales=[],this.linear=null;var f=null,v=this.callback;if(o.callback){var b=o.callback;f=function(){for(var m=arguments.length,_=new Array(m),M=0;M<m;M++)_[M]=arguments[M];var x=b.apply(void 0,_);return s(x)&&(x=v.apply(l,_)),x}}c(this,o),f&&c(this,{callback:f})}var a=i.prototype;return a._getAttrValue=function(l,f){var v=this.values;if(l.isCategory&&!this.linear){var b=l.translate(f);return v[b%v.length]}var g=l.scale(f);return this.getLinearValue(g)},a.getLinearValue=function(l){var f=this.values,v=f.length-1,b=Math.floor(v*l),g=v*l-b,m=f[b],_=b===v?m:f[b+1],M=m+(_-m)*g;return M},a.callback=function(l){var f=this,v=f.scales[0],b=null;return v.type==="identity"?b=v.value:b=f._getAttrValue(v,l),b},a.getNames=function(){for(var l=this.scales,f=this.names,v=Math.min(l.length,f.length),b=[],g=0;g<v;g++)b.push(f[g]);return b},a.getFields=function(){var l=this.scales,f=[];return r(l,function(v){f.push(v.field)}),f},a.getScale=function(l){var f=this.scales,v=this.names,b=v.indexOf(l);return f[b]},a.mapping=function(){for(var l=this.scales,f=this.callback,v=arguments.length,b=new Array(v),g=0;g<v;g++)b[g]=arguments[g];var m=b;if(f){for(var _=0,M=b.length;_<M;_++)b[_]=this._toOriginParam(b[_],l[_]);m=f.apply(this,b)}return m=[].concat(m),m},a._toOriginParam=function(l,f){var v=l;if(!f.isLinear)if(u(l)){v=[];for(var b=0,g=l.length;b<g;b++)v.push(h(f,l[b]))}else v=h(f,l);return v},i}();E.exports=n},function(E,T,e){function t(b){return function(){var g=r(b),m;if(c()){var _=r(this).constructor;m=Reflect.construct(g,arguments,_)}else m=g.apply(this,arguments);return u(this,m)}}function u(b,g){return g&&(typeof g=="object"||typeof g=="function")?g:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},r(b)}function h(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var n=e(36),i=e(3),a=e(108),o=e(110),l=e(19),f=l.FONT_FAMILY,v=function(b){h(m,b);var g=t(m);function m(){return b.apply(this,arguments)||this}var _=m.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return i.mix({},x,{_id:null,zIndex:4,ticks:null,line:null,tickLine:null,subTickCount:0,subTickLine:null,grid:null,label:{offset:0,offsetX:0,offsetY:0,textStyle:{},autoRotate:!0,autoHide:!1,formatter:null},labelItems:[],title:{autoRotate:!0,textStyle:{}},autoPaint:!0})},_.beforeRender=function(){var x=this,y=x.get("title"),S=x.get("label"),P=x.get("grid");y&&x.set("title",i.deepMix({autoRotate:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:f,textAlign:"center"},offset:48},y)),S&&x.set("label",i.deepMix({autoRotate:!0,autoHide:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:f},offset:10},S)),P&&x.set("grid",i.deepMix({lineStyle:{lineWidth:1,stroke:"#C0D0E0"}},P))},_.render=function(){var x=this;x.beforeRender();var y=x.get("label");y&&x.renderLabels(),x.get("autoPaint")&&x.paint(),i.isNil(x.get("title"))||x.renderTitle(),x.get("group").sort()},_.renderLabels=function(){var x=this,y=x.get("group"),S=x.get("label"),P=new o({name:"axis-label"});x.set("labelRenderer",P),P.set("labelCfg",S);var A=["formatter","htmlTemplate","labelLine","textStyle","useHtml"];i.each(A,function(O){S[O]&&P.set(O,S[O])}),P.set("coord",x.get("coord")),P.set("group",y.addGroup()),P.set("canvas",x.get("canvas"))},_._parseTicks=function(x){x=x||[];for(var y=x.length,S=0;S<y;S++){var P=x[S];i.isObject(P)||(x[S]=this.parseTick(P,S,y))}return this.set("ticks",x),x},_._addTickItem=function(x,y,S,P){P===void 0&&(P="");var A=this.get("tickItems"),O=this.get("subTickItems"),L=this.getTickEnd(y,S,x),H={x1:y.x,y1:y.y,x2:L.x,y2:L.y};A||(A=[]),O||(O=[]),P==="sub"?O.push(H):A.push(H),this.set("tickItems",A),this.set("subTickItems",O)},_._renderLine=function(){var x=this,y=x.get("line"),S;if(y){S=x.getLinePath(),y=i.mix({path:S},y);var P=x.get("group"),A=P.addShape("path",{attrs:y});A.name="axis-line",x.get("appendInfo")&&A.setSilent("appendInfo",x.get("appendInfo")),x.set("lineShape",A)}},_._processCatTicks=function(){var x=this,y=x.get("label"),S=x.get("tickLine"),P=x.get("ticks");P=x._parseTicks(P);for(var A=x._getNormalizedTicks(P),O=0;O<A.length;O+=3){var L=x.getTickPoint(A[O]),H=x.getTickPoint(A[O+1]),F=x.getTickPoint(A[O+2]),K=Math.floor(O/3),G=P[K];S&&(K===0&&x._addTickItem(K,H,S.length),x._addTickItem(K,F,S.length)),y&&x.addLabel(G,L,K)}},_._getNormalizedTicks=function(x){var y=0;x.length>1&&(y=(x[1].value-x[0].value)/2);for(var S=[],P=0;P<x.length;P++){var A=x[P],O=A.value,L=A.value-y,H=A.value+y;S.push(O,L,H)}var F=i.arrayUtil.getRange(S);return S.map(function(K){var G=(K-F.min)/(F.max-F.min);return G})},_.addLabel=function(x,y,S){var P=this,A=P.get("labelItems"),O=P.get("labelRenderer"),L=i.deepMix({},P.get("label")),H;if(O){var F=P.get("_labelOffset");i.isNil(P.get("label").offset)||(F=P.get("label").offset);var K=P.getSideVector(F,y,S);y={x:y.x+K[0]+L.offsetX,y:y.y+K[1]+L.offsetY},L.text=x.text,L.x=y.x,L.y=y.y,L.point=y,L.textAlign=P.getTextAnchor(K),y.rotate&&(L.rotate=y.rotate),A.push(L)}return H},_._processTicks=function(){var x=this,y=x.get("label"),S=x.get("subTickCount"),P=x.get("tickLine"),A=x.get("ticks");if(A=x._parseTicks(A),i.each(A,function(L,H){var F=x.getTickPoint(L.value,H);P&&x._addTickItem(H,F,P.length),y&&x.addLabel(L,F,H)}),S){var O=x.get("subTickLine");i.each(A,function(L,H){if(H>0){var F=L.value-A[H-1].value;F=F/(x.get("subTickCount")+1);for(var K=1;K<=S;K++){var G={text:"",value:H?A[H-1].value+K*F:K*F},U=x.getTickPoint(G.value),Z=void 0;O&&O.length?Z=O.length:Z=parseInt(P.length*(3/5),10),x._addTickItem(K-1,U,Z,"sub")}}})}},_._addTickLine=function(x,y){var S=this,P=i.mix({},y),A=[];i.each(x,function(H){A.push(["M",H.x1,H.y1]),A.push(["L",H.x2,H.y2])}),delete P.length,P.path=A;var O=S.get("group"),L=O.addShape("path",{attrs:P});L.name="axis-ticks",L._id=S.get("_id")+"-ticks",L.set("coord",S.get("coord")),S.get("appendInfo")&&L.setSilent("appendInfo",S.get("appendInfo"))},_._renderTicks=function(){var x=this,y=x.get("tickItems"),S=x.get("subTickItems");if(!i.isEmpty(y)){var P=x.get("tickLine");x._addTickLine(y,P)}if(!i.isEmpty(S)){var A=x.get("subTickLine")||x.get("tickLine");x._addTickLine(S,A)}},_._renderGrid=function(){var x=this.get("grid");if(!!x){x.coord=this.get("coord"),x.appendInfo=this.get("appendInfo");var y=this.get("group");this.set("gridGroup",y.addGroup(a,x))}},_._renderLabels=function(){var x=this,y=x.get("labelRenderer"),S=x.get("labelItems");y&&(y.set("items",S),y._dryDraw())},_.paint=function(){var x=this,y=x.get("tickLine"),S=!0;y&&y.hasOwnProperty("alignWithLabel")&&(S=y.alignWithLabel),x._renderLine();var P=x.get("type"),A=P==="cat"||P==="timeCat";A&&S===!1?x._processCatTicks():x._processTicks(),x._renderTicks(),x._renderGrid(),x._renderLabels();var O=this.get("label");O&&O.autoRotate&&x.autoRotateLabels(),O&&O.autoHide&&x.autoHideLabels()},_.parseTick=function(x,y,S){return{text:x,value:y/(S-1)}},_.getTextAnchor=function(x){var y=Math.abs(x[1]/x[0]),S;return y>=1?S="center":x[0]>0?S="start":S="end",S},_.getMaxLabelWidth=function(x){var y=x.getLabels(),S=0;return i.each(y,function(P){var A=P.getBBox(),O=A.width;S<O&&(S=O)}),S},_.getMaxLabelHeight=function(x){var y=x.getLabels(),S=0;return i.each(y,function(P){var A=P.getBBox(),O=A.height;S<O&&(S=O)}),S},_.destroy=function(){var x=this;if(!x.destroyed){var y=x.get("gridGroup");y&&y.remove();var S=this.get("labelRenderer");S&&S.destroy();var P=x.get("group");P.destroy(),b.prototype.destroy.call(this)}},_.clear=function(){var x=this,y=x.get("group");if(!y.get("destroyed")&&y.get("children").length){var S=x.get("gridGroup");S&&S.clear();var P=this.get("labelRenderer");P&&P.clear();var A=x.get("group");A.clear()}},_.autoRotateLabels=function(){},_.autoHideLabels=function(){},_.renderTitle=function(){},_.getLinePath=function(){},_.getTickPoint=function(){},_.getTickEnd=function(){},_.getSideVector=function(){},m}(n);E.exports=v},function(E,T,e){function t(a){return function(){var o=r(a),l;if(c()){var f=r(this).constructor;l=Reflect.construct(o,arguments,f)}else l=o.apply(this,arguments);return u(this,l)}}function u(a,o){return o&&(typeof o=="object"||typeof o=="function")?o:s(a)}function s(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function r(a){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},r(a)}function h(a,o){a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o}var n=e(66),i=function(a){h(l,a);var o=t(l);function l(){return a.apply(this,arguments)||this}var f=l.prototype;return f.getDefaultCfg=function(){return{_id:null,canvas:null,container:null,group:null,capture:!1,coord:null,offset:[0,0],plotRange:null,position:[0,0],visible:!0,zIndex:1}},f._init=function(){},f.clear=function(){},f.destroy=function(){a.prototype.destroy.call(this)},f.beforeRender=function(){},f.render=function(){},f.afterRender=function(){},f.beforeDraw=function(){},f.draw=function(){},f.afterDraw=function(){},f.show=function(){},f.hide=function(){},f.setOffset=function(){},f.setPosition=function(){},f.setVisible=function(){},f.setZIndex=function(){},l}(n);E.exports=i},function(E,T,e){var t=e(1),u=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,s=/[^\s\,]+/ig,c={};E.exports={parseRadius:function(h){var n=0,i=0,a=0,o=0;return t.isArray(h)?h.length===1?n=i=a=o=h[0]:h.length===2?(n=a=h[0],i=o=h[1]):h.length===3?(n=h[0],i=o=h[1],a=h[2]):(n=h[0],i=h[1],a=h[2],o=h[3]):n=i=a=o=h,{r1:n,r2:i,r3:a,r4:o}},parsePath:function(h){if(h=h||[],t.isArray(h))return h;if(t.isString(h))return h=h.match(u),t.each(h,function(n,i){if(n=n.match(s),n[0].length>1){var a=n[0].charAt(0);n.splice(1,0,n[0].substr(1)),n[0]=a}t.each(n,function(o,l){isNaN(o)||(n[l]=+o)}),h[i]=n}),h},numberToColor:function(h){var n=c[h];if(!n){for(var i=h.toString(16),a=i.length;a<6;a++)i="0"+i;n="#"+i,c[h]=n}return n}}},function(E,T,e){var t=e(6);function u(s){return t(s)?"":s.toString()}E.exports=u},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t=function(s){var c=typeof s=="undefined"?"undefined":e(s);return s!==null&&c==="object"||c==="function"};E.exports=t},function(E,T,e){var t=e(86),u=e(17),s=function(r){if(!t(r)||!u(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var h=r;Object.getPrototypeOf(h)!==null;)h=Object.getPrototypeOf(h);return Object.getPrototypeOf(r)===h};E.exports=s},function(E,T,e){"use strict";T.b=c,T.c=r,T.a=h;var t=e(202);function u(n,i){return function(a){return n+a*i}}function s(n,i,a){return n=Math.pow(n,a),i=Math.pow(i,a)-n,a=1/a,function(o){return Math.pow(n+o*i,a)}}function c(n,i){var a=i-n;return a?u(n,a>180||a<-180?a-360*Math.round(a/360):a):e.i(t.a)(isNaN(n)?i:n)}function r(n){return(n=+n)==1?h:function(i,a){return a-i?s(i,a,n):e.i(t.a)(isNaN(i)?a:i)}}function h(n,i){var a=i-n;return a?u(n,a):e.i(t.a)(isNaN(n)?i:n)}},function(E,T){E.exports=V},function(E,T,e){"use strict";function t(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function u(a,o){for(var l=0;l<o.length;l++){var f=o[l];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(a,f.key,f)}}function s(a,o,l){return o&&u(a.prototype,o),l&&u(a,l),a}var c=e(56),r=e(10),h=c.mat3,n=c.vec3,i=function(){s(a,[{key:"getDefaultCfg",value:function(){return{isTransposed:!1,matrix:[1,0,0,0,1,0,0,0,1]}}}]);function a(o){t(this,a);var l=this.getDefaultCfg();r(this,l,o),this.init()}return s(a,[{key:"init",value:function(){var l=this.start,f=this.end,v={x:(l.x+f.x)/2,y:(l.y+f.y)/2};this.center=v,this.width=Math.abs(f.x-l.x),this.height=Math.abs(f.y-l.y)}},{key:"_swapDim",value:function(l){var f=this[l];if(f){var v=f.start;f.start=f.end,f.end=v}}},{key:"getCenter",value:function(){return this.center}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"convertDim",value:function(l,f){var v=this[f],b=v.start,g=v.end;return b+l*(g-b)}},{key:"invertDim",value:function(l,f){var v=this[f],b=v.start,g=v.end;return(l-b)/(g-b)}},{key:"convertPoint",value:function(l){return l}},{key:"invertPoint",value:function(l){return l}},{key:"applyMatrix",value:function(l,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=this.matrix,g=[l,f,v];return n.transformMat3(g,g,b),g}},{key:"invertMatrix",value:function(l,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=this.matrix,g=h.invert([],b),m=[l,f,v];return n.transformMat3(m,m,g),m}},{key:"convert",value:function(l){var f=this.convertPoint(l),v=f.x,b=f.y,g=this.applyMatrix(v,b,1);return{x:g[0],y:g[1]}}},{key:"invert",value:function(l){var f=this.invertMatrix(l.x,l.y,1);return this.invertPoint({x:f[0],y:f[1]})}},{key:"rotate",value:function(l){var f=this.matrix,v=this.center;return h.translate(f,f,[-v.x,-v.y]),h.rotate(f,f,l),h.translate(f,f,[v.x,v.y]),this}},{key:"reflect",value:function(l){switch(l){case"x":this._swapDim("x");break;case"y":this._swapDim("y");break;default:this._swapDim("y")}return this}},{key:"scale",value:function(l,f){var v=this.matrix,b=this.center;return h.translate(v,v,[-b.x,-b.y]),h.scale(v,v,[l,f]),h.translate(v,v,[b.x,b.y]),this}},{key:"translate",value:function(l,f){var v=this.matrix;return h.translate(v,v,[l,f]),this}},{key:"transpose",value:function(){return this.isTransposed=!this.isTransposed,this}}]),a}();E.exports=i},function(E,T,e){function t(_,M){_.prototype=Object.create(M.prototype),_.prototype.constructor=_,_.__proto__=M}var u=e(0),s=e(279),c=e(16),r=c.Canvas,h=u.DomUtil,n=e(5),i=e(283),a=e(121),o=e(123),l=e(122),f=e(124),v="auto";function b(_,M){var x=!1;return u.each(_,function(y){var S=[].concat(y.values),P=[].concat(M.values);if(y.type===M.type&&y.field===M.field&&S.sort().toString()===P.sort().toString()){x=!0;return}}),x}function g(_,M){return u.isEqualWith(_,M,function(x,y){return x===y})}var m=function(_){t(M,_);function M(){return _.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=_.prototype.getDefaultCfg.call(this);return u.mix(S,{id:null,forceFit:!1,container:null,wrapperEl:null,canvas:null,width:500,height:500,pixelRatio:null,backPlot:null,frontPlot:null,plotBackground:null,padding:n.plotCfg.padding,background:null,autoPaddingAppend:5,limitInPlot:!1,renderer:n.renderer,views:[]})},x.init=function(){var S=this,P=S.get("viewTheme");S._initCanvas(),S._initPlot(),S._initEvents(),_.prototype.init.call(this);var A=new a.Tooltip({chart:S,viewTheme:P,options:{}});S.set("tooltipController",A);var O=new a.Legend({chart:S,viewTheme:P});S.set("legendController",O),S.set("_id","chart"),S.emit("afterinit")},x._isAutoPadding=function(){var S=this.get("padding");return u.isArray(S)?S.includes(v):S===v},x._getAutoPadding=function(){for(var S=this.get("padding"),P=this.get("frontPlot"),A=P.getBBox(),O=this.get("backPlot"),L=l(O,f(this.get("plotRange"))),H=o(A,L),F=[0-H.minY,H.maxX-this.get("width"),H.maxY-this.get("height"),0-H.minX],K=u.toAllPadding(S),G=0;G<K.length;G++)if(K[G]===v){var U=Math.max(0,F[G]);K[G]=U+this.get("autoPaddingAppend")}return K},x._initCanvas=function(){var S=this.get("container"),P=this.get("id");!S&&P&&(S=P,this.set("container",P));var A=this.get("width"),O=this.get("height");if(u.isString(S)){if(S=document.getElementById(S),!S)throw new Error("Please specify the container for the chart!");this.set("container",S)}var L=h.createDom('<div style="position:relative;"></div>');S.appendChild(L),this.set("wrapperEl",L),this.get("forceFit")&&(A=h.getWidth(S,A),this.set("width",A));var H=this.get("renderer"),F=new r({containerDOM:L,width:A,height:O,pixelRatio:H==="svg"?1:this.get("pixelRatio"),renderer:H});this.set("canvas",F)},x._initPlot=function(){var S=this;S._initPlotBack();var P=S.get("canvas"),A=P.addGroup({zIndex:1}),O=P.addGroup({zIndex:0}),L=P.addGroup({zIndex:3});S.set("backPlot",A),S.set("middlePlot",O),S.set("frontPlot",L)},x._initPlotBack=function(){var S=this,P=S.get("canvas"),A=S.get("viewTheme"),O=P.addGroup(i,{padding:this.get("padding"),plotBackground:u.mix({},A.plotBackground,S.get("plotBackground")),background:u.mix({},A.background,S.get("background"))});S.set("plot",O),S.set("plotRange",O.get("plotRange"))},x._initEvents=function(){this.get("forceFit")&&window.addEventListener("resize",u.wrapBehavior(this,"_initForceFitEvent"))},x._initForceFitEvent=function(){var S=setTimeout(u.wrapBehavior(this,"forceFit"),200);clearTimeout(this.get("resizeTimer")),this.set("resizeTimer",S)},x._renderLegends=function(){var S=this.get("options"),P=S.legends;if(u.isNil(P)||P!==!1){var A=this.get("legendController");if(A.options=P||{},A.plotRange=this.get("plotRange"),P&&P.custom)A.addCustomLegend();else{var O=this.getAllGeoms(),L=[];u.each(O,function(F){var K=F.get("view"),G=F.getAttrsForLegend();u.each(G,function(U){var Z=U.type,J=U.getScale(Z);if(J.field&&J.type!=="identity"&&!b(L,J)){L.push(J);var rt=K.getFilteredOutValues(J.field);A.addLegend(J,U,F,rt)}})});var H=this.getYScales();L.length===0&&H.length>1&&A.addMixedLegend(H,O)}A.alignLegends()}},x._renderTooltips=function(){var S=this.get("options");if(u.isNil(S.tooltip)||S.tooltip!==!1){var P=this.get("tooltipController");P.options=S.tooltip||{},P.renderTooltip()}},x.getAllGeoms=function(){var S=[];S=S.concat(this.get("geoms"));var P=this.get("views");return u.each(P,function(A){S=S.concat(A.get("geoms"))}),S},x.forceFit=function(){var S=this;if(!(!S||S.destroyed)){var P=S.get("container"),A=S.get("width"),O=h.getWidth(P,A);if(O!==0&&O!==A){var L=S.get("height");S.changeSize(O,L)}return S}},x.resetPlot=function(){var S=this.get("plot"),P=this.get("padding");g(P,S.get("padding"))||(S.set("padding",P),S.repaint())},x.changeSize=function(S,P){var A=this,O=A.get("canvas");O.changeSize(S,P);var L=this.get("plot");return A.set("width",S),A.set("height",P),L.repaint(),this.set("keepPadding",!0),A.repaint(),this.set("keepPadding",!1),this.emit("afterchangesize"),A},x.changeWidth=function(S){return this.changeSize(S,this.get("height"))},x.changeHeight=function(S){return this.changeSize(this.get("width"),S)},x.view=function(S){S=S||{},S.theme=this.get("theme"),S.parent=this,S.backPlot=this.get("backPlot"),S.middlePlot=this.get("middlePlot"),S.frontPlot=this.get("frontPlot"),S.canvas=this.get("canvas"),u.isNil(S.animate)&&(S.animate=this.get("animate")),S.options=u.mix({},this._getSharedOptions(),S.options);var P=new s(S);return P.set("_id","view"+this.get("views").length),this.get("views").push(P),this.emit("addview",{view:P}),P},x.removeView=function(S){var P=this.get("views");u.Array.remove(P,S),S.destroy()},x._getSharedOptions=function(){var S=this.get("options"),P={};return u.each(["scales","coord","axes"],function(A){P[A]=u.cloneDeep(S[A])}),P},x.getViewRegion=function(){var S=this.get("plotRange");return{start:S.bl,end:S.tr}},x.legend=function(S,P){var A=this.get("options");A.legends||(A.legends={});var O={};return S===!1?A.legends=!1:u.isObject(S)?O=S:u.isString(S)?O[S]=P:O=P,u.mix(A.legends,O),this},x.tooltip=function(S,P){var A=this.get("options");return A.tooltip||(A.tooltip={}),S===!1?A.tooltip=!1:u.isObject(S)?u.mix(A.tooltip,S):u.mix(A.tooltip,P),this},x.clear=function(){this.emit("beforeclear");for(var S=this.get("views");S.length>0;){var P=S.shift();P.destroy()}_.prototype.clear.call(this);var A=this.get("canvas");return this.resetPlot(),A.draw(),this.emit("afterclear"),this},x.clearInner=function(){var S=this.get("views");u.each(S,function(O){O.clearInner()});var P=this.get("tooltipController");if(P&&P.clear(),!this.get("keepLegend")){var A=this.get("legendController");A&&A.clear()}_.prototype.clearInner.call(this)},x.drawComponents=function(){_.prototype.drawComponents.call(this),this.get("keepLegend")||this._renderLegends()},x.render=function(){var S=this;if(!S.get("keepPadding")&&S._isAutoPadding()){S.beforeRender(),S.drawComponents();var P=S._getAutoPadding(),A=S.get("plot");g(A.get("padding"),P)||(A.set("padding",P),A.repaint())}var O=S.get("middlePlot");if(S.get("limitInPlot")&&!O.attr("clip")){var L=u.getClipByRange(S.get("plotRange"));O.attr("clip",L)}_.prototype.render.call(this),S._renderTooltips()},x.repaint=function(){this.get("keepPadding")||this.resetPlot(),_.prototype.repaint.call(this)},x.changeVisible=function(S){var P=this.get("wrapperEl"),A=S?"":"none";P.style.display=A},x.toDataURL=function(){var S=this,P=S.get("canvas"),A=S.get("renderer"),O=P.get("el"),L="";if(A==="svg"){var H=O.cloneNode(!0),F=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),K=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",F);K.replaceChild(H,K.documentElement);var G=new XMLSerializer().serializeToString(K);L="data:image/svg+xml;charset=utf8,"+encodeURIComponent(G)}else A==="canvas"&&(L=O.toDataURL("image/png"));return L},x.downloadImage=function(S){var P=this,A=document.createElement("a"),O=P.get("renderer"),L=(S||"chart")+(O==="svg"?".svg":".png"),H=P.get("canvas");H.get("timeline").stopAllAnimations(),setTimeout(function(){var F=P.toDataURL();if(window.Blob&&window.URL&&O!=="svg"){for(var K=F.split(","),G=K[0].match(/:(.*?);/)[1],U=atob(K[1]),Z=U.length,J=new Uint8Array(Z);Z--;)J[Z]=U.charCodeAt(Z);var rt=new Blob([J],{type:G});window.navigator.msSaveBlob?window.navigator.msSaveBlob(rt,L):A.addEventListener("click",function(){A.download=L,A.href=window.URL.createObjectURL(rt)})}else A.addEventListener("click",function(){A.download=L,A.href=F});var vt=document.createEvent("MouseEvents");vt.initEvent("click",!1,!1),A.dispatchEvent(vt)},16)},x.showTooltip=function(S){var P=this.getViewsByPoint(S);if(P.length){var A=this.get("tooltipController");A.showTooltip(S,P)}return this},x.lockTooltip=function(){var S=this.get("tooltipController");return S.lockTooltip(),this},x.unlockTooltip=function(){var S=this.get("tooltipController");return S.unlockTooltip(),this},x.hideTooltip=function(){var S=this.get("tooltipController");return S.hideTooltip(),this},x.getTooltipItems=function(S){var P=this,A=P.getViewsByPoint(S),O=[];return u.each(A,function(L){var H=L.get("geoms");u.each(H,function(F){var K=F.get("dataArray"),G=[];u.each(K,function(U){var Z=F.findPoint(S,U);if(Z){var J=F.getTipItems(Z);G=G.concat(J)}}),O=O.concat(G)})}),O},x.destroy=function(){this.emit("beforedestroy"),clearTimeout(this.get("resizeTimer"));var S=this.get("canvas"),P=this.get("wrapperEl");P.parentNode.removeChild(P),_.prototype.destroy.call(this),S.destroy(),window.removeEventListener("resize",u.getWrapBehavior(this,"_initForceFitEvent")),this.emit("afterdestroy")},M}(s);E.exports=m},function(E,T,e){var t=e(154),u=e(16),s=e(119),c=e(44),r=e(5),h=e(9),n=e(0),i={version:r.version,Animate:s,Chart:c,Global:r,Scale:t,Shape:h,Util:n,G:u,DomUtil:n.DomUtil,MatrixUtil:n.MatrixUtil,PathUtil:n.PathUtil};i.track=function(){console.warn("G2 tracks nothing ;-)")},typeof window!="undefined"&&(window.G2?console.warn("There are multiple versions of G2. Version "+i.version+"'s reference is 'window.G2_3'"):window.G2=i),E.exports=i},function(E,T,e){var t=e(5),u=e(0),s=u.assign,c=u.isNil,r=u.isArray,h=u.cloneDeep,n=u.wrapBehavior,i=u.getWrapBehavior,a=function(){var o=l.prototype;o.getDefaultCfg=function(){return{chart:null,group:null,showTitle:!0,autoSetAxis:!0,padding:10,eachView:null,fields:[],colTitle:{offsetY:-15,style:{fontSize:14,textAlign:"center",fill:"#666",fontFamily:t.fontFamily}},rowTitle:{offsetX:15,style:{fontSize:14,textAlign:"center",rotate:90,fill:"#666",fontFamily:t.fontFamily}}}};function l(f){var v=this.getDefaultCfg();s(this,v,f),this.init()}return o.init=function(){if(!this.chart)throw new Error("Facets Error: please specify the chart!");this._bindEvent(),this.initContainer(),this.chart.get("data")&&this.initViews()},o.initContainer=function(){var v=this.chart,b=v.get("frontPlot"),g=b.addGroup();this.group=g},o.initViews=function(){for(var v=this.chart,b=v.get("data"),g=this.eachView,m=this.generateFacets(b),_=0;_<m.length;_++){var M=m[_],x=M.region,y=v.view({start:x.start,end:x.end,padding:this.padding});y.source(M.data),this.beforeProcessView(y,M),g&&g(y,M),this.afterProcessView(y,M),M.view=y}this.facets=m},o.beforeProcessView=function(){},o.afterProcessView=function(v,b){this.autoSetAxis&&this.processAxis(v,b)},o.processAxis=function(v,b){var g=v.get("options"),m=v.get("geoms");if((!g.coord.type||g.coord.type==="rect")&&m.length){var _=m[0].get("attrOptions").position.field,M=r(_)?_:_.split("*").map(function(P){return P.trim()}),x=M[0],y=M[1];c(g.axes)&&(g.axes={});var S=g.axes;S!==!1&&(x&&S[x]!==!1&&(S[x]=S[x]||{},this.setXAxis(x,S,b)),y&&S[y]!==!1&&(S[y]=S[y]||{},this.setYAxis(y,S,b)))}},o.setXAxis=function(){},o.setYAxis=function(){},o.renderTitle=function(v,b){this.drawColTitle(v,b)},o.getScaleText=function(v,b,g){var m;if(v){var _=g.get("scales"),M=_[v];M||(M=g.createScale(v)),m=M.getText(b)}else m=b;return m},o.drawColTitle=function(v,b){var g=this.getScaleText(b.colField,b.colValue,v),m=s({position:["50%","0%"],content:g},this.colTitle);v.guide().text(m)},o.drawRowTitle=function(v,b){var g=this.getScaleText(b.rowField,b.rowValue,v),m=s({position:["100%","50%"],content:g},h(this.rowTitle));v.guide().text(m)},o.getFilter=function(v){var b=function(m){var _=!0;return v.forEach(function(M){var x=M.field,y=M.value,S=!0;!c(y)&&x&&(S=m[x]===y),_=_&&S}),_};return b},o.getFieldValues=function(v,b){for(var g=[],m={},_=0;_<b.length;_++){var M=b[_],x=M[v];!c(x)&&!m[x]&&(g.push(x),m[x]=!0)}return g},o.getRegion=function(v,b,g,m){var _=1/b,M=1/v,x={x:_*g,y:M*m},y={x:x.x+_,y:x.y+M};return{start:x,end:y}},o.generateFacets=function(){return[]},o._bindEvent=function(){var v=this.chart;v.on("afterchangedata",n(this,"onDataChange")),v.on("beforeclear",n(this,"onClear")),v.on("beforedestroy",n(this,"destroy")),v.on("beforepaint",n(this,"onPaint")),v.on("setdata",n(this,"onDataChange"))},o._clearEvent=function(){var v=this.chart;v&&(v.off("afterchangedata",i(this,"onDataChange")),v.off("beforeclear",i(this,"onClear")),v.off("beforedestroy",i(this,"destroy")),v.off("beforepaint",i(this,"onPaint")),v.off("setdata",i(this,"onDataChange")))},o._clearFacets=function(){var v=this.facets,b=this.chart;if(v)for(var g=0;g<v.length;g++){var m=v[g];b.removeView(m.view)}this.facets=null},o.onClear=function(){this.onRemove()},o.onPaint=function(){if(this.showTitle)for(var v=this.facets,b=0;b<v.length;b++){var g=v[b],m=g.view;this.renderTitle(m,g)}},o.onDataChange=function(){this._clearFacets(),this.initViews()},o.onRemove=function(){this._clearFacets(),this._clearEvent(),this.group&&this.group.remove(),this.chart=null,this.facets=null,this.group=null},o.destroy=function(){this.onRemove(),this.destroyed=!0},l}();E.exports=a},function(E,T,e){var t=e(1);function u(n,i,a,o){return{x:Math.cos(o)*a+n,y:Math.sin(o)*a+i}}function s(n,i,a,o){var l,f;return o?n<i?(l=i-n,f=Math.PI*2-a+n):n>a&&(l=Math.PI*2-n+i,f=n-a):(l=n-i,f=a-n),l>f?a:i}function c(n,i,a,o){var l=0;return a-i>=Math.PI*2&&(l=Math.PI*2),i=t.mod(i,Math.PI*2),a=t.mod(a,Math.PI*2)+l,n=t.mod(n,Math.PI*2),o?i>=a?n>a&&n<i?n:s(n,a,i,!0):n<i||n>a?n:s(n,i,a):i<=a?i<n&&n<a?n:s(n,i,a,!0):n>i||n<a?n:s(n,a,i)}function r(n,i,a,o,l,f,v,b,g){var m=[v,b],_=[n,i],M=[1,0],x=t.vec2.subtract([],m,_),y=t.vec2.angleTo(M,x);y=c(y,o,l,f);var S=[a*Math.cos(y)+n,a*Math.sin(y)+i];g&&(g.x=S[0],g.y=S[1]);var P=t.vec2.distance(S,m);return P}function h(n,i,a,o,l,f){var v=0,b=Math.PI/2,g=Math.PI,m=Math.PI*3/2,_=[],M=c(v,o,l,f);M===v&&_.push(u(n,i,a,v)),M=c(b,o,l,f),M===b&&_.push(u(n,i,a,b)),M=c(g,o,l,f),M===g&&_.push(u(n,i,a,g)),M=c(m,o,l,f),M===m&&_.push(u(n,i,a,m)),_.push(u(n,i,a,o)),_.push(u(n,i,a,l));var x=Infinity,y=-Infinity,S=Infinity,P=-Infinity;return t.each(_,function(A){x>A.x&&(x=A.x),y<A.x&&(y=A.x),S>A.y&&(S=A.y),P<A.y&&(P=A.y)}),{minX:x,minY:S,maxX:y,maxY:P}}E.exports={nearAngle:c,projectPoint:function(i,a,o,l,f,v,b,g){var m={};return r(i,a,o,l,f,v,b,g,m),m},pointDistance:r,box:h}},function(E,T,e){var t=e(1).vec2;E.exports={at:function(s,c,r){return(c-s)*r+s},pointDistance:function(s,c,r,h,n,i){var a=[r-s,h-c];if(t.exactEquals(a,[0,0]))return NaN;var o=[-a[1],a[0]];t.normalize(o,o);var l=[n-s,i-c];return Math.abs(t.dot(l,o))},box:function(s,c,r,h,n){var i=n/2,a=Math.min(s,r),o=Math.max(s,r),l=Math.min(c,h),f=Math.max(c,h);return{minX:a-i,minY:l-i,maxX:o+i,maxY:f+i}},len:function(s,c,r,h){return Math.sqrt((r-s)*(r-s)+(h-c)*(h-c))}}},function(E,T,e){var t=e(37),u=e(50),s=Math.PI,c=Math.sin,r=Math.cos,h=Math.atan2,n=10,i=s/3;function a(f,v,b,g,m,_,M){var x,y,S,P,A,O,L;if(!v.fill){var H=v.arrowLength||n,F=v.arrowAngle?v.arrowAngle*s/180:i;L=h(g-_,b-m),A=Math.abs(v.lineWidth*r(L))/2,O=Math.abs(v.lineWidth*c(L))/2,M&&(A=-A,O=-O),x=m+H*r(L+F/2),y=_+H*c(L+F/2),S=m+H*r(L-F/2),P=_+H*c(L-F/2),f.beginPath(),f.moveTo(x-A,y-O),f.lineTo(m-A,_-O),f.lineTo(S-A,P-O),f.moveTo(m-A,_-O),f.lineTo(m+A,_+O),f.moveTo(m,_),f.stroke()}}function o(f){var v=[],b=t.parsePath(f.path),g;if(!Array.isArray(b)||b.length===0||b[0][0]!=="M"&&b[0][0]!=="m")return!1;for(var m=b.length,_=0;_<b.length;_++){var M=b[_];g=new u(M,g,_===m-1),v.push(g)}return v}function l(f,v,b,g,m,_,M){var x=M?v.startArrow:v.endArrow,y=x.d,S=0,P=m-b,A=_-g,O=Math.atan(P/A);A===0&&P<0?S=Math.PI:P>0&&A>0?S=Math.PI/2-O:P<0&&A<0?S=-Math.PI/2-O:P>=0&&A<0?S=-O-Math.PI/2:P<=0&&A>0&&(S=Math.PI/2-O);var L=o(x);if(!!L){y&&(M?(m=m+Math.sin(Math.abs(O))*y,_=_+Math.cos(Math.abs(O))*y-.5*f.lineWidth):(m=m-Math.sin(Math.abs(O))*y,_=_-Math.cos(Math.abs(O))*y+.5*f.lineWidth)),f.save(),f.beginPath(),f.translate(m,_),f.rotate(S);for(var H=0;H<L.length;H++)L[H].draw(f);f.setTransform(1,0,0,1,0,0),f.fillStyle=f.strokeStyle,f.fill(),f.restore()}}E.exports={addStartArrow:function(v,b,g,m,_,M){typeof b.startArrow=="object"?l(v,b,g,m,_,M,!0):b.startArrow&&a(v,b,g,m,_,M,!0)},addEndArrow:function(v,b,g,m,_,M){typeof b.endArrow=="object"?l(v,b,g,m,_,M,!1):b.endArrow&&a(v,b,g,m,_,M,!1)}}},function(E,T,e){var t=e(1),u=e(76),s=e(75),c=e(144),r=e(143),h=t.vec3,n=t.mat3,i=["m","l","c","a","q","h","v","t","s","z"];function a(m,_,M){return{x:M.x+m,y:M.y+_}}function o(m,_){return{x:_.x+(_.x-m.x),y:_.y+(_.y-m.y)}}function l(m){return Math.sqrt(m[0]*m[0]+m[1]*m[1])}function f(m,_){return(m[0]*_[0]+m[1]*_[1])/(l(m)*l(_))}function v(m,_){return(m[0]*_[1]<m[1]*_[0]?-1:1)*Math.acos(f(m,_))}function b(m,_,M,x,y,S,P){var A=t.mod(t.toRadian(P),Math.PI*2),O=m.x,L=m.y,H=_.x,F=_.y,K=Math.cos(A)*(O-H)/2+Math.sin(A)*(L-F)/2,G=-1*Math.sin(A)*(O-H)/2+Math.cos(A)*(L-F)/2,U=K*K/(y*y)+G*G/(S*S);U>1&&(y*=Math.sqrt(U),S*=Math.sqrt(U));var Z=y*y*(G*G)+S*S*(K*K),J=Math.sqrt((y*y*(S*S)-Z)/Z);M===x&&(J*=-1),isNaN(J)&&(J=0);var rt=J*y*G/S,vt=J*-S*K/y,mt=(O+H)/2+Math.cos(A)*rt-Math.sin(A)*vt,ut=(L+F)/2+Math.sin(A)*rt+Math.cos(A)*vt,Rt=v([1,0],[(K-rt)/y,(G-vt)/S]),Ft=[(K-rt)/y,(G-vt)/S],wt=[(-1*K-rt)/y,(-1*G-vt)/S],Mt=v(Ft,wt);return f(Ft,wt)<=-1&&(Mt=Math.PI),f(Ft,wt)>=1&&(Mt=0),x===0&&Mt>0&&(Mt=Mt-2*Math.PI),x===1&&Mt<0&&(Mt=Mt+2*Math.PI),[m,mt,ut,y,S,Rt,Mt,A,x]}var g=function(_,M,x){this.preSegment=M,this.isLast=x,this.init(_,M)};t.augment(g,{init:function(_,M){var x=_[0];M=M||{endPoint:{x:0,y:0}};var y=i.indexOf(x)>=0,S=y?x.toUpperCase():x,P=_,A,O,L,H,F=M.endPoint,K=P[1],G=P[2];switch(S){default:break;case"M":y?H=a(K,G,F):H={x:K,y:G},this.command="M",this.params=[F,H],this.subStart=H,this.endPoint=H;break;case"L":y?H=a(K,G,F):H={x:K,y:G},this.command="L",this.params=[F,H],this.subStart=M.subStart,this.endPoint=H,this.endTangent=function(){return[H.x-F.x,H.y-F.y]},this.startTangent=function(){return[F.x-H.x,F.y-H.y]};break;case"H":y?H=a(K,0,F):H={x:K,y:F.y},this.command="L",this.params=[F,H],this.subStart=M.subStart,this.endPoint=H,this.endTangent=function(){return[H.x-F.x,H.y-F.y]},this.startTangent=function(){return[F.x-H.x,F.y-H.y]};break;case"V":y?H=a(0,K,F):H={x:F.x,y:K},this.command="L",this.params=[F,H],this.subStart=M.subStart,this.endPoint=H,this.endTangent=function(){return[H.x-F.x,H.y-F.y]},this.startTangent=function(){return[F.x-H.x,F.y-H.y]};break;case"Q":y?(A=a(K,G,F),O=a(P[3],P[4],F)):(A={x:K,y:G},O={x:P[3],y:P[4]}),this.command="Q",this.params=[F,A,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-A.x,O.y-A.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]};break;case"T":y?O=a(K,G,F):O={x:K,y:G},M.command==="Q"?(A=o(M.params[1],F),this.command="Q",this.params=[F,A,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-A.x,O.y-A.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]}):(this.command="TL",this.params=[F,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-F.x,O.y-F.y]},this.startTangent=function(){return[F.x-O.x,F.y-O.y]});break;case"C":y?(A=a(K,G,F),O=a(P[3],P[4],F),L=a(P[5],P[6],F)):(A={x:K,y:G},O={x:P[3],y:P[4]},L={x:P[5],y:P[6]}),this.command="C",this.params=[F,A,O,L],this.subStart=M.subStart,this.endPoint=L,this.endTangent=function(){return[L.x-O.x,L.y-O.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]};break;case"S":y?(O=a(K,G,F),L=a(P[3],P[4],F)):(O={x:K,y:G},L={x:P[3],y:P[4]}),M.command==="C"?(A=o(M.params[2],F),this.command="C",this.params=[F,A,O,L],this.subStart=M.subStart,this.endPoint=L,this.endTangent=function(){return[L.x-O.x,L.y-O.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]}):(this.command="SQ",this.params=[F,O,L],this.subStart=M.subStart,this.endPoint=L,this.endTangent=function(){return[L.x-O.x,L.y-O.y]},this.startTangent=function(){return[F.x-O.x,F.y-O.y]});break;case"A":{var U=K,Z=G,J=P[3],rt=P[4],vt=P[5];y?H=a(P[6],P[7],F):H={x:P[6],y:P[7]},this.command="A";var mt=b(F,H,rt,vt,U,Z,J);this.params=mt;var ut=M.subStart;this.subStart=ut,this.endPoint=H;var Rt=mt[5]%(Math.PI*2);t.isNumberEqual(Rt,Math.PI*2)&&(Rt=0);var Ft=mt[6]%(Math.PI*2);t.isNumberEqual(Ft,Math.PI*2)&&(Ft=0);var wt=.001;this.startTangent=function(){vt===0&&(wt*=-1);var Mt=mt[3]*Math.cos(Rt-wt)+mt[1],St=mt[4]*Math.sin(Rt-wt)+mt[2];return[Mt-ut.x,St-ut.y]},this.endTangent=function(){var Mt=mt[6];Mt-Math.PI*2<1e-4&&(Mt=0);var St=mt[3]*Math.cos(Rt+Mt+wt)+mt[1],At=mt[4]*Math.sin(Rt+Mt-wt)+mt[2];return[F.x-St,F.y-At]};break}case"Z":this.command="Z",this.params=[F,M.subStart],this.subStart=M.subStart,this.endPoint=M.subStart}},isInside:function(_,M,x){var y=this,S=y.command,P=y.params,A=y.box;if(A&&!u.box(A.minX,A.maxX,A.minY,A.maxY,_,M))return!1;switch(S){default:break;case"M":return!1;case"TL":case"L":case"Z":return u.line(P[0].x,P[0].y,P[1].x,P[1].y,x,_,M);case"SQ":case"Q":return u.quadraticline(P[0].x,P[0].y,P[1].x,P[1].y,P[2].x,P[2].y,x,_,M);case"C":return u.cubicline(P[0].x,P[0].y,P[1].x,P[1].y,P[2].x,P[2].y,P[3].x,P[3].y,x,_,M);case"A":{var O=P,L=O[1],H=O[2],F=O[3],K=O[4],G=O[5],U=O[6],Z=O[7],J=O[8],rt=F>K?F:K,vt=F>K?1:F/K,mt=F>K?K/F:1;O=[_,M,1];var ut=[1,0,0,0,1,0,0,0,1];return n.translate(ut,ut,[-L,-H]),n.rotate(ut,ut,-Z),n.scale(ut,ut,[1/vt,1/mt]),h.transformMat3(O,O,ut),u.arcline(0,0,rt,G,G+U,1-J,x,O[0],O[1])}}return!1},draw:function(_){var M=this.command,x=this.params,y,S,P;switch(M){default:break;case"M":_.moveTo(x[1].x,x[1].y);break;case"TL":case"L":_.lineTo(x[1].x,x[1].y);break;case"SQ":case"Q":y=x[1],S=x[2],_.quadraticCurveTo(y.x,y.y,S.x,S.y);break;case"C":y=x[1],S=x[2],P=x[3],_.bezierCurveTo(y.x,y.y,S.x,S.y,P.x,P.y);break;case"A":{var A=x,O=A[1],L=A[2],H=O,F=L,K=A[3],G=A[4],U=A[5],Z=A[6],J=A[7],rt=A[8],vt=K>G?K:G,mt=K>G?1:K/G,ut=K>G?G/K:1;_.translate(H,F),_.rotate(J),_.scale(mt,ut),_.arc(0,0,vt,U,U+Z,1-rt),_.scale(1/mt,1/ut),_.rotate(-J),_.translate(-H,-F);break}case"Z":_.closePath();break}},getBBox:function(_){var M=_/2,x=this.params,y,S,P,A;switch(this.command){default:case"M":case"Z":break;case"TL":case"L":this.box={minX:Math.min(x[0].x,x[1].x)-M,maxX:Math.max(x[0].x,x[1].x)+M,minY:Math.min(x[0].y,x[1].y)-M,maxY:Math.max(x[0].y,x[1].y)+M};break;case"SQ":case"Q":for(S=c.extrema(x[0].x,x[1].x,x[2].x),P=0,A=S.length;P<A;P++)S[P]=c.at(x[0].x,x[1].x,x[2].x,S[P]);for(S.push(x[0].x,x[2].x),y=c.extrema(x[0].y,x[1].y,x[2].y),P=0,A=y.length;P<A;P++)y[P]=c.at(x[0].y,x[1].y,x[2].y,y);y.push(x[0].y,x[2].y),this.box={minX:Math.min.apply(Math,S)-M,maxX:Math.max.apply(Math,S)+M,minY:Math.min.apply(Math,y)-M,maxY:Math.max.apply(Math,y)+M};break;case"C":for(S=s.extrema(x[0].x,x[1].x,x[2].x,x[3].x),P=0,A=S.length;P<A;P++)S[P]=s.at(x[0].x,x[1].x,x[2].x,x[3].x,S[P]);for(y=s.extrema(x[0].y,x[1].y,x[2].y,x[3].y),P=0,A=y.length;P<A;P++)y[P]=s.at(x[0].y,x[1].y,x[2].y,x[3].y,y[P]);S.push(x[0].x,x[3].x),y.push(x[0].y,x[3].y),this.box={minX:Math.min.apply(Math,S)-M,maxX:Math.max.apply(Math,S)+M,minY:Math.min.apply(Math,y)-M,maxY:Math.max.apply(Math,y)+M};break;case"A":{var O=x,L=O[1],H=O[2],F=O[3],K=O[4],G=O[5],U=O[6],Z=O[7],J=O[8],rt=G,vt=G+U,mt=r.xExtrema(Z,F,K),ut=Infinity,Rt=-Infinity,Ft=[rt,vt];for(P=-Math.PI*2;P<=Math.PI*2;P+=Math.PI){var wt=mt+P;J===1?rt<wt&&wt<vt&&Ft.push(wt):vt<wt&&wt<rt&&Ft.push(wt)}for(P=0,A=Ft.length;P<A;P++){var Mt=r.xAt(Z,F,K,L,Ft[P]);Mt<ut&&(ut=Mt),Mt>Rt&&(Rt=Mt)}var St=r.yExtrema(Z,F,K),At=Infinity,nt=-Infinity,Pt=[rt,vt];for(P=-Math.PI*2;P<=Math.PI*2;P+=Math.PI){var z=St+P;J===1?rt<z&&z<vt&&Pt.push(z):vt<z&&z<rt&&Pt.push(z)}for(P=0,A=Pt.length;P<A;P++){var q=r.yAt(Z,F,K,H,Pt[P]);q<At&&(At=q),q>nt&&(nt=q)}this.box={minX:ut-M,maxX:Rt+M,minY:At-M,maxY:nt+M};break}}}}),E.exports=g},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(6),s=e(2),c=e(26),r=e(351),h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){n.prototype._initDefaultCfg.call(this);var l=this;l.type="linear",l.isLinear=!0,l.nice=!1,l.min=null,l.minLimit=null,l.max=null,l.maxLimit=null,l.tickCount=null,l.tickInterval=null,l.minTickInterval=null,l.snapArray=null},a.init=function(){var l=this;if(!l.ticks)l.min=l.translate(l.min),l.max=l.translate(l.max),l.initTicks();else{var f=l.ticks,v=l.translate(f[0]),b=l.translate(f[f.length-1]);(u(l.min)||l.min>v)&&(l.min=v),(u(l.max)||l.max<b)&&(l.max=b)}},a.calculateTicks=function(){var l=this.min,f=this.max,v=this.minLimit,b=this.maxLimit,g=this.tickCount,m=this.tickInterval,_=this.minTickInterval,M=this.snapArray;if(g===1)throw new Error("linear scale'tickCount should not be 1");if(f<l)throw new Error("max: "+f+" should not be less than min: "+l);var x=r({min:l,max:f,minLimit:v,maxLimit:b,minCount:g,maxCount:g,interval:m,minTickInterval:_,snapArray:M});return x.ticks},a.initTicks=function(){var l=this,f=l.calculateTicks();if(l.nice)l.ticks=f,l.min=f[0],l.max=f[f.length-1];else{var v=[];s(f,function(b){b>=l.min&&b<=l.max&&v.push(b)}),v.length||(v.push(l.min),v.push(l.max)),l.ticks=v}},a.scale=function(l){if(u(l))return NaN;var f=this.max,v=this.min;if(f===v)return 0;var b=(l-v)/(f-v),g=this.rangeMin(),m=this.rangeMax();return g+b*(m-g)},a.invert=function(l){var f=(l-this.rangeMin())/(this.rangeMax()-this.rangeMin());return this.min+f*(this.max-this.min)},i}(c);c.Linear=h,E.exports=h},function(E,T,e){var t=e(15),u=e(192);E.exports={toTimeStamp:function(c){return t(c)&&(c.indexOf("T")>0?c=new Date(c).getTime():c=new Date(c.replace(/-/ig,"/")).getTime()),u(c)&&(c=c.getTime()),c}}},function(E,T,e){var t=e(21),u=Array.prototype.indexOf,s=function(r,h){return t(r)?u.call(r,h)>-1:!1};E.exports=s},function(E,T){var e=function(u){for(var s=[],c=0;c<u.length;c++)s=s.concat(u[c]);return s};E.exports=e},function(E,T){var e=1e-5;E.exports=function(u,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e;return Math.abs(u-s)<c}},function(E,T,e){E.exports={mat3:e(85),vec2:e(174),vec3:e(175),transform:e(173)}},function(E,T,e){var t=e(21);function u(s){return t(s)?Array.prototype.slice.call(s):[]}E.exports=u},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},u=e(45);function s(r,h){return r===h?r!==0||h!==0||1/r==1/h:r!==r&&h!==h}function c(r){return u.Util.isArray(r)?r.length:u.Util.isObject(r)?Object.keys(r).length:0}T.default=u.Util.mix({},u.Util,{shallowEqual:function(h,n){if(s(h,n))return!0;if((typeof h=="undefined"?"undefined":t(h))!=="object"||h===null||(typeof n=="undefined"?"undefined":t(n))!=="object"||n===null||u.Util.isArray(h)!==u.Util.isArray(n)||c(h)!==c(n))return!1;var i=!0;return u.Util.each(h,function(a,o){return s(a,n[o])?!0:(i=!1,i)}),i},without:function(h){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i={};return u.Util.each(h,function(a,o){u.Util.indexOf(n,o)===-1&&(i[o]=a)}),i},length:c})},function(E,T,e){"use strict";T.a=function(t,u){return t=+t,u-=t,function(s){return t+u*s}}},function(E,T,e){"use strict";T.a=function(t,u){return t=+t,u=+u,function(s){return t*(1-s)+u*s}}},function(E,T,e){"use strict";var t=e(97),u=e(98);function s(r){return function(){var h=this.ownerDocument,n=this.namespaceURI;return n===u.b&&h.documentElement.namespaceURI===u.b?h.createElement(r):h.createElementNS(n,r)}}function c(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}T.a=function(r){var h=e.i(t.a)(r);return(h.local?c:s)(h)}},function(E,T,e){"use strict";T.a=function(t,u){var s=t.ownerSVGElement||t;if(s.createSVGPoint){var c=s.createSVGPoint();return c.x=u.clientX,c.y=u.clientY,c=c.matrixTransform(t.getScreenCTM().inverse()),[c.x,c.y]}var r=t.getBoundingClientRect();return[u.clientX-r.left-t.clientLeft,u.clientY-r.top-t.clientTop]}},function(E,T,e){"use strict";T.b=c;var t=e(13);function u(r,h){var n,i;return function(){var a=e.i(t.e)(this,r),o=a.tween;if(o!==n){i=n=o;for(var l=0,f=i.length;l<f;++l)if(i[l].name===h){i=i.slice(),i.splice(l,1);break}}a.tween=i}}function s(r,h,n){var i,a;if(typeof n!="function")throw new Error;return function(){var o=e.i(t.e)(this,r),l=o.tween;if(l!==i){a=(i=l).slice();for(var f={name:h,value:n},v=0,b=a.length;v<b;++v)if(a[v].name===h){a[v]=f;break}v===b&&a.push(f)}o.tween=a}}T.a=function(r,h){var n=this._id;if(r+="",arguments.length<2){for(var i=e.i(t.f)(this.node(),n).tween,a=0,o=i.length,l;a<o;++a)if((l=i[a]).name===r)return l.value;return null}return this.each((h==null?u:s)(n,r,h))};function c(r,h,n){var i=r._id;return r.each(function(){var a=e.i(t.e)(this,i);(a.value||(a.value={}))[h]=n.apply(this,arguments)}),function(a){return e.i(t.f)(a,i).value[h]}}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.setTheme=T.track=T.Interactions=T.PathUtil=T.Animate=T.Shape=T.Util=T.G2=T.Facet=T.Label=T.Guide=T.View=T.Geom=T.Tooltip=T.Legend=T.Axis=T.Coord=T.Chart=void 0;var t=e(422);Object.defineProperty(T,"Chart",{enumerable:!0,get:function(){return x(t).default}});var u=e(424);Object.defineProperty(T,"Coord",{enumerable:!0,get:function(){return x(u).default}});var s=e(420);Object.defineProperty(T,"Axis",{enumerable:!0,get:function(){return x(s).default}});var c=e(430);Object.defineProperty(T,"Legend",{enumerable:!0,get:function(){return x(c).default}});var r=e(431);Object.defineProperty(T,"Tooltip",{enumerable:!0,get:function(){return x(r).default}});var h=e(427);Object.defineProperty(T,"Geom",{enumerable:!0,get:function(){return x(h).default}});var n=e(432);Object.defineProperty(T,"View",{enumerable:!0,get:function(){return x(n).default}});var i=e(428);Object.defineProperty(T,"Guide",{enumerable:!0,get:function(){return x(i).default}});var a=e(429);Object.defineProperty(T,"Label",{enumerable:!0,get:function(){return x(a).default}});var o=e(426);Object.defineProperty(T,"Facet",{enumerable:!0,get:function(){return x(o).default}});var l=e(45),f=x(l),v=e(322),b=x(v),g=e(58),m=x(g),_=e(438),M=x(_);function x(A){return A&&A.__esModule?A:{default:A}}T.G2=f.default,T.Util=m.default,T.Shape=l.Shape,T.Animate=l.Animate,T.PathUtil=l.PathUtil,T.Interactions=b.default;var y=T.track=function(){},S=T.setTheme=function(O){var L=O;typeof O=="string"&&M.default[O]&&(L=M.default[O]),f.default.Global.setTheme(L)},P={G2:f.default,Util:m.default,Shape:l.Shape,Animate:l.Animate,PathUtil:l.PathUtil,track:y,setTheme:S,Interactions:b.default};T.default=P},function(E,T,e){E.exports={Position:e(235),Color:e(233),Shape:e(236),Size:e(237),Opacity:e(234),ColorUtil:e(107)}},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(105),i=e(3),a=function(o){h(v,o);var l=t(v),f=v.prototype;f.getDefaultCfg=function(){return{}};function v(b){var g;g=o.call(this)||this;var m=s(g),_={visible:!0},M=m.getDefaultCfg();return m._attrs=_,i.deepMix(_,M,b),g}return f.get=function(g){return this._attrs[g]},f.set=function(g,m){this._attrs[g]=m},f.changeVisible=function(){},f.destroy=function(){var g=this;g._attrs={},g.removeAllListeners(),g.destroyed=!0},v}(n);E.exports=a},function(E,T,e){function t(m){return function(){var _=r(m),M;if(c()){var x=r(this).constructor;M=Reflect.construct(_,arguments,x)}else M=_.apply(this,arguments);return u(this,M)}}function u(m,_){return _&&(typeof _=="object"||typeof _=="function")?_:s(m)}function s(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(m){return!1}}function r(m){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},r(m)}function h(m,_){m.prototype=Object.create(_.prototype),m.prototype.constructor=m,m.__proto__=_}var n=e(3),i=e(112),a=e(261),o=e(19),l=o.FONT_FAMILY,f=8,v=n.Event,b=n.Group,g=function(m){h(M,m);var _=t(M);function M(){return m.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=m.prototype.getDefaultCfg.call(this);return n.mix({},S,{type:"continuous-legend",items:null,layout:"vertical",width:20,height:156,textStyle:{fill:"#333",textAlign:"center",textBaseline:"middle",stroke:"#fff",lineWidth:5,fontFamily:l},hoverTextStyle:{fill:"rgba(0,0,0,0.25)"},slidable:!0,triggerAttr:{fill:"#fff",shadowBlur:10,shadowColor:"rgba(0,0,0,0.65)",radius:2},_range:[0,100],middleBackgroundStyle:{fill:"#D9D9D9"},textOffset:4,lineStyle:{lineWidth:1,stroke:"#fff"},pointerStyle:{fill:"rgb(230, 230, 230)"}})},x._calStartPoint=function(){var S={x:10,y:this.get("titleGap")-f},P=this.get("titleShape");if(P){var A=P.getBBox();S.y+=A.height}return S},x.beforeRender=function(){var S=this.get("items");!n.isArray(S)||n.isEmpty(S)||(m.prototype.beforeRender.call(this),this.set("firstItem",S[0]),this.set("lastItem",S[S.length-1]))},x._formatItemValue=function(S){var P=this.get("formatter")||this.get("itemFormatter");return P&&(S=P.call(this,S)),S},x.render=function(){m.prototype.render.call(this),this.get("slidable")?this._renderSlider():this._renderUnslidable()},x._renderSlider=function(){var S=new b,P=new b,A=new b,O=this._calStartPoint(),L=this.get("group"),H=L.addGroup(a,{minHandleElement:S,maxHandleElement:P,backgroundElement:A,layout:this.get("layout"),range:this.get("_range"),width:this.get("width"),height:this.get("height")});H.translate(O.x,O.y),this.set("slider",H);var F=this._renderSliderShape();F.attr("clip",H.get("middleHandleElement")),this._renderTrigger()},x._addMiddleBar=function(S,P,A){return S.addShape(P,{attrs:n.mix({},A,this.get("middleBackgroundStyle"))}),S.addShape(P,{attrs:A})},x._renderTrigger=function(){var S=this.get("firstItem"),P=this.get("lastItem"),A=this.get("layout"),O=this.get("textStyle"),L=this.get("triggerAttr"),H=n.mix({},L),F=n.mix({},L),K=n.mix({text:this._formatItemValue(S.value)+""},O),G=n.mix({text:this._formatItemValue(P.value)+""},O);A==="vertical"?(this._addVerticalTrigger("min",H,K),this._addVerticalTrigger("max",F,G)):(this._addHorizontalTrigger("min",H,K),this._addHorizontalTrigger("max",F,G))},x._addVerticalTrigger=function(S,P,A){var O=this.get("slider"),L=O.get(S+"HandleElement"),H=this.get("width"),F=L.addShape("rect",{attrs:n.mix({x:H/2-f-2,y:S==="min"?0:-f,width:2*f+2,height:f},P)}),K=L.addShape("text",{attrs:n.mix(A,{x:H+this.get("textOffset"),y:S==="max"?-4:4,textAlign:"start",lineHeight:1,textBaseline:"middle"})}),G=this.get("layout"),U=G==="vertical"?"ns-resize":"ew-resize";F.attr("cursor",U),K.attr("cursor",U),this.set(S+"ButtonElement",F),this.set(S+"TextElement",K)},x._addHorizontalTrigger=function(S,P,A){var O=this.get("slider"),L=O.get(S+"HandleElement"),H=L.addShape("rect",{attrs:n.mix({x:S==="min"?-f:0,y:-f-this.get("height")/2,width:f,height:2*f},P)}),F=L.addShape("text",{attrs:n.mix(A,{x:S==="min"?-f-4:f+4,y:f/2+this.get("textOffset")+10,textAlign:S==="min"?"end":"start",textBaseline:"middle"})}),K=this.get("layout"),G=K==="vertical"?"ns-resize":"ew-resize";H.attr("cursor",G),F.attr("cursor",G),this.set(S+"ButtonElement",H),this.set(S+"TextElement",F)},x._bindEvents=function(){var S=this;if(this.get("slidable")){var P=this.get("slider");P.on("sliderchange",function(A){var O=A.range,L=S.get("firstItem").value,H=S.get("lastItem").value,F=L+O[0]/100*(H-L),K=L+O[1]/100*(H-L);S._updateElement(F,K);var G=new v("itemfilter",A,!0,!0);G.range=[F,K],S.emit("itemfilter",G)})}this.get("hoverable")&&(this.get("group").on("mousemove",n.wrapBehavior(this,"_onMouseMove")),this.get("group").on("mouseleave",n.wrapBehavior(this,"_onMouseLeave")))},x._updateElement=function(S,P){var A=this.get("minTextElement"),O=this.get("maxTextElement");P>1&&(S=parseInt(S,10),P=parseInt(P,10)),A.attr("text",this._formatItemValue(S)+""),O.attr("text",this._formatItemValue(P)+"")},x._onMouseLeave=function(){var S=this.get("group").findById("hoverPointer");S&&S.destroy();var P=this.get("group").findById("hoverText");P&&P.destroy(),this.get("canvas").draw()},x._onMouseMove=function(S){var P=this.get("height"),A=this.get("width"),O=this.get("items"),L=this.get("canvas").get("el"),H=L.getBoundingClientRect(),F=this.get("group").getBBox(),K;if(this.get("layout")==="vertical"){var G=5;this.get("type")==="color-legend"&&(G=30);var U=this.get("titleGap"),Z=this.get("titleShape");Z&&(U+=Z.getBBox().maxY-Z.getBBox().minY);var J=S.clientY||S.event.clientY;J=J-H.y-this.get("group").attr("matrix")[7]+F.y-G+U,K=O[0].value+(1-J/P)*(O[O.length-1].value-O[0].value)}else{var rt=S.clientX||S.event.clientX;rt=rt-H.x-this.get("group").attr("matrix")[6],K=O[0].value+rt/A*(O[O.length-1].value-O[0].value)}K=K.toFixed(2),this.activate(K),this.emit("mousehover",{value:K})},x.activate=function(S){if(!!S){var P=this.get("group").findById("hoverPointer"),A=this.get("group").findById("hoverText"),O=this.get("items");if(!(S<O[0].value||S>O[O.length-1].value)){var L=this.get("height"),H=this.get("width"),F=this.get("titleShape"),K=this.get("titleGap"),G=[],U=(S-O[0].value)/(O[O.length-1].value-O[0].value),Z;if(this.get("layout")==="vertical"){var J=0,rt=0;this.get("type")==="color-legend"&&(J=K,F&&(J+=F.getBBox().height)),this.get("slidable")&&(this.get("type")==="color-legend"?J-=13:(J=K-15,F&&(J+=F.getBBox().height)),rt+=10),U=(1-U)*L,G=[[rt,U+J],[rt-10,U+J-5],[rt-10,U+J+5]],Z=n.mix({},{x:H+this.get("textOffset")/2+rt,y:U+J,text:this._formatItemValue(S)+""},this.get("textStyle"),{textAlign:"start"})}else{var vt=0,mt=0;this.get("type")==="color-legend"&&(vt=K,F&&(vt+=F.getBBox().height)),this.get("slidable")&&(this.get("type")==="color-legend"?vt-=7:(vt=K,F||(vt-=7)),mt+=10),U*=H,G=[[U+mt,vt],[U+mt-5,vt-10],[U+mt+5,vt-10]],Z=n.mix({},{x:U-5,y:L+this.get("textOffset")+vt,text:this._formatItemValue(S)+""},this.get("textStyle"))}var ut=n.mix(Z,this.get("hoverTextStyle"));A?A.attr(ut):(A=this.get("group").addShape("text",{attrs:ut}),A.set("id","hoverText")),P?P.attr(n.mix({points:G},this.get("pointerStyle"))):(P=this.get("group").addShape("Polygon",{attrs:n.mix({points:G},this.get("pointerStyle"))}),P.set("id","hoverPointer")),this.get("canvas").draw()}}},x.deactivate=function(){var S=this.get("group").findById("hoverPointer");S&&S.destroy();var P=this.get("group").findById("hoverText");P&&P.destroy(),this.get("canvas").draw()},M}(i);E.exports=g},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(66),i=e(3),a=function(o){h(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return i.mix({},g,{x:0,y:0,items:null,titleContent:null,showTitle:!0,plotRange:null,offset:10,timeStamp:0,inPlot:!0,crosshairs:null})},v.isContentChange=function(g,m){var _=this.get("titleContent"),M=this.get("items"),x=!(g===_&&M.length===m.length);return x||i.each(m,function(y,S){var P=M[S];for(var A in y)if(y.hasOwnProperty(A)&&!i.isObject(y[A])&&y[A]!==P[A]){x=!0;break}if(x)return!1}),x},v.setContent=function(g,m){var _=new Date().valueOf();return this.set("items",m),this.set("titleContent",g),this.set("timeStamp",_),this.render(),this},v.setPosition=function(g,m){this.set("x",g),this.set("y",m)},v.render=function(){},v.clear=function(){},v.show=function(){this.set("visible",!0)},v.hide=function(){this.set("visible",!1)},f}(n);E.exports=a},function(E,T,e){var t=e(16),u=t.Group,s=e(30),c=s.Label,r=e(5),h=e(0),n=["line","point","path"],i="_origin";function a(f){var v=0;return h.each(f,function(b){v+=b}),v/f.length}function o(f,v){if(h.isNumber(f)&&h.isNumber(v))return[f,v];for(var b=-1,g=0,m=0,_,M=f.length-1,x,y=0;++b<f.length;)_=M,M=b,y+=x=f[_]*v[M]-f[M]*v[_],g+=(f[_]+f[M])*x,m+=(v[_]+v[M])*x;return y*=3,[g/y,m/y]}var l=function f(v){f.superclass.constructor.call(this,v)};h.extend(l,u),h.augment(l,{getDefaultCfg:function(){return{label:r.label,labelCfg:null,coord:null,geomType:null,zIndex:6}},_renderUI:function(){l.superclass._renderUI.call(this),this.initLabelsCfg();var v=this.addGroup(),b=this.addGroup({elCls:"x-line-group"}),g=this.get("labelRenderer");this.set("labelsGroup",v),this.set("lineGroup",b),this.get("labelRenderer").set("group",v),g.set("group",v),g.set("lineGroup",b)},initLabelsCfg:function(){var v=this,b=new c,g=v.getDefaultLabelCfg(),m=v.get("labelCfg");h.deepMix(g,m.globalCfg||m.cfg),b.set("config",!1),g.labelLine&&b.set("labelLine",g.labelLine),b.set("coord",v.get("coord")),this.set("labelRenderer",b),v.set("label",g)},getDefaultLabelCfg:function(){var v=this,b=v.get("labelCfg").cfg||v.get("labelCfg").globalCfg,g=v.get("geomType"),m=v.get("viewTheme")||r;return g==="polygon"||b&&b.offset<0&&h.indexOf(n,g)===-1?h.deepMix({},v.get("label"),m.innerLabels,b):h.deepMix({},v.get("label"),m.label,b)},getLabelsItems:function(v,b){var g=this,m=[],_=g.get("geom"),M=g.get("coord");g._getLabelCfgs(v,b);var x=g.get("labelItemCfgs");return h.each(v,function(y,S){var P=y[i],A=x[S];if(!A){m.push(null);return}h.isArray(A.text)||(A.text=[A.text]);var O=A.text.length;h.each(A.text,function(L,H){if(h.isNil(L)||L===""){m.push(null);return}var F=g.getLabelPoint(A,y,H);F=h.mix({},A,F),F.textAlign||(F.textAlign=g.getLabelAlign(F,H,O)),_&&(F._id=_._getShapeId(P)+"-glabel-"+H+"-"+F.text),F.coord=M,m.push(F)})}),m},adjustItems:function(v){return h.each(v,function(b){!b||(b.offsetX&&(b.x+=b.offsetX),b.offsetY&&(b.y+=b.offsetY))}),v},drawLines:function(v){var b=this;h.each(v,function(g){!g||g.offset>0&&b.lineToLabel(g)})},lineToLabel:function(){},getLabelPoint:function(v,b,g){var m=this,_=m.get("coord"),M=v.text.length;function x(O,L){return h.isArray(O)&&(v.text.length===1?O.length<=2?O=O[O.length-1]:O=a(O):O=O[L]),O}var y={text:v.text[g]};if(b&&this.get("geomType")==="polygon"){var S=o(b.x,b.y);y.x=S[0],y.y=S[1]}else y.x=x(b.x,g),y.y=x(b.y,g);if(b&&b.nextPoints&&(b.shape==="funnel"||b.shape==="pyramid")){var P=-Infinity;b.nextPoints.forEach(function(O){O=_.convert(O),O.x>P&&(P=O.x)}),y.x=(y.x+P)/2}b.shape==="pyramid"&&!b.nextPoints&&b.points&&b.points.forEach(function(O){O=_.convert(O),(h.isArray(O.x)&&!b.x.includes(O.x)||h.isNumber(O.x)&&b.x!==O.x)&&(y.x=(y.x+O.x)/2)}),v.position&&m.setLabelPosition(y,b,g,v.position);var A=m.getLabelOffset(v,g,M);return v.offsetX&&(A.x+=v.offsetX),v.offsetY&&(A.y+=v.offsetY),m.transLabelPoint(y),y.start={x:y.x,y:y.y},y.x+=A.x,y.y+=A.y,y.color=b.color,y},setLabelPosition:function(){},transLabelPoint:function(v){var b=this,g=b.get("coord"),m=g.applyMatrix(v.x,v.y,1);v.x=m[0],v.y=m[1]},getOffsetVector:function(v){var b=this,g=v.offset||0,m=b.get("coord"),_;return m.isTransposed?_=m.applyMatrix(g,0):_=m.applyMatrix(0,g),_},getDefaultOffset:function(v){var b=this,g=0,m=b.get("coord"),_=b.getOffsetVector(v);m.isTransposed?g=_[0]:g=_[1];var M=this.get("yScale");if(M&&v.point){var x=v.point[M.field];x<0&&(g=g*-1)}return g},getLabelOffset:function(v,b,g){var m=this,_=m.getDefaultOffset(v),M=m.get("coord"),x=M.isTransposed,y=x?"x":"y",S=x?1:-1,P={x:0,y:0};return b>0||g===1?P[y]=_*S:P[y]=_*S*-1,P},getLabelAlign:function(v,b,g){var m=this,_="center",M=m.get("coord");if(M.isTransposed){var x=m.getDefaultOffset(v);x<0?_="right":x===0?_="center":_="left",g>1&&b===0&&(_==="right"?_="left":_==="left"&&(_="right"))}return _},_getLabelValue:function(v,b){h.isArray(b)||(b=[b]);var g=[];return h.each(b,function(m){var _=v[m.field];if(h.isArray(_)){var M=[];h.each(_,function(x){M.push(m.getText(x))}),_=M}else _=m.getText(_);(h.isNil(_)||_==="")&&g.push(null),g.push(_)}),g},_getLabelCfgs:function(v){var b=this,g=this.get("labelCfg"),m=g.scales,_=this.get("label"),M=b.get("viewTheme")||r,x=[];g.globalCfg&&g.globalCfg.type&&b.set("type",g.globalCfg.type),h.each(v,function(y,S){var P={},A=y[i],O=b._getLabelValue(A,m);if(g.callback){var L=m.map(function(K){return A[K.field]});P=g.callback.apply(null,[].concat(L,[y,S]))}if(!P&&P!==0){x.push(null);return}if(h.isString(P)||h.isNumber(P)?P={text:P}:(P.text=P.content||O[0],delete P.content),P=h.mix({},_,g.globalCfg||{},P),y.point=A,P.point=A,P.htmlTemplate&&(P.useHtml=!0,P.text=P.htmlTemplate.call(null,P.text,y,S),delete P.htmlTemplate),P.formatter&&(P.text=P.formatter.call(null,P.text,y,S),delete P.formatter),P.label){var H=P.label;delete P.label,P=h.mix(P,H)}if(P.textStyle){delete P.textStyle.offset;var F=P.textStyle;h.isFunction(F)&&(P.textStyle=F.call(null,P.text,y,S))}P.labelLine&&(P.labelLine=h.mix({},_.labelLine,P.labelLine)),P.textStyle=h.mix({},_.textStyle,M.label.textStyle,P.textStyle),delete P.items,x.push(P)}),this.set("labelItemCfgs",x)},showLabels:function(v,b){var g=this,m=g.get("labelRenderer"),_=g.getLabelsItems(v,b);b=[].concat(b);var M=g.get("type");_=g.adjustItems(_,b),g.drawLines(_),m.set("items",_.filter(function(x,y){return x?!0:(b.splice(y,1),!1)})),M&&(m.set("shapes",b),m.set("type",M),m.set("points",v)),m.set("canvas",this.get("canvas")),m.draw()},destroy:function(){this.get("labelRenderer").destroy(),l.superclass.destroy.call(this)}}),E.exports=l},function(E,T,e){var t=e(5),u=e(0);function s(r,h){var n=r.length;u.isString(r[0])&&(r=r.map(function(l){return h.translate(l)}));for(var i=r[1]-r[0],a=2;a<n;a++){var o=r[a]-r[a-1];i>o&&(i=o)}return i}var c={getDefaultSize:function(){var h=this.get("defaultSize"),n=this.get("viewTheme")||t;if(!h){var i=this.get("coord"),a=this.getXScale(),o=a.values,l=this.get("dataArray"),f;if(a.isLinear&&o.length>1){o.sort();var v=s(o,a);f=(a.max-a.min)/v,o.length>f&&(f=o.length)}else f=o.length;var b=a.range,g=1/f,m=1;if(this.isInCircle()?i.isTransposed&&f>1?m=n.widthRatio.multiplePie:m=n.widthRatio.rose:(a.isLinear&&(g*=b[1]-b[0]),m=n.widthRatio.column),g*=m,this.hasAdjust("dodge")){var _=this._getDodgeCfg(l),M=_.dodgeCount,x=_.dodgeRatio;g=g/M,x>0&&(g=x*g/m)}h=g,this.set("defaultSize",h)}return h},_getDodgeCfg:function(h){var n=this.get("adjusts"),i,a,o=h.length;if(u.each(n,function(v){v.type==="dodge"&&(i=v.dodgeBy,a=v.dodgeRatio)}),i){var l=u.Array.merge(h),f=u.Array.values(l,i);o=f.length}return{dodgeCount:o,dodgeRatio:a}},getDimWidth:function(h){var n=this.get("coord"),i=n.convertPoint({x:0,y:0}),a=n.convertPoint({x:h==="x"?1:0,y:h==="x"?0:1}),o=0;return i&&a&&(o=Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2))),o},_getWidth:function(){var h=this.get("coord"),n;return this.isInCircle()&&!h.isTransposed?n=(h.endAngle-h.startAngle)*h.radius:n=this.getDimWidth("x"),n},_toNormalizedSize:function(h){var n=this._getWidth();return h/n},_toCoordSize:function(h){var n=this._getWidth();return n*h},getNormalizedSize:function(h){var n=this.getAttrValue("size",h);return u.isNil(n)?n=this.getDefaultSize():n=this._toNormalizedSize(n),n},getSize:function(h){var n=this.getAttrValue("size",h);if(u.isNil(n)){var i=this.getDefaultSize();n=this._toCoordSize(i)}return n}};E.exports=c},function(E,T,e){var t=e(72);E.exports=function(u,s){var c=t(u);if(c&&c[s])return c[s]}},function(E,T){E.exports=function(e){var t=e.get("scaleController")||{};return t.defs}},function(E,T,e){var t=e(0),u=e(52);E.exports=function(s,c){var r,h=c.field,n=c.type,i=t.Array.values(s,h);return n==="linear"?(r=t.Array.getRange(i),c.min<r.min&&(r.min=c.min),c.max>r.max&&(r.max=c.max)):(n==="timeCat"&&(t.each(i,function(a,o){i[o]=u.toTimeStamp(a)}),i.sort(function(a,o){return a-o})),r=i),r}},function(E,T,e){var t=e(1),u=e(7),s=e(37),c=e(50),r=function h(n){h.superclass.constructor.call(this,n)};r.Symbols={circle:function(n,i,a){return[["M",n,i],["m",-a,0],["a",a,a,0,1,0,a*2,0],["a",a,a,0,1,0,-a*2,0]]},square:function(n,i,a){return[["M",n-a,i-a],["L",n+a,i-a],["L",n+a,i+a],["L",n-a,i+a],["Z"]]},diamond:function(n,i,a){return[["M",n-a,i],["L",n,i-a],["L",n+a,i],["L",n,i+a],["Z"]]},triangle:function(n,i,a){var o=a*Math.sin(1/3*Math.PI);return[["M",n-a,i+o],["L",n,i-o],["L",n+a,i+o],["z"]]},"triangle-down":function(n,i,a){var o=a*Math.sin(1/3*Math.PI);return[["M",n-a,i-o],["L",n+a,i-o],["L",n,i+o],["Z"]]}},r.ATTRS={path:null,lineWidth:1},t.extend(r,u),t.augment(r,{type:"marker",canFill:!0,canStroke:!0,getDefaultAttrs:function(){return{x:0,y:0,lineWidth:1}},calculateBox:function(){var n=this._attrs,i=n.x,a=n.y,o=n.radius,l=this.getHitLineWidth(),f=l/2+o;return{minX:i-f,minY:a-f,maxX:i+f,maxY:a+f}},_getPath:function(){var n=this._attrs,i=n.x,a=n.y,o=n.radius||n.r,l=n.symbol||"circle",f;return t.isFunction(l)?f=l:f=r.Symbols[l],f?f(i,a,o):(console.warn(l+" marker is not supported."),null)},createPath:function(n){var i=this._cfg.segments;if(i&&!this._cfg.hasUpdate){n.beginPath();for(var a=0;a<i.length;a++)i[a].draw(n);return}var o=s.parsePath(this._getPath());n.beginPath();var l;i=[];for(var f=0;f<o.length;f++){var v=o[f];l=new c(v,l,f===o.length-1),i.push(l),l.draw(n)}this._cfg.segments=i,this._cfg.hasUpdate=!1}}),E.exports=r},function(E,T,e){var t=e(1),u=t.vec2;function s(a,o,l,f,v){var b=1-v;return b*b*(b*f+3*v*l)+v*v*(v*a+3*b*o)}function c(a,o,l,f,v){var b=1-v;return 3*(((o-a)*b+2*(l-o)*v)*b+(f-l)*v*v)}function r(a,o,l,f,v,b,g,m,_,M,x){var y,S=.005,P=Infinity,A,O,L,H,F,K,G,U=1e-4,Z=[_,M];for(A=0;A<1;A+=.05)O=[s(a,l,v,g,A),s(o,f,b,m,A)],L=u.squaredDistance(Z,O),L<P&&(y=A,P=L);P=Infinity;for(var J=0;J<32&&!(S<U);J++)K=y-S,G=y+S,O=[s(a,l,v,g,K),s(o,f,b,m,K)],L=u.squaredDistance(Z,O),K>=0&&L<P?(y=K,P=L):(F=[s(a,l,v,g,G),s(o,f,b,m,G)],H=u.squaredDistance(Z,F),G<=1&&H<P?(y=G,P=H):S*=.5);return x&&(x.x=s(a,l,v,g,y),x.y=s(o,f,b,m,y)),Math.sqrt(P)}function h(a,o,l,f){var v=3*a-9*o+9*l-3*f,b=6*o-12*l+6*f,g=3*l-3*f,m=[],_,M,x;if(t.isNumberEqual(v,0))t.isNumberEqual(b,0)||(_=-g/b,_>=0&&_<=1&&m.push(_));else{var y=b*b-4*v*g;t.isNumberEqual(y,0)?m.push(-b/(2*v)):y>0&&(x=Math.sqrt(y),_=(-b+x)/(2*v),M=(-b-x)/(2*v),_>=0&&_<=1&&m.push(_),M>=0&&M<=1&&m.push(M))}return m}function n(a,o,l,f,v){var b=-3*o+9*l-9*f+3*v,g=a*b+6*o-12*l+6*f;return a*g-3*o+3*l}function i(a,o,l,f,v,b,g,m,_){t.isNil(_)&&(_=1),_=_>1?1:_<0?0:_;for(var M=_/2,x=12,y=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],S=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],P=0,A=0;A<x;A++){var O=M*y[A]+M,L=n(O,a,l,v,g),H=n(O,o,f,b,m),F=L*L+H*H;P+=S[A]*Math.sqrt(F)}return M*P}E.exports={at:s,derivativeAt:c,projectPoint:function(o,l,f,v,b,g,m,_,M,x){var y={};return r(o,l,f,v,b,g,m,_,M,x,y),y},pointDistance:r,extrema:h,len:i}},function(E,T,e){var t=e(48),u=e(144),s=e(75),c=e(47);E.exports={line:function(h,n,i,a,o,l,f){var v=t.box(h,n,i,a,o);if(!this.box(v.minX,v.maxX,v.minY,v.maxY,l,f))return!1;var b=t.pointDistance(h,n,i,a,l,f);return isNaN(b)?!1:b<=o/2},polyline:function(h,n,i,a){var o=h.length-1;if(o<1)return!1;for(var l=0;l<o;l++){var f=h[l][0],v=h[l][1],b=h[l+1][0],g=h[l+1][1];if(this.line(f,v,b,g,n,i,a))return!0}return!1},cubicline:function(h,n,i,a,o,l,f,v,b,g,m){return s.pointDistance(h,n,i,a,o,l,f,v,g,m)<=b/2},quadraticline:function(h,n,i,a,o,l,f,v,b){return u.pointDistance(h,n,i,a,o,l,v,b)<=f/2},arcline:function(h,n,i,a,o,l,f,v,b){return c.pointDistance(h,n,i,a,o,l,v,b)<=f/2},rect:function(h,n,i,a,o,l){return h<=o&&o<=h+i&&n<=l&&l<=n+a},circle:function(h,n,i,a,o){return Math.pow(a-h,2)+Math.pow(o-n,2)<=Math.pow(i,2)},box:function(h,n,i,a,o,l){return h<=o&&o<=n&&i<=l&&l<=a}}},function(E,T,e){var t=e(150),u=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,s=new RegExp("([a-z])["+u+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+u+"]*,?["+u+"]*)+)","ig"),c=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+u+"]*,?["+u+"]*","ig"),r=function(Mt){if(!Mt)return null;if(typeof Mt==typeof[])return Mt;var St={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},At=[];return String(Mt).replace(s,function(nt,Pt,z){var q=[],gt=Pt.toLowerCase();if(z.replace(c,function(et,at){at&&q.push(+at)}),gt==="m"&&q.length>2&&(At.push([Pt].concat(q.splice(0,2))),gt="l",Pt=Pt==="m"?"l":"L"),gt==="o"&&q.length===1&&At.push([Pt,q[0]]),gt==="r")At.push([Pt].concat(q));else for(;q.length>=St[gt]&&(At.push([Pt].concat(q.splice(0,St[gt]))),!!St[gt]););}),At},h=function(Mt,St){for(var At=[],nt=0,Pt=Mt.length;Pt-2*!St>nt;nt+=2){var z=[{x:+Mt[nt-2],y:+Mt[nt-1]},{x:+Mt[nt],y:+Mt[nt+1]},{x:+Mt[nt+2],y:+Mt[nt+3]},{x:+Mt[nt+4],y:+Mt[nt+5]}];St?nt?Pt-4===nt?z[3]={x:+Mt[0],y:+Mt[1]}:Pt-2===nt&&(z[2]={x:+Mt[0],y:+Mt[1]},z[3]={x:+Mt[2],y:+Mt[3]}):z[0]={x:+Mt[Pt-2],y:+Mt[Pt-1]}:Pt-4===nt?z[3]=z[2]:nt||(z[0]={x:+Mt[nt],y:+Mt[nt+1]}),At.push(["C",(-z[0].x+6*z[1].x+z[2].x)/6,(-z[0].y+6*z[1].y+z[2].y)/6,(z[1].x+6*z[2].x-z[3].x)/6,(z[1].y+6*z[2].y-z[3].y)/6,z[2].x,z[2].y])}return At},n=function(Mt,St,At,nt,Pt){var z=[];if(Pt===null&&nt===null&&(nt=At),Mt=+Mt,St=+St,At=+At,nt=+nt,Pt!==null){var q=Math.PI/180,gt=Mt+At*Math.cos(-nt*q),et=Mt+At*Math.cos(-Pt*q),at=St+At*Math.sin(-nt*q),xt=St+At*Math.sin(-Pt*q);z=[["M",gt,at],["A",At,At,0,+(Pt-nt>180),0,et,xt]]}else z=[["M",Mt,St],["m",0,-nt],["a",At,nt,0,1,1,0,2*nt],["a",At,nt,0,1,1,0,-2*nt],["z"]];return z},i=function(Mt){if(Mt=r(Mt),!Mt||!Mt.length)return[["M",0,0]];var St=[],At=0,nt=0,Pt=0,z=0,q=0,gt,et;Mt[0][0]==="M"&&(At=+Mt[0][1],nt=+Mt[0][2],Pt=At,z=nt,q++,St[0]=["M",At,nt]);for(var at=Mt.length===3&&Mt[0][0]==="M"&&Mt[1][0].toUpperCase()==="R"&&Mt[2][0].toUpperCase()==="Z",xt,k,ot=q,it=Mt.length;ot<it;ot++){if(St.push(xt=[]),k=Mt[ot],gt=k[0],gt!==gt.toUpperCase())switch(xt[0]=gt.toUpperCase(),xt[0]){case"A":xt[1]=k[1],xt[2]=k[2],xt[3]=k[3],xt[4]=k[4],xt[5]=k[5],xt[6]=+k[6]+At,xt[7]=+k[7]+nt;break;case"V":xt[1]=+k[1]+nt;break;case"H":xt[1]=+k[1]+At;break;case"R":et=[At,nt].concat(k.slice(1));for(var $=2,_t=et.length;$<_t;$++)et[$]=+et[$]+At,et[++$]=+et[$]+nt;St.pop(),St=St.concat(h(et,at));break;case"O":St.pop(),et=n(At,nt,k[1],k[2]),et.push(et[0]),St=St.concat(et);break;case"U":St.pop(),St=St.concat(n(At,nt,k[1],k[2],k[3])),xt=["U"].concat(St[St.length-1].slice(-2));break;case"M":Pt=+k[1]+At,z=+k[2]+nt;break;default:for(var yt=1,Nt=k.length;yt<Nt;yt++)xt[yt]=+k[yt]+(yt%2?At:nt)}else if(gt==="R")et=[At,nt].concat(k.slice(1)),St.pop(),St=St.concat(h(et,at)),xt=["R"].concat(k.slice(-2));else if(gt==="O")St.pop(),et=n(At,nt,k[1],k[2]),et.push(et[0]),St=St.concat(et);else if(gt==="U")St.pop(),St=St.concat(n(At,nt,k[1],k[2],k[3])),xt=["U"].concat(St[St.length-1].slice(-2));else for(var $t=0,ee=k.length;$t<ee;$t++)xt[$t]=k[$t];if(gt=gt.toUpperCase(),gt!=="O")switch(xt[0]){case"Z":At=+Pt,nt=+z;break;case"H":At=xt[1];break;case"V":nt=xt[1];break;case"M":Pt=xt[xt.length-2],z=xt[xt.length-1];break;default:At=xt[xt.length-2],nt=xt[xt.length-1]}}return St},a=function(Mt,St,At,nt){return[Mt,St,At,nt,At,nt]},o=function(Mt,St,At,nt,Pt,z){var q=1/3,gt=2/3;return[q*Mt+gt*At,q*St+gt*nt,q*Pt+gt*At,q*z+gt*nt,Pt,z]},l=function wt(Mt,St,At,nt,Pt,z,q,gt,et,at){At===nt&&(At+=1);var xt=Math.PI*120/180,k=Math.PI/180*(+Pt||0),ot=[],it,$,_t,yt,Nt,$t=function(ue,be,Xe){var Rn=ue*Math.cos(Xe)-be*Math.sin(Xe),tr=ue*Math.sin(Xe)+be*Math.cos(Xe);return{x:Rn,y:tr}};if(at)$=at[0],_t=at[1],yt=at[2],Nt=at[3];else{it=$t(Mt,St,-k),Mt=it.x,St=it.y,it=$t(gt,et,-k),gt=it.x,et=it.y,Mt===gt&&St===et&&(gt+=1,et+=1);var ee=(Mt-gt)/2,Gt=(St-et)/2,Ht=ee*ee/(At*At)+Gt*Gt/(nt*nt);Ht>1&&(Ht=Math.sqrt(Ht),At=Ht*At,nt=Ht*nt);var ae=At*At,le=nt*nt,Be=(z===q?-1:1)*Math.sqrt(Math.abs((ae*le-ae*Gt*Gt-le*ee*ee)/(ae*Gt*Gt+le*ee*ee)));yt=Be*At*Gt/nt+(Mt+gt)/2,Nt=Be*-nt*ee/At+(St+et)/2,$=Math.asin(((St-Nt)/nt).toFixed(9)),_t=Math.asin(((et-Nt)/nt).toFixed(9)),$=Mt<yt?Math.PI-$:$,_t=gt<yt?Math.PI-_t:_t,$<0&&($=Math.PI*2+$),_t<0&&(_t=Math.PI*2+_t),q&&$>_t&&($=$-Math.PI*2),!q&&_t>$&&(_t=_t-Math.PI*2)}var Ce=_t-$;if(Math.abs(Ce)>xt){var We=_t,Ye=gt,wn=et;_t=$+xt*(q&&_t>$?1:-1),gt=yt+At*Math.cos(_t),et=Nt+nt*Math.sin(_t),ot=wt(gt,et,At,nt,Pt,0,q,Ye,wn,[_t,We,yt,Nt])}Ce=_t-$;var er=Math.cos($),Lr=Math.sin($),on=Math.cos(_t),en=Math.sin(_t),An=Math.tan(Ce/4),Bn=4/3*At*An,gr=4/3*nt*An,hi=[Mt,St],Ae=[Mt+Bn*Lr,St-gr*er],Me=[gt+Bn*en,et-gr*on],Qt=[gt,et];if(Ae[0]=2*hi[0]-Ae[0],Ae[1]=2*hi[1]-Ae[1],at)return[Ae,Me,Qt].concat(ot);ot=[Ae,Me,Qt].concat(ot).join().split(",");for(var ge=[],Wt=0,re=ot.length;Wt<re;Wt++)ge[Wt]=Wt%2?$t(ot[Wt-1],ot[Wt],k).y:$t(ot[Wt],ot[Wt+1],k).x;return ge},f=function(Mt,St){var At=i(Mt),nt=St&&i(St),Pt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},z={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},q=[],gt=[],et="",at="",xt,k=function(Gt,Ht,ae){var le,Be;if(!Gt)return["C",Ht.x,Ht.y,Ht.x,Ht.y,Ht.x,Ht.y];switch(!(Gt[0]in{T:1,Q:1})&&(Ht.qx=Ht.qy=null),Gt[0]){case"M":Ht.X=Gt[1],Ht.Y=Gt[2];break;case"A":Gt=["C"].concat(l.apply(0,[Ht.x,Ht.y].concat(Gt.slice(1))));break;case"S":ae==="C"||ae==="S"?(le=Ht.x*2-Ht.bx,Be=Ht.y*2-Ht.by):(le=Ht.x,Be=Ht.y),Gt=["C",le,Be].concat(Gt.slice(1));break;case"T":ae==="Q"||ae==="T"?(Ht.qx=Ht.x*2-Ht.qx,Ht.qy=Ht.y*2-Ht.qy):(Ht.qx=Ht.x,Ht.qy=Ht.y),Gt=["C"].concat(o(Ht.x,Ht.y,Ht.qx,Ht.qy,Gt[1],Gt[2]));break;case"Q":Ht.qx=Gt[1],Ht.qy=Gt[2],Gt=["C"].concat(o(Ht.x,Ht.y,Gt[1],Gt[2],Gt[3],Gt[4]));break;case"L":Gt=["C"].concat(a(Ht.x,Ht.y,Gt[1],Gt[2]));break;case"H":Gt=["C"].concat(a(Ht.x,Ht.y,Gt[1],Ht.y));break;case"V":Gt=["C"].concat(a(Ht.x,Ht.y,Ht.x,Gt[1]));break;case"Z":Gt=["C"].concat(a(Ht.x,Ht.y,Ht.X,Ht.Y));break;default:break}return Gt},ot=function(Gt,Ht){if(Gt[Ht].length>7){Gt[Ht].shift();for(var ae=Gt[Ht];ae.length;)q[Ht]="A",nt&&(gt[Ht]="A"),Gt.splice(Ht++,0,["C"].concat(ae.splice(0,6)));Gt.splice(Ht,1),xt=Math.max(At.length,nt&&nt.length||0)}},it=function(Gt,Ht,ae,le,Be){Gt&&Ht&&Gt[Be][0]==="M"&&Ht[Be][0]!=="M"&&(Ht.splice(Be,0,["M",le.x,le.y]),ae.bx=0,ae.by=0,ae.x=Gt[Be][1],ae.y=Gt[Be][2],xt=Math.max(At.length,nt&&nt.length||0))};xt=Math.max(At.length,nt&&nt.length||0);for(var $=0;$<xt;$++){At[$]&&(et=At[$][0]),et!=="C"&&(q[$]=et,$&&(at=q[$-1])),At[$]=k(At[$],Pt,at),q[$]!=="A"&&et==="C"&&(q[$]="C"),ot(At,$),nt&&(nt[$]&&(et=nt[$][0]),et!=="C"&&(gt[$]=et,$&&(at=gt[$-1])),nt[$]=k(nt[$],z,at),gt[$]!=="A"&&et==="C"&&(gt[$]="C"),ot(nt,$)),it(At,nt,Pt,z,$),it(nt,At,z,Pt,$);var _t=At[$],yt=nt&&nt[$],Nt=_t.length,$t=nt&&yt.length;Pt.x=_t[Nt-2],Pt.y=_t[Nt-1],Pt.bx=parseFloat(_t[Nt-4])||Pt.x,Pt.by=parseFloat(_t[Nt-3])||Pt.y,z.bx=nt&&(parseFloat(yt[$t-4])||z.x),z.by=nt&&(parseFloat(yt[$t-3])||z.y),z.x=nt&&yt[$t-2],z.y=nt&&yt[$t-1]}return nt?[At,nt]:At},v=/,?([a-z]),?/gi,b=function(Mt){return Mt.join(",").replace(v,"$1")},g=function(Mt,St,At,nt,Pt){var z=-3*St+9*At-9*nt+3*Pt,q=Mt*z+6*St-12*At+6*nt;return Mt*q-3*St+3*At},m=function(Mt,St,At,nt,Pt,z,q,gt,et){et===null&&(et=1),et=et>1?1:et<0?0:et;for(var at=et/2,xt=12,k=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ot=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],it=0,$=0;$<xt;$++){var _t=at*k[$]+at,yt=g(_t,Mt,At,Pt,q),Nt=g(_t,St,nt,z,gt),$t=yt*yt+Nt*Nt;it+=ot[$]*Math.sqrt($t)}return at*it},_=function(Mt,St,At,nt,Pt,z,q,gt){for(var et=[],at=[[],[]],xt,k,ot,it,$=0;$<2;++$){if($===0?(k=6*Mt-12*At+6*Pt,xt=-3*Mt+9*At-9*Pt+3*q,ot=3*At-3*Mt):(k=6*St-12*nt+6*z,xt=-3*St+9*nt-9*z+3*gt,ot=3*nt-3*St),Math.abs(xt)<1e-12){if(Math.abs(k)<1e-12)continue;it=-ot/k,it>0&&it<1&&et.push(it);continue}var _t=k*k-4*ot*xt,yt=Math.sqrt(_t);if(!(_t<0)){var Nt=(-k+yt)/(2*xt);Nt>0&&Nt<1&&et.push(Nt);var $t=(-k-yt)/(2*xt);$t>0&&$t<1&&et.push($t)}}for(var ee=et.length,Gt=ee,Ht;ee--;)it=et[ee],Ht=1-it,at[0][ee]=Ht*Ht*Ht*Mt+3*Ht*Ht*it*At+3*Ht*it*it*Pt+it*it*it*q,at[1][ee]=Ht*Ht*Ht*St+3*Ht*Ht*it*nt+3*Ht*it*it*z+it*it*it*gt;return at[0][Gt]=Mt,at[1][Gt]=St,at[0][Gt+1]=q,at[1][Gt+1]=gt,at[0].length=at[1].length=Gt+2,{min:{x:Math.min.apply(0,at[0]),y:Math.min.apply(0,at[1])},max:{x:Math.max.apply(0,at[0]),y:Math.max.apply(0,at[1])}}},M=function(Mt,St,At,nt,Pt,z,q,gt){if(!(Math.max(Mt,At)<Math.min(Pt,q)||Math.min(Mt,At)>Math.max(Pt,q)||Math.max(St,nt)<Math.min(z,gt)||Math.min(St,nt)>Math.max(z,gt))){var et=(Mt*nt-St*At)*(Pt-q)-(Mt-At)*(Pt*gt-z*q),at=(Mt*nt-St*At)*(z-gt)-(St-nt)*(Pt*gt-z*q),xt=(Mt-At)*(z-gt)-(St-nt)*(Pt-q);if(!!xt){var k=et/xt,ot=at/xt,it=+k.toFixed(2),$=+ot.toFixed(2);if(!(it<+Math.min(Mt,At).toFixed(2)||it>+Math.max(Mt,At).toFixed(2)||it<+Math.min(Pt,q).toFixed(2)||it>+Math.max(Pt,q).toFixed(2)||$<+Math.min(St,nt).toFixed(2)||$>+Math.max(St,nt).toFixed(2)||$<+Math.min(z,gt).toFixed(2)||$>+Math.max(z,gt).toFixed(2)))return{x:k,y:ot}}}},x=function(Mt,St,At){return St>=Mt.x&&St<=Mt.x+Mt.width&&At>=Mt.y&&At<=Mt.y+Mt.height},y=function(Mt,St,At,nt,Pt){if(Pt)return[["M",+Mt+ +Pt,St],["l",At-Pt*2,0],["a",Pt,Pt,0,0,1,Pt,Pt],["l",0,nt-Pt*2],["a",Pt,Pt,0,0,1,-Pt,Pt],["l",Pt*2-At,0],["a",Pt,Pt,0,0,1,-Pt,-Pt],["l",0,Pt*2-nt],["a",Pt,Pt,0,0,1,Pt,-Pt],["z"]];var z=[["M",Mt,St],["l",At,0],["l",0,nt],["l",-At,0],["z"]];return z.parsePathArray=b,z},S=function(Mt,St,At,nt){return Mt===null&&(Mt=St=At=nt=0),St===null&&(St=Mt.y,At=Mt.width,nt=Mt.height,Mt=Mt.x),{x:Mt,y:St,width:At,w:At,height:nt,h:nt,x2:Mt+At,y2:St+nt,cx:Mt+At/2,cy:St+nt/2,r1:Math.min(At,nt)/2,r2:Math.max(At,nt)/2,r0:Math.sqrt(At*At+nt*nt)/2,path:y(Mt,St,At,nt),vb:[Mt,St,At,nt].join(" ")}},P=function(Mt,St){return Mt=S(Mt),St=S(St),x(St,Mt.x,Mt.y)||x(St,Mt.x2,Mt.y)||x(St,Mt.x,Mt.y2)||x(St,Mt.x2,Mt.y2)||x(Mt,St.x,St.y)||x(Mt,St.x2,St.y)||x(Mt,St.x,St.y2)||x(Mt,St.x2,St.y2)||(Mt.x<St.x2&&Mt.x>St.x||St.x<Mt.x2&&St.x>Mt.x)&&(Mt.y<St.y2&&Mt.y>St.y||St.y<Mt.y2&&St.y>Mt.y)},A=function(Mt,St,At,nt,Pt,z,q,gt){t.isArray(Mt)||(Mt=[Mt,St,At,nt,Pt,z,q,gt]);var et=_.apply(null,Mt);return S(et.min.x,et.min.y,et.max.x-et.min.x,et.max.y-et.min.y)},O=function(Mt,St,At,nt,Pt,z,q,gt,et){var at=1-et,xt=Math.pow(at,3),k=Math.pow(at,2),ot=et*et,it=ot*et,$=xt*Mt+k*3*et*At+at*3*et*et*Pt+it*q,_t=xt*St+k*3*et*nt+at*3*et*et*z+it*gt,yt=Mt+2*et*(At-Mt)+ot*(Pt-2*At+Mt),Nt=St+2*et*(nt-St)+ot*(z-2*nt+St),$t=At+2*et*(Pt-At)+ot*(q-2*Pt+At),ee=nt+2*et*(z-nt)+ot*(gt-2*z+nt),Gt=at*Mt+et*At,Ht=at*St+et*nt,ae=at*Pt+et*q,le=at*z+et*gt,Be=90-Math.atan2(yt-$t,Nt-ee)*180/Math.PI;return{x:$,y:_t,m:{x:yt,y:Nt},n:{x:$t,y:ee},start:{x:Gt,y:Ht},end:{x:ae,y:le},alpha:Be}},L=function(Mt,St,At){var nt=A(Mt),Pt=A(St);if(!P(nt,Pt))return At?0:[];for(var z=m.apply(0,Mt),q=m.apply(0,St),gt=~~(z/8),et=~~(q/8),at=[],xt=[],k={},ot=At?0:[],it=0;it<gt+1;it++){var $=O.apply(0,Mt.concat(it/gt));at.push({x:$.x,y:$.y,t:it/gt})}for(var _t=0;_t<et+1;_t++){var yt=O.apply(0,St.concat(_t/et));xt.push({x:yt.x,y:yt.y,t:_t/et})}for(var Nt=0;Nt<gt;Nt++)for(var $t=0;$t<et;$t++){var ee=at[Nt],Gt=at[Nt+1],Ht=xt[$t],ae=xt[$t+1],le=Math.abs(Gt.x-ee.x)<.001?"y":"x",Be=Math.abs(ae.x-Ht.x)<.001?"y":"x",Ce=M(ee.x,ee.y,Gt.x,Gt.y,Ht.x,Ht.y,ae.x,ae.y);if(Ce){if(k[Ce.x.toFixed(4)]===Ce.y.toFixed(4))continue;k[Ce.x.toFixed(4)]=Ce.y.toFixed(4);var We=ee.t+Math.abs((Ce[le]-ee[le])/(Gt[le]-ee[le]))*(Gt.t-ee.t),Ye=Ht.t+Math.abs((Ce[Be]-Ht[Be])/(ae[Be]-Ht[Be]))*(ae.t-Ht.t);We>=0&&We<=1&&Ye>=0&&Ye<=1&&(At?ot++:ot.push({x:Ce.x,y:Ce.y,t1:We,t2:Ye}))}}return ot},H=function(Mt,St,At){Mt=f(Mt),St=f(St);for(var nt,Pt,z,q,gt,et,at,xt,k,ot,it=At?0:[],$=0,_t=Mt.length;$<_t;$++){var yt=Mt[$];if(yt[0]==="M")nt=gt=yt[1],Pt=et=yt[2];else{yt[0]==="C"?(k=[nt,Pt].concat(yt.slice(1)),nt=k[6],Pt=k[7]):(k=[nt,Pt,nt,Pt,gt,et,gt,et],nt=gt,Pt=et);for(var Nt=0,$t=St.length;Nt<$t;Nt++){var ee=St[Nt];if(ee[0]==="M")z=at=ee[1],q=xt=ee[2];else{ee[0]==="C"?(ot=[z,q].concat(ee.slice(1)),z=ot[6],q=ot[7]):(ot=[z,q,z,q,at,xt,at,xt],z=at,q=xt);var Gt=L(k,ot,At);if(At)it+=Gt;else{for(var Ht=0,ae=Gt.length;Ht<ae;Ht++)Gt[Ht].segment1=$,Gt[Ht].segment2=Nt,Gt[Ht].bez1=k,Gt[Ht].bez2=ot;it=it.concat(Gt)}}}}}return it},F=function(Mt,St){return H(Mt,St)};function K(wt,Mt){var St=[],At=[];function nt(Pt,z){if(Pt.length===1)St.push(Pt[0]),At.push(Pt[0]);else{for(var q=[],gt=0;gt<Pt.length-1;gt++)gt===0&&St.push(Pt[0]),gt===Pt.length-2&&At.push(Pt[gt+1]),q[gt]=[(1-z)*Pt[gt][0]+z*Pt[gt+1][0],(1-z)*Pt[gt][1]+z*Pt[gt+1][1]];nt(q,z)}}return wt.length&&nt(wt,Mt),{left:St,right:At.reverse()}}function G(wt,Mt,St){var At=[[wt[1],wt[2]]];St=St||2;var nt=[];Mt[0]==="A"?(At.push(Mt[6]),At.push(Mt[7])):Mt[0]==="C"?(At.push([Mt[1],Mt[2]]),At.push([Mt[3],Mt[4]]),At.push([Mt[5],Mt[6]])):Mt[0]==="S"||Mt[0]==="Q"?(At.push([Mt[1],Mt[2]]),At.push([Mt[3],Mt[4]])):At.push([Mt[1],Mt[2]]);for(var Pt=At,z=1/St,q=0;q<St-1;q++){var gt=z/(1-z*q),et=K(Pt,gt);nt.push(et.left),Pt=et.right}nt.push(Pt);var at=nt.map(function(xt){var k=[];return xt.length===4&&(k.push("C"),k=k.concat(xt[2])),xt.length>=3&&(xt.length===3&&k.push("Q"),k=k.concat(xt[1])),xt.length===2&&k.push("L"),k=k.concat(xt[xt.length-1]),k});return at}var U=function(Mt,St,At){if(At===1)return[[].concat(Mt)];var nt=[];if(St[0]==="L"||St[0]==="C"||St[0]==="Q")nt=nt.concat(G(Mt,St,At));else{var Pt=[].concat(Mt);Pt[0]==="M"&&(Pt[0]="L");for(var z=0;z<=At-1;z++)nt.push(Pt)}return nt},Z=function(Mt,St){if(Mt.length===1)return Mt;var At=Mt.length-1,nt=St.length-1,Pt=At/nt,z=[];if(Mt.length===1&&Mt[0][0]==="M"){for(var q=0;q<nt-At;q++)Mt.push(Mt[0]);return Mt}for(var gt=0;gt<nt;gt++){var et=Math.floor(Pt*gt);z[et]=(z[et]||0)+1}var at=z.reduce(function(xt,k,ot){return ot===At?xt.concat(Mt[At]):xt.concat(U(Mt[ot],Mt[ot+1],k))},[]);return at.unshift(Mt[0]),(St[nt]==="Z"||St[nt]==="z")&&at.push("Z"),at},J=function(Mt,St){if(Mt.length!==St.length)return!1;var At=!0;return t.each(Mt,function(nt,Pt){if(nt!==St[Pt])return At=!1,!1}),At};function rt(wt,Mt,St){var At=null,nt=St;return Mt<nt&&(nt=Mt,At="add"),wt<nt&&(nt=wt,At="del"),{type:At,min:nt}}var vt=function(Mt,St){var At=Mt.length,nt=St.length,Pt,z,q=0;if(At===0||nt===0)return null;for(var gt=[],et=0;et<=At;et++)gt[et]=[],gt[et][0]={min:et};for(var at=0;at<=nt;at++)gt[0][at]={min:at};for(var xt=1;xt<=At;xt++){Pt=Mt[xt-1];for(var k=1;k<=nt;k++){z=St[k-1],J(Pt,z)?q=0:q=1;var ot=gt[xt-1][k].min+1,it=gt[xt][k-1].min+1,$=gt[xt-1][k-1].min+q;gt[xt][k]=rt(ot,it,$)}}return gt},mt=function(Mt,St){var At=vt(Mt,St),nt=Mt.length,Pt=St.length,z=[],q=1,gt=1;if(At[nt][Pt]!==nt){for(var et=1;et<=nt;et++){var at=At[et][et].min;gt=et;for(var xt=q;xt<=Pt;xt++)At[et][xt].min<at&&(at=At[et][xt].min,gt=xt);q=gt,At[et][q].type&&z.push({index:et-1,type:At[et][q].type})}for(var k=z.length-1;k>=0;k--)q=z[k].index,z[k].type==="add"?Mt.splice(q,0,[].concat(Mt[q])):Mt.splice(q,1)}nt=Mt.length;var ot=Pt-nt;if(nt<Pt)for(var it=0;it<ot;it++)Mt[nt-1][0]==="z"||Mt[nt-1][0]==="Z"?Mt.splice(nt-2,0,Mt[nt-2]):Mt.push(Mt[nt-1]),nt+=1;return Mt};function ut(wt,Mt,St){for(var At=[].concat(wt),nt,Pt=1/(St+1),z=Rt(Mt)[0],q=1;q<=St;q++)Pt*=q,nt=Math.floor(wt.length*Pt),nt===0?At.unshift([z[0]*Pt+wt[nt][0]*(1-Pt),z[1]*Pt+wt[nt][1]*(1-Pt)]):At.splice(nt,0,[z[0]*Pt+wt[nt][0]*(1-Pt),z[1]*Pt+wt[nt][1]*(1-Pt)]);return At}function Rt(wt){var Mt=[];switch(wt[0]){case"M":Mt.push([wt[1],wt[2]]);break;case"L":Mt.push([wt[1],wt[2]]);break;case"A":Mt.push([wt[6],wt[7]]);break;case"Q":Mt.push([wt[3],wt[4]]),Mt.push([wt[1],wt[2]]);break;case"T":Mt.push([wt[1],wt[2]]);break;case"C":Mt.push([wt[5],wt[6]]),Mt.push([wt[1],wt[2]]),Mt.push([wt[3],wt[4]]);break;case"S":Mt.push([wt[3],wt[4]]),Mt.push([wt[1],wt[2]]);break;case"H":Mt.push([wt[1],wt[1]]);break;case"V":Mt.push([wt[1],wt[1]]);break;default:}return Mt}var Ft=function(Mt,St){if(Mt.length<=1)return Mt;for(var At,nt=0;nt<St.length;nt++)if(Mt[nt][0]!==St[nt][0])switch(At=Rt(Mt[nt]),St[nt][0]){case"M":Mt[nt]=["M"].concat(At[0]);break;case"L":Mt[nt]=["L"].concat(At[0]);break;case"A":Mt[nt]=[].concat(St[nt]),Mt[nt][6]=At[0][0],Mt[nt][7]=At[0][1];break;case"Q":if(At.length<2)if(nt>0)At=ut(At,Mt[nt-1],1);else{Mt[nt]=St[nt];break}Mt[nt]=["Q"].concat(At.reduce(function(Pt,z){return Pt.concat(z)},[]));break;case"T":Mt[nt]=["T"].concat(At[0]);break;case"C":if(At.length<3)if(nt>0)At=ut(At,Mt[nt-1],2);else{Mt[nt]=St[nt];break}Mt[nt]=["C"].concat(At.reduce(function(Pt,z){return Pt.concat(z)},[]));break;case"S":if(At.length<2)if(nt>0)At=ut(At,Mt[nt-1],1);else{Mt[nt]=St[nt];break}Mt[nt]=["S"].concat(At.reduce(function(Pt,z){return Pt.concat(z)},[]));break;default:Mt[nt]=St[nt]}return Mt};E.exports={parsePathString:r,parsePathArray:b,pathTocurve:f,pathToAbsolute:i,catmullRomToBezier:h,rectPath:y,fillPath:Z,fillPathByDiff:mt,formatPath:Ft,intersection:F}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.setMatrixArrayType=c,T.toRadian=h,T.equals=n;var t=T.EPSILON=1e-6,u=T.ARRAY_TYPE=typeof Float32Array!="undefined"?Float32Array:Array,s=T.RANDOM=Math.random;function c(i){T.ARRAY_TYPE=u=i}var r=Math.PI/180;function h(i){return i*r}function n(i,a){return Math.abs(i-a)<=t*Math.max(1,Math.abs(i),Math.abs(a))}},function(E,T,e){var t=e(6),u=e(4),s=e(2);E.exports=function(r,h){for(var n=[],i={},a=0;a<r.length;a++){var o=r[a],l=o[h];t(l)||(u(l)||(l=[l]),s(l,function(f){i[f]||(n.push(f),i[f]=!0)}))}return n}},function(E,T,e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},u=e(4),s=function c(r){if((typeof r=="undefined"?"undefined":t(r))!=="object"||r===null)return r;var h=void 0;if(u(r)){h=[];for(var n=0,i=r.length;n<i;n++)t(r[n])==="object"&&r[n]!=null?h[n]=c(r[n]):h[n]=r[n]}else{h={};for(var a in r)t(r[a])==="object"&&r[a]!=null?h[a]=c(r[a]):h[a]=r[a]}return h};E.exports=s},function(E,T,e){var t=e(40),u=e(4),s=5;function c(h,n,i,a){i=i||0,a=a||s;for(var o in n)if(n.hasOwnProperty(o)){var l=n[o];l!==null&&t(l)?(t(h[o])||(h[o]={}),i<a?c(h[o],l,i+1,a):h[o]=n[o]):u(l)?(h[o]=[],h[o]=h[o].concat(l)):l!==void 0&&(h[o]=l)}}var r=function(){for(var n=new Array(arguments.length),i=n.length,a=0;a<i;a++)n[a]=arguments[a];for(var o=n[0],l=1;l<i;l++)c(o,n[l]);return o};E.exports=r},function(E,T,e){var t=e(2),u=e(21),s=function(r,h){if(!u(r))return r;var n=[];return t(r,function(i,a){h(i,a)&&n.push(i)}),n};E.exports=s},function(E,T,e){var t=e(86),u=e(21),s=e(15),c=function r(h,n){if(h===n)return!0;if(!h||!n||s(h)||s(n))return!1;if(u(h)||u(n)){if(h.length!==n.length)return!1;for(var i=!0,a=0;a<h.length&&(i=r(h[a],n[a]),!!i);a++);return i}if(t(h)||t(n)){var o=Object.keys(h),l=Object.keys(n);if(o.length!==l.length)return!1;for(var f=!0,v=0;v<o.length&&(f=r(h[o[v]],n[o[v]]),!!f);v++);return f}return!1};E.exports=c},function(E,T){var e=function(u,s,c){return u<s?s:u>c?c:u};E.exports=e},function(E,T,e){var t=e(348);t.translate=function(u,s,c){var r=new Array(9);return t.fromTranslation(r,c),t.multiply(u,r,s)},t.rotate=function(u,s,c){var r=new Array(9);return t.fromRotation(r,c),t.multiply(u,r,s)},t.scale=function(u,s,c){var r=new Array(9);return t.fromScaling(r,c),t.multiply(u,r,s)},E.exports=t},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t=function(s){return(typeof s=="undefined"?"undefined":e(s))==="object"&&s!==null};E.exports=t},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={Chart:"deleteChart",Coord:"deleteCoord",Geom:"deleteGeom",Axis:"deleteAxis",Tooltip:"deleteTooltip",Legend:"deleteLegend",Label:"deleteLabel",View:"deleteView",Guide:"deleteGuide",GuideLine:"deleteTypedGuide",GuideImage:"deleteTypedGuide",GuideText:"deleteTypedGuide",GuideRegion:"deleteTypedGuide",GuideHtml:"deleteTypedGuide",GuideArc:"deleteTypedGuide",GuideRegionFilter:"deleteTypedGuide",GuideDataMarker:"deleteTypedGuide",GuideDataRegion:"deleteTypedGuide",Facet:"deleteFacet"},u={merge:function(c,r,h,n){this.mergeDelete(c,r,h),this.mergeUpdate(c,n)},mergeDelete:function(c,r,h){var n=this;Object.keys(r).forEach(function(i){var a=t[h[i].name],o=c;h[i].viewId&&(o=c.views[h[i].viewId]),n[a]&&n[a](o,i,h[i].parentInfo.id)})},deleteAxis:function(c,r){!c||delete c.axises[r]},deleteTooltip:function(c){!c||delete c.tooltip},deleteCoord:function(c){!c||delete c.coord},deleteLegend:function(c,r){!c||delete c.legends[r]},deleteGuide:function(c){!c||delete c.guide},deleteGeom:function(c,r){!c||!c.geoms||delete c.geoms[r]},deleteLabel:function(c,r,h){!c||!c.geoms||!c.geoms[h]||delete c.geoms[h].label},deleteFacet:function(c){!c||delete c.facet},deleteTypedGuide:function(c,r){!c||!c.guide||delete c.guide.elements[r]},deleteView:function(c,r){!c||delete c.views[r]},mergeUpdate:function(c,r){this.mergeChart(c,r),this.mergeAxises(c,r),this.mergeCoord(c,r),this.mergeGeoms(c.geoms,r),this.mergeLegends(c.legends,r),this.mergeTooltip(c,r),this.mergeViews(c.views,r),this.mergeGuide(c.guide,r)},mergeChart:function(c,r){c.chart&&c.chart.updateProps&&(c.chart.props=c.chart.updateProps),r&&delete c.chart.g2Instance},mergeAxises:function(c,r){var h=c.axises;if(!h!=null)for(var n in h)h[n]&&h[n].updateProps&&(h[n].props=h[n].updateProps),r&&delete h[n].g2Instance},mergeTooltip:function(c,r){!c.tooltip||(r&&delete c.tooltip.g2Instance,c.tooltip.updateProps&&(c.tooltip.props=c.tooltip.updateProps))},mergeCoord:function(c,r){!c.coord||(r&&delete c.coord.g2Instance,c.coord.updateProps&&(c.coord.props=c.coord.updateProps))},mergeLegends:function(c,r){if(!!c){for(var h in c)if(c[h]){var n=c[h];r&&delete n.g2Instance,n.updateProps&&(n.props=n.updateProps)}}},mergeGeoms:function(c,r){if(c!=null)for(var h in c)c[h]&&(r&&(delete c[h].g2Instance,c[h].label&&c[h].label.g2Instance&&(c[h].label.updateProps&&(c[h].label.props=c[h].label.updateProps),delete c[h].label.g2Instance)),c[h].updateProps&&(c[h].props=c[h].updateProps))},mergeGuide:function(c,r){if(c!=null){var h=c.elements;for(var n in h)h[n]&&(r&&delete h[n].g2Instance,h[n].updateProps&&(h[n].props=h[n].updateProps))}},mergeView:function(c,r){!c||(r&&c.g2Instance&&delete c.g2Instance,c.updateProps&&(c.props=c.updateProps),this.mergeCoord(c,r),this.mergeAxises(c,r),this.mergeGeoms(c.geoms,r),this.mergeGuide(c.guide,r))},mergeViews:function(c,r){if(c!=null)for(var h in c)c[h]&&this.mergeView(c[h],r)}};T.default=u},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Prop=T.Util=void 0;var t=e(58),u=r(t),s=e(437),c=r(s);function r(h){return h&&h.__esModule?h:{default:h}}T.Util=u.default,T.Prop=c.default},function(E,T,e){"use strict";T.c=u,e.d(T,"e",function(){return s}),e.d(T,"d",function(){return c}),T.h=x,T.b=P,T.g=A,T.a=O,T.f=U;var t=e(90);function u(){}var s=.7,c=1/s,r="\\s*([+-]?\\d+)\\s*",h="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,a=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),o=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),l=new RegExp("^rgba\\("+[r,r,r,h]+"\\)$"),f=new RegExp("^rgba\\("+[n,n,n,h]+"\\)$"),v=new RegExp("^hsl\\("+[h,n,n]+"\\)$"),b=new RegExp("^hsla\\("+[h,n,n,h]+"\\)$"),g={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e.i(t.a)(u,x,{copy:function(rt){return Object.assign(new this.constructor,this,rt)},displayable:function(){return this.rgb().displayable()},hex:m,formatHex:m,formatHsl:_,formatRgb:M,toString:M});function m(){return this.rgb().formatHex()}function _(){return G(this).formatHsl()}function M(){return this.rgb().formatRgb()}function x(rt){var vt,mt;return rt=(rt+"").trim().toLowerCase(),(vt=i.exec(rt))?(mt=vt[1].length,vt=parseInt(vt[1],16),mt===6?y(vt):mt===3?new O(vt>>8&15|vt>>4&240,vt>>4&15|vt&240,(vt&15)<<4|vt&15,1):mt===8?S(vt>>24&255,vt>>16&255,vt>>8&255,(vt&255)/255):mt===4?S(vt>>12&15|vt>>8&240,vt>>8&15|vt>>4&240,vt>>4&15|vt&240,((vt&15)<<4|vt&15)/255):null):(vt=a.exec(rt))?new O(vt[1],vt[2],vt[3],1):(vt=o.exec(rt))?new O(vt[1]*255/100,vt[2]*255/100,vt[3]*255/100,1):(vt=l.exec(rt))?S(vt[1],vt[2],vt[3],vt[4]):(vt=f.exec(rt))?S(vt[1]*255/100,vt[2]*255/100,vt[3]*255/100,vt[4]):(vt=v.exec(rt))?K(vt[1],vt[2]/100,vt[3]/100,1):(vt=b.exec(rt))?K(vt[1],vt[2]/100,vt[3]/100,vt[4]):g.hasOwnProperty(rt)?y(g[rt]):rt==="transparent"?new O(NaN,NaN,NaN,0):null}function y(rt){return new O(rt>>16&255,rt>>8&255,rt&255,1)}function S(rt,vt,mt,ut){return ut<=0&&(rt=vt=mt=NaN),new O(rt,vt,mt,ut)}function P(rt){return rt instanceof u||(rt=x(rt)),rt?(rt=rt.rgb(),new O(rt.r,rt.g,rt.b,rt.opacity)):new O}function A(rt,vt,mt,ut){return arguments.length===1?P(rt):new O(rt,vt,mt,ut==null?1:ut)}function O(rt,vt,mt,ut){this.r=+rt,this.g=+vt,this.b=+mt,this.opacity=+ut}e.i(t.a)(O,A,e.i(t.b)(u,{brighter:function(rt){return rt=rt==null?c:Math.pow(c,rt),new O(this.r*rt,this.g*rt,this.b*rt,this.opacity)},darker:function(rt){return rt=rt==null?s:Math.pow(s,rt),new O(this.r*rt,this.g*rt,this.b*rt,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:L,formatHex:L,formatRgb:H,toString:H}));function L(){return"#"+F(this.r)+F(this.g)+F(this.b)}function H(){var rt=this.opacity;return rt=isNaN(rt)?1:Math.max(0,Math.min(1,rt)),(rt===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(rt===1?")":", "+rt+")")}function F(rt){return rt=Math.max(0,Math.min(255,Math.round(rt)||0)),(rt<16?"0":"")+rt.toString(16)}function K(rt,vt,mt,ut){return ut<=0?rt=vt=mt=NaN:mt<=0||mt>=1?rt=vt=NaN:vt<=0&&(rt=NaN),new Z(rt,vt,mt,ut)}function G(rt){if(rt instanceof Z)return new Z(rt.h,rt.s,rt.l,rt.opacity);if(rt instanceof u||(rt=x(rt)),!rt)return new Z;if(rt instanceof Z)return rt;rt=rt.rgb();var vt=rt.r/255,mt=rt.g/255,ut=rt.b/255,Rt=Math.min(vt,mt,ut),Ft=Math.max(vt,mt,ut),wt=NaN,Mt=Ft-Rt,St=(Ft+Rt)/2;return Mt?(vt===Ft?wt=(mt-ut)/Mt+(mt<ut)*6:mt===Ft?wt=(ut-vt)/Mt+2:wt=(vt-mt)/Mt+4,Mt/=St<.5?Ft+Rt:2-Ft-Rt,wt*=60):Mt=St>0&&St<1?0:wt,new Z(wt,Mt,St,rt.opacity)}function U(rt,vt,mt,ut){return arguments.length===1?G(rt):new Z(rt,vt,mt,ut==null?1:ut)}function Z(rt,vt,mt,ut){this.h=+rt,this.s=+vt,this.l=+mt,this.opacity=+ut}e.i(t.a)(Z,U,e.i(t.b)(u,{brighter:function(rt){return rt=rt==null?c:Math.pow(c,rt),new Z(this.h,this.s,this.l*rt,this.opacity)},darker:function(rt){return rt=rt==null?s:Math.pow(s,rt),new Z(this.h,this.s,this.l*rt,this.opacity)},rgb:function(){var rt=this.h%360+(this.h<0)*360,vt=isNaN(rt)||isNaN(this.s)?0:this.s,mt=this.l,ut=mt+(mt<.5?mt:1-mt)*vt,Rt=2*mt-ut;return new O(J(rt>=240?rt-240:rt+120,Rt,ut),J(rt,Rt,ut),J(rt<120?rt+240:rt-120,Rt,ut),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var rt=this.opacity;return rt=isNaN(rt)?1:Math.max(0,Math.min(1,rt)),(rt===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(rt===1?")":", "+rt+")")}}));function J(rt,vt,mt){return(rt<60?vt+(mt-vt)*rt/60:rt<180?mt:rt<240?vt+(mt-vt)*(240-rt)/60:vt)*255}},function(E,T,e){"use strict";T.b=t,T.a=function(u,s,c){u.prototype=s.prototype=c,c.constructor=u};function t(u,s){var c=Object.create(u.prototype);for(var r in s)c[r]=s[r];return c}},function(E,T,e){"use strict";T.b=t;function t(u,s,c,r,h){var n=u*u,i=n*u;return((1-3*u+3*n-i)*s+(4-6*n+3*i)*c+(1+3*u+3*n-3*i)*r+i*h)/6}T.a=function(u){var s=u.length-1;return function(c){var r=c<=0?c=0:c>=1?(c=1,s-1):Math.floor(c*s),h=u[r],n=u[r+1],i=r>0?u[r-1]:2*h-n,a=r<s-1?u[r+2]:2*n-h;return t((c-r/s)*s,i,h,n,a)}}},function(E,T,e){"use strict";var t=e(12),u=e(205),s=e(200),c=e(203),r=e(59),h=e(204),n=e(206),i=e(202);T.a=function(a,o){var l=typeof o,f;return o==null||l==="boolean"?e.i(i.a)(o):(l==="number"?r.a:l==="string"?(f=e.i(t.f)(o))?(o=f,u.a):n.a:o instanceof t.f?u.a:o instanceof Date?c.a:Array.isArray(o)?s.a:typeof o.valueOf!="function"&&typeof o.toString!="function"||isNaN(o)?h.a:r.a)(a,o)}},function(E,T,e){"use strict";T.b=t;function t(u,s,c,r,h){var n=u*u,i=n*u;return((1-3*u+3*n-i)*s+(4-6*n+3*i)*c+(1+3*u+3*n-3*i)*r+i*h)/6}T.a=function(u){var s=u.length-1;return function(c){var r=c<=0?c=0:c>=1?(c=1,s-1):Math.floor(c*s),h=u[r],n=u[r+1],i=r>0?u[r-1]:2*h-n,a=r<s-1?u[r+2]:2*n-h;return t((c-r/s)*s,i,h,n,a)}}},function(E,T,e){"use strict";var t=e(96),u=e(207),s=e(93),c=e(208),r=e(210),h=e(465),n=e(468),i=e(60);e.d(T,"b",function(){return i.a});var a=e(95),o=e(211),l=e(472),f=e(213);e.d(T,"d",function(){return f.a});var v=e(474);e.d(T,"a",function(){return v.a}),e.d(T,"e",function(){return v.b});var b=e(476),g=e(212);e.d(T,"c",function(){return g.a});var m=e(467),_=e(469),M=e(466),x=e(464),y=e(470),S=e(471)},function(E,T,e){"use strict";T.a=t,T.b=function(u,s){s||(s=[]);var c=u?Math.min(s.length,u.length):0,r=s.slice(),h;return function(n){for(h=0;h<c;++h)r[h]=u[h]*(1-n)+s[h]*n;return r}};function t(u){return ArrayBuffer.isView(u)&&!(u instanceof DataView)}},function(E,T,e){"use strict";var t=e(12),u=e(212),s=e(207),c=e(210),r=e(60),h=e(211),n=e(213),i=e(209),a=e(95);T.a=function(o,l){var f=typeof l,v;return l==null||f==="boolean"?e.i(i.a)(l):(f==="number"?r.a:f==="string"?(v=e.i(t.f)(l))?(l=v,u.a):n.a:l instanceof t.f?u.a:l instanceof Date?c.a:e.i(a.a)(l)?a.b:Array.isArray(l)?s.a:typeof l.valueOf!="function"&&typeof l.toString!="function"||isNaN(l)?h.a:r.a)(o,l)}},function(E,T,e){"use strict";var t=e(98);T.a=function(u){var s=u+="",c=s.indexOf(":");return c>=0&&(s=u.slice(0,c))!=="xmlns"&&(u=u.slice(c+1)),t.a.hasOwnProperty(s)?{space:t.a[s],local:u}:u}},function(E,T,e){"use strict";e.d(T,"b",function(){return t});var t="http://www.w3.org/1999/xhtml";T.a={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(E,T,e){"use strict";e.d(T,"a",function(){return u}),T.b=a;var t={},u=null;if(typeof document!="undefined"){var s=document.documentElement;"onmouseenter"in s||(t={mouseenter:"mouseover",mouseleave:"mouseout"})}function c(o,l,f){return o=r(o,l,f),function(v){var b=v.relatedTarget;(!b||b!==this&&!(b.compareDocumentPosition(this)&8))&&o.call(this,v)}}function r(o,l,f){return function(v){var b=u;u=v;try{o.call(this,this.__data__,l,f)}finally{u=b}}}function h(o){return o.trim().split(/^|\s+/).map(function(l){var f="",v=l.indexOf(".");return v>=0&&(f=l.slice(v+1),l=l.slice(0,v)),{type:l,name:f}})}function n(o){return function(){var l=this.__on;if(!!l){for(var f=0,v=-1,b=l.length,g;f<b;++f)g=l[f],(!o.type||g.type===o.type)&&g.name===o.name?this.removeEventListener(g.type,g.listener,g.capture):l[++v]=g;++v?l.length=v:delete this.__on}}}function i(o,l,f){var v=t.hasOwnProperty(o.type)?c:r;return function(b,g,m){var _=this.__on,M,x=v(l,g,m);if(_){for(var y=0,S=_.length;y<S;++y)if((M=_[y]).type===o.type&&M.name===o.name){this.removeEventListener(M.type,M.listener,M.capture),this.addEventListener(M.type,M.listener=x,M.capture=f),M.value=l;return}}this.addEventListener(o.type,x,f),M={type:o.type,name:o.name,value:l,listener:x,capture:f},_?_.push(M):this.__on=[M]}}T.c=function(o,l,f){var v=h(o+""),b,g=v.length,m;if(arguments.length<2){var _=this.node().__on;if(_){for(var M=0,x=_.length,y;M<x;++M)for(b=0,y=_[M];b<g;++b)if((m=v[b]).type===y.type&&m.name===y.name)return y.value}return}for(_=l?i:n,f==null&&(f=!1),b=0;b<g;++b)this.each(_(v[b],l,f));return this};function a(o,l,f,v){var b=u;o.sourceEvent=u,u=o;try{return l.apply(f,v)}finally{u=b}}},function(E,T,e){"use strict";function t(){}T.a=function(u){return u==null?t:function(){return this.querySelector(u)}}},function(E,T,e){"use strict";var t=e(99);T.a=function(){for(var u=t.a,s;s=u.sourceEvent;)u=s;return u}},function(E,T,e){"use strict";T.a=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(104);e.d(T,"now",function(){return t.a}),e.d(T,"timer",function(){return t.b}),e.d(T,"timerFlush",function(){return t.c});var u=e(513);e.d(T,"timeout",function(){return u.a});var s=e(512);e.d(T,"interval",function(){return s.a})},function(E,T,e){"use strict";T.a=f,T.d=b,T.b=g,T.c=m;var t=0,u=0,s=0,c=1e3,r,h,n=0,i=0,a=0,o=typeof performance=="object"&&performance.now?performance:Date,l=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(S){setTimeout(S,17)};function f(){return i||(l(v),i=o.now()+a)}function v(){i=0}function b(){this._call=this._time=this._next=null}b.prototype=g.prototype={constructor:b,restart:function(S,P,A){if(typeof S!="function")throw new TypeError("callback is not a function");A=(A==null?f():+A)+(P==null?0:+P),!this._next&&h!==this&&(h?h._next=this:r=this,h=this),this._call=S,this._time=A,y()},stop:function(){this._call&&(this._call=null,this._time=Infinity,y())}};function g(S,P,A){var O=new b;return O.restart(S,P,A),O}function m(){f(),++t;for(var S=r,P;S;)(P=i-S._time)>=0&&S._call.call(null,P),S=S._next;--t}function _(){i=(n=o.now())+a,t=u=0;try{m()}finally{t=0,x(),i=0}}function M(){var S=o.now(),P=S-n;P>c&&(a-=P,n=S)}function x(){for(var S,P=r,A,O=Infinity;P;)P._call?(O>P._time&&(O=P._time),S=P,P=P._next):(A=P._next,P._next=null,P=S?S._next=A:r=A);h=S,y(O)}function y(S){if(!t){u&&(u=clearTimeout(u));var P=S-i;P>24?(S<Infinity&&(u=setTimeout(_,S-o.now()-a)),s&&(s=clearInterval(s))):(s||(n=o.now(),s=setInterval(M,c)),t=1,l(_))}}},function(E,T,e){var t;/*!
* EventEmitter v5.1.0 - git.io/ee
* Unlicense - http://unlicense.org/
* Oliver Caldwell - http://oli.me.uk/
* @preserve
*/(function(u){"use strict";function s(){}var c=s.prototype,r=u.EventEmitter;function h(a,o){for(var l=a.length;l--;)if(a[l].listener===o)return l;return-1}function n(a){return function(){return this[a].apply(this,arguments)}}c.getListeners=function(o){var l=this._getEvents(),f,v;if(o instanceof RegExp){f={};for(v in l)l.hasOwnProperty(v)&&o.test(v)&&(f[v]=l[v])}else f=l[o]||(l[o]=[]);return f},c.flattenListeners=function(o){var l=[],f;for(f=0;f<o.length;f+=1)l.push(o[f].listener);return l},c.getListenersAsObject=function(o){var l=this.getListeners(o),f;return l instanceof Array&&(f={},f[o]=l),f||l};function i(a){return typeof a=="function"||a instanceof RegExp?!0:a&&typeof a=="object"?i(a.listener):!1}c.addListener=function(o,l){if(!i(l))throw new TypeError("listener must be a function");var f=this.getListenersAsObject(o),v=typeof l=="object",b;for(b in f)f.hasOwnProperty(b)&&h(f[b],l)===-1&&f[b].push(v?l:{listener:l,once:!1});return this},c.on=n("addListener"),c.addOnceListener=function(o,l){return this.addListener(o,{listener:l,once:!0})},c.once=n("addOnceListener"),c.defineEvent=function(o){return this.getListeners(o),this},c.defineEvents=function(o){for(var l=0;l<o.length;l+=1)this.defineEvent(o[l]);return this},c.removeListener=function(o,l){var f=this.getListenersAsObject(o),v,b;for(b in f)f.hasOwnProperty(b)&&(v=h(f[b],l),v!==-1&&f[b].splice(v,1));return this},c.off=n("removeListener"),c.addListeners=function(o,l){return this.manipulateListeners(!1,o,l)},c.removeListeners=function(o,l){return this.manipulateListeners(!0,o,l)},c.manipulateListeners=function(o,l,f){var v,b,g=o?this.removeListener:this.addListener,m=o?this.removeListeners:this.addListeners;if(typeof l=="object"&&!(l instanceof RegExp))for(v in l)l.hasOwnProperty(v)&&(b=l[v])&&(typeof b=="function"?g.call(this,v,b):m.call(this,v,b));else for(v=f.length;v--;)g.call(this,l,f[v]);return this},c.removeEvent=function(o){var l=typeof o,f=this._getEvents(),v;if(l==="string")delete f[o];else if(o instanceof RegExp)for(v in f)f.hasOwnProperty(v)&&o.test(v)&&delete f[v];else delete this._events;return this},c.removeAllListeners=n("removeEvent"),c.emitEvent=function(o,l){var f=this.getListenersAsObject(o),v,b,g,m,_;for(m in f)if(f.hasOwnProperty(m))for(v=f[m].slice(0),g=0;g<v.length;g++)b=v[g],b.once===!0&&this.removeListener(o,b.listener),_=b.listener.apply(this,l||[]),_===this._getOnceReturnValue()&&this.removeListener(o,b.listener);return this},c.trigger=n("emitEvent"),c.emit=function(o){var l=Array.prototype.slice.call(arguments,1);return this.emitEvent(o,l)},c.setOnceReturnValue=function(o){return this._onceReturnValue=o,this},c._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},c._getEvents=function(){return this._events||(this._events={})},s.noConflict=function(){return u.EventEmitter=r,s},t=function(){return s}.call(u,e,u,E),t!==void 0&&(E.exports=t)})(this||{})},function(E,T,e){var t=0,u=e(2),s={values:e(79)};E.exports={isAdjust:function(r){return this.adjustNames.indexOf(r)>=0},_getDimValues:function(r){var h=this,n={},i=[];if(h.xField&&h.isAdjust("x")&&i.push(h.xField),h.yField&&h.isAdjust("y")&&i.push(h.yField),u(i,function(l){var f=s.values(r,l);f.sort(function(v,b){return v-b}),n[l]=f}),!h.yField&&h.isAdjust("y")){var a="y",o=[t,1];n[a]=o}return n},adjustData:function(r,h){var n=this,i=n._getDimValues(h);u(r,function(a,o){u(i,function(l,f){n.adjustDim(f,l,a,r.length,o)})})},getAdjustRange:function(r,h,n){var i=this,a=n.indexOf(h),o=n.length,l,f;return!i.yField&&i.isAdjust("y")?(l=0,f=1):o>1?(l=a===0?n[0]:n[a-1],f=a===o-1?n[o-1]:n[a+1],a!==0?l+=(h-l)/2:l-=(f-h)/2,a!==o-1?f-=(f-h)/2:f+=(h-n[o-2])/2):(l=h===0?0:h-.5,f=h===0?1:h+.5),{pre:l,next:f}},groupData:function(r,h){var n={};return u(r,function(i){var a=i[h];a===void 0&&(a=i[h]=t),n[a]||(n[a]=[]),n[a].push(i)}),n}}},function(E,T,e){var t=e(11),u=e(15),s=e(2),c=/rgba?\(([\s.,0-9]+)\)/;function r(){var b=document.createElement("i");return b.title="Web Colour Picker",b.style.display="none",document.body.appendChild(b),b}function h(b,g,m,_){var M=b[_]+(g[_]-b[_])*m;return M}function n(b){return"#"+i(b[0])+i(b[1])+i(b[2])}function i(b){return b=Math.round(b),b=b.toString(16),b.length===1&&(b="0"+b),b}function a(b,g){(isNaN(g)||!t(g)||g<0)&&(g=0),g>1&&(g=1);var m=b.length-1,_=Math.floor(m*g),M=m*g-_,x=b[_],y=_===m?x:b[_+1],S=n([h(x,y,M,0),h(x,y,M,1),h(x,y,M,2)]);return S}function o(b){var g=[];return g.push(parseInt(b.substr(1,2),16)),g.push(parseInt(b.substr(3,2),16)),g.push(parseInt(b.substr(5,2),16)),g}var l={},f=null,v={toRGB:function(g){if(g[0]==="#"&&g.length===7)return g;f||(f=r());var m;if(l[g])m=l[g];else{f.style.color=g,m=document.defaultView.getComputedStyle(f,"").getPropertyValue("color");var _=c.exec(m),M=_[1].split(/\s*,\s*/);m=n(M),l[g]=m}return m},rgb2arr:o,gradient:function(g){var m=[];return u(g)&&(g=g.split("-")),s(g,function(_){_.indexOf("#")===-1&&(_=v.toRGB(_)),m.push(o(_))}),function(_){return a(m,_)}}};E.exports=v},function(E,T,e){var t=e(31),u=t.Group,s=e(3),c=function r(h){r.superclass.constructor.call(this,h)};s.extend(c,u),s.augment(c,{getDefaultCfg:function(){return{zIndex:1,type:"line",lineStyle:null,items:null,alternateColor:null,matrix:null,hideFirstLine:!1,hideLastLine:!1,hightLightZero:!1,zeroLineStyle:{stroke:"#595959",lineDash:[0,0]}}},_renderUI:function(){c.superclass._renderUI.call(this),this._drawLines()},_drawLines:function(){var h=this,n=h.get("lineStyle"),i=h.get("items");i&&i.length&&(h._precessItems(i),h._drawGridLines(i,n))},_precessItems:function(h){var n=this,i;s.each(h,function(a,o){i&&n.get("alternateColor")&&n._drawAlternativeBg(a,i,o),i=a})},_drawGridLines:function(h,n){var i=this,a=this.get("type"),o,l,f,v,b=h.length;a==="line"||a==="polygon"?s.each(h,function(g,m){i.get("hideFirstLine")&&m===0||i.get("hideLastLine")&&m===b-1||(v=g.points,l=[],a==="line"?(l.push(["M",v[0].x,v[0].y]),l.push(["L",v[v.length-1].x,v[v.length-1].y])):s.each(v,function(_,M){M===0?l.push(["M",_.x,_.y]):l.push(["L",_.x,_.y])}),i._drawZeroLine(a,m)?f=s.mix({},i.get("zeroLineStyle"),{path:l}):f=s.mix({},n,{path:l}),o=i.addShape("path",{attrs:f}),o.name="axis-grid",o._id=g._id,o.set("coord",i.get("coord")),i.get("appendInfo")&&o.setSilent("appendInfo",i.get("appendInfo")))}):s.each(h,function(g,m){i.get("hideFirstLine")&&m===0||i.get("hideLastLine")&&m===b-1||(v=g.points,l=[],s.each(v,function(_,M){var x=_.radius;M===0?l.push(["M",_.x,_.y]):l.push(["A",x,x,0,0,_.flag,_.x,_.y])}),f=s.mix({},n,{path:l}),o=i.addShape("path",{attrs:f}),o.name="axis-grid",o._id=g._id,o.set("coord",i.get("coord")),i.get("appendInfo")&&o.setSilent("appendInfo",i.get("appendInfo")))})},_drawZeroLine:function(h,n){var i=this,a=i.get("tickValues");return!!(h==="line"&&a&&a[n]===0&&i.get("hightLightZero"))},_drawAlternativeBg:function(h,n,i){var a=this,o=a.get("alternateColor"),l,f,v;s.isString(o)?f=o:s.isArray(o)&&(f=o[0],v=o[1]),i%2==0?v&&(l=a._getBackItem(n.points,h.points,v)):f&&(l=a._getBackItem(n.points,h.points,f));var b=a.addShape("Path",{attrs:l});b.name="axis-grid-rect",b._id=h._id&&h._id.replace("grid","grid-rect"),b.set("coord",a.get("coord")),a.get("appendInfo")&&b.setSilent("appendInfo",a.get("appendInfo"))},_getBackItem:function(h,n,i){var a=[],o=this.get("type");if(o==="line")a.push(["M",h[0].x,h[0].y]),a.push(["L",h[h.length-1].x,h[h.length-1].y]),a.push(["L",n[n.length-1].x,n[n.length-1].y]),a.push(["L",n[0].x,n[0].y]),a.push(["Z"]);else if(o==="polygon"){s.each(h,function(m,_){_===0?a.push(["M",m.x,m.y]):a.push(["L",m.x,m.y])});for(var l=n.length-1;l>=0;l--)a.push(["L",n[l].x,n[l].y]);a.push(["Z"])}else{var f=h[0].flag;s.each(h,function(m,_){var M=m.radius;_===0?a.push(["M",m.x,m.y]):a.push(["A",M,M,0,0,m.flag,m.x,m.y])});for(var v=n.length-1;v>=0;v--){var b=n[v],g=b.radius;v===n.length-1?a.push(["M",b.x,b.y]):a.push(["A",g,g,0,0,f===1?0:1,b.x,b.y])}}return{fill:i,path:a}}}),E.exports=c},function(E,T,e){var t=e(3);E.exports={getFirstScale:function(s){var c;return t.each(s,function(r){if(r)return c=r,!1}),c}}},function(E,T,e){function t(g){return function(){var m=r(g),_;if(c()){var M=r(this).constructor;_=Reflect.construct(m,arguments,M)}else _=m.apply(this,arguments);return u(this,_)}}function u(g,m){return m&&(typeof m=="object"||typeof m=="function")?m:s(g)}function s(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(g){return!1}}function r(g){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},r(g)}function h(g,m){g.prototype=Object.create(m.prototype),g.prototype.constructor=g,g.__proto__=m}var n=e(3),i=n.DomUtil,a=e(36),o=e(254),l=e(255),f=e(253),v={scatter:o,map:l,treemap:f},b=function(g){h(_,g);var m=t(_);function _(){return g.apply(this,arguments)||this}var M=_.prototype;return M.getDefaultCfg=function(){var y=g.prototype.getDefaultCfg.call(this);return n.mix({},y,{name:"label",type:"default",textStyle:null,formatter:null,items:null,useHtml:!1,containerTpl:'<div class="g-labels" style="position:absolute;top:0;left:0;"></div>',itemTpl:'<div class="g-label" style="position:absolute;">{text}</div>',labelLine:!1,lineGroup:null,shapes:null,config:!0,capture:!0})},M.clear=function(){var y=this.get("group"),S=this.get("container");y&&!y.get("destroyed")&&y.clear(),S&&(S.innerHTML=""),g.prototype.clear.call(this)},M.destroy=function(){var y=this.get("group"),S=this.get("container");y.destroy||y.destroy(),S&&S.parentNode&&S.parentNode.removeChild(S),g.prototype.destroy.call(this)},M.render=function(){this.clear(),this._init(),this.beforeDraw(),this.draw(),this.afterDraw()},M._dryDraw=function(){var y=this,S=y.get("items"),P=y.getLabels(),A=P.length;n.each(S,function(L,H){if(H<A){var F=P[H];y.changeLabel(F,L)}else{var K=y._addLabel(L,H);K&&(K._id=L._id,K.set("coord",L.coord))}});for(var O=A-1;O>=S.length;O--)P[O].remove();y._adjustLabels(),(y.get("labelLine")||!y.get("config"))&&y.drawLines()},M.draw=function(){this._dryDraw(),this.get("canvas").draw()},M.changeLabel=function(y,S){if(!!y)if(y.tagName){var P=this._createDom(S);y.innerHTML=P.innerHTML,this._setCustomPosition(S,y)}else y._id=S._id,y.attr("text",S.text),(y.attr("x")!==S.x||y.attr("y")!==S.y)&&(y.resetMatrix(),S.textStyle.rotate&&(y.rotateAtStart(S.textStyle.rotate),delete S.textStyle.rotate),y.attr(S))},M.show=function(){var y=this.get("group"),S=this.get("container");y&&y.show(),S&&(S.style.opacity=1)},M.hide=function(){var y=this.get("group"),S=this.get("container");y&&y.hide(),S&&(S.style.opacity=0)},M.drawLines=function(){var y=this,S=y.get("labelLine");typeof S=="boolean"&&y.set("labelLine",{});var P=y.get("lineGroup");!P||P.get("destroyed")?(P=y.get("group").addGroup({elCls:"x-line-group"}),y.set("lineGroup",P)):P.clear(),n.each(y.get("items"),function(A){y.lineToLabel(A,P)})},M.lineToLabel=function(y,S){var P=this;if(!(!P.get("config")&&!y.labelLine)){var A=y.labelLine||P.get("labelLine"),O=typeof y.capture=="undefined"?P.get("capture"):y.capture,L=A.path;if(L&&n.isFunction(A.path)&&(L=A.path(y)),!L){var H=y.start||{x:y.x-y._offset.x,y:y.y-y._offset.y};L=[["M",H.x,H.y],["L",y.x,y.y]]}var F=y.color;F||(y.textStyle&&y.textStyle.fill?F=y.textStyle.fill:F="#000");var K=S.addShape("path",{attrs:n.mix({path:L,fill:null,stroke:F},A),capture:O});K.name=P.get("name"),K._id=y._id&&y._id.replace("glabel","glabelline"),K.set("coord",P.get("coord"))}},M._adjustLabels=function(){var y=this,S=y.get("type"),P=y.getLabels(),A=y.get("shapes"),O=v[S];S==="default"||!O||O(P,A)},M.getLabels=function(){var y=this.get("container");return y?n.toArray(y.childNodes):this.get("group").get("children")},M._addLabel=function(y,S){var P=y;return this.get("config")&&(P=this._getLabelCfg(y,S)),this._createText(P)},M._getLabelCfg=function(y,S){var P=this.get("textStyle")||{},A=this.get("formatter"),O=this.get("htmlTemplate");if(!n.isObject(y)){var L=y;y={},y.text=L}n.isFunction(P)&&(P=P(y.text,y,S)),A&&(y.text=A(y.text,y,S)),O&&(y.useHtml=!0,n.isFunction(O)&&(y.text=O(y.text,y,S))),n.isNil(y.text)&&(y.text=""),y.text=y.text+"";var H=n.mix({},y,{textStyle:P},{x:y.x||0,y:y.y||0});return H},M._init=function(){if(!this.get("group")){var y=this.get("canvas").addGroup({id:"label-group"});this.set("group",y)}},M.initHtmlContainer=function(){var y=this.get("container");if(y)n.isString(y)&&(y=document.getElementById(y),y&&this.set("container",y));else{var S=this.get("containerTpl"),P=this.get("canvas").get("el").parentNode;y=i.createDom(S),P.style.position="relative",P.appendChild(y),this.set("container",y)}return y},M._createText=function(y){var S=n.deepMix({},y),P=this.get("container"),A=typeof S.capture=="undefined"?this.get("capture"):S.capture,O;if(S.useHtml||S.htmlTemplate){P||(P=this.initHtmlContainer());var L=this._createDom(S);P.appendChild(L),this._setCustomPosition(S,L)}else{var H=this.get("name"),F=S.point,K=this.get("group");delete S.point;var G=S.rotate;return S.textStyle&&(S.textStyle.rotate&&(G=S.textStyle.rotate,delete S.textStyle.rotate),S=n.mix({x:S.x,y:S.y,textAlign:S.textAlign,text:S.text},S.textStyle)),O=K.addShape("text",{attrs:S,capture:A}),G&&(Math.abs(G)>Math.PI*2&&(G=G/180*Math.PI),O.transform([["t",-S.x,-S.y],["r",G],["t",S.x,S.y]])),O.setSilent("origin",F||S),O.name=H,this.get("appendInfo")&&O.setSilent("appendInfo",this.get("appendInfo")),O}},M._createDom=function(y){var S=this.get("itemTpl"),P=n.substitute(S,{text:y.text});return i.createDom(P)},M._setCustomPosition=function(y,S){var P=y.textAlign||"left",A=y.y,O=y.x,L=i.getOuterWidth(S),H=i.getOuterHeight(S);A=A-H/2,P==="center"?O=O-L/2:P==="right"&&(O=O-L),S.style.top=parseInt(A,10)+"px",S.style.left=parseInt(O,10)+"px"},_}(a);E.exports=b},function(E,T){var e=function(){function t(){this.bitmap=[]}var u=t.prototype;return u.hasGap=function(c){for(var r=!0,h=this.bitmap,n=Math.floor(c.minX),i=Math.ceil(c.maxX),a=Math.floor(c.minY),o=Math.ceil(c.maxY)-1,l=n;l<i;l++){if(!h[l]){h[l]=[];continue}if(l===n||l===i-1){for(var f=a;f<=o;f++)if(h[l][f]){r=!1;break}}else if(h[l][a]||h[l][o]){r=!1;break}}return r},u.fillGap=function(c){for(var r=this.bitmap,h=Math.floor(c.minX),n=Math.ceil(c.maxX)-1,i=Math.floor(c.minY),a=Math.ceil(c.maxY)-1,o=h;o<=n;o++){for(var l=i;l<a;l+=8)r[o]||(r[o]=[]),r[o][l]=!0;r[o][a]=!0}for(var f=i;f<=a;f++)r[h][f]=!0,r[n][f]=!0},t}();E.exports=e},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var g=r(this).constructor;b=Reflect.construct(v,arguments,g)}else b=v.apply(this,arguments);return u(this,b)}}function u(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(3),i=e(36),a=e(19),o=a.FONT_FAMILY,l=function(f){h(g,f);var v=t(g),b=g.prototype;b.getDefaultCfg=function(){return{container:null,title:null,formatter:null,hoverable:!0,titleGap:15,position:[0,0],offset:[0,0],offsetX:null,offsetY:null}};function g(m){var _;return _=f.call(this,m)||this,_._init(),_.beforeRender(),_.render(),_._adjustPositionOffset(),_._bindEvents(),_}return b._init=function(){var _=this.get("group"),M=this.get("container");this.set("canvas",M.get("canvas"));var x=this.get("position");_||(_=M.addGroup({x:0-x[0],y:0-x[1]})),this.set("group",_)},b._adjustPositionOffset=function(){var _=this.get("position"),M=this.get("offset"),x=this.get("offsetX"),y=this.get("offsetY");if(!n.isArray(M)){var S=this.get("layout");M=S==="vertical"?[M,0]:[0,M]}x&&(M[0]=x),y&&(M[1]=y);var P=this.get("group").getBBox();this.move(-P.minX+_[0]+M[0],-P.minY+_[1]+M[1])},b.beforeRender=function(){var _=this.get("group"),M=_.addGroup();this.set("itemsGroup",M)},b.render=function(){this._renderTitle()},b._renderTitle=function(){var _=this.get("title"),M=this.get("titleGap");if(M=M||0,_&&_.text){var x=this.get("group"),y=x.addShape("text",{attrs:n.mix({x:0,y:0-M,fill:"#333",textBaseline:"middle",fontFamily:o},_)});y.name="legend-title",this.get("appendInfo")&&y.setSilent("appendInfo",this.get("appendInfo")),this.set("titleShape",y)}},b.getCheckedCount=function(){var _=this.get("itemsGroup"),M=_.get("children"),x=n.filter(M,function(y){return y.get("checked")});return x.length},b.setItems=function(_){this.set("items",_),this.clear(),this.render()},b.addItem=function(_){var M=this.get("items");M.push(_),this.clear(),this.render()},b.clear=function(){var _=this.get("itemsGroup");_.clear();var M=this.get("group");M.clear(),this.beforeRender()},b.destroy=function(){var _=this.get("group");_&&_.destroy(),this._attrs={},this.removeAllListeners(),f.prototype.destroy.call(this)},b.getWidth=function(){var _=this.get("group").getBBox();return _.width},b.getHeight=function(){var _=this.get("group").getBBox();return _.height},b.move=function(_,M){this.get("group").move(_,M)},b.draw=function(){this.get("canvas").draw()},g}(i);E.exports=l},function(E,T,e){function t(A){return function(){var O=r(A),L;if(c()){var H=r(this).constructor;L=Reflect.construct(O,arguments,H)}else L=O.apply(this,arguments);return u(this,L)}}function u(A,O){return O&&(typeof O=="object"||typeof O=="function")?O:s(A)}function s(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(A){return!1}}function r(A){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)},r(A)}function h(A,O){A.prototype=Object.create(O.prototype),A.prototype.constructor=A,A.__proto__=O}var n=e(3),i=e(114),a=e(19),o=a.FONT_FAMILY,l=n.DomUtil,f=n.Group,v="g2-legend",b="g2-legend-title",g="g2-legend-list",m="g2-legend-list-item",_="g2-legend-text",M="g2-legend-marker";function x(A,O){return A.getElementsByClassName(O)[0]}function y(A,O){var L=A.className;return n.isNil(L)||(L=L.split(" "),L.indexOf(O)>-1)?A:A.parentNode?A.parentNode.className===v?A.parentNode:y(A.parentNode,O):null}function S(A,O){var L=null,H=O instanceof f?O.get("value"):O;return n.each(A,function(F){if(F.value===H)return L=F,!1}),L}var P=function(A){h(L,A);var O=t(L);function L(){return A.apply(this,arguments)||this}var H=L.prototype;return H.getDefaultCfg=function(){var K=A.prototype.getDefaultCfg.call(this);return n.mix({},K,{type:"category-legend",container:null,containerTpl:'<div class="'+v+'"><h4 class="'+b+'"></h4><ul class="'+g+'"></ul></div>',itemTpl:'<li class="'+m+' item-{index} {checked}" data-color="{originColor}" data-value="{originValue}"><i class="'+M+'" style="background-color:{color};"></i><span class="'+_+'">{value}</span></li>',legendStyle:{},textStyle:{fill:"#333",fontSize:12,textAlign:"middle",textBaseline:"top",fontFamily:o},abridgeText:!1,tipTpl:'<div class="textTip"></div>',tipStyle:{display:"none",fontSize:"12px",backgroundColor:"#fff",position:"absolute",width:"auto",height:"auto",padding:"3px",boxShadow:"2px 2px 5px #888"},autoPosition:!0})},H._init=function(){},H.beforeRender=function(){},H.render=function(){this._renderHTML()},H._bindEvents=function(){var K=this,G=this.get("legendWrapper"),U=x(G,g);this.get("hoverable")&&(U.onmousemove=function(Z){return K._onMousemove(Z)},U.onmouseout=function(Z){return K._onMouseleave(Z)}),this.get("clickable")&&(U.onclick=function(Z){return K._onClick(Z)})},H._onMousemove=function(K){var G=this.get("items"),U=K.target,Z=U.className;if(Z=Z.split(" "),!(Z.indexOf(v)>-1||Z.indexOf(g)>-1)){var J=y(U,m),rt=S(G,J.getAttribute("data-value"));rt?(this.deactivate(),this.activate(J.getAttribute("data-value")),this.emit("itemhover",{item:rt,currentTarget:J,checked:rt.checked})):rt||(this.deactivate(),this.emit("itemunhover",K))}},H._onMouseleave=function(K){this.deactivate(),this.emit("itemunhover",K)},H._onClick=function(K){var G=this,U=this.get("legendWrapper"),Z=x(U,g),J=this.get("unCheckColor"),rt=this.get("items"),vt=this.get("selectedMode"),mt=Z.childNodes,ut=K.target,Rt=ut.className;if(Rt=Rt.split(" "),!(Rt.indexOf(v)>-1||Rt.indexOf(g)>-1)){var Ft=y(ut,m),wt=x(Ft,_),Mt=x(Ft,M),St=S(rt,Ft.getAttribute("data-value"));if(!!St){var At=Ft.className,nt=Ft.getAttribute("data-color");if(vt==="single")St.checked=!0,n.each(mt,function(q){if(q!==Ft){var gt=x(q,M);gt.style.backgroundColor=J,q.className=q.className.replace("checked","unChecked"),q.style.color=J;var et=S(rt,q.getAttribute("data-value"));et.checked=!1}else wt&&(wt.style.color=G.get("textStyle").fill),Mt&&(Mt.style.backgroundColor=nt),Ft.className=At.replace("unChecked","checked")});else{var Pt=At.indexOf("checked")!==-1,z=0;if(n.each(mt,function(q){q.className.indexOf("checked")!==-1&&z++}),!this.get("allowAllCanceled")&&Pt&&z===1){this.emit("clicklastitem",{item:St,currentTarget:Ft,checked:vt==="single"?!0:St.checked});return}St.checked=!St.checked,Pt?(Mt&&(Mt.style.backgroundColor=J),Ft.className=At.replace("checked","unChecked"),Ft.style.color=J):(Mt&&(Mt.style.backgroundColor=nt),Ft.className=At.replace("unChecked","checked"),Ft.style.color=this.get("textStyle").fill)}this.emit("itemclick",{item:St,currentTarget:Ft,checked:vt==="single"?!0:St.checked})}}},H.activate=function(K){var G=this,U=this,Z=U.get("items"),J=S(Z,K),rt=U.get("legendWrapper"),vt=x(rt,g),mt=vt.childNodes;mt.forEach(function(ut){var Rt=x(ut,M),Ft=S(Z,ut.getAttribute("data-value"));if(G.get("highlight")){if(Ft===J&&Ft.checked){Rt.style.border="1px solid #333";return}}else Ft===J?Rt.style.opacity=U.get("activeOpacity"):Ft.checked&&(Rt.style.opacity=U.get("inactiveOpacity"))})},H.deactivate=function(){var K=this,G=this,U=G.get("legendWrapper"),Z=x(U,g),J=Z.childNodes;J.forEach(function(rt){var vt=x(rt,M);K.get("highlight")?vt.style.border="1px solid #fff":vt.style.opacity=G.get("inactiveOpacity")})},H._renderHTML=function(){var K=this,G=this.get("container"),U=this.get("title"),Z=this.get("containerTpl"),J=l.createDom(Z),rt=x(J,b),vt=x(J,g),mt=this.get("unCheckColor"),ut=n.deepMix({},{CONTAINER_CLASS:{height:"auto",width:"auto",position:"absolute",overflowY:"auto",fontSize:"12px",fontFamily:o,lineHeight:"20px",color:"#8C8C8C"},TITLE_CLASS:{marginBottom:this.get("titleGap")+"px",fontSize:"12px",color:"#333",textBaseline:"middle",fontFamily:o},LIST_CLASS:{listStyleType:"none",margin:0,padding:0,textAlign:"center"},LIST_ITEM_CLASS:{cursor:"pointer",marginBottom:"5px",marginRight:"24px"},MARKER_CLASS:{width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"4px",verticalAlign:"middle"}},this.get("legendStyle"));if(/^\#/.test(G)||typeof G=="string"&&G.constructor===String){var Rt=G.replace("#","");G=document.getElementById(Rt),G.appendChild(J)}else{var Ft=this.get("position"),wt={};Ft==="left"||Ft==="right"?wt={maxHeight:(this.get("maxLength")||G.offsetHeight)+"px"}:wt={maxWidth:(this.get("maxLength")||G.offsetWidth)+"px"},l.modifyCSS(J,n.mix({},ut.CONTAINER_CLASS,wt,this.get(v))),G.appendChild(J)}l.modifyCSS(vt,n.mix({},ut.LIST_CLASS,this.get(g))),rt&&(U&&U.text?(rt.innerHTML=U.text,l.modifyCSS(rt,n.mix({},ut.TITLE_CLASS,this.get(b),U))):J.removeChild(rt));var Mt=this.get("items"),St=this.get("itemTpl"),At=this.get("position"),nt=this.get("layout"),Pt=At==="right"||At==="left"||nt==="vertical"?"block":"inline-block",z=n.mix({},ut.LIST_ITEM_CLASS,{display:Pt},this.get(m)),q=n.mix({},ut.MARKER_CLASS,this.get(M));if(n.each(Mt,function(xt,k){var ot=xt.checked,it=K._formatItemValue(xt.value),$=xt.marker.fill||xt.marker.stroke,_t=ot?$:mt,yt;n.isFunction(St)?yt=St(it,_t,ot,k):yt=St;var Nt=n.substitute(yt,n.mix({},xt,{index:k,checked:ot?"checked":"unChecked",value:it,color:_t,originColor:$,originValue:xt.value.replace(/\"/g,"&quot;")})),$t=l.createDom(Nt);$t.style.color=K.get("textStyle").fill;var ee=x($t,M),Gt=x($t,_);if(l.modifyCSS($t,z),ee&&l.modifyCSS(ee,q),ot||($t.style.color=mt,ee&&(ee.style.backgroundColor=mt)),vt.appendChild($t),K.get("abridgeText")){var Ht=it,ae=$t.offsetWidth,le=K.get("textStyle").fontSize;isNaN(le)&&(le.indexOf("pt")!==-1?le=parseFloat(le.substr(0,le.length-2))*1/72*96:le.indexOf("px")!==-1&&(le=parseFloat(le.substr(0,le.length-2))));var Be=le*Ht.length,Ce=Math.floor(ae/le);ae<2*le?Ht="":ae<Be&&Ce>1&&(Ht=Ht.substr(0,Ce-1)+"..."),Gt.innerText=Ht,$t.addEventListener("mouseover",function(){var We=x(J.parentNode,"textTip");We.style.display="block",We.style.left=$t.offsetLeft+$t.offsetWidth+"px",We.style.top=$t.offsetTop+15+"px",We.innerText=it}),$t.addEventListener("mouseout",function(){var We=x(J.parentNode,"textTip");We.style.display="none"})}}),this.get("abridgeText")){var gt=this.get("tipTpl"),et=l.createDom(gt),at=this.get("tipStyle");l.modifyCSS(et,at),J.parentNode.appendChild(et),et.addEventListener("mouseover",function(){et.style.display="none"})}this.set("legendWrapper",J)},H._adjustPositionOffset=function(){var K=this.get("autoPosition");if(K!==!1){var G=this.get("position"),U=this.get("offset"),Z=this.get("offsetX"),J=this.get("offsetY");Z&&(U[0]=Z),J&&(U[1]=J);var rt=this.get("legendWrapper");rt.style.left=G[0]+"px",rt.style.top=G[1]+"px",rt.style.marginLeft=U[0]+"px",rt.style.marginTop=U[1]+"px"}},H.getWidth=function(){return l.getOuterWidth(this.get("legendWrapper"))},H.getHeight=function(){return l.getOuterHeight(this.get("legendWrapper"))},H.move=function(K,G){/^\#/.test(this.get("container"))?A.prototype.move.call(this,K,G):(l.modifyCSS(this.get("legendWrapper"),{left:K+"px",top:G+"px"}),this.set("x",K),this.set("y",G))},H.destroy=function(){var K=this.get("legendWrapper");K&&K.parentNode&&K.parentNode.removeChild(K),A.prototype.destroy.call(this)},L}(i);E.exports=P},function(E,T,e){function t(m){return function(){var _=r(m),M;if(c()){var x=r(this).constructor;M=Reflect.construct(_,arguments,x)}else M=_.apply(this,arguments);return u(this,M)}}function u(m,_){return _&&(typeof _=="object"||typeof _=="function")?_:s(m)}function s(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(m){return!1}}function r(m){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},r(m)}function h(m,_){m.prototype=Object.create(_.prototype),m.prototype.constructor=m,m.__proto__=_}var n=e(3),i=e(112),a=e(19),o=a.FONT_FAMILY,l=n.Event,f=n.Group;function v(m,_){var M=null,x=_ instanceof f||_.name==="legendGroup"?_.get("value"):_;return n.each(m,function(y){if(y.value===x)return M=y,!1}),M}function b(m,_){return m.findBy(function(M){return M.name===_})}var g=function(m){h(M,m);var _=t(M);function M(){return m.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=m.prototype.getDefaultCfg.call(this);return n.mix({},S,{type:"category-legend",items:null,itemGap:5,itemMarginBottom:8,itemsGroup:null,layout:"horizontal",allowAllCanceled:!1,backPadding:[0,0,0,0],unCheckColor:"#ccc",background:{fill:"#fff",fillOpacity:0},itemWidth:null,textStyle:{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:o},_wordSpaceing:8,clickable:!0,selectedMode:"multiple",reversed:!1,autoWrap:!0,highlight:!1,activeOpacity:.7,inactiveOpacity:1})},x.render=function(){m.prototype.render.call(this),this._renderItems(),this.get("autoWrap")&&this._adjustItems()},x._bindEvents=function(){this.get("hoverable")&&(this.get("group").on("mousemove",n.wrapBehavior(this,"_onMousemove")),this.get("group").on("mouseleave",n.wrapBehavior(this,"_onMouseleave"))),this.get("clickable")&&this.get("group").on("click",n.wrapBehavior(this,"_onClick"))},x._getLegendItem=function(S){var P=S.get("parent");return P&&P.name==="legendGroup"?P:null},x.activate=function(S){var P=this,A=this,O=A.get("itemsGroup"),L=O.get("children"),H=void 0;L.forEach(function(F){if(H=b(F,"legend-marker"),!!H){var K=F.get("checked");P.get("highlight")?F.get("value")===S&&K?H.attr("stroke","#333"):H.attr("stroke",null):F.get("value")===S&&H.attr("fillOpacity",A.get("activeOpacity"))}}),this.get("canvas").draw()},x.deactivate=function(){var S=this,P=this,A=P.get("itemsGroup"),O=A.get("children"),L=void 0,H=this.get("unCheckColor");O.forEach(function(F){if(L=b(F,"legend-marker"),!!L)if(S.get("highlight")){var K=L.get("oriStroke"),G=F.get("checked");K&&!G?K=H:K="",L.attr("stroke",K)}else L.attr("fillOpacity",P.get("inactiveOpacity"))}),this.get("canvas").draw()},x._onMousemove=function(S){var P=this._getLegendItem(S.currentTarget);if(P&&P.get("checked")){var A=this.get("items"),O=new l("itemhover",S,!0,!0);O.item=v(A,P),O.checked=P.get("checked"),O.currentTarget=S.currentTarget,this.deactivate(),this.activate(P.get("value")),this.emit("itemhover",O)}else this.deactivate(),this.emit("itemunhover",S);this.get("canvas").draw()},x._onMouseleave=function(S){this.deactivate(),this.get("canvas").draw(),this.emit("itemunhover",S)},x._onClick=function(S){var P=this._getLegendItem(S.currentTarget),A=this.get("items");if(P&&!P.get("destroyed")){var O=P.get("checked"),L=this.get("selectedMode"),H=v(A,P),F=new l("itemclick",S,!0,!0);if(F.item=H,F.currentTarget=P,F.appendInfo=S.currentTarget.get("appendInfo"),F.checked=L==="single"?!0:!O,!this.get("allowAllCanceled")&&O&&this.getCheckedCount()===1){this.emit("clicklastitem",F);return}var K=this.get("unCheckColor"),G=this.get("textStyle").fill,U=void 0,Z=void 0,J=void 0;if(L==="single"){var rt=this.get("itemsGroup"),vt=rt.get("children");n.each(vt,function(mt){U=b(mt,"legend-marker"),Z=b(mt,"legend-text"),J=b(mt,"legend-item"),mt!==P?(U.attr("fill")&&U.attr("fill",K),U.attr("stroke")&&U.attr("stroke",K),Z.attr("fill",K),U.setSilent("checked",!1),Z.setSilent("checked",!1),J.setSilent("checked",!1),mt.setSilent("checked",!1)):(U.attr("fill")&&H&&H.marker&&U.attr("fill",H.marker.fill),U.attr("stroke")&&H&&H.marker&&U.attr("stroke",H.marker.stroke),Z.attr("fill",G),U.setSilent("checked",!0),Z.setSilent("checked",!0),J.setSilent("checked",!0),mt.setSilent("checked",!0))})}else U=b(P,"legend-marker"),Z=b(P,"legend-text"),J=b(P,"legend-item"),U.attr("fill")&&H&&H.marker&&U.attr("fill",O?K:H.marker.fill),U.attr("stroke")&&H&&H.marker&&U.attr("stroke",O?K:H.marker.stroke),Z.attr("fill",O?K:G),P.setSilent("checked",!O),U.setSilent("checked",!O),Z.setSilent("checked",!O),J.setSilent("checked",!O);this.emit("itemclick",F)}this.get("canvas").draw()},x._renderItems=function(){var S=this,P=this.get("items");if(this.get("reversed")&&P.reverse(),n.each(P,function(H,F){S._addItem(H,F)}),this.get("highlight")){var A=this.get("itemsGroup"),O=A.get("children"),L=void 0;O.forEach(function(H){L=b(H,"legend-marker");var F=L.get("oriStroke");F||(L.attr("stroke")?L.set("oriStroke",L.attr("stroke")):L.set("oriStroke",""))})}},x._formatItemValue=function(S){var P=this.get("formatter")||this.get("itemFormatter");return P&&(S=P.call(this,S)),S},x._getNextX=function(){var S=this.get("layout"),P=this.get("itemGap"),A=this.get("itemsGroup"),O=this.get("itemWidth"),L=A.get("children"),H=0;return S==="horizontal"&&n.each(L,function(F){H+=(O||F.getBBox().width)+P}),H},x._getNextY=function(){var S=this.get("itemMarginBottom"),P=this.get("titleShape")?this.get("titleGap"):0,A=this.get("layout"),O=this.get("itemsGroup"),L=this.get("titleShape"),H=O.get("children"),F=P;return L&&(F+=L.getBBox().height),A==="vertical"&&n.each(H,function(K){F+=K.getBBox().height+S}),F},x._addItem=function(S){var P=this.get("itemsGroup"),A=this._getNextX(),O=this._getNextY(),L=this.get("unCheckColor"),H=P.addGroup({x:A,y:O,value:S.value,checked:S.checked});H.set("viewId",this.get("viewId"));var F=this.get("textStyle"),K=this.get("_wordSpaceing"),G=0;if(S.marker){var U=n.mix({},S.marker,{x:S.marker.radius+A,y:O});S.checked||(U.fill&&(U.fill=L),U.stroke&&(U.stroke=L));var Z=H.addShape("marker",{type:"marker",attrs:U});Z.attr("cursor","pointer"),Z.name="legend-marker",G+=Z.getBBox().width+K}var J=n.mix({},{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:o},F,{x:G+A,y:O,text:this._formatItemValue(S.value)});S.checked||n.mix(J,{fill:L});var rt=H.addShape("text",{attrs:J});rt.attr("cursor","pointer"),rt.name="legend-text",this.get("appendInfo")&&rt.setSilent("appendInfo",this.get("appendInfo"));var vt=H.getBBox(),mt=this.get("itemWidth"),ut=H.addShape("rect",{attrs:{x:A,y:O-vt.height/2,fill:"#fff",fillOpacity:0,width:mt||vt.width,height:vt.height}});return ut.attr("cursor","pointer"),ut.setSilent("origin",S),ut.name="legend-item",this.get("appendInfo")&&ut.setSilent("appendInfo",this.get("appendInfo")),H.name="legendGroup",H},x._adjustHorizontal=function(){var S=this.get("itemsGroup"),P=S.get("children"),A=this.get("maxLength"),O=this.get("itemGap"),L=this.get("itemMarginBottom"),H=this.get("titleShape")?this.get("titleGap"):0,F=0,K=0,G=void 0,U=void 0,Z=void 0,J=this.get("itemWidth");S.getBBox().width>A&&n.each(P,function(rt){Z=rt.getBBox(),G=J||Z.width,U=Z.height+L,A-K<G&&(F++,K=0),rt.move(K,F*U+H),K+=G+O})},x._adjustVertical=function(){var S=this.get("itemsGroup"),P=this.get("titleShape"),A=S.get("children"),O=this.get("maxLength"),L=this.get("itemGap"),H=this.get("itemMarginBottom"),F=this.get("titleGap"),K=P?P.getBBox().height+F:0,G=this.get("itemWidth"),U=K,Z=void 0,J=void 0,rt=void 0,vt=0,mt=0;S.getBBox().height>O&&n.each(A,function(ut){rt=ut.getBBox(),Z=rt.width,J=rt.height,G?vt=G+L:Z>vt&&(vt=Z+L),O-U<J?(U=K,mt+=vt,ut.move(mt,K)):ut.move(mt,U),U+=J+H})},x._adjustItems=function(){var S=this.get("layout");S==="horizontal"?this._adjustHorizontal():this._adjustVertical()},x.getWidth=function(){return m.prototype.getWidth.call(this)},x.getHeight=function(){return m.prototype.getHeight.call(this)},x.move=function(S,P){m.prototype.move.call(this,S,P)},M}(i);E.exports=g},function(E,T,e){function t(M){return function(){var x=r(M),y;if(c()){var S=r(this).constructor;y=Reflect.construct(x,arguments,S)}else y=x.apply(this,arguments);return u(this,y)}}function u(M,x){return x&&(typeof x=="object"||typeof x=="function")?x:s(M)}function s(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}function r(M){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},r(M)}function h(M,x){M.prototype=Object.create(x.prototype),M.prototype.constructor=M,M.__proto__=x}var n=e(31),i=e(116),a=e(117),o=e(118),l=e(68),f=e(3),v=e(19),b=v.FONT_FAMILY,g=f.DomUtil,m=f.MatrixUtil,_=function(M){h(S,M);var x=t(S),y=S.prototype;y.getDefaultCfg=function(){var A=M.prototype.getDefaultCfg.call(this);return f.mix({},A,{boardStyle:{x:0,y:0,width:100,height:100,fill:"rgba(255, 255, 255, 0.9)",radius:4,stroke:"#e2e2e2",lineWidth:1},titleStyle:{fontFamily:b,text:"",textBaseline:"top",fontSize:12,fill:"rgb(87, 87, 87)",lineHeight:20,padding:20},markerStyle:{radius:4},nameStyle:{fontFamily:b,fontSize:12,fill:"rgb(87, 87, 87)",textBaseline:"middle",textAlign:"start",padding:8},valueStyle:{fontFamily:b,fontSize:12,fill:"rgb(87, 87, 87)",textBaseline:"middle",textAlign:"start",padding:30},padding:{top:20,right:20,bottom:20,left:20},itemGap:10,animationDuration:200})};function S(P){var A;A=M.call(this,P)||this,f.assign(s(A),o),f.assign(s(A),a);var O=A.get("crosshairs");if(O){var L=O.type==="rect"?A.get("backPlot"):A.get("frontPlot"),H=new i(f.mix({plot:L,plotRange:A.get("plotRange"),canvas:A.get("canvas")},A.get("crosshairs")));H.hide(),A.set("crosshairGroup",H)}return A._init_(),A.get("items")&&A.render(),A}return y._init_=function(){var A=this,O=A.get("padding"),L=A.get("frontPlot"),H=L.addGroup({capture:!1});A.set("markerGroup",H);var F=L.addGroup();F.hide(),A.set("container",F);var K=F.addShape("rect",{attrs:f.mix({},A.get("boardStyle"))});A.set("board",K);var G=A.get("titleStyle");if(A.get("showTitle")){var U=F.addShape("text",{attrs:f.mix({x:O.left,y:O.top},G)});A.set("titleShape",U),U.name="tooltip-title"}var Z=F.addGroup();Z.move(O.left,O.top+G.lineHeight+G.padding),A.set("itemsGroup",Z)},y.render=function(){var A=this;A.clear();var O=A.get("container"),L=A.get("board"),H=A.get("showTitle"),F=A.get("titleContent"),K=this.get("titleShape"),G=this.get("itemsGroup"),U=A.get("items"),Z=A.get("padding");if(K&&H&&K.attr("text",F),G){var J=A.get("itemGap"),rt=0,vt=0;f.each(U,function(Ft){var wt=A._addItem(Ft);wt.move(rt,vt),G.add(wt);var Mt=wt.getBBox().height;vt+=Mt+J})}var mt=O.getBBox(),ut=mt.width+Z.right,Rt=mt.height+Z.bottom;L.attr("width",ut),L.attr("height",Rt),A._alignToRight(ut)},y.clear=function(){var A=this.get("titleShape"),O=this.get("itemsGroup"),L=this.get("board");A.text="",O.clear(),L.attr("width",0),L.attr("height",0)},y.show=function(){var A=this.get("container");A.show();var O=this.get("crosshairGroup");O&&O.show();var L=this.get("markerGroup");L&&L.show(),M.prototype.show.call(this),this.get("canvas").draw()},y.hide=function(){var A=this.get("container");A.hide();var O=this.get("crosshairGroup");O&&O.hide();var L=this.get("markerGroup");L&&L.hide(),M.prototype.hide.call(this),this.get("canvas").draw()},y.destroy=function(){var A=this.get("container"),O=this.get("crosshairGroup");O&&O.destroy();var L=this.get("markerGroup");L&&L.remove(),M.prototype.destroy.call(this),A.remove()},y.setPosition=function(A,O,L){var H=this.get("container"),F=this.get("canvas").get("el"),K=g.getWidth(F),G=g.getHeight(F),U=H.getBBox(),Z=U.width,J=U.height,rt=A,vt=O,mt;if(this.get("position")){var ut=U.width,Rt=U.height;mt=this._calcTooltipPosition(A,O,this.get("position"),ut,Rt,L),A=mt[0],O=mt[1]}else mt=this._constraintPositionInBoundary(A,O,Z,J,K,G),A=mt[0],O=mt[1];if(this.get("inPlot")){var Ft=this.get("plotRange");mt=this._constraintPositionInPlot(A,O,Z,J,Ft,this.get("enterable")),A=mt[0],O=mt[1]}var wt=this.get("markerItems");f.isEmpty(wt)||(rt=wt[0].x,vt=wt[0].y);var Mt=[1,0,0,0,1,0,0,0,1],St=m.transform(Mt,[["t",A,O]]);H.stopAnimate(),H.animate({matrix:St},this.get("animationDuration"));var At=this.get("crosshairGroup");if(At){var nt=this.get("items");At.setPosition(rt,vt,nt)}M.prototype.setPosition.call(this,A,O)},y._addItem=function(A){var O=new n.Group,L=this.get("markerStyle").radius;if(A.marker){var H=f.mix({},A.marker,{x:A.marker.radius/2,y:0,symbol:A.marker.activeSymbol||A.marker.symbol});O.addShape("marker",{attrs:H}),L=A.marker.radius}var F=this.get("nameStyle");O.addShape("text",{attrs:f.mix({x:L+F.padding,y:0,text:A.name},F)});var K=this.get("valueStyle");return O.addShape("text",{attrs:f.mix({x:O.getBBox().width+K.padding,y:0,text:A.value},K)}),O},y._alignToRight=function(A){var O=this,L=this.get("itemsGroup"),H=L.get("children");f.each(H,function(F){var K=F.get("children"),G=K[2],U=G.getBBox().width,Z=A-U-O.get("padding").right*2;G.attr("x",Z)})},S}(l);E.exports=_},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(36),i=e(3),a=function(o){h(v,o);var l=t(v),f=v.prototype;f.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return i.mix({},g,{type:null,plot:null,plotRange:null,rectStyle:{fill:"#CCD6EC",opacity:.3},lineStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1},isTransposed:!1})};function v(b){var g;return g=o.call(this,b)||this,g._init_(),g.render(),g}return f._init_=function(){var g=this,m=g.get("plot"),_;g.type==="rect"?_=m.addGroup({zIndex:0}):_=m.addGroup(),this.set("container",_)},f._addLineShape=function(g,m){var _=this.get("container"),M=_.addShape("line",{capture:!1,attrs:g});return this.set("crossLineShape"+m,M),M},f._renderHorizontalLine=function(g,m){var _=i.mix(this.get("lineStyle"),this.get("style")),M=i.mix({x1:m?m.bl.x:g.get("width"),y1:0,x2:m?m.br.x:0,y2:0},_);this._addLineShape(M,"X")},f._renderVerticalLine=function(g,m){var _=i.mix(this.get("lineStyle"),this.get("style")),M=i.mix({x1:0,y1:m?m.bl.y:g.get("height"),x2:0,y2:m?m.tl.y:0},_);this._addLineShape(M,"Y")},f._renderBackground=function(g,m){var _=i.mix(this.get("rectStyle"),this.get("style")),M=this.get("container"),x=i.mix({x:m?m.tl.x:0,y:m?m.tl.y:g.get("height"),width:m?m.br.x-m.bl.x:g.get("width"),height:m?Math.abs(m.tl.y-m.bl.y):g.get("height")},_),y=M.addShape("rect",{attrs:x,capture:!1});return this.set("crosshairsRectShape",y),y},f._updateRectShape=function(g){var m,_=this.get("crosshairsRectShape"),M=this.get("isTransposed"),x=g[0],y=g[g.length-1],S=M?"y":"x",P=M?"height":"width",A=x[S];if(g.length>1&&x[S]>y[S]&&(A=y[S]),this.get("width"))_.attr(S,A-this.get("crosshairs").width/2),_.attr(P,this.get("width"));else if(i.isArray(x.point[S])&&!x.size){var O=x.point[S][1]-x.point[S][0];_.attr(S,x.point[S][0]),_.attr(P,O)}else m=3*x.size/4,_.attr(S,A-m),g.length===1?_.attr(P,3*x.size/2):_.attr(P,Math.abs(y[S]-x[S])+2*m)},f.render=function(){var g=this.get("canvas"),m=this.get("plotRange"),_=this.get("isTransposed");switch(this.clear(),this.get("type")){case"x":this._renderHorizontalLine(g,m);break;case"y":this._renderVerticalLine(g,m);break;case"cross":this._renderHorizontalLine(g,m),this._renderVerticalLine(g,m);break;case"rect":this._renderBackground(g,m);break;default:_?this._renderHorizontalLine(g,m):this._renderVerticalLine(g,m)}},f.show=function(){var g=this.get("container");o.prototype.show.call(this),g.show()},f.hide=function(){var g=this.get("container");o.prototype.hide.call(this),g.hide()},f.clear=function(){var g=this.get("container");this.set("crossLineShapeX",null),this.set("crossLineShapeY",null),this.set("crosshairsRectShape",null),o.prototype.clear.call(this),g.clear()},f.destroy=function(){var g=this.get("container");o.prototype.destroy.call(this),g.remove()},f.setPosition=function(g,m,_){var M=this.get("crossLineShapeX"),x=this.get("crossLineShapeY"),y=this.get("crosshairsRectShape");x&&!x.get("destroyed")&&x.move(g,0),M&&!M.get("destroyed")&&M.move(0,m),y&&!y.get("destroyed")&&this._updateRectShape(_)},v}(n);E.exports=a},function(E,T,e){var t=e(3),u={setMarkers:function(c,r){var h=this,n=h.get("markerGroup"),i=h.get("frontPlot");n?n.clear():(n=i.addGroup({zIndex:1,capture:!1}),h.set("markerGroup",n)),t.each(c,function(a){var o=t.mix({fill:a.color,symbol:"circle",shadowColor:a.color},r,{x:a.x,y:a.y});a.marker&&a.marker.activeSymbol&&(o.symbol=a.marker.activeSymbol),n.addShape("marker",{color:a.color,attrs:o})}),this.set("markerItems",c)},clearMarkers:function(){var c=this.get("markerGroup");c&&c.clear()}};E.exports=u},function(E,T){var e=20,t={_calcTooltipPosition:function(s,c,r,h,n,i){var a=0,o=0,l=20;if(i){var f=i.getBBox();a=f.width,o=f.height,s=f.x,c=f.y,l=5}switch(r){case"inside":s=s+a/2-h/2,c=c+o/2-n/2;break;case"top":s=s+a/2-h/2,c=c-n-l;break;case"left":s=s-h-l,c=c+o/2-n/2;break;case"right":s=s+a+l,c=c+o/2-n/2;break;case"bottom":default:s=s+a/2-h/2,c=c+o+l;break}return[s,c]},_constraintPositionInBoundary:function(s,c,r,h,n,i){return s+r+e>n?(s-=r+e,s=s<0?0:s):s+e<0?s=e:s+=e,c+h+e>i?(c-=h+e,c=c<0?0:c):c+e<0?c=e:c+=e,[s,c]},_constraintPositionInPlot:function(s,c,r,h,n,i){return s+r>n.tr.x&&(i?s-=r+1:s-=r+2*e),s<n.tl.x&&(s=n.tl.x),i||(c+h>n.bl.y&&(c-=h+2*e),c<n.tl.y&&(c=n.tl.y)),[s,c]}};E.exports=t},function(E,T,e){var t=e(0),u=e(270),s={appear:{duration:450,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut",delay:100},leave:{duration:350,easing:"easeQuadIn"}},c={line:{appear:function(){return u.appear.clipIn},enter:function(){return u.enter.clipIn},leave:function(){return u.leave.lineWidthOut}},path:{appear:function(){return u.appear.clipIn},enter:function(){return u.enter.clipIn},leave:function(){return u.leave.lineWidthOut}},area:{appear:function(){return u.appear.clipIn},enter:function(){return u.enter.fadeIn},leave:function(){return u.leave.fadeOut},cfg:{appear:{duration:500,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:600,delay:150,easing:"easeQuadInOut"},leave:{easing:"easeQuadOut",duration:350}}},polygon:{appear:function(){return u.appear.zoomIn},enter:function(){return u.enter.zoomIn},leave:function(){return u.leave.zoomOut}},edge:{appear:function(){return u.appear.pathIn},enter:function(){return u.enter.pathIn},leave:function(){return u.leave.pathOut}},interval:{appear:function(h){var n;return h.isPolar?(n=u.appear.zoomIn,(h.isTransposed||h.type==="theta")&&(n=u.appear.fanIn)):h.isRect?n=h.isTransposed?u.appear.scaleInX:u.appear.scaleInY:n=u.appear.zoomIn,n},enter:function(h){return h.isRect||h.isTransposed||h.type==="theta"?u.enter.fadeIn:u.enter.zoomIn},leave:function(){return u.leave.fadeOut},update:function(h){if(h.type==="theta")return u.update.fanIn}},point:{appear:function(){return u.appear.zoomIn},enter:function(){return u.enter.zoomIn},leave:function(){return u.leave.zoomOut}},schema:{appear:function(){return u.appear.clipIn},enter:function(){return u.enter.clipIn},leave:function(){return u.leave.lineWidthOut}},contour:null,heatmap:null,label:{appear:function(){return u.appear.fadeIn},enter:function(){return u.enter.fadeIn},leave:function(){return u.leave.fadeOut},cfg:{appear:{duration:900}}},"axis-label":{enter:function(){return u.appear.fadeIn},leave:function(){return u.leave.fadeOut},update:function(h){if(h.isPolar)return u.appear.fadeIn}},"axis-ticks":{enter:function(){return u.appear.fadeIn},leave:function(){return u.leave.fadeOut},update:function(h){if(h.isPolar)return u.appear.fadeIn}},"axis-grid":{enter:function(){return u.appear.fadeIn},leave:function(){return u.leave.fadeOut},update:function(h){if(h.isPolar)return u.appear.fadeIn}},"axis-grid-rect":{enter:function(){return u.appear.fadeIn},leave:function(){return u.leave.fadeOut},update:function(){return u.leave.fadeIn}},labelLine:{appear:function(){return u.appear.pathIn},enter:function(){return u.enter.pathIn},leave:function(){return u.leave.pathOut}}};c.Action=u,c.defaultCfg=s,c.getAnimation=function(r,h,n){var i=this[r];if(i){var a=i[n];if(t.isFunction(a))return a(h)}return!1},c.getAnimateCfg=function(r,h){var n=s[h];return this[r]&&this[r].cfg&&this[r].cfg[h]?t.deepMix({},n,this[r].cfg[h]):n},c.registerAnimation=function(r,h,n){this.Action[r]||(this.Action[r]={}),this.Action[r][h]=n},E.exports=c},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var u=e(105),s=e(0),c=function(r){t(n,r);var h=n.prototype;h.getDefaultCfg=function(){return{}};function n(i){var a;a=r.call(this)||this;var o={visible:!0},l=a.getDefaultCfg();return a._attrs=o,s.assign(o,l,i),a}return h.get=function(a){return this._attrs[a]},h.set=function(a,o){this._attrs[a]=o},h.show=function(){var a=this.get("visible");a||(this.set("visible",!0),this.changeVisible(!0))},h.hide=function(){var a=this.get("visible");a&&(this.set("visible",!1),this.changeVisible(!1))},h.changeVisible=function(){},h.destroy=function(){this._attrs={},this.removeAllListeners(),this.destroyed=!0},n}(u);E.exports=c},function(E,T,e){E.exports={Scale:e(277),Coord:e(273),Axis:e(272),Guide:e(275),Legend:e(276),Tooltip:e(278),Event:e(274)}},function(E,T,e){var t=e(16),u=e(0),s=e(123);function c(h,n,i){i===void 0&&(i=1);var a=[h.x,h.y,i];return u.vec3.transformMat3(a,a,n),{x:a[0],y:a[1]}}function r(h){var n=h.getBBox(),i={x:n.minX,y:n.minY},a={x:n.maxX,y:n.maxY},o=h.attr("matrix");return i=c(i,o),a=c(a,o),{minX:i.x,minY:i.y,maxX:a.x,maxY:a.y}}E.exports=function(n,i){var a=i;return u.each(n.get("children"),function(o){o instanceof t.Group&&u.each(o.get("children"),function(l){if(l instanceof t.Group&&l.get("children").length||l instanceof t.Path)a=s(a,l.getBBox());else if(l instanceof t.Text){var f=r(l);a=s(a,f)}})}),a}},function(E,T){E.exports=function(t,u){return{minX:Math.min(t.minX,u.minX),minY:Math.min(t.minY,u.minY),maxX:Math.max(t.maxX,u.maxX),maxY:Math.max(t.maxY,u.maxY)}}},function(E,T){E.exports=function(t){return{minX:t.tl.x,minY:t.tl.y,maxX:t.br.x,maxY:t.br.y}}},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(46),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="list",i.cols=null,i},h.generateFacets=function(i){var a=this,o=a.fields,l=o[0];if(!l)throw"Please specify for the field for facet!";var f=a.getFieldValues(l,i),v=f.length,b=a.cols||v,g=parseInt((v+b-1)/b),m=[];return f.forEach(function(_,M){var x=parseInt(M/b),y=M%b,S=[{field:l,value:_,values:f}],P=a.getFilter(S),A=i.filter(P),O={type:a.type,count:v,colValue:_,colField:l,rowField:null,rowValue:_,colIndex:y,rowIndex:x,cols:b,rows:g,data:A,region:a.getRegion(g,b,y,x)};m.push(O)}),m},h.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1&&o.cols*o.rowIndex+o.colIndex+1+o.cols<=o.count&&(a[i].label=null,a[i].title=null)},h.setYAxis=function(i,a,o){o.colIndex!==0&&(a[i].title=null,a[i].label=null)},r}(u);E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(46),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="rect",i},h.generateFacets=function(i){var a=this,o=a.fields,l=[],f=1,v=1,b=o[0],g=o[1],m=[""],_=[""];return b&&(m=a.getFieldValues(b,i),v=m.length),g&&(_=a.getFieldValues(g,i),f=_.length),m.forEach(function(M,x){_.forEach(function(y,S){var P=[{field:b,value:M,values:m},{field:g,value:y,values:_}],A=a.getFilter(P),O=i.filter(A),L={type:a.type,colValue:M,rowValue:y,colField:b,rowField:g,colIndex:x,rowIndex:S,cols:v,rows:f,data:O,region:a.getRegion(f,v,x,S)};l.push(L)})}),l},h.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1?(a[i].title=null,a[i].label=null):o.colIndex!==parseInt((o.cols-1)/2)&&(a[i].title=null)},h.setYAxis=function(i,a,o){o.colIndex!==0?(a[i].title=null,a[i].label=null):o.rowIndex!==parseInt((o.rows-1)/2)&&(a[i].title=null)},h.renderTitle=function(i,a){a.rowIndex===0&&this.drawColTitle(i,a),a.colIndex===a.cols-1&&this.drawRowTitle(i,a)},r}(u);E.exports=s},function(E,T,e){var t=e(69),u=e(25),s=e(0),c=function r(h){r.superclass.constructor.call(this,h)};s.extend(c,t),s.augment(c,{getPointRauis:function(h,n){return u.getPointRadius(h,n)},getCirclePoint:function(h,n,i){var a=this,o=a.get("coord"),l=o.getCenter(),f=a._isEmitLabels(),v=a.getPointRauis(o,i);if(v===0)return null;if(o.isTransposed&&v>n&&!f){var b=Math.asin(n/(2*v));h=h+b*2}else v=v+n;return{x:l.x+v*Math.cos(h),y:l.y+v*Math.sin(h),angle:h,r:v}},getArcPoint:function(h,n){var i=this,a;return n=n||0,s.isArray(h.x)||s.isArray(h.y)?a={x:s.isArray(h.x)?h.x[n]:h.x,y:s.isArray(h.y)?h.y[n]:h.y}:a=h,i.transLabelPoint(a),a},getPointAngle:function(h){var n=this,i=n.get("coord");return u.getPointAngle(i,h)},getMiddlePoint:function(h){var n=this,i=n.get("coord"),a=h.length,o={x:0,y:0};return s.each(h,function(l){o.x+=l.x,o.y+=l.y}),o.x/=a,o.y/=a,o=i.convert(o),o},_isToMiddle:function(h){return h.x.length>2},getLabelPoint:function(h,n,i){var a=this,o=h.text[i],l=1,f;a._isToMiddle(n)?f=a.getMiddlePoint(n.points):(h.text.length===1&&i===0?i=1:i===0&&(l=-1),f=a.getArcPoint(n,i));var v=a.getDefaultOffset(h);v=v*l;var b=a.getPointAngle(f),g=a.getCirclePoint(b,v,f);if(g?(g.text=o,g.angle=b,g.color=n.color):g={text:""},h.autoRotate||typeof h.autoRotate=="undefined"){var m=g.textStyle?g.textStyle.rotate:null;m||(m=g.rotate||a.getLabelRotate(b,v,n)),g.rotate=m}return g.start={x:f.x,y:f.y},g},_isEmitLabels:function(){var h=this.get("label");return h.labelEmit},getLabelRotate:function(h){var n=this,i;return i=h*180/Math.PI,i+=90,n._isEmitLabels()&&(i-=90),i&&(i>90?i=i-180:i<-90&&(i=i+180)),i/180*Math.PI},getLabelAlign:function(h){var n=this,i=n.get("coord"),a;if(n._isEmitLabels())h.angle<=Math.PI/2&&h.angle>-Math.PI/2?a="left":a="right";else if(!i.isTransposed)a="center";else{var o=i.getCenter(),l=n.getDefaultOffset(h);Math.abs(h.x-o.x)<1?a="center":h.angle>Math.PI||h.angle<=0?l>0?a="left":a="right":l>0?a="right":a="left"}return a}}),E.exports=c},function(E,T,e){var t=e(0),u=e(5);E.exports={splitData:function(c){var r=this.get("viewTheme")||u;if(!c.length)return[];var h=[],n=[],i=this.getYScale(),a=i.field,o;return t.each(c,function(l){o=l._origin?l._origin[a]:l[a],r.connectNulls?t.isNil(o)||n.push(l):t.isArray(o)&&t.isNil(o[0])||t.isNil(o)?n.length&&(h.push(n),n=[]):n.push(l)}),n.length&&h.push(n),h}}},function(E,T){E.exports={toFront:function(t){var u=t.get("parent"),s=u.get("children").indexOf(t);t.set("_originIndex",s),t.toFront()},resetZIndex:function(t){var u=t.get("parent"),s=t.get("_originIndex"),c=u.get("children"),r=c.indexOf(t);s>=0&&s!==r&&(c.splice(r,1),c.splice(s,0,t))}}},function(E,T,e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function u(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var s=e(8),c=e(128),r=e(0),h=function(n){u(a,n);var i=a.prototype;i.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return l.type="path",l.shapeType="line",l};function a(o){var l;return l=n.call(this,o)||this,r.assign(t(l),c),l}return i.getDrawCfg=function(l){var f=n.prototype.getDrawCfg.call(this,l);return f.isStack=this.hasStack(),f},i.draw=function(l,f,v,b){var g=this,m=this.splitData(l),_=this.getDrawCfg(l[0]);g._applyViewThemeShapeStyle(_,_.shape,v),_.origin=l,r.each(m,function(M,x){if(!r.isEmpty(M)){_.splitedIndex=x,_.points=M;var y=v.drawShape(_.shape,_,f);g.appendShapeInfo(y,b+x)}})},a}(s);s.Path=h,E.exports=h},function(E,T){var e,t,u="#1890FF",s=["#1890FF","#2FC25B","#FACC14","#223273","#8543E0","#13C2C2","#3436C7","#F04864"],c=["#1890FF","#41D9C7","#2FC25B","#FACC14","#E6965C","#223273","#7564CC","#8543E0","#5C8EE6","#13C2C2","#5CA3E6","#3436C7","#B381E6","#F04864","#D598D9"],r=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],h=["#1890FF","#13C2C2","#2FC25B","#FACC14","#F04864","#8543E0","#3436C7","#223273"],n=["#1890FF","#73C9E6","#13C2C2","#6CD9B3","#2FC25B","#9DD96C","#FACC14","#E6965C","#F04864","#D66BCA","#8543E0","#8E77ED","#3436C7","#737EE6","#223273","#7EA2E6"],i='"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"',a="g2-tooltip",o="g2-tooltip-title",l="g2-tooltip-list",f="g2-tooltip-list-item",v="g2-tooltip-marker",b="g2-tooltip-value",g="g2-legend",m="g2-legend-title",_="g2-legend-list",M="g2-legend-list-item",x="g2-legend-marker",y={defaultColor:u,plotCfg:{padding:[20,20,95,80]},fontFamily:i,defaultLegendPosition:"bottom",colors:s,colors_16:c,colors_24:r,colors_pie:h,colors_pie_16:n,shapes:{point:["hollowCircle","hollowSquare","hollowDiamond","hollowBowtie","hollowTriangle","hollowHexagon","cross","tick","plus","hyphen","line"],line:["line","dash","dot"],area:["area"]},sizes:[1,10],opacities:[.1,.9],axis:{top:{position:"top",title:null,label:{offset:16,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i},autoRotate:!0},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},bottom:{position:"bottom",title:null,label:{offset:16,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},left:{position:"left",title:null,label:{offset:8,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:null,tickLine:null,grid:{zIndex:-1,lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},right:{position:"right",title:null,label:{offset:8,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:null,tickLine:null,grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},circle:{zIndex:1,title:null,label:{offset:8,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},radius:{zIndex:0,label:{offset:12,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",lineHeight:16,fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},type:"circle"}},helix:{grid:null,label:null,title:null,line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,length:4,stroke:"#BFBFBF",alignWithLabel:!0}}},label:{offset:20,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",fontFamily:i}},treemapLabels:{offset:10,textStyle:{fill:"#fff",fontSize:12,textBaseline:"top",fontStyle:"bold",fontFamily:i}},innerLabels:{textStyle:{fill:"#fff",fontSize:12,textBaseline:"middle",fontFamily:i}},thetaLabels:{labelHeight:14,offset:30},legend:{right:{position:"right",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,legendStyle:{LIST_CLASS:{textAlign:"left"}},textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:0,fontFamily:i},unCheckColor:"#bfbfbf"},left:{position:"left",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},top:{position:"top",offset:[0,6],layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},bottom:{position:"bottom",offset:[0,6],layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},html:(e={},e[""+g]={height:"auto",width:"auto",position:"absolute",overflow:"auto",fontSize:"12px",fontFamily:i,lineHeight:"20px",color:"#8C8C8C"},e[""+m]={marginBottom:"4px"},e[""+_]={listStyleType:"none",margin:0,padding:0},e[""+M]={listStyleType:"none",cursor:"pointer",marginBottom:"5px",marginRight:"24px"},e[""+x]={width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"8px",verticalAlign:"middle"},e),gradient:{textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"center",textBaseline:"middle",lineHeight:20,fontFamily:i},lineStyle:{lineWidth:1,stroke:"#fff"},unCheckColor:"#bfbfbf"},margin:[0,5,24,5],legendMargin:24},tooltip:(t={useHtml:!0,crosshairs:!1,offset:15,marker:{symbol:"circle",activeSymbol:"circle"}},t[""+a]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:i,lineHeight:"20px",padding:"10px 10px 6px 10px"},t[""+o]={marginBottom:"4px"},t[""+l]={margin:0,listStyleType:"none",padding:0},t[""+f]={listStyleType:"none",marginBottom:"4px",padding:0,marginTop:0,marginLeft:0,marginRight:0},t[""+v]={width:"5px",height:"5px",display:"inline-block",marginRight:"8px"},t[""+b]={display:"inline-block",float:"right",marginLeft:"30px"},t),tooltipMarker:{symbol:function(P,A,O){return[["M",P,A],["m",-O,0],["a",O,O,0,1,0,O*2,0],["a",O,O,0,1,0,-O*2,0]]},stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,radius:4},tooltipCrosshairsRect:{type:"rect",rectStyle:{fill:"#CCD6EC",opacity:.3}},tooltipCrosshairsLine:{lineStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1}},shape:{point:{lineWidth:1,fill:u,radius:4},hollowPoint:{fill:"#fff",lineWidth:1,stroke:u,radius:3},interval:{lineWidth:0,fill:u,fillOpacity:.85},hollowInterval:{fill:"#fff",stroke:u,fillOpacity:0,lineWidth:2},area:{lineWidth:0,fill:u,fillOpacity:.6},polygon:{lineWidth:0,fill:u,fillOpacity:1},hollowPolygon:{fill:"#fff",stroke:u,fillOpacity:0,lineWidth:2},hollowArea:{fill:"#fff",stroke:u,fillOpacity:0,lineWidth:2},line:{stroke:u,lineWidth:2,fill:null},edge:{stroke:u,lineWidth:1,fill:null},schema:{stroke:u,lineWidth:1,fill:null}},guide:{line:{lineStyle:{stroke:"rgba(0, 0, 0, .65)",lineDash:[2,2],lineWidth:1},text:{position:"start",autoRotate:!0,style:{fill:"rgba(0, 0, 0, .45)",fontSize:12,textAlign:"start",fontFamily:i,textBaseline:"bottom"}}},text:{style:{fill:"rgba(0,0,0,.5)",fontSize:12,textBaseline:"middle",textAlign:"start",fontFamily:i}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}},html:{alignX:"middle",alignY:"middle"},dataRegion:{style:{region:{lineWidth:0,fill:"#000000",opacity:.04},text:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:"rgba(0, 0, 0, .65)"}}},dataMarker:{top:!0,style:{point:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#A3B1BF",lineWidth:1},text:{fill:"rgba(0, 0, 0, .65)",opacity:1,fontSize:12,textAlign:"start"}},display:{point:!0,line:!0,text:!0},lineLength:20,direction:"upward",autoAdjust:!0}},pixelRatio:null};E.exports=y},function(E,T,e){var t={default:e(131),dark:e(327)};E.exports=t},function(E,T,e){var t=e(1),u=e(330),s=e(333),c=e(329),r=e(105),h=function(i){this._cfg={zIndex:0,capture:!0,visible:!0,destroyed:!1},t.assign(this._cfg,this.getDefaultCfg(),i),this.initAttrs(this._cfg.attrs),this._cfg.attrs={},this.initTransform(),this.init()};h.CFG={id:null,zIndex:0,canvas:null,parent:null,capture:!0,context:null,visible:!0,destroyed:!1},t.augment(h,u,s,r,c,{init:function(){this.setSilent("animable",!0),this.setSilent("animating",!1)},getParent:function(){return this._cfg.parent},getDefaultCfg:function(){return{}},set:function(i,a){return i==="zIndex"&&this._beforeSetZIndex&&this._beforeSetZIndex(a),i==="loading"&&this._beforeSetLoading&&this._beforeSetLoading(a),this._cfg[i]=a,this},setSilent:function(i,a){this._cfg[i]=a},get:function(i){return this._cfg[i]},show:function(){return this._cfg.visible=!0,this},hide:function(){return this._cfg.visible=!1,this},remove:function(i,a){var o=this._cfg,l=o.parent,f=o.el;return l&&t.remove(l.get("children"),this),f&&(a?l&&l._cfg.tobeRemoved.push(f):f.parentNode.removeChild(f)),(i||i===void 0)&&this.destroy(),this},destroy:function(){var i=this.get("destroyed");i||(this._attrs=null,this.removeEvent(),this._cfg={destroyed:!0})},toFront:function(){var i=this._cfg,a=i.parent;if(!!a){var o=a._cfg.children,l=i.el,f=o.indexOf(this);o.splice(f,1),o.push(this),l&&(l.parentNode.removeChild(l),i.el=null)}},toBack:function(){var i=this._cfg,a=i.parent;if(!!a){var o=a._cfg.children,l=i.el,f=o.indexOf(this);if(o.splice(f,1),o.unshift(this),l){var v=l.parentNode;v.removeChild(l),v.insertBefore(l,v.firstChild)}}},_beforeSetZIndex:function(i){var a=this._cfg.parent;this._cfg.zIndex=i,t.isNil(a)||a.sort();var o=this._cfg.el;if(o){var l=a._cfg.children,f=l.indexOf(this),v=o.parentNode;v.removeChild(o),f===l.length-1?v.appendChild(o):v.insertBefore(o,v.childNodes[f])}return i},_setAttrs:function(i){return this.attr(i),i},setZIndex:function(i){return this._cfg.zIndex=i,this._beforeSetZIndex(i)},clone:function(){return t.clone(this)},getBBox:function(){}}),E.exports=h},function(E,T,e){var t=e(1),u=e(133),s=e(347),c={},r="_INDEX";function h(o){return function(l,f){var v=o(l,f);return v===0?l[r]-f[r]:v}}function n(o,l,f){for(var v,b=o.length-1;b>=0;b--){var g=o[b];if(g._cfg.visible&&g._cfg.capture&&(g.isGroup?v=g.getShape(l,f):g.isHit(l,f)&&(v=g)),v)break}return v}var i=function o(l){o.superclass.constructor.call(this,l),this.set("children",[]),this.set("tobeRemoved",[]),this._beforeRenderUI(),this._renderUI(),this._bindUI()};function a(o){if(!(o._cfg||o===i)){var l=o.superclass.constructor;l&&!l._cfg&&a(l),o._cfg={},t.merge(o._cfg,l._cfg),t.merge(o._cfg,o.CFG)}}t.extend(i,u),t.augment(i,{isGroup:!0,type:"group",canFill:!0,canStroke:!0,getDefaultCfg:function(){return a(this.constructor),t.merge({},this.constructor._cfg)},_beforeRenderUI:function(){},_renderUI:function(){},_bindUI:function(){},addShape:function(l,f){var v=this.get("canvas");f=f||{};var b=c[l];if(b||(b=t.upperFirst(l),c[l]=b),f.attrs&&v){var g=f.attrs;if(l==="text"){var m=v.get("fontFamily");m&&(g.fontFamily=g.fontFamily?g.fontFamily:m)}}f.canvas=v,f.type=l;var _=new s[b](f);return this.add(_),_},addGroup:function(l,f){var v=this.get("canvas"),b;if(f=t.merge({},f),t.isFunction(l))f?(f.canvas=v,f.parent=this,b=new l(f)):b=new l({canvas:v,parent:this}),this.add(b);else if(t.isObject(l))l.canvas=v,b=new i(l),this.add(b);else if(l===void 0)b=new i,this.add(b);else return!1;return b},renderBack:function(l,f){var v=this.get("backShape"),b=this.getBBox();return t.merge(f,{x:b.minX-l[3],y:b.minY-l[0],width:b.width+l[1]+l[3],height:b.height+l[0]+l[2]}),v?v.attr(f):v=this.addShape("rect",{zIndex:-1,attrs:f}),this.set("backShape",v),this.sort(),v},removeChild:function(l,f){if(arguments.length>=2)this.contain(l)&&l.remove(f);else{if(arguments.length===1)if(t.isBoolean(l))f=l;else return this.contain(l)&&l.remove(!0),this;arguments.length===0&&(f=!0),i.superclass.remove.call(this,f)}return this},add:function(l){var f=this,v=f.get("children");if(t.isArray(l))t.each(l,function(m){var _=m.get("parent");_&&_.removeChild(m,!1),f._setCfgProperty(m)}),f._cfg.children=v.concat(l);else{var b=l,g=b.get("parent");g&&g.removeChild(b,!1),f._setCfgProperty(b),v.push(b)}return f},_setCfgProperty:function(l){var f=this._cfg;l.set("parent",this),l.set("canvas",f.canvas),f.timeline&&l.set("timeline",f.timeline)},contain:function(l){var f=this.get("children");return f.indexOf(l)>-1},getChildByIndex:function(l){var f=this.get("children");return f[l]},getFirst:function(){return this.getChildByIndex(0)},getLast:function(){var l=this.get("children").length-1;return this.getChildByIndex(l)},getBBox:function(){var l=this,f=Infinity,v=-Infinity,b=Infinity,g=-Infinity,m=l.get("children");m.length>0?t.each(m,function(M){if(M.get("visible")){if(M.isGroup&&M.get("children").length===0)return;var x=M.getBBox();if(!x)return!0;var y=[x.minX,x.minY,1],S=[x.minX,x.maxY,1],P=[x.maxX,x.minY,1],A=[x.maxX,x.maxY,1];M.apply(y),M.apply(S),M.apply(P),M.apply(A);var O=Math.min(y[0],S[0],P[0],A[0]),L=Math.max(y[0],S[0],P[0],A[0]),H=Math.min(y[1],S[1],P[1],A[1]),F=Math.max(y[1],S[1],P[1],A[1]);O<f&&(f=O),L>v&&(v=L),H<b&&(b=H),F>g&&(g=F)}}):(f=0,v=0,b=0,g=0);var _={minX:f,minY:b,maxX:v,maxY:g};return _.x=_.minX,_.y=_.minY,_.width=_.maxX-_.minX,_.height=_.maxY-_.minY,_},getCount:function(){return this.get("children").length},sort:function(){var l=this.get("children");return t.each(l,function(f,v){return f[r]=v,f}),l.sort(h(function(f,v){return f.get("zIndex")-v.get("zIndex")})),this},findById:function(l){return this.find(function(f){return f.get("id")===l})},find:function(l){if(t.isString(l))return this.findById(l);var f=this.get("children"),v=null;return t.each(f,function(b){if(l(b)?v=b:b.find&&(v=b.find(l)),v)return!1}),v},findAll:function(l){var f=this.get("children"),v=[],b=[];return t.each(f,function(g){l(g)&&v.push(g),g.findAllBy&&(b=g.findAllBy(l),v=v.concat(b))}),v},findBy:function(l){var f=this.get("children"),v=null;return t.each(f,function(b){if(l(b)?v=b:b.findBy&&(v=b.findBy(l)),v)return!1}),v},findAllBy:function(l){var f=this.get("children"),v=[],b=[];return t.each(f,function(g){l(g)&&v.push(g),g.findAllBy&&(b=g.findAllBy(l),v=v.concat(b))}),v},getShape:function(l,f){var v=this,b=v._attrs.clip,g=v._cfg.children,m;if(b){var _=[l,f,1];b.invert(_,v.get("canvas")),b.isPointInPath(_[0],_[1])&&(m=n(g,l,f))}else m=n(g,l,f);return m},clearTotalMatrix:function(){var l=this.get("totalMatrix");if(l){this.setSilent("totalMatrix",null);for(var f=this._cfg.children,v=0;v<f.length;v++){var b=f[v];b.clearTotalMatrix()}}},clear:function(l){for(var f=this._cfg.children,v=f.length-1;v>=0;v--)f[v].remove(!0,l);return this._cfg.children=[],this},destroy:function(){this.get("destroyed")||(this.clear(),i.superclass.destroy.call(this))},clone:function(){var l=this,f=l._cfg.children,v=new i;return t.each(f,function(b){v.add(b.clone())}),v}}),E.exports=i},function(E,T,e){var t=e(1),u=function(c,r,h,n){this.type=c,this.target=null,this.currentTarget=null,this.bubbles=h,this.cancelable=n,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.removed=!1,this.event=r};t.augment(u,{preventDefault:function(){this.defaultPrevented=this.cancelable&&!0},stopPropagation:function(){this.propagationStopped=!0},remove:function(){this.remove=!0},clone:function(){return t.clone(this)},toString:function(){return"[Event (type="+this.type+")]"}}),E.exports=u},function(E,T,e){var t=e(1),u=e(7),s=e(47),c=e(49);function r(i,a,o){return i+a*Math.cos(o)}function h(i,a,o){return i+a*Math.sin(o)}var n=function i(a){i.superclass.constructor.call(this,a)};n.ATTRS={x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(n,u),t.augment(n,{canStroke:!0,type:"arc",getDefaultAttrs:function(){return{x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var a=this._attrs,o=a.x,l=a.y,f=a.r,v=a.startAngle,b=a.endAngle,g=a.clockwise,m=this.getHitLineWidth(),_=m/2,M=s.box(o,l,f,v,b,g);return M.minX-=_,M.minY-=_,M.maxX+=_,M.maxY+=_,M},getStartTangent:function(){var a=this._attrs,o=a.x,l=a.y,f=a.startAngle,v=a.r,b=a.clockwise,g=Math.PI/180;b&&(g*=-1);var m=[],_=r(o,v,f+g),M=h(l,v,f+g),x=r(o,v,f),y=h(l,v,f);return m.push([_,M]),m.push([x,y]),m},getEndTangent:function(){var a=this._attrs,o=a.x,l=a.y,f=a.endAngle,v=a.r,b=a.clockwise,g=Math.PI/180,m=[];b&&(g*=-1);var _=r(o,v,f+g),M=h(l,v,f+g),x=r(o,v,f),y=h(l,v,f);return m.push([x,y]),m.push([_,M]),m},createPath:function(a){var o=this._attrs,l=o.x,f=o.y,v=o.r,b=o.startAngle,g=o.endAngle,m=o.clockwise;a=a||self.get("context"),a.beginPath(),a.arc(l,f,v,b,g,m)},afterPath:function(a){var o=this._attrs;if(a=a||this.get("context"),o.startArrow){var l=this.getStartTangent();c.addStartArrow(a,o,l[0][0],l[0][1],l[1][0],l[1][1])}if(o.endArrow){var f=this.getEndTangent();c.addEndArrow(a,o,f[0][0],f[0][1],f[1][0],f[1][1])}}}),E.exports=n},function(E,T,e){var t=e(1),u=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,r:0,lineWidth:1},t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"circle",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this._attrs,h=r.x,n=r.y,i=r.r,a=this.getHitLineWidth(),o=a/2+i;return{minX:h-o,minY:n-o,maxX:h+o,maxY:n+o}},createPath:function(r){var h=this._attrs,n=h.x,i=h.y,a=h.r;r.beginPath(),r.arc(n,i,a,0,Math.PI*2,!1),r.closePath()}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=function c(r){c.superclass.constructor.call(this,r)};t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"dom",calculateBox:function(){var r=this,h=r._attrs,n=h.x,i=h.y,a=h.width,o=h.height,l=this.getHitLineWidth(),f=l/2;return{minX:n-f,minY:i-f,maxX:n+a+f,maxY:i+o+f}}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,rx:1,ry:1,lineWidth:1},t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"ellipse",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this._attrs,h=r.x,n=r.y,i=r.rx,a=r.ry,o=this.getHitLineWidth(),l=i+o/2,f=a+o/2;return{minX:h-l,minY:n-f,maxX:h+l,maxY:n+f}},createPath:function(r){var h=this._attrs,n=h.x,i=h.y,a=h.rx,o=h.ry;r=r||self.get("context");var l=a>o?a:o,f=a>o?1:a/o,v=a>o?o/a:1,b=[1,0,0,0,1,0,0,0,1];t.mat3.scale(b,b,[f,v]),t.mat3.translate(b,b,[n,i]),r.beginPath(),r.save(),r.transform(b[0],b[1],b[3],b[4],b[6],b[7]),r.arc(0,0,l,0,Math.PI*2),r.restore(),r.closePath()}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=e(47),c=function r(h){r.superclass.constructor.call(this,h)};c.ATTRS={x:0,y:0,rs:0,re:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1},t.extend(c,u),t.augment(c,{canFill:!0,canStroke:!0,type:"fan",getDefaultAttrs:function(){return{clockwise:!1,lineWidth:1,rs:0,re:0}},calculateBox:function(){var h=this,n=h._attrs,i=n.x,a=n.y,o=n.rs,l=n.re,f=n.startAngle,v=n.endAngle,b=n.clockwise,g=this.getHitLineWidth(),m=s.box(i,a,o,f,v,b),_=s.box(i,a,l,f,v,b),M=Math.min(m.minX,_.minX),x=Math.min(m.minY,_.minY),y=Math.max(m.maxX,_.maxX),S=Math.max(m.maxY,_.maxY),P=g/2;return{minX:M-P,minY:x-P,maxX:y+P,maxY:S+P}},createPath:function(h){var n=this._attrs,i=n.x,a=n.y,o=n.rs,l=n.re,f=n.startAngle,v=n.endAngle,b=n.clockwise,g={x:Math.cos(f)*o+i,y:Math.sin(f)*o+a},m={x:Math.cos(f)*l+i,y:Math.sin(f)*l+a},_={x:Math.cos(v)*o+i,y:Math.sin(v)*o+a};h=h||self.get("context"),h.beginPath(),h.moveTo(g.x,g.y),h.lineTo(m.x,m.y),h.arc(i,a,l,f,v,b),h.lineTo(_.x,_.y),h.arc(i,a,o,v,f,!b),h.closePath()}}),E.exports=c},function(E,T,e){var t=e(1),u=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,img:void 0,width:0,height:0,sx:null,sy:null,swidth:null,sheight:null},t.extend(s,u),t.augment(s,{type:"image",isHitBox:function(){return!1},calculateBox:function(){var r=this._attrs;(!this._cfg.attrs||this._cfg.attrs.img!==r.img)&&this._setAttrImg();var h=r.x,n=r.y,i=r.width,a=r.height;return{minX:h,minY:n,maxX:h+i,maxY:n+a}},_beforeSetLoading:function(r){var h=this.get("canvas");return r===!1&&this.get("toDraw")===!0&&(this._cfg.loading=!1,h.draw()),r},_setAttrImg:function(){var r=this,h=r._attrs,n=h.img;if(t.isString(n)){var i=new Image;i.onload=function(){if(r.get("destroyed"))return!1;r.attr("imgSrc",n),r.attr("img",i);var a=r.get("callback");a&&a.call(r),r.set("loading",!1)},i.src=n,i.crossOrigin="Anonymous",r.set("loading",!0)}else return n instanceof Image?(h.width||r.attr("width",n.width),h.height||r.attr("height",n.height),n):n instanceof HTMLElement&&t.isString(n.nodeName)&&n.nodeName.toUpperCase()==="CANVAS"?(h.width||r.attr("width",Number(n.getAttribute("width"))),h.height||r.attr("height",Number(n.getAttribute("height"))),n):n instanceof ImageData?(h.width||r.attr("width",n.width),h.height||r.attr("height",n.height),n):null},drawInner:function(r){if(this._cfg.hasUpdate&&this._setAttrImg(),this.get("loading")){this.set("toDraw",!0);return}this._drawImage(r),this._cfg.hasUpdate=!1},_drawImage:function(r){var h=this._attrs,n=h.x,i=h.y,a=h.img,o=h.width,l=h.height,f=h.sx,v=h.sy,b=h.swidth,g=h.sheight;this.set("toDraw",!1);var m=a;if(m instanceof ImageData&&(m=new Image,m.src=a),m instanceof Image||m instanceof HTMLElement&&t.isString(m.nodeName)&&m.nodeName.toUpperCase()==="CANVAS"){if(t.isNil(f)||t.isNil(v)||t.isNil(b)||t.isNil(g)){r.drawImage(m,n,i,o,l);return}if(!t.isNil(f)&&!t.isNil(v)&&!t.isNil(b)&&!t.isNil(g)){r.drawImage(m,f,v,b,g,n,i,o,l);return}}}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=e(49),c=e(48),r=function h(n){h.superclass.constructor.call(this,n)};r.ATTRS={x1:0,y1:0,x2:0,y2:0,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(r,u),t.augment(r,{canStroke:!0,type:"line",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var n=this._attrs,i=n.x1,a=n.y1,o=n.x2,l=n.y2,f=this.getHitLineWidth();return c.box(i,a,o,l,f)},createPath:function(n){var i=this._attrs,a=i.x1,o=i.y1,l=i.x2,f=i.y2;n=n||self.get("context"),n.beginPath(),n.moveTo(a,o),n.lineTo(l,f)},afterPath:function(n){var i=this._attrs,a=i.x1,o=i.y1,l=i.x2,f=i.y2;n=n||this.get("context"),i.startArrow&&s.addStartArrow(n,i,l,f,a,o),i.endArrow&&s.addEndArrow(n,i,a,o,l,f)},getPoint:function(n){var i=this._attrs;return{x:c.at(i.x1,i.x2,n),y:c.at(i.y1,i.y2,n)}}}),E.exports=r},function(E,T){E.exports={xAt:function(t,u,s,c,r){return u*Math.cos(t)*Math.cos(r)-s*Math.sin(t)*Math.sin(r)+c},yAt:function(t,u,s,c,r){return u*Math.sin(t)*Math.cos(r)+s*Math.cos(t)*Math.sin(r)+c},xExtrema:function(t,u,s){return Math.atan(-s/u*Math.tan(t))},yExtrema:function(t,u,s){return Math.atan(s/(u*Math.tan(t)))}}},function(E,T,e){var t=e(1),u=t.vec2;function s(h,n,i,a){var o=1-a;return o*(o*h+2*a*n)+a*a*i}function c(h,n,i,a,o,l,f,v,b){var g,m=.005,_=Infinity,M,x,y,S,P,A,O=1e-4,L=[f,v];for(S=0;S<1;S+=.05)x=[s(h,i,o,S),s(n,a,l,S)],M=u.squaredDistance(L,x),M<_&&(g=S,_=M);for(_=Infinity,A=0;A<32&&!(m<O);A++){var H=g-m,F=g+m;x=[s(h,i,o,H),s(n,a,l,H)],M=u.squaredDistance(L,x),H>=0&&M<_?(g=H,_=M):(y=[s(h,i,o,F),s(n,a,l,F)],P=u.squaredDistance(L,y),F<=1&&P<_?(g=F,_=P):m*=.5)}return b&&(b.x=s(h,i,o,g),b.y=s(n,a,l,g)),Math.sqrt(_)}function r(h,n,i){var a=h+i-2*n;if(t.isNumberEqual(a,0))return[.5];var o=(h-n)/a;return o<=1&&o>=0?[o]:[]}E.exports={at:s,projectPoint:function(n,i,a,o,l,f,v,b){var g={};return c(n,i,a,o,l,f,v,b,g),g},pointDistance:c,extrema:r}},function(E,T,e){var t=e(1),u=e(7),s=e(50),c=e(37),r=e(49),h=e(77),n=e(75),i=function a(o){a.superclass.constructor.call(this,o)};i.ATTRS={path:null,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(i,u),t.augment(i,{canFill:!0,canStroke:!0,type:"path",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},_afterSetAttrPath:function(o){var l=this;if(t.isNil(o)){l.setSilent("segments",null),l.setSilent("box",void 0);return}var f=c.parsePath(o),v,b=[];if(!(!t.isArray(f)||f.length===0||f[0][0]!=="M"&&f[0][0]!=="m")){for(var g=f.length,m=0;m<f.length;m++){var _=f[m];v=new s(_,v,m===g-1),b.push(v)}l.setSilent("segments",b),l.setSilent("tCache",null),l.setSilent("box",null)}},calculateBox:function(){var o=this,l=o.get("segments");if(!l)return null;var f=this.getHitLineWidth(),v=Infinity,b=-Infinity,g=Infinity,m=-Infinity;return t.each(l,function(_){_.getBBox(f);var M=_.box;M&&(M.minX<v&&(v=M.minX),M.maxX>b&&(b=M.maxX),M.minY<g&&(g=M.minY),M.maxY>m&&(m=M.maxY))}),v===Infinity||g===Infinity?{minX:0,minY:0,maxX:0,maxY:0}:{minX:v,minY:g,maxX:b,maxY:m}},_setTcache:function(){var o=0,l=0,f=[],v,b,g,m,_=this._cfg.curve;!_||(t.each(_,function(M,x){g=_[x+1],m=M.length,g&&(o+=n.len(M[m-2],M[m-1],g[1],g[2],g[3],g[4],g[5],g[6]))}),t.each(_,function(M,x){g=_[x+1],m=M.length,g&&(v=[],v[0]=l/o,b=n.len(M[m-2],M[m-1],g[1],g[2],g[3],g[4],g[5],g[6]),l+=b,v[1]=l/o,f.push(v))}),this._cfg.tCache=f)},_calculateCurve:function(){var o=this,l=o._attrs,f=l.path;this._cfg.curve=h.pathTocurve(f)},getStartTangent:function(){var o=this.get("segments"),l,f,v,b;if(o.length>1)if(l=o[0].endPoint,f=o[1].endPoint,v=o[1].startTangent,b=[],t.isFunction(v)){var g=v();b.push([l.x-g[0],l.y-g[1]]),b.push([l.x,l.y])}else b.push([f.x,f.y]),b.push([l.x,l.y]);return b},getEndTangent:function(){var o=this.get("segments"),l=o.length,f,v,b,g;if(l>1)if(f=o[l-2].endPoint,v=o[l-1].endPoint,b=o[l-1].endTangent,g=[],t.isFunction(b)){var m=b();g.push([v.x-m[0],v.y-m[1]]),g.push([v.x,v.y])}else g.push([f.x,f.y]),g.push([v.x,v.y]);return g},getPoint:function(o){var l=this._cfg.tCache,f,v;l||(this._calculateCurve(),this._setTcache(),l=this._cfg.tCache);var b=this._cfg.curve;if(!l)return b?{x:b[0][1],y:b[0][2]}:null;t.each(l,function(M,x){o>=M[0]&&o<=M[1]&&(f=(o-M[0])/(M[1]-M[0]),v=x)});var g=b[v];if(t.isNil(g)||t.isNil(v))return null;var m=g.length,_=b[v+1];return{x:n.at(g[m-2],_[1],_[3],_[5],1-f),y:n.at(g[m-1],_[2],_[4],_[6],1-f)}},createPath:function(o){var l=this,f=l.get("segments");if(!!t.isArray(f)){o=o||l.get("context"),o.beginPath();for(var v=f.length,b=0;b<v;b++)f[b].draw(o)}},afterPath:function(o){var l=this,f=l._attrs,v=l.get("segments"),b=f.path;if(o=o||l.get("context"),!!t.isArray(v)&&v.length!==1&&!(!f.startArrow&&!f.endArrow)&&!(b[b.length-1]==="z"||b[b.length-1]==="Z"||f.fill)){var g=l.getStartTangent();r.addStartArrow(o,f,g[0][0],g[0][1],g[1][0],g[1][1]);var m=l.getEndTangent();r.addEndArrow(o,f,m[0][0],m[0][1],m[1][0],m[1][1])}}}),E.exports=i},function(E,T,e){var t=e(1),u=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={points:null,lineWidth:1},t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"polygon",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this,h=r._attrs,n=h.points,i=this.getHitLineWidth();if(!n||n.length===0)return null;var a=Infinity,o=Infinity,l=-Infinity,f=-Infinity;t.each(n,function(b){var g=b[0],m=b[1];g<a&&(a=g),g>l&&(l=g),m<o&&(o=m),m>f&&(f=m)});var v=i/2;return{minX:a-v,minY:o-v,maxX:l+v,maxY:f+v}},createPath:function(r){var h=this,n=h._attrs,i=n.points;i.length<2||(r=r||h.get("context"),r.beginPath(),t.each(i,function(a,o){o===0?r.moveTo(a[0],a[1]):r.lineTo(a[0],a[1])}),r.closePath())}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=e(49),c=e(48),r=function h(n){h.superclass.constructor.call(this,n)};r.ATTRS={points:null,lineWidth:1,startArrow:!1,endArrow:!1,tCache:null},t.extend(r,u),t.augment(r,{canStroke:!0,type:"polyline",tCache:null,getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var n=this,i=n._attrs,a=this.getHitLineWidth(),o=i.points;if(!o||o.length===0)return null;var l=Infinity,f=Infinity,v=-Infinity,b=-Infinity;t.each(o,function(m){var _=m[0],M=m[1];_<l&&(l=_),_>v&&(v=_),M<f&&(f=M),M>b&&(b=M)});var g=a/2;return{minX:l-g,minY:f-g,maxX:v+g,maxY:b+g}},_setTcache:function(){var n=this,i=n._attrs,a=i.points,o=0,l=0,f=[],v,b;!a||a.length===0||(t.each(a,function(g,m){a[m+1]&&(o+=c.len(g[0],g[1],a[m+1][0],a[m+1][1]))}),!(o<=0)&&(t.each(a,function(g,m){a[m+1]&&(v=[],v[0]=l/o,b=c.len(g[0],g[1],a[m+1][0],a[m+1][1]),l+=b,v[1]=l/o,f.push(v))}),this.tCache=f))},createPath:function(n){var i=this,a=i._attrs,o=a.points,l,f;if(!(o.length<2)){for(n=n||i.get("context"),n.beginPath(),n.moveTo(o[0][0],o[0][1]),f=1,l=o.length-1;f<l;f++)n.lineTo(o[f][0],o[f][1]);n.lineTo(o[l][0],o[l][1])}},getStartTangent:function(){var n=this.__attrs.points,i=[];return i.push([n[1][0],n[1][1]]),i.push([n[0][0],n[0][1]]),i},getEndTangent:function(){var n=this.__attrs.points,i=n.length-1,a=[];return a.push([n[i-1][0],n[i-1][1]]),a.push([n[i][0],n[i][1]]),a},afterPath:function(n){var i=this,a=i._attrs,o=a.points,l=o.length-1;n=n||i.get("context"),a.startArrow&&s.addStartArrow(n,a,o[1][0],o[1][1],o[0][0],o[0][1]),a.endArrow&&s.addEndArrow(n,a,o[l-1][0],o[l-1][1],o[l][0],o[l][1])},getPoint:function(n){var i=this._attrs,a=i.points,o=this.tCache,l,f;return o||(this._setTcache(),o=this.tCache),t.each(o,function(v,b){n>=v[0]&&n<=v[1]&&(l=(n-v[0])/(v[1]-v[0]),f=b)}),{x:c.at(a[f][0],a[f+1][0],l),y:c.at(a[f][1],a[f+1][1],l)}}}),E.exports=r},function(E,T,e){var t=e(1),u=e(37),s=u.parseRadius,c=e(7),r=function h(n){h.superclass.constructor.call(this,n)};r.ATTRS={x:0,y:0,width:0,height:0,radius:0,lineWidth:1},t.extend(r,c),t.augment(r,{canFill:!0,canStroke:!0,type:"rect",getDefaultAttrs:function(){return{lineWidth:1,radius:0}},calculateBox:function(){var n=this,i=n._attrs,a=i.x,o=i.y,l=i.width,f=i.height,v=this.getHitLineWidth(),b=v/2;return{minX:a-b,minY:o-b,maxX:a+l+b,maxY:o+f+b}},createPath:function(n){var i=this,a=i._attrs,o=a.x,l=a.y,f=a.width,v=a.height,b=a.radius;if(n=n||i.get("context"),n.beginPath(),b===0)n.rect(o,l,f,v);else{var g=s(b);n.moveTo(o+g.r1,l),n.lineTo(o+f-g.r2,l),g.r2!==0&&n.arc(o+f-g.r2,l+g.r2,g.r2,-Math.PI/2,0),n.lineTo(o+f,l+v-g.r3),g.r3!==0&&n.arc(o+f-g.r3,l+v-g.r3,g.r3,0,Math.PI/2),n.lineTo(o+g.r4,l+v),g.r4!==0&&n.arc(o+g.r4,l+v-g.r4,g.r4,Math.PI/2,Math.PI),n.lineTo(o,l+g.r1),g.r1!==0&&n.arc(o+g.r1,l+g.r1,g.r1,Math.PI,Math.PI*1.5),n.closePath()}}}),E.exports=r},function(E,T,e){var t=e(1),u=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null},t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"text",getDefaultAttrs:function(){return{lineWidth:1,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"}},initTransform:function(){var r=this._attrs.fontSize;r&&+r<12&&this.transform([["t",-1*this._attrs.x,-1*this._attrs.y],["s",+r/12,+r/12],["t",this._attrs.x,this._attrs.y]])},_assembleFont:function(){var r=this._attrs,h=r.fontSize,n=r.fontFamily,i=r.fontWeight,a=r.fontStyle,o=r.fontVariant;r.font=[a,o,i,h+"px",n].join(" ")},_setAttrText:function(){var r=this._attrs,h=r.text,n=null;if(t.isString(h)&&h.indexOf(`
`)!==-1){n=h.split(`
`);var i=n.length;r.lineCount=i}r.textArr=n},_getTextHeight:function(){var r=this._attrs,h=r.lineCount,n=r.fontSize*1;if(h>1){var i=this._getSpaceingY();return n*h+i*(h-1)}return n},isHitBox:function(){return!1},calculateBox:function(){var r=this,h=r._attrs,n=this._cfg;(!n.attrs||n.hasUpdate)&&(this._assembleFont(),this._setAttrText()),h.textArr||this._setAttrText();var i=h.x,a=h.y,o=r.measureText();if(!o)return{minX:i,minY:a,maxX:i,maxY:a};var l=r._getTextHeight(),f=h.textAlign,v=h.textBaseline,b=r.getHitLineWidth(),g={x:i,y:a-l};f&&(f==="end"||f==="right"?g.x-=o:f==="center"&&(g.x-=o/2)),v&&(v==="top"?g.y+=l:v==="middle"&&(g.y+=l/2)),this.set("startPoint",g);var m=b/2;return{minX:g.x-m,minY:g.y-m,maxX:g.x+o+m,maxY:g.y+l+m}},_getSpaceingY:function(){var r=this._attrs,h=r.lineHeight,n=r.fontSize*1;return h?h-n:n*.14},drawInner:function(r){var h=this,n=h._attrs,i=this._cfg;(!i.attrs||i.hasUpdate)&&(this._assembleFont(),this._setAttrText()),r.font=n.font;var a=n.text;if(!!a){var o=n.textArr,l=n.x,f=n.y;if(r.beginPath(),h.hasStroke()){var v=n.strokeOpacity;!t.isNil(v)&&v!==1&&(r.globalAlpha=v),o?h._drawTextArr(r,!1):r.strokeText(a,l,f),r.globalAlpha=1}if(h.hasFill()){var b=n.fillOpacity;!t.isNil(b)&&b!==1&&(r.globalAlpha=b),o?h._drawTextArr(r,!0):r.fillText(a,l,f)}i.hasUpdate=!1}},_drawTextArr:function(r,h){var n=this._attrs.textArr,i=this._attrs.textBaseline,a=this._attrs.fontSize*1,o=this._getSpaceingY(),l=this._attrs.x,f=this._attrs.y,v=this.getBBox(),b=v.maxY-v.minY,g;t.each(n,function(m,_){g=f+_*(o+a)-b+a,i==="middle"&&(g+=b-a-(b-a)/2),i==="top"&&(g+=b-a),h?r.fillText(m,l,g):r.strokeText(m,l,g)})},measureText:function(){var r=this,h=r._attrs,n=h.text,i=h.font,a=h.textArr,o,l=0;if(!t.isNil(n)){var f=document.createElement("canvas").getContext("2d");return f.save(),f.font=i,a?t.each(a,function(v){o=f.measureText(v).width,l<o&&(l=o),f.restore()}):(l=f.measureText(n).width,f.restore()),l}}}),E.exports=s},function(E,T,e){E.exports={isFunction:e(14),isObject:e(39),isBoolean:e(191),isNil:e(6),isString:e(15),isArray:e(4),isNumber:e(11),isEmpty:e(167),uniqueId:e(194),clone:e(80),deepMix:e(81),assign:e(10),merge:e(81),upperFirst:e(189),each:e(2),isEqual:e(83),toArray:e(57),extend:e(162),augment:e(158),remove:e(156),isNumberEqual:e(55),toRadian:e(172),toDegree:e(170),mod:e(169),clamp:e(84),createDom:e(159),modifyCSS:e(160),requestAnimationFrame:e(161),getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:2},mat3:e(85),vec2:e(174),vec3:e(175),transform:e(173)}},function(E,T,e){var t=e(2),u=8,s=4;function c(h){var n=[];return t(h,function(i){n=n.concat(i)}),n}function r(h,n){var i;for(i=n;i>0&&h%i!=0;i--);if(i===1)for(i=n;i>0&&(h-1)%i!=0;i--);return i}E.exports=function(h){var n={},i=[],a=h.isRounding,o=c(h.data),l=o.length,f=h.maxCount||u,v;if(a?(v=r(l-1,f-1)+1,v===2?v=f:v<f-s&&(v=f-s)):v=f,!a&&l<=v+v/2)i=[].concat(o);else{for(var b=parseInt(l/(v-1),10),g=o.map(function(x,y){return y%b==0?o.slice(y,y+b):null}).filter(function(x){return x}),m=1,_=g.length;m<_&&(a?m*b<l-b:m<v-1);m++)i.push(g[m][0]);if(o.length){i.unshift(o[0]);var M=o[l-1];i.indexOf(M)===-1&&i.push(M)}}return n.categories=o,n.ticks=i,n}},function(E,T){var e=12;function t(r){var h=1;if(r===Infinity||r===-Infinity)throw new Error("Not support Infinity!");if(r<1){for(var n=0;r<1;)h=h/10,r=r*10,n++;h.toString().length>e&&(h=parseFloat(h.toFixed(n)))}else for(;r>10;)h=h*10,r=r/10;return h}function u(r,h){var n=r.length;if(n===0)return NaN;var i=r[0];if(h<r[0])return NaN;if(h>=r[n-1])return r[n-1];for(var a=1;a<r.length&&!(h<r[a]);a++)i=r[a];return i}function s(r,h){var n=r.length;if(n===0)return NaN;var i;if(h>r[n-1])return NaN;if(h<r[0])return r[0];for(var a=1;a<r.length;a++)if(h<=r[a]){i=r[a];break}return i}var c={snapFactorTo:function(h,n,i){if(isNaN(h))return NaN;var a=1;if(h!==0){h<0&&(a=-1),h=h*a;var o=t(h);a=a*o,h=h/o}i==="floor"?h=c.snapFloor(n,h):i==="ceil"?h=c.snapCeiling(n,h):h=c.snapTo(n,h);var l=parseFloat((h*a).toPrecision(e));if(Math.abs(a)<1&&l.toString().length>e){var f=parseInt(1/a),v=a>0?1:-1;l=h/f*v}return l},snapMultiple:function(h,n,i){var a;return i==="ceil"?a=Math.ceil(h/n):i==="floor"?a=Math.floor(h/n):a=Math.round(h/n),a*n},snapTo:function(h,n){var i=u(h,n),a=s(h,n);if(isNaN(i)||isNaN(a)){if(h[0]>=n)return h[0];var o=h[h.length-1];if(o<=n)return o}return Math.abs(n-i)<Math.abs(a-n)?i:a},snapFloor:function(h,n){return u(h,n)},snapCeiling:function(h,n){return s(h,n)},fixedBase:function(h,n){var i=n.toString(),a=i.indexOf("."),o=i.indexOf("e-");if(a<0&&o<0)return Math.round(h);var l=o>=0?parseInt(i.substr(o+2),10):i.substr(a+1).length;return l>20&&(l=20),parseFloat(h.toFixed(l))}};E.exports=c},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(26),s=e(151),c=e(2),r=e(11),h=e(15),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){i.prototype._initDefaultCfg.call(this),this.type="cat",this.isCategory=!0,this.isRounding=!0},o.init=function(){var f=this,v=f.values,b=f.tickCount;if(c(v,function(_,M){v[M]=_.toString()}),!f.ticks){var g=v;if(b){var m=s({maxCount:b,data:v,isRounding:f.isRounding});g=m.ticks}this.ticks=g}},o.getText=function(f){return this.values.indexOf(f)===-1&&r(f)&&(f=this.values[Math.round(f)]),i.prototype.getText.call(this,f)},o.translate=function(f){var v=this.values.indexOf(f);return v===-1&&r(f)?v=f:v===-1&&(v=NaN),v},o.scale=function(f){var v=this.rangeMin(),b=this.rangeMax(),g;return(h(f)||this.values.indexOf(f)!==-1)&&(f=this.translate(f)),this.values.length>1?g=f/(this.values.length-1):g=f,v+g*(b-v)},o.invert=function(f){if(h(f))return f;var v=this.rangeMin(),b=this.rangeMax();f<v&&(f=v),f>b&&(f=b);var g=(f-v)/(b-v),m=Math.round(g*(this.values.length-1))%this.values.length;return m=m||0,this.values[m]},a}(u);u.Cat=n,E.exports=n},function(E,T,e){var t=e(187),u=e(26);u.Linear=e(51),u.Identity=e(353),u.Cat=e(153),u.Time=e(357),u.TimeCat=e(356),u.Log=e(354),u.Pow=e(355);var s=function(n){if(u.hasOwnProperty(n)){var i=t(n);u[i]=function(a){return new u[n](a)}}};for(var c in u)s(c);var r=["cat","timeCat"];u.isCategory=function(h){return r.indexOf(h)>=0},E.exports=u},function(E,T,e){var t=e(21),u=Array.prototype.splice,s=function(r,h){if(!t(r))return[];for(var n=r?h.length:0,i=n-1;n--;){var a=void 0,o=h[n];(n===i||o!==a)&&(a=o,u.call(r,o,1))}return r};E.exports=s},function(E,T){var e=Array.prototype,t=e.splice,u=e.indexOf,s=e.slice,c=function(h){for(var n=s.call(arguments,1),i=0;i<n.length;i++)for(var a=n[i],o=-1;(o=u.call(h,a))>-1;)t.call(h,o,1);return h};E.exports=c},function(E,T,e){var t=e(2),u=e(53),s=function(r){var h=[];return t(r,function(n){u(h,n)||h.push(n)}),h};E.exports=s},function(E,T,e){var t=e(14),u=e(57),s=e(10),c=function(h){for(var n=u(arguments),i=1;i<n.length;i++){var a=n[i];t(a)&&(a=a.prototype),s(h.prototype,a)}};E.exports=c},function(E,T){var e=document.createElement("table"),t=document.createElement("tr"),u=/^\s*<(\w+|!)[^>]*>/,s={tr:document.createElement("tbody"),tbody:e,thead:e,tfoot:e,td:t,th:t,"*":document.createElement("div")};E.exports=function(r){var h=u.test(r)&&RegExp.$1;h in s||(h="*");var n=s[h];r=r.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+r;var i=n.childNodes[0];return n.removeChild(i),i}},function(E,T){E.exports=function(t,u){if(t)for(var s in u)u.hasOwnProperty(s)&&(t.style[s]=u[s]);return t}},function(E,T){E.exports=function(t){var u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(s){return setTimeout(s,16)};return u(t)}},function(E,T,e){var t=e(14),u=e(10),s=function(r,h,n,i){t(h)||(n=h,h=r,r=function(){});var a=Object.create?function(l,f){return Object.create(l,{constructor:{value:f}})}:function(l,f){function v(){}v.prototype=l;var b=new v;return b.constructor=f,b},o=a(h.prototype,r);return r.prototype=u(o,r.prototype),r.superclass=a(h.prototype,h),u(o,n),u(r,i),r};E.exports=s},function(E,T,e){var t=e(2),u=e(4),s=Object.prototype.hasOwnProperty,c=function(h,n){if(!n||!u(h))return h;var i={},a=null;return t(h,function(o){a=n(o),s.call(i,a)?i[a].push(o):i[a]=[o]}),i};E.exports=c},function(E,T,e){var t=e(14),u=e(4),s=e(163),c=function(h,n){if(!n)return{0:h};if(!t(n)){var i=u(n)?n:n.replace(/\s+/g,"").split("*");n=function(l){for(var f="_",v=0,b=i.length;v<b;v++)f+=l[i[v]]&&l[i[v]].toString();return f}}var a=s(h,n);return a};E.exports=c},function(E,T,e){var t=e(164),u=function(c,r){if(!r)return[c];var h=t(c,r),n=[];for(var i in h)n.push(h[i]);return n};E.exports=u},function(E,T,e){var t=e(2),u=e(10),s=e(378),c=e(364),r=e(380),h=e(382),n=e(390),i=e(56),a=e(401),o=e(405),l=e(409),f=e(414),v={DOMUtil:s,DomUtil:s,MatrixUtil:i,PathUtil:o,arrayUtil:c,domUtil:s,eventUtil:r,formatUtil:h,mathUtil:n,matrixUtil:i,objectUtil:a,stringUtil:l,pathUtil:o,typeUtil:f,augment:e(158),clone:e(80),debounce:e(369),deepMix:e(81),each:t,extend:e(162),filter:e(82),group:e(165),groupBy:e(163),groupToMap:e(164),indexOf:e(386),isEmpty:e(167),isEqual:e(83),isEqualWith:e(387),map:e(388),mix:u,pick:e(408),throttle:e(413),toArray:e(57),toString:e(38),uniqueId:e(194)};t([s,c,r,h,n,i,a,o,l,f],function(b){u(v,b)}),E.exports=v},function(E,T,e){var t=e(6),u=e(21),s=e(190),c=e(193),r=Object.prototype.hasOwnProperty;function h(n){if(t(n))return!0;if(u(n))return!n.length;var i=s(n);if(i==="Map"||i==="Set")return!n.size;if(c(n))return!Object.keys(n).length;for(var a in n)if(r.call(n,a))return!1;return!0}E.exports=h},function(E,T,e){var t=e(4),u=e(14),s=e(2),c=function(h,n){if(!!t(h)){var i=h[0],a=void 0;u(n)?a=n(h[0]):a=h[0][n];var o=void 0;return s(h,function(l){u(n)?o=n(l):o=l[n],o>a&&(i=l,a=o)}),i}};E.exports=c},function(E,T){var e=function(u,s){return(u%s+s)%s};E.exports=e},function(E,T){var e=180/Math.PI,t=function(s){return e*s};E.exports=t},function(E,T){E.exports=parseInt},function(E,T){var e=Math.PI/180,t=function(s){return e*s};E.exports=t},function(E,T,e){var t=e(80),u=e(2),s=e(85);E.exports=function(r,h){return r=t(r),u(h,function(n){switch(n[0]){case"t":s.translate(r,r,[n[1],n[2]]);break;case"s":s.scale(r,r,[n[1],n[2]]);break;case"r":s.rotate(r,r,n[1]);break;case"m":s.multiply(r,r,n[1]);break;default:return!1}}),r}},function(E,T,e){var t=e(349),u=e(84);t.angle=function(s,c){var r=t.dot(s,c)/(t.length(s)*t.length(c));return Math.acos(u(r,-1,1))},t.direction=function(s,c){return s[0]*c[1]-c[0]*s[1]},t.angleTo=function(s,c,r){var h=t.angle(s,c),n=t.direction(s,c)>=0;return r?n?Math.PI*2-h:h:n?h:Math.PI*2-h},t.vertical=function(s,c,r){return r?(s[0]=c[1],s[1]=-1*c[0]):(s[0]=-1*c[1],s[1]=c[0]),s},E.exports=t},function(E,T,e){var t=e(350);E.exports=t},function(E,T){E.exports=function(e,t){return e.hasOwnProperty(t)}},function(E,T,e){var t=e(178),u=e(6);function s(c,r){var h=t(r),n=h.length;if(u(c))return!n;for(var i=0;i<n;i+=1){var a=h[i];if(r[a]!==c[a]||!(a in c))return!1}return!0}E.exports=s},function(E,T,e){var t=e(2),u=e(14),s=Object.keys?function(c){return Object.keys(c)}:function(c){var r=[];return t(c,function(h,n){u(c)&&n==="prototype"||r.push(n)}),r};E.exports=s},function(E,T,e){var t=e(2),u=e(14),s=Object.values?function(c){return Object.values(c)}:function(c){var r=[];return t(c,function(h,n){u(c)&&n==="prototype"||r.push(h)}),r};E.exports=s},function(E,T){E.exports=function(t,u){for(var s=[],c=0,r=t.length;r-2*!u>c;c+=2){var h=[{x:+t[c-2],y:+t[c-1]},{x:+t[c],y:+t[c+1]},{x:+t[c+2],y:+t[c+3]},{x:+t[c+4],y:+t[c+5]}];u?c?r-4===c?h[3]={x:+t[0],y:+t[1]}:r-2===c&&(h[2]={x:+t[0],y:+t[1]},h[3]={x:+t[2],y:+t[3]}):h[0]={x:+t[r-2],y:+t[r-1]}:r-4===c?h[3]=h[2]:c||(h[0]={x:+t[c],y:+t[c+1]}),s.push(["C",(-h[0].x+6*h[1].x+h[2].x)/6,(-h[0].y+6*h[1].y+h[2].y)/6,(h[1].x+6*h[2].x-h[3].x)/6,(h[1].y+6*h[2].y-h[3].y)/6,h[2].x,h[2].y])}return s}},function(E,T){var e=/,?([a-z]),?/gi;E.exports=function(u){return u.join(",").replace(e,"$1")}},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},t=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,u=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),s=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig");E.exports=function(r){if(!r)return null;if((typeof r=="undefined"?"undefined":e(r))===e([]))return r;var h={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(r).replace(u,function(i,a,o){var l=[],f=a.toLowerCase();if(o.replace(s,function(v,b){b&&l.push(+b)}),f==="m"&&l.length>2&&(n.push([a].concat(l.splice(0,2))),f="l",a=a==="m"?"l":"L"),f==="o"&&l.length===1&&n.push([a,l[0]]),f==="r")n.push([a].concat(l));else for(;l.length>=h[f]&&(n.push([a].concat(l.splice(0,h[f]))),!!h[f]););}),n}},function(E,T,e){var t=e(182),u=e(180);function s(c,r,h,n,i){var a=[];if(i===null&&n===null&&(n=h),c=+c,r=+r,h=+h,n=+n,i!==null){var o=Math.PI/180,l=c+h*Math.cos(-n*o),f=c+h*Math.cos(-i*o),v=r+h*Math.sin(-n*o),b=r+h*Math.sin(-i*o);a=[["M",l,v],["A",h,h,0,+(i-n>180),0,f,b]]}else a=[["M",c,r],["m",0,-n],["a",h,n,0,1,1,0,2*n],["a",h,n,0,1,1,0,-2*n],["z"]];return a}E.exports=function(r){if(r=t(r),!r||!r.length)return[["M",0,0]];var h=[],n=0,i=0,a=0,o=0,l=0,f=void 0,v=void 0;r[0][0]==="M"&&(n=+r[0][1],i=+r[0][2],a=n,o=i,l++,h[0]=["M",n,i]);for(var b=r.length===3&&r[0][0]==="M"&&r[1][0].toUpperCase()==="R"&&r[2][0].toUpperCase()==="Z",g,m,_=l,M=r.length;_<M;_++){if(h.push(g=[]),m=r[_],f=m[0],f!==f.toUpperCase())switch(g[0]=f.toUpperCase(),g[0]){case"A":g[1]=m[1],g[2]=m[2],g[3]=m[3],g[4]=m[4],g[5]=m[5],g[6]=+m[6]+n,g[7]=+m[7]+i;break;case"V":g[1]=+m[1]+i;break;case"H":g[1]=+m[1]+n;break;case"R":v=[n,i].concat(m.slice(1));for(var x=2,y=v.length;x<y;x++)v[x]=+v[x]+n,v[++x]=+v[x]+i;h.pop(),h=h.concat(u(v,b));break;case"O":h.pop(),v=s(n,i,m[1],m[2]),v.push(v[0]),h=h.concat(v);break;case"U":h.pop(),h=h.concat(s(n,i,m[1],m[2],m[3])),g=["U"].concat(h[h.length-1].slice(-2));break;case"M":a=+m[1]+n,o=+m[2]+i;break;default:for(var S=1,P=m.length;S<P;S++)g[S]=+m[S]+(S%2?n:i)}else if(f==="R")v=[n,i].concat(m.slice(1)),h.pop(),h=h.concat(u(v,b)),g=["R"].concat(m.slice(-2));else if(f==="O")h.pop(),v=s(n,i,m[1],m[2]),v.push(v[0]),h=h.concat(v);else if(f==="U")h.pop(),h=h.concat(s(n,i,m[1],m[2],m[3])),g=["U"].concat(h[h.length-1].slice(-2));else for(var A=0,O=m.length;A<O;A++)g[A]=m[A];if(f=f.toUpperCase(),f!=="O")switch(g[0]){case"Z":n=+a,i=+o;break;case"H":n=g[1];break;case"V":i=g[1];break;case"M":a=g[g.length-2],o=g[g.length-1];break;default:n=g[g.length-2],i=g[g.length-1]}}return h}},function(E,T,e){var t=e(183),u=function r(h,n,i,a,o,l,f,v,b,g){i===a&&(i+=1);var m=Math.PI*120/180,_=Math.PI/180*(+o||0),M=[],x=void 0,y=void 0,S=void 0,P=void 0,A=void 0,O=function(xt,k,ot){var it=xt*Math.cos(ot)-k*Math.sin(ot),$=xt*Math.sin(ot)+k*Math.cos(ot);return{x:it,y:$}};if(g)y=g[0],S=g[1],P=g[2],A=g[3];else{x=O(h,n,-_),h=x.x,n=x.y,x=O(v,b,-_),v=x.x,b=x.y,h===v&&n===b&&(v+=1,b+=1);var L=(h-v)/2,H=(n-b)/2,F=L*L/(i*i)+H*H/(a*a);F>1&&(F=Math.sqrt(F),i=F*i,a=F*a);var K=i*i,G=a*a,U=(l===f?-1:1)*Math.sqrt(Math.abs((K*G-K*H*H-G*L*L)/(K*H*H+G*L*L)));P=U*i*H/a+(h+v)/2,A=U*-a*L/i+(n+b)/2,y=Math.asin(((n-A)/a).toFixed(9)),S=Math.asin(((b-A)/a).toFixed(9)),y=h<P?Math.PI-y:y,S=v<P?Math.PI-S:S,y<0&&(y=Math.PI*2+y),S<0&&(S=Math.PI*2+S),f&&y>S&&(y=y-Math.PI*2),!f&&S>y&&(S=S-Math.PI*2)}var Z=S-y;if(Math.abs(Z)>m){var J=S,rt=v,vt=b;S=y+m*(f&&S>y?1:-1),v=P+i*Math.cos(S),b=A+a*Math.sin(S),M=r(v,b,i,a,o,0,f,rt,vt,[S,J,P,A])}Z=S-y;var mt=Math.cos(y),ut=Math.sin(y),Rt=Math.cos(S),Ft=Math.sin(S),wt=Math.tan(Z/4),Mt=4/3*i*wt,St=4/3*a*wt,At=[h,n],nt=[h+Mt*ut,n-St*mt],Pt=[v+Mt*Ft,b-St*Rt],z=[v,b];if(nt[0]=2*At[0]-nt[0],nt[1]=2*At[1]-nt[1],g)return[nt,Pt,z].concat(M);M=[nt,Pt,z].concat(M).join().split(",");for(var q=[],gt=0,et=M.length;gt<et;gt++)q[gt]=gt%2?O(M[gt-1],M[gt],_).y:O(M[gt],M[gt+1],_).x;return q},s=function(h,n,i,a){return[h,n,i,a,i,a]},c=function(h,n,i,a,o,l){var f=1/3,v=2/3;return[f*h+v*i,f*n+v*a,f*o+v*i,f*l+v*a,o,l]};E.exports=function(h,n){var i=t(h),a=n&&t(n),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f=[],v=[],b="",g="",m=void 0,_=function(H,F,K){var G=void 0,U=void 0;if(!H)return["C",F.x,F.y,F.x,F.y,F.x,F.y];switch(!(H[0]in{T:1,Q:1})&&(F.qx=F.qy=null),H[0]){case"M":F.X=H[1],F.Y=H[2];break;case"A":H=["C"].concat(u.apply(0,[F.x,F.y].concat(H.slice(1))));break;case"S":K==="C"||K==="S"?(G=F.x*2-F.bx,U=F.y*2-F.by):(G=F.x,U=F.y),H=["C",G,U].concat(H.slice(1));break;case"T":K==="Q"||K==="T"?(F.qx=F.x*2-F.qx,F.qy=F.y*2-F.qy):(F.qx=F.x,F.qy=F.y),H=["C"].concat(c(F.x,F.y,F.qx,F.qy,H[1],H[2]));break;case"Q":F.qx=H[1],F.qy=H[2],H=["C"].concat(c(F.x,F.y,H[1],H[2],H[3],H[4]));break;case"L":H=["C"].concat(s(F.x,F.y,H[1],H[2]));break;case"H":H=["C"].concat(s(F.x,F.y,H[1],F.y));break;case"V":H=["C"].concat(s(F.x,F.y,F.x,H[1]));break;case"Z":H=["C"].concat(s(F.x,F.y,F.X,F.Y));break;default:break}return H},M=function(H,F){if(H[F].length>7){H[F].shift();for(var K=H[F];K.length;)f[F]="A",a&&(v[F]="A"),H.splice(F++,0,["C"].concat(K.splice(0,6)));H.splice(F,1),m=Math.max(i.length,a&&a.length||0)}},x=function(H,F,K,G,U){H&&F&&H[U][0]==="M"&&F[U][0]!=="M"&&(F.splice(U,0,["M",G.x,G.y]),K.bx=0,K.by=0,K.x=H[U][1],K.y=H[U][2],m=Math.max(i.length,a&&a.length||0))};m=Math.max(i.length,a&&a.length||0);for(var y=0;y<m;y++){i[y]&&(b=i[y][0]),b!=="C"&&(f[y]=b,y&&(g=f[y-1])),i[y]=_(i[y],o,g),f[y]!=="A"&&b==="C"&&(f[y]="C"),M(i,y),a&&(a[y]&&(b=a[y][0]),b!=="C"&&(v[y]=b,y&&(g=v[y-1])),a[y]=_(a[y],l,g),v[y]!=="A"&&b==="C"&&(v[y]="C"),M(a,y)),x(i,a,o,l,y),x(a,i,l,o,y);var S=i[y],P=a&&a[y],A=S.length,O=a&&P.length;o.x=S[A-2],o.y=S[A-1],o.bx=parseFloat(S[A-4])||o.x,o.by=parseFloat(S[A-3])||o.y,l.bx=a&&(parseFloat(P[O-4])||l.x),l.by=a&&(parseFloat(P[O-3])||l.y),l.x=a&&P[O-2],l.y=a&&P[O-1]}return a?[i,a]:i}},function(E,T,e){var t=e(181);E.exports=function(s,c,r,h,n){if(n)return[["M",+s+ +n,c],["l",r-n*2,0],["a",n,n,0,0,1,n,n],["l",0,h-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-r,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-h],["a",n,n,0,0,1,n,-n],["z"]];var i=[["M",s,c],["l",r,0],["l",0,h],["l",-r,0],["z"]];return i.parsePathArray=t,i}},function(E,T,e){var t=e(38),u=function(c){return t(c).toLowerCase()};E.exports=u},function(E,T,e){var t=e(38),u=function(c){var r=t(c);return r.charAt(0).toLowerCase()+r.substring(1)};E.exports=u},function(E,T,e){var t=e(38),u=function(c){return t(c).toUpperCase()};E.exports=u},function(E,T,e){var t=e(38),u=function(c){var r=t(c);return r.charAt(0).toUpperCase()+r.substring(1)};E.exports=u},function(E,T){var e={}.toString,t=function(s){return e.call(s).replace(/^\[object /,"").replace(/\]$/,"")};E.exports=t},function(E,T,e){var t=e(17),u=function(c){return t(c,"Boolean")};E.exports=u},function(E,T,e){var t=e(17),u=function(c){return t(c,"Date")};E.exports=u},function(E,T){var e=Object.prototype,t=function(s){var c=s&&s.constructor,r=typeof c=="function"&&c.prototype||e;return s===r};E.exports=t},function(E,T){var e=function(){var t={};return function(u){return u=u||"g",t[u]?t[u]+=1:t[u]=1,u+t[u]}}();E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={COORD_FUNC_PROPS:["rotate","scale","reflect","transpose"],GEOM_FUNC_PROPS:["position","color","size","shape","opacity","tooltip","style","animate","active","select","sets"]}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(29),u=r(t),s=e(58),c=r(s);function r(H){return H&&H.__esModule?H:{default:H}}for(var h=[{prop:"onPlotMove",event:"plotmove"},{prop:"onPlotEnter",event:"plotenter"},{prop:"onPlotLeave",event:"plotleave"},{prop:"onPlotClick",event:"plotclick"},{prop:"onPlotDblClick",event:"plotdblclick"},{prop:"onItemSelected",event:"itemselected"},{prop:"onItemUnselected",event:"itemunselected"},{prop:"onItemSelectedChange",event:"itemselectedchange"},{prop:"onTooltipChange",event:"tooltip:change"},{prop:"onTooltipShow",event:"tooltip:show"},{prop:"onTooltipHide",event:"tooltip:hide"}],n=["mouseenter","mousemove","mouseleave","click","dblclick","mousedown","mouseup","touchstart","touchmove","touchend"],i=["Mouseenter","Mousemove","Mouseleave","Click","Dblclick","Mousedown","Mouseup","Touchstart","Touchmove","Touchend"],a=["point","area","line","path","interval","schema","polygon","edge","axis-title","axis-label","axis-ticks","axis-line","axis-grid","legend-title","legend-item","legend-marker","legend-text","guide-text","guide-region","guide-line","guide-image","label"],o=["onPoint","onArea","onLine","onPath","onInterval","onSchema","onPolygon","onEdge","onAxisTitle","onAxisLabel","onAxisTicks","onAxisLine","onAxisGrid","onLegendTitle","onLegendItem","onLegendMarker","onLegendText","onGuideText","onGuideRegion","onGuideLine","onGuideImage","onLabel"],l=[],f=0;f<a.length;f+=1)for(var v=0;v<n.length;v+=1)l.push({prop:""+o[f]+i[v],event:a[f]+":"+n[v]});var b=h.concat(l);function g(){return[{prop:"onMouseEnter",event:"mouseenter"},{prop:"onMouseMove",event:"mousemove"},{prop:"onMouseLeave",event:"mouseleave"},{prop:"onClick",event:"click"},{prop:"onDblClick",event:"dblclick"},{prop:"onMouseDown",event:"mousedown"},{prop:"onMouseUp",event:"mouseup"},{prop:"onTouchStart",event:"touchstart"},{prop:"onTouchMove",event:"touchmove"},{prop:"onTouchEnd",event:"touchend"}]}function m(H){var F=g();return c.default.map(F,function(K){var G=K.event;return K.event=H+":"+G,K}),F}var _=g(),M={onMouseEnter:u.default.object,onMouseMove:u.default.object,onMouseLeave:u.default.object,onClick:u.default.oneOfType([u.default.object,u.default.func]),onDblClick:u.default.object,onMouseDown:u.default.object,onMouseUp:u.default.object,onTouchStart:u.default.object,onTouchMove:u.default.object,onTouchEnd:u.default.object},x={onMouseEnter:u.default.func,onMouseMove:u.default.func,onMouseLeave:u.default.func,onClick:u.default.func,onDblClick:u.default.func,onMouseDown:u.default.func,onMouseUp:u.default.func,onTouchStart:u.default.func,onTouchMove:u.default.func,onTouchEnd:u.default.func};function y(H){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=arguments[2];c.default.each(F,function(G){var U=G.prop,Z=G.event,J=K[U];if(c.default.isFunction(J))H.on(Z,J);else if(c.default.isObject(J))for(var rt in J)J[rt]!==void 0&&H.on(rt+":"+Z,J[rt])})}function S(H,F){y(H,_,F)}function P(H){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=arguments[2],G=arguments[3];c.default.each(F,function(U){var Z=U.prop,J=U.event,rt=K[Z],vt=G[Z],mt=void 0;if(!c.default.shallowEqual(rt,vt)){if(c.default.isFunction(rt)&&c.default.isFunction(vt))H.off(J,rt),H.on(J,vt);else if(c.default.isObject(rt)&&c.default.isObject(vt)){for(mt in rt)Object.prototype.hasOwnProperty.call(rt,mt)&&H.off(mt+":"+J,rt[mt]);for(mt in vt)Object.prototype.hasOwnProperty.call(vt,mt)&&H.on(mt+":"+J,vt[mt])}}})}function A(H,F,K){P(H,_,F,K)}function O(H){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=arguments[2];c.default.each(F,function(G){var U=G.prop,Z=G.event,J=K[U];if(c.default.isFunction(J))H.off(Z,J);else if(c.default.isObject(J))for(var rt in J)Object.prototype.hasOwnProperty.call(J,rt)&&H.off(rt+":"+Z,J[rt])})}function L(H,F){O(H,_,F)}T.default={baseEventObjectTypes:M,baseEventFuncTypes:x,genBaseEvents:g,genItemBaseEvents:m,bindEvents:y,bindBaseEvents:S,updateEvents:P,updateBaseEvents:A,unbindEvents:O,unbindBaseEvents:L,chartEvents:b}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(_[y]=x[y])}return _},u=e(45),s=f(u),c=e(88),r=e(195),h=l(r),n=e(196),i=l(n),a=e(87),o=l(a);function l(_){return _&&_.__esModule?_:{default:_}}function f(_){if(_&&_.__esModule)return _;var M={};if(_!=null)for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(M[x]=_[x]);return M.default=_,M}function v(_){if(Array.isArray(_)){for(var M=0,x=Array(_.length);M<_.length;M++)x[M]=_[M];return x}else return Array.from(_)}function b(_,M){var x={};for(var y in _)M.indexOf(y)>=0||!Object.prototype.hasOwnProperty.call(_,y)||(x[y]=_[y]);return x}var g=h.default.COORD_FUNC_PROPS,m=h.default.GEOM_FUNC_PROPS;T.default={createChart:function(M){var x=M.chart,y=x.props.forceFit;x.props.forceFit=!1;var S=new s.Chart(x.props);return x.props.afterChartInitialized&&x.props.afterChartInitialized(S),y&&S.forceFit(),x.g2Instance=S,S},executeChartConfig:function(M,x){var y=x.chart,S=y.props;M.coord("rect",{}),M.source(S.data,S.scale),(!x.facet&&!S.axis||!x.facet||S.axis===!1)&&M.axis(!1),M.legend(!1),M.tooltip(!1),S.filter&&S.filter.forEach(function(P){M.filter(P[0],P[1])}),i.default.bindEvents(M,i.default.chartEvents,S),i.default.bindBaseEvents(M,S)},coord:function(M,x){var y=x.coord;if(!(!y||y.g2Instance)){var S=y.props,P=S.type,A=b(S,["type"]),O=M.coord(P||"rect",c.Util.without(A,g));c.Prop.init(g,A,function(L,H){H==="reflect"?c.Util.each(L,function(F){return O[H](F)}):H==="transpose"?L[0]===!0&&O[H].apply(O,v(L)):O[H].apply(O,v(L))}),y.g2Instance=O}},createLabel:function(M,x){if(!(!x||x.g2Instance)){var y=x.props,S=y.content,P=b(y,["content"]);S&&(c.Util.isArray(S)?x.g2Instance=M.label(S[0],S[1],P):x.g2Instance=M.label(S,P))}},createGeom:function(M,x){if(x.g2Instance){x.label&&this.createLabel(x.g2Instance,x.label);return}var y=x.props,S=M[y.type||"interval"]();y.adjust&&S.adjust(y.adjust),c.Prop.init(m,y,function(P,A){S[A].apply(S,v(P))}),x.g2Instance=S,this.createLabel(S,x.label)},geoms:function(M,x){var y=x.geoms;if(!!y)for(var S in y)Object.prototype.hasOwnProperty.call(y,S)&&this.createGeom(M,y[S])},legends:function(M,x){var y=x.legends;for(var S in y)if(y[S]){var P=y[S];if(P.g2Instance)return;var A=P.props,O=A.name,L=A.visible,H=b(A,["name","visible"]),F=L;Object.prototype.hasOwnProperty.call(P.props,"visible")||(F=!0);var K=F&&H;P.g2Instance=M.legend.apply(M,v(O?[O,K]:[K]))}},tooltip:function(M,x){var y=x.tooltip;!y||y.g2Instance||(y.g2Instance=M.tooltip(t({},y.props)))},createAxis:function(M,x){if(!x.g2Instance){var y=x.props,S=y.name,P=y.visible,A=b(y,["name","visible"]);P||!Object.prototype.hasOwnProperty.call(x.props,"visible")?x.g2Instance=M.axis(S,A):x.g2Instance=M.axis(S,!1)}},axises:function(M,x){var y=x.axises;for(var S in y)y[S]&&this.createAxis(M,y[S])},views:function(M,x){var y=x.views;for(var S in y)y[S]&&this.createView(M,y[S])},createView:function(M,x){if(x.parentInfo.name!=="Facet"){if(x.g2Instance){x.filter&&x.filter.forEach(function(G){x.g2Instance.filter(G[0],G[1])}),this.coord(x.g2Instance,x),this.axises(x.g2Instance,x),this.geoms(x.g2Instance,x),this.guide(x.g2Instance,x.guide);return}var y=x.props,S=y.scale,P=y.data,A=y.instance,O=y.axis,L=y.filter,H=y.geoms,F=b(y,["scale","data","instance","axis","filter","geoms"]),K=void 0;A?K=A:K=M.view(t({},F)),P&&K.source(P,S),S&&K.scale(S),L&&L.forEach(function(G){K.filter(G[0],G[1])}),O===!0||A||K.axis(!1),x.g2Instance=K,this.coord(K,x),this.axises(K,x),this.geoms(K,x),this.guide(K,x.guide)}},facetView:function(M,x){var y=x.props,S=y.scale,P=y.data,A=y.axis,O=y.geoms,L=b(y,["scale","data","axis","geoms"]);P&&M.source(P,S),S&&M.scale(S),A===!1&&M.axis(!1),this.coord(M,x),this.axises(M,x),this.geoms(M,x),this.guide(M,x.guide),o.default.mergeView(x,!0)},guide:function(M,x){if(!!x){var y=x.elements;for(var S in y)if(y[S]){var P=y[S];if(!P.g2Instance){var A=P.props,O=A.type,L=b(A,["type"]);P.g2Instance=M.guide()[P.type](L)}}}},facet:function(M,x){var y=this,S=x.facet;if(!(!S||S.g2Instance)){var P=S.props,A=P.children,O=P.type,L=b(P,["children","type"]);if(!A){M.facet(O,L);return}var H=x.views,F=null;for(var K in H)if(H[K]&&H[K].parentInfo.name==="Facet"&&H[K].parentInfo.id===S.id){F=H[K];break}F&&(o.default.mergeView(F,!0),L.eachView=function(G){y.facetView(G,F)},M.facet(O,L))}},synchronizeG2Add:function(M,x){this.coord(M,x),this.axises(M,x),this.legends(M,x),this.tooltip(M,x),this.geoms(M,x),this.facet(M,x),this.views(M,x),this.guide(M,x.guide)},synchronizeG2Views:function(M,x){var y=x.views;for(var S in y)y[S]&&this.synchronizeG2View(y[S].g2Instance,y[S])},synchronizeG2View:function(M,x){M.clear(),this.clearViewG2Instance(x);var y=x.props,S=y.scale,P=y.data,A=y.instance,O=y.axis,L=y.geoms,H=b(y,["scale","data","instance","axis","geoms"]);P&&M.source(P,S),S&&M.scale(S),O===!0||A||M.axis(!1),this.coord(M,x),this.axises(M,x),this.geoms(M,x),this.guide(M,x.guide)},clearViewG2Instance:function(M){M.coord&&delete M.coord.g2Instance,M.axises&&Object.keys(M.axises).forEach(function(x){delete M.axises[x].g2Instance}),M.geoms&&Object.keys(M.geoms).forEach(function(x){delete M.geoms[x].g2Instance,M.geoms[x].label&&delete M.geoms[x].label.g2Instance}),M.guide&&M.guide.elements&&Object.keys(M.guide.elements).forEach(function(x){delete M.guide.elements[x].g2Instance})}}},function(E,T,e){"use strict";e.d(T,"b",function(){return t}),e.d(T,"a",function(){return u});var t=Math.PI/180,u=180/Math.PI},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(449);e.d(T,"easeLinear",function(){return t.a});var u=e(451);e.d(T,"easeQuad",function(){return u.a}),e.d(T,"easeQuadIn",function(){return u.b}),e.d(T,"easeQuadOut",function(){return u.c}),e.d(T,"easeQuadInOut",function(){return u.a});var s=e(446);e.d(T,"easeCubic",function(){return s.a}),e.d(T,"easeCubicIn",function(){return s.b}),e.d(T,"easeCubicOut",function(){return s.c}),e.d(T,"easeCubicInOut",function(){return s.a});var c=e(450);e.d(T,"easePoly",function(){return c.a}),e.d(T,"easePolyIn",function(){return c.b}),e.d(T,"easePolyOut",function(){return c.c}),e.d(T,"easePolyInOut",function(){return c.a});var r=e(452);e.d(T,"easeSin",function(){return r.a}),e.d(T,"easeSinIn",function(){return r.b}),e.d(T,"easeSinOut",function(){return r.c}),e.d(T,"easeSinInOut",function(){return r.a});var h=e(448);e.d(T,"easeExp",function(){return h.a}),e.d(T,"easeExpIn",function(){return h.b}),e.d(T,"easeExpOut",function(){return h.c}),e.d(T,"easeExpInOut",function(){return h.a});var n=e(445);e.d(T,"easeCircle",function(){return n.a}),e.d(T,"easeCircleIn",function(){return n.b}),e.d(T,"easeCircleOut",function(){return n.c}),e.d(T,"easeCircleInOut",function(){return n.a});var i=e(444);e.d(T,"easeBounce",function(){return i.a}),e.d(T,"easeBounceIn",function(){return i.b}),e.d(T,"easeBounceOut",function(){return i.a}),e.d(T,"easeBounceInOut",function(){return i.c});var a=e(443);e.d(T,"easeBack",function(){return a.a}),e.d(T,"easeBackIn",function(){return a.b}),e.d(T,"easeBackOut",function(){return a.c}),e.d(T,"easeBackInOut",function(){return a.a});var o=e(447);e.d(T,"easeElastic",function(){return o.a}),e.d(T,"easeElasticIn",function(){return o.b}),e.d(T,"easeElasticOut",function(){return o.a}),e.d(T,"easeElasticInOut",function(){return o.c})},function(E,T,e){"use strict";var t=e(92);T.a=function(u,s){var c=s?s.length:0,r=u?Math.min(c,u.length):0,h=new Array(r),n=new Array(c),i;for(i=0;i<r;++i)h[i]=e.i(t.a)(u[i],s[i]);for(;i<c;++i)n[i]=s[i];return function(a){for(i=0;i<r;++i)n[i]=h[i](a);return n}}},function(E,T,e){"use strict";var t=e(91);T.a=function(u){var s=u.length;return function(c){var r=Math.floor(((c%=1)<0?++c:c)*s),h=u[(r+s-1)%s],n=u[r%s],i=u[(r+1)%s],a=u[(r+2)%s];return e.i(t.b)((c-r/s)*s,h,n,i,a)}}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";T.a=function(t,u){var s=new Date;return t=+t,u-=t,function(c){return s.setTime(t+u*c),s}}},function(E,T,e){"use strict";var t=e(92);T.a=function(u,s){var c={},r={},h;(u===null||typeof u!="object")&&(u={}),(s===null||typeof s!="object")&&(s={});for(h in s)h in u?c[h]=e.i(t.a)(u[h],s[h]):r[h]=s[h];return function(n){for(h in c)r[h]=c[h](n);return r}}},function(E,T,e){"use strict";e.d(T,"b",function(){return h}),e.d(T,"c",function(){return n});var t=e(12),u=e(91),s=e(201),c=e(41);T.a=function i(a){var o=e.i(c.c)(a);function l(f,v){var b=o((f=e.i(t.e)(f)).r,(v=e.i(t.e)(v)).r),g=o(f.g,v.g),m=o(f.b,v.b),_=e.i(c.a)(f.opacity,v.opacity);return function(M){return f.r=b(M),f.g=g(M),f.b=m(M),f.opacity=_(M),f+""}}return l.gamma=i,l}(1);function r(i){return function(a){var o=a.length,l=new Array(o),f=new Array(o),v=new Array(o),b,g;for(b=0;b<o;++b)g=e.i(t.e)(a[b]),l[b]=g.r||0,f[b]=g.g||0,v[b]=g.b||0;return l=i(l),f=i(f),v=i(v),g.opacity=1,function(m){return g.r=l(m),g.g=f(m),g.b=v(m),g+""}}}var h=r(u.a),n=r(s.a)},function(E,T,e){"use strict";var t=e(59),u=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=new RegExp(u.source,"g");function c(h){return function(){return h}}function r(h){return function(n){return h(n)+""}}T.a=function(h,n){var i=u.lastIndex=s.lastIndex=0,a,o,l,f=-1,v=[],b=[];for(h=h+"",n=n+"";(a=u.exec(h))&&(o=s.exec(n));)(l=o.index)>i&&(l=n.slice(i,l),v[f]?v[f]+=l:v[++f]=l),(a=a[0])===(o=o[0])?v[f]?v[f]+=o:v[++f]=o:(v[++f]=null,b.push({i:f,x:e.i(t.a)(a,o)})),i=s.lastIndex;return i<n.length&&(l=n.slice(i),v[f]?v[f]+=l:v[++f]=l),v.length<2?b[0]?r(b[0].x):c(n):(n=b.length,function(g){for(var m=0,_;m<n;++m)v[(_=b[m]).i]=_.x(g);return v.join("")})}},function(E,T,e){"use strict";T.a=c;var t=e(96),u=e(95),s=function(r,h){return(e.i(u.a)(h)?u.b:c)(r,h)};function c(r,h){var n=h?h.length:0,i=r?Math.min(n,r.length):0,a=new Array(i),o=new Array(n),l;for(l=0;l<i;++l)a[l]=e.i(t.a)(r[l],h[l]);for(;l<n;++l)o[l]=h[l];return function(f){for(l=0;l<i;++l)o[l]=a[l](f);return o}}},function(E,T,e){"use strict";var t=e(93);T.a=function(u){var s=u.length;return function(c){var r=Math.floor(((c%=1)<0?++c:c)*s),h=u[(r+s-1)%s],n=u[r%s],i=u[(r+1)%s],a=u[(r+2)%s];return e.i(t.b)((c-r/s)*s,h,n,i,a)}}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";T.a=function(t,u){var s=new Date;return t=+t,u=+u,function(c){return s.setTime(t*(1-c)+u*c),s}}},function(E,T,e){"use strict";var t=e(96);T.a=function(u,s){var c={},r={},h;(u===null||typeof u!="object")&&(u={}),(s===null||typeof s!="object")&&(s={});for(h in s)h in u?c[h]=e.i(t.a)(u[h],s[h]):r[h]=s[h];return function(n){for(h in c)r[h]=c[h](n);return r}}},function(E,T,e){"use strict";var t=e(12),u=e(93),s=e(208),c=e(32);T.a=function i(a){var o=e.i(c.c)(a);function l(f,v){var b=o((f=e.i(t.e)(f)).r,(v=e.i(t.e)(v)).r),g=o(f.g,v.g),m=o(f.b,v.b),_=e.i(c.a)(f.opacity,v.opacity);return function(M){return f.r=b(M),f.g=g(M),f.b=m(M),f.opacity=_(M),f+""}}return l.gamma=i,l}(1);function r(i){return function(a){var o=a.length,l=new Array(o),f=new Array(o),v=new Array(o),b,g;for(b=0;b<o;++b)g=e.i(t.e)(a[b]),l[b]=g.r||0,f[b]=g.g||0,v[b]=g.b||0;return l=i(l),f=i(f),v=i(v),g.opacity=1,function(m){return g.r=l(m),g.g=f(m),g.b=v(m),g+""}}}var h=r(u.a),n=r(s.a)},function(E,T,e){"use strict";var t=e(60),u=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=new RegExp(u.source,"g");function c(h){return function(){return h}}function r(h){return function(n){return h(n)+""}}T.a=function(h,n){var i=u.lastIndex=s.lastIndex=0,a,o,l,f=-1,v=[],b=[];for(h=h+"",n=n+"";(a=u.exec(h))&&(o=s.exec(n));)(l=o.index)>i&&(l=n.slice(i,l),v[f]?v[f]+=l:v[++f]=l),(a=a[0])===(o=o[0])?v[f]?v[f]+=o:v[++f]=o:(v[++f]=null,b.push({i:f,x:e.i(t.a)(a,o)})),i=s.lastIndex;return i<n.length&&(l=n.slice(i),v[f]?v[f]+=l:v[++f]=l),v.length<2?b[0]?r(b[0].x):c(n):(n=b.length,function(g){for(var m=0,_;m<n;++m)v[(_=b[m]).i]=_.x(g);return v.join("")})}},function(E,T,e){"use strict";T.a=function(t){return function(){return this.matches(t)}}},function(E,T,e){"use strict";var t=e(18);T.a=function(u){return typeof u=="string"?new t.b([[document.querySelector(u)]],[document.documentElement]):new t.b([[u]],t.c)}},function(E,T,e){"use strict";T.b=s;var t=e(217),u=e(18);T.a=function(){return new u.b(this._enter||this._groups.map(t.a),this._parents)};function s(c,r){this.ownerDocument=c.ownerDocument,this.namespaceURI=c.namespaceURI,this._next=null,this._parent=c,this.__data__=r}s.prototype={constructor:s,appendChild:function(c){return this._parent.insertBefore(c,this._next)},insertBefore:function(c,r){return this._parent.insertBefore(c,r)},querySelector:function(c){return this._parent.querySelector(c)},querySelectorAll:function(c){return this._parent.querySelectorAll(c)}}},function(E,T,e){"use strict";T.a=function(t){return new Array(t.length)}},function(E,T,e){"use strict";T.a=r;var t=e(102);function u(h){return function(){this.style.removeProperty(h)}}function s(h,n,i){return function(){this.style.setProperty(h,n,i)}}function c(h,n,i){return function(){var a=n.apply(this,arguments);a==null?this.style.removeProperty(h):this.style.setProperty(h,a,i)}}T.b=function(h,n,i){return arguments.length>1?this.each((n==null?u:typeof n=="function"?c:s)(h,n,i==null?"":i)):r(this.node(),h)};function r(h,n){return h.style.getPropertyValue(n)||e.i(t.a)(h).getComputedStyle(h,null).getPropertyValue(n)}},function(E,T,e){"use strict";function t(){return[]}T.a=function(u){return u==null?t:function(){return this.querySelectorAll(u)}}},function(E,T,e){"use strict";var t=e(13);T.a=function(u,s){var c=u.__transition,r,h,n=!0,i;if(!!c){s=s==null?null:s+"";for(i in c){if((r=c[i]).name!==s){n=!1;continue}h=r.state>t.a&&r.state<t.b,r.state=t.c,r.timer.stop(),r.on.call(h?"interrupt":"cancel",u,u.__data__,r.index,r.group),delete c[i]}n&&delete u.__transition}}},function(E,T,e){"use strict";var t=e(12),u=e(94);T.a=function(s,c){var r;return(typeof c=="number"?u.b:c instanceof t.f?u.c:(r=e.i(t.f)(c))?(c=r,u.c):u.d)(s,c)}},function(E,T,e){var t;(function(u){"use strict";var s={},c=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r=/\d\d?/,h=/\d{3}/,n=/\d{4}/,i=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,a=/\[([^]*?)\]/gm,o=function(){};function l(y,S){for(var P=[],A=0,O=y.length;A<O;A++)P.push(y[A].substr(0,S));return P}function f(y){return function(S,P,A){var O=A[y].indexOf(P.charAt(0).toUpperCase()+P.substr(1).toLowerCase());~O&&(S.month=O)}}function v(y,S){for(y=String(y),S=S||2;y.length<S;)y="0"+y;return y}var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],g=["January","February","March","April","May","June","July","August","September","October","November","December"],m=l(g,3),_=l(b,3);s.i18n={dayNamesShort:_,dayNames:b,monthNamesShort:m,monthNames:g,amPm:["am","pm"],DoFn:function(S){return S+["th","st","nd","rd"][S%10>3?0:(S-S%10!=10)*S%10]}};var M={D:function(y){return y.getDate()},DD:function(y){return v(y.getDate())},Do:function(y,S){return S.DoFn(y.getDate())},d:function(y){return y.getDay()},dd:function(y){return v(y.getDay())},ddd:function(y,S){return S.dayNamesShort[y.getDay()]},dddd:function(y,S){return S.dayNames[y.getDay()]},M:function(y){return y.getMonth()+1},MM:function(y){return v(y.getMonth()+1)},MMM:function(y,S){return S.monthNamesShort[y.getMonth()]},MMMM:function(y,S){return S.monthNames[y.getMonth()]},YY:function(y){return String(y.getFullYear()).substr(2)},YYYY:function(y){return v(y.getFullYear(),4)},h:function(y){return y.getHours()%12||12},hh:function(y){return v(y.getHours()%12||12)},H:function(y){return y.getHours()},HH:function(y){return v(y.getHours())},m:function(y){return y.getMinutes()},mm:function(y){return v(y.getMinutes())},s:function(y){return y.getSeconds()},ss:function(y){return v(y.getSeconds())},S:function(y){return Math.round(y.getMilliseconds()/100)},SS:function(y){return v(Math.round(y.getMilliseconds()/10),2)},SSS:function(y){return v(y.getMilliseconds(),3)},a:function(y,S){return y.getHours()<12?S.amPm[0]:S.amPm[1]},A:function(y,S){return y.getHours()<12?S.amPm[0].toUpperCase():S.amPm[1].toUpperCase()},ZZ:function(y){var S=y.getTimezoneOffset();return(S>0?"-":"+")+v(Math.floor(Math.abs(S)/60)*100+Math.abs(S)%60,4)}},x={D:[r,function(y,S){y.day=S}],Do:[new RegExp(r.source+i.source),function(y,S){y.day=parseInt(S,10)}],M:[r,function(y,S){y.month=S-1}],YY:[r,function(y,S){var P=new Date,A=+(""+P.getFullYear()).substr(0,2);y.year=""+(S>68?A-1:A)+S}],h:[r,function(y,S){y.hour=S}],m:[r,function(y,S){y.minute=S}],s:[r,function(y,S){y.second=S}],YYYY:[n,function(y,S){y.year=S}],S:[/\d/,function(y,S){y.millisecond=S*100}],SS:[/\d{2}/,function(y,S){y.millisecond=S*10}],SSS:[h,function(y,S){y.millisecond=S}],d:[r,o],ddd:[i,o],MMM:[i,f("monthNamesShort")],MMMM:[i,f("monthNames")],a:[i,function(y,S,P){var A=S.toLowerCase();A===P.amPm[0]?y.isPm=!1:A===P.amPm[1]&&(y.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(y,S){S==="Z"&&(S="+00:00");var P=(S+"").match(/([\+\-]|\d\d)/gi),A;P&&(A=+(P[1]*60)+parseInt(P[2],10),y.timezoneOffset=P[0]==="+"?A:-A)}]};x.dd=x.d,x.dddd=x.ddd,x.DD=x.D,x.mm=x.m,x.hh=x.H=x.HH=x.h,x.MM=x.M,x.ss=x.s,x.A=x.a,s.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},s.format=function(y,S,P){var A=P||s.i18n;if(typeof y=="number"&&(y=new Date(y)),Object.prototype.toString.call(y)!=="[object Date]"||isNaN(y.getTime()))throw new Error("Invalid Date in fecha.format");S=s.masks[S]||S||s.masks.default;var O=[];return S=S.replace(a,function(L,H){return O.push(H),"??"}),S=S.replace(c,function(L){return L in M?M[L](y,A):L.slice(1,L.length-1)}),S.replace(/\?\?/g,function(){return O.shift()})},s.parse=function(y,S,P){var A=P||s.i18n;if(typeof S!="string")throw new Error("Invalid format in fecha.parse");if(S=s.masks[S]||S,y.length>1e3)return!1;var O=!0,L={};if(S.replace(c,function(K){if(x[K]){var G=x[K],U=y.search(G[0]);~U?y.replace(G[0],function(Z){return G[1](L,Z,A),y=y.substr(U+Z.length),Z}):O=!1}return x[K]?"":K.slice(1,K.length-1)}),!O)return!1;var H=new Date;L.isPm===!0&&L.hour!=null&&+L.hour!=12?L.hour=+L.hour+12:L.isPm===!1&&+L.hour==12&&(L.hour=0);var F;return L.timezoneOffset!=null?(L.minute=+(L.minute||0)-+L.timezoneOffset,F=new Date(Date.UTC(L.year||H.getFullYear(),L.month||0,L.day||1,L.hour||0,L.minute||0,L.second||0,L.millisecond||0))):F=new Date(L.year||H.getFullYear(),L.month||0,L.day||1,L.hour||0,L.minute||0,L.second||0,L.millisecond||0),F},typeof E!="undefined"&&E.exports?E.exports=s:(t=function(){return s}.call(T,e,T,E),t!==void 0&&(E.exports=t))})(this)},function(E,T,e){"use strict";var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";E.exports=t},function(E,T,e){"use strict";E.exports=e(542)},function(E,T){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){typeof window=="object"&&(e=window)}E.exports=e},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(33),s=e(2),c=1/2,r=1/2,h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){this.marginRatio=c,this.dodgeRatio=r,this.adjustNames=["x","y"]},a.getDodgeOffset=function(l,f,v){var b=this,g=l.pre,m=l.next,_=m-g,M=_*b.dodgeRatio/v,x=b.marginRatio*M,y=1/2*(_-v*M-(v-1)*x)+((f+1)*M+f*x)-1/2*M-1/2*_;return(g+m)/2+y},a.processAdjust=function(l){var f=this,v=l.length,b=f.xField;s(l,function(g,m){for(var _=0,M=g.length;_<M;_++){var x=g[_],y=x[b],S={pre:M===1?y-1:y-.5,next:M===1?y+1:y+.5},P=f.getDodgeOffset(S,m,v);x[b]=P}})},i}(u);u.Dodge=h,E.exports=h},function(E,T,e){var t=e(10),u=e(33),s=e(226),c=e(231),r=e(106),h=e(229),n=e(230);t(u.prototype,r),t(s.prototype,r,h),t(c.prototype,n),u.Jitter=e(228),u.Symmetric=e(232),u.Dodge=s,u.Stack=c,E.exports=u},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(2),s=e(10),c={merge:e(54)},r=e(33),h=e(106),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){this.xField=null,this.yField=null,this.adjustNames=["x","y"],this.groupFields=null},o.processAdjust=function(f){var v=this,b=c.merge(f);v.adjDataArray=f,v.mergeData=b,v.adjustData(f,b),v.adjFrames=null,v.mergeData=null},o.getAdjustOffset=function(f,v){var b=Math.random(),g=v-f,m=g*.05;return f+m+g*.9*b},o._adjustGroup=function(f,v,b,g){var m=this,_=m.getAdjustRange(v,b,g);u(f,function(M){M[v]=m.getAdjustOffset(_.pre,_.next)})},o.adjustDim=function(f,v,b){var g=this,m=g.groupData(b,f);u(m,function(_,M){M=parseFloat(M),g._adjustGroup(_,f,M,v)})},a}(r);s(n.prototype,h),r.Jitter=n,E.exports=n},function(E,T,e){var t={merge:e(54),values:e(79)},u=e(165),s=e(2);E.exports={processAdjust:function(r){var h=this,n=t.merge(r),i=h.dodgeBy,a=r;i&&(a=u(n,i)),h.cacheMap={},h.adjDataArray=a,h.mergeData=n,h.adjustData(a,n),h.adjDataArray=null,h.mergeData=null},getDistribution:function(r){var h=this,n=h.adjDataArray,i=h.cacheMap,a=i[r];return a||(a={},s(n,function(o,l){var f=t.values(o,r);f.length||f.push(0),s(f,function(v){a[v]||(a[v]=[]),a[v].push(l)})}),i[r]=a),a},adjustDim:function(r,h,n,i,a){var o=this,l=o.getDistribution(r),f=o.groupData(n,r);s(f,function(v,b){b=parseFloat(b);var g;h.length===1?g={pre:h[0]-1,next:h[0]+1}:g=o.getAdjustRange(r,b,h),s(v,function(m){var _=m[r],M=l[_],x=M.indexOf(a);m[r]=o.getDodgeOffset(g,x,M.length)})})}}},function(E,T){E.exports={_initDefaultCfg:function(){this.xField=null,this.yField=null,this.height=null,this.size=10,this.reverseOrder=!1,this.adjustNames=["y"]},processOneDimStack:function(t){var u=this,s=u.xField,c=u.yField||"y",r=u.height,h={};u.reverseOrder&&(t=t.slice(0).reverse());for(var n=0,i=t.length;n<i;n++)for(var a=t[n],o=0,l=a.length;o<l;o++){var f=a[o],v=f.size||u.size,b=v*2/r,g=f[s];h[g]||(h[g]=b/2),f[c]=h[g],h[g]+=b}},processAdjust:function(t){this.yField?this.processStack(t):this.processOneDimStack(t)}}},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var u=e(4),s=e(6),c=e(33),r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i._initDefaultCfg=function(){this.xField=null,this.yField=null},i.processAdjust=function(o){this.processStack(o)},i.processStack=function(o){var l=this,f=l.xField,v=l.yField,b=o.length,g={positive:{},negative:{}};l.reverseOrder&&(o=o.slice(0).reverse());for(var m=0;m<b;m++)for(var _=o[m],M=0,x=_.length;M<x;M++){var y=_[M],S=y[f]||0,P=y[v],A=S.toString();if(P=u(P)?P[1]:P,!s(P)){var O=P>=0?"positive":"negative";g[O][A]||(g[O][A]=0),y[v]=[g[O][A],P+g[O][A]],g[O][A]+=P}}},n}(c);c.Stack=r,E.exports=r},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(2),s=e(168),c=e(4),r={merge:e(54)},h=e(33),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){this.xField=null,this.yField=null,this.cacheMax=null,this.adjustNames=["y"],this.groupFields=null},o._getMax=function(f){var v=this,b=v.mergeData,g=s(b,function(M){var x=M[f];return c(x)?Math.max.apply(null,x):x}),m=g[f],_=c(m)?Math.max.apply(null,m):m;return _},o._getXValuesMax=function(){var f=this,v=f.yField,b=f.xField,g={},m=f.mergeData;return u(m,function(_){var M=_[b],x=_[v],y=c(x)?Math.max.apply(null,x):x;g[M]=g[M]||0,g[M]<y&&(g[M]=y)}),g},o.processAdjust=function(f){var v=this,b=r.merge(f);v.mergeData=b,v._processSymmetric(f),v.mergeData=null},o._processSymmetric=function(f){var v=this,b=v.xField,g=v.yField,m=v._getMax(g),_=f[0][0],M;_&&c(_[g])&&(M=v._getXValuesMax()),u(f,function(x){u(x,function(y){var S=y[g],P;if(c(S)){var A=y[b],O=M[A];P=(m-O)/2;var L=[];u(S,function(H){L.push(P+H)}),y[g]=L}else P=(m-S)/2,y[g]=[P,S+P]})})},a}(h);h.Symmetric=n,E.exports=n},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var u=e(15),s=e(107),c=e(34),r=function(h){t(n,h);function n(a){var o;return o=h.call(this,a)||this,o.names=["color"],o.type="color",o.gradient=null,u(o.values)&&(o.linear=!0),o}var i=n.prototype;return i.getLinearValue=function(o){var l=this.gradient;if(!l){var f=this.values;l=s.gradient(f),this.gradient=l}return l(o)},n}(c);E.exports=r},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(34),s=function(c){t(r,c);function r(h){var n;return n=c.call(this,h)||this,n.names=["opacity"],n.type="opacity",n.gradient=null,n}return r}(u);E.exports=s},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(6),s=e(4),c=e(2),r=e(34),h=function(n){t(i,n);function i(o){var l;return l=n.call(this,o)||this,l.names=["x","y"],l.type="position",l}var a=i.prototype;return a.mapping=function(l,f){var v=this.scales,b=this.coord,g=v[0],m=v[1],_,M,x;if(u(l)||u(f))return[];if(s(f)&&s(l)){_=[],M=[];for(var y=0,S=0,P=l.length,A=f.length;y<P&&S<A;y++,S++)x=b.convertPoint({x:g.scale(l[y]),y:m.scale(f[S])}),_.push(x.x),M.push(x.y)}else if(s(f))l=g.scale(l),M=[],c(f,function(L){L=m.scale(L),x=b.convertPoint({x:l,y:L}),_&&_!==x.x?(s(_)||(_=[_]),_.push(x.x)):_=x.x,M.push(x.y)});else if(s(l))f=m.scale(f),_=[],c(l,function(L){L=g.scale(L),x=b.convertPoint({x:L,y:f}),M&&M!==x.y?(s(M)||(M=[M]),M.push(x.y)):M=x.y,_.push(x.x)});else{l=g.scale(l),f=m.scale(f);var O=b.convertPoint({x:l,y:f});_=O.x,M=O.y}return[_,M]},i}(r);E.exports=h},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(34),s=function(c){t(r,c);function r(n){var i;return i=c.call(this,n)||this,i.names=["shape"],i.type="shape",i.gradient=null,i}var h=r.prototype;return h.getLinearValue=function(i){var a=this.values,o=Math.round((a.length-1)*i);return a[o]},r}(u);E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(34),s=function(c){t(r,c);function r(h){var n;return n=c.call(this,h)||this,n.names=["size"],n.type="size",n.gradient=null,n}return r}(u);E.exports=s},function(E,T,e){function t(l){return function(){var f=r(l),v;if(c()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return u(this,v)}}function u(l,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(l)}function s(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(l){return!1}}function r(l){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(l)}function h(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var n=e(3),i=e(35),a=n.MatrixUtil.vec2,o=function(l){h(v,l);var f=t(v);function v(){return l.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var m=l.prototype.getDefaultCfg.call(this);return n.mix({},m,{type:"circle",tickInterval:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},_labelOffset:5})},b.parseTick=function(m,_,M){return{text:m,value:_/M}},b._getCirclePoint=function(m,_){var M=this,x=M.get("center");return _=_||M.get("radius"),{x:x.x+Math.cos(m)*_,y:x.y+Math.sin(m)*_}},b.getTickPoint=function(m){var _=this,M=_.get("startAngle"),x=_.get("endAngle"),y=M+(x-M)*m;return _._getCirclePoint(y)},b.getSideVector=function(m,_){var M=this,x=M.get("center"),y=[_.x-x.x,_.y-x.y];if(!n.isNil(m)){var S=a.length(y);a.scale(y,y,m/S)}return y},b.getSidePoint=function(m,_){var M=this,x=M.getSideVector(_,m);return{x:m.x+x[0],y:m.y+x[1]}},b.getTickEnd=function(m,_){var M=this,x=M.get("tickLine");return _=_||x.length,M.getSidePoint(m,_)},b.getTextAnchor=function(m){var _;return n.snapEqual(m[0],0)?_="center":m[0]>0?_="left":m[0]<0&&(_="right"),_},b.getLinePath=function(){var m=this,_=m.get("center"),M=_.x,x=_.y,y=m.get("radius"),S=y,P=m.get("startAngle"),A=m.get("endAngle"),O=m.get("inner"),L=[];if(Math.abs(A-P)===Math.PI*2)L=[["M",M,x],["m",0,-S],["a",y,S,0,1,1,0,2*S],["a",y,S,0,1,1,0,-2*S],["z"]];else{var H=m._getCirclePoint(P),F=m._getCirclePoint(A),K=Math.abs(A-P)>Math.PI?1:0,G=P>A?0:1;if(!O)L=[["M",M,x],["L",H.x,H.y],["A",y,S,0,K,G,F.x,F.y],["L",M,x]];else{var U=m.getSideVector(O*y,H),Z=m.getSideVector(O*y,F),J={x:U[0]+M,y:U[1]+x},rt={x:Z[0]+M,y:Z[1]+x};L=[["M",J.x,J.y],["L",H.x,H.y],["A",y,S,0,K,G,F.x,F.y],["L",rt.x,rt.y],["A",y*O,S*O,0,K,Math.abs(G-1),J.x,J.y]]}}return L},b.addLabel=function(m,_,M){var x=this,y=x.get("label").offset||x.get("_labelOffset")||.001;_=x.getSidePoint(_,y),l.prototype.addLabel.call(this,m,_,M)},b.autoRotateLabels=function(){var m=this,_=m.get("ticks"),M=m.get("labelRenderer");if(M&&_.length>12){var x=m.get("radius"),y=m.get("startAngle"),S=m.get("endAngle"),P=S-y,A=P/(_.length-1),O=Math.sin(A/2)*x*2,L=m.getMaxLabelWidth(M);n.each(M.get("group").get("children"),function(H,F){var K=_[F],G=K.value*P+y,U=G%(Math.PI*2);L<O?(U<=0&&(G=G+Math.PI),U>Math.PI&&(G=G-Math.PI),G=G-Math.PI/2,H.attr("textAlign","center")):U>Math.PI/2?G=G-Math.PI:U<Math.PI/2*-1&&(G=G+Math.PI),H.rotateAtStart(G)})}},v}(i);E.exports=o},function(E,T,e){function t(v){return function(){var b=r(v),g;if(c()){var m=r(this).constructor;g=Reflect.construct(b,arguments,m)}else g=b.apply(this,arguments);return u(this,g)}}function u(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(35),a=n.MatrixUtil,o=n.PathUtil,l=a.vec2,f=function(v){h(g,v);var b=t(g);function g(){return v.apply(this,arguments)||this}var m=g.prototype;return m.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{inner:0,type:"helix",line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,a:0,center:null,axisStart:null,crp:[]})},m.getLinePath=function(){var M=this,x=M.get("crp"),y=M.get("axisStart"),S=o.catmullRomToBezier(x);return S.unshift(["M",y.x,y.y]),S},m.getTickPoint=function(M){var x=this,y=x.get("startAngle"),S=x.get("endAngle"),P=y+(S-y)*M;return x._getHelixPoint(P)},m._getHelixPoint=function(M){var x=this,y=x.get("center"),S=x.get("a"),P=S*M+x.get("inner");return{x:y.x+Math.cos(M)*P,y:y.y+Math.sin(M)*P}},m.getSideVector=function(M,x){var y=this,S=y.get("center"),P=[x.x-S.x,x.y-S.y];if(M){var A=l.length(P);l.scale(P,P,M/A)}return P},m.getSidePoint=function(M,x){var y=this,S=y.getSideVector(x,M);return{x:M.x+S[0],y:M.y+S[1]}},m.getTickEnd=function(M,x){var y=this,S=y.get("tickLine");return x=x||S.length,y.getSidePoint(M,x)},g}(i);E.exports=f},function(E,T,e){var t=e(35);t.Base=t,t.Circle=e(238),t.Grid=e(108),t.Helix=e(239),t.Line=e(241),t.Polyline=e(242),E.exports=t},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var g=r(this).constructor;b=Reflect.construct(v,arguments,g)}else b=v.apply(this,arguments);return u(this,b)}}function u(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(35),i=e(3),a=i.MatrixUtil,o=a.vec2,l=function(f){h(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var g=b.prototype;return g.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return i.mix({},_,{x:null,y:null,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},isVertical:!1,start:null,end:null})},g._getAvgLabelLength=function(_){var M=_.get("group").get("children");return M[1].attr("x")-M[0].attr("x")},g._getAvgLabelHeightSpace=function(_){var M=_.get("group").get("children");return M[1].attr("y")-M[0].attr("y")},g.getSideVector=function(_){var M=this,x=M.get("isVertical"),y=M.get("factor");if(!i.isNumber(_))return[0,0];var S=M.get("start"),P=M.get("end"),A=M.getAxisVector(),O=o.normalize([],A),L=!1;(x&&S.y<P.y||!x&&S.x>P.x)&&(L=!0);var H=o.vertical([],O,L);return o.scale([],H,_*y)},g.getAxisVector=function(){var _=this.get("start"),M=this.get("end");return[M.x-_.x,M.y-_.y]},g.getLinePath=function(){var _=this,M=_.get("start"),x=_.get("end"),y=[];return y.push(["M",M.x,M.y]),y.push(["L",x.x,x.y]),y},g.getTickEnd=function(_,M){var x=this,y=x.getSideVector(M);return{x:_.x+y[0],y:_.y+y[1]}},g.getTickPoint=function(_){var M=this,x=M.get("start"),y=M.get("end"),S=y.x-x.x,P=y.y-x.y;return{x:x.x+S*_,y:x.y+P*_}},g.renderTitle=function(){var _=this,M=_.get("title"),x=_.getTickPoint(.5),y=M.offset;if(i.isNil(y)){y=20;var S=_.get("labelsGroup");if(S){var P=_.getMaxLabelWidth(S),A=_.get("label").offset||_.get("_labelOffset");y+=P+A}}var O=M.textStyle,L=i.mix({},O);if(M.text){var H=_.getAxisVector();if(M.autoRotate&&i.isNil(O.rotate)){var F=0;if(!i.snapEqual(H[1],0)){var K=[1,0],G=[H[0],H[1]];F=o.angleTo(G,K,!0)}L.rotate=F*(180/Math.PI)}else i.isNil(O.rotate)||(L.rotate=O.rotate/180*Math.PI);var U=_.getSideVector(y),Z,J=M.position;J==="start"?Z={x:this.get("start").x+U[0],y:this.get("start").y+U[1]}:J==="end"?Z={x:this.get("end").x+U[0],y:this.get("end").y+U[1]}:Z={x:x.x+U[0],y:x.y+U[1]},L.x=Z.x,L.y=Z.y,L.text=M.text;var rt=_.get("group"),vt=rt.addShape("Text",{zIndex:2,attrs:L});vt.name="axis-title",_.get("appendInfo")&&vt.setSilent("appendInfo",_.get("appendInfo"))}},g.autoRotateLabels=function(){var _=this,M=_.get("labelRenderer"),x=_.get("title");if(M){var y=M.get("group"),S=y.get("children"),P=_.get("label").offset,A=12,O=x?x.offset:48;if(O<0)return;var L=_.getAxisVector(),H,F;if(i.snapEqual(L[0],0)&&x&&x.text)F=_.getMaxLabelWidth(M),F>O-P-A&&(H=Math.acos((O-P-A)/F)*-1);else if(i.snapEqual(L[1],0)&&S.length>1){var K=Math.abs(_._getAvgLabelLength(M));F=_.getMaxLabelWidth(M),F>K&&(H=Math.asin((O-P-A)*1.25/F))}if(H){var G=_.get("factor");i.each(S,function(U){U.rotateAtStart(H),i.snapEqual(L[1],0)&&(G>0?U.attr("textAlign","left"):U.attr("textAlign","right"))})}}},g.autoHideLabels=function(){var _=this,M=_.get("labelRenderer"),x,y,S=8;if(M){var P=M.get("group"),A=P.get("children"),O=_.getAxisVector();if(A.length<2)return;if(i.snapEqual(O[0],0)){var L=_.getMaxLabelHeight(M)+S,H=Math.abs(_._getAvgLabelHeightSpace(M));L>H&&(x=L,y=H)}else if(i.snapEqual(O[1],0)&&A.length>1){var F=_.getMaxLabelWidth(M)+S,K=Math.abs(_._getAvgLabelLength(M));F>K&&(x=F,y=K)}if(x&&y){var G=Math.ceil(x/y);i.each(A,function(U,Z){Z%G!=0&&U.attr("text","")})}}},b}(n);E.exports=l},function(E,T,e){function t(v){return function(){var b=r(v),g;if(c()){var m=r(this).constructor;g=Reflect.construct(b,arguments,m)}else g=b.apply(this,arguments);return u(this,g)}}function u(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(35),a=n.MatrixUtil,o=n.PathUtil,l=a.vec2,f=function(v){h(g,v);var b=t(g);function g(){return v.apply(this,arguments)||this}var m=g.prototype;return m.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{type:"polyline"})},m.getLinePath=function(){var M=this,x=M.get("tickPoints"),y=M.get("start"),S=M.get("end"),P=[];P.push(y.x),P.push(y.y),n.each(x,function(O){P.push(O.x),P.push(O.y)}),P.push(S.x),P.push(S.y);var A=o.catmullRomToBezier(P);return A.unshift(["M",y.x,y.y]),A},m.getTickPoint=function(M,x){var y=this.get("tickPoints");return y[x]},m.getTickEnd=function(M,x,y){var S=this,P=S.get("tickLine"),A=x||P.length,O=S.getSideVector(A,M,y);return{x:M.x+O[0],y:M.y+O[1]}},m.getSideVector=function(M,x,y){var S=this,P;if(y===0){if(P=S.get("start"),P.x===x.x&&P.y===x.y)return[0,0]}else{var A=S.get("tickPoints");P=A[y-1]}var O=[x.x-P.x,x.y-P.y],L=l.normalize([],O),H=l.vertical([],L,!1);return l.scale([],H,M)},g}(i);E.exports=f},function(E,T,e){function t(v){return function(){var b=r(v),g;if(c()){var m=r(this).constructor;g=Reflect.construct(b,arguments,m)}else g=b.apply(this,arguments);return u(this,g)}}function u(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(20),a=Math.PI,o=Math.atan;function l(v,b){var g=v.x-b.x,m=v.y-b.y,_;return m===0?g<0?_=a/2:_=270*a/180:g>=0&&m>0?_=a*2-o(g/m):g<=0&&m<0?_=a-o(g/m):g>0&&m<0?_=a+o(-g/m):g<0&&m>0&&(_=o(g/-m)),_}var f=function(v){h(g,v);var b=t(g);function g(){return v.apply(this,arguments)||this}var m=g.prototype;return m.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{name:"arc",start:null,end:null,style:{stroke:"#999",lineWidth:1}})},m.render=function(M,x){var y=this,S=y.parsePoint(M,y.get("start")),P=y.parsePoint(M,y.get("end"));if(!(!S||!P)){var A=M.getCenter(),O=Math.sqrt((S.x-A.x)*(S.x-A.x)+(S.y-A.y)*(S.y-A.y)),L,H=l(S,A),F=l(P,A);if(F<H&&(F+=a*2),n.isNumberEqual(S.x,P.x)&&n.isNumberEqual(S.y,P.y)&&(y.get("start")[0]!==y.get("end")[0]||y.get("start")[1]!==y.get("end")[1]))L=[["M",S.x,S.y],["A",O,O,0,1,1,2*A.x-S.x,2*A.y-S.y],["A",O,O,0,1,1,S.x,S.y]];else{var K=(F-H)%(a*2),G=K>a?1:0;L=[["M",S.x,S.y],["A",O,O,0,G,1,P.x,P.y]]}var U=x.addShape("path",{zIndex:y.get("zIndex"),attrs:n.mix({path:L},y.get("style"))});U.name="guide-arc",y.get("appendInfo")&&U.setSilent("appendInfo",y.get("appendInfo")),y.set("el",U)}},g}(i);E.exports=f},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(20),a=function(o){h(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{name:"dataMarker",zIndex:1,top:!0,position:null,style:{point:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#A3B1BF",lineWidth:1},text:{fill:"#000000",opacity:.65,fontSize:12,textAlign:"start"}},display:{point:!0,line:!0,text:!0},lineLength:20,direction:"upward",autoAdjust:!0})},v.render=function(g,m){var _=this,M=_.parsePoint(g,_.get("position"));if(!!M){var x=m.addGroup();x.name="guide-data-marker";var y=_._getElementPosition(M),S=_.get("display"),P,A;if(S.line){var O=y.line;P=_._drawLine(O,x)}if(S.text&&_.get("content")){var L=y.text;A=_._drawText(L,x)}if(S.point){var H=y.point;_._drawPoint(H,x)}if(_.get("autoAdjust")){var F=x.getBBox(),K=F.minX,G=F.minY,U=F.maxX,Z=F.maxY,J=g.start,rt=g.end;if(A){K<=J.x&&A.attr("textAlign","start"),U>=rt.x&&A.attr("textAlign","end");var vt=_.get("direction");if(vt==="upward"&&G<=rt.y||vt!=="upward"&&Z>=J.y){var mt,ut;vt==="upward"&&G<=rt.y?(mt="top",ut=1):(mt="bottom",ut=-1),A.attr("textBaseline",mt);var Rt=0;if(_.get("display").line){Rt=_.get("lineLength");var Ft=[["M",M.x,M.y],["L",M.x,M.y+Rt*ut]];P.attr("path",Ft)}var wt=M.y+(Rt+2)*ut;A.attr("y",wt)}}}_.get("appendInfo")&&x.setSilent("appendInfo",_.get("appendInfo")),_.set("el",x)}},v._getElementPosition=function(g){var m=this,_=g.x,M=g.y,x=m.get("display").line?m.get("lineLength"):0,y=m.get("direction"),S=m.get("style").text;S.textBaseline=y==="upward"?"bottom":"top";var P=y==="upward"?-1:1,A={x:_,y:M},O={x:_,y:M},L={x:_,y:x*P+M},H={x:_,y:(x+2)*P+M};return{point:A,line:[O,L],text:H}},v._drawLine=function(g,m){var _=this,M=_.get("style").line,x=[["M",g[0].x,g[0].y],["L",g[1].x,g[1].y]],y=m.addShape("path",{attrs:n.mix({path:x},M)});return y},v._drawText=function(g,m){var _=this,M=this.get("style").text,x=m.addShape("text",{attrs:n.mix({text:_.get("content")},M,g)});return x},v._drawPoint=function(g,m){var _=this,M=_.get("style").point,x=m.addShape("circle",{attrs:n.mix({},M,g)});return x},f}(i);E.exports=a},function(E,T,e){function t(l){return function(){var f=r(l),v;if(c()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return u(this,v)}}function u(l,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(l)}function s(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(l){return!1}}function r(l){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(l)}function h(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var n=e(3),i=e(109),a=e(20),o=function(l){h(v,l);var f=t(v);function v(){return l.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var m=l.prototype.getDefaultCfg.call(this);return n.mix({},m,{name:"dataRegion",start:null,end:null,content:"",style:{region:{lineWidth:0,fill:"#000000",opacity:.04},text:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:"rgba(0, 0, 0, .65)"}}})},b.render=function(m,_,M){var x=this,y=x.get("lineLength")||0,S=x._getRegionData(m,M);if(!!S.length){var P=x._getBBox(S),A=[];A.push(["M",S[0].x,P.yMin-y]);for(var O=0,L=S.length;O<L;O++){var H=["L",S[O].x,S[O].y];A.push(H)}A.push(["L",S[S.length-1].x,P.yMin-y]);var F=x.get("style"),K=F.region,G=F.text,U=_.addGroup();U.name="guide-data-region",U.addShape("path",{attrs:n.mix({path:A},K)});var Z=x.get("content");Z&&U.addShape("Text",{attrs:n.mix({x:(P.xMin+P.xMax)/2,y:P.yMin-y,text:Z},G)}),x.get("appendInfo")&&U.setSilent("appendInfo",x.get("appendInfo")),x.set("el",U)}},b._getRegionData=function(m,_){for(var M=this,x=M.get("start"),y=M.get("end"),S=i.getFirstScale(M.get("xScales")).field,P=i.getFirstScale(M.get("yScales")).field,A=n.isArray(x)?x[0]:x[S],O=n.isArray(y)?y[0]:y[S],L,H=[],F=0,K=_.length;F<K;F++){var G=_[F];if(G[S]===A&&(L=F),F>=L){var U=M.parsePoint(m,[G[S],G[P]]);U&&H.push(U)}if(G[S]===O)break}return H},b._getBBox=function(m){for(var _=[],M=[],x=0;x<m.length;x++)_.push(m[x].x),M.push(m[x].y);var y=n.arrayUtil.getRange(_),S=n.arrayUtil.getRange(M);return{xMin:y.min,xMax:y.max,yMin:S.min,yMax:S.max}},v}(a);E.exports=o},function(E,T,e){function t(l){return function(){var f=r(l),v;if(c()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return u(this,v)}}function u(l,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(l)}function s(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(l){return!1}}function r(l){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(l)}function h(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var n=e(3),i=n.DomUtil,a=e(20),o=function(l){h(v,l);var f=t(v);function v(){return l.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var m=l.prototype.getDefaultCfg.call(this);return n.mix({},m,{name:"html",zIndex:7,position:null,alignX:"middle",alignY:"middle",offsetX:null,offsetY:null,html:null})},b.render=function(m,_){var M=this,x=M.parsePoint(m,M.get("position"));if(!!x){var y=_.get("canvas").get("el").parentNode,S=i.createDom('<div class="g-guide"></div>');y.appendChild(S);var P=M.get("htmlContent")||M.get("html");if(n.isFunction(P)){var A=M.get("xScales"),O=M.get("yScales");P=P(A,O)}var L=i.createDom(P);S.appendChild(L),i.modifyCSS(S,{position:"absolute"}),M._setDomPosition(S,L,x),M.set("el",S)}},b._setDomPosition=function(m,_,M){var x=this,y=x.get("alignX"),S=x.get("alignY"),P=i.getOuterWidth(_),A=i.getOuterHeight(_),O={x:M.x,y:M.y};y==="middle"&&S==="top"?O.x-=Math.round(P/2):y==="middle"&&S==="bottom"?(O.x-=Math.round(P/2),O.y-=Math.round(A)):y==="left"&&S==="bottom"?O.y-=Math.round(A):y==="left"&&S==="middle"?O.y-=Math.round(A/2):y==="left"&&S==="top"?(O.x=M.x,O.y=M.y):y==="right"&&S==="bottom"?(O.x-=Math.round(P),O.y-=Math.round(A)):y==="right"&&S==="middle"?(O.x-=Math.round(P),O.y-=Math.round(A/2)):y==="right"&&S==="top"?O.x-=Math.round(P):(O.x-=Math.round(P/2),O.y-=Math.round(A/2));var L=x.get("offsetX");L&&(O.x+=L);var H=x.get("offsetY");H&&(O.y+=H),i.modifyCSS(m,{top:Math.round(O.y)+"px",left:Math.round(O.x)+"px",visibility:"visible",zIndex:x.get("zIndex")})},b.clear=function(){var m=this,_=m.get("el");_&&_.parentNode&&_.parentNode.removeChild(_)},v}(a);E.exports=o},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(20),a=function(o){h(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{type:"image",start:null,end:null,src:null,offsetX:null,offsetY:null})},v.render=function(g,m){var _=this,M=_.parsePoint(g,_.get("start"));if(!!M){var x={x:M.x,y:M.y};if(x.img=_.get("src"),!_.get("end"))x.width=_.get("width")||32,x.height=_.get("height")||32;else{var y=_.parsePoint(g,_.get("end"));if(!y)return;x.width=y.x-M.x,x.height=y.y-M.y}_.get("offsetX")&&(x.x+=_.get("offsetX")),_.get("offsetY")&&(x.y+=_.get("offsetY"));var S=m.addShape("Image",{zIndex:1,attrs:x});S.name="guide-image",_.get("appendInfo")&&S.setSilent("appendInfo",_.get("appendInfo")),_.set("el",S)}},f}(i);E.exports=a},function(E,T,e){E.exports={Guide:e(20),Arc:e(243),DataMarker:e(244),DataRegion:e(245),Html:e(246),Image:e(247),Line:e(249),Region:e(250),Text:e(251)}},function(E,T,e){function t(v){return function(){var b=r(v),g;if(c()){var m=r(this).constructor;g=Reflect.construct(b,arguments,m)}else g=b.apply(this,arguments);return u(this,g)}}function u(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(20),a=n.MatrixUtil.vec2,o=e(19),l=o.FONT_FAMILY,f=function(v){h(g,v);var b=t(g);function g(){return v.apply(this,arguments)||this}var m=g.prototype;return m.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{name:"line",start:null,end:null,lineStyle:{stroke:"#000",lineWidth:1},text:{position:"end",autoRotate:!0,style:{fill:"#999",fontSize:12,fontWeight:500,fontFamily:l},content:null}})},m.render=function(M,x){var y=this,S=y.parsePoint(M,y.get("start")),P=y.parsePoint(M,y.get("end"));if(!(!S||!P)){var A=x.addGroup({viewId:x.get("viewId")});y._drawLines(S,P,A);var O=y.get("text");O&&O.content&&y._drawText(S,P,A),y.set("el",A)}},m._drawLines=function(M,x,y){var S=[["M",M.x,M.y],["L",x.x,x.y]],P=y.addShape("Path",{attrs:n.mix({path:S},this.get("lineStyle"))});P.name="guide-line",this.get("appendInfo")&&P.setSilent("appendInfo",this.get("appendInfo"))},m._drawText=function(M,x,y){var S=this.get("text"),P=S.position,A=S.style||{},O;P==="start"?O=0:P==="center"?O=.5:n.isString(P)&&P.indexOf("%")!==-1?O=parseInt(P,10)/100:n.isNumber(P)?O=P:O=1,(O>1||O<0)&&(O=1);var L={x:M.x+(x.x-M.x)*O,y:M.y+(x.y-M.y)*O};if(S.offsetX&&(L.x+=S.offsetX),S.offsetY&&(L.y+=S.offsetY),L.text=S.content,L=n.mix({},L,A),S.autoRotate&&n.isNil(A.rotate)){var H=a.angleTo([x.x-M.x,x.y-M.y],[1,0],1);L.rotate=H}else n.isNil(A.rotate)||(L.rotate=A.rotate*Math.PI/180);var F=y.addShape("Text",{attrs:L});F.name="guide-line-text",this.get("appendInfo")&&F.setSilent("appendInfo",this.get("appendInfo"))},g}(i);E.exports=f},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(20),a=function(o){h(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{name:"region",zIndex:1,start:null,end:null,style:{lineWidth:0,fill:"#CCD7EB",opacity:.4}})},v.render=function(g,m){var _=this,M=_.get("style"),x=_._getPath(g);if(!!x.length){var y=m.addShape("path",{zIndex:_.get("zIndex"),attrs:n.mix({path:x},M)});y.name="guide-region",_.get("appendInfo")&&y.setSilent("appendInfo",_.get("appendInfo")),_.set("el",y)}},v._getPath=function(g){var m=this,_=m.parsePoint(g,m.get("start")),M=m.parsePoint(g,m.get("end"));if(!_||!M)return[];var x=[["M",_.x,_.y],["L",M.x,_.y],["L",M.x,M.y],["L",_.x,M.y],["z"]];return x},f}(i);E.exports=a},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(20),a=function(o){h(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{name:"text",position:null,content:null,style:{fill:"#999",fontSize:12,fontWeight:500,textAlign:"center"},offsetX:null,offsetY:null,top:!0})},v.render=function(g,m){var _=this,M=_.parsePoint(g,_.get("position"));if(!!M){var x=n.mix({},_.get("style")),y=_.get("offsetX"),S=_.get("offsetY");y&&(M.x+=y),S&&(M.y+=S),x.rotate&&(x.rotate=x.rotate*Math.PI/180);var P=m.addShape("Text",{zIndex:_.get("zIndex"),attrs:n.mix({text:_.get("content")},x,M)});P.name="guide-text",_.get("appendInfo")&&P.setSilent("appendInfo",_.get("appendInfo")),_.set("el",P)}},f}(i);E.exports=a},function(E,T,e){var t=e(110);E.exports=t},function(E,T){E.exports=function(t,u){for(var s,c,r=[],h=0;h<t.length;h++)s=t[h].getBBox(),c=u[h].getBBox(),(s.width>c.width||s.height>c.height||s.width*s.height>c.width*c.height)&&r.push(t[h]);for(var n=0;n<r.length;n++)r[n].remove()}},function(E,T,e){var t=e(111);function u(s,c,r,h){var n=s.getBBox(),i=n.width,a=n.height,o={x:c,y:r,textAlign:"center"};switch(h){case 0:o.y-=a/2,o.textAlign="left";break;case 1:o.y-=a/2,o.textAlign="right";break;case 2:o.y+=a/2,o.textAlign="right";break;case 3:o.y+=a/2,o.textAlign="left";break;case 5:o.y-=a/2;break;case 6:o.y+=a/2;break;case 7:o.x+=i/2,o.textAlign="left";break;case 8:o.x-=i/2,o.textAlign="right";break;default:break}return s.attr(o),s.getBBox()}E.exports=function(s){for(var c=new t,r=[],h,n,i,a,o,l=0;l<s.length;l++){n=s[l],i=n.attr("x"),a=n.attr("y"),o=!1;for(var f=0;f<8;f++)if(h=u(n,i,a,f),c.hasGap(h)){c.fillGap(h),o=!0;break}o||r.push(n)}for(var v=0;v<r.length;v++)r[v].remove();return o}},function(E,T,e){var t=e(111),u=20;function s(c,r){var h=-1,n=c.attr("x"),i=c.attr("y"),a=c.getBBox(),o=Math.sqrt(a.width*a.width+a.height*a.height),l,f=-h,v=0,b=0,g=function(x){return[(x*=.1)*Math.cos(x),x*Math.sin(x)]};if(r.hasGap(a))return r.fillGap(a),!0;for(var m=!1,_=0;Math.min(Math.abs(v),Math.abs(b))<o&&_<u;)if(l=g(f+=h),v=~~l[0],b=~~l[1],c.attr({x:n+v,y:i+b}),_++,r.hasGap(c.getBBox())){r.fillGap(a),m=!0;break}return m}E.exports=function(c){for(var r,h=new t,n=[],i=0;i<c.length;i++)r=c[i],s(r,h)||n.push(r);for(var a=0;a<n.length;a++)n[a].remove()}},function(E,T,e){function t(y){return function(){var S=r(y),P;if(c()){var A=r(this).constructor;P=Reflect.construct(S,arguments,A)}else P=S.apply(this,arguments);return u(this,P)}}function u(y,S){return S&&(typeof S=="object"||typeof S=="function")?S:s(y)}function s(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(y){return!1}}function r(y){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},r(y)}function h(y,S){y.prototype=Object.create(S.prototype),y.prototype.constructor=y,y.__proto__=S}var n=e(3),i=e(113),a=e(19),o=a.FONT_FAMILY,l=n.DomUtil,f="g2-legend-list",v="g2-slip",b="g2-caret-up",g="g2-caret-down",m="rgba(0,0,0,0.65)",_="rgba(0,0,0,0.25)";function M(y,S){return y.getElementsByClassName(S)[0]}var x=function(y){h(P,y);var S=t(P);function P(){return y.apply(this,arguments)||this}var A=P.prototype;return A.getDefaultCfg=function(){var L=y.prototype.getDefaultCfg.call(this);return n.mix({},L,{type:"category-page-legend",container:null,caretStyle:{fill:"rgba(0,0,0,0.65)"},pageNumStyle:{display:"inline-block",fontSize:"12px",fontFamily:o,cursor:"default"},slipDomStyle:{width:"auto",height:"auto",position:"absolute"},slipTpl:'<div class="'+v+'" ><svg viewBox="64 64 896 896" class="g2-caret-up" data-icon="left" style = "display:inline-block;vertical-align:middle;" width="1em" height="1em" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg><p class="cur-pagenum" style = "display:inline-block;vertical-align:middle;">1</p><p class="next-pagenum" style = "display:inline-block;vertical-align:middle;"">/2</p><svg viewBox="64 64 896 896" class="g2-caret-down" data-icon="right" style = "display:inline-block;vertical-align:middle;" width="1em" height="1em" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></div>',slipWidth:65,legendOverflow:"unset"})},A.render=function(){y.prototype._renderHTML.call(this),this._renderFlipPage()},A._renderFlipPage=function(){var L=this.get("legendWrapper"),H=M(L,f),F=this.get("position"),K=this.get("layout"),G=F==="right"||F==="left"||K==="vertical",U=G?"block":"inline-block",Z=L.offsetHeight;if(L.scrollHeight>Z){var J=this.get("slipTpl"),rt=l.createDom(J),vt=M(rt,b),mt=M(rt,g);l.modifyCSS(vt,this.get("caretStyle")),l.modifyCSS(vt,{fill:"rgba(0,0,0,0.25)"}),l.modifyCSS(mt,this.get("caretStyle"));var ut=M(rt,"cur-pagenum"),Rt=M(rt,"next-pagenum"),Ft=this.get("pageNumStyle");if(l.modifyCSS(ut,n.mix({},Ft,{paddingLeft:"10px"})),l.modifyCSS(Rt,n.mix({},Ft,{opacity:.3,paddingRight:"10px"})),l.modifyCSS(rt,n.mix({},this.get("slipDomStyle"),G?{top:Z+"px"}:{right:0,top:"50%",transform:"translate(0, -50%)"})),L.style.overflow=this.get("legendOverflow"),L.appendChild(rt),!G){var wt=Math.max(L.offsetWidth-10-rt.offsetWidth,0);l.modifyCSS(H,{maxWidth:wt+"px"})}for(var Mt=H.childNodes,St=0,At=1,nt=[],Pt=0;Pt<Mt.length;Pt++)Mt[Pt].style.display=U,St=Mt[Pt].offsetTop+Mt[Pt].offsetHeight,St>Z&&(At++,nt.forEach(function(z){z.style.display="none"}),nt=[]),nt.push(Mt[Pt]);Rt.innerText="/"+At,Mt.forEach(function(z){z.style.display=U,St=z.offsetTop+z.offsetHeight,St>Z&&(z.style.display="none")}),vt.addEventListener("click",function(){if(Mt[0].style.display!==U){var z=-1;Mt.forEach(function(et,at){et.style.display===U&&(z=z===-1?at:z,et.style.display="none")});for(var q=z-1;q>=0&&(Mt[q].style.display=U,St=Mt[z-1].offsetTop+Mt[z-1].offsetHeight,Mt[q].style.display="none",St<=Z);q--)Mt[q].style.display=U;var gt=Number.parseInt(ut.innerText,10)-1;gt===1?vt.style.fill=_:vt.style.fill=m,mt.style.fill=m,ut.innerText=gt}}),mt.addEventListener("click",function(){if(Mt[Mt.length-1].style.display!==U){var z=-1;Mt.forEach(function(et,at){et.style.display===U&&(z=at,et.style.display="none")});for(var q=z+1;q<Mt.length&&(Mt[q].style.display=U,St=Mt[q].offsetTop+Mt[q].offsetHeight,Mt[q].style.display="none",St<=Z);q++)Mt[q].style.display=U;var gt=Number.parseInt(ut.innerText,10)+1;gt===At?mt.style.fill=_:mt.style.fill=m,vt.style.fill=m,ut.innerText=gt}}),this.set("slipDom",rt)}},A.destroy=function(){var L=this.get("slipDom");L&&L.parentNode&&L.parentNode.removeChild(L),y.prototype.destroy.call(this)},P}(i);E.exports=x},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var g=r(this).constructor;b=Reflect.construct(v,arguments,g)}else b=v.apply(this,arguments);return u(this,b)}}function u(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(65),i=n.ColorUtil,a=e(3),o=e(67),l=function(f){h(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var g=b.prototype;return g.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return a.mix({},_,{type:"color-legend",layout:"vertical",triggerAttr:{fill:"#fff",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10,shadowColor:"#ccc",radius:3},isSegment:!1})},g._setPercentage=function(){var _=this.get("items");if(!_[0].percentage){var M=_[0].value,x=_[_.length-1].value;a.each(_,function(y){y.percentage=(y.value-M)/(x-M)})}},g._renderSliderShape=function(){this._setPercentage();var _=this.get("slider"),M=_.get("backgroundElement"),x=this.get("width"),y=this.get("height"),S=this.get("layout"),P=this.get("items"),A="",O;return S==="vertical"?(A+="l (90) ",a.each(P,function(L){O=i.toRGB(L.color),A+=1-L.percentage+":"+O+" "})):(A+="l (0) ",a.each(P,function(L){O=i.toRGB(L.color),A+=L.percentage+":"+O+" "})),this._addMiddleBar(M,"Rect",{x:0,y:0,width:x,height:y,fill:A,strokeOpacity:0})},g._renderUnslidable=function(){this._setPercentage();var _=this.get("titleShape"),M=this.get("titleGap");M=_?_.getBBox().height+M:M;var x=this.get("width"),y=this.get("height"),S=this.get("layout"),P=this.get("items"),A="",O,L=[],H=this.get("group"),F=H.addGroup(),K=P.length;if(S==="vertical"){A+="l (90) ";for(var G=0;G<K;G+=1){if(G!==0&&G!==K-1&&(L.push(["M",0,y-P[G].percentage*y]),L.push(["L",x,y-P[G].percentage*y])),O=i.toRGB(P[G].color),A+=1-P[G].percentage+":"+O+" ",this.get("isSegment")&&G>0){var U=i.toRGB(P[G-1].color);A+=1-P[G].percentage+":"+U+" "}F.addShape("text",{attrs:a.mix({},{x:x+this.get("textOffset")/2,y:y-P[G].percentage*y,text:this._formatItemValue(P[G].value)+""},this.get("textStyle"),{textAlign:"start"})})}}else{A+="l (0) ";for(var Z=0;Z<K;Z+=1){if(Z!==0&&Z!==K-1&&(L.push(["M",P[Z].percentage*x,0]),L.push(["L",P[Z].percentage*x,y])),O=i.toRGB(P[Z].color),this.get("isSegment")&&Z>0){var J=i.toRGB(P[Z-1].color);A+=P[Z].percentage+":"+J+" "}A+=P[Z].percentage+":"+O+" ",F.addShape("text",{attrs:a.mix({},{x:P[Z].percentage*x,y:y+5+this.get("textOffset"),text:this._formatItemValue(P[Z].value)+""},this.get("textStyle"))})}}F.addShape("rect",{attrs:{x:0,y:0,width:x,height:y,fill:A,strokeOpacity:0}}),F.addShape("path",{attrs:a.mix({path:L},this.get("lineStyle"))}),F.move(0,M)},b}(o);E.exports=l},function(E,T,e){E.exports={Category:e(114),CatHtml:e(113),CatPageHtml:e(256),Color:e(257),Size:e(260),CircleSize:e(259)}},function(E,T,e){function t(b){return function(){var g=r(b),m;if(c()){var _=r(this).constructor;m=Reflect.construct(g,arguments,_)}else m=g.apply(this,arguments);return u(this,m)}}function u(b,g){return g&&(typeof g=="object"||typeof g=="function")?g:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},r(b)}function h(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var n=e(3),i=e(67),a=2,o=16,l=16,f=5,v=function(b){h(m,b);var g=t(m);function m(){return b.apply(this,arguments)||this}var _=m.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return n.mix({},x,{type:"size-circle-legend",width:100,height:200,_unslidableCircleStyle:{stroke:"rgb(99, 161, 248)",fill:"rgb(99, 161, 248)",fillOpacity:.3,lineWidth:1.5},triggerAttr:{fill:"white",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10,shadowColor:"#ccc"},frontMiddleBarStyle:{fill:"rgb(64, 141, 251)"}})},_._renderSliderShape=function(){var x=f,y=this.get("slider"),S=y.get("backgroundElement"),P=this.get("layout"),A=P==="vertical"?a:this.get("width"),O=P==="vertical"?this.get("height"):a,L=x,H=this.get("height")/2,F=this.get("frontMiddleBarStyle"),K=P==="vertical"?[[0,0],[A,0],[A,O],[0,O]]:[[0,H+O],[0,H-O],[L+A-4,H-O],[L+A-4,H+O]];return this._addMiddleBar(S,"Polygon",n.mix({points:K},F))},_._addHorizontalTrigger=function(x,y,S,P){var A=this.get("slider"),O=A.get(x+"HandleElement"),L=-this.get("height")/2,H=O.addShape("circle",{attrs:n.mix({x:0,y:L,r:P},y)}),F=O.addShape("text",{attrs:n.mix(S,{x:0,y:L+P+10,textAlign:"center",textBaseline:"middle"})}),K=this.get("layout"),G=K==="vertical"?"ns-resize":"ew-resize";H.attr("cursor",G),F.attr("cursor",G),this.set(x+"ButtonElement",H),this.set(x+"TextElement",F)},_._addVerticalTrigger=function(x,y,S,P){var A=this.get("slider"),O=A.get(x+"HandleElement"),L=O.addShape("circle",{attrs:n.mix({x:0,y:0,r:P},y)}),H=O.addShape("text",{attrs:n.mix(S,{x:P+10,y:0,textAlign:"start",textBaseline:"middle"})}),F=this.get("layout"),K=F==="vertical"?"ns-resize":"ew-resize";L.attr("cursor",K),H.attr("cursor",K),this.set(x+"ButtonElement",L),this.set(x+"TextElement",H)},_._renderTrigger=function(){var x=this.get("firstItem"),y=this.get("lastItem"),S=this.get("layout"),P=this.get("textStyle"),A=this.get("triggerAttr"),O=n.mix({},A),L=n.mix({},A),H=f,F=l,K=n.mix({text:this._formatItemValue(x.value)+""},P),G=n.mix({text:this._formatItemValue(y.value)+""},P);S==="vertical"?(this._addVerticalTrigger("min",O,K,H),this._addVerticalTrigger("max",L,G,F)):(this._addHorizontalTrigger("min",O,K,H),this._addHorizontalTrigger("max",L,G,F))},_._bindEvents=function(){var x=this;if(this.get("slidable")){var y=this.get("slider");y.on("sliderchange",function(S){var P=S.range,A=x.get("firstItem").value,O=x.get("lastItem").value,L=A+P[0]/100*(O-A),H=A+P[1]/100*(O-A),F=f+P[0]/100*(l-f),K=f+P[1]/100*(l-f);x._updateElement(L,H,F,K);var G=new Event("itemfilter",S,!0,!0);G.range=[L,H],x.emit("itemfilter",G)})}},_._updateElement=function(x,y,S,P){b.prototype._updateElement.call(this,x,y);var A=this.get("minTextElement"),O=this.get("maxTextElement"),L=this.get("minButtonElement"),H=this.get("maxButtonElement");L.attr("r",S),H.attr("r",P);var F=this.get("layout");if(F==="vertical")A.attr("x",S+10),O.attr("x",P+10);else{var K=-this.get("height")/2;A.attr("y",K+S+10),O.attr("y",K+P+10)}},_._addCircle=function(x,y,S,P,A){var O=this.get("group"),L=O.addGroup(),H=this.get("_unslidableCircleStyle"),F=this.get("textStyle"),K=this.get("titleShape"),G=this.get("titleGap");K&&(G+=K.getBBox().height),L.addShape("circle",{attrs:n.mix({x,y:y+G,r:S===0?1:S},H)}),this.get("layout")==="vertical"?L.addShape("text",{attrs:n.mix({x:A+20+this.get("textOffset"),y:y+G,text:P===0?"0":P},F)}):L.addShape("text",{attrs:n.mix({x,y:y+G+A+13+this.get("textOffset"),text:P===0?"0":P},F)})},_._renderUnslidable=function(){var x=this.get("firstItem").value,y=this.get("lastItem").value;if(x>y){var S=y;y=x,x=S}var P=this._formatItemValue(x),A=this._formatItemValue(y),O=x<f?f:x,L=y>l?l:y;O>L&&(O=f,L=l),this.get("layout")==="vertical"?(this._addCircle(L,L,O,P,2*L),this._addCircle(L,L*2+o+O,L,A,2*L)):(this._addCircle(L,L,O,P,2*L),this._addCircle(L*2+o+O,L,L,A,2*L))},_.activate=function(x){!this.get("slidable")||b.prototype.activate.call(this,x)},m}(i);E.exports=v},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(67),a=function(o){h(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{type:"size-legend",width:100,height:200,_unslidableElementStyle:{fill:"#4E7CCC",fillOpacity:1},frontMiddleBarStyle:{fill:"rgb(64, 141, 251)"}})},v._renderSliderShape=function(){var g=this.get("slider"),m=g.get("backgroundElement"),_=this.get("layout"),M=this.get("width"),x=this.get("height"),y=this.get("height")/2,S=this.get("frontMiddleBarStyle"),P=_==="vertical"?[[0,0],[M,0],[M,x],[M-4,x]]:[[0,y+x/2],[0,y+x/2-4],[M,y-x/2],[M,y+x/2]];return this._addMiddleBar(m,"Polygon",n.mix({points:P},S))},v._renderUnslidable=function(){var g=this.get("layout"),m=this.get("width"),_=this.get("height"),M=this.get("frontMiddleBarStyle"),x=g==="vertical"?[[0,0],[m,0],[m,_],[m-4,_]]:[[0,_],[0,_-4],[m,0],[m,_]],y=this.get("group"),S=y.addGroup();S.addShape("Polygon",{attrs:n.mix({points:x},M)});var P=this._formatItemValue(this.get("firstItem").value),A=this._formatItemValue(this.get("lastItem").value);this.get("layout")==="vertical"?(this._addText(m+10,_-3,P),this._addText(m+10,3,A)):(this._addText(0,_,P),this._addText(m,_,A))},v._addText=function(g,m,_){var M=this.get("group"),x=M.addGroup(),y=this.get("textStyle"),S=this.get("titleShape"),P=this.get("titleGap");S&&(P+=S.getBBox().height),this.get("layout")==="vertical"?x.addShape("text",{attrs:n.mix({x:g+this.get("textOffset"),y:m,text:_===0?"0":_},y)}):(m+=P+this.get("textOffset")-20,S||(m+=10),x.addShape("text",{attrs:n.mix({x:g,y:m,text:_===0?"0":_},y)}))},f}(i);E.exports=a},function(E,T,e){var t=e(3),u=t.DomUtil,s=t.Group,c=function r(h){r.superclass.constructor.call(this,h)};t.extend(c,s),t.augment(c,{getDefaultCfg:function(){return{range:null,middleAttr:{fill:"#fff",fillOpacity:0},backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},_beforeRenderUI:function(){var h=this.get("layout"),n=this.get("backgroundElement"),i=this.get("minHandleElement"),a=this.get("maxHandleElement"),o=this.addShape("rect",{attrs:this.get("middleAttr")}),l=h==="vertical"?"ns-resize":"ew-resize";this.add([n,i,a]),this.set("middleHandleElement",o),n.set("zIndex",0),o.set("zIndex",1),i.set("zIndex",2),a.set("zIndex",2),o.attr("cursor","move"),i.attr("cursor",l),a.attr("cursor",l),this.sort()},_renderUI:function(){this.get("layout")==="horizontal"?this._renderHorizontal():this._renderVertical()},_transform:function(h){var n=this.get("range"),i=n[0]/100,a=n[1]/100,o=this.get("width"),l=this.get("height"),f=this.get("minHandleElement"),v=this.get("maxHandleElement"),b=this.get("middleHandleElement");f.resetMatrix(),v.resetMatrix(),h==="horizontal"?(b.attr({x:o*i,y:0,width:(a-i)*o,height:l}),f.translate(i*o,l),v.translate(a*o,l)):(b.attr({x:0,y:l*(1-a),width:o,height:(a-i)*l}),f.translate(1,(1-i)*l),v.translate(1,(1-a)*l))},_renderHorizontal:function(){this._transform("horizontal")},_renderVertical:function(){this._transform("vertical")},_bindUI:function(){this.on("mousedown",t.wrapBehavior(this,"_onMouseDown"))},_isElement:function(h,n){var i=this.get(n);if(h===i)return!0;if(i.isGroup){var a=i.get("children");return a.indexOf(h)>-1}return!1},_getRange:function(h,n){var i=h+n;return i=i>100?100:i,i=i<0?0:i,i},_updateStatus:function(h,n){var i=h==="x"?this.get("width"):this.get("height");h=t.upperFirst(h);var a=this.get("range"),o=this.get("page"+h),l=this.get("currentTarget"),f=this.get("rangeStash"),v=this.get("layout"),b=v==="vertical"?-1:1,g=n["page"+h],m=g-o,_=m/i*100*b,M;a[1]<=a[0]?(this._isElement(l,"minHandleElement")||this._isElement(l,"maxHandleElement"))&&(a[0]=this._getRange(_,a[0]),a[1]=this._getRange(_,a[0])):(this._isElement(l,"minHandleElement")&&(a[0]=this._getRange(_,a[0])),this._isElement(l,"maxHandleElement")&&(a[1]=this._getRange(_,a[1]))),this._isElement(l,"middleHandleElement")&&(M=f[1]-f[0],a[0]=this._getRange(_,a[0]),a[1]=a[0]+M,a[1]>100&&(a[1]=100,a[0]=a[1]-M)),this.emit("sliderchange",{range:a}),this.set("page"+h,g),this._renderUI(),this.get("canvas").draw()},_onMouseDown:function(h){var n=h.currentTarget,i=h.event,a=this.get("range");i.stopPropagation(),i.preventDefault(),this.set("pageX",i.pageX),this.set("pageY",i.pageY),this.set("currentTarget",n),this.set("rangeStash",[a[0],a[1]]),this._bindCanvasEvents()},_bindCanvasEvents:function(){var h=this.get("canvas").get("containerDOM");this.onMouseMoveListener=u.addEventListener(h,"mousemove",t.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=u.addEventListener(h,"mouseup",t.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=u.addEventListener(h,"mouseleave",t.wrapBehavior(this,"_onCanvasMouseUp"))},_onCanvasMouseMove:function(h){if(!this._mouseOutArea(h)){var n=this.get("layout");n==="horizontal"?this._updateStatus("x",h):this._updateStatus("y",h)}},_onCanvasMouseUp:function(){this._removeDocumentEvents()},_removeDocumentEvents:function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove()},_mouseOutArea:function(h){var n=this.get("canvas").get("el"),i=n.getBoundingClientRect(),a=this.get("parent"),o=a.getBBox(),l=a.attr("matrix")[6],f=a.attr("matrix")[7],v=l+o.width,b=f+o.height,g=h.clientX-i.x,m=h.clientY-i.y;return g<l||g>v||m<f||m>b}}),E.exports=c},function(E,T,e){function t(){return t=Object.assign||function(F){for(var K=1;K<arguments.length;K++){var G=arguments[K];for(var U in G)Object.prototype.hasOwnProperty.call(G,U)&&(F[U]=G[U])}return F},t.apply(this,arguments)}function u(F){return function(){var K=h(F),G;if(r()){var U=h(this).constructor;G=Reflect.construct(K,arguments,U)}else G=K.apply(this,arguments);return s(this,G)}}function s(F,K){return K&&(typeof K=="object"||typeof K=="function")?K:c(F)}function c(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function r(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(F){return!1}}function h(F){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(G){return G.__proto__||Object.getPrototypeOf(G)},h(F)}function n(F,K){F.prototype=Object.create(K.prototype),F.prototype.constructor=F,F.__proto__=K}var i=e(31),a=e(68),o=e(3),l=o.DomUtil,f=e(265),v=e(116),b=e(118),g=e(117),m="g2-tooltip",_="g2-tooltip-title",M="g2-tooltip-list",x="g2-tooltip-marker",y="g2-tooltip-value",S="g2-tooltip-list-item",P=5,A=i.Marker;function O(F,K){return F.getElementsByClassName(K)[0]}function L(F,K){return Object.keys(F).forEach(function(G){K[G]&&(F[G]=o.mix(F[G],K[G]))}),F}var H=function(F){n(U,F);var K=u(U),G=U.prototype;G.getDefaultCfg=function(){var J=F.prototype.getDefaultCfg.call(this);return o.mix({},J,{containerTpl:' <div class="'+m+'"> <div class="'+_+'"></div><ul class="'+M+'"></ul></div>',itemTpl:`<li data-index={index}>
      <svg viewBox="0 0 `+P+" "+P+'" class="'+x+`"></svg>
      {name}<span class="`+y+'">{value}</span></li>',htmlContent:null,follow:!0,enterable:!1})};function U(Z){var J;J=F.call(this,Z)||this,o.assign(c(J),b),o.assign(c(J),g);var rt=f;J.style=L(rt,Z),J._init_(),J.get("items")&&J.render();var vt=J.get("crosshairs");if(vt){var mt=vt.type==="rect"?J.get("backPlot"):J.get("frontPlot"),ut=new v(o.mix({plot:mt,plotRange:J.get("plotRange"),canvas:J.get("canvas")},J.get("crosshairs")));ut.hide(),J.set("crosshairGroup",ut)}return J}return G._init_=function(){var J=this,rt=J.get("containerTpl"),vt=J.get("canvas").get("el").parentNode,mt;if(!this.get("htmlContent")){if(/^\#/.test(rt)){var ut=rt.replace("#","");mt=document.getElementById(ut)}else mt=l.createDom(rt),l.modifyCSS(mt,J.style[m]),vt.appendChild(mt),vt.style.position="relative";J.set("container",mt)}},G.render=function(){var J=this;if(J.clear(),J.get("htmlContent")){var rt=J.get("canvas").get("el").parentNode,vt=J._getHtmlContent();rt.appendChild(vt),J.set("container",vt)}else J._renderTpl()},G._renderTpl=function(){var J=this,rt=J.get("showTitle"),vt=J.get("titleContent"),mt=J.get("container"),ut=O(mt,_),Rt=O(mt,M),Ft=J.get("items");ut&&rt&&(l.modifyCSS(ut,J.style[_]),ut.innerHTML=vt),Rt&&(l.modifyCSS(Rt,J.style[M]),o.each(Ft,function(wt,Mt){Rt.appendChild(J._addItem(wt,Mt))}))},G.clear=function(){var J=this.get("container");if(this.get("htmlContent"))J&&J.remove();else{var rt=O(J,_),vt=O(J,M);rt&&(rt.innerHTML=""),vt&&(vt.innerHTML="")}},G.show=function(){var J=this.get("container");if(!(!J||this.destroyed)){J.style.visibility="visible",J.style.display="block";var rt=this.get("crosshairGroup");rt&&rt.show();var vt=this.get("markerGroup");vt&&vt.show(),F.prototype.show.call(this),this.get("canvas").draw()}},G.hide=function(){var J=this.get("container");if(!(!J||this.destroyed)){J.style.visibility="hidden",J.style.display="none";var rt=this.get("crosshairGroup");rt&&rt.hide();var vt=this.get("markerGroup");vt&&vt.hide(),F.prototype.hide.call(this),this.get("canvas").draw()}},G.destroy=function(){var J=this,rt=J.get("container"),vt=J.get("containerTpl");rt&&!/^\#/.test(vt)&&rt.parentNode.removeChild(rt);var mt=this.get("crosshairGroup");mt&&mt.destroy();var ut=this.get("markerGroup");ut&&ut.remove(),F.prototype.destroy.call(this)},G._getMarkerSvg=function(J){var rt=J.marker||{},vt=rt.activeSymbol||rt.symbol,mt;o.isFunction(vt)?mt=vt:o.isString(vt)&&(mt=A.Symbols[vt]),mt=o.isFunction(mt)?mt:A.Symbols.circle;var ut=mt(P/2,P/2,P/2),Rt=ut.reduce(function(Ft,wt){return""+Ft+wt[0]+wt.slice(1).join(",")},"");return'<path d="'+Rt+'" fill="'+(rt.fill||"none")+'" stroke="'+(rt.stroke||"none")+'" />'},G._addItem=function(J,rt){var vt=this.get("itemTpl"),mt=o.substitute(vt,o.mix({index:rt},J)),ut=l.createDom(mt);l.modifyCSS(ut,this.style[S]);var Rt=O(ut,x);if(Rt){l.modifyCSS(Rt,t({},this.style[x],{borderRadius:"unset"}));var Ft=this._getMarkerSvg(J);Rt.innerHTML=Ft}var wt=O(ut,y);return wt&&l.modifyCSS(wt,this.style[y]),ut},G._getHtmlContent=function(){var J=this.get("htmlContent"),rt=this.get("titleContent"),vt=this.get("items"),mt=J(rt,vt),ut=l.createDom(mt);return ut},G.setPosition=function(J,rt,vt){var mt=this.get("container"),ut=this.get("canvas").get("el"),Rt=l.getWidth(ut),Ft=l.getHeight(ut),wt=mt.clientWidth,Mt=mt.clientHeight,St=J,At=rt,nt,Pt=this.get("prePosition")||{x:0,y:0};if(wt||(mt.style.display="block",wt=mt.clientWidth,Mt=mt.clientHeight,mt.style.display="none"),this.get("enterable")?(rt=rt-mt.clientHeight/2,nt=[J,rt],Pt&&J-Pt.x>0?J-=mt.clientWidth+1:J+=1):this.get("position")?(nt=this._calcTooltipPosition(J,rt,this.get("position"),wt,Mt,vt),J=nt[0],rt=nt[1]):(nt=this._constraintPositionInBoundary(J,rt,wt,Mt,Rt,Ft),J=nt[0],rt=nt[1]),this.get("inPlot")){var z=this.get("plotRange");nt=this._constraintPositionInPlot(J,rt,wt,Mt,z,this.get("enterable")),J=nt[0],rt=nt[1]}var q=this.get("markerItems");o.isEmpty(q)||(St=q[0].x,At=q[0].y),this.set("prePosition",nt);var gt=this.get("follow");gt&&(mt.style.left=J+"px",mt.style.top=rt+"px");var et=this.get("crosshairGroup");if(et){var at=this.get("items");et.setPosition(St,At,at)}F.prototype.setPosition.call(this,J,rt)},U}(a);E.exports=H},function(E,T,e){var t=e(68);t.Html=e(262),t.Canvas=e(115),t.Mini=e(264),E.exports=t},function(E,T,e){function t(b){return function(){var g=r(b),m;if(c()){var _=r(this).constructor;m=Reflect.construct(g,arguments,_)}else m=g.apply(this,arguments);return u(this,m)}}function u(b,g){return g&&(typeof g=="object"||typeof g=="function")?g:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},r(b)}function h(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var n=e(3),i=e(115),a=e(19),o=a.FONT_FAMILY,l=n.DomUtil,f=n.MatrixUtil,v=function(b){h(m,b);var g=t(m);function m(){return b.apply(this,arguments)||this}var _=m.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return n.mix({},x,{boardStyle:{x:0,y:0,width:0,height:0,radius:3},valueStyle:{x:0,y:0,text:"",fontFamily:o,fontSize:12,stroke:"#fff",lineWidth:2,fill:"black",textBaseline:"top",textAlign:"start"},padding:{top:5,right:5,bottom:0,left:5},triangleWidth:10,triangleHeight:4})},_._init_=function(){var x=this,y=x.get("padding"),S=x.get("frontPlot"),P=S.addGroup();x.set("container",P);var A=P.addShape("rect",{attrs:n.mix({},x.get("boardStyle"))});x.set("board",A);var O=P.addShape("path",{attrs:{fill:x.get("boardStyle").fill}});x.set("triangleShape",O);var L=P.addGroup();L.move(y.left,y.top);var H=L.addShape("text",{attrs:n.mix({},x.get("valueStyle"))});x.set("valueShape",H)},_.render=function(){var x=this;x.clear();var y=x.get("board"),S=x.get("valueShape"),P=x.get("padding"),A=x.get("items")[0];S&&S.attr("text",A.value);var O=S?S.getBBox():{width:80,height:30},L=P.left+O.width+P.right,H=P.top+O.height+P.bottom;y.attr("width",L),y.attr("height",H),x._centerTriangleShape()},_.clear=function(){var x=this.get("valueShape");x.attr("text","")},_.setPosition=function(x,y,S){var P=this,A=P.get("container"),O=P.get("plotRange"),L=A.getBBox(),H=L.width,F=L.height;if(x-=H/2,S&&(S.name==="point"||S.name==="interval")){var K=S.getBBox().y;y=K}if(y-=F,this.get("inPlot"))x<O.tl.x?(x=O.tl.x,P._leftTriangleShape()):x+H/2>O.tr.x?(x=O.tr.x-H,P._rightTriangleShape()):P._centerTriangleShape(),y<O.tl.y?y=O.tl.y:y+F>O.bl.y&&(y=O.bl.y-F);else{var G=this.get("canvas").get("el"),U=l.getWidth(G),Z=l.getHeight(G);x<0?(x=0,P._leftTriangleShape()):x+H/2>U?(x=U-H,P._rightTriangleShape()):P._centerTriangleShape(),y<0?y=0:y+F>Z&&(y=Z-F)}var J=[1,0,0,0,1,0,0,0,1],rt=f.transform(J,[["t",x,y]]);A.stopAnimate(),A.animate({matrix:rt},this.get("animationDuration"))},_._centerTriangleShape=function(){var x=this.get("triangleShape"),y=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.width,O=P.height,L=[["M",0,0],["L",y,0],["L",y/2,S],["L",0,0],["Z"]];x.attr("path",L),x.move(A/2-y/2,O-1)},_._leftTriangleShape=function(){var x=this.get("triangleShape"),y=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.height,O=[["M",0,0],["L",y,0],["L",0,S+3],["L",0,0],["Z"]];x.attr("path",O),x.move(0,A-3)},_._rightTriangleShape=function(){var x=this.get("triangleShape"),y=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.width,O=P.height,L=[["M",0,0],["L",y,0],["L",y,S+4],["L",0,0],["Z"]];x.attr("path",L),x.move(A-y-1,O-4)},m}(i);E.exports=v},function(E,T,e){var t,u=e(19),s=u.FONT_FAMILY,c="g2-tooltip",r="g2-tooltip-title",h="g2-tooltip-list",n="g2-tooltip-list-item",i="g2-tooltip-marker",a="g2-tooltip-value",o=(t={crosshairs:!1,offset:15},t[""+c]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:s,lineHeight:"20px",padding:"10px 10px 6px 10px"},t[""+r]={marginBottom:"4px"},t[""+h]={margin:0,listStyleType:"none",padding:0},t[""+n]={marginBottom:"4px"},t[""+i]={width:"5px",height:"5px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},t[""+a]={display:"inline-block",float:"right",marginLeft:"30px"},t);E.exports=o},function(E,T,e){"use strict";function t(g){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(_){return typeof _}:t=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},t(g)}function u(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function s(g,m){return m&&(t(m)==="object"||typeof m=="function")?m:c(g)}function c(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function r(g,m){for(var _=0;_<m.length;_++){var M=m[_];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(g,M.key,M)}}function h(g,m,_){return m&&r(g.prototype,m),_&&r(g,_),g}function n(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),m&&i(g,m)}function i(g,m){return i=Object.setPrototypeOf||function(M,x){return M.__proto__=x,M},i(g,m)}function a(g,m,_){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(x,y,S){var P=o(x,y);if(!!P){var A=Object.getOwnPropertyDescriptor(P,y);return A.get?A.get.call(S):A.value}},a(g,m,_||g)}function o(g,m){for(;!Object.prototype.hasOwnProperty.call(g,m)&&(g=l(g),g!==null););return g}function l(g){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},l(g)}var f=e(10),v=e(43),b=function(g){n(m,g),h(m,[{key:"getDefaultCfg",value:function(){var M=a(l(m.prototype),"getDefaultCfg",this).call(this);return f({},M,{start:{x:0,y:0},end:{x:0,y:0},type:"cartesian",isRect:!0})}}]);function m(_){var M;return u(this,m),M=s(this,l(m).call(this,_)),M._init(),M}return h(m,[{key:"_init",value:function(){var M=this.start,x=this.end,y={start:M.x,end:x.x},S={start:M.y,end:x.y};this.x=y,this.y=S}},{key:"convertPoint",value:function(M){var x,y;return this.isTransposed?(x=M.y,y=M.x):(x=M.x,y=M.y),{x:this.convertDim(x,"x"),y:this.convertDim(y,"y")}}},{key:"invertPoint",value:function(M){var x=this.invertDim(M.x,"x"),y=this.invertDim(M.y,"y");return this.isTransposed?{x:y,y:x}:{x,y}}}]),m}(v);E.exports=b},function(E,T,e){"use strict";function t(M){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(y){return typeof y}:t=function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},t(M)}function u(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}function s(M,x){return x&&(t(x)==="object"||typeof x=="function")?x:c(M)}function c(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function r(M,x){for(var y=0;y<x.length;y++){var S=x[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(M,S.key,S)}}function h(M,x,y){return x&&r(M.prototype,x),y&&r(M,y),M}function n(M,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(x&&x.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),x&&i(M,x)}function i(M,x){return i=Object.setPrototypeOf||function(S,P){return S.__proto__=P,S},i(M,x)}function a(M,x,y){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(P,A,O){var L=o(P,A);if(!!L){var H=Object.getOwnPropertyDescriptor(L,A);return H.get?H.get.call(O):H.value}},a(M,x,y||M)}function o(M,x){for(;!Object.prototype.hasOwnProperty.call(M,x)&&(M=l(M),M!==null););return M}function l(M){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},l(M)}var f=e(56),v=e(55),b=e(10),g=e(43),m=f.vec2,_=function(M){n(x,M),h(x,[{key:"getDefaultCfg",value:function(){var S=a(l(x.prototype),"getDefaultCfg",this).call(this);return b({},S,{startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,innerRadius:0,type:"helix",isHelix:!0})}}]);function x(y){var S;return u(this,x),S=s(this,l(x).call(this,y)),S._init(),S}return h(x,[{key:"_init",value:function(){var S=this.width,P=this.height,A=this.radius,O=this.innerRadius,L=this.startAngle,H=this.endAngle,F=(H-L)/(2*Math.PI)+1,K=Math.min(S,P)/2;A&&A>=0&&A<=1&&(K=K*A);var G=Math.floor(K*(1-O)/F),U=G/(Math.PI*2),Z={start:L,end:H},J={start:O*K,end:O*K+G*.99};this.a=U,this.d=G,this.x=Z,this.y=J}},{key:"getCenter",value:function(){return this.center}},{key:"convertPoint",value:function(S){var P=this.a,A=this.center,O,L;this.isTransposed?(O=S.y,L=S.x):(O=S.x,L=S.y);var H=this.convertDim(O,"x"),F=P*H,K=this.convertDim(L,"y");return{x:A.x+Math.cos(H)*(F+K),y:A.y+Math.sin(H)*(F+K)}}},{key:"invertPoint",value:function(S){var P=this.center,A=this.a,O=this.d+this.y.start,L=m.subtract([],[S.x,S.y],[P.x,P.y]),H=m.angleTo(L,[1,0],!0),F=H*A;m.length(L)<F&&(F=m.length(L));var K=Math.floor((m.length(L)-F)/O);H=2*K*Math.PI+H;var G=A*H,U=m.length(L)-G;U=v(U,0)?0:U;var Z=this.invertDim(H,"x"),J=this.invertDim(U,"y");Z=v(Z,0)?0:Z,J=v(J,0)?0:J;var rt={};return rt.x=this.isTransposed?J:Z,rt.y=this.isTransposed?Z:J,rt}}]),x}(g);E.exports=_},function(E,T,e){"use strict";var t=e(43);t.Cartesian=e(266),t.Rect=t.Cartesian,t.Polar=e(269),t.Helix=e(267),E.exports=t},function(E,T,e){"use strict";function t(y){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(P){return typeof P}:t=function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},t(y)}function u(y,S){if(!(y instanceof S))throw new TypeError("Cannot call a class as a function")}function s(y,S){return S&&(t(S)==="object"||typeof S=="function")?S:c(y)}function c(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function r(y,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}function h(y,S,P){return S&&r(y.prototype,S),P&&r(y,P),y}function n(y,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(S&&S.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),S&&i(y,S)}function i(y,S){return i=Object.setPrototypeOf||function(A,O){return A.__proto__=O,A},i(y,S)}function a(y,S,P){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(O,L,H){var F=o(O,L);if(!!F){var K=Object.getOwnPropertyDescriptor(F,L);return K.get?K.get.call(H):K.value}},a(y,S,P||y)}function o(y,S){for(;!Object.prototype.hasOwnProperty.call(y,S)&&(y=l(y),y!==null););return y}function l(y){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},l(y)}var f=e(56),v=e(55),b=e(10),g=e(43),m=f.mat3,_=f.vec2,M=f.vec3,x=function(y){n(S,y),h(S,[{key:"getDefaultCfg",value:function(){var A=a(l(S.prototype),"getDefaultCfg",this).call(this);return b({},A,{startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,type:"polar",isPolar:!0})}}]);function S(P){var A;return u(this,S),A=s(this,l(S).call(this,P)),A._init(),A}return h(S,[{key:"_init",value:function(){for(var A=this.radius,O=this.innerRadius,L=this.center,H=this.startAngle,F=this.endAngle;F<H;)F+=Math.PI*2;this.endAngle=F;var K=this.getOneBox(),G=K.maxX-K.minX,U=K.maxY-K.minY,Z=Math.abs(K.minX)/G,J=Math.abs(K.minY)/U,rt=this.width,vt=this.height,mt,ut;vt/U>rt/G?(mt=rt/G,ut={x:L.x-(.5-Z)*rt,y:L.y-(.5-J)*mt*U}):(mt=vt/U,ut={x:L.x-(.5-Z)*mt*G,y:L.y-(.5-J)*vt}),A?A>0&&A<=1?A=mt*A:(A<=0||A>mt)&&(A=mt):A=mt;var Rt={start:H,end:F},Ft={start:O*A,end:A};this.x=Rt,this.y=Ft,this.radius=A,this.circleCentre=ut,this.center=ut}},{key:"getCenter",value:function(){return this.circleCentre}},{key:"getOneBox",value:function(){var A=this.startAngle,O=this.endAngle;if(Math.abs(O-A)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var L=[0,Math.cos(A),Math.cos(O)],H=[0,Math.sin(A),Math.sin(O)],F=Math.min(A,O);F<Math.max(A,O);F+=Math.PI/18)L.push(Math.cos(F)),H.push(Math.sin(F));return{minX:Math.min.apply(Math,L),maxX:Math.max.apply(Math,L),minY:Math.min.apply(Math,H),maxY:Math.max.apply(Math,H)}}},{key:"getRadius",value:function(){return this.radius}},{key:"convertPoint",value:function(A){var O=this.getCenter(),L=this.isTransposed?A.y:A.x,H=this.isTransposed?A.x:A.y;return L=this.convertDim(L,"x"),H=this.convertDim(H,"y"),{x:O.x+Math.cos(L)*H,y:O.y+Math.sin(L)*H}}},{key:"invertPoint",value:function(A){var O=this.getCenter(),L=[A.x-O.x,A.y-O.y],H=this.x,F=[1,0,0,0,1,0,0,0,1];m.rotate(F,F,H.start);var K=[1,0,0];M.transformMat3(K,K,F),K=[K[0],K[1]];var G=_.angleTo(K,L,H.end<H.start);v(G,Math.PI*2)&&(G=0);var U=_.length(L),Z=G/(H.end-H.start);Z=H.end-H.start>0?Z:-Z;var J=this.invertDim(U,"y"),rt={};return rt.x=this.isTransposed?J:Z,rt.y=this.isTransposed?Z:J,rt}}]),S}(g);E.exports=x},function(E,T,e){var t=e(0),u=e(16),s=t.PathUtil;function c(S){var P=S.start,A=S.end,O=S.getWidth(),L=S.getHeight(),H=200,F,K,G,U,Z;return S.isPolar?(U=S.getRadius(),G=S.getCenter(),F=S.startAngle,K=S.endAngle,Z=new u.Fan({attrs:{x:G.x,y:G.y,rs:0,re:U+H,startAngle:F,endAngle:F}}),Z.endState={endAngle:K}):(Z=new u.Rect({attrs:{x:P.x-H,y:A.y-H,width:S.isTransposed?O+H*2:0,height:S.isTransposed?0:L+H*2}}),S.isTransposed?Z.endState={height:L+H*2}:Z.endState={width:O+H*2}),Z.isClip=!0,Z}function r(S){if(t.isEmpty(S))return null;var P=S[0].x,A=S[0].x,O=S[0].y,L=S[0].y;return t.each(S,function(H){P=P>H.x?H.x:P,A=A<H.x?H.x:A,O=O>H.y?H.y:O,L=L<H.y?H.y:L}),{minX:P,maxX:A,minY:O,maxY:L,centerX:(P+A)/2,centerY:(O+L)/2}}function h(S,P){var A=S.points||S.get("origin").points,O=r(A),L,H,F=P.startAngle,K=P.endAngle,G=K-F;return P.isTransposed?(L=O.maxY*G,H=O.minY*G):(L=O.maxX*G,H=O.minX*G),L+=F,H+=F,{startAngle:H,endAngle:L}}function n(S,P,A){var O={};return S.delay&&(O.delay=t.isFunction(S.delay)?S.delay(P,A):S.delay),O.easing=t.isFunction(S.easing)?S.easing(P,A):S.easing,O.duration=t.isFunction(S.duration)?S.duration(P,A):S.duration,O.callback=S.callback,O}function i(S,P){var A=S._id,O=S.get("index"),L=S.getBBox(),H=S.get("origin").points,F=(L.minX+L.maxX)/2,K;H[0].y-H[1].y<=0?K=L.maxY:K=L.minY;var G=[F,K,1];S.apply(G),S.attr("transform",[["t",-F,-K],["s",1,.01],["t",F,K]]);var U={transform:[["t",-F,-K],["s",1,100],["t",F,K]]},Z=n(P,O,A,U);S.animate(U,Z.duration,Z.easing,Z.callback,Z.delay)}function a(S,P){var A=S._id,O=S.get("index"),L=S.getBBox(),H=S.get("origin").points,F,K=(L.minY+L.maxY)/2;H[0].y-H[1].y>0?F=L.maxX:F=L.minX;var G=[F,K,1];S.apply(G),S.attr({transform:[["t",-F,-K],["s",.01,1],["t",F,K]]});var U={transform:[["t",-F,-K],["s",100,1],["t",F,K]]},Z=n(P,O,A,U);S.animate(U,Z.duration,Z.easing,Z.callback,Z.delay)}function o(S,P){var A={lineWidth:0,opacity:0},O=S._id,L=S.get("index"),H=n(P,L,O,A);S.animate(A,H.duration,H.easing,function(){S.remove()},H.delay)}function l(S,P,A){var O=S._id,L=S.get("index"),H,F;if(A.isPolar&&S.name!=="point")H=A.getCenter().x,F=A.getCenter().y;else{var K=S.getBBox();H=(K.minX+K.maxX)/2,F=(K.minY+K.maxY)/2}var G=[H,F,1];S.apply(G),S.attr({transform:[["t",-H,-F],["s",.01,.01],["t",H,F]]});var U={transform:[["t",-H,-F],["s",100,100],["t",H,F]]},Z=n(P,L,O,U);S.animate(U,Z.duration,Z.easing,Z.callback,Z.delay)}function f(S,P,A){var O=S._id,L=S.get("index"),H,F;if(A.isPolar&&S.name!=="point")H=A.getCenter().x,F=A.getCenter().y;else{var K=S.getBBox();H=(K.minX+K.maxX)/2,F=(K.minY+K.maxY)/2}var G=[H,F,1];S.apply(G);var U={transform:[["t",-H,-F],["s",.01,.01],["t",H,F]]},Z=n(P,L,O,U);S.animate(U,Z.duration,Z.easing,function(){S.remove()},Z.delay)}function v(S,P){if(S.get("type")==="path"){var A=S._id,O=S.get("index"),L=s.pathToAbsolute(S.attr("path"));S.attr("path",[L[0]]);var H={path:L},F=n(P,O,A,H);S.animate(H,F.duration,F.easing,F.callback,F.delay)}}function b(S,P){if(S.get("type")==="path"){var A=S._id,O=S.get("index"),L=s.pathToAbsolute(S.attr("path")),H={path:[L[0]]},F=n(P,O,A,H);S.animate(H,F.duration,F.easing,function(){S.remove()},F.delay)}}function g(S,P,A,O,L){var H=c(A),F=S.get("canvas"),K=S._id,G=S.get("index"),U;O?(H.attr("startAngle",O),H.attr("endAngle",O),U={endAngle:L}):U=H.endState,H.set("canvas",F),S.attr("clip",H),S.setSilent("animating",!0);var Z=n(P,G,K,U);H.animate(U,Z.duration,Z.easing,function(){S&&!S.get("destroyed")&&(S.attr("clip",null),S.setSilent("cacheShape",null),S.setSilent("animating",!1),H.remove())},Z.delay)}function m(S,P){var A=S._id,O=S.get("index"),L=t.isNil(S.attr("fillOpacity"))?1:S.attr("fillOpacity"),H=t.isNil(S.attr("strokeOpacity"))?1:S.attr("strokeOpacity");S.attr("fillOpacity",0),S.attr("strokeOpacity",0);var F={fillOpacity:L,strokeOpacity:H},K=n(P,O,A,F);S.animate(F,K.duration,K.easing,K.callback,K.delay)}function _(S,P){var A=S._id,O=S.get("index"),L={fillOpacity:0,strokeOpacity:0},H=n(P,O,A,L);S.animate(L,H.duration,H.easing,function(){S.remove()},H.delay)}function M(S,P,A){var O=h(S,A),L=O.endAngle,H=O.startAngle;g(S,P,A,H,L)}function x(S,P,A){if(S.name==="line"){var O=S.get("canvas"),L=S.get("cacheShape"),H=S._id,F=S.get("index"),K=new u.Rect({attrs:{x:A.start.x,y:A.end.y,width:A.getWidth(),height:A.getHeight()}});K.isClip=!0,K.set("canvas",O);var G=s.pathToAbsolute(L.attrs.path),U=s.pathToAbsolute(S.attr("path")),Z=G[1][1]-G[0][1],J=G[G.length-1][1]+Z,rt=U[U.length-1][2],vt=G.concat([["L",J,rt]]),mt=[0,0,1];S.apply(mt),S.attr("clip",K),S.attr("path",vt);var ut={transform:[["t",-Z,0]]},Rt=n(P,F,H,ut);S.animate(ut,Rt.duration,Rt.easing,function(){S&&!S.get("destroyed")&&(S.attr("path",U),S.attr({transform:[["t",Z,0]]}),S.attr("clip",null),S.setSilent("cacheShape",null),K.remove())},Rt.delay)}}function y(S,P,A){if(S.name==="area"){var O=S.get("canvas"),L=S.get("cacheShape"),H=S._id,F=S.get("index"),K=new u.Rect({attrs:{x:A.start.x,y:A.end.y,width:A.getWidth(),height:A.getHeight()}});K.isClip=!0,K.set("canvas",O);var G=s.pathToAbsolute(L.attrs.path),U=s.pathToAbsolute(S.attr("path")),Z=G[1][1]-G[0][1],J=Math.floor(G.length/2),rt=G[J-1][1]+Z,vt=U[J-1][2],mt=[].concat(G.slice(0,J),[["L",rt,vt],["L",rt,U[J][2]]],G.slice(J)),ut=[0,0,1];S.apply(ut),S.attr("clip",K),S.attr("path",mt);var Rt={transform:[["t",-Z,0]]},Ft=n(P,F,H,Rt);S.animate(Rt,Ft.duration,Ft.easing,function(){S&&!S.get("destroyed")&&(S.attr("path",U),S.attr({transform:[["t",Z,0]]}),S.attr("clip",null),S.setSilent("cacheShape",null),K.remove())},Ft.delay)}}E.exports={enter:{clipIn:g,zoomIn:l,pathIn:v,scaleInY:i,scaleInX:a,fanIn:M,fadeIn:m},leave:{lineWidthOut:o,zoomOut:f,pathOut:b,fadeOut:_},appear:{clipIn:g,zoomIn:l,pathIn:v,scaleInY:i,scaleInX:a,fanIn:M,fadeIn:m},update:{fadeIn:m,fanIn:M,lineSlideLeft:x,areaSlideLeft:y}}},function(E,T,e){var t=e(0),u=e(119),s=t.MatrixUtil,c=s.mat3;function r(o,l){var f=[];if(o.get("animate")===!1)return[];var v=o.get("children");return t.each(v,function(b){if(b.isGroup)f=f.concat(r(b,l));else if(b.isShape&&b._id){var g=b._id;g=g.split("-")[0],g===l&&f.push(b)}}),f}function h(o){var l={};return t.each(o,function(f){if(!(!f._id||f.isClip)){var v=f._id;l[v]={_id:v,type:f.get("type"),attrs:t.cloneDeep(f.attr()),name:f.name,index:f.get("index"),animateCfg:f.get("animateCfg"),coord:f.get("coord")}}}),l}function n(o,l,f,v){var b;return v?b=u.Action[f][v]:b=u.getAnimation(o,l,f),b}function i(o,l,f){var v=u.getAnimateCfg(o,l);return f&&f[l]?t.deepMix({},v,f[l]):v}function a(o,l,f,v){var b,g,m=!1;if(v){var _=[],M=[];t.each(l,function(x){var y=o[x._id];y?(x.setSilent("cacheShape",y),_.push(x),delete o[x._id]):M.push(x)}),t.each(o,function(x){var y=x.name,S=x.coord,P=x._id,A=x.attrs,O=x.index,L=x.type;if(g=i(y,"leave",x.animateCfg),b=n(y,S,"leave",g.animation),t.isFunction(b)){var H=f.addShape(L,{attrs:A,index:O});if(H._id=P,H.name=y,S&&y!=="label"){var F=H.getMatrix(),K=c.multiply([],F,S.matrix);H.setMatrix(K)}m=!0,b(H,g,S)}}),t.each(_,function(x){var y=x.name,S=x.get("coord"),P=x.get("cacheShape").attrs;if(!t.isEqual(P,x.attr())){if(g=i(y,"update",x.get("animateCfg")),b=n(y,S,"update",g.animation),t.isFunction(b))b(x,g,S);else{var A=t.cloneDeep(x.attr());x.attr(P),x.animate(A,g.duration,g.easing,function(){x.setSilent("cacheShape",null)})}m=!0}}),t.each(M,function(x){var y=x.name,S=x.get("coord");g=i(y,"enter",x.get("animateCfg")),b=n(y,S,"enter",g.animation),t.isFunction(b)&&(b(x,g,S),m=!0)})}else t.each(l,function(x){var y=x.name,S=x.get("coord");g=i(y,"appear",x.get("animateCfg")),b=n(y,S,"appear",g.animation),t.isFunction(b)&&(b(x,g,S),m=!0)});return m}E.exports={execAnimation:function(l,f){var v=l.get("middlePlot"),b=l.get("backPlot"),g=l.get("_id"),m=l.get("canvas"),_=m.get(g+"caches")||[];_.length===0&&(f=!1);var M=r(v,g),x=r(b,g),y=M.concat(x);m.setSilent(g+"caches",h(y));var S;f?S=a(_,y,m,f):S=a(_,M,m,f),S||m.draw()}}},function(E,T,e){var t=e(0),u=e(30),s=u.Axis,c=t.MatrixUtil.vec2;function r(a){var o=[];if(a.length>0){o=a.slice(0);var l=o[0],f=o[o.length-1];l.value!==0&&o.unshift({value:0}),f.value!==1&&o.push({value:1})}return o}function h(a,o,l){var f=[];return a.length<1||(a.length>=2&&o&&l&&f.push({text:"",tickValue:"",value:0}),a[0].value!==0&&f.push({text:"",tickValue:"",value:0}),f=f.concat(a),f[f.length-1].value!==1&&f.push({text:"",tickValue:"",value:1})),f}function n(a,o){return o===void 0&&(o=0),a==="middle"&&(o=.5),a.includes("%")&&(o=parseInt(a,10)/100),o}var i=function(){function a(l){this.visible=!0,this.canvas=null,this.container=null,this.coord=null,this.options=null,this.axes=[],t.mix(this,l)}var o=a.prototype;return o._isHide=function(f){var v=this.options;return!!(v&&v[f]===!1)},o._getMiddleValue=function(f,v,b,g){if(f===0&&!g)return 0;if(f===1)return 1;var m=v[b+1].value;return!g&&m===1?1:(f+m)/2},o._getLineRange=function(f,v,b,g){var m,_,M,x=v.field,y=this.options,S="";if(y[x]&&y[x].position&&(S=y[x].position),b==="x"){var P=S==="top"?1:0;P=n(S,P),m={x:0,y:P},_={x:1,y:P},M=!1}else{if(g){var A=S==="left"?0:1;A=n(S,A),m={x:A,y:0},_={x:A,y:1}}else{var O=S==="right"?1:0;O=n(S,O),m={x:O,y:0},_={x:O,y:1}}M=!0}return m=f.convert(m),_=f.convert(_),{start:m,end:_,isVertical:M}},o._getLineCfg=function(f,v,b,g){var m,_=this._getLineRange(f,v,b,g),M=_.isVertical,x=_.start,y=_.end,S=f.center;return f.isTransposed&&(M=!M),M&&x.x>S.x||!M&&x.y>S.y?m=1:m=-1,{isVertical:M,factor:m,start:x,end:y}},o._getCircleCfg=function(f){var v={},b=f.x,g=f.y,m=g.start>g.end,_;f.isTransposed?_={x:m?0:1,y:0}:_={x:0,y:m?0:1},_=f.convert(_);var M=f.circleCentre,x=[_.x-M.x,_.y-M.y],y=[1,0],S;_.y>M.y?S=c.angle(x,y):S=c.angle(x,y)*-1;var P=S+(b.end-b.start);return v.startAngle=S,v.endAngle=P,v.center=M,v.radius=Math.sqrt(Math.pow(_.x-M.x,2)+Math.pow(_.y-M.y,2)),v.inner=f.innerRadius||0,v},o._getRadiusCfg=function(f){var v=f.x.start,b=v<0?-1:1,g,m;return f.isTransposed?(g={x:0,y:0},m={x:1,y:0}):(g={x:0,y:0},m={x:0,y:1}),{factor:b,start:f.convert(g),end:f.convert(m)}},o._getAxisPosition=function(f,v,b,g){var m="",_=this.options;if(_[g]&&_[g].position)m=_[g].position;else{var M=f.type;f.isRect?v==="x"?m="bottom":v==="y"&&(b?m="right":m="left"):M==="helix"?m="helix":v==="x"?m=f.isTransposed?"radius":"circle":m=f.isTransposed?"circle":"radius"}return m},o._getAxisDefaultCfg=function(f,v,b,g){var m=this,_=m.viewTheme,M={},x=m.options,y=v.field;if(M=t.deepMix({},_.axis[g],M,x[y]),M.viewTheme=_,M.title){var S=t.isPlainObject(M.title)?M.title:{};S.text=S.text||v.alias||y,t.deepMix(M,{title:S})}return M.ticks=v.getTicks(),f.isPolar&&!v.isCategory&&b==="x"&&Math.abs(f.endAngle-f.startAngle)===Math.PI*2&&M.ticks.pop(),M.coord=f,M.label&&t.isNil(M.label.autoRotate)&&(M.label.autoRotate=!0),x.hasOwnProperty("xField")&&x.xField.hasOwnProperty("grid")&&M.position==="left"&&t.deepMix(M,x.xField),M},o._getAxisCfg=function(f,v,b,g,m,_){m===void 0&&(m="");var M=this,x=M._getAxisPosition(f,g,m,v.field),y=M._getAxisDefaultCfg(f,v,g,x);if(!t.isEmpty(y.grid)&&b){var S=[],P=[],A=r(b.getTicks());if(A.length){var O=h(y.ticks,v.isLinear,y.grid.align==="center");t.each(O,function(L,H){P.push(L.tickValue);var F=[],K=L.value;if(y.grid.align==="center"&&(K=M._getMiddleValue(K,O,H,v.isLinear)),!t.isNil(K)){var G=f.x,U=f.y;t.each(A,function(Z){var J=g==="x"?K:Z.value,rt=g==="x"?Z.value:K,vt=f.convert({x:J,y:rt});if(f.isPolar){var mt=f.circleCentre;U.start>U.end&&(rt=1-rt),vt.flag=G.start>G.end?0:1,vt.radius=Math.sqrt(Math.pow(vt.x-mt.x,2)+Math.pow(vt.y-mt.y,2))}F.push(vt)}),S.push({_id:_+"-"+g+m+"-grid-"+L.tickValue,points:F})}})}y.grid.items=S,y.grid.tickValues=P}return y.type=v.type,y},o._getHelixCfg=function(f){for(var v={},b=f.a,g=f.startAngle,m=f.endAngle,_=100,M=[],x=0;x<=_;x++){var y=f.convert({x:x/100,y:0});M.push(y.x),M.push(y.y)}var S=f.convert({x:0,y:0});return v.a=b,v.startAngle=g,v.endAngle=m,v.crp=M,v.axisStart=S,v.center=f.center,v.inner=f.y.start,v},o._drawAxis=function(f,v,b,g,m,_,M){var x=this.container,y=this.canvas,S,P;f.type==="cartesian"?(S=s.Line,P=this._getLineCfg(f,v,g,M)):f.type==="helix"&&g==="x"?(S=s.Helix,P=this._getHelixCfg(f)):g==="x"?(S=s.Circle,P=this._getCircleCfg(f)):(S=s.Line,P=this._getRadiusCfg(f));var A=this._getAxisCfg(f,v,b,g,M,m);A=t.mix({},A,P),g==="y"&&_&&_.get("type")==="circle"&&(A.circle=_),A._id=m+"-"+g,t.isNil(M)||(A._id=m+"-"+g+M),t.mix(A,{canvas:y,group:x.addGroup({viewId:m})});var O=new S(A);return O.render(),this.axes.push(O),O},o.createAxis=function(f,v,b){var g=this,m=this.coord,_=m.type;if(_!=="theta"&&!(_==="polar"&&m.isTransposed)){var M;f&&!g._isHide(f.field)&&(M=g._drawAxis(m,f,v[0],"x",b)),!t.isEmpty(v)&&_!=="helix"&&t.each(v,function(x,y){g._isHide(x.field)||g._drawAxis(m,x,f,"y",b,M,y)})}},o.changeVisible=function(f){var v=this.axes;t.each(v,function(b){b.set("visible",f)})},o.clear=function(){var f=this,v=f.axes;t.each(v,function(b){b.destroy()}),f.axes=[]},a}();E.exports=i},function(E,T,e){var t=e(0),u=e(268),s=function(){function c(h){this.type="rect",this.actions=[],this.cfg={},t.mix(this,h),this.option=h||{}}var r=c.prototype;return r.reset=function(n){return this.actions=n.actions||[],this.type=n.type,this.cfg=n.cfg,this.option.actions=this.actions,this.option.type=this.type,this.option.cfg=this.cfg,this},r._execActions=function(n){var i=this.actions;t.each(i,function(a){var o=a[0];n[o](a[1],a[2])})},r.hasAction=function(n){var i=this.actions,a=!1;return t.each(i,function(o){if(n===o[0])return a=!0,!1}),a},r.createCoord=function(n,i){var a=this,o=a.type,l=a.cfg,f,v,b=t.mix({start:n,end:i},l);return o==="theta"?(f=u.Polar,a.hasAction("transpose")||a.transpose(),v=new f(b),v.type=o):(f=u[t.upperFirst(o||"")]||u.Rect,v=new f(b)),a._execActions(v),v},r.rotate=function(n){return n=n*Math.PI/180,this.actions.push(["rotate",n]),this},r.reflect=function(n){return this.actions.push(["reflect",n]),this},r.scale=function(n,i){return this.actions.push(["scale",n,i]),this},r.transpose=function(){return this.actions.push(["transpose"]),this},c}();E.exports=s},function(E,T,e){var t=e(0);function u(r,h){if(t.isNil(r)||t.isNil(h))return!1;var n=r.get("origin"),i=h.get("origin");return t.isNil(n)&&t.isNil(i)?t.isEqual(r,h):t.isEqual(n,i)}function s(r){r.shape&&r.shape.get("origin")&&(r.data=r.shape.get("origin"))}var c=function(){function r(n){this.view=null,this.canvas=null,t.assign(this,n),this._init()}var h=r.prototype;return h._init=function(){this.pixelRatio=this.canvas.get("pixelRatio")},h._getShapeEventObj=function(i){return{x:i.x/this.pixelRatio,y:i.y/this.pixelRatio,target:i.target,toElement:i.event.toElement||i.event.relatedTarget}},h._getShape=function(i,a){var o=this.view,l=o.get("canvas");return l.getShape(i,a)},h._getPointInfo=function(i){var a=this.view,o={x:i.x/this.pixelRatio,y:i.y/this.pixelRatio},l=a.getViewsByPoint(o);return o.views=l,o},h._getEventObj=function(i,a,o){return{x:a.x,y:a.y,target:i.target,toElement:i.event.toElement||i.event.relatedTarget,views:o}},h.bindEvents=function(){var i=this.canvas;i.on("mousedown",t.wrapBehavior(this,"onDown")),i.on("mousemove",t.wrapBehavior(this,"onMove")),i.on("mouseleave",t.wrapBehavior(this,"onOut")),i.on("mouseup",t.wrapBehavior(this,"onUp")),i.on("click",t.wrapBehavior(this,"onClick")),i.on("dblclick",t.wrapBehavior(this,"onClick")),i.on("touchstart",t.wrapBehavior(this,"onTouchstart")),i.on("touchmove",t.wrapBehavior(this,"onTouchmove")),i.on("touchend",t.wrapBehavior(this,"onTouchend"))},h._triggerShapeEvent=function(i,a,o){if(i&&i.name&&!i.get("destroyed")){var l=this.view;if(l.isShapeInView(i)){var f=i.name+":"+a;o.view=l,o.appendInfo=i.get("appendInfo"),l.emit(f,o);var v=l.get("parent");v&&v.emit(f,o)}}},h.onDown=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,s(o),a.emit("mousedown",o),this._triggerShapeEvent(this.currentShape,"mousedown",o)},h.onMove=function(i){var a=this,o=a.view,l=a.currentShape;l&&l.get("destroyed")&&(l=null,a.currentShape=null);var f=a._getShape(i.x,i.y)||i.currentTarget,v=a._getShapeEventObj(i);if(v.shape=f,s(v),o.emit("mousemove",v),a._triggerShapeEvent(f,"mousemove",v),l&&!u(l,f)){var b=a._getShapeEventObj(i);b.shape=l,b.toShape=f,s(b),a._triggerShapeEvent(l,"mouseleave",b)}if(f&&!u(l,f)){var g=a._getShapeEventObj(i);g.shape=f,g.fromShape=l,s(g),a._triggerShapeEvent(f,"mouseenter",g)}a.currentShape=f;var m=a._getPointInfo(i),_=a.curViews||[];_.length===0&&m.views.length&&o.emit("plotenter",a._getEventObj(i,m,m.views)),_.length&&m.views.length===0&&o.emit("plotleave",a._getEventObj(i,m,_)),m.views.length&&(v=a._getEventObj(i,m,m.views),v.shape=f,s(v),o.emit("plotmove",v)),a.curViews=m.views},h.onOut=function(i){var a=this,o=a.view,l=a._getPointInfo(i),f=a.curViews||[],v=a._getEventObj(i,l,f);a.curViews&&a.curViews.length!==0&&(!v.toElement||v.toElement.tagName!=="CANVAS")&&(o.emit("plotleave",v),a.curViews=[])},h.onUp=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,a.emit("mouseup",o),this._triggerShapeEvent(this.currentShape,"mouseup",o)},h.onClick=function(i){var a=this,o=a.view,l=a._getShape(i.x,i.y)||i.currentTarget,f=a._getShapeEventObj(i);f.shape=l,s(f),o.emit("click",f),a._triggerShapeEvent(l,i.type,f),a.currentShape=l;var v=a._getPointInfo(i),b=v.views;if(!t.isEmpty(b)){var g=a._getEventObj(i,v,b);if(a.currentShape){var m=a.currentShape;g.shape=m,s(g)}i.type==="dblclick"?(o.emit("plotdblclick",g),o.emit("dblclick",f)):o.emit("plotclick",g)}},h.onTouchstart=function(i){var a=this.view,o=this._getShape(i.x,i.y)||i.currentTarget,l=this._getShapeEventObj(i);l.shape=o,s(l),a.emit("touchstart",l),this._triggerShapeEvent(o,"touchstart",l),this.currentShape=o},h.onTouchmove=function(i){var a=this.view,o=this._getShape(i.x,i.y)||i.currentTarget,l=this._getShapeEventObj(i);l.shape=o,s(l),a.emit("touchmove",l),this._triggerShapeEvent(o,"touchmove",l),this.currentShape=o},h.onTouchend=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,s(o),a.emit("touchend",o),this._triggerShapeEvent(this.currentShape,"touchend",o)},h.clearEvents=function(){var i=this.canvas;i.off("mousemove",t.getWrapBehavior(this,"onMove")),i.off("mouseleave",t.getWrapBehavior(this,"onOut")),i.off("mousedown",t.getWrapBehavior(this,"onDown")),i.off("mouseup",t.getWrapBehavior(this,"onUp")),i.off("click",t.getWrapBehavior(this,"onClick")),i.off("dblclick",t.getWrapBehavior(this,"onClick")),i.off("touchstart",t.getWrapBehavior(this,"onTouchstart")),i.off("touchmove",t.getWrapBehavior(this,"onTouchmove")),i.off("touchend",t.getWrapBehavior(this,"onTouchend"))},r}();E.exports=c},function(E,T,e){var t=e(0),u=e(280),s=function(){function c(h){this.guides=[],this.options=[],this.xScales=null,this.yScales=null,this.view=null,this.viewTheme=null,this.frontGroup=null,this.backGroup=null,t.mix(this,h)}var r=c.prototype;return r._creatGuides=function(){var n=this,i=this.options,a=this.xScales,o=this.yScales,l=this.view,f=this.viewTheme;return this.backContainer&&l&&(this.backGroup=this.backContainer.addGroup({viewId:l.get("_id")})),this.frontContainer&&l&&(this.frontGroup=this.frontContainer.addGroup({viewId:l.get("_id")})),i.forEach(function(v){var b=v.type,g=t.deepMix({xScales:a,yScales:o,viewTheme:f},f?f.guide[b]:{},v);b=t.upperFirst(b);var m=new u[b](g);n.guides.push(m)}),n.guides},r.line=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"line"},n)),this},r.arc=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"arc"},n)),this},r.text=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"text"},n)),this},r.image=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"image"},n)),this},r.region=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"region"},n)),this},r.regionFilter=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"regionFilter"},n)),this},r.dataMarker=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"dataMarker"},n)),this},r.dataRegion=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"dataRegion"},n)),this},r.html=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"html"},n)),this},r.render=function(n){var i=this,a=i.view,o=a&&a.get("data"),l=i._creatGuides();t.each(l,function(f){var v;f.get("top")?v=i.frontGroup||i.frontContainer:v=i.backGroup||i.backContainer,f.render(n,v,o,a)})},r.clear=function(){this.options=[],this.reset()},r.changeVisible=function(n){var i=this.guides;t.each(i,function(a){a.changeVisible(n)})},r.reset=function(){var n=this.guides;t.each(n,function(i){i.clear()}),this.guides=[],this.backGroup&&this.backGroup.remove(),this.frontGroup&&this.frontGroup.remove()},c}();E.exports=s},function(E,T,e){function t(){return t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(_[y]=x[y])}return _},t.apply(this,arguments)}var u=e(0),s=e(30),c=s.Legend,r=e(282),h=e(9),n=e(122),i=e(124),a=e(5),o="_origin",l=4.5,f=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,v=["cross","tick","plus","hyphen","line","hollowCircle","hollowSquare","hollowDiamond","hollowTriangle","hollowTriangleDown","hollowHexagon","hollowBowtie"];function b(_,M,x){var y;return u.isNil(x)?!1:(_=x.translate(_),M=x.translate(M),x.isCategory?y=_===M:y=Math.abs(_-M)<=1,y)}function g(_,M){var x;return u.each(_,function(y){if(y.get("visible")){var S=y.getYScale();if(S.field===M){x=y;return}}}),x}var m=function(){function _(x){var y=this;y.options={},u.mix(y,x),y.clear();var S=y.chart;y.container=S.get("frontPlot"),y.plotRange=S.get("plotRange")}var M=_.prototype;return M.clear=function(){var y=this.legends;this.backRange=null,u.each(y,function(S){u.each(S,function(P){P.destroy()})}),this.legends={}},M.getBackRange=function(){var y=this.backRange;if(!y){var S=this.chart.get("backPlot");y=n(S,i(this.chart.get("plotRange")));var P=this.plotRange;y.maxX-y.minX<P.br.x-P.tl.x&&y.maxY-y.minY<P.br.y-P.tl.y&&(y={minX:P.tl.x,minY:P.tl.y,maxX:P.br.x,maxY:P.br.y}),this.backRange=y}return y},M._isFieldInView=function(y,S,P){var A=!1,O=P.get("scales"),L=O[y];return L&&L.values&&(A=u.inArray(L.values,S)),A},M._bindClickEvent=function(y,S,P){var A=this,O=A.chart,L=O.get("views"),H=S.field,F=A.options;y.on("itemclick",function(K){if(F.onClick&&F.defaultClickHandlerEnabled!==!0)F.onClick(K);else{var G=K.item,U=K.checked,Z=y.get("selectedMode")==="single",J=G.dataValue;U?(u.Array.remove(P,J),A._isFieldInView(H,J,O)&&O.filter(H,function(rt){return Z?rt===J:!u.inArray(P,rt)}),u.each(L,function(rt){A._isFieldInView(H,J,rt)&&rt.filter(H,function(vt){return Z?vt===J:!u.inArray(P,vt)})})):Z||(P.push(J),A._isFieldInView(H,J,O)&&O.filter(H,function(rt){return!u.inArray(P,rt)}),u.each(L,function(rt){A._isFieldInView(H,J,rt)&&rt.filter(H,function(vt){return!u.inArray(P,vt)})})),F.onClick&&F.onClick(K),O.set("keepLegend",!0),O.set("keepPadding",!0),O.repaint(),O.set("keepPadding",!1),O.set("keepLegend",!1)}})},M._bindClickEventForMix=function(y){var S=this,P=S.chart,A=P.getAllGeoms();y.on("itemclick",function(O){var L=O.item.field,H=O.checked;H?u.each(A,function(F){var K=F.getYScale().field;K===L&&F.show()}):u.each(A,function(F){var K=F.getYScale().field;K===L&&F.hide()})})},M._filterLabels=function(y,S,P){if(y.get("gLabel"))y.get("gLabel").set("visible",P);else{var A=S.get("labelCfg");if(A&&A.fields&&A.fields.length>0){var O=S.getXScale(),L=S.getYScale(),H=O.field,F=L.field,K=y.get("origin")._origin,G=S.get("labelContainer"),U=G.get("labelsGroup").get("children");u.each(U,function(Z){var J=Z.get("origin")||[];J[H]===K[H]&&J[F]===K[F]&&(Z.set("visible",P),y.set("gLabel",Z))})}}},M._bindFilterEvent=function(y,S){var P=this,A=this.chart,O=S.field;y.on("itemfilter",function(L){var H=L.range;A.filterShape(function(U,Z,J){if(!u.isNil(U[O])){var rt=U[O]>=H[0]&&U[O]<=H[1];return P._filterLabels(Z,J,rt),rt}return!0});for(var F=A.getAllGeoms()||[],K=function(Z){var J=F[Z];J.get("type")==="heatmap"&&f(function(){J.drawWithRange(H)})},G=0;G<F.length;G++)K(G)})},M._getShapeData=function(y){var S=y.get("origin");return u.isArray(S)&&(S=S[0]),S[o]},M._bindHoverEvent=function(y,S){var P=this,A=P.chart,O=A.getAllGeoms(),L=P.options,H=A.get("canvas");y.on("itemhover",function(F){var K=F.item.value,G=P.pre;if(!G)u.each(O,function(U){var Z=U.get("shapeContainer"),J=U.getShapes(),rt=[];if(S){var vt=U.get("scales")[S];u.each(J,function(mt){var ut=P._getShapeData(mt);ut&&b(ut[S],K,vt)&&rt.push(mt)})}else U.getYScale().field===K&&(rt=J);u.isEmpty(rt)||(F.shapes=rt,F.geom=U,L.onHover?(L.onHover(F),Z.sort(),H.draw()):U.setShapesActived(rt))}),P.pre=K;else if(G===K)return}),y.on("itemunhover",function(F){P.pre=null,L.onUnhover&&L.onUnhover(F),u.each(O,function(K){K.get("activeShapes")&&(K.clearActivedShapes(),H.draw())})})},M._isFiltered=function(y,S,P){if(!y.isCategory)return!0;var A=!0;return P=y.invert(P),u.each(S,function(O){if(y.getText(O)===y.getText(P))return A=!1,!1}),A},M._alignLegend=function(y,S,P,A){var O=this,L=O.viewTheme,H=O.container,F=H.get("canvas"),K=F.get("width"),G=F.get("height"),U=O.totalRegion,Z=O.plotRange,J=O.getBackRange(),rt=y.get("offset")[0]||0,vt=y.get("offset")[1]||0,mt=y.getHeight(),ut=y.getWidth(),Rt=L.legend.margin,Ft=L.legend.legendMargin,wt=O.legends[A].length,Mt=A.split("-"),St=0,At=0,nt=wt>1?U:P;if(Mt[0]==="left"||Mt[0]==="right")G=Z.br.y,St=O._getXAlign(Mt[0],K,P,J,ut,Rt),S?At=(S.get("y")||S.get("group").get("y"))+S.getHeight()+Ft:At=O._getYAlignVertical(Mt[1],G,nt,J,0,Rt,F.get("height"));else if(Mt[0]==="top"||Mt[0]==="bottom")if(At=O._getYAlignHorizontal(Mt[0],G,P,J,mt,Rt),S){var Pt=S.getWidth();St=(S.get("x")||S.get("group").get("x"))+Pt+Ft}else St=O._getXAlign(Mt[1],K,nt,J,0,Rt),Mt[1]==="right"&&(St=Z.br.x-nt.totalWidth);y.move(St+rt,At+vt)},M._getXAlign=function(y,S,P,A,O,L){var H=A.minX-O-L[3]<0?0:A.minX-O-L[3],F=y==="left"?H:A.maxX+L[1];return y==="center"&&(F=(S-P.totalWidth)/2),F},M._getYAlignHorizontal=function(y,S,P,A,O,L){var H=y==="top"?A.minY-O-L[0]:A.maxY+L[2];return H},M._getYAlignVertical=function(y,S,P,A,O,L,H){var F=y==="top"?A.minY-O-L[0]:S-P.totalHeight;return y==="center"&&(F=(H-P.totalHeight)/2),F},M._getSubRegion=function(y){var S=0,P=0,A=0,O=0;return u.each(y,function(L){var H=L.getWidth(),F=L.getHeight();S<H&&(S=H),A+=H,P<F&&(P=F),O+=F}),{maxWidth:S,totalWidth:A,maxHeight:P,totalHeight:O}},M._getRegion=function(){var y=this,S=y.viewTheme,P=y.legends,A=S.legend.legendMargin,O=[],L=0,H=0;return u.each(P,function(F){var K=y._getSubRegion(F);O.push(K),L+=K.totalWidth+A,H+=K.totalHeight+A}),{totalWidth:L,totalHeight:H,subs:O}},M._addCategoryLegend=function(y,S,P,A,O){var L=this,H=y.field,F=L.options,K=F[H];K&&(F=K);var G=L.legends;G[O]=G[O]||[];var U=L.container,Z=[],J=y.getTicks(),rt=!0,vt=P.get("shapeType")||"point",mt=P.getDefaultValue("shape")||"circle";F[H]&&F[H].marker?(mt=F[H].marker,vt="point",rt=!1):F.marker&&(mt=F.marker,vt="point",rt=!1);var ut=L.chart,Rt=L.viewTheme,Ft=ut.get("canvas"),wt=L.plotRange,Mt=O.split("-"),St=Mt[0]==="right"||Mt[0]==="left"?wt.bl.y-wt.tr.y:Ft.get("width");u.each(J,function(q){var gt=q.text,et=gt,at=q.value,xt=y.invert(at),k={isInCircle:P.isInCircle()},ot=A?L._isFiltered(y,A,at):!0,it=P.getAttr("color"),$=P.getAttr("shape");if(it)if(it.callback&&it.callback.length>1){var _t=Array(it.callback.length-1).fill("");k.color=it.mapping.apply(it,[xt].concat(_t)).join("")||Rt.defaultColor}else k.color=it.mapping(xt).join("")||Rt.defaultColor;if(rt&&$)if($.callback&&$.callback.length>1){var yt=Array($.callback.length-1).fill("");mt=$.mapping.apply($,[xt].concat(yt)).join("")}else mt=$.mapping(xt).join("");var Nt=h.getShapeFactory(vt),$t=Nt.getMarkerCfg(mt,k);a.legendMarkerRadius&&($t.radius=a.legendMarkerRadius),u.isFunction(mt)&&($t.symbol=mt),Z.push({value:et,dataValue:xt,checked:ot,marker:$t})});var At=u.deepMix({},Rt.legend[Mt[0]],F[H]||F,{viewId:ut.get("_id"),maxLength:St,items:Z,container:U,position:[0,0]});At.title&&u.deepMix(At,{title:{text:y.alias||y.field}});var nt;if(L._isTailLegend(F,P))At.chart=L.chart,At.geom=P,nt=new r(At);else if(F.useHtml){var Pt=U.get("canvas").get("el");if(U=F.container,u.isString(U)&&/^\#/.test(U)){var z=U.replace("#","");U=document.getElementById(z)}U||(U=Pt.parentNode),At.container=U,At.legendStyle===void 0&&(At.legendStyle={}),At.legendStyle.CONTAINER_CLASS=t({},At.legendStyle.CONTAINER_CLASS,{position:"absolute",overflow:"auto","z-index":Pt.style.zIndex===""?1:parseInt(Pt.style.zIndex,10)+1}),F.flipPage?(At.legendStyle.CONTAINER_CLASS.height=Mt[0]==="right"||Mt[0]==="left"?St+"px":"auto",At.legendStyle.CONTAINER_CLASS.width=Mt[0]==="right"||Mt[0]==="left"?"auto":St+"px",nt=new c.CatPageHtml(At)):nt=new c.CatHtml(At)}else nt=new c.Category(At);return L._bindClickEvent(nt,y,A),G[O].push(nt),nt},M._bindChartMove=function(y){var S=this.chart,P=this.legends;S.on("plotmove",function(A){var O=!1;if(A.target){var L=A.target.get("origin");if(L){var H=L[o]||L[0][o],F=y.field;if(H){var K=H[F];u.each(P,function(G){u.each(G,function(U){O=!0,!U.destroyed&&U.activate(K)})})}}}O||u.each(P,function(G){u.each(G,function(U){!U.destroyed&&U.deactivate()})})})},M._addContinuousLegend=function(y,S,P){var A=this,O=A.legends;O[P]=O[P]||[];var L=A.container,H=y.field,F=y.getTicks(),K=[],G,U,Z,J=A.viewTheme;u.each(F,function(Rt){var Ft=Rt.value,wt=y.invert(Ft),Mt=S.mapping(wt).join("");K.push({value:Rt.tickValue,attrValue:Mt,color:Mt,scaleValue:Ft}),Ft===0&&(U=!0),Ft===1&&(Z=!0)}),U||K.push({value:y.min,attrValue:S.mapping(0).join(""),color:S.mapping(0).join(""),scaleValue:0}),Z||K.push({value:y.max,attrValue:S.mapping(1).join(""),color:S.mapping(1).join(""),scaleValue:1});var rt=A.options,vt=P.split("-"),mt=J.legend[vt[0]];(rt&&rt.slidable===!1||rt[H]&&rt[H].slidable===!1)&&(mt=u.mix({},mt,J.legend.gradient));var ut=u.deepMix({},mt,rt[H]||rt,{items:K,attr:S,formatter:y.formatter,container:L,position:[0,0]});if(ut.title&&u.deepMix(ut,{title:{text:y.alias||y.field}}),S.type==="color")G=new c.Color(ut);else if(S.type==="size")rt&&rt.sizeType==="circle"?G=new c.CircleSize(ut):G=new c.Size(ut);else return;return A._bindFilterEvent(G,y),O[P].push(G),G},M._isTailLegend=function(y,S){if(y.hasOwnProperty("attachLast")&&y.attachLast){var P=S.get("type");if(P==="line"||P==="lineStack"||P==="area"||P==="areaStack")return!0}return!1},M._adjustPosition=function(y,S){var P;if(S)P="right-top";else if(u.isArray(y))P=String(y[0])+"-"+String(y[1]);else{var A=y.split("-");A.length===1?(A[0]==="left"&&(P="left-bottom"),A[0]==="right"&&(P="right-bottom"),A[0]==="top"&&(P="top-center"),A[0]==="bottom"&&(P="bottom-center")):P=y}return P},M.addLegend=function(y,S,P,A){var O=this,L=O.options,H=y.field,F=L[H],K=O.viewTheme;if(F===!1)return null;if(F&&F.custom)O.addCustomLegend(H);else{var G=L.position||K.defaultLegendPosition;G=O._adjustPosition(G,O._isTailLegend(L,P)),F&&F.position&&(G=O._adjustPosition(F.position,O._isTailLegend(F,P)));var U;y.isLinear?U=O._addContinuousLegend(y,S,G):U=O._addCategoryLegend(y,S,P,A,G),U&&(O._bindHoverEvent(U,H),L.reactive&&O._bindChartMove(y))}},M.addCustomLegend=function(y){var S=this,P=S.chart,A=S.viewTheme,O=S.container,L=S.options;y&&(L=L[y]);var H=L.position||A.defaultLegendPosition;H=S._adjustPosition(H);var F=S.legends;F[H]=F[H]||[];var K=L.items;if(!!K){var G=P.getAllGeoms();u.each(K,function(Ft){var wt=g(G,Ft.value);u.isPlainObject(Ft.marker)?Ft.marker.radius=Ft.marker.radius||a.legendMarkerRadius||l:(Ft.marker={symbol:Ft.marker||"circle",radius:a.legendMarkerRadius||l},u.indexOf(v,Ft.marker.symbol)!==-1?Ft.marker.stroke=Ft.fill:Ft.marker.fill=Ft.fill);var Mt=Ft.marker.symbol;u.isString(Mt)&&Mt.indexOf("hollow")!==-1&&(Ft.marker.symbol=u.lowerFirst(Mt.substr(6))),Ft.checked=u.isNil(Ft.checked)?!0:Ft.checked,Ft.geom=wt});var U=P.get("canvas"),Z=S.plotRange,J=H.split("-"),rt=J[0]==="right"||J[0]==="left"?Z.bl.y-Z.tr.y:U.get("width"),vt=u.deepMix({},A.legend[J[0]],L,{maxLength:rt,items:K,container:O,position:[0,0]}),mt;if(L.useHtml){var ut=L.container;if(/^\#/.test(O)){var Rt=ut.replace("#","");ut=document.getElementById(Rt)}else ut||(ut=O.get("canvas").get("el").parentNode);vt.container=ut,vt.legendStyle===void 0&&(vt.legendStyle={}),vt.legendStyle.CONTAINER_CLASS||(vt.legendStyle.CONTAINER_CLASS={height:J[0]==="right"||J[0]==="left"?rt+"px":"auto",width:J[0]==="right"||J[0]==="left"?"auto":rt+"px",position:"absolute",overflow:"auto"}),L.flipPage?mt=new c.CatPageHtml(vt):mt=new c.CatHtml(vt)}else mt=new c.Category(vt);return F[H].push(mt),mt.on("itemclick",function(Ft){L.onClick&&L.onClick(Ft)}),S._bindHoverEvent(mt),mt}},M.addMixedLegend=function(y,S){var P=this,A=P.options,O=[];u.each(y,function(F){var K=F.alias||F.field,G=A[F.field];u.each(S,function(U){if(U.getYScale()===F&&F.values&&F.values.length>0&&G!==!1){var Z=U.get("shapeType")||"point",J=U.getDefaultValue("shape")||"circle",rt=h.getShapeFactory(Z),vt={color:U.getDefaultValue("color")},mt=rt.getMarkerCfg(J,vt);a.legendMarkerRadius&&(mt.radius=a.legendMarkerRadius);var ut={value:K,marker:mt,field:F.field};O.push(ut)}})});var L={custom:!0,items:O};P.options=u.deepMix({},L,P.options);var H=P.addCustomLegend();P._bindClickEventForMix(H)},M.alignLegends=function(){var y=this,S=y.legends,P=y._getRegion(S);y.totalRegion=P;var A=0;return u.each(S,function(O,L){var H=P.subs[A];u.each(O,function(F,K){var G=O[K-1];F.get("useHtml")&&!F.get("autoPosition")||y._alignLegend(F,G,H,L)}),A++}),this},_}();E.exports=m},function(E,T,e){var t=e(154),u=e(0),s=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,c={LINEAR:"linear",CAT:"cat",TIME:"time"},r=function(){function h(i){this.defs={},this.viewTheme={scales:{}},this.filters={},u.assign(this,i)}var n=h.prototype;return n._getDef=function(a){var o=this.defs,l=this.viewTheme,f=null;return(l.scales[a]||o[a])&&(f=u.mix({},l.scales[a]),u.each(o[a],function(v,b){u.isNil(v)?delete f[b]:f[b]=v}),this.filters[a]&&(delete f.min,delete f.max)),f},n._getDefaultType=function(a,o){var l=c.LINEAR,f=u.Array.firstValue(o,a);return u.isArray(f)&&(f=f[0]),s.test(f)?l=c.TIME:u.isString(f)&&(l=c.CAT),l},n._getScaleCfg=function(a,o,l){var f={field:o},v=u.Array.values(l,o);if(f.values=v,!t.isCategory(a)&&a!=="time"){var b=u.Array.getRange(v);f.min=b.min,f.max=b.max,f.nice=!0}return a==="time"&&(f.nice=!1),f},n.createScale=function(a,o){var l=this,f=l._getDef(a),v,b=o||[],g=u.Array.firstValue(b,a);if(u.isNumber(a)||u.isNil(g)&&!f)v=t.identity({value:a,field:a.toString(),values:[a]});else{var m;f&&(m=f.type),m=m||l._getDefaultType(a,b);var _=l._getScaleCfg(m,a,b);f&&u.mix(_,f),v=t[m](_)}return v},h}();E.exports=r},function(E,T,e){function t(){return t=Object.assign||function(m){for(var _=1;_<arguments.length;_++){var M=arguments[_];for(var x in M)Object.prototype.hasOwnProperty.call(M,x)&&(m[x]=M[x])}return m},t.apply(this,arguments)}var u=e(0),s=e(9),c=e(30),r=c.Tooltip,h=u.MatrixUtil,n=h.vec2,i=["line","area","path","areaStack"],a=["line","area","point"],o=["marker","showMarker"];function l(m,_){var M=-1;return u.each(m,function(x,y){var S=!0;for(var P in _)if(_.hasOwnProperty(P)&&!o.includes(P)&&!u.isObject(_[P])&&_[P]!==x[P]){S=!1;break}if(S)return M=y,!1}),M}function f(m,_){if(!m)return!1;var M="";return m.className?(u.isNil(m.className.baseVal)?M=m.className:M=m.className.baseVal,M.includes(_)):!1}function v(m,_){for(var M=m.parentNode,x=!1;M&&M!==document.body;){if(f(M,_)){x=!0;break}M=M.parentNode}return x}function b(m){var _=[];return u.each(m,function(M){var x=l(_,M);x===-1?_.push(M):_[x]=M}),_}var g=function(){function m(M){u.assign(this,M),this.timeStamp=0,this.locked=!1}var _=m.prototype;return _._normalizeEvent=function(x){var y=this.chart,S=this._getCanvas(),P=S.getPointByClient(x.clientX,x.clientY),A=S.get("pixelRatio");P.x=P.x/A,P.y=P.y/A;var O=y.getViewsByPoint(P);return P.views=O,P},_._getCanvas=function(){return this.chart.get("canvas")},_._getTriggerEvent=function(){var x=this.options,y=x.triggerOn,S;return!y||y==="mousemove"?S="plotmove":y==="click"?S="plotclick":y==="none"&&(S=null),S},_._getDefaultTooltipCfg=function(){var x=this,y=x.chart,S=x.viewTheme,P=x.options,A=u.mix({},S.tooltip),O=y.getAllGeoms().filter(function(U){return U.get("visible")}),L=[];u.each(O,function(U){var Z=U.get("type"),J=U.get("adjusts"),rt=!1;J&&u.each(J,function(vt){if(vt.type==="symmetric"||vt.type==="Symmetric")return rt=!0,!1}),u.indexOf(L,Z)===-1&&!rt&&L.push(Z)});var H=O.length&&O[0].get("coord")?O[0].get("coord").isTransposed:!1,F;if(O.length&&O[0].get("coord")&&O[0].get("coord").type==="cartesian"){if(L[0]==="interval"&&P.shared!==!1){var K=u.mix({},S.tooltipCrosshairsRect);K.isTransposed=H,F={zIndex:0,crosshairs:K}}else if(u.indexOf(a,L[0])>-1){var G=u.mix({},S.tooltipCrosshairsLine);G.isTransposed=H,F={crosshairs:G}}}return u.mix(A,F,{})},_._bindEvent=function(){var x=this.chart,y=this._getTriggerEvent();y&&(x.on(y,u.wrapBehavior(this,"onMouseMove")),x.on("plotleave",u.wrapBehavior(this,"onMouseOut")))},_._offEvent=function(){var x=this.chart,y=this._getTriggerEvent();y&&(x.off(y,u.getWrapBehavior(this,"onMouseMove")),x.off("plotleave",u.getWrapBehavior(this,"onMouseOut")))},_._setTooltip=function(x,y,S,P){var A=this,O=A.tooltip,L=A.prePoint;if(!L||L.x!==x.x||L.y!==x.y){y=b(y),A.prePoint=x;var H=A.chart,F=A.viewTheme,K=u.isArray(x.x)?x.x[x.x.length-1]:x.x,G=u.isArray(x.y)?x.y[x.y.length-1]:x.y;O.get("visible")||H.emit("tooltip:show",{x:K,y:G,tooltip:O});var U=y[0],Z=U.title||U.name;O.isContentChange(Z,y)&&(H.emit("tooltip:change",{tooltip:O,x:K,y:G,items:y}),Z=y[0].title||y[0].name,O.setContent(Z,y),u.isEmpty(S)?(O.clearMarkers(),O.set("markerItems",[])):A.options.hideMarkers===!0?O.set("markerItems",S):O.setMarkers(S,F.tooltipMarker));var J=this._getCanvas();P===J&&O.get("type")==="mini"?O.hide():(O.setPosition(K,G,P),O.show())}},_.hideTooltip=function(){var x=this.tooltip,y=this.chart,S=this._getCanvas();this.prePoint=null,x.hide(),y.emit("tooltip:hide",{tooltip:x}),S.draw()},_.onMouseMove=function(x){if(!(u.isEmpty(x.views)||this.locked)){var y=this.timeStamp,S=+new Date,P={x:x.x,y:x.y};S-y>16&&!this.chart.get("stopTooltip")&&(this.showTooltip(P,x.views,x.shape),this.timeStamp=S)}},_.onMouseOut=function(x){var y=this.tooltip;!y.get("visible")||!y.get("follow")||this.locked||x&&x.toElement&&(f(x.toElement,"g2-tooltip")||v(x.toElement,"g2-tooltip"))||this.hideTooltip()},_.renderTooltip=function(){var x=this;if(!x.tooltip){var y=x.chart,S=x.viewTheme,P=x._getCanvas(),A=x._getDefaultTooltipCfg(),O=x.options;O=u.deepMix({plotRange:y.get("plotRange"),capture:!1,canvas:P,frontPlot:y.get("frontPlot"),viewTheme:S.tooltip,backPlot:y.get("backPlot")},A,O),O.crosshairs&&O.crosshairs.type==="rect"&&(O.zIndex=0),O.visible=!1;var L;O.type==="mini"?(O.crosshairs=!1,O.position="top",L=new r.Mini(O)):O.useHtml?L=new r.Html(O):L=new r.Canvas(O),x.tooltip=L;var H=x._getTriggerEvent(),F=L.get("container");!L.get("enterable")&&H==="plotmove"&&F&&(F.onmousemove=function(K){var G=x._normalizeEvent(K);y.emit(H,G)}),F&&(F.onmouseleave=function(){x.locked||x.hideTooltip()}),x._bindEvent()}},_._formatMarkerOfItem=function(x,y,S){var P=this,A=P.options,O=S.point;if(O&&O.x&&O.y){var L=u.isArray(O.x)?O.x[O.x.length-1]:O.x,H=u.isArray(O.y)?O.y[O.y.length-1]:O.y;O=x.applyMatrix(L,H,1),S.x=O[0],S.y=O[1],S.showMarker=!0,S.color.substring(0,2)==="l("&&(!A.hasOwnProperty("useHtml")||A.useHtml)&&(S.color=S.color.split(" ")[1].substring(2));var F=P._getItemMarker(y,S);if(S.marker=F,u.indexOf(i,y.get("type"))!==-1)return S}return null},_.lockTooltip=function(){this.locked=!0},_.unlockTooltip=function(){this.locked=!1},_.showTooltip=function(x,y,S){var P=this,A=this;if(!(u.isEmpty(y)||!x)){this.tooltip||this.renderTooltip();var O=A.options,L=[],H=[];if(u.each(y,function(J){if(!J.get("tooltipEnable"))return!0;var rt=J.get("geoms"),vt=J.get("coord");u.each(rt,function(mt){var ut=mt.get("type");if(mt.get("visible")&&mt.get("tooltipCfg")!==!1){var Rt=mt.get("dataArray");if(mt.isShareTooltip()||O.shared===!1&&u.inArray(["area","line","path","polygon"],ut)){var Ft=mt.getXScale(),wt=mt.getAttr("color"),Mt=wt?wt.field:void 0;if(ut==="interval"&&Ft.field===Mt&&mt.hasAdjust("dodge")){var St=u.find(Rt,function(q){return!!mt.findPoint(x,q)});u.each(St,function(q){var gt=mt.getTipItems(q,O.title);u.each(gt,function(et){var at=A._formatMarkerOfItem(vt,mt,et);at&&L.push(at)}),H=H.concat(gt)})}else u.each(Rt,function(q){var gt=mt.findPoint(x,q);if(gt){var et=mt.getTipItems(gt,O.title);u.each(et,function(at){var xt=A._formatMarkerOfItem(vt,mt,at);xt&&L.push(xt)}),H=H.concat(et)}})}else{var At=mt.get("shapeContainer"),nt=At.get("canvas"),Pt=nt.get("pixelRatio"),z=At.getShape(x.x*Pt,x.y*Pt);z&&z.get("visible")&&z.get("origin")&&(H=mt.getTipItems(z.get("origin"),O.title)),u.each(H,function(q){var gt=P._formatMarkerOfItem(vt,mt,q);gt&&L.push(gt)})}}}),u.each(H,function(mt){var ut=mt.point,Rt=u.isArray(ut.x)?ut.x[ut.x.length-1]:ut.x,Ft=u.isArray(ut.y)?ut.y[ut.y.length-1]:ut.y;ut=vt.applyMatrix(Rt,Ft,1),mt.x=ut[0],mt.y=ut[1]})}),H.length){var F=H[0];if(!H.every(function(J){return J.title===F.title})){var K=F,G=Infinity;H.forEach(function(J){var rt=n.distance([x.x,x.y],[J.x,J.y]);rt<G&&(G=rt,K=J)}),H=H.filter(function(J){return J.title===K.title}),L=L.filter(function(J){return J.title===K.title})}if(O.shared===!1&&H.length>1){var U=H[0],Z=Math.abs(x.y-U.y);u.each(H,function(J){Math.abs(x.y-J.y)<=Z&&(U=J,Z=Math.abs(x.y-J.y))}),U&&U.x&&U.y&&(L=[U]),H=[U]}A._setTooltip(x,H,L,S)}else A.hideTooltip()}},_.clear=function(){var x=this.tooltip;x&&x.destroy(),this.tooltip=null,this.prePoint=null,this._offEvent()},_._getItemMarker=function(x,y){var S=this.options,P=S.marker||this.viewTheme.tooltip.marker;if(u.isFunction(P)){var A=x.get("shapeType")||"point",O=x.getDefaultValue("shape")||"circle",L=s.getShapeFactory(A),H={color:y.color},F=L.getMarkerCfg(O,H);return P(F,y)}return t({fill:y.color},P)},m}();E.exports=g},function(E,T,e){function t(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function u(m,_){m.prototype=Object.create(_.prototype),m.prototype.constructor=m,m.__proto__=_}var s=e(120),c=e(8),r=e(0),h=e(121),n=e(5),i=e(132),a="_origin",o=e(271);function l(m){var _=m.startAngle,M=m.endAngle;return!(!r.isNil(_)&&!r.isNil(M)&&M-_<Math.PI*2)}function f(m,_,M){var x=(m-_)/(M-_);return x>=0&&x<=1}function v(m,_){var M=!1;if(m){var x=m.type;if(x==="theta"){var y=m.start,S=m.end;M=f(_.x,y.x,S.x)&&f(_.y,y.y,S.y)}else{var P=m.invert(_);M=P.x>=0&&P.y>=0&&P.x<=1&&P.y<=1}}return M}var b={};r.each(c,function(m,_){var M=r.lowerFirst(_);b[M]=function(x){var y=new m(x);return this.addGeom(y),y}});var g=function(m){u(M,m);var _=M.prototype;_.getDefaultCfg=function(){return{viewContainer:null,coord:null,start:{x:0,y:0},end:{x:1,y:1},geoms:[],scales:{},options:{},scaleController:null,padding:0,theme:null,parent:null,tooltipEnable:!0,animate:n.animate,visible:!0}};function M(x){var y;y=m.call(this,x)||this;var S=t(y);return S._setTheme(),r.each(c,function(P,A){var O=r.lowerFirst(A);S[O]=function(L){L===void 0&&(L={}),L.viewTheme=S.get("viewTheme");var H=new P(L);return S.addGeom(H),H}}),S.init(),y}return _._setTheme=function(){var y=this,S=y.get("theme"),P={},A={};r.isObject(S)?A=S:r.indexOf(Object.keys(i),S)!==-1&&(A=i[S]),r.deepMix(P,n,A),y.set("viewTheme",P)},_.init=function(){this._initViewPlot(),this.get("data")&&this._initData(this.get("data")),this._initOptions(),this._initControllers(),this._bindEvents()},_._initOptions=function(){var y=this,S=r.mix({},y.get("options"));S.scales||(S.scales={}),S.coord||(S.coord={}),S.animate===!1&&this.set("animate",!1),(S.tooltip===!1||r.isNull(S.tooltip))&&this.set("tooltipEnable",!1),S.geoms&&S.geoms.length&&r.each(S.geoms,function(O){y._createGeom(O)});var P=y.get("scaleController");P&&(P.defs=S.scales);var A=y.get("coordController");A&&A.reset(S.coord),this.set("options",S)},_._createGeom=function(y){var S=y.type,P;this[S]&&(P=this[S](),r.each(y,function(A,O){if(P[O])if(r.isObject(A)&&A.field)if(A==="label")P[O](A.field,A.callback,A.cfg);else{var L;r.each(A,function(H,F){F!=="field"&&(L=H)}),P[O](A.field,L)}else P[O](A)}))},_._initControllers=function(){var y=this,S=y.get("options"),P=y.get("viewTheme"),A=y.get("canvas"),O=new h.Scale({viewTheme:P,defs:S.scales}),L=new h.Coord(S.coord);this.set("scaleController",O),this.set("coordController",L);var H=new h.Axis({canvas:A,viewTheme:P});this.set("axisController",H);var F=new h.Guide({viewTheme:P,options:S.guides||[]});this.set("guideController",F)},_._initViewPlot=function(){this.get("viewContainer")||this.set("viewContainer",this.get("middlePlot"))},_._initGeoms=function(){for(var y=this.get("geoms"),S=this.get("filteredData"),P=this.get("coord"),A=this.get("_id"),O=0;O<y.length;O++){var L=y[O];L.set("data",S),L.set("coord",P),L.set("_id",A+"-geom"+O),L.set("keyFields",this.get("keyFields")),L.init()}},_._clearGeoms=function(){for(var y=this,S=y.get("geoms"),P=0;P<S.length;P++){var A=S[P];A.clear()}},_._removeGeoms=function(){for(var y=this,S=y.get("geoms");S.length>0;){var P=S.shift();P.destroy()}},_._drawGeoms=function(){this.emit("beforedrawgeoms");for(var y=this.get("geoms"),S=this.get("coord"),P=0;P<y.length;P++){var A=y[P];A.setCoord(S),A.paint()}this.emit("afterdrawgeoms")},_.isShapeInView=function(y){var S=this.get("_id"),P=y._id;if(P)return P.split("-")[0]===S;for(var A=y;A;){if(A.get("viewId")===S)return!0;A=A.get("parent")}return!1},_.getViewRegion=function(){var y=this,S=y.get("parent"),P,A;if(S){var O=S.getViewRegion(),L=y._getViewRegion(O.start,O.end);P=L.start,A=L.end}else P=y.get("start"),A=y.get("end");return{start:P,end:A}},_._getViewRegion=function(y,S){var P=this.get("start"),A=this.get("end"),O=P.x,L=1-A.y,H=A.x,F=1-P.y,K=this.get("padding"),G=r.toAllPadding(K),U=G[0],Z=G[1],J=G[2],rt=G[3],vt={x:O*(S.x-y.x)+y.x+rt,y:L*(S.y-y.y)+y.y-J},mt={x:H*(S.x-y.x)+y.x-Z,y:F*(S.y-y.y)+y.y+U};return{start:vt,end:mt}},_._createCoord=function(){var y=this.get("coordController"),S=this.getViewRegion(),P=y.createCoord(S.start,S.end);this.set("coord",P)},_._renderAxes=function(){var y=this.get("options"),S=y.axes;if(S!==!1){var P=this.get("axisController");P.container=this.get("backPlot"),P.coord=this.get("coord"),P.options=S||{};var A=this.getXScale(),O=this.getYScales(),L=this.get("_id");P.createAxis(A,O,L)}},_._renderGuides=function(){var y=this.get("guideController");if(!r.isEmpty(y.options)){var S=this.get("coord");y.view=this,y.backContainer=this.get("backPlot"),y.frontContainer=this.get("frontPlot"),y.xScales=this._getScales("x"),y.yScales=this._getScales("y"),y.render(S)}},_._bindEvents=function(){var y=new h.Event({view:this,canvas:this.get("canvas")});y.bindEvents(),this.set("eventController",y)},_._clearEvents=function(){var y=this.get("eventController");y&&y.clearEvents()},_._getScales=function(y){for(var S=this.get("geoms"),P={},A=0;A<S.length;A++){var O=S[A],L=y==="x"?O.getXScale():O.getYScale();L&&!P[L.field]&&(P[L.field]=L)}return P},_._adjustScale=function(){this._setCatScalesRange();for(var y=this.get("geoms"),S=this.get("scaleController"),P=S.defs,A=0;A<y.length;A++){var O=y[A];if(O.get("type")==="interval"){var L=O.getYScale(),H=L.field,F=L.min,K=L.max,G=L.type;!(P[H]&&P[H].min)&&G!=="time"&&(F>0?L.change({min:0}):K<=0&&L.change({max:0}))}}},_._setCatScalesRange=function(){var y=this,S=y.get("coord"),P=y.get("viewTheme"),A=y.getXScale(),O=y.getYScales(),L=[];A&&L.push(A),L=L.concat(O);var H=S.isPolar&&l(S),F=y.get("scaleController"),K=F.defs;r.each(L,function(G){if((G.isCategory||G.isIdentity)&&G.values&&!(K[G.field]&&K[G.field].range)){var U=G.values.length,Z;if(U===1)Z=[.5,1];else{var J=1,rt=0;H?S.isTransposed?(J=P.widthRatio.multiplePie,rt=1/U*J,Z=[rt/2,1-rt/2]):Z=[0,1-1/U]:(rt=1/U*1/2,Z=[rt,1-rt])}G.range=Z}})},_.getXScale=function(){var y=this.get("geoms"),S=null;return r.isEmpty(y)||(S=y[0].getXScale()),S},_.getYScales=function(){for(var y=this.get("geoms"),S=[],P=0;P<y.length;P++){var A=y[P],O=A.getYScale();O&&r.indexOf(S,O)===-1&&S.push(O)}return S},_.getXY=function(y){var S=this,P=S.get("coord"),A=S._getScales("x"),O=S._getScales("y"),L,H;for(var F in y)A[F]&&(L=A[F].scale(y[F])),O[F]&&(H=O[F].scale(y[F]));return!r.isNil(L)&&!r.isNil(H)?P.convert({x:L,y:H}):null},_.getSnapRecords=function(y){var S=this,P=S.get("geoms"),A=[];return r.each(P,function(O){var L=O.get("dataArray"),H;r.each(L,function(F){H=O.findPoint(y,F),H&&A.push(H)})}),A},_.addGeom=function(y){var S=this,P=S.get("geoms");P.push(y),y.set("view",S);var A=S.get("viewContainer");y.set("container",A),y.set("animate",S.get("animate")),y.bindEvents()},_.removeGeom=function(y){var S=this.get("geoms");r.Array.remove(S,y),y.destroy()},_.createScale=function(y,S){var P=this.get("scales"),A=this.get("parent"),O=P[y];if(!S){var L=this.get("filteredData"),H=this._getFieldsForLegend();L.length&&!H.includes(y)?S=L:S=this.get("data")}var F=this.get("scaleController");if(O){if(O.sync){var G=F.createScale(y,S);this._syncScale(O,G)}}else{if(O=F.createScale(y,S),O.sync&&A){var K=A.createScale(y,S);O=this._getSyncScale(K,O)}P[y]=O}return O},_._getFieldsForLegend=function(){var y=[],S=this.get("geoms");return r.each(S,function(P){var A=P.getFieldsForLegend();y=y.concat(A)}),r.uniq(y)},_._getSyncScale=function(y,S){return y.type!==S.type?S:(this._syncScale(y,S),y)},_._syncScale=function(y,S){var P=r.union(y.values,S.values);if(S.isLinear){var A=Math.max(y.max,S.max),O=Math.min(y.min,S.min);(y.max!==A||y.min!==O)&&y.change({min:O,max:A,values:P})}P.length!==y.values.length&&y.change({values:P})},_.getFilteredValues=function(y){var S=this.get("scales")[y],P=S.values,A=this._getFilters(),O;return A&&A[y]?O=P.filter(A[y]):O=P.slice(0),O},_.getFilteredOutValues=function(y){var S=this.get("scales")[y],P=S.values,A=this._getFilters(),O;return A&&A[y]?O=P.filter(function(){return!A[y].apply(A,arguments)}):O=[],O},_.filter=function(y,S){var P=this.get("options");P.filters||(P.filters={}),P.filters[y]=S,this.get("scaleController").filters=P.filters},_._getFilters=function(){var y=this.get("options");return y.filters},_.execFilter=function(y){var S=this,P=S._getFilters();return P&&(y=y.filter(function(A){var O=!0;return r.each(P,function(L,H){if(L&&(O=L(A[H],A),!O))return!1}),O})),y},_.axis=function(y,S){var P=this.get("options");if(y===!1)P.axes=!1;else{P.axes||(P.axes={});var A=P.axes;A[y]=S}return this},_.guide=function(){return this.get("guideController")},_._getKeyFields=function(y){var S=[];r.each(y,function(P,A){P.key&&S.push(A)}),this.set("keyFields",S)},_.scale=function(y,S){var P=this.get("options"),A=P.scales;return r.isObject(y)?r.mix(A,y):A[y]=S,this._getKeyFields(A),this},_.tooltip=function(y){return this.set("tooltipEnable",y),this},_.animate=function(y){var S=this.get("options");return S.animate=y,this.set("animate",y),this},_.changeOptions=function(y){return this.set("options",y),this._initOptions(y),this},_.getViewsByPoint=function(y){var S=[],P=this.get("views");return v(this.get("coord"),y)&&S.push(this),r.each(P,function(A){A.get("visible")&&v(A.get("coord"),y)&&S.push(A)}),S},_.eachShape=function(y){var S=this,P=S.get("views"),A=S.get("canvas");r.each(P,function(L){L.eachShape(y)});var O=this.get("geoms");return r.each(O,function(L){var H=L.getShapes();r.each(H,function(F){var K=F.get("origin");if(r.isArray(K)){var G=K.map(function(Z){return Z[a]});y(G,F,L,S)}else{var U=K[a];y(U,F,L,S)}})}),A.draw(),this},_.filterShape=function(y){var S=function(A,O,L,H){y(A,O,L,H)?O.show():O.hide()};return this.eachShape(S),this},_.clearInner=function(){this.set("scales",{}),this.emit("beforeclearinner");var y=this.get("options");y.geoms=null,this._clearGeoms(),this.get("guideController")&&this.get("guideController").reset(),this.get("axisController")&&this.get("axisController").clear(),this.emit("afterclearinner")},_.clear=function(){var y=this.get("options");return y.filters=null,this._removeGeoms(),this.clearInner(),this.get("guideController")&&this.get("guideController").clear(),this.set("isUpdate",!1),this.set("keyFields",[]),this},_.coord=function(y,S){var P=this.get("coordController");return P.reset({type:y,cfg:S}),P},_.resetCoord=function(){this._createCoord()},_.source=function(y,S){return this._initData(y),S&&this.scale(S),this.emit("setdata"),this},_.changeData=function(y){return this.emit("beforechangedata"),this._initData(y),this.emit("afterchangedata"),this.repaint(),this},_._initData=function(y){var S=this.get("dataView");S&&(S.off("change",r.getWrapBehavior(this,"_onViewChange")),this.set("dataView",null)),y&&y.isDataView&&(y.on("change",r.wrapBehavior(this,"_onViewChange")),this.set("dataView",y),y=y.rows),this.set("data",y)},_._onViewChange=function(){this.emit("beforechangedata");var y=this.get("dataView"),S=y.rows;this.set("data",S),this.emit("afterchangedata"),this.repaint()},_.beforeRender=function(){var y=this.get("views");r.each(y,function(S){S.beforeRender()}),this.initView()},_.drawComponents=function(){var y=this.get("views");r.each(y,function(S){S.drawComponents()}),this._renderAxes(),this._renderGuides()},_.drawCanvas=function(y){if(!y){var S=this.get("views"),P=this.get("backPlot");P.sort();var A=this.get("canvas"),O=this.get("animate");if(O){var L=this.get("isUpdate");r.each(S,function(H){o.execAnimation(H,L)}),o.execAnimation(this,L)}else A.draw()}},_.render=function(y){return this.clearInner(),this.emit("beforerender"),this.beforeRender(),this.emit("beforepaint"),this.drawComponents(),this.paint(),this.emit("afterpaint"),this.drawCanvas(y),this.emit("afterrender"),this.set("rendered",!0),this},_.initView=function(){var y=this.get("data")||[],S=this.execFilter(y);this.set("filteredData",S),this._createCoord(),this.emit("beforeinitgeoms"),this._initGeoms(),this._adjustScale()},_.paint=function(){var y=this.get("views");r.each(y,function(P){P.paint()});var S=this.get("data");r.isEmpty(S)||this._drawGeoms(),this.get("visible")||this.changeVisible(!1,!0)},_.changeVisible=function(y,S){var P=this.get("geoms");if(r.each(P,function(O){O.changeVisible(y,!0)}),this.get("axisController")&&this.get("axisController").changeVisible(y),this.get("guideController")&&this.get("guideController").changeVisible(y),!S){var A=this.get("canvas");A.draw()}},_.repaint=function(){this.set("isUpdate",!0),this.clearInner(),this.render()},_.destroy=function(){this._clearEvents();var y=this.get("dataView");y&&y.off("change",r.getWrapBehavior(this,"_onViewChange")),this.clear(),m.prototype.destroy.call(this)},M}(s);E.exports=g},function(E,T,e){var t=e(30),u=t.Guide,s=e(281);u.RegionFilter=s,E.exports=u},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(0),s=e(20),c=e(31),r=c.Path,h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return u.mix({},l,{name:"regionFilter",zIndex:1,top:!0,start:null,end:null,color:null,apply:null,style:{opacity:1}})},a.render=function(l,f,v,b){var g=this,m=f.addGroup();m.name="guide-region-filter",b.once("afterpaint",function(){if(!m.get("destroyed")){g._drawShapes(b,m);var _=g._drawClip(l);m.attr({clip:_}),g.set("clip",_),g.get("appendInfo")&&m.setSilent("appendInfo",g.get("appendInfo")),g.set("el",m)}})},a._drawShapes=function(l,f){var v=this,b=[],g=l.getAllGeoms();return g.map(function(m){var _=m.getShapes(),M=m.get("type"),x=v._geomFilter(M);return x&&_.map(function(y){var S=y.type,P=u.cloneDeep(y.attr());v._adjustDisplay(P);var A=f.addShape(S,{attrs:P});return b.push(A),y}),m}),b},a._drawClip=function(l){var f=this,v=f.parsePoint(l,f.get("start")),b=f.parsePoint(l,f.get("end")),g=[["M",v.x,v.y],["L",b.x,v.y],["L",b.x,b.y],["L",v.x,b.y],["z"]],m=new r({attrs:{path:g,opacity:1}});return m},a._adjustDisplay=function(l){var f=this,v=f.get("color");l.fill&&(l.fill=l.fillStyle=v),l.stroke=l.strokeStyle=v},a._geomFilter=function(l){var f=this,v=f.get("apply");return v?u.contains(v,l):!0},a.clear=function(){n.prototype.clear.call(this);var l=this.get("clip");l&&l.remove()},i}(s);E.exports=h},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(0),s=e(30),c=e(5),r=s.Legend,h=r.Category,n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return u.mix({},f,{type:"tail-legend",layout:"vertical",autoLayout:!0})},o._addItem=function(f){var v=this.get("itemsGroup"),b=this._getNextX(),g=0,m=this.get("unCheckColor"),_=v.addGroup({x:0,y:0,value:f.value,scaleValue:f.scaleValue,checked:f.checked});_.translate(b,g),_.set("viewId",v.get("viewId"));var M=this.get("textStyle"),x=this.get("_wordSpaceing"),y=0;if(f.marker){var S=u.mix({},f.marker,{x:f.marker.radius,y:0});f.checked||(S.fill&&(S.fill=m),S.stroke&&(S.stroke=m));var P=_.addShape("marker",{type:"marker",attrs:S});P.attr("cursor","pointer"),P.name="legend-marker",y+=P.getBBox().width+x}var A=u.mix({},M,{x:y,y:0,text:this._formatItemValue(f.value)});f.checked||u.mix(A,{fill:m});var O=_.addShape("text",{attrs:A});O.attr("cursor","pointer"),O.name="legend-text",this.get("appendInfo")&&O.setSilent("appendInfo",this.get("appendInfo"));var L=_.getBBox(),H=this.get("itemWidth"),F=_.addShape("rect",{attrs:{x:b,y:g-L.height/2,fill:"#fff",fillOpacity:0,width:H||L.width,height:L.height}});return F.attr("cursor","pointer"),F.setSilent("origin",f),F.name="legend-item",this.get("appendInfo")&&F.setSilent("appendInfo",this.get("appendInfo")),_.name="legendGroup",_},o._adjust=function(){var f=this,v=f.get("geom");if(v){var b=f.get("group").attr("matrix");b[7]=0;var g=f.get("geom").get("dataArray"),m=this.get("itemsGroup").get("children"),_=0;u.each(m,function(M){var x=g[_],y=x[x.length-1].y;u.isArray(y)&&(y=y[1]);var S=M.getBBox().height,P=M.get("x"),A=y-S/2;M.translate(P,A),_++}),f.get("autoLayout")&&f._antiCollision(m)}},o.render=function(){var f=this;i.prototype.render.call(this);var v=this.get("chart");v.once("afterpaint",function(){f._adjust()})},o._getPreviousY=function(f){var v=f.attr("matrix")[7],b=f.getBBox().height;return v+b},o._adjustDenote=function(f,v,b){var g=c.legend.legendMargin,m=-2,_=-g*2;f.addShape("path",{attrs:{path:"M"+m+","+v+"L"+_+","+(b+3),lineWidth:1,lineDash:[2,2],stroke:"#999999"}})},o._antiCollision=function(f){if(f===void 0&&(f=[]),!!f.length){var v=this;f.sort(function(G,U){var Z=G.attr("matrix")[7],J=U.attr("matrix")[7];return Z-J});var b=!0,g=v.get("chart").get("plotRange"),m=g.tl.y,_=Math.abs(m-g.bl.y),M=f[0].getBBox().height,x=Number.MIN_VALUE,y=0,S=f.map(function(G){var U=G.attr("matrix")[7];return U>y&&(y=U),U<x&&(x=U),{size:G.getBBox().height,targets:[U-m]}});x-=m;for(var P=0;b;){for(var A=0;A<S.length;A++){var O=S[A],L=(Math.min.apply(x,O.targets)+Math.max.apply(x,O.targets))/2;O.pos=Math.min(Math.max(x,L-O.size/2),_-O.size)}for(b=!1,P=S.length;P--;)if(P>0){var H=S[P-1],F=S[P];H.pos+H.size>F.pos&&(H.size+=F.size,H.targets=H.targets.concat(F.targets),S.splice(P,1),b=!0)}}P=0;var K=this.get("itemsGroup").addGroup();S.forEach(function(G){var U=m+M;G.targets.forEach(function(){var Z=f[P].attr("matrix")[7],J=G.pos+U-M/2,rt=Math.abs(Z-J);rt>M/2&&v._adjustDenote(K,J,Z-v.get("group").attr("matrix")[7]/2),f[P].translate(0,-Z),f[P].translate(0,J),U+=M,P++})})}},a}(h);E.exports=n},function(E,T,e){var t=e(0),u=e(16),s=u.Group,c="auto",r=function h(n){h.superclass.constructor.call(this,n)};t.extend(r,s),t.augment(r,{getDefaultCfg:function(){return{type:"plotBack",padding:null,background:null,plotRange:null,plotBackground:null}},_beforeRenderUI:function(){this._calculateRange()},_renderUI:function(){this._renderBackground(),this._renderPlotBackground()},_renderBackground:function(){var n=this,i=n.get("background");if(i){var a=this.get("canvas"),o=n.get("width")||a.get("width"),l=n.get("height")||a.get("height"),f={x:0,y:0,width:o,height:l},v=n.get("backgroundShape");v?v.attr(f):(v=this.addShape("rect",{attrs:t.mix(f,i)}),this.set("backgroundShape",v))}else return},_renderPlotBackground:function(){var n=this,i=n.get("plotBackground");if(i){var a=n.get("plotRange"),o=a.br.x-a.bl.x,l=a.br.y-a.tr.y,f=a.tl,v={x:f.x,y:f.y,width:o,height:l},b=n.get("plotBackShape");b?b.attr(v):(i.image?(v.img=i.image,b=n.addShape("image",{attrs:v})):(t.mix(v,i),b=n.addShape("rect",{attrs:v})),n.set("plotBackShape",b))}else return},_convert:function(n,i){if(t.isString(n)){if(n===c)n=0;else if(n.includes("%")){var a=this.get("canvas"),o=this.get("width")||a.get("width"),l=this.get("height")||a.get("height");n=parseInt(n,10)/100,n=i?n*o:n*l}}return n},_calculateRange:function(){var n=this,i=n.get("plotRange");t.isNil(i)&&(i={});var a=n.get("padding"),o=this.get("canvas"),l=n.get("width")||o.get("width"),f=n.get("height")||o.get("height"),v=t.toAllPadding(a),b=n._convert(v[0],!1),g=n._convert(v[1],!0),m=n._convert(v[2],!1),_=n._convert(v[3],!0),M=Math.min(_,l-g),x=Math.max(_,l-g),y=Math.min(f-m,b),S=Math.max(f-m,b);i.tl={x:M,y},i.tr={x,y},i.bl={x:M,y:S},i.br={x,y:S},i.cc={x:(x+M)/2,y:(S+y)/2},this.set("plotRange",i)},repaint:function(){return this._calculateRange(),this._renderBackground(),this._renderPlotBackground(),this}}),E.exports=r},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var u=e(46);function s(r,h,n){return{x:r.x+h*Math.cos(n),y:r.y+h*Math.sin(n)}}var c=function(r){t(h,r);function h(){return r.apply(this,arguments)||this}var n=h.prototype;return n.getDefaultCfg=function(){var a=r.prototype.getDefaultCfg.call(this);return a.type="circle",a},n.getRegion=function(a,o){var l=1/2,f=Math.PI*2/a,v=-1*Math.PI/2+f*o,b=l/(1+1/Math.sin(f/2)),g={x:.5,y:.5},m=s(g,l-b,v),_=Math.PI*5/4,M=Math.PI*1/4;return{start:s(m,b,_),end:s(m,b,M)}},n.generateFacets=function(a){var o=this,l=o.fields,f=l[0];if(!f)throw"Please specify for the field for facet!";var v=o.getFieldValues(f,a),b=v.length,g=[];return v.forEach(function(m,_){var M=[{field:f,value:m,values:v}],x=o.getFilter(M),y=a.filter(x),S={type:o.type,colValue:m,colField:f,colIndex:_,cols:b,rows:1,rowIndex:0,data:y,region:o.getRegion(b,_)};g.push(S)}),g},h}(u);E.exports=c},function(E,T,e){var t=e(0),u=e(44),s={};s.Rect=e(126),s.List=e(125),s.Circle=e(284),s.Tree=e(288),s.Mirror=e(287),s.Matrix=e(286),u.prototype.facet=function(c,r){var h=s[t.upperFirst(c)];if(!h)throw new Error("Not support such type of facets as: "+c);var n=this.get("facets");n&&n.destroy(),r.chart=this;var i=new h(r);this.set("facets",i)},E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(126),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="matrix",i.showTitle=!1,i},h.generateFacets=function(i){for(var a=this,o=a.fields,l=o.length,f=l,v=[],b=0;b<f;b++)for(var g=o[b],m=0;m<l;m++){var _=o[m],M={type:a.type,colValue:g,rowValue:_,colField:g,rowField:_,colIndex:b,rowIndex:m,cols:f,rows:l,data:i,region:a.getRegion(l,f,b,m)};v.push(M)}return v},h.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1&&(a[i].title=null,a[i].label=null)},h.setYAxis=function(i,a,o){o.colIndex!==0&&(a[i].title=null,a[i].label=null)},r}(u);E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(125),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="mirror",this.transpose=!1,i},h.init=function(){var i=this;i.transpose?(i.cols=2,i.rows=1):(i.cols=1,i.rows=2),c.prototype.init.call(this)},h.beforeProcessView=function(i,a){this.transpose?a.colIndex%2==0?i.coord().transpose().scale(-1,1):i.coord().transpose():a.rowIndex%2!=0&&i.coord().scale(1,-1)},h.renderTitle=function(i,a){this.transpose?this.drawColTitle(i,a):this.drawRowTitle(i,a)},h.setXAxis=function(i,a,o){(o.colIndex===1||o.rowIndex===1)&&(a[i].label=null,a[i].title=null)},h.setYAxis=function(){},r}(u);E.exports=s},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var u=e(46),s=e(0),c=s.assign,r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return o.type="tree",o.line={lineWidth:1,stroke:"#ddd"},o.lineSmooth=!1,o},i.generateFacets=function(o){var l=this,f=l.fields;if(!f.length)throw"Please specify for the fields for facet!";var v=[],b=l.getRootFacet(o);return v.push(b),b.children=l.getChildFacets(o,1,v),l.setRegion(v),v},i.getRootFacet=function(o){var l=this,f={type:l.type,rows:l.getRows(),rowIndex:0,colIndex:0,colValue:l.rootTitle,data:o};return f},i.getRows=function(){return this.fields.length+1},i.getChildFacets=function(o,l,f){var v=this,b=v.fields,g=b.length;if(!(g<l)){var m=[],_=b[l-1],M=v.getFieldValues(_,o);return M.forEach(function(x,y){var S=[{field:_,value:x,values:M}],P=v.getFilter(S),A=o.filter(P);if(A.length){var O={type:v.type,colValue:x,colField:_,colIndex:y,rows:v.getRows(),rowIndex:l,data:A,children:v.getChildFacets(A,l+1,f)};m.push(O),f.push(O)}}),m}},i.setRegion=function(o){var l=this;l.forceColIndex(o),o.forEach(function(f){f.region=l.getRegion(f.rows,f.cols,f.colIndex,f.rowIndex)})},i.forceColIndex=function(o){var l=this,f=[],v=0;o.forEach(function(x){l.isLeaf(x)&&(f.push(x),x.colIndex=v,v++)}),f.forEach(function(x){x.cols=f.length});for(var b=l.fields.length,g=b-1;g>=0;g--)for(var m=l.getFacetsByLevel(o,g),_=0;_<m.length;_++){var M=m[_];l.isLeaf(M)||(M.originColIndex=M.colIndex,M.colIndex=l.getRegionIndex(M.children),M.cols=f.length)}},i.getFacetsByLevel=function(o,l){var f=[];return o.forEach(function(v){v.rowIndex===l&&f.push(v)}),f},i.getRegion=function(o,l,f,v){var b=1/l,g=1/o,m={x:b*f,y:g*v},_={x:m.x+b,y:m.y+g*2/3};return{start:m,end:_}},i.getRegionIndex=function(o){var l=o[0],f=o[o.length-1];return(f.colIndex-l.colIndex)/2+l.colIndex},i.isLeaf=function(o){return!o.children||!o.children.length},i.setXAxis=function(o,l,f){f.rowIndex!==f.rows-1&&(l[o].label=null,l[o].title=null)},i.setYAxis=function(o,l,f){f.originColIndex!==0&&f.colIndex!==0&&(l[o].title=null,l[o].label=null)},i.onPaint=function(){h.prototype.onPaint.call(this),this.group.clear(),this.facets&&this.line&&this.drawLines(this.facets,this.group)},i.drawLines=function(o,l){var f=this,v=l.addGroup();o.forEach(function(b){if(!f.isLeaf(b)){var g=b.children;f._addFacetLines(b,g,v)}})},i._addFacetLines=function(o,l,f){var v=this,b=o.view,g=b.getViewRegion(),m={x:g.start.x+(g.end.x-g.start.x)/2,y:g.start.y};l.forEach(function(_){var M=_.view.getViewRegion(),x={x:M.start.x+(M.end.x-M.start.x)/2,y:M.end.y},y={x:m.x,y:m.y+(x.y-m.y)/2},S={x:x.x,y:y.y};v._drawLine([m,y,S,x],f)})},i._getPath=function(o){var l=this,f=[],v=l.lineSmooth;return v?(f.push(["M",o[0].x,o[0].y]),f.push(["C",o[1].x,o[1].y,o[2].x,o[2].y,o[3].x,o[3].y])):o.forEach(function(b,g){g===0?f.push(["M",b.x,b.y]):f.push(["L",b.x,b.y])}),f},i._drawLine=function(o,l){var f=this,v=f._getPath(o),b=f.line;l.addShape("path",{attrs:c({path:v},b)})},n}(u);E.exports=r},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function u(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),c=e(128),r=e(0);e(304);var h=function(i){u(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="area",f.shapeType="area",f.generatePoints=!0,f.sortable=!0,f};function o(l){var f;return f=i.call(this,l)||this,r.assign(t(f),c),f}return a.draw=function(f,v,b,g){var m=this,_=this.getDrawCfg(f[0]);m._applyViewThemeShapeStyle(_,_.shape,b);var M=this.splitData(f);_.origin=f,r.each(M,function(x,y){_.splitedIndex=y;var S=x.map(function(A){return A.points});_.points=S;var P=b.drawShape(_.shape,_,v);m.appendShapeInfo(P,g+y)})},o}(s),n=function(i){u(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"stack"}],f},a}(h);h.Stack=n,s.Area=h,s.AreaStack=n,E.exports=h},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(8);e(305);var s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="edge",i.shapeType="edge",i.generatePoints=!0,i},r}(u);u.Edge=s,E.exports=s},function(E,T,e){function t(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var u=e(65),s=u.ColorUtil,c=e(8),r=e(0),h="_origin",n="shadowCanvas",i="valueRange",a="imageShape",o="mappedData",l="grayScaleBlurredCanvas",f="heatmapSize",v=function(b){t(g,b);function g(){return b.apply(this,arguments)||this}var m=g.prototype;return m.getDefaultCfg=function(){var M=b.prototype.getDefaultCfg.call(this);return M.type="heatmap",M.paletteCache={},M},m._prepareRange=function(){var M=this,x=M.get(o),y=M.getAttr("color"),S=y.field,P=Infinity,A=-Infinity;x.forEach(function(L){var H=L[h][S];H>A&&(A=H),H<P&&(P=H)}),P===A&&(P=A-1);var O=[P,A];M.set(i,O)},m._prepareSize=function(){var M=this,x=M.getDefaultValue("size");r.isNumber(x)||(x=M._getDefaultSize());var y=M.get("styleOptions"),S=y&&r.isObject(y.style)?y.style.blur:null;(!r.isFinite(S)||S===null)&&(S=x/2),M.set(f,{blur:S,radius:x})},m._getDefaultSize=function(){var M=this,x=M.getAttr("position"),y=M.get("coord"),S=Math.min(y.width/(x.scales[0].ticks.length*4),y.height/(x.scales[1].ticks.length*4));return S},m._colorize=function(M){for(var x=this,y=x.getAttr("color"),S=M.data,P=x.get("paletteCache"),A=3;A<S.length;A+=4){var O=S[A];if(O){var L=void 0;P[O]?L=P[O]:(L=s.rgb2arr(y.gradient(O/256)),P[O]=L),S[A-3]=L[0],S[A-2]=L[1],S[A-1]=L[2],S[A]=O}}},m._prepareGreyScaleBlurredCircle=function(M,x){var y=this,S=y.get(l);S||(S=document.createElement("canvas"),y.set(l,S));var P=M+x,A=S.getContext("2d");S.width=S.height=P*2,A.clearRect(0,0,S.width,S.height),A.shadowOffsetX=A.shadowOffsetY=P*2,A.shadowBlur=x,A.shadowColor="black",A.beginPath(),A.arc(-P,-P,M,0,Math.PI*2,!0),A.closePath(),A.fill()},m._drawGrayScaleBlurredCircle=function(M,x,y,S,P){var A=this,O=A.get(l);P.globalAlpha=S,P.drawImage(O,M-y,x-y)},m._getShadowCanvasCtx=function(){var M=this,x=M.get(n);x||(x=document.createElement("canvas"),M.set(n,x));var y=M.get("coord");return y&&(x.width=y.width,x.height=y.height),x.getContext("2d")},m._clearShadowCanvasCtx=function(){var M=this._getShadowCanvasCtx();M.clearRect(0,0,M.canvas.width,M.canvas.height)},m._getImageShape=function(){var M=this,x=M.get(a);if(x)return x;var y=M.get("container");return x=y.addShape("Image",{}),M.set(a,x),x},m.clear=function(){this._clearShadowCanvasCtx(),b.prototype.clear.call(this)},m.drawWithRange=function(M){var x=this,y=x.get("coord"),S=y.start,P=y.end,A=y.width,O=y.height,L=x.getAttr("color").field,H=x.get(f);x._clearShadowCanvasCtx();var F=x._getShadowCanvasCtx(),K=x.get(o);M&&(K=K.filter(function(ut){return ut[h][L]<=M[1]&&ut[h][L]>=M[0]}));for(var G=x._getScale(L),U=0;U<K.length;U++){var Z=K[U],J=x.getDrawCfg(Z),rt=G.scale(Z[h][L]);x._drawGrayScaleBlurredCircle(J.x-S.x,J.y-P.y,H.radius+H.blur,rt,F)}var vt=F.getImageData(0,0,A,O);x._clearShadowCanvasCtx(),x._colorize(vt),F.putImageData(vt,0,0);var mt=x._getImageShape();mt.attr("x",S.x),mt.attr("y",P.y),mt.attr("width",A),mt.attr("height",O),mt.attr("img",F.canvas)},m.draw=function(M){var x=this;x.set(o,M),x._prepareRange(),x._prepareSize();var y=x.get(f);x._prepareGreyScaleBlurredCircle(y.radius,y.blur);var S=x.get(i);x.drawWithRange(S)},g}(c);c.Heatmap=v,E.exports=v},function(E,T,e){var t=e(8);t.Point=e(301),t.PointJitter=t.Point.Jitter,t.PointStack=t.Point.Stack,t.Path=e(130),t.Line=e(297),t.LineStack=t.Line.Stack,t.Interval=e(293),t.IntervalStack=t.Interval.Stack,t.IntervalDodge=t.Interval.Dodge,t.IntervalSymmetric=t.Interval.Symmetric,t.Area=e(289),t.AreaStack=t.Area.Stack,t.Polygon=e(302),t.Schema=e(303),t.SchemaDodge=t.Schema.Dodge,t.Edge=e(290),t.Heatmap=e(291),t.Venn=e(315),t.Violin=e(316),E.exports=t},function(E,T,e){function t(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function u(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var s=e(8),c=e(0),r=e(70);e(306);var h=function(o){u(f,o);var l=f.prototype;l.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.type="interval",b.shapeType="interval",b.generatePoints=!0,b};function f(v){var b;return b=o.call(this,v)||this,c.assign(t(b),r),b}return l.createShapePointsCfg=function(b){var g=o.prototype.createShapePointsCfg.call(this,b);return g.size=this.getNormalizedSize(b),g},l.clearInner=function(){o.prototype.clearInner.call(this),this.set("defaultSize",null)},f}(s),n=function(o){u(l,o);function l(){return o.apply(this,arguments)||this}var f=l.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"stack"}],b},l}(h),i=function(o){u(l,o);function l(){return o.apply(this,arguments)||this}var f=l.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"dodge"}],b},l}(h),a=function(o){u(l,o);function l(){return o.apply(this,arguments)||this}var f=l.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"symmetric"}],b},l}(h);h.Stack=n,h.Dodge=i,h.Symmetric=a,s.Interval=h,s.IntervalStack=n,s.IntervalDodge=i,s.IntervalSymmetric=a,E.exports=h},function(E,T,e){var t=e(69),u=e(127),s=e(296),c=e(295),r={getLabelsClass:function(n,i){var a=t;return n==="polar"?a=u:n==="theta"?a=s:(i==="interval"||i==="polygon")&&(a=c),a}};E.exports=r},function(E,T,e){var t=e(0),u=e(69),s=function c(r){c.superclass.constructor.call(this,r)};t.extend(s,u),t.augment(s,{setLabelPosition:function(r,h,n,i){t.isFunction(i)&&(i=i(r.text,h._origin,n));var a=this.get("coord"),o=a.isTransposed,l=a.convertPoint(h.points[0]),f=a.convertPoint(h.points[2]),v=(l.x-f.x)/2*(o?-1:1),b=(l.y-f.y)/2*(o?-1:1);switch(i){case"right":o?(r.x-=v,r.y+=b,r.textAlign=r.textAlign||"center"):(r.x-=v,r.y+=b,r.textAlign=r.textAlign||"left");break;case"left":o?(r.x-=v,r.y-=b,r.textAlign=r.textAlign||"center"):(r.x+=v,r.y+=b,r.textAlign=r.textAlign||"right");break;case"bottom":o?(r.x-=v*2,r.textAlign=r.textAlign||"left"):(r.y+=b*2,r.textAlign=r.textAlign||"center");break;case"middle":o?r.x-=v:r.y+=b,r.textAlign=r.textAlign||"center";break;case"top":o?r.textAlign=r.textAlign||"left":r.textAlign=r.textAlign||"center";break;default:break}}}),E.exports=s},function(E,T,e){var t=e(0),u=e(127),s=e(25),c=e(5),r=5;function h(a,o,l){return{x:a.x+l*Math.cos(o),y:a.y+l*Math.sin(o)}}function n(a,o,l,f,v){var b=!0,g=l.start,m=l.end,_=Math.min(g.y,m.y),M=Math.abs(g.y-m.y),x,y=0,S=Number.MIN_VALUE,P=a.map(function(L){return L.y>y&&(y=L.y),L.y<S&&(S=L.y),{size:o,targets:[L.y-_]}});for(S-=_,y-_>M&&(M=y-_);b;)for(P.forEach(function(L){var H=(Math.min.apply(S,L.targets)+Math.max.apply(S,L.targets))/2;L.pos=Math.min(Math.max(S,H-L.size/2),M-L.size)}),b=!1,x=P.length;x--;)if(x>0){var A=P[x-1],O=P[x];A.pos+A.size>O.pos&&(A.size+=O.size,A.targets=A.targets.concat(O.targets),A.pos+A.size>M&&(A.pos=M-A.size),P.splice(x,1),b=!0)}x=0,P.forEach(function(L){var H=_+o/2;L.targets.forEach(function(){a[x].y=L.pos+H,H+=o,x++})}),a.forEach(function(L){var H=L.r*L.r,F=Math.pow(Math.abs(L.y-f.y),2);if(H<F)L.x=f.x;else{var K=Math.sqrt(H-F);v?L.x=f.x+K:L.x=f.x-K}})}var i=function a(o){a.superclass.constructor.call(this,o)};t.extend(i,u),t.augment(i,{getDefaultCfg:function(){return{label:c.thetaLabels}},getDefaultOffset:function(o){return o.offset||0},adjustItems:function(o){var l=this,f=o[0]?o[0].offset:0;return f>0&&(o=l._distribute(o,f)),i.superclass.adjustItems.call(this,o)},_distribute:function(o,l){var f=this,v=f.get("coord"),b=v.getRadius(),g=f.get("label").labelHeight,m=v.getCenter(),_=b+l,M=_*2+g*2,x={start:v.start,end:v.end},y=f.get("geom");if(y){var S=y.get("view");x=S.getViewRegion()}var P=[[],[]];return o.forEach(function(A){!A||(A.textAlign==="right"?P[0].push(A):P[1].push(A))}),P.forEach(function(A,O){var L=parseInt(M/g,10);A.length>L&&(A.sort(function(H,F){return F["..percent"]-H["..percent"]}),A.splice(L,A.length-L)),A.sort(function(H,F){return H.y-F.y}),n(A,g,x,m,O)}),P[0].concat(P[1])},lineToLabel:function(o){var l=this,f=l.get("coord"),v=f.getRadius(),b=o.offset,g=o.orignAngle||o.angle,m=f.getCenter(),_=h(m,g,v+r/2),M=h(m,g,v+b/2);o.labelLine||(o.labelLine=l.get("label").labelLine||{}),o.labelLine.path=["M"+_.x,_.y+" Q"+M.x,M.y+" "+o.x,o.y].join(",")},getLabelRotate:function(o,l){var f;return l<0&&(f=o*180/Math.PI,f>90&&(f=f-180),f<-90&&(f=f+180)),f/180*Math.PI},getLabelAlign:function(o){var l=this,f=l.get("coord"),v=f.getCenter(),b;o.angle<=Math.PI/2&&o.x>=v.x?b="left":b="right";var g=l.getDefaultOffset(o);return g<=0&&(b==="right"?b="left":b="right"),b},getArcPoint:function(o){return o},getPointAngle:function(o){var l=this,f=l.get("coord"),v={x:t.isArray(o.x)?o.x[0]:o.x,y:o.y[0]};l.transLabelPoint(v);var b={x:t.isArray(o.x)?o.x[1]:o.x,y:o.y[1]};l.transLabelPoint(b);var g,m=s.getPointAngle(f,v);if(o.points&&o.points[0].y===o.points[1].y)g=m;else{var _=s.getPointAngle(f,b);m>=_&&(_=_+Math.PI*2),g=m+(_-m)/2}return g},getCirclePoint:function(o,l){var f=this,v=f.get("coord"),b=v.getCenter(),g=v.getRadius()+l,m=h(b,o,g);return m.angle=o,m.r=g,m}}),E.exports=i},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var u=e(8),s=e(130);e(307);var c=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return o.type="line",o.sortable=!0,o},n}(s),r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return o.hasDefaultAdjust=!0,o.adjusts=[{type:"stack"}],o},n}(c);c.Stack=r,u.Line=c,u.LineStack=r,E.exports=c},function(E,T,e){var t=e(0),u="_origin",s=e(129),c="_originActiveAttrs";function r(a,o){if(t.isNil(a)||t.isNil(o))return!1;var l=a.get("origin"),f=o.get("origin");return t.isEqual(l,f)}function h(a,o){if(!a||a.length!==o.length)return!0;var l=!1;return t.each(o,function(f,v){if(!r(f,a[v]))return l=!0,!1}),l}function n(a,o){var l={};return t.each(a,function(f,v){var b=o.attr(v);t.isArray(b)&&(b=t.cloneDeep(b)),l[v]=b}),l}var i={_isAllowActive:function(){var o=this.get("allowActive");if(t.isNil(o)){var l=this.get("view"),f=this.isShareTooltip(),v=l.get("options");if(v.tooltip===!1||!f)return!0}else return o;return!1},_onMouseenter:function(o){var l=this,f=o.shape,v=l.get("shapeContainer");f&&v.contain(f)&&l._isAllowActive()&&l.setShapesActived(f)},_onMouseleave:function(){var o=this,l=o.get("view"),f=l.get("canvas");o.get("activeShapes")&&(o.clearActivedShapes(),f.draw())},_bindActiveAction:function(){var o=this,l=o.get("view"),f=o.get("type");l.on(f+":mouseenter",t.wrapBehavior(o,"_onMouseenter")),l.on(f+":mouseleave",t.wrapBehavior(o,"_onMouseleave"))},_offActiveAction:function(){var o=this,l=o.get("view"),f=o.get("type");l.off(f+":mouseenter",t.getWrapBehavior(o,"_onMouseenter")),l.off(f+":mouseleave",t.getWrapBehavior(o,"_onMouseleave"))},_setActiveShape:function(o){var l=this,f=l.get("activedOptions")||{},v=o.get("origin"),b=v.shape||l.getDefaultValue("shape");t.isArray(b)&&(b=b[0]);var g=l.get("shapeFactory"),m=t.mix({},o.attr(),{origin:v}),_=g.getActiveCfg(b,m);f.style&&t.mix(_,f.style);var M=n(_,o);o.setSilent(c,M),f.animate?o.animate(_,300):o.attr(_),s.toFront(o)},setShapesActived:function(o){var l=this;t.isArray(o)||(o=[o]);var f=l.get("activeShapes");if(!!h(f,o)){var v=l.get("view"),b=v.get("canvas"),g=l.get("activedOptions");g&&g.highlight?(t.each(o,function(m){m.get("animating")&&m.stopAnimate()}),l.highlightShapes(o)):(f&&l.clearActivedShapes(),t.each(o,function(m){m.get("animating")&&m.stopAnimate(),m.get("visible")&&l._setActiveShape(m)})),l.set("activeShapes",o),b.draw()}},clearActivedShapes:function(){var o=this,l=o.get("shapeContainer"),f=o.get("activedOptions"),v=f&&f.animate;if(l&&!l.get("destroyed")){var b=o.get("activeShapes");t.each(b,function(_){var M=_.get(c);v?(_.stopAnimate(),_.animate(M,300)):_.attr(M),s.resetZIndex(_),_.setSilent(c,null)});var g=o.get("preHighlightShapes");if(g){var m=l.get("children");t.each(m,function(_){var M=_.get(c);M&&(v?(_.stopAnimate(),_.animate(M,300)):_.attr(M),s.resetZIndex(_),_.setSilent(c,null))})}o.set("activeShapes",null),o.set("preHighlightShapes",null)}},getGroupShapesByPoint:function(o){var l=this,f=l.get("shapeContainer"),v=[];if(f){var b=l.getXScale().field,g=l.getShapes(),m=l._getOriginByPoint(o);t.each(g,function(_){var M=_.get("origin");if(_.get("visible")&&M){var x=M[u][b];x===m[b]&&v.push(_)}})}return v},getSingleShapeByPoint:function(o){var l=this,f=l.get("shapeContainer"),v=f.get("canvas"),b=v.get("pixelRatio"),g;if(f&&(g=f.getShape(o.x*b,o.y*b)),g&&g.get("origin"))return g},highlightShapes:function(o,l){var f=this;t.isArray(o)||(o=[o]);var v=f.get("activeShapes");if(!!h(v,o)){v&&f.clearActivedShapes();var b=f.getShapes(),g=f.get("activedOptions"),m=g&&g.animate,_=g&&g.style;t.each(b,function(M){var x={};M.stopAnimate(),t.indexOf(o,M)!==-1?(t.mix(x,_,l),s.toFront(M)):(t.mix(x,{fillOpacity:.3,opacity:.3}),s.resetZIndex(M));var y=n(x,M);M.setSilent(c,y),m?M.animate(x,300):M.attr(x)}),f.set("preHighlightShapes",o),f.set("activeShapes",o)}}};E.exports=i},function(E,T,e){var t=e(0),u="_origin",s=e(129);function c(n,i){if(t.isNil(n)||t.isNil(i))return!1;var a=n.get("origin"),o=i.get("origin");return t.isEqual(a,o)}function r(n,i){var a={};return t.each(n,function(o,l){l==="transform"&&(l="matrix");var f=i.attr(l);t.isArray(f)&&(f=t.cloneDeep(f)),a[l]=f}),a}var h={_isAllowSelect:function(){var i=this.get("allowSelect");if(t.isNil(i)){var a=this.get("type"),o=this.get("coord"),l=o&&o.type;if(a==="interval"&&l==="theta")return!0}else return i;return!1},_onClick:function(i){var a=this;if(a._isAllowSelect()){var o=i.shape,l=a.get("shapeContainer");o&&l.contain(o)&&a.setShapeSelected(o)}},_bindSelectedAction:function(){var i=this,a=i.get("view"),o=i.get("type");a.on(o+":click",t.wrapBehavior(i,"_onClick"))},_offSelectedAction:function(){var i=this,a=i.get("view"),o=i.get("type");a.off(o+":click",t.getWrapBehavior(i,"_onClick"))},_setShapeStatus:function(i,a){var o=this,l=o.get("view"),f=o.get("selectedOptions")||{},v=f.animate!==!1,b=l.get("canvas");i.set("selected",a);var g=i.get("origin");if(a){var m=g.shape||o.getDefaultValue("shape");t.isArray(m)&&(m=m[0]);var _=o.get("shapeFactory"),M=t.mix({geom:o,point:g},f),x=_.getSelectedCfg(m,M);t.mix(x,M.style),i.get("_originAttrs")||(i.get("animating")&&i.stopAnimate(),i.set("_originAttrs",r(x,i))),f.toFront&&s.toFront(i),v?i.animate(x,300):(i.attr(x),b.draw())}else{var y=i.get("_originAttrs");f.toFront&&s.resetZIndex(i),i.set("_originAttrs",null),v?i.animate(y,300):(i.attr(y),b.draw())}},setShapeSelected:function(i){var a=this,o=a._getSelectedShapes(),l=a.get("selectedOptions")||{},f=l.cancelable!==!1;if(l.mode==="multiple")t.indexOf(o,i)===-1?(o.push(i),a._setShapeStatus(i,!0)):f&&(t.Array.remove(o,i),a._setShapeStatus(i,!1));else{var v=o[0];f&&(i=c(v,i)?null:i),c(v,i)||(v&&a._setShapeStatus(v,!1),i&&a._setShapeStatus(i,!0))}},clearSelected:function(){var i=this,a=i.get("shapeContainer");if(a&&!a.get("destroyed")){var o=i._getSelectedShapes();t.each(o,function(l){i._setShapeStatus(l,!1),l.set("_originAttrs",null)})}},setSelected:function(i){var a=this,o=a.getShapes();return t.each(o,function(l){var f=l.get("origin");f&&f[u]===i&&a.setShapeSelected(l)}),this},_getSelectedShapes:function(){var i=this,a=i.getShapes(),o=[];return t.each(a,function(l){l.get("selected")&&o.push(l)}),i.set("selectedShapes",o),o}};E.exports=h},function(E,T,e){var t=e(0),u=e(5),s=u.defaultColor,c="_origin";function r(n){return n.alias||n.field}var h={_getIntervalSize:function(i){var a=null,o=this.get("type"),l=this.get("coord");if(l.isRect&&(o==="interval"||o==="schema")){a=this.getSize(i[c]);var f=l.isTransposed?"y":"x";if(t.isArray(i[f])){var v=Math.abs(i[f][1]-i[f][0]);a=a<v?null:a}}return a},_snapEqual:function(i,a,o){var l;return i=o.translate(i),a=o.translate(a),o.isCategory?l=i===a:l=t.snapEqual(i,a),l},_getScaleValueByPoint:function(i){var a=0,o=this.get("coord"),l=this.getXScale(),f=o.invert(i),v=f.x;return this.isInCircle()&&v>(1+l.rangeMax())/2&&(v=l.rangeMin()),a=l.invert(v),l.isCategory&&(a=l.translate(a)),a},_getOriginByPoint:function(i){var a=this.getXScale(),o=this.getYScale(),l=a.field,f=o.field,v=this.get("coord"),b=v.invert(i),g=a.invert(b.x),m=o.invert(b.y),_={};return _[l]=g,_[f]=m,_},_getScale:function(i){var a=this,o=a.get("scales"),l=null;return t.each(o,function(f){if(f.field===i)return l=f,!1}),l},_getTipValueScale:function(){var i=this.getAttrsForLegend(),a;t.each(i,function(f){var v=f.getScale(f.type);if(v.isLinear)return a=v,!1});var o=this.getXScale(),l=this.getYScale();return!a&&l&&l.field==="..y"?o:a||l||o},_getTipTitleScale:function(i){var a=this;if(i)return a._getScale(i);var o=a.getAttr("position"),l=o.getFields(),f;return t.each(l,function(v){if(!v.includes(".."))return f=v,!1}),a._getScale(f)},_filterValue:function(i,a){var o=this.get("coord"),l=this.getYScale(),f=l.field,v=o.invert(a),b=v.y;b=l.invert(b);var g=i[i.length-1];return t.each(i,function(m){var _=m[c];if(_[f][0]<=b&&_[f][1]>=b)return g=m,!1}),g},getXDistance:function(){var i=this,a=i.get("xDistance");if(!a){var o=i.getXScale();if(o.isCategory)a=1;else{var l=o.values,f=o.translate(l[0]),v=f;t.each(l,function(g){g=o.translate(g),g<f&&(f=g),g>v&&(v=g)});var b=l.length;a=(v-f)/(b-1)}i.set("xDistance",a)}return a},findPoint:function(i,a){var o=this,l=o.get("type"),f=o.getXScale(),v=o.getYScale(),b=f.field,g=v.field,m=null;if(t.indexOf(["heatmap","point"],l)>-1){var _=o.get("coord"),M=_.invert(i),x=f.invert(M.x),y=v.invert(M.y),S=Infinity;return t.each(a,function(mt){var ut=Math.pow(mt[c][b]-x,2)+Math.pow(mt[c][g]-y,2);ut<S&&(S=ut,m=mt)}),m}var P=a[0],A=a[a.length-1];if(!P)return m;var O=o._getScaleValueByPoint(i),L=P[c][b],H=P[c][g],F=A[c][b],K=v.isLinear&&t.isArray(H);if(t.isArray(L))t.each(a,function(mt){var ut=mt[c];if(f.translate(ut[b][0])<=O&&f.translate(ut[b][1])>=O)if(K)t.isArray(m)||(m=[]),m.push(mt);else return m=mt,!1}),t.isArray(m)&&(m=this._filterValue(m,i));else{var G;if(!f.isLinear&&f.type!=="timeCat")t.each(a,function(mt,ut){var Rt=mt[c];if(o._snapEqual(Rt[b],O,f))if(K)t.isArray(m)||(m=[]),m.push(mt);else return m=mt,!1;else f.translate(Rt[b])<=O&&(A=mt,G=a[ut+1])}),t.isArray(m)&&(m=this._filterValue(m,i));else{if((O>f.translate(F)||O<f.translate(L))&&(O>f.max||O<f.min))return null;for(var U=0,Z=a.length-1,J;U<=Z;){J=Math.floor((U+Z)/2);var rt=a[J][c][b];if(o._snapEqual(rt,O,f))return a[J];f.translate(rt)<=f.translate(O)?(U=J+1,A=a[J],G=a[J+1]):(Z===0&&(A=a[0]),Z=J-1)}}A&&G&&Math.abs(f.translate(A[c][b])-O)>Math.abs(f.translate(G[c][b])-O)&&(A=G)}var vt=o.getXDistance();return!m&&Math.abs(f.translate(A[c][b])-O)<=vt/2&&(m=A),m},getTipTitle:function(i,a){var o="",l=this._getTipTitleScale(a);if(l){var f=i[l.field];o=l.getText(f)}else if(this.get("type")==="heatmap"){var v=this.getXScale(),b=this.getYScale(),g=v.getText(i[v.field]),m=b.getText(i[b.field]);o="( "+g+", "+m+" )"}return o},getTipValue:function(i,a){var o,l=a.field,f=i.key;if(o=i[l],t.isArray(o)){var v=[];t.each(o,function(b){v.push(a.getText(b))}),o=v.join("-")}else o=a.getText(o,f);return o},getTipName:function(i){var a,o,l=this._getGroupScales();if(l.length&&t.each(l,function(b){return o=b,!1}),o){var f=o.field;a=o.getText(i[f])}else{var v=this._getTipValueScale();a=r(v)}return a},getTipItems:function(i,a){var o=this,l=i[c],f=o.getTipTitle(l,a),v=o.get("tooltipCfg"),b=[],g,m;function _(A,O,L){if(!t.isNil(O)&&O!==""){var H={title:f,point:i,name:A||f,value:O,color:i.color||s,marker:!0};H.size=o._getIntervalSize(i),b.push(t.mix({},H,L))}}if(v){var M=v.fields,x=v.cfg,y=[];if(t.each(M,function(A){y.push(l[A])}),x){t.isFunction(x)&&(x=x.apply(null,y));var S=t.mix({},{point:i,title:f,color:i.color||s,marker:!0},x);S.size=o._getIntervalSize(i),b.push(S)}else t.each(M,function(A){if(!t.isNil(l[A])){var O=o._getScale(A);g=r(O),m=O.getText(l[A]),_(g,m)}})}else{var P=o._getTipValueScale();t.isNil(l[P.field])||(m=o.getTipValue(l,P),g=o.getTipName(l),_(g,m))}return b},isShareTooltip:function(){var i=this.get("shareTooltip"),a=this.get("type"),o=this.get("view"),l;if(o.get("parent")?l=o.get("parent").get("options"):l=o.get("options"),a==="interval"){var f=this.get("coord"),v=f.type;(v==="theta"||v==="polar"&&f.isTransposed)&&(i=!1)}else(!this.getYScale()||t.inArray(["contour","point","polygon","edge"],a))&&(i=!1);return l.tooltip&&t.isBoolean(l.tooltip.shared)&&(i=l.tooltip.shared),i}};E.exports=h},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(8),s=e(0);e(308);var c=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return l.type="point",l.shapeType="point",l.generatePoints=!0,l},a.drawPoint=function(l,f,v,b){var g=this,m=l.shape,_=g.getDrawCfg(l);g._applyViewThemeShapeStyle(_,m,v);var M;if(s.isArray(l.y)){var x=g.hasStack();s.each(l.y,function(y,S){_.y=y,_.yIndex=S,(!x||S!==0)&&(M=v.drawShape(m,_,f),g.appendShapeInfo(M,b+S))})}else s.isNil(l.y)||(M=v.drawShape(m,_,f),g.appendShapeInfo(M,b))},i}(u),r=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return l.hasDefaultAdjust=!0,l.adjusts=[{type:"jitter"}],l},i}(c),h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return l.hasDefaultAdjust=!0,l.adjusts=[{type:"stack"}],l},i}(c);c.Jitter=r,c.Stack=h,u.Point=c,u.PointJitter=r,u.PointStack=h,E.exports=c},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var u=e(8),s=e(0);e(309);var c=function(r){t(h,r);function h(){return r.apply(this,arguments)||this}var n=h.prototype;return n.getDefaultCfg=function(){var a=r.prototype.getDefaultCfg.call(this);return a.type="polygon",a.shapeType="polygon",a.generatePoints=!0,a},n.createShapePointsCfg=function(a){var o=r.prototype.createShapePointsCfg.call(this,a),l=this,f=o.x,v=o.y,b;if(!(s.isArray(f)&&s.isArray(v))){var g=l.getXScale(),m=l.getYScale(),_=g.values?g.values.length:g.ticks.length,M=m.values?m.values.length:m.ticks.length,x=.5*1/_,y=.5*1/M;g.isCategory&&m.isCategory?(f=[f-x,f-x,f+x,f+x],v=[v-y,v+y,v+y,v-y]):s.isArray(f)?(b=f,f=[b[0],b[0],b[1],b[1]],v=[v-y/2,v+y/2,v+y/2,v-y/2]):s.isArray(v)&&(b=v,v=[b[0],b[1],b[1],b[0]],f=[f-x/2,f-x/2,f+x/2,f+x/2]),o.x=f,o.y=v}return o},h}(u);u.Polygon=c,E.exports=c},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function u(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),c=e(0),r=e(70);e(310);var h=function(i){u(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="schema",f.shapeType="schema",f.generatePoints=!0,f};function o(l){var f;return f=i.call(this,l)||this,c.assign(t(f),r),f}return a.createShapePointsCfg=function(f){var v=i.prototype.createShapePointsCfg.call(this,f);return v.size=this.getNormalizedSize(f),v},a.clearInner=function(){i.prototype.clearInner.call(this),this.set("defaultSize",null)},o}(s),n=function(i){u(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"dodge"}],f},a}(h);h.Dodge=n,s.Schema=h,s.SchemaDodge=n,E.exports=h},function(E,T,e){var t=e(0),u=e(9),s=e(25),c=e(23),r=e(5);function h(v){var b=r.shape.hollowArea,g=t.mix({},b,v.style);return c.addStrokeAttrs(g,v),t.isNumber(v.size)&&(g.lineWidth=v.size),g}function n(v){var b=r.shape.area,g=t.mix({},b,v.style);return c.addFillAttrs(g,v),v.color&&(g.stroke=g.stroke||v.color),t.isNumber(v.size)&&(g.lineWidth=v.size),g}function i(v,b,g){var m=[],_=[],M=[],x=[],y=v.isInCircle;return t.each(v.points,function(S){M.push(S[1]),x.push(S[0])}),x=x.reverse(),_.push(M,x),t.each(_,function(S,P){var A=[];S=g.parsePoints(S);var O=S[0];y&&S.push({x:O.x,y:O.y}),b?A=s.getSplinePath(S,!1,v.constraint):A=s.getLinePath(S,!1),P>0&&(A[0][0]="L"),m=m.concat(A)}),m.push(["Z"]),m}function a(v){return{symbol:function(g,m,_){return[["M",g-_,m-4],["L",g+_,m-4],["L",g+_,m+4],["L",g-_,m+4],["Z"]]},radius:5,fill:v.color,fillOpacity:.6}}function o(v,b){if(v==="line"||v==="smoothLine"){var g=b.lineWidth||0;return{lineWidth:g+1}}var m=b.fillOpacity||b.opacity||1;return{fillOpacity:m-.15,strokeOpacity:m-.15}}function l(v,b,g){var m=v._coord,_=m.convertPoint(b.points[0][1]);return g.addShape("circle",{attrs:t.mix({x:_.x,y:_.y,r:2,fill:b.color},b.style)})}var f=u.registerFactory("area",{defaultShapeType:"area",getDefaultPoints:function(b){var g=[],m=b.x,_=b.y,M=b.y0;return _=t.isArray(_)?_:[M,_],t.each(_,function(x){g.push({x:m,y:x})}),g},getActiveCfg:function(b,g){return o(b,g)},drawShape:function(b,g,m){var _=this.getShape(b),M;return g.points.length===1&&r.showSinglePoint?M=l(this,g,m):M=_.draw(g,m),M&&(M.set("origin",g.origin),M._id=g.splitedIndex?g._id+g.splitedIndex:g._id,M.name=this.name),M},getSelectedCfg:function(b,g){return g&&g.style?g.style:this.getActiveCfg(b,g)}});u.registerShape("area","area",{draw:function(b,g){var m=n(b),_=i(b,!1,this);return g.addShape("path",{attrs:t.mix(m,{path:_})})},getMarkerCfg:function(b){return a(b)}}),u.registerShape("area","smooth",{draw:function(b,g){var m=n(b),_=this._coord;b.constraint=[[_.start.x,_.end.y],[_.end.x,_.start.y]];var M=i(b,!0,this);return g.addShape("path",{attrs:t.mix(m,{path:M})})},getMarkerCfg:function(b){return a(b)}}),u.registerShape("area","line",{draw:function(b,g){var m=h(b),_=i(b,!1,this);return g.addShape("path",{attrs:t.mix(m,{path:_})})},getMarkerCfg:function(b){return a(b)}}),u.registerShape("area","smoothLine",{draw:function(b,g){var m=h(b),_=i(b,!0,this);return g.addShape("path",{attrs:t.mix(m,{path:_})})},getMarkerCfg:function(b){return a(b)}}),f.spline=f.smooth,E.exports=f},function(E,T,e){var t=e(0),u=e(9),s=e(23),c=e(5),r=e(25),h=1/3;function n(g){var m=c.shape.edge,_=t.mix({},m,g.style);return s.addStrokeAttrs(_,g),g.size&&(_.lineWidth=g.size),_}var i=u.registerFactory("edge",{defaultShapeType:"line",getDefaultPoints:function(m){return s.splitPoints(m)},getActiveCfg:function(m,_){var M=_.lineWidth||0;return{lineWidth:M+1}}});function a(g,m){var _=[];_.push({x:g.x,y:g.y*(1-1/2)+m.y*1/2}),_.push({y:g.y*(1-1/2)+m.y*1/2,x:m.x}),_.push(m);var M=["C"];return t.each(_,function(x){M.push(x.x,x.y)}),M}function o(g,m){var _=[];_.push({x:m.x,y:m.y}),_.push(g);var M=["Q"];return t.each(_,function(x){M.push(x.x,x.y)}),M}function l(g,m){var _=a(g,m),M=[["M",g.x,g.y]];return M.push(_),M}function f(g,m,_){var M=o(m,_),x=[["M",g.x,g.y]];return x.push(M),x}function v(g,m){var _=o(g[1],m),M=o(g[3],m),x=[["M",g[0].x,g[0].y]];return x.push(M),x.push(["L",g[3].x,g[3].y]),x.push(["L",g[2].x,g[2].y]),x.push(_),x.push(["L",g[1].x,g[1].y]),x.push(["L",g[0].x,g[0].y]),x.push(["Z"]),x}function b(g,m){var _=[];_.push({y:g.y*(1-h)+m.y*h,x:g.x}),_.push({y:g.y*(1-h)+m.y*h,x:m.x}),_.push(m);var M=[["M",g.x,g.y]];return t.each(_,function(x){M.push(["L",x.x,x.y])}),M}u.registerShape("edge","line",{draw:function(m,_){var M=this.parsePoints(m.points),x=n(m),y=r.getLinePath(M),S=_.addShape("path",{attrs:t.mix(x,{path:y})});return S},getMarkerCfg:function(m){return t.mix({symbol:"circle",radius:4.5},n(m))}}),u.registerShape("edge","vhv",{draw:function(m,_){var M=m.points,x=n(m),y=b(M[0],M[1]);y=this.parsePath(y);var S=_.addShape("path",{attrs:t.mix(x,{path:y})});return S},getMarkerCfg:function(m){return t.mix({symbol:"circle",radius:4.5},n(m))}}),u.registerShape("edge","smooth",{draw:function(m,_){var M=m.points,x=n(m),y=l(M[0],M[1]);y=this.parsePath(y);var S=_.addShape("path",{attrs:t.mix(x,{path:y})});return S},getMarkerCfg:function(m){return t.mix({symbol:"circle",radius:4.5},n(m))}}),u.registerShape("edge","arc",{draw:function(m,_){var M=m.points,x=M.length>2?"weight":"normal",y=n(m),S,P;if(m.isInCircle){var A={x:0,y:1};x==="normal"?P=f(M[0],M[1],A):(y.fill=y.stroke,P=v(M,A)),P=this.parsePath(P),S=_.addShape("path",{attrs:t.mix(y,{path:P})})}else if(x==="normal")M=this.parsePoints(M),S=_.addShape("arc",{attrs:t.mix(y,{x:(M[1].x+M[0].x)/2,y:M[0].y,r:Math.abs(M[1].x-M[0].x)/2,startAngle:Math.PI,endAngle:Math.PI*2})});else{P=[["M",M[0].x,M[0].y],["L",M[1].x,M[1].y]];var O=a(M[1],M[3]),L=a(M[2],M[0]);P.push(O),P.push(["L",M[3].x,M[3].y]),P.push(["L",M[2].x,M[2].y]),P.push(L),P.push(["Z"]),P=this.parsePath(P),y.fill=y.stroke,S=_.addShape("path",{attrs:t.mix(y,{path:P})})}return S},getMarkerCfg:function(m){return t.mix({symbol:"circle",radius:4.5},n(m))}}),E.exports=i},function(E,T,e){var t=e(0),u=e(9),s=e(25),c=e(23),r=e(5),h=e(16),n=t.PathUtil;function i(A,O){var L=A.x,H=A.y,F=A.y0,K=A.size,G=F,U=H;t.isArray(H)&&(U=H[1],G=H[0]);var Z,J;t.isArray(L)?(Z=L[0],J=L[1]):(Z=L-K/2,J=L+K/2);var rt=[];return rt.push({x:Z,y:G},{x:Z,y:U}),O?rt.push({x:J,y:(U+G)/2}):rt.push({x:J,y:U},{x:J,y:G}),rt}function a(A){for(var O=[],L=0;L<A.length;L++){var H=A[L];if(H){var F=L===0?"M":"L";O.push([F,H.x,H.y])}}var K=A[0];return O.push(["L",K.x,K.y]),O.push(["z"]),O}function o(A){var O=A.x,L=A.y,H=A.y0,F=[];return t.isArray(L)?t.each(L,function(K,G){F.push({x:t.isArray(O)?O[G]:O,y:K})}):F.push({x:O,y:L},{x:O,y:H}),F}function l(A){var O=A.x,L=t.isArray(A.y)?A.y[1]:A.y,H=t.isArray(A.y)?A.y[0]:A.y0,F=A.size,K=[];return K.push({x:O-F/2,y:L},{x:O+F/2,y:L},{x:O,y:L},{x:O,y:H},{x:O-F/2,y:H},{x:O+F/2,y:H}),K}function f(A){var O=[];return O.push(["M",A[0].x,A[0].y],["L",A[1].x,A[1].y],["M",A[2].x,A[2].y],["L",A[3].x,A[3].y],["M",A[4].x,A[4].y],["L",A[5].x,A[5].y]),O}function v(A){var O=r.shape.interval,L=t.mix({},O,A.style);return c.addFillAttrs(L,A),A.color&&(L.stroke=L.stroke||A.color),L}function b(A){var O=r.shape.hollowInterval,L=t.mix({},O,A.style);return c.addStrokeAttrs(L,A),L}function g(A,O){var L=[],H=A.points,F=A.nextPoints;return t.isNil(F)?O?L.push(["M",H[0].x,H[0].y],["L",H[1].x,H[1].y],["L",H[2].x,H[2].y],["L",H[3].x,H[3].y],["Z"]):L.push(["M",H[0].x,H[0].y],["L",H[1].x,H[1].y],["L",H[2].x,H[2].y],["L",H[2].x,H[2].y],["Z"]):L.push(["M",H[0].x,H[0].y],["L",H[1].x,H[1].y],["L",F[1].x,F[1].y],["L",F[0].x,F[0].y],["Z"]),L}function m(A,O){var L=O.getRadius(),H=O.innerRadius,F,K,G=L*H,U,Z;return!t.isArray(A.x)&&t.isArray(A.y)&&(A.x=[A.x,A.x]),t.isArray(A.x)?(U={x:A.x[0],y:A.y[0]},Z={x:A.x[1],y:A.y[1]},F=s.getPointAngle(O,U),K=s.getPointAngle(O,Z),K<=F&&(K=K+Math.PI*2)):(Z=A,F=O.startAngle,K=s.getPointAngle(O,Z)),{r:L,ir:G,startAngle:F,endAngle:K}}function _(A,O){var L=O.geom,H=L.get("coord"),F=O.point,K=7.5,G;if(H&&H.type==="theta"){var U=m(F,H),Z=(U.endAngle-U.startAngle)/2+U.startAngle,J=K*Math.cos(Z),rt=K*Math.sin(Z);G={transform:[["t",J,rt]]}}return t.mix({},G)}var M=u.registerFactory("interval",{defaultShapeType:"rect",getActiveCfg:function(O,L){if(!O||t.inArray(["rect","funnel","pyramid"],O)){var H=L.fillOpacity||L.opacity||1;return{fillOpacity:H-.15}}var F=L.lineWidth||0;return{lineWidth:F+1}},getDefaultPoints:function(O){return i(O)},getSelectedCfg:function(O,L){return _(O,L)}});u.registerShape("interval","rect",{draw:function(O,L){var H=v(O),F=a(O.points);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(H,{path:F})})},getMarkerCfg:function(O){var L=v(O),H=O.isInCircle;return t.mix({symbol:H?"circle":"square",radius:H?4.5:4},L)}}),u.registerShape("interval","hollowRect",{draw:function(O,L){var H=b(O),F=a(O.points);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(H,{path:F})})},getMarkerCfg:function(O){var L=b(O),H=O.isInCircle;return t.mix({symbol:H?"circle":"square",radius:H?4.5:4},L)}}),u.registerShape("interval","line",{getPoints:function(O){return o(O)},draw:function(O,L){var H=b(O);H.lineWidth=O.size||1;var F=a(O.points);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(H,{path:F})})},getMarkerCfg:function(O){var L=b(O);return t.mix({symbol:"line",radius:5},L)}}),u.registerShape("interval","tick",{getPoints:function(O){return l(O)},draw:function(O,L){var H=b(O);H.lineWidth||(H.lineWidth=2);var F=f(O.points);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(H,{path:F})})},getMarkerCfg:function(O){var L=b(O);return t.mix({symbol:"tick",radius:5},L)}}),u.registerShape("interval","funnel",{getPoints:function(O){return O.size=O.size*2,i(O)},draw:function(O,L){var H=v(O),F=g(O,!0);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(H,{path:F})})},getMarkerCfg:function(O){var L=v(O);return t.mix({symbol:"square",radius:4},L)}}),u.registerShape("interval","pyramid",{getPoints:function(O){return O.size=O.size*2,i(O,!0)},draw:function(O,L){var H=v(O),F=g(O,!1);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(H,{path:F})})},getMarkerCfg:function(O){var L=v(O);return t.mix({symbol:"square",radius:4},L)}});function x(A,O,L,H){return O===0?[[A+1/2*L/Math.PI/2,H/2],[A+1/2*L/Math.PI,H],[A+L/4,H]]:O===1?[[A+1/2*L/Math.PI/2*(Math.PI-2),H],[A+1/2*L/Math.PI/2*(Math.PI-1),H/2],[A+L/4,0]]:O===2?[[A+1/2*L/Math.PI/2,-H/2],[A+1/2*L/Math.PI,-H],[A+L/4,-H]]:[[A+1/2*L/Math.PI/2*(Math.PI-2),-H],[A+1/2*L/Math.PI/2*(Math.PI-1),-H/2],[A+L/4,0]]}function y(A,O,L,H,F,K,G){for(var U=Math.ceil(2*A/L*4)*2,Z=[];H<-Math.PI*2;)H+=Math.PI*2;for(;H>0;)H-=Math.PI*2;H=H/Math.PI/2*L;var J=K-A+H-A*2;Z.push(["M",J,O]);for(var rt=0,vt=0;vt<U;++vt){var mt=vt%4,ut=x(vt*L/4,mt,L,F);Z.push(["C",ut[0][0]+J,-ut[0][1]+O,ut[1][0]+J,-ut[1][1]+O,ut[2][0]+J,-ut[2][1]+O]),vt===U-1&&(rt=ut[2][0])}return Z.push(["L",rt+J,G+A]),Z.push(["L",J,G+A]),Z.push(["L",J,O]),Z}function S(A,O,L,H,F,K,G,U){for(var Z=G.getBBox(),J=Z.maxX-Z.minX,rt=Z.maxY-Z.minY,vt=5e3,mt=300,ut=0;ut<H;ut++){var Rt=K.addShape("path",{attrs:{path:y(U,Z.minY+rt*L,J/4,0,J/64,A,O),fill:F[ut],clip:G}});r.renderer==="canvas"&&Rt.animate({transform:[["t",J/2,0]],repeat:!0},vt-ut*mt)}}u.registerShape("interval","liquid-fill-gauge",{draw:function(O,L){var H=this,F=.5,K=0,G=Infinity;t.each(O.points,function(Rt){Rt.x<G&&(G=Rt.x),K+=Rt.x});var U=K/O.points.length,Z=H.parsePoint({x:U,y:F}),J=H.parsePoint({x:G,y:.5}),rt=Z.x-J.x,vt=Math.min(rt,J.y),mt=v(O),ut=new h.Circle({attrs:{x:Z.x,y:Z.y,r:vt}});return S(Z.x,Z.y,O.y/(2*Z.y),1,[mt.fill],L,ut,vt*4),L.addShape("circle",{attrs:t.mix(b(O),{x:Z.x,y:Z.y,r:vt+vt/8})})}});var P={};u.registerShape("interval","liquid-fill-path",{draw:function(O,L){var H=this,F=t.mix({},v(O)),K=O.shape[1],G=.5,U=0,Z=Infinity;t.each(O.points,function(at){at.x<Z&&(Z=at.x),U+=at.x});var J=U/O.points.length,rt=H.parsePoint({x:J,y:G}),vt=H.parsePoint({x:Z,y:.5}),mt=rt.x-vt.x,ut=Math.min(mt,vt.y),Rt;if(P[K])Rt=P[K];else{var Ft=n.parsePathString(K);P[K]=Rt={segments:Ft}}var wt=[];F.rotate&&(wt.push(["r",F.rotate/180*Math.PI]),delete F.rotate);var Mt=L.addShape("path",{attrs:t.mix(F,{fillOpacity:0,path:Rt.segments})}),St=t.cloneDeep(Mt.getBBox()),At=St.maxX-St.minX,nt=St.maxY-St.minY,Pt=Math.max(At,nt),z=ut*2/Pt;Mt.transform(wt.concat([["s",z,z]]));var q=z*At/2,gt=z*nt/2;Mt.transform([["t",rt.x-q,rt.y-gt]]),S(rt.x,rt.y,O.y/(2*rt.y),1,[F.fill],L,Mt,vt.y*4);var et=L.addShape("path",{attrs:t.mix(b(O),{path:Rt.segments})});return et.transform(wt.concat([["s",z,z],["t",rt.x-q,rt.y-gt]])),et}}),u.registerShape("interval","top-line",{draw:function(O,L){var H=v(O),F=O.style||{},K=[["M",O.points[1].x,O.points[1].y],["L",O.points[2].x,O.points[2].y]],G={stroke:F.stroke||"white",lineWidth:F.lineWidth||1,path:this.parsePath(K)},U=a(O.points);U=this.parsePath(U),delete H.stroke;var Z=L.addShape("path",{attrs:t.mix(H,{zIndex:0,path:U})});return L.addShape("path",{zIndex:1,attrs:G}),Z},getMarkerCfg:function(O){var L=v(O),H=O.isInCircle;return t.mix({symbol:H?"circle":"square",radius:H?4.5:4},L)}}),E.exports=M},function(E,T,e){var t=e(0),u=e(25),s=e(23),c=e(9),r=e(5),h=[1,1],n=[5.5,1];function i(P){var A=r.shape.line,O=t.mix({},A,P.style);return s.addStrokeAttrs(O,P),P.size&&(O.lineWidth=P.size),O}function a(P){var A=r.shape.line,O=t.mix({lineWidth:2,radius:6},A,P.style);return s.addStrokeAttrs(O,P),O}function o(P,A,O,L){for(var H=[],F=L.isStack,K=[],G=0;G<P.length;G++){var U=P[G],Z=s.splitPoints(U);K.push(Z[0]),H.push(Z[1])}var J=l(H,A,O,L),rt=l(K,A,O,L);return F?J:J.concat(rt)}function l(P,A,O,L){var H;if(!A)H=u.getLinePath(P,!1),O&&H.push(["Z"]);else{var F=L.constraint;O&&P.length&&P.push({x:P[0].x,y:P[0].y}),H=u.getSplinePath(P,!1,F)}return H}function f(P,A){var O,L=P.points,H=P.isInCircle,F=L[0];return t.isArray(F.y)?O=o(L,A,H,P):O=l(L,A,H,P),O}function v(P,A){var O=[];return t.each(P,function(L,H){var F=P[H+1];O.push(L),F&&(O=O.concat(A(L,F)))}),O}function b(P){var A=[];return t.each(P,function(O,L){var H=L===0?["M",O.x,O.y]:["L",O.x,O.y];A.push(H)}),A}function g(P,A){var O=v(P.points,A);return b(O)}function m(P,A,O){return[["M",P-O,A],["L",P+O,A]]}function _(P,A,O){return[["M",P-O,A],["A",O/2,O/2,0,1,1,P,A],["A",O/2,O/2,0,1,0,P+O,A]]}function M(P,A){return t.mix({symbol:A?_:m},a(P))}function x(P,A){return t.mix({symbol:A},a(P))}function y(P,A,O){var L=A.points[0];return O.addShape("circle",{attrs:t.mix({x:L.x,y:L.y,r:2,fill:A.color},A.style)})}var S=c.registerFactory("line",{defaultShapeType:"line",getActiveCfg:function(A,O){var L=O.lineWidth||0;return{lineWidth:L+1}},getDefaultPoints:function(A){return s.splitPoints(A)},drawShape:function(A,O,L){var H=this.getShape(A),F;return O.points.length===1&&r.showSinglePoint?F=y(this,O,L):F=H.draw(O,L),F&&(F.set("origin",O.origin),F._id=O.splitedIndex?O._id+O.splitedIndex:O._id,F.name=this.name),F}});c.registerShape("line","line",{draw:function(A,O){var L=i(A),H=f(A,!1);return O.addShape("path",{attrs:t.mix(L,{path:H})})},getMarkerCfg:function(A){return M(A)}}),c.registerShape("line","dot",{draw:function(A,O){var L=i(A),H=f(A,!1);return O.addShape("path",{attrs:t.mix(L,{path:H,lineDash:h})})},getMarkerCfg:function(A){var O=M(A,!1);return O.lineDash=h,O}}),c.registerShape("line","dash",{draw:function(A,O){var L=i(A),H=f(A,!1);return O.addShape("path",{attrs:t.mix({path:H,lineDash:n},L)})},getMarkerCfg:function(A){var O=M(A,!1);return O.lineDash=O.lineDash||n,O}}),c.registerShape("line","smooth",{draw:function(A,O){var L=i(A),H=this._coord;A.constraint=[[H.start.x,H.end.y],[H.end.x,H.start.y]];var F=f(A,!0);return O.addShape("path",{attrs:t.mix(L,{path:F})})},getMarkerCfg:function(A){return M(A,!0)}}),c.registerShape("line","hv",{draw:function(A,O){var L=i(A),H=g(A,function(F,K){var G=[];return G.push({x:K.x,y:F.y}),G});return O.addShape("path",{attrs:t.mix(L,{path:H})})},getMarkerCfg:function(A){return x(A,function(O,L,H){return[["M",O-H-1,L-2.5],["L",O,L-2.5],["L",O,L+2.5],["L",O+H+1,L+2.5]]})}}),c.registerShape("line","vh",{draw:function(A,O){var L=i(A),H=g(A,function(F,K){var G=[];return G.push({x:F.x,y:K.y}),G});return O.addShape("path",{attrs:t.mix(L,{path:H})})},getMarkerCfg:function(A){return x(A,function(O,L,H){return[["M",O-H-1,L+2.5],["L",O,L+2.5],["L",O,L-2.5],["L",O+H+1,L-2.5]]})}}),c.registerShape("line","hvh",{draw:function(A,O){var L=i(A),H=g(A,function(F,K){var G=[],U=(K.x-F.x)/2+F.x;return G.push({x:U,y:F.y}),G.push({x:U,y:K.y}),G});return O.addShape("path",{attrs:t.mix(L,{path:H})})},getMarkerCfg:function(A){return x(A,function(O,L,H){return[["M",O-(H+1),L+2.5],["L",O-H/2,L+2.5],["L",O-H/2,L-2.5],["L",O+H/2,L-2.5],["L",O+H/2,L+2.5],["L",O+H+1,L+2.5]]})}}),c.registerShape("line","vhv",{draw:function(A,O){var L=i(A),H=g(A,function(F,K){var G=[],U=(K.y-F.y)/2+F.y;return G.push({x:F.x,y:U}),G.push({x:K.x,y:U}),G});return O.addShape("path",{attrs:t.mix(L,{path:H})})},getMarkerCfg:function(A){return x(A,function(O,L){return[["M",O-5,L+2.5],["L",O-5,L],["L",O,L],["L",O,L-3],["L",O,L+3],["L",O+6.5,L+3]]})}}),S.spline=S.smooth,E.exports=S},function(E,T,e){var t=e(0),u=e(23),s=e(5),c=e(9),r=e(16),h=r.Marker,n=t.PathUtil,i=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],a=["cross","tick","plus","hyphen","line","pointerLine","pointerArrow"],o=Math.sqrt(3);t.mix(h.Symbols,{hexagon:function(_,M,x){var y=x/2*o;return[["M",_,M-x],["L",_+y,M-x/2],["L",_+y,M+x/2],["L",_,M+x],["L",_-y,M+x/2],["L",_-y,M-x/2],["Z"]]},bowtie:function(_,M,x){var y=x-1.5;return[["M",_-x,M-y],["L",_+x,M+y],["L",_+x,M-y],["L",_-x,M+y],["Z"]]},cross:function(_,M,x){return[["M",_-x,M-x],["L",_+x,M+x],["M",_+x,M-x],["L",_-x,M+x]]},tick:function(_,M,x){return[["M",_-x/2,M-x],["L",_+x/2,M-x],["M",_,M-x],["L",_,M+x],["M",_-x/2,M+x],["L",_+x/2,M+x]]},plus:function(_,M,x){return[["M",_-x,M],["L",_+x,M],["M",_,M-x],["L",_,M+x]]},hyphen:function(_,M,x){return[["M",_-x,M],["L",_+x,M]]},line:function(_,M,x){return[["M",_,M-x],["L",_,M+x]]}});function l(m){var _=s.shape.point,M=t.mix({},_,m.style);return u.addFillAttrs(M,m),t.isNumber(m.size)&&(M.radius=m.size),M}function f(m){var _=s.shape.hollowPoint,M=t.mix({},_,m.style);return u.addStrokeAttrs(M,m),t.isNumber(m.size)&&(M.radius=m.size),M}var v=c.registerFactory("point",{defaultShapeType:"hollowCircle",getActiveCfg:function(_,M){var x=M.radius,y;return _&&(_.indexOf("hollow")===0||t.indexOf(a,_)!==-1)||!_?y=M.stroke||M.strokeStyle:y=M.fill||M.fillStyle,{radius:x+1,shadowBlur:x,shadowColor:y,stroke:y,strokeOpacity:1,lineWidth:1}},getDefaultPoints:function(_){return u.splitPoints(_)}});function b(m){var _=m.points[0].x,M=m.points[0].y,x=m.size[0],y=m.size[1],S=[["M",_-.5*x,M-.5*y],["L",_+.5*x,M-.5*y],["L",_+.5*x,M+.5*y],["L",_-.5*x,M+.5*y],["z"]];return S}c.registerShape("point","rect",{draw:function(_,M){var x=l(_),y=b(_);y=this.parsePath(y);var S=M.addShape("path",{attrs:t.mix(x,{path:y})});return S},getMarkerCfg:function(_){var M=l(_);return M.symbol="rect",M.radius=4.5,M}}),t.each(i,function(m){c.registerShape("point",m,{draw:function(M,x){var y=l(M);return x.addShape("Marker",{attrs:t.mix(y,{symbol:m,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=l(M);return x.symbol=m,x.radius=4.5,x}}),c.registerShape("point","hollow"+t.upperFirst(m),{draw:function(M,x){var y=f(M);return x.addShape("Marker",{attrs:t.mix(y,{symbol:m,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=f(M);return x.symbol=m,x.radius=4.5,x}})}),t.each(a,function(m){c.registerShape("point",m,{draw:function(M,x){var y=f(M);return x.addShape("Marker",{attrs:t.mix(y,{symbol:m,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=f(M);return x.symbol=m,x.radius=4.5,x}})}),c.registerShape("point","image",{draw:function(_,M){return _.points=this.parsePoints(_.points),M.addShape("image",{attrs:{x:_.points[0].x-_.size/2,y:_.points[0].y-_.size,width:_.size,height:_.size,img:_.shape[1]}})}});var g={};c.registerShape("point","path",{draw:function(_,M){var x=t.mix({},f(_),l(_)),y=_.shape[1],S=_.size||10,P;if(g[y])P=g[y];else{var A=n.parsePathString(y),O=t.flatten(A).filter(function(K){return t.isNumber(K)});g[y]=P={range:Math.max.apply(null,O)-Math.min.apply(null,O),segments:A}}var L=S/P.range,H=[];x.rotate&&(H.push(["r",x.rotate/180*Math.PI]),delete x.rotate);var F=M.addShape("path",{attrs:t.mix(x,{path:P.segments})});return H.push(["s",L,L],["t",_.x,_.y]),F.transform(H),F}}),E.exports=v},function(E,T,e){var t=e(0),u=e(9),s=e(23),c=e(5);function r(a){var o=c.shape.polygon,l=t.mix({},o,a.style);return s.addFillAttrs(l,a),l}function h(a){var o=c.shape.hollowPolygon,l=t.mix({},o,a.style);return s.addStrokeAttrs(l,a),l}function n(a){for(var o=a[0],l=1,f=[["M",o.x,o.y]];l<a.length;){var v=a[l];(v.x!==a[l-1].x||v.y!==a[l-1].y)&&(f.push(["L",v.x,v.y]),v.x===o.x&&v.y===o.y&&l<a.length-1&&(o=a[l+1],f.push(["Z"]),f.push(["M",o.x,o.y]),l++)),l++}return t.isEqual(f[f.length-1],o)||f.push(["L",o.x,o.y]),f.push(["Z"]),f}var i=u.registerFactory("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(o){var l=[];return t.each(o.x,function(f,v){var b=o.y[v];l.push({x:f,y:b})}),l},getActiveCfg:function(o,l){var f=l.lineWidth||1;if(o==="hollow")return{lineWidth:f+1};var v=l.fillOpacity||l.opacity||1;return{fillOpacity:v-.08}},getSelectedCfg:function(o,l){return l&&l.style?l.style:this.getActiveCfg(o,l)}});u.registerShape("polygon","polygon",{draw:function(o,l){if(!t.isEmpty(o.points)){var f=r(o),v=n(o.points);return v=this.parsePath(v),l.addShape("path",{attrs:t.mix(f,{path:v})})}},getMarkerCfg:function(o){return t.mix({symbol:"square",radius:4},r(o))}}),u.registerShape("polygon","hollow",{draw:function(o,l){if(!t.isEmpty(o.points)){var f=h(o),v=n(o.points);return v=this.parsePath(v),l.addShape("path",{attrs:t.mix(f,{path:v})})}},getMarkerCfg:function(o){return t.mix({symbol:"square",radius:4},r(o))}}),E.exports=i},function(E,T,e){var t=e(0),u=e(9),s=e(23),c=e(5);function r(g){t.isArray(g)||(g=[g]);var m=g[0],_=g[g.length-1],M=g.length>1?g[1]:m,x=g.length>3?g[3]:_,y=g.length>2?g[2]:M;return{min:m,max:_,min1:M,max1:x,median:y}}function h(g,m){t.each(g,function(_){m.push({x:_[0],y:_[1]})})}function n(g){var m=c.shape.schema,_=t.mix({},m,g.style);return s.addStrokeAttrs(_,g),_}function i(g){var m=c.shape.schema,_=t.mix({},m,g.style);return s.addFillAttrs(_,g),g.color&&(_.stroke=g.color||_.stroke),_}function a(g,m,_){var M=[],x,y;return t.isArray(m)?(y=r(m),x=[[g-_/2,y.max],[g+_/2,y.max],[g,y.max],[g,y.max1],[g-_/2,y.min1],[g-_/2,y.max1],[g+_/2,y.max1],[g+_/2,y.min1],[g,y.min1],[g,y.min],[g-_/2,y.min],[g+_/2,y.min],[g-_/2,y.median],[g+_/2,y.median]]):(m=m||.5,y=r(g),x=[[y.min,m-_/2],[y.min,m+_/2],[y.min,m],[y.min1,m],[y.min1,m-_/2],[y.min1,m+_/2],[y.max1,m+_/2],[y.max1,m-_/2],[y.max1,m],[y.max,m],[y.max,m-_/2],[y.max,m+_/2],[y.median,m-_/2],[y.median,m+_/2]]),h(x,M),M}function o(g){t.isArray(g)||(g=[g]);var m=g.sort(function(y,S){return y<S?1:-1}),_=m.length;if(_<4)for(var M=m[_-1],x=0;x<4-_;x++)m.push(M);return m}function l(g,m,_){var M=o(m),x=[{x:g,y:M[0]},{x:g,y:M[1]},{x:g-_/2,y:M[2]},{x:g-_/2,y:M[1]},{x:g+_/2,y:M[1]},{x:g+_/2,y:M[2]},{x:g,y:M[2]},{x:g,y:M[3]}];return x}function f(g){var m=[["M",g[0].x,g[0].y],["L",g[1].x,g[1].y],["M",g[2].x,g[2].y],["L",g[3].x,g[3].y],["M",g[4].x,g[4].y],["L",g[5].x,g[5].y],["L",g[6].x,g[6].y],["L",g[7].x,g[7].y],["L",g[4].x,g[4].y],["Z"],["M",g[8].x,g[8].y],["L",g[9].x,g[9].y],["M",g[10].x,g[10].y],["L",g[11].x,g[11].y],["M",g[12].x,g[12].y],["L",g[13].x,g[13].y]];return m}function v(g){var m=[["M",g[0].x,g[0].y],["L",g[1].x,g[1].y],["M",g[2].x,g[2].y],["L",g[3].x,g[3].y],["L",g[4].x,g[4].y],["L",g[5].x,g[5].y],["Z"],["M",g[6].x,g[6].y],["L",g[7].x,g[7].y]];return m}var b=u.registerFactory("schema",{defaultShapeType:"",getActiveCfg:function(m,_){if(m==="box"){var M=_.lineWidth||1;return{lineWidth:M+1}}var x=_.fillOpacity||_.opacity||1;return{fillOpacity:x-.15,strokeOpacity:x-.15}},getSelectedCfg:function(m,_){return _&&_.style?_.style:this.getActiveCfg(m,_)}});u.registerShape("schema","box",{getPoints:function(m){return a(m.x,m.y,m.size)},draw:function(m,_){var M=n(m),x=f(m.points);return x=this.parsePath(x),_.addShape("path",{attrs:t.mix(M,{path:x})})},getMarkerCfg:function(m){return{symbol:function(M,x,y){var S=[x-6,x-3,x,x+3,x+6],P=a(M,S,y);return[["M",P[0].x+1,P[0].y],["L",P[1].x-1,P[1].y],["M",P[2].x,P[2].y],["L",P[3].x,P[3].y],["M",P[4].x,P[4].y],["L",P[5].x,P[5].y],["L",P[6].x,P[6].y],["L",P[7].x,P[7].y],["L",P[4].x,P[4].y],["Z"],["M",P[8].x,P[8].y],["L",P[9].x,P[9].y],["M",P[10].x+1,P[10].y],["L",P[11].x-1,P[11].y],["M",P[12].x,P[12].y],["L",P[13].x,P[13].y]]},radius:6,lineWidth:1,stroke:m.color}}}),u.registerShape("schema","candle",{getPoints:function(m){return l(m.x,m.y,m.size)},draw:function(m,_){var M=i(m),x=v(m.points);return x=this.parsePath(x),_.addShape("path",{attrs:t.mix(M,{path:x})})},getMarkerCfg:function(m){return{symbol:function(M,x,y){x=[x+7.5,x+3,x-3,x-7.5];var S=l(M,x,y);return[["M",S[0].x,S[0].y],["L",S[1].x,S[1].y],["M",S[2].x,S[2].y],["L",S[3].x,S[3].y],["L",S[4].x,S[4].y],["L",S[5].x,S[5].y],["Z"],["M",S[6].x,S[6].y],["L",S[7].x,S[7].y]]},lineWidth:1,stroke:m.color,fill:m.color,radius:6}}}),E.exports=b},function(E,T,e){var t=e(0),u=e(9),s=e(23),c=e(5),r=t.PathUtil;function h(a){var o=c.shape.venn,l=t.mix({},o,a.style);return s.addFillAttrs(l,a),l}function n(a){var o=c.shape.hollowVenn,l=t.mix({},o,a.style);return s.addStrokeAttrs(l,a),l}var i=u.registerFactory("venn",{defaultShapeType:"venn",getActiveCfg:function(o,l){var f=l.lineWidth||1;if(o==="hollow")return{lineWidth:f+1};var v=l.fillOpacity||l.opacity||1;return{fillOpacity:v-.08}},getSelectedCfg:function(o,l){return l&&l.style?l.style:this.getActiveCfg(o,l)}});u.registerShape("venn","venn",{draw:function(o,l){var f=o.origin._origin,v=f.path,b=h(o),g=r.parsePathString(v),m=l.addShape("path",{attrs:t.mix(b,{path:g})});return m},getMarkerCfg:function(o){return t.mix({symbol:"circle",radius:4},h(o))}}),u.registerShape("venn","hollow",{draw:function(o,l){var f=o.origin._origin,v=f.path,b=n(o),g=r.parsePathString(v),m=l.addShape("path",{attrs:t.mix(b,{path:g})});return m},getMarkerCfg:function(o){return t.mix({symbol:"circle",radius:4},h(o))}}),E.exports=i},function(E,T,e){var t=e(0),u=e(9),s=e(23),c=e(5),r=e(25);function h(f){var v=c.shape.venn,b=t.mix({},v,f.style);return s.addFillAttrs(b,f),f.color&&(b.stroke=b.stroke||f.color),b}function n(f){var v=c.shape.hollowVenn,b=t.mix({},v,f.style);return s.addStrokeAttrs(b,f),b}function i(f){for(var v=[],b=0;b<f.length;b++){var g=f[b];if(g){var m=b===0?"M":"L";v.push([m,g.x,g.y])}}var _=f[0];return _&&(v.push(["L",_.x,_.y]),v.push(["z"])),v}function a(f){for(var v=f.length/2,b=[],g=[],m=0;m<f.length;m++)m<v?b.push(f[m]):g.push(f[m]);var _=r.getSplinePath(b,!1),M=r.getSplinePath(g,!1);g.length&&_.push(["L",g[0].x,g[0].y]),M.shift();var x=_.concat(M);return b.length&&x.push(["L",b[0].x,b[0].y]),x.push(["z"]),x}function o(f){var v=Math.max.apply(null,f);return f.map(function(b){return b/v})}var l=u.registerFactory("violin",{defaultShapeType:"violin",getDefaultPoints:function(v){var b=v.size/2,g=[],m=o(v._size);return t.each(v.y,function(_,M){var x=m[M]*b,y=M===0,S=M===v.y.length-1;g.push({isMin:y,isMax:S,x:v.x-x,y:_}),g.unshift({isMin:y,isMax:S,x:v.x+x,y:_})}),g},getActiveCfg:function(v,b){var g=b.lineWidth||1;if(v==="hollow")return{lineWidth:g+1};var m=b.fillOpacity||b.opacity||1;return{fillOpacity:m-.08}},getSelectedCfg:function(v,b){return b&&b.style?b.style:this.getActiveCfg(v,b)}});u.registerShape("violin","violin",{draw:function(v,b){var g=h(v),m=i(v.points);m=this.parsePath(m);var _=b.addShape("path",{attrs:t.mix(g,{path:m})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},h(v))}}),u.registerShape("violin","smooth",{draw:function(v,b){var g=h(v),m=a(v.points);m=this.parsePath(m);var _=b.addShape("path",{attrs:t.mix(g,{path:m})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},h(v))}}),u.registerShape("violin","hollow",{draw:function(v,b){var g=n(v),m=i(v.points);m=this.parsePath(m);var _=b.addShape("path",{attrs:t.mix(g,{path:m})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},n(v))}}),u.registerShape("violin","smoothHollow",{draw:function(v,b){var g=n(v),m=a(v.points);m=this.parsePath(m);var _=b.addShape("path",{attrs:t.mix(g,{path:m})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},n(v))}}),E.exports=l},function(E,T,e){var t=e(0);E.exports=function(u){return t.isArray(u)?u:t.isString(u)?u.split("*"):[u]}},function(E,T,e){var t=e(0).MatrixUtil,u=t.vec2;function s(r,h,n,i){var a=[],o,l,f=!!i,v,b;if(f){v=[Infinity,Infinity],b=[-Infinity,-Infinity];for(var g=0,m=r.length;g<m;g++){var _=r[g];v=u.min([],v,_),b=u.max([],b,_)}v=u.min([],v,i[0]),b=u.max([],b,i[1])}for(var M=0,x=r.length;M<x;M++){var y=r[M];if(n)o=r[M?M-1:x-1],l=r[(M+1)%x];else if(M===0||M===x-1){a.push(y);continue}else o=r[M-1],l=r[M+1];var S=[];S=u.sub(S,l,o),S=u.scale(S,S,h);var P=u.distance(y,o),A=u.distance(y,l),O=P+A;O!==0&&(P/=O,A/=O);var L=u.scale([],S,-P),H=u.scale([],S,A),F=u.add([],y,L),K=u.add([],y,H);f&&(F=u.max([],F,v),F=u.min([],F,b),K=u.max([],K,v),K=u.min([],K,b)),a.push(F),a.push(K)}return n&&a.push(a.shift()),a}function c(r,h,n){for(var i=!!h,a=[],o=0,l=r.length;o<l;o+=2)a.push([r[o],r[o+1]]);for(var f=s(a,.4,i,n),v=a.length,b=[],g,m,_,M=0;M<v-1;M++)g=f[M*2],m=f[M*2+1],_=a[M+1],b.push(["C",g[0],g[1],m[0],m[1],_[0],_[1]]);return i&&(g=f[v],m=f[v+1],_=a[0],b.push(["C",g[0],g[1],m[0],m[1],_[0],_[1]])),b}E.exports={catmullRom2bezier:c}},function(E,T,e){function t(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var u=e(8),s=e(0),c=e(544),r=c.venn,h=c.scaleSolution,n=c.circlePath,i=c.intersectionAreaPath,a=c.computeTextCentres;e(311);var o=function(l){t(f,l);function f(){return l.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=l.prototype.getDefaultCfg.call(this);return g.type="venn",g.shapeType="venn",g.generatePoints=!1,g},v._getAttrValues=function(g,m){return g.type==="position"?[m.x,m.y]:l.prototype._getAttrValues.call(this,g,m)},v.sets=function(g){return this.set("setsField",g),this},v._initAttrs=function(){var g=this;l.prototype._initAttrs.call(this);var m=g.get("attrOptions"),_=g.get("setsField")||"sets",M=g.get("data"),x=m.size?m.size.field:"size";M.forEach(function(U){U.sets=U[_],U._sets=U[_].join("&"),U.size=U[x]});var y=r(M),S=g.get("coord"),P=[Math.min(S.x.end,S.x.start),Math.max(S.x.end,S.x.start)],A=[Math.min(S.y.end,S.y.start),Math.max(S.y.end,S.y.start)],O=P[1]-P[0],L=A[1]-A[0],H=g.get("styleOptions"),F=H&&s.isObject(H.style)?H.style.padding:0;s.isFinite(F)||(F=0);var K=h(y,O,L,F),G=a(K,M);M.forEach(function(U){var Z=U.sets,J=Z.join(",");if(U.id=J,Z.length===1){var rt=K[J];U.path=n(rt.x,rt.y,rt.radius),s.assign(U,rt)}else{var vt=Z.map(function(Rt){return K[Rt]}),mt=i(vt);/[zZ]$/.test(mt)||(mt+="Z"),U.path=mt;var ut=G[J]||{x:0,y:0};s.assign(U,ut)}})},f}(u);u.Venn=o,E.exports=o},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function u(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),c=e(0),r=e(70);e(312);var h=function(i){u(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="violin",f.shapeType="violin",f.generatePoints=!0,f};function o(l){var f;return f=i.call(this,l)||this,c.assign(t(f),r),f}return a.createShapePointsCfg=function(f){var v=this,b=i.prototype.createShapePointsCfg.call(this,f);b.size=v.getNormalizedSize(f);var g=v.get("_sizeField");return b._size=f._origin[g],b},a.clearInner=function(){i.prototype.clearInner.call(this),this.set("defaultSize",null)},a._initAttrs=function(){var f=this,v=f.get("attrOptions"),b=v.size?v.size.field:f.get("_sizeField")?f.get("_sizeField"):"size";f.set("_sizeField",b),delete v.size,i.prototype._initAttrs.call(this)},o}(s),n=function(i){u(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"dodge"}],f},a}(h);h.Dodge=n,s.Violin=h,s.ViolinDodge=n,E.exports=h},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function u(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(0),c=e(28),r=["X","Y","XY","POLYGON"],h="XY",n=function(i){u(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return s.mix({},f,{type:h,startPoint:null,brushing:!1,dragging:!1,brushShape:null,container:null,polygonPath:null,style:{fill:"#C5D4EB",opacity:.3,lineWidth:1,stroke:"#82A6DD"},draggable:!1,dragOffX:0,dragOffY:0,inPlot:!0,xField:null,yField:null})};function o(l,f){var v;v=i.call(this,l,f)||this;var b=t(v);b.filter=!b.draggable,b.type=b.type.toUpperCase(),b.chart=f,r.includes(b.type)||(b.type=h);var g=b.canvas;if(g){var m;g.get("children").map(function(y){return y.get("type")==="plotBack"?(m=y.get("plotRange"),!1):y}),b.plot={start:m.bl,end:m.tr}}if(f){var _=f.get("coord");b.plot={start:_.start,end:_.end},f.on("afterrender",function(){b.plot={start:_.start,end:_.end}}),b.isTransposed=_.isTransposed;var M=f._getScales("x"),x=f._getScales("y");b.xScale=b.xField?M[b.xField]:f.getXScale(),b.yScale=b.yField?x[b.yField]:f.getYScales()[0]}return v}return a.start=function(f){var v=this,b=v.canvas,g=v.type,m=v.brushShape;if(!!g){v.brushing&&v.end(f);var _={x:f.offsetX,y:f.offsetY};if(!!_.x){var M=v.plot&&v.inPlot,x=b.get("canvasDOM"),y=b.get("pixelRatio");if(v.selection&&(v.selection=null),v.draggable&&m&&!m.get("destroyed")){if(m.isHit(_.x*y,_.y*y)){if(x.style.cursor="move",v.selection=m,v.dragging=!0,g==="X")v.dragoffX=_.x-m.attr("x"),v.dragoffY=0;else if(g==="Y")v.dragoffX=0,v.dragoffY=_.y-m.attr("y");else if(g==="XY")v.dragoffX=_.x-m.attr("x"),v.dragoffY=_.y-m.attr("y");else if(g==="POLYGON"){var S=m.getBBox();v.dragoffX=_.x-S.minX,v.dragoffY=_.y-S.minY}v.onDragstart&&v.onDragstart(f)}v.prePoint=_}if(!v.dragging){v.onBrushstart&&v.onBrushstart(_);var P=v.container;if(M){var A=v.plot,O=A.start,L=A.end;if(_.x<O.x||_.x>L.x||_.y<L.y||_.y>O.y)return}x.style.cursor="crosshair",v.startPoint=_,v.brushShape=null,v.brushing=!0,P?P.clear():(P=b.addGroup({zIndex:5}),P.initTransform()),v.container=P,g==="POLYGON"&&(v.polygonPath="M "+_.x+" "+_.y)}}}},a.process=function(f){var v=this,b=v.brushing,g=v.dragging,m=v.type,_=v.plot,M=v.startPoint,x=v.xScale,y=v.yScale,S=v.canvas;if(!(!b&&!g)){var P={x:f.offsetX,y:f.offsetY},A=S.get("canvasDOM");if(b){A.style.cursor="crosshair";var O=_.start,L=_.end,H=v.polygonPath,F=v.brushShape,K=v.container;v.plot&&v.inPlot&&(P=v._limitCoordScope(P));var G,U,Z,J;m==="Y"?(G=O.x,U=P.y>=M.y?M.y:P.y,Z=Math.abs(O.x-L.x),J=Math.abs(M.y-P.y)):m==="X"?(G=P.x>=M.x?M.x:P.x,U=L.y,Z=Math.abs(M.x-P.x),J=Math.abs(L.y-O.y)):m==="XY"?(P.x>=M.x?(G=M.x,U=P.y>=M.y?M.y:P.y):(G=P.x,U=P.y>=M.y?M.y:P.y),Z=Math.abs(M.x-P.x),J=Math.abs(M.y-P.y)):m==="POLYGON"&&(H+="L "+P.x+" "+P.y,v.polygonPath=H,F?!F.get("destroyed")&&F.attr(s.mix({},F._attrs,{path:H})):F=K.addShape("path",{attrs:s.mix(v.style,{path:H})})),m!=="POLYGON"&&(F?!F.get("destroyed")&&F.attr(s.mix({},F._attrs,{x:G,y:U,width:Z,height:J})):F=K.addShape("rect",{attrs:s.mix(v.style,{x:G,y:U,width:Z,height:J})})),v.brushShape=F}else if(g){A.style.cursor="move";var rt=v.selection;if(rt&&!rt.get("destroyed"))if(m==="POLYGON"){var vt=v.prePoint;v.selection.translate(P.x-vt.x,P.y-vt.y)}else v.dragoffX&&rt.attr("x",P.x-v.dragoffX),v.dragoffY&&rt.attr("y",P.y-v.dragoffY)}v.prePoint=P,S.draw();var mt=v._getSelected(),ut=mt.data,Rt=mt.shapes,Ft=mt.xValues,wt=mt.yValues,Mt={data:ut,shapes:Rt};x&&(Mt[x.field]=Ft),y&&(Mt[y.field]=wt),s.mix(f,Mt),Mt.x=P.x,Mt.y=P.y,v.onDragmove&&v.onDragmove(Mt),v.onBrushmove&&v.onBrushmove(Mt)}},a.end=function(f){var v=this;if(!(!v.brushing&&!v.dragging)){var b=v.data,g=v.shapes,m=v.xValues,_=v.yValues,M=v.canvas,x=v.type,y=v.startPoint,S=v.chart,P=v.container,A=v.xScale,O=v.yScale,L=f.offsetX,H=f.offsetY,F=M.get("canvasDOM");if(F.style.cursor="default",y!==null){if(Math.abs(y.x-L)<=1&&Math.abs(y.y-H)<=1){v.brushing=!1,v.dragging=!1,P.clear(),M.draw();return}var K={data:b,shapes:g};if(A&&(K[A.field]=m),O&&(K[O.field]=_),s.mix(f,K),K.x=L,K.y=H,v.dragging)v.dragging=!1,v.onDragend&&v.onDragend(K);else if(v.brushing){v.brushing=!1;var G=v.brushShape,U=v.polygonPath;x==="POLYGON"&&(U+="z",G&&!G.get("destroyed")&&G.attr(s.mix({},G._attrs,{path:U})),v.polygonPath=U,M.draw()),v.onBrushend?v.onBrushend(K):S&&v.filter&&(P.clear(),!v.isTransposed&&x==="X"||v.isTransposed&&x==="Y"?A&&S.filter(A.field,function(Z){return m.indexOf(Z)>-1}):!v.isTransposed&&x==="Y"||v.isTransposed&&x==="X"?O&&S.filter(O.field,function(Z){return _.indexOf(Z)>-1}):(A&&S.filter(A.field,function(Z){return m.indexOf(Z)>-1}),O&&S.filter(O.field,function(Z){return _.indexOf(Z)>-1})),S.repaint())}}}},a.reset=function(){var f=this,v=f.chart,b=f.filter,g=f.brushShape,m=f.canvas;this._init(),v&&b&&(v.get("options").filters={},v.repaint()),g&&(g.destroy(),m.draw())},a._limitCoordScope=function(f){var v=this.plot,b=v.start,g=v.end;return f.x<b.x&&(f.x=b.x),f.x>g.x&&(f.x=g.x),f.y<g.y&&(f.y=g.y),f.y>b.y&&(f.y=b.y),f},a._getSelected=function(){var f=this,v=f.chart,b=f.xScale,g=f.yScale,m=f.brushShape,_=f.canvas,M=_.get("pixelRatio"),x=[],y=[],S=[],P=[];if(v){var A=v.get("geoms");A.map(function(O){var L=O.getShapes();return L.map(function(H){var F=H.get("origin");return Array.isArray(F)||(F=[F]),F.map(function(K){if(m.isHit(K.x*M,K.y*M)){x.push(H);var G=K._origin;P.push(G),b&&y.push(G[b.field]),g&&S.push(G[g.field])}return K}),H}),O})}return f.shapes=x,f.xValues=y,f.yValues=S,f.data=P,_.draw(),{data:P,xValues:y,yValues:S,shapes:x}},o}(c);E.exports=n},function(E,T,e){var t=e(0),u=e(16),s=u.Group,c=t.DomUtil,r=5,h=function n(i){n.superclass.constructor.call(this,i)};t.extend(h,s),t.augment(h,{getDefaultCfg:function(){return{range:null,middleAttr:null,backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},_initHandle:function(i){var a=this,o=a.addGroup(),l=a.get("layout"),f=a.get("handleStyle"),v=f.img,b=f.width,g=f.height,m,_,M;if(l==="horizontal"){var x=f.width;M="ew-resize",_=o.addShape("Image",{attrs:{x:-x/2,y:0,width:x,height:g,img:v,cursor:M}}),m=o.addShape("Text",{attrs:t.mix({x:i==="min"?-(x/2+r):x/2+r,y:g/2,textAlign:i==="min"?"end":"start",textBaseline:"middle",text:i==="min"?this.get("minText"):this.get("maxText"),cursor:M},this.get("textStyle"))})}else M="ns-resize",_=o.addShape("Image",{attrs:{x:0,y:-g/2,width:b,height:g,img:v,cursor:M}}),m=o.addShape("Text",{attrs:t.mix({x:b/2,y:i==="min"?g/2+r:-(g/2+r),textAlign:"center",textBaseline:"middle",text:i==="min"?this.get("minText"):this.get("maxText"),cursor:M},this.get("textStyle"))});return this.set(i+"TextElement",m),this.set(i+"IconElement",_),o},_initSliderBackground:function(){var i=this.addGroup();return i.initTransform(),i.translate(0,0),i.addShape("Rect",{attrs:t.mix({x:0,y:0,width:this.get("width"),height:this.get("height")},this.get("backgroundStyle"))}),i},_beforeRenderUI:function(){var i=this._initSliderBackground(),a=this._initHandle("min"),o=this._initHandle("max"),l=this.addShape("rect",{attrs:this.get("middleAttr")});this.set("middleHandleElement",l),this.set("minHandleElement",a),this.set("maxHandleElement",o),this.set("backgroundElement",i),i.set("zIndex",0),l.set("zIndex",1),a.set("zIndex",2),o.set("zIndex",2),l.attr("cursor","move"),this.sort()},_renderUI:function(){this.get("layout")==="horizontal"?this._renderHorizontal():this._renderVertical()},_transform:function(i){var a=this.get("range"),o=a[0]/100,l=a[1]/100,f=this.get("width"),v=this.get("height"),b=this.get("minHandleElement"),g=this.get("maxHandleElement"),m=this.get("middleHandleElement");b.resetMatrix?(b.resetMatrix(),g.resetMatrix()):(b.initTransform(),g.initTransform()),i==="horizontal"?(m.attr({x:f*o,y:0,width:(l-o)*f,height:v}),b.translate(o*f,0),g.translate(l*f,0)):(m.attr({x:0,y:v*(1-l),width:f,height:(l-o)*v}),b.translate(0,(1-o)*v),g.translate(0,(1-l)*v))},_renderHorizontal:function(){this._transform("horizontal")},_renderVertical:function(){this._transform("vertical")},_bindUI:function(){this.on("mousedown",t.wrapBehavior(this,"_onMouseDown"))},_isElement:function(i,a){var o=this.get(a);if(i===o)return!0;if(o.isGroup){var l=o.get("children");return l.indexOf(i)>-1}return!1},_getRange:function(i,a){var o=i+a;return o=o>100?100:o,o=o<0?0:o,o},_limitRange:function(i,a,o){o[0]=this._getRange(i,o[0]),o[1]=o[0]+a,o[1]>100&&(o[1]=100,o[0]=o[1]-a)},_updateStatus:function(i,a){var o=i==="x"?this.get("width"):this.get("height");i=t.upperFirst(i);var l=this.get("range"),f=this.get("page"+i),v=this.get("currentTarget"),b=this.get("rangeStash"),g=this.get("layout"),m=g==="vertical"?-1:1,_=a["page"+i],M=_-f,x=M/o*100*m,y,S=this.get("minRange"),P=this.get("maxRange");l[1]<=l[0]?(this._isElement(v,"minHandleElement")||this._isElement(v,"maxHandleElement"))&&(l[0]=this._getRange(x,l[0]),l[1]=this._getRange(x,l[0])):(this._isElement(v,"minHandleElement")&&(l[0]=this._getRange(x,l[0]),S&&l[1]-l[0]<=S&&this._limitRange(x,S,l),P&&l[1]-l[0]>=P&&this._limitRange(x,P,l)),this._isElement(v,"maxHandleElement")&&(l[1]=this._getRange(x,l[1]),S&&l[1]-l[0]<=S&&this._limitRange(x,S,l),P&&l[1]-l[0]>=P&&this._limitRange(x,P,l))),this._isElement(v,"middleHandleElement")&&(y=b[1]-b[0],this._limitRange(x,y,l)),this.emit("sliderchange",{range:l}),this.set("page"+i,_),this._renderUI(),this.get("canvas").draw()},_onMouseDown:function(i){var a=i.currentTarget,o=i.event,l=this.get("range");o.stopPropagation(),o.preventDefault(),this.set("pageX",o.pageX),this.set("pageY",o.pageY),this.set("currentTarget",a),this.set("rangeStash",[l[0],l[1]]),this._bindCanvasEvents()},_bindCanvasEvents:function(){var i=this.get("canvas").get("containerDOM");this.onMouseMoveListener=c.addEventListener(i,"mousemove",t.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=c.addEventListener(i,"mouseup",t.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=c.addEventListener(i,"mouseleave",t.wrapBehavior(this,"_onCanvasMouseUp"))},_onCanvasMouseMove:function(i){var a=this.get("layout");a==="horizontal"?this._updateStatus("x",i):this._updateStatus("y",i)},_onCanvasMouseUp:function(){this._removeDocumentEvents()},_removeDocumentEvents:function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove(),this.onMouseLeaveListener.remove()}}),E.exports=h},function(E,T,e){function t(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function u(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var s=e(0),c=e(28),r=e(320),h=e(71),n=e(73),i=864e5,a=["X","Y","XY"],o="X",l=function(f){u(b,f);var v=b.prototype;v.getDefaultCfg=function(){var m=f.prototype.getDefaultCfg.call(this);return s.mix({},m,{type:o,stepRatio:.05,limitRange:{},stepByField:{},threshold:20,originScaleDefsByField:{},previousPoint:null,isDragging:!1})},v._disableTooltip=function(){var m=this,_=m.chart,M=_.get("tooltipController");M&&(m._showTooltip=!0,_.tooltip(!1))},v._enableTooltip=function(m){var _=this,M=_.chart;_._showTooltip&&(M.tooltip(!0),M.showTooltip(m))};function b(g,m){var _;_=f.call(this,g,m)||this;var M=t(_);M.type=M.type.toUpperCase(),M.chart=m,M.coord=m.get("coord");var x=M.data=m.get("data");r(m);var y=m.getYScales(),S=m.getXScale();y.push(S);var P=m.get("scaleController");return y.forEach(function(A){var O=A.field;M.limitRange[O]=n(x,A);var L=P.defs[O]||{};M.originScaleDefsByField[O]=s.mix(L,{nice:!!L.nice}),A.isLinear&&(M.stepByField[O]=(A.max-A.min)*M.stepRatio)}),a.includes(M.type)||(M.type=o),M._disableTooltip(),_}return v._applyTranslate=function(m,_,M){_===void 0&&(_=0);var x=this;m.isLinear?x._translateLinearScale(m,_,M):x._translateCatScale(m,_,M)},v._translateCatScale=function(m,_,M){var x=this,y=x.chart,S=m.type,P=m.field,A=m.values,O=m.ticks,L=h(y,P),H=x.limitRange[P],F=_/M,K=A.length,G=Math.max(1,Math.abs(parseInt(F*K))),U=H.indexOf(A[0]),Z=H.indexOf(A[K-1]);if(_>0&&U>=0){for(var J=0;J<G&&U>0;J++)U-=1,Z-=1;var rt=H.slice(U,Z+1),vt=null;if(S==="timeCat"){for(var mt=O.length>2?O[1]-O[0]:i,ut=O[0]-mt;ut>=rt[0];ut-=mt)O.unshift(ut);vt=O}y.scale(P,s.mix({},L,{values:rt,ticks:vt}))}else if(_<0&&Z<=H.length-1){for(var Rt=0;Rt<G&&Z<H.length-1;Rt++)U+=1,Z+=1;var Ft=H.slice(U,Z+1),wt=null;if(S==="timeCat"){for(var Mt=O.length>2?O[1]-O[0]:i,St=O[O.length-1]+Mt;St<=Ft[Ft.length-1];St+=Mt)O.push(St);wt=O}y.scale(P,s.mix({},L,{values:Ft,ticks:wt}))}},v._translateLinearScale=function(m,_,M){var x=this,y=x.chart,S=x.limitRange,P=m.min,A=m.max,O=m.field;if(!(P===S[O].min&&A===S[O].max)){var L=_/M,H=A-P,F=h(y,O);y.scale(O,s.mix({},F,{nice:!1,min:P+L*H,max:A+L*H}))}},v.start=function(m){var _=this,M=_.canvas,x=M.get("canvasDOM");x.style.cursor="pointer",_.isDragging=!0,_.previousPoint={x:m.x,y:m.y},_._disableTooltip()},v.process=function(m){var _=this;if(_.isDragging){var M=_.chart,x=_.type,y=_.canvas,S=_.coord,P=_.threshold,A=y.get("canvasDOM");A.style.cursor="move";var O=_.previousPoint,L=m,H=L.x-O.x,F=L.y-O.y,K=!1;if(Math.abs(H)>P&&x.indexOf("X")>-1){K=!0;var G=M.getXScale();_._applyTranslate(G,G.isLinear?-H:H,S.width)}if(Math.abs(F)>P&&x.indexOf("Y")>-1){K=!0;var U=M.getYScales();U.forEach(function(Z){_._applyTranslate(Z,L.y-O.y,S.height)})}K&&(_.previousPoint=L,M.repaint())}},v.end=function(m){var _=this;_.isDragging=!1;var M=_.canvas,x=M.get("canvasDOM");x.style.cursor="default",_._enableTooltip(m)},v.reset=function(){var m=this,_=m.view,M=m.originScaleDefsByField,x=_.getYScales(),y=_.getXScale();x.push(y),x.forEach(function(S){if(S.isLinear){var P=S.field;_.scale(P,M[P])}}),_.repaint(),m._disableTooltip()},b}(c);E.exports=l},function(E,T,e){var t=e(0),u=e(52),s=e(72);E.exports=function(c){c.on("beforeinitgeoms",function(){c.set("limitInPlot",!0);var r=c.get("data"),h=s(c);if(!h)return r;var n=c.get("geoms"),i=!1;t.each(n,function(l){if(["area","line","path"].includes(l.get("type")))return i=!0,!1});var a=[];if(t.each(h,function(l,f){!i&&l&&(l.values||l.min||l.max)&&a.push(f)}),a.length===0)return r;var o=[];t.each(r,function(l){var f=!0;t.each(a,function(v){var b=l[v];if(b){var g=h[v];if(g.type==="timeCat"){var m=g.values;t.isNumber(m[0])&&(b=u.toTimeStamp(b))}(g.values&&!g.values.includes(b)||g.min&&b<g.min||g.max&&b>g.max)&&(f=!1)}}),f&&o.push(l)}),c.set("filteredData",o)})}},function(E,T){E.exports=function(e,t,u){if(!e)return[0,1];var s=0,c=0;if(u==="linear"){var r=t.min,h=t.max,n=h-r;s=(e.min-r)/n,c=(e.max-r)/n}else{var i=t,a=e.values,o=i.indexOf(a[0]),l=i.indexOf(a[a.length-1]);s=o/(i.length-1),c=l/(i.length-1)}return[s,c]}},function(E,T,e){var t=e(45),u=e(44),s=e(0),c={Base:e(28),Brush:e(317),Drag:e(319),ScrollBar:e(323),ShapeSelect:e(324),Slider:e(325),Zoom:e(326)};t._Interactions={},t.registerInteraction=function(r,h){t._Interactions[r]=h},t.getInteraction=function(r){return t._Interactions[r]},u.prototype.getInteractions=function(){var r=this;return r._interactions||(r._interactions={}),r._interactions},u.prototype._setInteraction=function(r,h){var n=this,i=n.getInteractions();i[r]&&i[r]!==h&&i[r].destroy(),i[r]=h},u.prototype.clearInteraction=function(r){var h=this,n=h.getInteractions();r?(n[r]&&(n[r]._reset(),n[r].destroy()),delete n[r]):s.each(n,function(i,a){i._reset(),i.destroy(),delete n[a]})},u.prototype.interact=u.prototype.interaction=function(r,h){var n=this,i=t.getInteraction(r),a=new i(h,n);return n._setInteraction(r,a),n},t.registerInteraction("brush",c.Brush),t.registerInteraction("Brush",c.Brush),t.registerInteraction("drag",c.Drag),t.registerInteraction("Drag",c.Drag),t.registerInteraction("zoom",c.Zoom),t.registerInteraction("Zoom",c.Zoom),t.registerInteraction("scroll-bar",c.ScrollBar),t.registerInteraction("ScrollBar",c.ScrollBar),t.registerInteraction("shape-select",c.ShapeSelect),t.registerInteraction("ShapeSelect",c.ShapeSelect),t.registerInteraction("slider",c.Slider),t.registerInteraction("Slider",c.Slider),E.exports=c},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(0),s=e(28),c=e(321),r=e(73),h="X",n=function(i){t(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return u.mix({},f,{startEvent:null,processEvent:null,endEvent:null,resetEvent:null,type:h,xStyle:{backgroundColor:"rgba(202, 215, 239, .2)",fillerColor:"rgba(202, 215, 239, .75)",size:4,lineCap:"round",offsetX:0,offsetY:-10},yStyle:{backgroundColor:"rgba(202, 215, 239, .2)",fillerColor:"rgba(202, 215, 239, .75)",size:4,lineCap:"round",offsetX:8,offsetY:0}})},a._renderScrollBars=function(){var f=this.chart,v=f.get("_scrollBarCfg");if(!!v){var b=f.get("data"),g=f.get("plotRange");g.width=Math.abs(g.br.x-g.bl.x),g.height=Math.abs(g.tl.y-g.bl.y);var m=f.get("backPlot"),_=f.get("canvas"),M=_.get("height"),x=f.get("_limitRange"),y=v.type;if(y.indexOf("X")>-1){var S=v.xStyle,P=S.offsetX,A=S.offsetY,O=S.lineCap,L=S.backgroundColor,H=S.fillerColor,F=S.size,K=f.getXScale(),G=x[K.field];G||(G=r(b,K),x[K.field]=G);var U=c(K,G,K.type),Z=f.get("_horizontalBar"),J=M-F/2+A;if(Z){var rt=Z.get("children")[1];rt.attr({x1:Math.max(g.bl.x+g.width*U[0]+P,g.bl.x),x2:Math.min(g.bl.x+g.width*U[1]+P,g.br.x)})}else Z=m.addGroup({className:"horizontalBar"}),Z.addShape("line",{attrs:{x1:g.bl.x+P,y1:J,x2:g.br.x+P,y2:J,lineWidth:F,stroke:L,lineCap:O}}),Z.addShape("line",{attrs:{x1:Math.max(g.bl.x+g.width*U[0]+P,g.bl.x),y1:J,x2:Math.min(g.bl.x+g.width*U[1]+P,g.br.x),y2:J,lineWidth:F,stroke:H,lineCap:O}}),f.set("_horizontalBar",Z)}if(y.indexOf("Y")>-1){var vt=v.yStyle,mt=vt.offsetX,ut=vt.offsetY,Rt=vt.lineCap,Ft=vt.backgroundColor,wt=vt.fillerColor,Mt=vt.size,St=f.getYScales()[0],At=x[St.field];At||(At=r(b,St),x[St.field]=At);var nt=c(St,At,St.type),Pt=f.get("_verticalBar"),z=Mt/2+mt;if(Pt){var q=Pt.get("children")[1];q.attr({y1:Math.max(g.tl.y+g.height*nt[0]+ut,g.tl.y),y2:Math.min(g.tl.y+g.height*nt[1]+ut,g.bl.y)})}else Pt=m.addGroup({className:"verticalBar"}),Pt.addShape("line",{attrs:{x1:z,y1:g.tl.y+ut,x2:z,y2:g.bl.y+ut,lineWidth:Mt,stroke:Ft,lineCap:Rt}}),Pt.addShape("line",{attrs:{x1:z,y1:Math.max(g.tl.y+g.height*nt[0]+ut,g.tl.y),x2:z,y2:Math.min(g.tl.y+g.height*nt[1]+ut,g.bl.y),lineWidth:Mt,stroke:wt,lineCap:Rt}}),f.set("_verticalBar",Pt)}}};function o(l,f){var v;v=i.call(this,l,f)||this;var b=v.getDefaultCfg();return f.set("_scrollBarCfg",u.deepMix({},b,l)),f.set("_limitRange",{}),!f.get("_horizontalBar")&&!f.get("_verticalBar")&&v._renderScrollBars(),v}return a._clear=function(){var f=this.chart;if(f){var v=f.get("_horizontalBar"),b=f.get("_verticalBar");v&&v.remove(!0),b&&b.remove(!0),f.set("_horizontalBar",null),f.set("_verticalBar",null)}},a._bindEvents=function(){this._onAfterclearOrBeforechangedata=this._onAfterclearOrBeforechangedata.bind(this),this._onAfterclearinner=this._onAfterclearinner.bind(this),this._onAfterdrawgeoms=this._onAfterdrawgeoms.bind(this);var f=this.chart;f.on("afterclear",this._onAfterclearOrBeforechangedata),f.on("beforechangedata",this._onAfterclearOrBeforechangedata),f.on("afterclearinner",this._onAfterclearinner),f.on("afterdrawgeoms",this._onAfterdrawgeoms)},a._onAfterclearOrBeforechangedata=function(){this.chart&&this.chart.set("_limitRange",{})},a._onAfterclearinner=function(){this._clear()},a._onAfterdrawgeoms=function(){this._renderScrollBars()},a._clearEvents=function(){var f=this.chart;f&&(f.off("afterclear",this._onAfterclearOrBeforechangedata),f.off("beforechangedata",this._onAfterclearOrBeforechangedata),f.off("afterclearinner",this._onAfterclearinner),f.off("afterdrawgeoms",this._onAfterdrawgeoms))},a.destroy=function(){this._clearEvents(),this._clear(),this.canvas.draw()},o}(s);E.exports=n},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var u=e(0),s=e(28);function c(h,n){var i={};for(var a in n)i[a]=h[a];return i}var r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return u.mix({},o,{startEvent:"mouseup",processEvent:null,selectStyle:{fillOpacity:1},unSelectStyle:{fillOpacity:.1},cancelable:!0})},i.start=function(o){var l=this,f=l.view,v,b=[];if(f.eachShape(function(M,x){x.isPointInPath(o.x,o.y)?v=x:b.push(x)}),!v){l.reset();return}if(v.get("_selected")){if(!l.cancelable)return;l.reset()}else{var g=l.selectStyle,m=l.unSelectStyle,_=c(v.attr(),v);v.set("_originAttrs",_),v.attr(g),u.each(b,function(M){var x=M.get("_originAttrs");x&&M.attr(x),M.set("_selected",!1),m&&(x=c(M.attr(),m),M.set("_originAttrs",x),M.attr(m))}),v.set("_selected",!0),l.selectedShape=v,l.canvas.draw()}},i.end=function(o){var l=this.selectedShape;l&&!l.get("destroyed")&&l.get("origin")&&(o.data=l.get("origin")._origin,o.shapeInfo=l.get("origin"),o.shape=l,o.selected=!!l.get("_selected"))},i.reset=function(){var o=this;if(!!o.selectedShape){var l=o.view,f=l.get("geoms")[0],v=f.get("container").get("children")[0],b=v.get("children");u.each(b,function(g){var m=g.get("_originAttrs");m&&(g._attrs=m,g.set("_originAttrs",null)),g.set("_selected",!1)}),o.canvas.draw()}},n}(s);E.exports=r},function(E,T,e){function t(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function u(g,m){g.prototype=Object.create(m.prototype),g.prototype.constructor=g,g.__proto__=m}var s=e(318),c=e(44),r=e(0),h=e(16),n=e(5),i=e(28),a=e(71),o=e(72),l=h.Canvas,f=r.DomUtil,v=r.isNumber,b=function(g){u(_,g);var m=_.prototype;m.getDefaultCfg=function(){var x=g.prototype.getDefaultCfg.call(this);return r.mix({},x,{startEvent:null,processEvent:null,endEvent:null,resetEvent:null,height:26,width:"auto",padding:n.plotCfg.padding,container:null,xAxis:null,yAxis:null,fillerStyle:{fill:"#BDCCED",fillOpacity:.3},backgroundStyle:{stroke:"#CCD6EC",fill:"#CCD6EC",fillOpacity:.3,lineWidth:1},range:[0,100],layout:"horizontal",textStyle:{fill:"#545454"},handleStyle:{img:"https://gw.alipayobjects.com/zos/rmsportal/QXtfhORGlDuRvLXFzpsQ.png",width:5},backgroundChart:{type:["area"],color:"#CCD6EC"}})},m._initContainer=function(){var x=this,y=x.container;if(!y)throw new Error("Please specify the container for the Slider!");r.isString(y)?x.domContainer=document.getElementById(y):x.domContainer=y},m.forceFit=function(){var x=this;if(!(!x||x.destroyed)){var y=f.getWidth(x.domContainer),S=x.height;if(y!==x.domWidth){var P=x.canvas;P.changeSize(y,S),x.bgChart&&x.bgChart.changeWidth(y),P.clear(),x._initWidth(),x._initSlider(),x._bindEvent(),P.draw()}}},m._initForceFitEvent=function(){var x=this,y=setTimeout(r.wrapBehavior(x,"forceFit"),200);clearTimeout(x.resizeTimer),x.resizeTimer=y},m._initStyle=function(){var x=this;x.handleStyle=r.mix({width:x.height,height:x.height},x.handleStyle),x.width==="auto"&&window.addEventListener("resize",r.wrapBehavior(x,"_initForceFitEvent"))},m._initWidth=function(){var x=this,y;x.width==="auto"?y=f.getWidth(x.domContainer):y=x.width,x.domWidth=y;var S=r.toAllPadding(x.padding);x.layout==="horizontal"?(x.plotWidth=y-S[1]-S[3],x.plotPadding=S[3],x.plotHeight=x.height):x.layout==="vertical"&&(x.plotWidth=x.width,x.plotHeight=x.height-S[0]-S[2],x.plotPadding=S[0])},m._initCanvas=function(){var x=this,y=x.domWidth,S=x.height,P=new l({width:y,height:S,containerDOM:x.domContainer,capture:!1}),A=P.get("el");A.style.position="absolute",A.style.top=0,A.style.left=0,A.style.zIndex=3,x.canvas=P},m._initBackground=function(){var x,y=this,S=this.chart,P=S.getAllGeoms[0],A=y.data=y.data||S.get("data"),O=S.getXScale(),L=y.xAxis||O.field,H=y.yAxis||S.getYScales()[0].field,F=r.deepMix((x={},x[""+L]={range:[0,1]},x),o(S),y.scales);if(delete F[L].min,delete F[L].max,!A)throw new Error("Please specify the data!");if(!L)throw new Error("Please specify the xAxis!");if(!H)throw new Error("Please specify the yAxis!");var K=y.backgroundChart,G=K.type||P.get("type"),U=K.color||"grey",Z=K.shape;r.isArray(G)||(G=[G]);var J=r.toAllPadding(y.padding),rt=new c({container:y.container,width:y.domWidth,height:y.height,padding:[0,J[1],0,J[3]],animate:!1});rt.source(A),rt.scale(F),rt.axis(!1),rt.tooltip(!1),rt.legend(!1),r.each(G,function(vt,mt){var ut=rt[vt]().position(L+"*"+H).opacity(1),Rt=r.isArray(U)?U[mt]:U;Rt&&(r.isObject(Rt)?Rt.field&&ut.color(Rt.field,Rt.colors):ut.color(Rt));var Ft=r.isArray(Z)?Z[mt]:Z;Ft&&(r.isObject(Ft)?Ft.field&&ut.shape(Ft.field,Ft.callback||Ft.shapes):ut.shape(Ft))}),rt.render(),y.bgChart=rt,y.scale=y.layout==="horizontal"?rt.getXScale():rt.getYScales()[0],y.layout==="vertical"&&rt.destroy()},m._initRange=function(){var x=this,y=x.startRadio,S=x.endRadio,P=x._startValue,A=x._endValue,O=x.scale,L=0,H=1;v(y)?L=y:P&&(L=O.scale(O.translate(P))),v(S)?H=S:A&&(H=O.scale(O.translate(A)));var F=x.minSpan,K=x.maxSpan,G=0;if(O.type==="time"||O.type==="timeCat"){var U=O.values,Z=U[0],J=U[U.length-1];G=J-Z}else O.isLinear&&(G=O.max-O.min);G&&F&&(x.minRange=F/G*100),G&&K&&(x.maxRange=K/G*100);var rt=[L*100,H*100];return x.range=rt,rt},m._getHandleValue=function(x){var y=this,S,P=y.range,A=P[0]/100,O=P[1]/100,L=y.scale;return x==="min"?S=y._startValue?y._startValue:L.invert(A):S=y._endValue?y._endValue:L.invert(O),S},m._initSlider=function(){var x=this,y=x.canvas,S=x._initRange(),P=x.scale,A=y.addGroup(s,{middleAttr:x.fillerStyle,range:S,minRange:x.minRange,maxRange:x.maxRange,layout:x.layout,width:x.plotWidth,height:x.plotHeight,backgroundStyle:x.backgroundStyle,textStyle:x.textStyle,handleStyle:x.handleStyle,minText:P.getText(x._getHandleValue("min")),maxText:P.getText(x._getHandleValue("max"))});x.layout==="horizontal"?A.translate(x.plotPadding,0):x.layout==="vertical"&&A.translate(0,x.plotPadding),x.rangeElement=A},m._updateElement=function(x,y){var S=this,P=S.chart,A=S.scale,O=S.rangeElement,L=A.field,H=O.get("minTextElement"),F=O.get("maxTextElement"),K=A.invert(x),G=A.invert(y),U=A.getText(K),Z=A.getText(G);H.attr("text",U),F.attr("text",Z),S._startValue=U,S._endValue=Z,S.onChange&&S.onChange({startText:U,endText:Z,startValue:K,endValue:G,startRadio:x,endRadio:y}),P.scale(L,r.mix({},a(P,L),{nice:!1,min:K,max:G})),P.repaint()},m._bindEvent=function(){var x=this,y=x.rangeElement;y.on("sliderchange",function(S){var P=S.range,A=P[0]/100,O=P[1]/100;x._updateElement(A,O)})};function _(M,x){var y;y=g.call(this,M,x)||this;var S=t(y);return S._initContainer(),S._initStyle(),S.render(),y}return m.clear=function(){var x=this;x.canvas.clear(),x.bgChart&&x.bgChart.destroy(),x.bgChart=null,x.scale=null,x.canvas.draw()},m.repaint=function(){var x=this;x.clear(),x.render()},m.render=function(){var x=this;x._initWidth(),x._initCanvas(),x._initBackground(),x._initSlider(),x._bindEvent(),x.canvas.draw()},m.destroy=function(){var x=this;clearTimeout(x.resizeTimer);var y=x.rangeElement;y.off("sliderchange"),x.bgChart&&x.bgChart.destroy(),x.canvas.destroy();for(var S=x.domContainer;S.hasChildNodes();)S.removeChild(S.firstChild);window.removeEventListener("resize",r.getWrapBehavior(x,"_initForceFitEvent")),x.destroyed=!0},_}(i);E.exports=b},function(E,T,e){function t(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function u(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var s=e(0),c=e(28),r=e(71),h=e(73),n=["X","Y","XY"],i="X",a=function(o){u(f,o);var l=f.prototype;l.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return s.mix({},b,{processEvent:"mousewheel",type:i,stepRatio:.05,stepByField:{},minScale:1,maxScale:4,catStep:2,limitRange:{},originScaleDefsByField:{}})};function f(v,b){var g;g=o.call(this,v,b)||this;var m=t(g);m.chart=b,m.type=m.type.toUpperCase();var _=m.data=b.get("data"),M=b.getYScales(),x=b.getXScale();M.push(x);var y=b.get("scaleController");return M.forEach(function(S){var P=S.field,A=y.defs[P]||{};m.limitRange[P]=h(_,S),m.originScaleDefsByField[P]=s.mix(A,{nice:!!A.nice}),S.isLinear?m.stepByField[P]=(S.max-S.min)*m.stepRatio:m.stepByField[P]=m.catStep}),n.includes(m.type)||(m.type=i),g}return l._applyScale=function(b,g,m,_){m===void 0&&(m=0);var M=this,x=M.chart,y=M.stepByField;if(b.isLinear){var S=b.min,P=b.max,A=b.field,O=1-m,L=y[A]*g,H=S+L*m,F=P-L*O;if(F>H){var K=r(x,A);x.scale(A,s.mix({},K,{nice:!1,min:H,max:F}))}}else{var G=b.field,U=b.values,Z=M.chart,J=Z.get("coord"),rt=r(Z,G),vt=M.limitRange[G],mt=vt.length,ut=M.maxScale,Rt=M.minScale,Ft=mt/ut,wt=mt/Rt,Mt=U.length,St=J.invertPoint(_),At=St.x,nt=Mt-g*this.catStep,Pt=parseInt(nt*At),z=nt+Pt;if(g>0&&Mt>=Ft){var q=Pt,gt=z;z>Mt&&(gt=Mt-1,q=Mt-nt);var et=U.slice(q,gt);Z.scale(G,s.mix({},rt,{values:et}))}else if(g<0&&Mt<=wt){var at=vt.indexOf(U[0]),xt=vt.indexOf(U[Mt-1]),k=Math.max(0,at-Pt),ot=Math.min(xt+z,mt),it=vt.slice(k,ot);Z.scale(G,s.mix({},rt,{values:it}))}}},l.process=function(b){var g=this,m=g.chart,_=g.type,M=m.get("coord"),x=b.deltaY,y=M.invertPoint(b);if(x){g.onZoom&&g.onZoom(x,y,g),x>0?g.onZoomin&&g.onZoomin(x,y,g):g.onZoomout&&g.onZoomout(x,y,g);var S=x/Math.abs(x);if(_.indexOf("X")>-1&&g._applyScale(m.getXScale(),S,y.x,b),_.indexOf("Y")>-1){var P=m.getYScales();P.forEach(function(A){g._applyScale(A,S,y.y,b)})}}m.repaint()},l.reset=function(){var b=this,g=b.view,m=b.originScaleDefsByField,_=g.getYScales(),M=g.getXScale();_.push(M),_.forEach(function(x){if(x.isLinear){var y=x.field;g.scale(y,m[y])}}),g.repaint()},f}(c);E.exports=a},function(E,T,e){var t,u,s=e(0),c=e(131),r="g2-tooltip",h="g2-legend",n=s.deepMix({},c,{background:{fill:"#1F1F1F",radius:2},plotBackground:{fill:"#1F1F1F"},axis:{top:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},bottom:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},left:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},right:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},circle:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},radius:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},helix:{line:{stroke:"#737373"},tickLine:{stroke:"#737373"}}},label:{textStyle:{fill:"#A6A6A6"}},legend:{right:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},left:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},top:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},bottom:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},html:(t={},t[""+h]={color:"#D9D9D9"},t),gradient:{textStyle:{fill:"#D9D9D9"},lineStyle:{stroke:"#404040"}}},tooltip:(u={},u[""+r]={color:"#D9D9D9",backgroundColor:"rgba(0, 0, 0, 0.5)",boxShadow:"0px 0px 2px #000"},u),tooltipCrosshairsRect:{type:"rect",rectStyle:{fill:"#fff",opacity:.1}},tooltipCrosshairsLine:{lineStyle:{stroke:"rgba(255, 255, 255, 0.45)"}},guide:{line:{text:{style:{fill:"#A6A6A6"}}},text:{style:{fill:"#A6A6A6"}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}}}});E.exports=n},function(E,T,e){var t=e(1),u=e(135),s=e(134),c=e(332),r=e(337),h=function n(i){n.superclass.constructor.call(this,i)};h.CFG={eventEnable:!0,width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null,renderer:"canvas"},t.extend(h,s),t.augment(h,{init:function(){h.superclass.init.call(this),this._setGlobalParam(),this._setContainer(),this._initPainter(),this._scale(),this.get("eventEnable")&&this._registEvents()},getEmitter:function(i,a){if(i)if(t.isEmpty(i._getEvents())){var o=i.get("parent");if(o&&!a.propagationStopped)return this.getEmitter(o,a)}else return i},_getEventObj:function(i,a,o,l){var f=new u(i,a,!0,!0);return f.x=o.x,f.y=o.y,f.clientX=a.clientX,f.clientY=a.clientY,f.currentTarget=l,f.target=l,f},_triggerEvent:function(i,a){var o=this.getPointByClient(a.clientX,a.clientY),l=this.getShape(o.x,o.y,a),f=this.get("el"),v;if(i==="mousemove"){var b=this.get("preShape");if(b&&b!==l){var g=this._getEventObj("mouseleave",a,o,b);v=this.getEmitter(b,a),v&&v.emit("mouseleave",g),f.style.cursor="default"}if(l){var m=this._getEventObj("mousemove",a,o,l);if(v=this.getEmitter(l,a),v&&v.emit("mousemove",m),b!==l){var _=this._getEventObj("mouseenter",a,o,l);v&&v.emit("mouseenter",_,a)}}else{var M=this._getEventObj("mousemove",a,o,this);this.emit("mousemove",M)}this.set("preShape",l)}else{var x=this._getEventObj(i,a,o,l||this);v=this.getEmitter(l,a),v&&v!==this&&v.emit(i,x),this.emit(i,x)}l&&!l.get("destroyed")&&(f.style.cursor=l.attr("cursor")||"default")},_registEvents:function(){var i=this,a=i.get("el"),o=["mouseout","mouseover","mousemove","mousedown","mouseleave","mouseup","click","dblclick"];t.each(o,function(l){a.addEventListener(l,function(f){i._triggerEvent(l,f)},!1)}),a.addEventListener("touchstart",function(l){t.isEmpty(l.touches)||i._triggerEvent("touchstart",l.touches[0])},!1),a.addEventListener("touchmove",function(l){t.isEmpty(l.touches)||i._triggerEvent("touchmove",l.touches[0])},!1),a.addEventListener("touchend",function(l){t.isEmpty(l.changedTouches)||i._triggerEvent("touchend",l.changedTouches[0])},!1)},_scale:function(){var i=this.get("pixelRatio");this.scale(i,i)},_setGlobalParam:function(){var i=this.get("pixelRatio");i||this.set("pixelRatio",t.getRatio());var a=r[this.get("renderer")||"canvas"];this._cfg.renderer=a,this._cfg.canvas=this;var o=new c(this);this._cfg.timeline=o},_setContainer:function(){var i=this.get("containerId"),a=this.get("containerDOM");a||(a=document.getElementById(i),this.set("containerDOM",a)),t.modifyCSS(a,{position:"relative"})},_initPainter:function(){var i=this.get("containerDOM"),a=new this._cfg.renderer.painter(i);this._cfg.painter=a,this._cfg.canvasDOM=this._cfg.el=a.canvas,this.changeSize(this.get("width"),this.get("height"))},_resize:function(){var i=this.get("canvasDOM"),a=this.get("widthCanvas"),o=this.get("heightCanvas"),l=this.get("widthStyle"),f=this.get("heightStyle");i.style.width=l,i.style.height=f,i.setAttribute("width",a),i.setAttribute("height",o)},getWidth:function(){var i=this.get("pixelRatio"),a=this.get("width");return a*i},getHeight:function(){var i=this.get("pixelRatio"),a=this.get("height");return a*i},changeSize:function(i,a){var o=this.get("pixelRatio"),l=i*o,f=a*o;this.set("widthCanvas",l),this.set("heightCanvas",f),this.set("widthStyle",i+"px"),this.set("heightStyle",a+"px"),this.set("width",i),this.set("height",a),this._resize()},getPointByClient:function(i,a){var o=this.get("el"),l=this.get("pixelRatio")||1,f=o.getBoundingClientRect();return{x:(i-f.left)*l,y:(a-f.top)*l}},getClientByPoint:function(i,a){var o=this.get("el"),l=o.getBoundingClientRect(),f=this.get("pixelRatio")||1;return{clientX:i/f+l.left,clientY:a/f+l.top}},draw:function(){this._cfg.painter.draw(this)},getShape:function(i,a,o){return arguments.length===3&&this._cfg.renderer.getShape?this._cfg.renderer.getShape.call(this,i,a,o):h.superclass.getShape.call(this,i,a)},_drawSync:function(){this._cfg.painter.drawSync(this)},destroy:function(){var i=this._cfg,a=i.containerDOM,o=i.canvasDOM;o&&a&&a.removeChild(o),i.timeline.stop(),h.superclass.destroy.call(this)}}),E.exports=h},function(E,T,e){var t=e(1),u={delay:"delay",rotate:"rotate"},s={fill:"fill",stroke:"stroke",fillStyle:"fillStyle",strokeStyle:"strokeStyle"};function c(n,i){var a={},o=i._attrs;for(var l in n.attrs)a[l]=o[l];return a}function r(n,i){var a={matrix:null,attrs:{}},o=i._attrs;for(var l in n)if(l==="transform")a.matrix=t.transform(i.getMatrix(),n[l]);else if(l==="rotate")a.matrix=t.transform(i.getMatrix(),[["r",n[l]]]);else if(l==="matrix")a.matrix=n[l];else{if(s[l]&&/^[r,R,L,l]{1}[\s]*\(/.test(n[l]))continue;!u[l]&&o[l]!==n[l]&&(a.attrs[l]=n[l])}return a}function h(n,i){var a=i.delay,o=Object.prototype.hasOwnProperty;return t.each(i.toAttrs,function(l,f){t.each(n,function(v){a<v.startTime+v.duration&&o.call(v.toAttrs,f)&&(delete v.toAttrs[f],delete v.fromAttrs[f])})}),i.toMatrix&&t.each(n,function(l){a<l.startTime+l.duration&&l.toMatrix&&delete l.toMatrix}),n}E.exports={animate:function(i,a,o,l,f){f===void 0&&(f=0);var v=this;v.set("animating",!0);var b=v.get("timeline");b||(b=v.get("canvas").get("timeline"),v.setSilent("timeline",b));var g=v.get("animators")||[];b._timer||b.initTimer(),t.isNumber(l)&&(f=l,l=null),t.isFunction(o)?(l=o,o="easeLinear"):o=o||"easeLinear";var m=r(i,v),_={fromAttrs:c(m,v),toAttrs:m.attrs,fromMatrix:t.clone(v.getMatrix()),toMatrix:m.matrix,duration:a,easing:o,callback:l,delay:f,startTime:b.getTime(),id:t.uniqueId()};g.length>0?g=h(g,_):b.addAnimator(v),g.push(_),v.setSilent("animators",g),v.setSilent("pause",{isPaused:!1})},stopAnimate:function(){var i=this,a=this.get("animators");t.each(a,function(o){i.attr(o.toAttrs),o.toMatrix&&i.attr("matrix",o.toMatrix),o.callback&&o.callback()}),this.setSilent("animating",!1),this.setSilent("animators",[])},pauseAnimate:function(){var i=this,a=i.get("timeline");return i.setSilent("pause",{isPaused:!0,pauseTime:a.getTime()}),i},resumeAnimate:function(){var i=this,a=i.get("timeline"),o=a.getTime(),l=i.get("animators"),f=i.get("pause").pauseTime;return t.each(l,function(v){v.startTime=v.startTime+(o-f),v._paused=!1,v._pauseTime=null}),i.setSilent("pause",{isPaused:!1}),i.setSilent("animators",l),i}}},function(E,T,e){var t=e(1);E.exports={canFill:!1,canStroke:!1,initAttrs:function(s){return this._attrs={opacity:1,fillOpacity:1,strokeOpacity:1,matrix:[1,0,0,0,1,0,0,0,1]},this.attr(t.assign(this.getDefaultAttrs(),s)),this},getDefaultAttrs:function(){return{}},attr:function(s,c){var r=this;if(arguments.length===0)return r._attrs;if(t.isObject(s)){for(var h in s)this._setAttr(h,s[h]);return r.clearBBox(),this._cfg.hasUpdate=!0,r}return arguments.length===2?(this._setAttr(s,c),r.clearBBox(),this._cfg.hasUpdate=!0,r):r._attrs[s]},_setAttr:function(s,c){var r=this,h=this._attrs;if(h[s]=c,s==="fill"||s==="stroke"){h[s+"Style"]=c;return}if(s==="opacity"){h.globalAlpha=c;return}if(s==="clip"&&c){r._setClip(c);return}if(s==="path"&&r._afterSetAttrPath){r._afterSetAttrPath(c);return}if(s==="transform"){r.transform(c);return}s==="rotate"&&r.rotateAtStart(c)},clearBBox:function(){this.setSilent("box",null)},hasFill:function(){return this.canFill&&this._attrs.fillStyle},hasStroke:function(){return this.canStroke&&this._attrs.strokeStyle},_setClip:function(s){s._cfg.renderer=this._cfg.renderer,s._cfg.canvas=this._cfg.canvas,s._cfg.parent=this._cfg.parent,s.hasFill=function(){return!0}}}},function(E,T,e){var t=e(1),u=e(76),s={arc:e(47),ellipse:e(143),line:e(48)},c=t.createDom('<canvas width="500" height="500"></canvas>'),r=c.getContext("2d");function h(S,P,A){return A.createPath(r),r.isPointInPath(S,P)}var n=function(P,A){var O=this._attrs,L=O.x,H=O.y,F=O.r,K=O.startAngle,G=O.endAngle,U=O.clockwise,Z=this.getHitLineWidth();return this.hasStroke()?u.arcline(L,H,F,K,G,U,Z,P,A):!1},i=function(P,A){var O=this._attrs,L=O.x,H=O.y,F=O.r,K=this.getHitLineWidth(),G=this.hasFill(),U=this.hasStroke();return G&&U?u.circle(L,H,F,P,A)||u.arcline(L,H,F,0,Math.PI*2,!1,K,P,A):G?u.circle(L,H,F,P,A):U?u.arcline(L,H,F,0,Math.PI*2,!1,K,P,A):!1},a=function(P,A){var O=this._attrs,L=this.hasFill(),H=this.hasStroke(),F=O.x,K=O.y,G=O.rx,U=O.ry,Z=this.getHitLineWidth(),J=G>U?G:U,rt=G>U?1:G/U,vt=G>U?U/G:1,mt=[P,A,1],ut=[1,0,0,0,1,0,0,0,1];t.mat3.scale(ut,ut,[rt,vt]),t.mat3.translate(ut,ut,[F,K]);var Rt=t.mat3.invert([],ut);return t.vec3.transformMat3(mt,mt,Rt),L&&H?u.circle(0,0,J,mt[0],mt[1])||u.arcline(0,0,J,0,Math.PI*2,!1,Z,mt[0],mt[1]):L?u.circle(0,0,J,mt[0],mt[1]):H?u.arcline(0,0,J,0,Math.PI*2,!1,Z,mt[0],mt[1]):!1},o=function(P,A){var O=this,L=O.hasFill(),H=O.hasStroke(),F=O._attrs,K=F.x,G=F.y,U=F.rs,Z=F.re,J=F.startAngle,rt=F.endAngle,vt=F.clockwise,mt=[1,0],ut=[P-K,A-G],Rt=t.vec2.angleTo(mt,ut);function Ft(){var Mt=s.arc.nearAngle(Rt,J,rt,vt);if(t.isNumberEqual(Rt,Mt)){var St=t.vec2.squaredLength(ut);if(U*U<=St&&St<=Z*Z)return!0}return!1}function wt(){var Mt=O.getHitLineWidth(),St={x:Math.cos(J)*U+K,y:Math.sin(J)*U+G},At={x:Math.cos(J)*Z+K,y:Math.sin(J)*Z+G},nt={x:Math.cos(rt)*U+K,y:Math.sin(rt)*U+G},Pt={x:Math.cos(rt)*Z+K,y:Math.sin(rt)*Z+G};return!!(u.line(St.x,St.y,At.x,At.y,Mt,P,A)||u.line(nt.x,nt.y,Pt.x,Pt.y,Mt,P,A)||u.arcline(K,G,U,J,rt,vt,Mt,P,A)||u.arcline(K,G,Z,J,rt,vt,Mt,P,A))}return L&&H?Ft()||wt():L?Ft():H?wt():!1},l=function(P,A){var O=this._attrs;if(this.get("toDraw")||!O.img)return!1;(!this._cfg.attrs||this._cfg.attrs.img!==O.img)&&this._setAttrImg();var L=O.x,H=O.y,F=O.width,K=O.height;return u.rect(L,H,F,K,P,A)},f=function(P,A){var O=this._attrs,L=O.x1,H=O.y1,F=O.x2,K=O.y2,G=this.getHitLineWidth();return this.hasStroke()?u.line(L,H,F,K,G,P,A):!1},v=function(P,A){var O=this,L=O.get("segments"),H=O.hasFill(),F=O.hasStroke();function K(){if(!t.isEmpty(L)){for(var G=O.getHitLineWidth(),U=0,Z=L.length;U<Z;U++)if(L[U].isInside(P,A,G))return!0;return!1}}return H&&F?h(P,A,O)||K():H?h(P,A,O):F?K():!1},b=function(P,A){var O=this,L=O.hasFill(),H=O.hasStroke();function F(){var K=O._attrs,G=K.points;if(G.length<2)return!1;var U=O.getHitLineWidth(),Z=G.slice(0);return G.length>=3&&Z.push(G[0]),u.polyline(Z,U,P,A)}return L&&H?h(P,A,O)||F():L?h(P,A,O):H?F():!1},g=function(P,A){var O=this._attrs,L=O.x,H=O.y,F=O.radius||O.r,K=this.getHitLineWidth();return u.circle(L,H,F+K/2,P,A)},m=function(P,A){var O=this,L=O._attrs;if(O.hasStroke()){var H=L.points;if(H.length<2)return!1;var F=L.lineWidth;return u.polyline(H,F,P,A)}return!1},_=function(P,A){var O=this,L=O.hasFill(),H=O.hasStroke();function F(){var K=O._attrs,G=K.x,U=K.y,Z=K.width,J=K.height,rt=K.radius,vt=O.getHitLineWidth();if(rt===0){var mt=vt/2;return u.line(G-mt,U,G+Z+mt,U,vt,P,A)||u.line(G+Z,U-mt,G+Z,U+J+mt,vt,P,A)||u.line(G+Z+mt,U+J,G-mt,U+J,vt,P,A)||u.line(G,U+J+mt,G,U-mt,vt,P,A)}return u.line(G+rt,U,G+Z-rt,U,vt,P,A)||u.line(G+Z,U+rt,G+Z,U+J-rt,vt,P,A)||u.line(G+Z-rt,U+J,G+rt,U+J,vt,P,A)||u.line(G,U+J-rt,G,U+rt,vt,P,A)||u.arcline(G+Z-rt,U+rt,rt,1.5*Math.PI,2*Math.PI,!1,vt,P,A)||u.arcline(G+Z-rt,U+J-rt,rt,0,.5*Math.PI,!1,vt,P,A)||u.arcline(G+rt,U+J-rt,rt,.5*Math.PI,Math.PI,!1,vt,P,A)||u.arcline(G+rt,U+rt,rt,Math.PI,1.5*Math.PI,!1,vt,P,A)}return L&&H?h(P,A,O)||F():L?h(P,A,O):H?F():!1},M=function(P,A){var O=this,L=O.getBBox();if(O.hasFill()||O.hasStroke())return u.box(L.minX,L.maxX,L.minY,L.maxY,P,A)},x=function(P,A){if(!this._cfg.el)return!1;var O=this._cfg.el.getBBox();return u.box(O.x,O.x+O.width,O.y,O.y+O.height,P,A)},y={arc:n,circle:i,dom:x,ellipse:a,fan:o,image:l,line:f,path:v,marker:g,polygon:b,polyline:m,rect:_,text:M};E.exports={isPointInPath:function(P,A){var O=y[this.type];return O?O.call(this,P,A):!1}}},function(E,T,e){var t=e(1),u=e(77),s=e(103),c=e(199),r=e(453),h=r.interpolate,n=r.interpolateArray,i=function(f){this._animators=[],this._current=0,this._timer=null,this.canvas=f};function a(l,f,v){var b={},g=f.toAttrs,m=f.fromAttrs,_=f.toMatrix;if(!l.get("destroyed")){var M;for(var x in g)if(!t.isEqual(m[x],g[x]))if(x==="path"){var y=g[x],S=m[x];y.length>S.length?(y=u.parsePathString(g[x]),S=u.parsePathString(m[x]),S=u.fillPathByDiff(S,y),S=u.formatPath(S,y),f.fromAttrs.path=S,f.toAttrs.path=y):f.pathFormatted||(y=u.parsePathString(g[x]),S=u.parsePathString(m[x]),S=u.formatPath(S,y),f.fromAttrs.path=S,f.toAttrs.path=y,f.pathFormatted=!0),b[x]=[];for(var P=0;P<y.length;P++){for(var A=y[P],O=S[P],L=[],H=0;H<A.length;H++)t.isNumber(A[H])&&O&&t.isNumber(O[H])?(M=h(O[H],A[H]),L.push(M(v))):L.push(A[H]);b[x].push(L)}}else M=h(m[x],g[x]),b[x]=M(v);if(_){var F=n(f.fromMatrix,_),K=F(v);l.setMatrix(K)}l.attr(b)}}function o(l,f,v){var b=f.startTime;if(v<b+f.delay||f.isPaused)return!1;var g,m=f.duration,_=f.easing;if(v=v-b-f.delay,f.toAttrs.repeat)g=v%m/m,g=c[_](g);else if(g=v/m,g<1)g=c[_](g);else return l.attr(f.toAttrs),f.toMatrix&&l.setMatrix(f.toMatrix),!0;return a(l,f,g),!1}t.augment(i,{initTimer:function(){var f=this,v=this,b=!1,g,m,_;v._timer=s.timer(function(M){if(v._current=M,f._animators.length>0){for(var x=f._animators.length-1;x>=0;x--){if(g=f._animators[x],g.get("destroyed")){v.removeAnimator(x);continue}if(!g.get("pause").isPaused){m=g.get("animators");for(var y=m.length-1;y>=0;y--)_=m[y],b=o(g,_,M),b&&(m.splice(y,1),b=!1,_.callback&&_.callback())}m.length===0&&v.removeAnimator(x)}f.canvas.draw()}})},addAnimator:function(f){this._animators.push(f)},removeAnimator:function(f){this._animators.splice(f,1)},isAnimating:function(){return!!this._animators.length},stop:function(){this._timer&&this._timer.stop()},stopAllAnimations:function(){this._animators.forEach(function(f){f.stopAnimate()}),this._animators=[],this.canvas.draw()},getTime:function(){return this._current}}),E.exports=i},function(E,T,e){var t=e(1);function u(r){return r[0]===1&&r[1]===0&&r[3]===0&&r[4]===1&&r[6]===0&&r[7]===0}function s(r){return r[1]===0&&r[3]===0&&r[6]===0&&r[7]===0}function c(r,h){u(h)||(s(h)?(r[0]*=h[0],r[4]*=h[4]):t.mat3.multiply(r,r,h))}E.exports={initTransform:function(){},resetMatrix:function(){this.attr("matrix",[1,0,0,0,1,0,0,0,1])},translate:function(h,n){var i=this._attrs.matrix;return t.mat3.translate(i,i,[h,n]),this.clearTotalMatrix(),this.attr("matrix",i),this},rotate:function(h){var n=this._attrs.matrix;return t.mat3.rotate(n,n,h),this.clearTotalMatrix(),this.attr("matrix",n),this},scale:function(h,n){var i=this._attrs.matrix;return t.mat3.scale(i,i,[h,n]),this.clearTotalMatrix(),this.attr("matrix",i),this},rotateAtStart:function(h){var n=this._attrs.x||this._cfg.attrs.x,i=this._attrs.y||this._cfg.attrs.y;return Math.abs(h)>Math.PI*2&&(h=h/180*Math.PI),this.transform([["t",-n,-i],["r",h],["t",n,i]])},move:function(h,n){var i=this.get("x")||0,a=this.get("y")||0;return this.translate(h-i,n-a),this.set("x",h),this.set("y",n),this},transform:function(h){var n=this,i=this._attrs.matrix;return t.each(h,function(a){switch(a[0]){case"t":n.translate(a[1],a[2]);break;case"s":n.scale(a[1],a[2]);break;case"r":n.rotate(a[1]);break;case"m":n.attr("matrix",t.mat3.multiply([],i,a[1])),n.clearTotalMatrix();break;default:break}}),n},setTransform:function(h){return this.attr("matrix",[1,0,0,0,1,0,0,0,1]),this.transform(h)},getMatrix:function(){return this.attr("matrix")},setMatrix:function(h){return this.attr("matrix",h),this.clearTotalMatrix(),this},apply:function(h,n){var i;return n?i=this._getMatrixByRoot(n):i=this.attr("matrix"),t.vec3.transformMat3(h,h,i),this},_getMatrixByRoot:function(h){var n=this;h=h||n;for(var i=n,a=[];i!==h;)a.unshift(i),i=i.get("parent");a.unshift(i);var o=[1,0,0,0,1,0,0,0,1];return t.each(a,function(l){t.mat3.multiply(o,l.attr("matrix"),o)}),o},getTotalMatrix:function(){var h=this._cfg.totalMatrix;if(!h){h=[1,0,0,0,1,0,0,0,1];var n=this._cfg.parent;if(n){var i=n.getTotalMatrix();c(h,i)}c(h,this.attr("matrix")),this._cfg.totalMatrix=h}return h},clearTotalMatrix:function(){},invert:function(h){var n=this.getTotalMatrix();if(s(n))h[0]/=n[0],h[1]/=n[4];else{var i=t.mat3.invert([],n);i&&t.vec3.transformMat3(h,h,i)}return this},resetTransform:function(h){var n=this.attr("matrix");u(n)||h.transform(n[0],n[1],n[3],n[4],n[6],n[7])}}},function(E,T,e){E.exports={painter:e(335)}},function(E,T,e){var t=e(1),u=e(336),s=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash","lineDashOffset"],c=function(){function r(n){if(!n)return null;var i=t.uniqueId("canvas_"),a=t.createDom('<canvas id="'+i+'"></canvas>');return n.appendChild(a),this.type="canvas",this.canvas=a,this.context=a.getContext("2d"),this.toDraw=!1,this}var h=r.prototype;return h.beforeDraw=function(){var i=this.canvas;this.context&&this.context.clearRect(0,0,i.width,i.height)},h.draw=function(i){var a=this;function o(){a.animateHandler=t.requestAnimationFrame(function(){a.animateHandler=void 0,a.toDraw&&o()}),a.beforeDraw();try{a._drawGroup(i)}catch(l){console.warn("error in draw canvas, detail as:"),console.warn(l),a.toDraw=!1}a.toDraw=!1}a.animateHandler?a.toDraw=!0:o()},h.drawSync=function(i){this.beforeDraw(),this._drawGroup(i)},h._drawGroup=function(i){if(!(i._cfg.removed||i._cfg.destroyed||!i._cfg.visible)){var a=this,o=i._cfg.children,l=null;this.setContext(i);for(var f=0;f<o.length;f++)l=o[f],o[f].isGroup?a._drawGroup(l):a._drawShape(l);this.restoreContext(i)}},h._drawShape=function(i){i._cfg.removed||i._cfg.destroyed||!i._cfg.visible||(this.setContext(i),i.drawInner(this.context),this.restoreContext(i),i._cfg.attrs=i._attrs,i._cfg.hasUpdate=!1)},h.setContext=function(i){var a=this.context,o=i._attrs.clip;a.save(),o&&(o.resetTransform(a),o.createPath(a),a.clip()),this.resetContext(i),i.resetTransform(a)},h.restoreContext=function(){this.context.restore()},h.resetContext=function(i){var a=this.context,o=i._attrs;if(!i.isGroup){for(var l in o)if(s.indexOf(l)>-1){var f=o[l];l==="fillStyle"&&(f=u.parseStyle(f,i,a)),l==="strokeStyle"&&(f=u.parseStyle(f,i,a)),l==="lineDash"&&a.setLineDash?t.isArray(f)?a.setLineDash(f):t.isString(f)&&a.setLineDash(f.split(" ")):a[l]=f}}},r}();E.exports=c},function(E,T,e){var t=e(1),u=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,s=/[^\s\,]+/ig,c=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,r=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,h=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,n=/[\d.]+:(#[^\s]+|[^\)]+\))/ig,i={};function a(v,b){var g=v.match(n);t.each(g,function(m){m=m.split(":"),b.addColorStop(m[0],m[1])})}function o(v,b,g){var m=c.exec(v),_=t.mod(t.toRadian(parseFloat(m[1])),Math.PI*2),M=m[2],x=b.getBBox(),y,S;_>=0&&_<.5*Math.PI?(y={x:x.minX,y:x.minY},S={x:x.maxX,y:x.maxY}):.5*Math.PI<=_&&_<Math.PI?(y={x:x.maxX,y:x.minY},S={x:x.minX,y:x.maxY}):Math.PI<=_&&_<1.5*Math.PI?(y={x:x.maxX,y:x.maxY},S={x:x.minX,y:x.minY}):(y={x:x.minX,y:x.maxY},S={x:x.maxX,y:x.minY});var P=Math.tan(_),A=P*P,O=(S.x-y.x+P*(S.y-y.y))/(A+1)+y.x,L=P*(S.x-y.x+P*(S.y-y.y))/(A+1)+y.y,H=g.createLinearGradient(y.x,y.y,O,L);return a(M,H),H}function l(v,b,g){var m=r.exec(v),_=parseFloat(m[1]),M=parseFloat(m[2]),x=parseFloat(m[3]),y=m[4];if(x===0){var S=y.match(n);return S[S.length-1].split(":")[1]}var P=b.getBBox(),A=P.maxX-P.minX,O=P.maxY-P.minY,L=Math.sqrt(A*A+O*O)/2,H=g.createRadialGradient(P.minX+A*_,P.minY+O*M,x*L,P.minX+A/2,P.minY+O/2,L);return a(y,H),H}function f(v,b,g){if(b.get("patternSource")&&b.get("patternSource")===v)return b.get("pattern");var m,_,M=h.exec(v),x=M[1],y=M[2];function S(){m=g.createPattern(_,x),b.setSilent("pattern",m),b.setSilent("patternSource",v)}switch(x){case"a":x="repeat";break;case"x":x="repeat-x";break;case"y":x="repeat-y";break;case"n":x="no-repeat";break;default:x="no-repeat"}return _=new Image,y.match(/^data:/i)||(_.crossOrigin="Anonymous"),_.src=y,_.complete?S():(_.onload=S,_.src=_.src),m}E.exports={parsePath:function(b){if(b=b||[],t.isArray(b))return b;if(t.isString(b))return b=b.match(u),t.each(b,function(g,m){if(g=g.match(s),g[0].length>1){var _=g[0].charAt(0);g.splice(1,0,g[0].substr(1)),g[0]=_}t.each(g,function(M,x){isNaN(M)||(g[x]=+M)}),b[m]=g}),b},parseStyle:function(b,g,m){if(t.isString(b)){if(b[1]==="("||b[2]==="("){if(b[0]==="l")return o(b,g,m);if(b[0]==="r")return l(b,g,m);if(b[0]==="p")return f(b,g,m)}return b}},numberToColor:function(b){var g=i[b];if(!g){for(var m=b.toString(16),_=m.length;_<6;_++)m="0"+m;g="#"+m,i[b]=g}return g}}},function(E,T,e){E.exports={canvas:e(334),svg:e(345)}},function(E,T,e){var t=e(1),u=e(341),s=e(343),c=e(339),r=e(340),h=e(342),n=function(){function i(o){var l=document.createElementNS("http://www.w3.org/2000/svg","defs"),f=t.uniqueId("defs_");l.id=f,o.appendChild(l),this.children=[],this.defaultArrow={},this.el=l,this.canvas=o}var a=i.prototype;return a.find=function(l,f){for(var v=this.children,b=null,g=0;g<v.length;g++)if(v[g].match(l,f)){b=v[g].id;break}return b},a.findById=function(l){for(var f=this.children,v=null,b=0;b<f.length;b++)if(f[b].id===l){v=f[b];break}return v},a.add=function(l){this.children.push(l),l.canvas=this.canvas,l.parent=this},a.getDefaultArrow=function(l,f){var v=l.stroke||l.strokeStyle;if(this.defaultArrow[v])return this.defaultArrow[v].id;var b=new c(l,f);return this.defaultArrow[v]=b,this.el.appendChild(b.el),b.id},a.addGradient=function(l){var f=new u(l);return this.el.appendChild(f.el),this.add(f),f.id},a.addArrow=function(l,f){var v=new c(l,f);return this.el.appendChild(v.el),v.id},a.addShadow=function(l){var f=new s(l);return this.el.appendChild(f.el),this.add(f),f.id},a.addPattern=function(l){var f=new h(l);return this.el.appendChild(f.el),this.add(f),f.id},a.addClip=function(l){var f=new r(l);return this.el.appendChild(f.el),this.add(f),f.id},i}();E.exports=n},function(E,T,e){var t=e(1),u=function(){function s(r,h){var n=document.createElementNS("http://www.w3.org/2000/svg","marker"),i=t.uniqueId("marker_");n.setAttribute("id",i);var a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("stroke","none"),a.setAttribute("fill",r.stroke||"#000"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=i,this.cfg=r[h==="marker-start"?"startArrow":"endArrow"],this.stroke=r.stroke||"#000",this.cfg===!0?this._setDefaultPath(h,a):this._setMarker(r.lineWidth,a),this}var c=s.prototype;return c.match=function(){return!1},c._setDefaultPath=function(h,n){var i=this.el;n.setAttribute("d","M0,0 L6,3 L0,6 L3,3Z"),i.setAttribute("refX",3),i.setAttribute("refY",3)},c._setMarker=function(h,n){var i=this.el,a=this.cfg.path,o=this.cfg.d;t.isArray(a)&&(a=a.map(function(l){return l.join(" ")}).join("")),n.setAttribute("d",a),i.appendChild(n),o&&i.setAttribute("refX",o/h)},c.update=function(h){var n=this.child;n.attr?n.attr("fill",h):n.setAttribute("fill",h)},s}();E.exports=u},function(E,T,e){var t=e(1),u=function(){function s(r){this.type="clip";var h=document.createElementNS("http://www.w3.org/2000/svg","clipPath");this.el=h,this.id=t.uniqueId("clip_"),h.id=this.id;var n=r._cfg.el;return h.appendChild(n.cloneNode(!0)),this.cfg=r,this}var c=s.prototype;return c.match=function(){return!1},c.remove=function(){var h=this.el;h.parentNode.removeChild(h)},s}();E.exports=u},function(E,T,e){var t=e(1),u=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,s=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,c=/[\d.]+:(#[^\s]+|[^\)]+\))/ig;function r(a){var o=a.match(c);if(!o)return"";var l="";return o.sort(function(f,v){return f=f.split(":"),v=v.split(":"),Number(f[0])-Number(v[0])}),t.each(o,function(f){f=f.split(":"),l+='<stop offset="'+f[0]+'" stop-color="'+f[1]+'"></stop>'}),l}function h(a,o){var l=u.exec(a),f=t.mod(t.toRadian(parseFloat(l[1])),Math.PI*2),v=l[2],b,g;f>=0&&f<.5*Math.PI?(b={x:0,y:0},g={x:1,y:1}):.5*Math.PI<=f&&f<Math.PI?(b={x:1,y:0},g={x:0,y:1}):Math.PI<=f&&f<1.5*Math.PI?(b={x:1,y:1},g={x:0,y:0}):(b={x:0,y:1},g={x:1,y:0});var m=Math.tan(f),_=m*m,M=(g.x-b.x+m*(g.y-b.y))/(_+1)+b.x,x=m*(g.x-b.x+m*(g.y-b.y))/(_+1)+b.y;o.setAttribute("x1",b.x),o.setAttribute("y1",b.y),o.setAttribute("x2",M),o.setAttribute("y2",x),o.innerHTML=r(v)}function n(a,o){var l=s.exec(a),f=parseFloat(l[1]),v=parseFloat(l[2]),b=parseFloat(l[3]),g=l[4];o.setAttribute("cx",f),o.setAttribute("cy",v),o.setAttribute("r",b),o.innerHTML=r(g)}var i=function(){function a(l){var f=null,v=t.uniqueId("gradient_");return l.toLowerCase()[0]==="l"?(f=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),h(l,f)):(f=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),n(l,f)),f.setAttribute("id",v),this.el=f,this.id=v,this.cfg=l,this}var o=a.prototype;return o.match=function(f,v){return this.cfg===v},a}();E.exports=i},function(E,T,e){var t=e(1),u=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,s=function(){function c(h){var n=document.createElementNS("http://www.w3.org/2000/svg","pattern");n.setAttribute("patternUnits","userSpaceOnUse");var i=document.createElementNS("http://www.w3.org/2000/svg","image");n.appendChild(i);var a=t.uniqueId("pattern_");n.id=a,this.el=n,this.id=a,this.cfg=h;var o=u.exec(h),l=o[2];i.setAttribute("href",l);var f=new Image;l.match(/^data:/i)||(f.crossOrigin="Anonymous"),f.src=l;function v(){console.log(f.width,f.height),n.setAttribute("width",f.width),n.setAttribute("height",f.height)}return f.complete?v():(f.onload=v,f.src=f.src),this}var r=c.prototype;return r.match=function(n,i){return this.cfg===i},c}();E.exports=s},function(E,T,e){var t=e(1),u={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},s={x:"-40%",y:"-40%",width:"200%",height:"200%"},c=function(){function r(n){this.type="filter";var i=document.createElementNS("http://www.w3.org/2000/svg","filter");return t.each(s,function(a,o){i.setAttribute(o,a)}),this.el=i,this.id=t.uniqueId("filter_"),this.el.id=this.id,this.cfg=n,this._parseShadow(n,i),this}var h=r.prototype;return h.match=function(i,a){if(this.type!==i)return!1;var o=!0,l=this.cfg;return t.each(Object.keys(l),function(f){if(l[f]!==a[f])return o=!1,!1}),o},h.update=function(i,a){var o=this.cfg;return o[u[i]]=a,this._parseShadow(o,this.el),this},h._parseShadow=function(i,a){var o=`<feDropShadow 
      dx="`+(i.dx||0)+`" 
      dy="`+(i.dy||0)+`" 
      stdDeviation="`+(i.blur?i.blur/10:0)+`"
      flood-color="`+(i.color?i.color:"#000")+`"
      flood-opacity="`+(i.opacity?i.opacity:1)+`"
      />`;a.innerHTML=o},r}();E.exports=c},function(E,T){var e={svg:"svg",circle:"circle",rect:"rect",text:"text",path:"path",foreignObject:"foreignObject",polygon:"polygon",ellipse:"ellipse",image:"image"};E.exports=function(u,s,c){var r=c.target||c.srcElement;if(!e[r.tagName]){for(var h=r.parentNode;h&&!e[h.tagName];)h=h.parentNode;r=h}return this._cfg.el===r?this:this.find(function(n){return n._cfg&&n._cfg.el===r})}},function(E,T,e){E.exports={painter:e(346),getShape:e(344)}},function(E,T,e){var t=e(1),u=e(37),s=u.parseRadius,c=e(74),r=e(338),h={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject",fan:"path",group:"g"},n=.3,i={opacity:"opacity",fillStyle:"fill",strokeOpacity:"stroke-opacity",fillOpacity:"fill-opacity",strokeStyle:"stroke",x:"x",y:"y",r:"r",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},a={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},o={left:"left",start:"left",center:"middle",right:"end",end:"end"},l=function(){function f(b){if(!b)return null;var g=t.uniqueId("canvas_"),m=t.createDom('<svg id="'+g+'"></svg>');return b.appendChild(m),this.type="svg",this.canvas=m,this.context=new r(m),this.toDraw=!1,this}var v=f.prototype;return v.draw=function(g){var m=this;function _(){m.animateHandler=t.requestAnimationFrame(function(){m.animateHandler=void 0,m.toDraw&&_()});try{g.resetMatrix(),m._drawGroup(g,!1)}catch(M){console.warn("error in draw canvas, detail as:"),console.warn(M),m.toDraw=!1}m.toDraw=!1}m.animateHandler?m.toDraw=!0:_()},v.drawSync=function(g){this._drawChildren(g,!1)},v._drawGroup=function(g,m){var _=g._cfg;_.removed||_.destroyed||(!_.el&&_.attrs&&(m=!0),_.tobeRemoved&&(t.each(_.tobeRemoved,function(M){M.parentNode&&M.parentNode.removeChild(M)}),_.tobeRemoved=[]),this._drawShape(g,m),_.children&&_.children.length>0&&this._drawChildren(g,m))},v._drawChildren=function(g,m){var _=this,M=g._cfg.children,x;if(!!M){if(g._cfg.el&&!m){var y=g._cfg.el.childNodes.length+1;y!==0&&y!==M.length&&(m=!0)}for(var S=0;S<M.length;S++)x=M[S],x.isGroup?_._drawGroup(x,m):_._drawShape(x,m)}},v._drawShape=function(g,m){var _=this,M=g._attrs,x=g._cfg,y=x.el;if(x.removed||x.destroyed){y&&y.parentNode.removeChild(x.el);return}if(m&&y&&(y.parentNode&&y.parentNode.removeChild(y),y=null),!y&&x.parent&&(_._createDom(g),_._updateShape(g)),y=x.el,x.visible===!1){y.setAttribute("visibility","hidden");return}x.visible&&y.hasAttribute("visibility")&&y.removeAttribute("visibility"),x.hasUpdate&&_._updateShape(g),M.clip&&M.clip._cfg.hasUpdate&&_._updateShape(M.clip)},v._updateShape=function(g){var m=this,_=g._attrs,M=g._cfg.attrs;if(!!M){if(g._cfg.el||m._createDom(g),"clip"in _&&this._setClip(g,_.clip),("shadowOffsetX"in _||"shadowOffsetY"in _||"shadowBlur"in _||"shadowColor"in _)&&this._setShadow(g),g.type==="text"){m._updateText(g);return}g.type==="fan"&&m._updateFan(g),g.type==="marker"&&g._cfg.el.setAttribute("d",m._assembleMarker(_)),g.type==="rect"&&g._cfg.el.setAttribute("d",m._assembleRect(_));for(var x in _)_[x]!==M[x]&&m._setAttribute(g,x,_[x]);g._cfg.attrs=t.deepMix({},g._attrs),g._cfg.hasUpdate=!1}},v._setAttribute=function(g,m,_){var M=g.type,x=g._attrs,y=g._cfg.el,S=this.context;if(!((M==="marker"||M==="rect")&&~["x","y","radius","r"].indexOf(m))){if(~["circle","ellipse"].indexOf(M)&&~["x","y"].indexOf(m)){y.setAttribute("c"+m,parseInt(_,10));return}if(M==="polygon"&&m==="points"){(!_||_.length===0)&&(_=""),t.isArray(_)&&(_=_.map(function(A){return A[0]+","+A[1]}),_=_.join(" ")),y.setAttribute("points",_);return}if(m==="path"&&t.isArray(_)){y.setAttribute("d",this._formatPath(_));return}if(m==="img"){this._setImage(g,_);return}if(m==="transform"){if(!_){y.removeAttribute("transform");return}this._setTransform(g);return}if(m==="rotate"){if(!_){y.removeAttribute("transform");return}this._setTransform(g);return}if(m==="matrix"){this._setTransform(g);return}if(m==="fillStyle"||m==="strokeStyle"){this._setColor(g,m,_);return}if(m!=="clip"){if(~m.indexOf("Arrow")){if(m=i[m],!_)g._cfg[m]=null,y.removeAttribute(m);else{var P=null;typeof _=="boolean"?P=S.getDefaultArrow(x,m):P=S.addArrow(x,m),y.setAttribute(m,"url(#"+P+")"),g._cfg[m]=P}return}m==="html"&&(typeof _=="string"?y.innerHTML=_:(y.innerHTML="",y.appendChild(_))),i[m]&&y.setAttribute(i[m],_)}}},v._createDom=function(g){var m=h[g.type],_=g._attrs;if(!m)throw new Error("the type"+g.type+"is not supported by svg");var M=document.createElementNS("http://www.w3.org/2000/svg",m);return g._cfg.el=M,g._cfg.parent&&g._cfg.parent.get("el").appendChild(M),g._cfg.attrs={},g.type==="text"?(M.setAttribute("paint-order","stroke"),M.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")):(!_.stroke&&!_.strokeStyle&&M.setAttribute("stroke","none"),!_.fill&&!_.fillStyle&&M.setAttribute("fill","none")),M},v._assembleMarker=function(g){var m=g.r;if(typeof g.r=="undefined"&&(m=g.radius),isNaN(Number(g.x))||isNaN(Number(g.y))||isNaN(Number(m)))return"";var _="";return typeof g.symbol=="function"?_=g.symbol(g.x,g.y,m):_=c.Symbols[g.symbol||"circle"](g.x,g.y,m),t.isArray(_)&&(_=_.map(function(M){return M.join(" ")}).join("")),_},v._assembleRect=function(g){var m=g.x,_=g.y,M=g.width,x=g.height,y=g.radius;if(!y)return"M "+m+","+_+" l "+M+",0 l 0,"+x+" l"+-M+" 0 z";var S=s(y);t.isArray(y)?y.length===1?S.r1=S.r2=S.r3=S.r4=y[0]:y.length===2?(S.r1=S.r3=y[0],S.r2=S.r4=y[1]):y.length===3?(S.r1=y[0],S.r2=S.r4=y[1],S.r3=y[2]):(S.r1=y[0],S.r2=y[1],S.r3=y[2],S.r4=y[3]):S.r1=S.r2=S.r3=S.r4=y;var P=[["M "+(m+S.r1)+","+_],["l "+(M-S.r1-S.r2)+",0"],["a "+S.r2+","+S.r2+",0,0,1,"+S.r2+","+S.r2],["l 0,"+(x-S.r2-S.r3)],["a "+S.r3+","+S.r3+",0,0,1,"+-S.r3+","+S.r3],["l "+(S.r3+S.r4-M)+",0"],["a "+S.r4+","+S.r4+",0,0,1,"+-S.r4+","+-S.r4],["l 0,"+(S.r4+S.r1-x)],["a "+S.r1+","+S.r1+",0,0,1,"+S.r1+","+-S.r1],["z"]];return P.join(" ")},v._formatPath=function(g){return g=g.map(function(m){return m.join(" ")}).join(""),~g.indexOf("NaN")?"":g},v._setTransform=function(g){for(var m=g._attrs.matrix,_=g._cfg.el,M=[],x=0;x<9;x+=3)M.push(m[x]+","+m[x+1]);M=M.join(","),M.indexOf("NaN")===-1?_.setAttribute("transform","matrix("+M+")"):console.warn("invalid matrix:",m)},v._setImage=function(g,m){var _=g._attrs,M=g._cfg.el;if(t.isString(m))M.setAttribute("href",m);else if(m instanceof Image)_.width||(M.setAttribute("width",m.width),g._attrs.width=m.width),_.height||(M.setAttribute("height",m.height),g._attrs.height=m.height),M.setAttribute("href",m.src);else if(m instanceof HTMLElement&&t.isString(m.nodeName)&&m.nodeName.toUpperCase()==="CANVAS")M.setAttribute("href",m.toDataURL());else if(m instanceof ImageData){var x=document.createElement("canvas");x.setAttribute("width",m.width),x.setAttribute("height",m.height),x.getContext("2d").putImageData(m,0,0),_.width||(M.setAttribute("width",m.width),g._attrs.width=m.width),_.height||(M.setAttribute("height",m.height),g._attrs.height=m.height),M.setAttribute("href",x.toDataURL())}},v._updateFan=function(g){function m(Z,J,rt){return{x:J*Math.cos(Z)+rt.x,y:J*Math.sin(Z)+rt.y}}var _=g._attrs,M=g._cfg,x={x:_.x,y:_.y},y=[],S=_.startAngle,P=_.endAngle;t.isNumberEqual(P-S,Math.PI*2)&&(P-=1e-5);var A=m(S,_.re,x),O=m(P,_.re,x),L=P>S?1:0,H=Math.abs(P-S)>Math.PI?1:0,F=_.rs,K=_.re,G=m(S,_.rs,x),U=m(P,_.rs,x);_.rs>0?(y.push("M "+O.x+","+O.y),y.push("L "+U.x+","+U.y),y.push("A "+F+","+F+",0,"+H+","+(L===1?0:1)+","+G.x+","+G.y),y.push("L "+A.x+" "+A.y)):(y.push("M "+x.x+","+x.y),y.push("L "+A.x+","+A.y)),y.push("A "+K+","+K+",0,"+H+","+L+","+O.x+","+O.y),_.rs>0?y.push("L "+U.x+","+U.y):y.push("Z"),M.el.setAttribute("d",y.join(" "))},v._updateText=function(g){var m=this,_=g._attrs,M=g._cfg.attrs,x=g._cfg.el;this._setFont(g);for(var y in _)if(_[y]!==M[y]){if(y==="text"){m._setText(g,""+_[y]);continue}if(y==="fillStyle"||y==="strokeStyle"){this._setColor(g,y,_[y]);continue}if(y==="matrix"){this._setTransform(g);continue}i[y]&&x.setAttribute(i[y],_[y])}g._cfg.attrs=Object.assign({},g._attrs),g._cfg.hasUpdate=!1},v._setFont=function(g){var m=g.get("el"),_=g._attrs,M=_.fontSize;m.setAttribute("alignment-baseline",a[_.textBaseline]||"baseline"),m.setAttribute("text-anchor",o[_.textAlign]||"left"),M&&+M<12&&(_.matrix=[1,0,0,0,1,0,0,0,1],g.transform([["t",-_.x,-_.y],["s",+M/12,+M/12],["t",_.x,_.y]]))},v._setText=function(g,m){var _=g._cfg.el,M=g._attrs.textBaseline||"bottom";if(!m)_.innerHTML="";else if(~m.indexOf(`
`)){var x=g._attrs.x,y=m.split(`
`),S=y.length-1,P="";t.each(y,function(A,O){O===0?M==="alphabetic"?P+='<tspan x="'+x+'" dy="'+-S+'em">'+A+"</tspan>":M==="top"?P+='<tspan x="'+x+'" dy="0.9em">'+A+"</tspan>":M==="middle"?P+='<tspan x="'+x+'" dy="'+-(S-1)/2+'em">'+A+"</tspan>":M==="bottom"?P+='<tspan x="'+x+'" dy="-'+(S+n)+'em">'+A+"</tspan>":M==="hanging"&&(P+='<tspan x="'+x+'" dy="'+(-(S-1)-n)+'em">'+A+"</tspan>"):P+='<tspan x="'+x+'" dy="1em">'+A+"</tspan>"}),_.innerHTML=P}else _.innerHTML=m},v._setClip=function(g,m){var _=g._cfg.el;if(!m){_.removeAttribute("clip-path");return}if(_.hasAttribute("clip-path"))m._cfg.hasUpdate&&this._updateShape(m);else{this._createDom(m),this._updateShape(m);var M=this.context.addClip(m);_.setAttribute("clip-path","url(#"+M+")")}},v._setColor=function(g,m,_){var M=g._cfg.el,x=this.context;if(!_){M.setAttribute(i[m],"none");return}if(_=_.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(_)){var y=x.find("gradient",_);y||(y=x.addGradient(_)),M.setAttribute(i[m],"url(#"+y+")")}else if(/^[p,P]{1}[\s]*\(/.test(_)){var S=x.find("pattern",_);S||(S=x.addPattern(_)),M.setAttribute(i[m],"url(#"+S+")")}else M.setAttribute(i[m],_)},v._setShadow=function(g){var m=g._cfg.el,_=g._attrs,M={dx:_.shadowOffsetX,dy:_.shadowOffsetY,blur:_.shadowBlur,color:_.shadowColor};if(!M.dx&&!M.dy&&!M.blur&&!M.color)m.removeAttribute("filter");else{var x=this.context.find("filter",M);x||(x=this.context.addShadow(M,this)),m.setAttribute("filter","url(#"+x+")")}},f}();E.exports=l},function(E,T,e){var t=e(7);t.Arc=e(136),t.Circle=e(137),t.Dom=e(138),t.Ellipse=e(139),t.Fan=e(140),t.Image=e(141),t.Line=e(142),t.Marker=e(74),t.Path=e(145),t.Polygon=e(146),t.Polyline=e(147),t.Rect=e(148),t.Text=e(149),E.exports=t},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.sub=T.mul=void 0,T.create=c,T.fromMat4=r,T.clone=h,T.copy=n,T.fromValues=i,T.set=a,T.identity=o,T.transpose=l,T.invert=f,T.adjoint=v,T.determinant=b,T.multiply=g,T.translate=m,T.rotate=_,T.scale=M,T.fromTranslation=x,T.fromRotation=y,T.fromScaling=S,T.fromMat2d=P,T.fromQuat=A,T.normalFromMat4=O,T.projection=L,T.str=H,T.frob=F,T.add=K,T.subtract=G,T.multiplyScalar=U,T.multiplyScalarAndAdd=Z,T.exactEquals=J,T.equals=rt;var t=e(78),u=s(t);function s(ut){if(ut&&ut.__esModule)return ut;var Rt={};if(ut!=null)for(var Ft in ut)Object.prototype.hasOwnProperty.call(ut,Ft)&&(Rt[Ft]=ut[Ft]);return Rt.default=ut,Rt}function c(){var ut=new u.ARRAY_TYPE(9);return u.ARRAY_TYPE!=Float32Array&&(ut[1]=0,ut[2]=0,ut[3]=0,ut[5]=0,ut[6]=0,ut[7]=0),ut[0]=1,ut[4]=1,ut[8]=1,ut}function r(ut,Rt){return ut[0]=Rt[0],ut[1]=Rt[1],ut[2]=Rt[2],ut[3]=Rt[4],ut[4]=Rt[5],ut[5]=Rt[6],ut[6]=Rt[8],ut[7]=Rt[9],ut[8]=Rt[10],ut}function h(ut){var Rt=new u.ARRAY_TYPE(9);return Rt[0]=ut[0],Rt[1]=ut[1],Rt[2]=ut[2],Rt[3]=ut[3],Rt[4]=ut[4],Rt[5]=ut[5],Rt[6]=ut[6],Rt[7]=ut[7],Rt[8]=ut[8],Rt}function n(ut,Rt){return ut[0]=Rt[0],ut[1]=Rt[1],ut[2]=Rt[2],ut[3]=Rt[3],ut[4]=Rt[4],ut[5]=Rt[5],ut[6]=Rt[6],ut[7]=Rt[7],ut[8]=Rt[8],ut}function i(ut,Rt,Ft,wt,Mt,St,At,nt,Pt){var z=new u.ARRAY_TYPE(9);return z[0]=ut,z[1]=Rt,z[2]=Ft,z[3]=wt,z[4]=Mt,z[5]=St,z[6]=At,z[7]=nt,z[8]=Pt,z}function a(ut,Rt,Ft,wt,Mt,St,At,nt,Pt,z){return ut[0]=Rt,ut[1]=Ft,ut[2]=wt,ut[3]=Mt,ut[4]=St,ut[5]=At,ut[6]=nt,ut[7]=Pt,ut[8]=z,ut}function o(ut){return ut[0]=1,ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=1,ut[5]=0,ut[6]=0,ut[7]=0,ut[8]=1,ut}function l(ut,Rt){if(ut===Rt){var Ft=Rt[1],wt=Rt[2],Mt=Rt[5];ut[1]=Rt[3],ut[2]=Rt[6],ut[3]=Ft,ut[5]=Rt[7],ut[6]=wt,ut[7]=Mt}else ut[0]=Rt[0],ut[1]=Rt[3],ut[2]=Rt[6],ut[3]=Rt[1],ut[4]=Rt[4],ut[5]=Rt[7],ut[6]=Rt[2],ut[7]=Rt[5],ut[8]=Rt[8];return ut}function f(ut,Rt){var Ft=Rt[0],wt=Rt[1],Mt=Rt[2],St=Rt[3],At=Rt[4],nt=Rt[5],Pt=Rt[6],z=Rt[7],q=Rt[8],gt=q*At-nt*z,et=-q*St+nt*Pt,at=z*St-At*Pt,xt=Ft*gt+wt*et+Mt*at;return xt?(xt=1/xt,ut[0]=gt*xt,ut[1]=(-q*wt+Mt*z)*xt,ut[2]=(nt*wt-Mt*At)*xt,ut[3]=et*xt,ut[4]=(q*Ft-Mt*Pt)*xt,ut[5]=(-nt*Ft+Mt*St)*xt,ut[6]=at*xt,ut[7]=(-z*Ft+wt*Pt)*xt,ut[8]=(At*Ft-wt*St)*xt,ut):null}function v(ut,Rt){var Ft=Rt[0],wt=Rt[1],Mt=Rt[2],St=Rt[3],At=Rt[4],nt=Rt[5],Pt=Rt[6],z=Rt[7],q=Rt[8];return ut[0]=At*q-nt*z,ut[1]=Mt*z-wt*q,ut[2]=wt*nt-Mt*At,ut[3]=nt*Pt-St*q,ut[4]=Ft*q-Mt*Pt,ut[5]=Mt*St-Ft*nt,ut[6]=St*z-At*Pt,ut[7]=wt*Pt-Ft*z,ut[8]=Ft*At-wt*St,ut}function b(ut){var Rt=ut[0],Ft=ut[1],wt=ut[2],Mt=ut[3],St=ut[4],At=ut[5],nt=ut[6],Pt=ut[7],z=ut[8];return Rt*(z*St-At*Pt)+Ft*(-z*Mt+At*nt)+wt*(Pt*Mt-St*nt)}function g(ut,Rt,Ft){var wt=Rt[0],Mt=Rt[1],St=Rt[2],At=Rt[3],nt=Rt[4],Pt=Rt[5],z=Rt[6],q=Rt[7],gt=Rt[8],et=Ft[0],at=Ft[1],xt=Ft[2],k=Ft[3],ot=Ft[4],it=Ft[5],$=Ft[6],_t=Ft[7],yt=Ft[8];return ut[0]=et*wt+at*At+xt*z,ut[1]=et*Mt+at*nt+xt*q,ut[2]=et*St+at*Pt+xt*gt,ut[3]=k*wt+ot*At+it*z,ut[4]=k*Mt+ot*nt+it*q,ut[5]=k*St+ot*Pt+it*gt,ut[6]=$*wt+_t*At+yt*z,ut[7]=$*Mt+_t*nt+yt*q,ut[8]=$*St+_t*Pt+yt*gt,ut}function m(ut,Rt,Ft){var wt=Rt[0],Mt=Rt[1],St=Rt[2],At=Rt[3],nt=Rt[4],Pt=Rt[5],z=Rt[6],q=Rt[7],gt=Rt[8],et=Ft[0],at=Ft[1];return ut[0]=wt,ut[1]=Mt,ut[2]=St,ut[3]=At,ut[4]=nt,ut[5]=Pt,ut[6]=et*wt+at*At+z,ut[7]=et*Mt+at*nt+q,ut[8]=et*St+at*Pt+gt,ut}function _(ut,Rt,Ft){var wt=Rt[0],Mt=Rt[1],St=Rt[2],At=Rt[3],nt=Rt[4],Pt=Rt[5],z=Rt[6],q=Rt[7],gt=Rt[8],et=Math.sin(Ft),at=Math.cos(Ft);return ut[0]=at*wt+et*At,ut[1]=at*Mt+et*nt,ut[2]=at*St+et*Pt,ut[3]=at*At-et*wt,ut[4]=at*nt-et*Mt,ut[5]=at*Pt-et*St,ut[6]=z,ut[7]=q,ut[8]=gt,ut}function M(ut,Rt,Ft){var wt=Ft[0],Mt=Ft[1];return ut[0]=wt*Rt[0],ut[1]=wt*Rt[1],ut[2]=wt*Rt[2],ut[3]=Mt*Rt[3],ut[4]=Mt*Rt[4],ut[5]=Mt*Rt[5],ut[6]=Rt[6],ut[7]=Rt[7],ut[8]=Rt[8],ut}function x(ut,Rt){return ut[0]=1,ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=1,ut[5]=0,ut[6]=Rt[0],ut[7]=Rt[1],ut[8]=1,ut}function y(ut,Rt){var Ft=Math.sin(Rt),wt=Math.cos(Rt);return ut[0]=wt,ut[1]=Ft,ut[2]=0,ut[3]=-Ft,ut[4]=wt,ut[5]=0,ut[6]=0,ut[7]=0,ut[8]=1,ut}function S(ut,Rt){return ut[0]=Rt[0],ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=Rt[1],ut[5]=0,ut[6]=0,ut[7]=0,ut[8]=1,ut}function P(ut,Rt){return ut[0]=Rt[0],ut[1]=Rt[1],ut[2]=0,ut[3]=Rt[2],ut[4]=Rt[3],ut[5]=0,ut[6]=Rt[4],ut[7]=Rt[5],ut[8]=1,ut}function A(ut,Rt){var Ft=Rt[0],wt=Rt[1],Mt=Rt[2],St=Rt[3],At=Ft+Ft,nt=wt+wt,Pt=Mt+Mt,z=Ft*At,q=wt*At,gt=wt*nt,et=Mt*At,at=Mt*nt,xt=Mt*Pt,k=St*At,ot=St*nt,it=St*Pt;return ut[0]=1-gt-xt,ut[3]=q-it,ut[6]=et+ot,ut[1]=q+it,ut[4]=1-z-xt,ut[7]=at-k,ut[2]=et-ot,ut[5]=at+k,ut[8]=1-z-gt,ut}function O(ut,Rt){var Ft=Rt[0],wt=Rt[1],Mt=Rt[2],St=Rt[3],At=Rt[4],nt=Rt[5],Pt=Rt[6],z=Rt[7],q=Rt[8],gt=Rt[9],et=Rt[10],at=Rt[11],xt=Rt[12],k=Rt[13],ot=Rt[14],it=Rt[15],$=Ft*nt-wt*At,_t=Ft*Pt-Mt*At,yt=Ft*z-St*At,Nt=wt*Pt-Mt*nt,$t=wt*z-St*nt,ee=Mt*z-St*Pt,Gt=q*k-gt*xt,Ht=q*ot-et*xt,ae=q*it-at*xt,le=gt*ot-et*k,Be=gt*it-at*k,Ce=et*it-at*ot,We=$*Ce-_t*Be+yt*le+Nt*ae-$t*Ht+ee*Gt;return We?(We=1/We,ut[0]=(nt*Ce-Pt*Be+z*le)*We,ut[1]=(Pt*ae-At*Ce-z*Ht)*We,ut[2]=(At*Be-nt*ae+z*Gt)*We,ut[3]=(Mt*Be-wt*Ce-St*le)*We,ut[4]=(Ft*Ce-Mt*ae+St*Ht)*We,ut[5]=(wt*ae-Ft*Be-St*Gt)*We,ut[6]=(k*ee-ot*$t+it*Nt)*We,ut[7]=(ot*yt-xt*ee-it*_t)*We,ut[8]=(xt*$t-k*yt+it*$)*We,ut):null}function L(ut,Rt,Ft){return ut[0]=2/Rt,ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=-2/Ft,ut[5]=0,ut[6]=-1,ut[7]=1,ut[8]=1,ut}function H(ut){return"mat3("+ut[0]+", "+ut[1]+", "+ut[2]+", "+ut[3]+", "+ut[4]+", "+ut[5]+", "+ut[6]+", "+ut[7]+", "+ut[8]+")"}function F(ut){return Math.sqrt(Math.pow(ut[0],2)+Math.pow(ut[1],2)+Math.pow(ut[2],2)+Math.pow(ut[3],2)+Math.pow(ut[4],2)+Math.pow(ut[5],2)+Math.pow(ut[6],2)+Math.pow(ut[7],2)+Math.pow(ut[8],2))}function K(ut,Rt,Ft){return ut[0]=Rt[0]+Ft[0],ut[1]=Rt[1]+Ft[1],ut[2]=Rt[2]+Ft[2],ut[3]=Rt[3]+Ft[3],ut[4]=Rt[4]+Ft[4],ut[5]=Rt[5]+Ft[5],ut[6]=Rt[6]+Ft[6],ut[7]=Rt[7]+Ft[7],ut[8]=Rt[8]+Ft[8],ut}function G(ut,Rt,Ft){return ut[0]=Rt[0]-Ft[0],ut[1]=Rt[1]-Ft[1],ut[2]=Rt[2]-Ft[2],ut[3]=Rt[3]-Ft[3],ut[4]=Rt[4]-Ft[4],ut[5]=Rt[5]-Ft[5],ut[6]=Rt[6]-Ft[6],ut[7]=Rt[7]-Ft[7],ut[8]=Rt[8]-Ft[8],ut}function U(ut,Rt,Ft){return ut[0]=Rt[0]*Ft,ut[1]=Rt[1]*Ft,ut[2]=Rt[2]*Ft,ut[3]=Rt[3]*Ft,ut[4]=Rt[4]*Ft,ut[5]=Rt[5]*Ft,ut[6]=Rt[6]*Ft,ut[7]=Rt[7]*Ft,ut[8]=Rt[8]*Ft,ut}function Z(ut,Rt,Ft,wt){return ut[0]=Rt[0]+Ft[0]*wt,ut[1]=Rt[1]+Ft[1]*wt,ut[2]=Rt[2]+Ft[2]*wt,ut[3]=Rt[3]+Ft[3]*wt,ut[4]=Rt[4]+Ft[4]*wt,ut[5]=Rt[5]+Ft[5]*wt,ut[6]=Rt[6]+Ft[6]*wt,ut[7]=Rt[7]+Ft[7]*wt,ut[8]=Rt[8]+Ft[8]*wt,ut}function J(ut,Rt){return ut[0]===Rt[0]&&ut[1]===Rt[1]&&ut[2]===Rt[2]&&ut[3]===Rt[3]&&ut[4]===Rt[4]&&ut[5]===Rt[5]&&ut[6]===Rt[6]&&ut[7]===Rt[7]&&ut[8]===Rt[8]}function rt(ut,Rt){var Ft=ut[0],wt=ut[1],Mt=ut[2],St=ut[3],At=ut[4],nt=ut[5],Pt=ut[6],z=ut[7],q=ut[8],gt=Rt[0],et=Rt[1],at=Rt[2],xt=Rt[3],k=Rt[4],ot=Rt[5],it=Rt[6],$=Rt[7],_t=Rt[8];return Math.abs(Ft-gt)<=u.EPSILON*Math.max(1,Math.abs(Ft),Math.abs(gt))&&Math.abs(wt-et)<=u.EPSILON*Math.max(1,Math.abs(wt),Math.abs(et))&&Math.abs(Mt-at)<=u.EPSILON*Math.max(1,Math.abs(Mt),Math.abs(at))&&Math.abs(St-xt)<=u.EPSILON*Math.max(1,Math.abs(St),Math.abs(xt))&&Math.abs(At-k)<=u.EPSILON*Math.max(1,Math.abs(At),Math.abs(k))&&Math.abs(nt-ot)<=u.EPSILON*Math.max(1,Math.abs(nt),Math.abs(ot))&&Math.abs(Pt-it)<=u.EPSILON*Math.max(1,Math.abs(Pt),Math.abs(it))&&Math.abs(z-$)<=u.EPSILON*Math.max(1,Math.abs(z),Math.abs($))&&Math.abs(q-_t)<=u.EPSILON*Math.max(1,Math.abs(q),Math.abs(_t))}var vt=T.mul=g,mt=T.sub=G},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.forEach=T.sqrLen=T.sqrDist=T.dist=T.div=T.mul=T.sub=T.len=void 0,T.create=c,T.clone=r,T.fromValues=h,T.copy=n,T.set=i,T.add=a,T.subtract=o,T.multiply=l,T.divide=f,T.ceil=v,T.floor=b,T.min=g,T.max=m,T.round=_,T.scale=M,T.scaleAndAdd=x,T.distance=y,T.squaredDistance=S,T.length=P,T.squaredLength=A,T.negate=O,T.inverse=L,T.normalize=H,T.dot=F,T.cross=K,T.lerp=G,T.random=U,T.transformMat2=Z,T.transformMat2d=J,T.transformMat3=rt,T.transformMat4=vt,T.rotate=mt,T.angle=ut,T.str=Rt,T.exactEquals=Ft,T.equals=wt;var t=e(78),u=s(t);function s(et){if(et&&et.__esModule)return et;var at={};if(et!=null)for(var xt in et)Object.prototype.hasOwnProperty.call(et,xt)&&(at[xt]=et[xt]);return at.default=et,at}function c(){var et=new u.ARRAY_TYPE(2);return u.ARRAY_TYPE!=Float32Array&&(et[0]=0,et[1]=0),et}function r(et){var at=new u.ARRAY_TYPE(2);return at[0]=et[0],at[1]=et[1],at}function h(et,at){var xt=new u.ARRAY_TYPE(2);return xt[0]=et,xt[1]=at,xt}function n(et,at){return et[0]=at[0],et[1]=at[1],et}function i(et,at,xt){return et[0]=at,et[1]=xt,et}function a(et,at,xt){return et[0]=at[0]+xt[0],et[1]=at[1]+xt[1],et}function o(et,at,xt){return et[0]=at[0]-xt[0],et[1]=at[1]-xt[1],et}function l(et,at,xt){return et[0]=at[0]*xt[0],et[1]=at[1]*xt[1],et}function f(et,at,xt){return et[0]=at[0]/xt[0],et[1]=at[1]/xt[1],et}function v(et,at){return et[0]=Math.ceil(at[0]),et[1]=Math.ceil(at[1]),et}function b(et,at){return et[0]=Math.floor(at[0]),et[1]=Math.floor(at[1]),et}function g(et,at,xt){return et[0]=Math.min(at[0],xt[0]),et[1]=Math.min(at[1],xt[1]),et}function m(et,at,xt){return et[0]=Math.max(at[0],xt[0]),et[1]=Math.max(at[1],xt[1]),et}function _(et,at){return et[0]=Math.round(at[0]),et[1]=Math.round(at[1]),et}function M(et,at,xt){return et[0]=at[0]*xt,et[1]=at[1]*xt,et}function x(et,at,xt,k){return et[0]=at[0]+xt[0]*k,et[1]=at[1]+xt[1]*k,et}function y(et,at){var xt=at[0]-et[0],k=at[1]-et[1];return Math.sqrt(xt*xt+k*k)}function S(et,at){var xt=at[0]-et[0],k=at[1]-et[1];return xt*xt+k*k}function P(et){var at=et[0],xt=et[1];return Math.sqrt(at*at+xt*xt)}function A(et){var at=et[0],xt=et[1];return at*at+xt*xt}function O(et,at){return et[0]=-at[0],et[1]=-at[1],et}function L(et,at){return et[0]=1/at[0],et[1]=1/at[1],et}function H(et,at){var xt=at[0],k=at[1],ot=xt*xt+k*k;return ot>0&&(ot=1/Math.sqrt(ot),et[0]=at[0]*ot,et[1]=at[1]*ot),et}function F(et,at){return et[0]*at[0]+et[1]*at[1]}function K(et,at,xt){var k=at[0]*xt[1]-at[1]*xt[0];return et[0]=et[1]=0,et[2]=k,et}function G(et,at,xt,k){var ot=at[0],it=at[1];return et[0]=ot+k*(xt[0]-ot),et[1]=it+k*(xt[1]-it),et}function U(et,at){at=at||1;var xt=u.RANDOM()*2*Math.PI;return et[0]=Math.cos(xt)*at,et[1]=Math.sin(xt)*at,et}function Z(et,at,xt){var k=at[0],ot=at[1];return et[0]=xt[0]*k+xt[2]*ot,et[1]=xt[1]*k+xt[3]*ot,et}function J(et,at,xt){var k=at[0],ot=at[1];return et[0]=xt[0]*k+xt[2]*ot+xt[4],et[1]=xt[1]*k+xt[3]*ot+xt[5],et}function rt(et,at,xt){var k=at[0],ot=at[1];return et[0]=xt[0]*k+xt[3]*ot+xt[6],et[1]=xt[1]*k+xt[4]*ot+xt[7],et}function vt(et,at,xt){var k=at[0],ot=at[1];return et[0]=xt[0]*k+xt[4]*ot+xt[12],et[1]=xt[1]*k+xt[5]*ot+xt[13],et}function mt(et,at,xt,k){var ot=at[0]-xt[0],it=at[1]-xt[1],$=Math.sin(k),_t=Math.cos(k);return et[0]=ot*_t-it*$+xt[0],et[1]=ot*$+it*_t+xt[1],et}function ut(et,at){var xt=et[0],k=et[1],ot=at[0],it=at[1],$=xt*xt+k*k;$>0&&($=1/Math.sqrt($));var _t=ot*ot+it*it;_t>0&&(_t=1/Math.sqrt(_t));var yt=(xt*ot+k*it)*$*_t;return yt>1?0:yt<-1?Math.PI:Math.acos(yt)}function Rt(et){return"vec2("+et[0]+", "+et[1]+")"}function Ft(et,at){return et[0]===at[0]&&et[1]===at[1]}function wt(et,at){var xt=et[0],k=et[1],ot=at[0],it=at[1];return Math.abs(xt-ot)<=u.EPSILON*Math.max(1,Math.abs(xt),Math.abs(ot))&&Math.abs(k-it)<=u.EPSILON*Math.max(1,Math.abs(k),Math.abs(it))}var Mt=T.len=P,St=T.sub=o,At=T.mul=l,nt=T.div=f,Pt=T.dist=y,z=T.sqrDist=S,q=T.sqrLen=A,gt=T.forEach=function(){var et=c();return function(at,xt,k,ot,it,$){var _t=void 0,yt=void 0;for(xt||(xt=2),k||(k=0),ot?yt=Math.min(ot*xt+k,at.length):yt=at.length,_t=k;_t<yt;_t+=xt)et[0]=at[_t],et[1]=at[_t+1],it(et,et,$),at[_t]=et[0],at[_t+1]=et[1];return at}}()},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.forEach=T.sqrLen=T.len=T.sqrDist=T.dist=T.div=T.mul=T.sub=void 0,T.create=c,T.clone=r,T.length=h,T.fromValues=n,T.copy=i,T.set=a,T.add=o,T.subtract=l,T.multiply=f,T.divide=v,T.ceil=b,T.floor=g,T.min=m,T.max=_,T.round=M,T.scale=x,T.scaleAndAdd=y,T.distance=S,T.squaredDistance=P,T.squaredLength=A,T.negate=O,T.inverse=L,T.normalize=H,T.dot=F,T.cross=K,T.lerp=G,T.hermite=U,T.bezier=Z,T.random=J,T.transformMat4=rt,T.transformMat3=vt,T.transformQuat=mt,T.rotateX=ut,T.rotateY=Rt,T.rotateZ=Ft,T.angle=wt,T.str=Mt,T.exactEquals=St,T.equals=At;var t=e(78),u=s(t);function s(k){if(k&&k.__esModule)return k;var ot={};if(k!=null)for(var it in k)Object.prototype.hasOwnProperty.call(k,it)&&(ot[it]=k[it]);return ot.default=k,ot}function c(){var k=new u.ARRAY_TYPE(3);return u.ARRAY_TYPE!=Float32Array&&(k[0]=0,k[1]=0,k[2]=0),k}function r(k){var ot=new u.ARRAY_TYPE(3);return ot[0]=k[0],ot[1]=k[1],ot[2]=k[2],ot}function h(k){var ot=k[0],it=k[1],$=k[2];return Math.sqrt(ot*ot+it*it+$*$)}function n(k,ot,it){var $=new u.ARRAY_TYPE(3);return $[0]=k,$[1]=ot,$[2]=it,$}function i(k,ot){return k[0]=ot[0],k[1]=ot[1],k[2]=ot[2],k}function a(k,ot,it,$){return k[0]=ot,k[1]=it,k[2]=$,k}function o(k,ot,it){return k[0]=ot[0]+it[0],k[1]=ot[1]+it[1],k[2]=ot[2]+it[2],k}function l(k,ot,it){return k[0]=ot[0]-it[0],k[1]=ot[1]-it[1],k[2]=ot[2]-it[2],k}function f(k,ot,it){return k[0]=ot[0]*it[0],k[1]=ot[1]*it[1],k[2]=ot[2]*it[2],k}function v(k,ot,it){return k[0]=ot[0]/it[0],k[1]=ot[1]/it[1],k[2]=ot[2]/it[2],k}function b(k,ot){return k[0]=Math.ceil(ot[0]),k[1]=Math.ceil(ot[1]),k[2]=Math.ceil(ot[2]),k}function g(k,ot){return k[0]=Math.floor(ot[0]),k[1]=Math.floor(ot[1]),k[2]=Math.floor(ot[2]),k}function m(k,ot,it){return k[0]=Math.min(ot[0],it[0]),k[1]=Math.min(ot[1],it[1]),k[2]=Math.min(ot[2],it[2]),k}function _(k,ot,it){return k[0]=Math.max(ot[0],it[0]),k[1]=Math.max(ot[1],it[1]),k[2]=Math.max(ot[2],it[2]),k}function M(k,ot){return k[0]=Math.round(ot[0]),k[1]=Math.round(ot[1]),k[2]=Math.round(ot[2]),k}function x(k,ot,it){return k[0]=ot[0]*it,k[1]=ot[1]*it,k[2]=ot[2]*it,k}function y(k,ot,it,$){return k[0]=ot[0]+it[0]*$,k[1]=ot[1]+it[1]*$,k[2]=ot[2]+it[2]*$,k}function S(k,ot){var it=ot[0]-k[0],$=ot[1]-k[1],_t=ot[2]-k[2];return Math.sqrt(it*it+$*$+_t*_t)}function P(k,ot){var it=ot[0]-k[0],$=ot[1]-k[1],_t=ot[2]-k[2];return it*it+$*$+_t*_t}function A(k){var ot=k[0],it=k[1],$=k[2];return ot*ot+it*it+$*$}function O(k,ot){return k[0]=-ot[0],k[1]=-ot[1],k[2]=-ot[2],k}function L(k,ot){return k[0]=1/ot[0],k[1]=1/ot[1],k[2]=1/ot[2],k}function H(k,ot){var it=ot[0],$=ot[1],_t=ot[2],yt=it*it+$*$+_t*_t;return yt>0&&(yt=1/Math.sqrt(yt),k[0]=ot[0]*yt,k[1]=ot[1]*yt,k[2]=ot[2]*yt),k}function F(k,ot){return k[0]*ot[0]+k[1]*ot[1]+k[2]*ot[2]}function K(k,ot,it){var $=ot[0],_t=ot[1],yt=ot[2],Nt=it[0],$t=it[1],ee=it[2];return k[0]=_t*ee-yt*$t,k[1]=yt*Nt-$*ee,k[2]=$*$t-_t*Nt,k}function G(k,ot,it,$){var _t=ot[0],yt=ot[1],Nt=ot[2];return k[0]=_t+$*(it[0]-_t),k[1]=yt+$*(it[1]-yt),k[2]=Nt+$*(it[2]-Nt),k}function U(k,ot,it,$,_t,yt){var Nt=yt*yt,$t=Nt*(2*yt-3)+1,ee=Nt*(yt-2)+yt,Gt=Nt*(yt-1),Ht=Nt*(3-2*yt);return k[0]=ot[0]*$t+it[0]*ee+$[0]*Gt+_t[0]*Ht,k[1]=ot[1]*$t+it[1]*ee+$[1]*Gt+_t[1]*Ht,k[2]=ot[2]*$t+it[2]*ee+$[2]*Gt+_t[2]*Ht,k}function Z(k,ot,it,$,_t,yt){var Nt=1-yt,$t=Nt*Nt,ee=yt*yt,Gt=$t*Nt,Ht=3*yt*$t,ae=3*ee*Nt,le=ee*yt;return k[0]=ot[0]*Gt+it[0]*Ht+$[0]*ae+_t[0]*le,k[1]=ot[1]*Gt+it[1]*Ht+$[1]*ae+_t[1]*le,k[2]=ot[2]*Gt+it[2]*Ht+$[2]*ae+_t[2]*le,k}function J(k,ot){ot=ot||1;var it=u.RANDOM()*2*Math.PI,$=u.RANDOM()*2-1,_t=Math.sqrt(1-$*$)*ot;return k[0]=Math.cos(it)*_t,k[1]=Math.sin(it)*_t,k[2]=$*ot,k}function rt(k,ot,it){var $=ot[0],_t=ot[1],yt=ot[2],Nt=it[3]*$+it[7]*_t+it[11]*yt+it[15];return Nt=Nt||1,k[0]=(it[0]*$+it[4]*_t+it[8]*yt+it[12])/Nt,k[1]=(it[1]*$+it[5]*_t+it[9]*yt+it[13])/Nt,k[2]=(it[2]*$+it[6]*_t+it[10]*yt+it[14])/Nt,k}function vt(k,ot,it){var $=ot[0],_t=ot[1],yt=ot[2];return k[0]=$*it[0]+_t*it[3]+yt*it[6],k[1]=$*it[1]+_t*it[4]+yt*it[7],k[2]=$*it[2]+_t*it[5]+yt*it[8],k}function mt(k,ot,it){var $=it[0],_t=it[1],yt=it[2],Nt=it[3],$t=ot[0],ee=ot[1],Gt=ot[2],Ht=_t*Gt-yt*ee,ae=yt*$t-$*Gt,le=$*ee-_t*$t,Be=_t*le-yt*ae,Ce=yt*Ht-$*le,We=$*ae-_t*Ht,Ye=Nt*2;return Ht*=Ye,ae*=Ye,le*=Ye,Be*=2,Ce*=2,We*=2,k[0]=$t+Ht+Be,k[1]=ee+ae+Ce,k[2]=Gt+le+We,k}function ut(k,ot,it,$){var _t=[],yt=[];return _t[0]=ot[0]-it[0],_t[1]=ot[1]-it[1],_t[2]=ot[2]-it[2],yt[0]=_t[0],yt[1]=_t[1]*Math.cos($)-_t[2]*Math.sin($),yt[2]=_t[1]*Math.sin($)+_t[2]*Math.cos($),k[0]=yt[0]+it[0],k[1]=yt[1]+it[1],k[2]=yt[2]+it[2],k}function Rt(k,ot,it,$){var _t=[],yt=[];return _t[0]=ot[0]-it[0],_t[1]=ot[1]-it[1],_t[2]=ot[2]-it[2],yt[0]=_t[2]*Math.sin($)+_t[0]*Math.cos($),yt[1]=_t[1],yt[2]=_t[2]*Math.cos($)-_t[0]*Math.sin($),k[0]=yt[0]+it[0],k[1]=yt[1]+it[1],k[2]=yt[2]+it[2],k}function Ft(k,ot,it,$){var _t=[],yt=[];return _t[0]=ot[0]-it[0],_t[1]=ot[1]-it[1],_t[2]=ot[2]-it[2],yt[0]=_t[0]*Math.cos($)-_t[1]*Math.sin($),yt[1]=_t[0]*Math.sin($)+_t[1]*Math.cos($),yt[2]=_t[2],k[0]=yt[0]+it[0],k[1]=yt[1]+it[1],k[2]=yt[2]+it[2],k}function wt(k,ot){var it=n(k[0],k[1],k[2]),$=n(ot[0],ot[1],ot[2]);H(it,it),H($,$);var _t=F(it,$);return _t>1?0:_t<-1?Math.PI:Math.acos(_t)}function Mt(k){return"vec3("+k[0]+", "+k[1]+", "+k[2]+")"}function St(k,ot){return k[0]===ot[0]&&k[1]===ot[1]&&k[2]===ot[2]}function At(k,ot){var it=k[0],$=k[1],_t=k[2],yt=ot[0],Nt=ot[1],$t=ot[2];return Math.abs(it-yt)<=u.EPSILON*Math.max(1,Math.abs(it),Math.abs(yt))&&Math.abs($-Nt)<=u.EPSILON*Math.max(1,Math.abs($),Math.abs(Nt))&&Math.abs(_t-$t)<=u.EPSILON*Math.max(1,Math.abs(_t),Math.abs($t))}var nt=T.sub=l,Pt=T.mul=f,z=T.div=v,q=T.dist=S,gt=T.sqrDist=P,et=T.len=h,at=T.sqrLen=A,xt=T.forEach=function(){var k=c();return function(ot,it,$,_t,yt,Nt){var $t=void 0,ee=void 0;for(it||(it=3),$||($=0),_t?ee=Math.min(_t*it+$,ot.length):ee=ot.length,$t=$;$t<ee;$t+=it)k[0]=ot[$t],k[1]=ot[$t+1],k[2]=ot[$t+2],yt(k,k,Nt),ot[$t]=k[0],ot[$t+1]=k[1],ot[$t+2]=k[2];return ot}}()},function(E,T,e){var t=e(6),u=e(11),s=e(152),c=5,r=7,h=[1,1.2,1.5,1.6,2,2.2,2.4,2.5,3,4,5,6,7.5,8,10],n=[1,2,4,5,10],i=1e-12;E.exports=function(a){var o=a.min,l=a.max,f=a.interval,v=a.minTickInterval,b=[],g=a.minCount||c,m=a.maxCount||r,_=g===m,M=t(a.minLimit)?-Infinity:a.minLimit,x=t(a.maxLimit)?Infinity:a.maxLimit,y=(g+m)/2,S=y,P=a.snapArray?a.snapArray:_?h:n;if(o===M&&l===x&&_&&(f=(l-o)/(S-1)),t(o)&&(o=0),t(l)&&(l=0),Math.abs(l-o)<i&&(o===0?l=1:o>0?o=0:l=0,l-o<5&&!f&&l-o>=1&&(f=1)),t(f)){var A=(l-o)/(y-1);f=s.snapFactorTo(A,P,"ceil"),m!==g&&(S=parseInt((l-o)/f,10),S>m&&(S=m),S<g&&(S=g),f=s.snapFactorTo((l-o)/(S-1),P))}if(u(v)&&f<v&&(f=v),a.interval||m!==g){l=Math.min(s.snapMultiple(l,f,"ceil"),x),o=Math.max(s.snapMultiple(o,f,"floor"),M),S=Math.round((l-o)/f),o=s.fixedBase(o,f),l=s.fixedBase(l,f);for(var O=null;o>M&&M>-Infinity&&(O===null||o<O);)O=o,o=s.fixedBase(o-f,f)}else{y=parseInt(y,10);var L=(l+o)/2,H=s.snapMultiple(L,f,"ceil"),F=Math.floor((y-2)/2),K=H+F*f,G;y%2==0?G=H-F*f:G=H-(F+1)*f;for(var U=null;K<l&&(U===null||K>U);)U=K,K=s.fixedBase(K+f,f);for(var Z=null;G>o&&(Z===null||G<Z);)Z=G,G=s.fixedBase(G-f,f);l=K,o=G}l=Math.min(l,x),o=Math.max(o,M),b.push(o);for(var J=1;J<S;J++){var rt=s.fixedBase(f*J+o,f);rt<l&&b.push(rt)}return b[b.length-1]<l&&b.push(l),{min:o,max:l,interval:f,count:S,ticks:b}}},function(E,T,e){var t=e(152),u=e(6),s=6,c=[1,2,4,6,8,12],r=60*1e3,h=3600*1e3,n=24*3600*1e3;function i(m){return new Date(m).getFullYear()}function a(m){return new Date(m,0,1).getTime()}function o(m){return new Date(m).getMonth()}function l(m,_){var M=i(m),x=i(_),y=o(m),S=o(_);return(x-M)*12+(S-y)%12}function f(m,_){return new Date(m,_,1).getTime()}function v(m,_){return Math.ceil((_-m)/n)}function b(m,_){return Math.ceil((_-m)/h)}function g(m,_){return Math.ceil((_-m)/(60*1e3))}E.exports=function(m){var _=m.minInterval,M=[],x=m.min,y=m.max,S=m.interval,P;if(y===x&&(y=x+n),u(S)){var A=y-x,O=n,L=365*O;S=parseInt(A/(m.maxCount||s),10),_&&_>S&&(S=_);var H=S/L,F=i(x);if(H>.51){for(var K=Math.ceil(H),G=i(y),U=F;U<=G+K;U=U+K)M.push(a(U));S=null}else if(H>.0834){for(var Z=Math.ceil(H/.0834),J=o(x),rt=l(x,y),vt=0;vt<=rt+Z;vt=vt+Z)M.push(f(F,vt+J));S=null}else if(S>O*.5){var mt=new Date(x),ut=mt.getFullYear(),Rt=mt.getMonth(x),Ft=mt.getDate(),wt=Math.ceil(S/O),Mt=v(x,y);S=wt*O;for(var St=0;St<Mt+wt;St=St+wt)M.push(new Date(ut,Rt,Ft+St).getTime())}else if(S>h){var At=new Date(x),nt=At.getFullYear(),Pt=At.getMonth(x),z=At.getDate(),q=At.getHours(),gt=t.snapTo(c,Math.ceil(S/h)),et=b(x,y);S=gt*h;for(var at=0;at<=et+gt;at=at+gt)M.push(new Date(nt,Pt,z,q+at).getTime())}else if(S>r){var xt=g(x,y),k=Math.ceil(S/r);S=k*r;for(var ot=0;ot<=xt+k;ot=ot+k)M.push(x+ot*r)}else{S<1e3&&(S=1e3),x=Math.floor(x/1e3)*1e3;var it=Math.ceil((y-x)/1e3),$=Math.ceil(S/1e3);S=$*1e3;for(var _t=0;_t<it+$;_t=_t+$)M.push(x+_t*1e3)}}if(!M.length){x=Math.floor(x/1e3)*1e3,y=Math.ceil(y/1e3)*1e3,P=(y-x)/S;for(var yt=0;yt<=P;yt++)M.push(t.fixedBase(S*yt+x,S))}return{max:y,min:x,interval:S,ticks:M,count:M.length}}},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var u=e(26),s=e(11),c=function(r){t(h,r);function h(){return r.apply(this,arguments)||this}var n=h.prototype;return n._initDefaultCfg=function(){r.prototype._initDefaultCfg.call(this),this.isIdentity=!0,this.type="identity",this.value=null},n.getText=function(){return this.value.toString()},n.scale=function(a){return this.value!==a&&s(a)?a:this.range[0]},n.invert=function(){return this.value},h}(u);u.Identity=c,E.exports=c},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(2),s=e(26),c=e(51);function r(n,i){return n===1?1:Math.log(i)/Math.log(n)}var h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){n.prototype._initDefaultCfg.call(this),this.type="log",this.tickCount=10,this.base=2,this._minTick=null},a.calculateTicks=function(){var l=this,f=l.base,v;if(l.min<0)throw new Error("The minimum value must be greater than zero!");var b=r(f,l.max);if(l.min>0)v=Math.floor(r(f,l.min));else{var g=l.values,m=l.max;u(g,function(P){P>0&&P<m&&(m=P)}),m===l.max&&(m=l.max/f),m>1&&(m=1),v=Math.floor(r(f,m)),l._minTick=v,l.positiveMin=m}for(var _=b-v,M=l.tickCount,x=Math.ceil(_/M),y=[],S=v;S<b+x;S=S+x)y.push(Math.pow(f,S));return l.min===0&&y.unshift(0),y},a._getScalePercent=function(l){var f=this.max,v=this.min;if(f===v||l<=0)return 0;var b=this.base,g=this.positiveMin;g&&(v=g*1/b);var m;return l<g?m=l/g/(r(b,f)-r(b,v)):m=(r(b,l)-r(b,v))/(r(b,f)-r(b,v)),m},a.scale=function(l){var f=this._getScalePercent(l),v=this.rangeMin(),b=this.rangeMax();return v+f*(b-v)},a.invert=function(l){var f=this.base,v=r(f,this.max),b=this.rangeMin(),g=this.rangeMax()-b,m,_=this.positiveMin;if(_){if(l===0)return 0;m=r(f,_/f);var M=1/(v-m)*g;if(l<M)return l/M*_}else m=r(f,this.min);var x=(l-b)/g,y=x*(v-m)+m;return Math.pow(f,y)},i}(c);s.Log=h,E.exports=h},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var u=e(26),s=e(51);function c(h,n){var i=Math.E,a=Math.pow(i,Math.log(n)/h);return a}var r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i._initDefaultCfg=function(){h.prototype._initDefaultCfg.call(this),this.type="pow",this.tickCount=10,this.exponent=2},i.calculateTicks=function(){var o=this,l=o.exponent,f,v=Math.ceil(c(l,o.max));if(o.min>=0?f=Math.floor(c(l,o.min)):f=0,f>v){var b=v;v=f,f=b}for(var g=v-f,m=o.tickCount,_=Math.ceil(g/m),M=[],x=f;x<v+_;x=x+_)M.push(Math.pow(x,l));return M},i._getScalePercent=function(o){var l=this.max,f=this.min;if(l===f)return 0;var v=this.exponent,b=(c(v,o)-c(v,f))/(c(v,l)-c(v,f));return b},i.scale=function(o){var l=this._getScalePercent(o),f=this.rangeMin(),v=this.rangeMax();return f+l*(v-f)},i.invert=function(o){var l=(o-this.rangeMin())/(this.rangeMax()-this.rangeMin()),f=this.exponent,v=c(f,this.max),b=c(f,this.min),g=l*(v-b)+b;return Math.pow(g,f)},n}(s);u.Pow=r,E.exports=r},function(E,T,e){function t(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var u=e(26),s=e(153),c=e(222),r=e(151),h=e(52),n=e(2),i=e(11),a=e(39),o=e(15),l=function(f){t(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b._initDefaultCfg=function(){f.prototype._initDefaultCfg.call(this),this.type="timeCat",this.sortable=!0,this.tickCount=5,this.mask="YYYY-MM-DD"},b.init=function(){var m=this,_=this.values;n(_,function(M,x){_[x]=m._toTimeStamp(M)}),this.sortable&&_.sort(function(M,x){return M-x}),m.ticks||(m.ticks=this.calculateTicks())},b.calculateTicks=function(){var m=this,_=m.tickCount,M;if(_){var x=r({maxCount:_,data:m.values,isRounding:m.isRounding});M=x.ticks}else M=m.values;return M},b.translate=function(m){m=this._toTimeStamp(m);var _=this.values.indexOf(m);return _===-1&&(i(m)&&m<this.values.length?_=m:_=NaN),_},b.scale=function(m){var _=this.rangeMin(),M=this.rangeMax(),x=this.translate(m),y;return this.values.length===1||isNaN(x)?y=x:x>-1?y=x/(this.values.length-1):y=0,_+y*(M-_)},b.getText=function(m){var _="",M=this.translate(m);M>-1?_=this.values[M]:_=m;var x=this.formatter;return _=parseInt(_,10),_=x?x(_):c.format(_,this.mask),_},b.getTicks=function(){var m=this,_=this.ticks,M=[];return n(_,function(x){var y;a(x)?y=x:y={text:o(x)?x:m.getText(x),value:m.scale(x),tickValue:x},M.push(y)}),M},b._toTimeStamp=function(m){return h.toTimeStamp(m)},v}(s);u.TimeCat=l,E.exports=l},function(E,T,e){function t(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var u=e(222),s=e(2),c=e(6),r=e(15),h=e(26),n=e(51),i=e(352),a=e(52),o=function(l){t(f,l);function f(){return l.apply(this,arguments)||this}var v=f.prototype;return v._initDefaultCfg=function(){l.prototype._initDefaultCfg.call(this),this.type="time",this.mask="YYYY-MM-DD"},v.init=function(){var g=this,m=g.values;if(m&&m.length){var _=[],M=Infinity,x=M,y=0;s(m,function(S){var P=g._toTimeStamp(S);if(isNaN(P))throw new TypeError("Invalid Time: "+S);M>P?(x=M,M=P):x>P&&(x=P),y<P&&(y=P),_.push(P)}),m.length>1&&(g.minTickInterval=x-M),(c(g.min)||g._toTimeStamp(g.min)>M)&&(g.min=M),(c(g.max)||g._toTimeStamp(g.max)<y)&&(g.max=y)}l.prototype.init.call(this)},v.calculateTicks=function(){var g=this,m=g.min,_=g.max,M=g.tickCount,x=g.tickInterval,y=i({min:m,max:_,minCount:M,maxCount:M,interval:x,minInterval:g.minTickInterval});return y.ticks},v.getText=function(g){var m=this.formatter;return g=this.translate(g),g=m?m(g):u.format(g,this.mask),g},v.scale=function(g){return r(g)&&(g=this.translate(g)),l.prototype.scale.call(this,g)},v.translate=function(g){return this._toTimeStamp(g)},v._toTimeStamp=function(g){return a.toTimeStamp(g)},f}(n);h.Time=o,E.exports=o},function(E,T,e){var t=e(82),u=e(53),s=function(r){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t(r,function(n){return!u(h,n)})};E.exports=s},function(E,T,e){var t=e(14),u=e(40),s=e(177);function c(r,h){var n=void 0;if(t(h)&&(n=h),u(h)&&(n=function(o){return s(o,h)}),n){for(var i=0;i<r.length;i+=1)if(n(r[i]))return r[i]}return null}E.exports=c},function(E,T,e){var t=e(6),u=e(4),s=function(r,h){for(var n=null,i=0;i<r.length;i++){var a=r[i],o=a[h];if(!t(o)){u(o)?n=o[0]:n=o;break}}return n};E.exports=s},function(E,T,e){var t=e(4),u=function s(c){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!t(c))r.push(c);else for(var h=0;h<c.length;h+=1)s(c[h],r);return r};E.exports=u},function(E,T,e){var t=e(4),u=e(2),s=function(r){if(!t(r))return r;var h=[];return u(r,function(n){t(n)?u(n,function(i){h.push(i)}):h.push(n)}),h};E.exports=s},function(E,T,e){var t=e(82),u=e(4),s=function(r){if(r=t(r,function(o){return!isNaN(o)}),!r.length)return{min:0,max:0};if(u(r[0])){for(var h=[],n=0;n<r.length;n++)h=h.concat(r[n]);r=h}var i=Math.max.apply(null,r),a=Math.min.apply(null,r);return{min:a,max:i}};E.exports=s},function(E,T,e){E.exports={contains:e(53),difference:e(358),find:e(359),firstValue:e(360),flatten:e(362),flattenDeep:e(361),getRange:e(363),merge:e(54),pull:e(156),pullAt:e(155),reduce:e(365),remove:e(366),sortBy:e(367),union:e(368),uniq:e(157),valuesOfKey:e(79)}},function(E,T,e){var t=e(4),u=e(40),s=e(2),c=function(h,n,i){if(!t(h)&&!u(h))return h;var a=i;return s(h,function(o,l){a=n(a,o,l)}),a};E.exports=c},function(E,T,e){var t=e(21),u=e(155),s=function(r,h){var n=[];if(!t(r))return n;for(var i=-1,a=[],o=r.length;++i<o;){var l=r[i];h(l,i,r)&&(n.push(l),a.push(i))}return u(r,a),n};E.exports=s},function(E,T,e){var t=e(15),u=e(14),s=e(4);function c(r,h){var n=void 0;if(u(h))n=function(o,l){return h(o)-h(l)};else{var i=[];t(h)?i.push(h):s(h)&&(i=h),n=function(o,l){for(var f=0;f<i.length;f+=1){var v=i[f];if(o[v]>l[v])return 1;if(o[v]<l[v])return-1}return 0}}return r.sort(n),r}E.exports=c},function(E,T,e){var t=e(2),u=e(57),s=e(157),c=function(){var h=[],n=u(arguments);return t(n,function(i){h=h.concat(i)}),s(h)};E.exports=c},function(E,T){function e(t,u,s){var c=void 0;return function(){var r=this,h=arguments,n=function(){c=null,s||t.apply(r,h)},i=s&&!c;clearTimeout(c),c=setTimeout(n,u),i&&t.apply(r,h)}}E.exports=e},function(E,T){E.exports=function(t,u,s){if(t){if(t.addEventListener)return t.addEventListener(u,s,!1),{remove:function(){t.removeEventListener(u,s,!1)}};if(t.attachEvent)return t.attachEvent("on"+u,s),{remove:function(){t.detachEvent("on"+u,s)}}}}},function(E,T){E.exports=function(t,u){if(t&&t.getBoundingClientRect){var s=t.getBoundingClientRect(),c=document.documentElement.clientTop,r=document.documentElement.clientLeft;return{top:s.top-c,bottom:s.bottom-c,left:s.left-r,right:s.right-r}}return u||null}},function(E,T){E.exports=function(t,u){var s=this.getStyle(t,"height",u);return s==="auto"&&(s=t.offsetHeight),parseFloat(s)}},function(E,T){E.exports=function(t,u){var s=this.getHeight(t,u),c=parseFloat(this.getStyle(t,"borderTopWidth"))||0,r=parseFloat(this.getStyle(t,"paddingTop"))||0,h=parseFloat(this.getStyle(t,"paddingBottom"))||0,n=parseFloat(this.getStyle(t,"borderBottomWidth"))||0;return s+c+n+r+h}},function(E,T){E.exports=function(t,u){var s=this.getWidth(t,u),c=parseFloat(this.getStyle(t,"borderLeftWidth"))||0,r=parseFloat(this.getStyle(t,"paddingLeft"))||0,h=parseFloat(this.getStyle(t,"paddingRight"))||0,n=parseFloat(this.getStyle(t,"borderRightWidth"))||0;return s+c+n+r+h}},function(E,T){E.exports=function(){return window.devicePixelRatio?window.devicePixelRatio:2}},function(E,T,e){var t=e(6);E.exports=function(s,c,r){try{return window.getComputedStyle?window.getComputedStyle(s,null)[c]:s.currentStyle[c]}catch(h){return t(r)?null:r}}},function(E,T){E.exports=function(t,u){var s=this.getStyle(t,"width",u);return s==="auto"&&(s=t.offsetWidth),parseFloat(s)}},function(E,T,e){E.exports={addEventListener:e(370),createDom:e(159),getBoundingClientRect:e(371),getHeight:e(372),getOuterHeight:e(373),getOuterWidth:e(374),getRatio:e(375),getStyle:e(376),getWidth:e(377),modifyCSS:e(160),requestAnimationFrame:e(161)}},function(E,T){function e(t,u){return t["_wrap_"+u]}E.exports=e},function(E,T,e){E.exports={getWrapBehavior:e(379),wrapBehavior:e(381)}},function(E,T){function e(t,u){if(t["_wrap_"+u])return t["_wrap_"+u];var s=function(r){t[u](r)};return t["_wrap_"+u]=s,s}E.exports=e},function(E,T,e){var t=e(383);E.exports={number2color:t,numberToColor:t,parsePath:e(384),parseRadius:e(385)}},function(E,T){var e={};E.exports=function(u){var s=e[u];if(!s){for(var c=u.toString(16),r=c.length;r<6;r++)c="0"+c;s="#"+c,e[u]=s}return s}},function(E,T,e){var t=e(4),u=e(15),s=e(2),c=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,r=/[^\s\,]+/ig;E.exports=function(n){if(n=n||[],t(n))return n;if(u(n))return n=n.match(c),s(n,function(i,a){if(i=i.match(r),i[0].length>1){var o=i[0].charAt(0);i.splice(1,0,i[0].substr(1)),i[0]=o}s(i,function(l,f){isNaN(l)||(i[f]=+l)}),n[a]=i}),n}},function(E,T,e){var t=e(4);E.exports=function(s){var c=0,r=0,h=0,n=0;return t(s)?s.length===1?c=r=h=n=s[0]:s.length===2?(c=h=s[0],r=n=s[1]):s.length===3?(c=s[0],r=n=s[1],h=s[2]):(c=s[0],r=s[1],h=s[2],n=s[3]):c=r=h=n=s,{r1:c,r2:r,r3:h,r4:n}}},function(E,T,e){var t=e(21),u=function(c,r){if(!t(c))return-1;var h=Array.prototype.indexOf;if(h)return h.call(c,r);for(var n=-1,i=0;i<c.length;i++)if(c[i]===r){n=i;break}return n};E.exports=u},function(E,T,e){var t=e(14),u=e(83),s=function(r,h,n){return t(n)?!!n(r,h):u(r,h)};E.exports=s},function(E,T,e){var t=e(2),u=e(21),s=function(r,h){if(!u(r))return r;var n=[];return t(r,function(i,a){n.push(h(i,a))}),n};E.exports=s},function(E,T){var e=function(u,s){var c=s.toString(),r=c.indexOf(".");if(r===-1)return Math.round(u);var h=c.substr(r+1).length;return h>20&&(h=20),parseFloat(u.toFixed(h))};E.exports=e},function(E,T,e){var t=e(55);E.exports={clamp:e(84),fixedBase:e(389),isDecimal:e(391),isEven:e(392),isInteger:e(393),isNegative:e(394),isNumberEqual:t,isOdd:e(395),isPositive:e(396),maxBy:e(168),minBy:e(397),mod:e(169),snapEqual:t,toDegree:e(170),toInt:e(171),toInteger:e(171),toRadian:e(172)}},function(E,T,e){var t=e(11),u=function(c){return t(c)&&c%1!=0};E.exports=u},function(E,T,e){var t=e(11),u=function(c){return t(c)&&c%2==0};E.exports=u},function(E,T,e){var t=e(11),u=Number.isInteger?Number.isInteger:function(s){return t(s)&&s%1==0};E.exports=u},function(E,T,e){var t=e(11),u=function(c){return t(c)&&c<0};E.exports=u},function(E,T,e){var t=e(11),u=function(c){return t(c)&&c%2!=0};E.exports=u},function(E,T,e){var t=e(11),u=function(c){return t(c)&&c>0};E.exports=u},function(E,T,e){var t=e(4),u=e(14),s=e(2),c=function(h,n){if(!!t(h)){var i=h[0],a=void 0;u(n)?a=n(h[0]):a=h[0][n];var o=void 0;return s(h,function(l){u(n)?o=n(l):o=l[n],o<a&&(i=l,a=o)}),i}};E.exports=c},function(E,T,e){E.exports=e(2)},function(E,T,e){E.exports=e(176)},function(E,T,e){var t=e(53),u=e(179);E.exports=function(s,c){return t(u(s),c)}},function(E,T,e){E.exports={forIn:e(398),has:e(176),hasKey:e(399),hasValue:e(400),keys:e(178),isMatch:e(177),values:e(179)}},function(E,T,e){var t=e(406);function u(c,r,h){var n=null,i=h;return r<i&&(i=r,n="add"),c<i&&(i=c,n="del"),{type:n,min:i}}var s=function(r,h){var n=r.length,i=h.length,a=void 0,o=void 0,l=0;if(n===0||i===0)return null;for(var f=[],v=0;v<=n;v++)f[v]=[],f[v][0]={min:v};for(var b=0;b<=i;b++)f[0][b]={min:b};for(var g=1;g<=n;g++){a=r[g-1];for(var m=1;m<=i;m++){o=h[m-1],t(a,o)?l=0:l=1;var _=f[g-1][m].min+1,M=f[g][m-1].min+1,x=f[g-1][m-1].min+l;f[g][m]=u(_,M,x)}}return f};E.exports=function(r,h){var n=s(r,h),i=r.length,a=h.length,o=[],l=1,f=1;if(n[i][a]!==i){for(var v=1;v<=i;v++){var b=n[v][v].min;f=v;for(var g=l;g<=a;g++)n[v][g].min<b&&(b=n[v][g].min,f=g);l=f,n[v][l].type&&o.push({index:v-1,type:n[v][l].type})}for(var m=o.length-1;m>=0;m--)l=o[m].index,o[m].type==="add"?r.splice(l,0,[].concat(r[l])):r.splice(l,1)}if(i=r.length,i<a)for(var _=0;_<a-i;_++)r[i-1][0]==="z"||r[i-1][0]==="Z"?r.splice(i-2,0,r[i-2]):r.push(r[i-1]);return r}},function(E,T){function e(s,c){var r=[],h=[];function n(i,a){if(i.length===1)r.push(i[0]),h.push(i[0]);else{for(var o=[],l=0;l<i.length-1;l++)l===0&&r.push(i[0]),l===i.length-2&&h.push(i[l+1]),o[l]=[(1-a)*i[l][0]+a*i[l+1][0],(1-a)*i[l][1]+a*i[l+1][1]];n(o,a)}}return s.length&&n(s,c),{left:r,right:h.reverse()}}function t(s,c,r){var h=[[s[1],s[2]]];r=r||2;var n=[];c[0]==="A"?(h.push(c[6]),h.push(c[7])):c[0]==="C"?(h.push([c[1],c[2]]),h.push([c[3],c[4]]),h.push([c[5],c[6]])):c[0]==="S"||c[0]==="Q"?(h.push([c[1],c[2]]),h.push([c[3],c[4]])):h.push([c[1],c[2]]);for(var i=h,a=1/r,o=0;o<r-1;o++){var l=a/(1-a*o),f=e(i,l);n.push(f.left),i=f.right}n.push(i);var v=n.map(function(b){var g=[];return b.length===4&&(g.push("C"),g=g.concat(b[2])),b.length>=3&&(b.length===3&&g.push("Q"),g=g.concat(b[1])),b.length===2&&g.push("L"),g=g.concat(b[b.length-1]),g});return v}function u(s,c,r){if(r===1)return[[].concat(s)];var h=[];if(c[0]==="L"||c[0]==="C"||c[0]==="Q")h=h.concat(t(s,c,r));else{var n=[].concat(s);n[0]==="M"&&(n[0]="L");for(var i=0;i<=r-1;i++)h.push(n)}return h}E.exports=function(c,r){if(c.length===1)return c;var h=c.length-1,n=r.length-1,i=h/n,a=[];if(c.length===1&&c[0][0]==="M"){for(var o=0;o<n-h;o++)c.push(c[0]);return c}for(var l=0;l<n;l++){var f=Math.floor(i*l);a[f]=(a[f]||0)+1}var v=a.reduce(function(b,g,m){return m===h?b.concat(c[h]):b.concat(u(c[m],c[m+1],g))},[]);return v.unshift(c[0]),(r[n]==="Z"||r[n]==="z")&&v.push("Z"),v}},function(E,T){function e(u){var s=[];switch(u[0]){case"M":s.push([u[1],u[2]]);break;case"L":s.push([u[1],u[2]]);break;case"A":s.push([u[6],u[7]]);break;case"Q":s.push([u[3],u[4]]),s.push([u[1],u[2]]);break;case"T":s.push([u[1],u[2]]);break;case"C":s.push([u[5],u[6]]),s.push([u[1],u[2]]),s.push([u[3],u[4]]);break;case"S":s.push([u[3],u[4]]),s.push([u[1],u[2]]);break;case"H":s.push([u[1],u[1]]);break;case"V":s.push([u[1],u[1]]);break;default:}return s}function t(u,s,c){for(var r=[].concat(u),h=void 0,n=1/(c+1),i=e(s)[0],a=1;a<=c;a++)n*=a,h=Math.floor(u.length*n),h===0?r.unshift([i[0]*n+u[h][0]*(1-n),i[1]*n+u[h][1]*(1-n)]):r.splice(h,0,[i[0]*n+u[h][0]*(1-n),i[1]*n+u[h][1]*(1-n)]);return r}E.exports=function(s,c){if(s.length<=1)return s;for(var r=void 0,h=0;h<c.length;h++)if(s[h][0]!==c[h][0])switch(r=e(s[h]),c[h][0]){case"M":s[h]=["M"].concat(r[0]);break;case"L":s[h]=["L"].concat(r[0]);break;case"A":s[h]=[].concat(c[h]),s[h][6]=r[0][0],s[h][7]=r[0][1];break;case"Q":if(r.length<2)if(h>0)r=t(r,s[h-1],1);else{s[h]=c[h];break}s[h]=["Q"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;case"T":s[h]=["T"].concat(r[0]);break;case"C":if(r.length<3)if(h>0)r=t(r,s[h-1],2);else{s[h]=c[h];break}s[h]=["C"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;case"S":if(r.length<2)if(h>0)r=t(r,s[h-1],1);else{s[h]=c[h];break}s[h]=["S"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;default:s[h]=c[h]}return s}},function(E,T,e){var t=e(407),u=e(183),s=e(184),c=e(180);E.exports={catmullRom2Bezier:c,catmullRomToBezier:c,fillPath:e(403),fillPathByDiff:e(402),formatPath:e(404),intersection:t,pathIntersection:t,parsePathArray:e(181),parsePathString:e(182),pathToAbsolute:u,path2absolute:u,pathTocurve:s,path2curve:s,rectPath:e(185)}},function(E,T,e){var t=e(2);E.exports=function(s,c){if(s.length!==c.length)return!1;var r=!0;return t(s,function(h,n){if(h!==c[n])return r=!1,!1}),r}},function(E,T,e){var t=e(4),u=e(185),s=e(184),c=function(m,_,M,x,y){var S=-3*_+9*M-9*x+3*y,P=m*S+6*_-12*M+6*x;return m*P-3*_+3*M},r=function(m,_,M,x,y,S,P,A,O){O===null&&(O=1),O=O>1?1:O<0?0:O;for(var L=O/2,H=12,F=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],K=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],G=0,U=0;U<H;U++){var Z=L*F[U]+L,J=c(Z,m,M,y,P),rt=c(Z,_,x,S,A),vt=J*J+rt*rt;G+=K[U]*Math.sqrt(vt)}return L*G},h=function(m,_,M,x,y,S,P,A){for(var O=[],L=[[],[]],H=void 0,F=void 0,K=void 0,G=void 0,U=0;U<2;++U){if(U===0?(F=6*m-12*M+6*y,H=-3*m+9*M-9*y+3*P,K=3*M-3*m):(F=6*_-12*x+6*S,H=-3*_+9*x-9*S+3*A,K=3*x-3*_),Math.abs(H)<1e-12){if(Math.abs(F)<1e-12)continue;G=-K/F,G>0&&G<1&&O.push(G);continue}var Z=F*F-4*K*H,J=Math.sqrt(Z);if(!(Z<0)){var rt=(-F+J)/(2*H);rt>0&&rt<1&&O.push(rt);var vt=(-F-J)/(2*H);vt>0&&vt<1&&O.push(vt)}}for(var mt=O.length,ut=mt,Rt=void 0;mt--;)G=O[mt],Rt=1-G,L[0][mt]=Rt*Rt*Rt*m+3*Rt*Rt*G*M+3*Rt*G*G*y+G*G*G*P,L[1][mt]=Rt*Rt*Rt*_+3*Rt*Rt*G*x+3*Rt*G*G*S+G*G*G*A;return L[0][ut]=m,L[1][ut]=_,L[0][ut+1]=P,L[1][ut+1]=A,L[0].length=L[1].length=ut+2,{min:{x:Math.min.apply(0,L[0]),y:Math.min.apply(0,L[1])},max:{x:Math.max.apply(0,L[0]),y:Math.max.apply(0,L[1])}}},n=function(m,_,M,x,y,S,P,A){if(!(Math.max(m,M)<Math.min(y,P)||Math.min(m,M)>Math.max(y,P)||Math.max(_,x)<Math.min(S,A)||Math.min(_,x)>Math.max(S,A))){var O=(m*x-_*M)*(y-P)-(m-M)*(y*A-S*P),L=(m*x-_*M)*(S-A)-(_-x)*(y*A-S*P),H=(m-M)*(S-A)-(_-x)*(y-P);if(!!H){var F=O/H,K=L/H,G=+F.toFixed(2),U=+K.toFixed(2);if(!(G<+Math.min(m,M).toFixed(2)||G>+Math.max(m,M).toFixed(2)||G<+Math.min(y,P).toFixed(2)||G>+Math.max(y,P).toFixed(2)||U<+Math.min(_,x).toFixed(2)||U>+Math.max(_,x).toFixed(2)||U<+Math.min(S,A).toFixed(2)||U>+Math.max(S,A).toFixed(2)))return{x:F,y:K}}}},i=function(m,_,M){return _>=m.x&&_<=m.x+m.width&&M>=m.y&&M<=m.y+m.height},a=function(m,_,M,x){return m===null&&(m=_=M=x=0),_===null&&(_=m.y,M=m.width,x=m.height,m=m.x),{x:m,y:_,width:M,w:M,height:x,h:x,x2:m+M,y2:_+x,cx:m+M/2,cy:_+x/2,r1:Math.min(M,x)/2,r2:Math.max(M,x)/2,r0:Math.sqrt(M*M+x*x)/2,path:u(m,_,M,x),vb:[m,_,M,x].join(" ")}},o=function(m,_){return m=a(m),_=a(_),i(_,m.x,m.y)||i(_,m.x2,m.y)||i(_,m.x,m.y2)||i(_,m.x2,m.y2)||i(m,_.x,_.y)||i(m,_.x2,_.y)||i(m,_.x,_.y2)||i(m,_.x2,_.y2)||(m.x<_.x2&&m.x>_.x||_.x<m.x2&&_.x>m.x)&&(m.y<_.y2&&m.y>_.y||_.y<m.y2&&_.y>m.y)},l=function(m,_,M,x,y,S,P,A){t(m)||(m=[m,_,M,x,y,S,P,A]);var O=h.apply(null,m);return a(O.min.x,O.min.y,O.max.x-O.min.x,O.max.y-O.min.y)},f=function(m,_,M,x,y,S,P,A,O){var L=1-O,H=Math.pow(L,3),F=Math.pow(L,2),K=O*O,G=K*O,U=H*m+F*3*O*M+L*3*O*O*y+G*P,Z=H*_+F*3*O*x+L*3*O*O*S+G*A,J=m+2*O*(M-m)+K*(y-2*M+m),rt=_+2*O*(x-_)+K*(S-2*x+_),vt=M+2*O*(y-M)+K*(P-2*y+M),mt=x+2*O*(S-x)+K*(A-2*S+x),ut=L*m+O*M,Rt=L*_+O*x,Ft=L*y+O*P,wt=L*S+O*A,Mt=90-Math.atan2(J-vt,rt-mt)*180/Math.PI;return{x:U,y:Z,m:{x:J,y:rt},n:{x:vt,y:mt},start:{x:ut,y:Rt},end:{x:Ft,y:wt},alpha:Mt}},v=function(m,_,M){var x=l(m),y=l(_);if(!o(x,y))return M?0:[];for(var S=r.apply(0,m),P=r.apply(0,_),A=~~(S/8),O=~~(P/8),L=[],H=[],F={},K=M?0:[],G=0;G<A+1;G++){var U=f.apply(0,m.concat(G/A));L.push({x:U.x,y:U.y,t:G/A})}for(var Z=0;Z<O+1;Z++){var J=f.apply(0,_.concat(Z/O));H.push({x:J.x,y:J.y,t:Z/O})}for(var rt=0;rt<A;rt++)for(var vt=0;vt<O;vt++){var mt=L[rt],ut=L[rt+1],Rt=H[vt],Ft=H[vt+1],wt=Math.abs(ut.x-mt.x)<.001?"y":"x",Mt=Math.abs(Ft.x-Rt.x)<.001?"y":"x",St=n(mt.x,mt.y,ut.x,ut.y,Rt.x,Rt.y,Ft.x,Ft.y);if(St){if(F[St.x.toFixed(4)]===St.y.toFixed(4))continue;F[St.x.toFixed(4)]=St.y.toFixed(4);var At=mt.t+Math.abs((St[wt]-mt[wt])/(ut[wt]-mt[wt]))*(ut.t-mt.t),nt=Rt.t+Math.abs((St[Mt]-Rt[Mt])/(Ft[Mt]-Rt[Mt]))*(Ft.t-Rt.t);At>=0&&At<=1&&nt>=0&&nt<=1&&(M?K++:K.push({x:St.x,y:St.y,t1:At,t2:nt}))}}return K},b=function(m,_,M){m=s(m),_=s(_);for(var x=void 0,y=void 0,S=void 0,P=void 0,A=void 0,O=void 0,L=void 0,H=void 0,F=void 0,K=void 0,G=M?0:[],U=0,Z=m.length;U<Z;U++){var J=m[U];if(J[0]==="M")x=A=J[1],y=O=J[2];else{J[0]==="C"?(F=[x,y].concat(J.slice(1)),x=F[6],y=F[7]):(F=[x,y,x,y,A,O,A,O],x=A,y=O);for(var rt=0,vt=_.length;rt<vt;rt++){var mt=_[rt];if(mt[0]==="M")S=L=mt[1],P=H=mt[2];else{mt[0]==="C"?(K=[S,P].concat(mt.slice(1)),S=K[6],P=K[7]):(K=[S,P,S,P,L,H,L,H],S=L,P=H);var ut=v(F,K,M);if(M)G+=ut;else{for(var Rt=0,Ft=ut.length;Rt<Ft;Rt++)ut[Rt].segment1=U,ut[Rt].segment2=rt,ut[Rt].bez1=F,ut[Rt].bez2=K;G=G.concat(ut)}}}}}return G};E.exports=function(m,_){return b(m,_)}},function(E,T,e){var t=e(2),u=e(40),s=Object.prototype.hasOwnProperty,c=function(h,n){if(h===null||!u(h))return{};var i={};return t(n,function(a){s.call(h,a)&&(i[a]=h[a])}),i};E.exports=c},function(E,T,e){var t={lc:e(410),lowerCase:e(186),lowerFirst:e(187),substitute:e(411),uc:e(412),upperCase:e(188),upperFirst:e(189)};E.exports=t},function(E,T,e){E.exports=e(186)},function(E,T){var e=function(u,s){return!u||!s?u:u.replace(/\\?\{([^{}]+)\}/g,function(c,r){return c.charAt(0)==="\\"?c.slice(1):s[r]===void 0?"":s[r]})};E.exports=e},function(E,T,e){E.exports=e(188)},function(E,T){function e(t,u,s){var c=void 0,r=void 0,h=void 0,n=void 0,i=0;s||(s={});var a=function(){i=s.leading===!1?0:Date.now(),c=null,n=t.apply(r,h),c||(r=h=null)},o=function(){var f=Date.now();!i&&s.leading===!1&&(i=f);var v=u-(f-i);return r=this,h=arguments,v<=0||v>u?(c&&(clearTimeout(c),c=null),i=f,n=t.apply(r,h),c||(r=h=null)):!c&&s.trailing!==!1&&(c=setTimeout(a,v)),n};return o.cancel=function(){clearTimeout(c),i=0,c=r=h=null},o}E.exports=e},function(E,T,e){var t=e(17),u={getType:e(190),isArray:e(4),isArrayLike:e(21),isBoolean:e(191),isFunction:e(14),isNil:e(6),isNull:e(417),isNumber:e(11),isObject:e(39),isObjectLike:e(86),isPlainObject:e(40),isPrototype:e(193),isType:t,isUndefined:e(419),isString:e(15),isRegExp:e(418),isDate:e(192),isArguments:e(415),isError:e(416)};E.exports=u},function(E,T,e){var t=e(17),u=function(c){return t(c,"Arguments")};E.exports=u},function(E,T,e){var t=e(17),u=function(c){return t(c,"Error")};E.exports=u},function(E,T){var e=function(u){return u===null};E.exports=e},function(E,T,e){var t=e(17),u=function(c){return t(c,"RegExp")};E.exports=u},function(E,T){var e=function(u){return u===void 0};E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=u.default.generateBaseTypedComponent("Axis")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function v(b,g){for(var m=0;m<g.length;m++){var _=g[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,g,m){return g&&v(b.prototype,g),m&&v(b,m),b}}(),u=e(42),s=i(u),c=e(29),r=i(c),h=e(545),n=i(h);function i(v){return v&&v.__esModule?v:{default:v}}function a(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function o(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function l(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}(0,n.default)(s.default.PureComponent,"`React.PureComponent` needs React >=15.3.0");var f=function(v){l(b,v);function b(){return a(this,b),o(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return t(b,[{key:"render",value:function(){var m=this.props,_=m.width,M=m.height,x=m.placeholder;return s.default.createElement("div",{style:{width:_,height:M}},x)}}]),b}(s.default.PureComponent||s.default.Component);f.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),height:r.default.oneOfType([r.default.string,r.default.number]),placeholder:r.default.node},f.defaultProps={width:"100%",placeholder:s.default.createElement("div",{style:{position:"relative",top:"48%",textAlign:"center"}},"\u6682\u65E0\u6570\u636E")},T.default=f},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(x){for(var y=1;y<arguments.length;y++){var S=arguments[y];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(x[P]=S[P])}return x},u=function(){function x(y,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}return function(y,S,P){return S&&x(y.prototype,S),P&&x(y,P),y}}(),s=e(42),c=l(s),r=e(423),h=l(r),n=e(421),i=l(n),a=e(425),o=l(a);function l(x){return x&&x.__esModule?x:{default:x}}function f(x,y){var S={};for(var P in x)y.indexOf(P)>=0||!Object.prototype.hasOwnProperty.call(x,P)||(S[P]=x[P]);return S}function v(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function b(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function g(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}function m(x){var y=!0;return(x==null||x.length===0||x.rows&&x.rows.length===0)&&(y=!1),!!y}var _=function(x){g(y,x);function y(){var S,P,A,O;v(this,y);for(var L=arguments.length,H=Array(L),F=0;F<L;F++)H[F]=arguments[F];return O=(P=(A=b(this,(S=y.__proto__||Object.getPrototypeOf(y)).call.apply(S,[this].concat(H))),A),A._refCallback=function(K){K&&(A.chart=K.getG2Instance())},A.hasViewSource=function(){var K=!1;return c.default.Children.map(A.props.children,function(G){!K&&G&&typeof G.type=="function"&&G.type.name==="View"&&G.props.data&&m(G.props.data)&&(K=!0)}),K},P),b(A,O)}return u(y,[{key:"getG2Instance",value:function(){return this.chart}},{key:"render",value:function(){var P=this.props,A=P.data,O=P.width,L=P.height,H=P.placeholder,F=P.className,K=P.style;return c.default.createElement("div",{className:F,style:K},m(A)||this.hasViewSource()||!H?c.default.createElement(h.default,t({ref:this._refCallback},this.props)):c.default.createElement(i.default,{width:O,height:L,placeholder:H===!0?void 0:H}))}}]),y}(c.default.PureComponent||c.default.Component),M=function(x){g(y,x);function y(){return v(this,y),b(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return u(y,[{key:"render",value:function(){var P=this.props,A=P.widthErrorBoundary,O=f(P,["widthErrorBoundary"]);return A===!1?c.default.createElement(_,O):c.default.createElement(o.default,null,c.default.createElement(_,O))}}]),y}(c.default.Component);T.default=M},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(x){for(var y=1;y<arguments.length;y++){var S=arguments[y];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(x[P]=S[P])}return x},u=function(){function x(y,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}return function(y,S,P){return S&&x(y.prototype,S),P&&x(y,P),y}}(),s=e(42),c=v(s),r=e(29),h=v(r),n=e(436),i=v(n),a=e(543),o=v(a),l=e(538),f=v(l);function v(x){return x&&x.__esModule?x:{default:x}}function b(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function g(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function m(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}var _=function(x){m(y,x);function y(S){b(this,y);var P=g(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,S));return M.call(P),P.name="Chart",P.gId=0,P.id=P.createId(),P.g2Processor=new i.default,P.forceFit=(0,f.default)(function(){!P.chart||P.chart.forceFit()},300),P}return u(y,[{key:"getChildContext",value:function(){return{addElement:this.addElement,updateElement:this.updateElement,deleteElement:this.deleteElement,createId:this.createId,getParentInfo:this.getParentInfo,getViewId:this.getViewId}}},{key:"componentDidMount",value:function(){if(this.addElement(this.name,this.id,t({},this.props,{container:this.containerWrap})),this.chart=this.g2Processor.createG2Instance(),this.notifyG2Instance(),this.props.forceFit){var P=new o.default(this.forceFit);P.observe(this.containerWrap),this.observe=P}}},{key:"componentDidUpdate",value:function(){this.updateElement(this.name,this.id,t({},this.props,{container:this.containerWrap}));var P=this.g2Processor.batchedUpdate();this.chart!==P&&(this.chart=P,this.notifyG2Instance()),this.props.forceUpdate&&this.chart.forceFit()}},{key:"componentWillUnmount",value:function(){this.g2Processor.destory(),this.chart=null,this.forceFit&&this.forceFit.cancel(),this.observe&&this.observe.unobserve(this.containerWrap),this.containerWrap=null}},{key:"getG2Instance",value:function(){return this.chart}},{key:"notifyG2Instance",value:function(){this.props.onGetG2Instance&&this.props.onGetG2Instance(this.chart)}},{key:"render",value:function(){return c.default.createElement("div",{ref:this.refHandle},this.props.children)}}]),y}(s.Component);_.propTypes={data:h.default.oneOfType([h.default.arrayOf(h.default.object),h.default.object]),scale:h.default.oneOfType([h.default.object,h.default.array]),animate:h.default.bool,width:h.default.number,height:h.default.number.isRequired,onGetG2Instance:h.default.func,forceFit:h.default.bool,forceUpdate:h.default.bool},_.childContextTypes={addElement:h.default.func,updateElement:h.default.func,deleteElement:h.default.func,createId:h.default.func,getParentInfo:h.default.func,getViewId:h.default.func};var M=function(){var y=this;this.getViewId=function(){},this.getParentInfo=function(){return{id:y.id,name:y.name}},this.createId=function(){return y.gId+=1,y.gId},this.addElement=function(S,P,A,O,L){return y.g2Processor.addElement(S,P,A,O,L)},this.updateElement=function(S,P,A,O,L){y.g2Processor.updateElement(S,P,A,O,L)},this.deleteElement=function(S,P,A){y.g2Processor.deleteElement(S,P,A)},this.refHandle=function(S){y.containerWrap||(y.containerWrap=S)}};T.default=_},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=u.default.generateBaseTypedComponent("Coord")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function a(o,l){for(var f=0;f<l.length;f++){var v=l[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}return function(o,l,f){return l&&a(o.prototype,l),f&&a(o,f),o}}(),u=e(42),s=c(u);function c(a){return a&&a.__esModule?a:{default:a}}function r(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function h(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:a}function n(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var i=function(a){n(o,a);function o(l){r(this,o);var f=h(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,l));return f.state={hasError:!1},f}return t(o,[{key:"shouldComponentUpdate",value:function(){return this.state.hasError&&this.setState({hasError:!1}),!0}},{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"unstable_handleError",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?s.default.createElement("h1",null,"bizcharts error."):this.props.children}}]),o}(s.default.Component);T.default=i},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),e(285);var t=e(24),u=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=u.default.generateBaseTypedComponent("Facet")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),e(292);var t=e(24),u=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=u.default.generateBaseTypedComponent("Geom")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=s(t);function s(r){return r&&r.__esModule?r:{default:r}}var c=u.default.generateBaseTypedComponent("Guide");c.Line=u.default.generateBaseTypedComponent("GuideLine"),c.Image=u.default.generateBaseTypedComponent("GuideImage"),c.Text=u.default.generateBaseTypedComponent("GuideText"),c.Region=u.default.generateBaseTypedComponent("GuideRegion"),c.Html=u.default.generateBaseTypedComponent("GuideHtml"),c.Arc=u.default.generateBaseTypedComponent("GuideArc"),c.RegionFilter=u.default.generateBaseTypedComponent("GuideRegionFilter"),c.DataMarker=u.default.generateBaseTypedComponent("GuideDataMarker"),c.DataRegion=u.default.generateBaseTypedComponent("GuideDataRegion"),T.default=c},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function v(b,g){for(var m=0;m<g.length;m++){var _=g[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,g,m){return g&&v(b.prototype,g),m&&v(b,m),b}}(),u=e(537),s=i(u),c=e(24),r=i(c),h=e(29),n=i(h);function i(v){return v&&v.__esModule?v:{default:v}}function a(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function o(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function l(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var f=function(v){l(b,v);function b(g){return a(this,b),o(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,g,"Label"))}return t(b,[{key:"componentWillMount",value:function(){var m=this.context.getParentInfo();(0,s.default)(m.name==="Geom","`<Label />` must be wrapped in `<Geom />`"),this.id=this.context.createId(),this.context.addElement(this.name,this.id,this.props,this.context.getParentInfo(),this.context.getViewId())}}]),b}(r.default);f.contextTypes={addElement:n.default.func,updateElement:n.default.func,deleteElement:n.default.func,createId:n.default.func,getParentInfo:n.default.func,getViewId:n.default.func},f.childContextTypes={addElement:n.default.func,updateElement:n.default.func,deleteElement:n.default.func,createId:n.default.func,getParentInfo:n.default.func,getViewId:n.default.func},T.default=f},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=r(t),s=e(29),c=r(s);function r(o){return o&&o.__esModule?o:{default:o}}function h(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function n(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:o}function i(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(o,l):o.__proto__=l)}var a=function(o){i(l,o);function l(f){return h(this,l),n(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,f,"Legend"))}return l}(u.default);a.contextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func},a.childContextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func},a.defaultProps={visible:!0},T.default=a},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=u.default.generateBaseTypedComponent("Tooltip")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function l(f,v){for(var b=0;b<v.length;b++){var g=v[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}return function(f,v,b){return v&&l(f.prototype,v),b&&l(f,b),f}}(),u=e(24),s=h(u),c=e(29),r=h(c);function h(l){return l&&l.__esModule?l:{default:l}}function n(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}function i(l,f){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:l}function a(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);l.prototype=Object.create(f&&f.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(l,f):l.__proto__=f)}var o=function(l){a(f,l);function f(v){n(this,f);var b=i(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,v,"View"));return b.getViewId=function(){return b.id},b}return t(f,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.getViewId}}}]),f}(s.default);o.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},o.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},T.default=o},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={Chart:"addChart",Coord:"addCoord",Geom:"addGeom",Axis:"addAxis",Tooltip:"addTooltip",Legend:"addLegend",Label:"addLabel",View:"addView",Guide:"addGuide",GuideLine:"addGuideLine",GuideImage:"addGuideImage",GuideText:"addGuideText",GuideRegion:"addGuideRegion",GuideHtml:"addGuideHtml",GuideArc:"addGuideArc",GuideRegionFilter:"addGuideRegionFilter",GuideDataMarker:"addGuideDataMarker",GuideDataRegion:"addGuideDataRegion",Facet:"addFacet"},u={addElement:function(c,r,h){this[t[c]](r,h,h.id,h.viewId,h.parentInfo)},getConfigContainer:function(c,r){return r&&(c.views||(c.views={}),c=c.views[r],c||(c={},c.views[r]=c)),c},addUniqueElement:function(c,r,h,n,i){var a=this.getConfigContainer(c,i);return a[r],a[r]=h,n},addChart:function(c,r,h){return this.addUniqueElement(c,"chart",r,h,null)},addView:function(c,r,h){return c.views||(c.views={}),c.views[h]=r,h},addAxis:function(c,r,h,n){var i=this.getConfigContainer(c,n);return i.axises||(i.axises={}),i.axises[h]=r,h},addCoord:function(c,r,h,n){return this.addUniqueElement(c,"coord",r,h,n)},addGeom:function(c,r,h,n,i){var a=this.getConfigContainer(c,n);return a.geoms||(a.geoms={}),a.geoms[h]?i?a.geoms[h].label=r.label:(a.geoms[h].label||console.log("geom label error"),r.label=a.geoms[h].label,a.geoms[h]=r):a.geoms[h]=r,h},addLabel:function(c,r,h,n,i){var a=this.getConfigContainer(c,n);return a.geoms||(a.geoms={}),this.addGeom(c,{label:r},i.id,n,!0),h},addTooltip:function(c,r,h,n){return this.addUniqueElement(c,"tooltip",r,h,n)},addFacet:function(c,r,h,n){return this.addUniqueElement(c,"facet",r,h,n)},addLegend:function(c,r,h,n){var i=this.getConfigContainer(c,n);return i.legends||(i.legends={}),i.legends[h]=r,h},addGuide:function(c,r,h,n){return this.addUniqueElement(c,"guide",r,h,n)},addTypedGuide:function(c,r,h,n,i,a){var o=this.getConfigContainer(c,i),l=o.guide;return l||(this.addUniqueElement("guide",{},a.id,i),l=o.guide),l.elements||(l.elements={}),h.type=r,l.elements[n]=h,n},addGuideLine:function(c,r,h,n,i){this.addTypedGuide(c,"line",r,h,n,i)},addGuideImage:function(c,r,h,n,i){this.addTypedGuide(c,"image",r,h,n,i)},addGuideText:function(c,r,h,n,i){this.addTypedGuide(c,"text",r,h,n,i)},addGuideRegion:function(c,r,h,n,i){this.addTypedGuide(c,"region",r,h,n,i)},addGuideHtml:function(c,r,h,n,i){this.addTypedGuide(c,"html",r,h,n,i)},addGuideArc:function(c,r,h,n,i){this.addTypedGuide(c,"arc",r,h,n,i)},addGuideRegionFilter:function(c,r,h,n,i){this.addTypedGuide(c,"regionFilter",r,h,n,i)},addGuideDataMarker:function(c,r,h,n,i){this.addTypedGuide(c,"dataMarker",r,h,n,i)},addGuideDataRegion:function(c,r,h,n,i){this.addTypedGuide(c,"dataRegion",r,h,n,i)}};T.default=u},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(r){if(Array.isArray(r)){for(var h=0,n=Array(r.length);h<r.length;h++)n[h]=r[h];return n}else return Array.from(r)}var u={Chart:"deleteChart",Coord:"deleteCoord",Geom:"deleteGeom",Axis:"deleteAxis",Tooltip:"deleteTooltip",Legend:"deleteLegend",Label:"deleteLabel",View:"deleteView",Guide:"deleteGuide",GuideLine:"deleteTypedGuide",GuideImage:"deleteTypedGuide",GuideText:"deleteTypedGuide",GuideRegion:"deleteTypedGuide",GuideHtml:"deleteTypedGuide",GuideArc:"deleteTypedGuide",Facet:"deleteFacet"},s={Geom:!0,Label:!0,Facet:!0},c={deleteAxis:function(h,n,i){var a=n.axises[i].props;h.axis(a.name,!1)},deleteTooltip:function(h){h.tooltip(!1)},deleteCoord:function(h){h.coord("rect",{})},deleteLegend:function(h,n,i){var a=n.legends[i].props;h.legend.apply(h,t(a.name?[a.name,!1]:[!1]))},deleteGuide:function(h){h.guide().clear()},deleteView:function(h,n,i){!n.views[i].g2Instance||(h.removeView(n.views[i].g2Instance),delete n.views[i].g2Instance)},deleteViewElement:function(h,n,i,a){var o=this;Object.keys(i).forEach(function(l){var f=a[l],v=f.viewId;v&&(s[f.name]?n.views[v].needReExecute=!0:n.views[v].g2Instance&&o[u[f.name]]&&o[u[f.name]](n.views[v].g2Instance,n.views[v],f.id))})},needReExecute:function(h,n){for(var i in h)if(s[n[i].name]&&!n[i].viewId)return!0;return!1},synchronizeG2Delete:function(h,n,i,a){var o=this;Object.keys(i).forEach(function(l){var f=u[a[l].name];o[f]&&!a[l].viewId&&o[f](h,n,l)}),this.deleteViewElement(h,n,i,a)}};T.default=c},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(_[y]=x[y])}return _},u=e(88),s=e(195),c=l(s),r=e(197),h=l(r),n=e(87),i=l(n),a=e(196),o=l(a);function l(_){return _&&_.__esModule?_:{default:_}}function f(_){if(Array.isArray(_)){for(var M=0,x=Array(_.length);M<_.length;M++)x[M]=_[M];return x}else return Array.from(_)}function v(_,M){var x={};for(var y in _)M.indexOf(y)>=0||!Object.prototype.hasOwnProperty.call(_,y)||(x[y]=_[y]);return x}var b=c.default.COORD_FUNC_PROPS,g=c.default.GEOM_FUNC_PROPS,m={needRebuildChart:function(M){if(M.chart.props==null||M.chart.updateProps==null)return!1;var x=M.chart.props,y=M.chart.updateProps;return!u.Util.shallowEqual(x.padding,y.padding)||!u.Util.shallowEqual(x.background,y.background)||!u.Util.shallowEqual(x.plotBackground,y.plotBackground)||!u.Util.shallowEqual(x.pixelRatio,y.pixelRatio)},needReExecute:function(M){var x=M.geoms;if(x==null)return!1;for(var y in x)if(x[y].props&&x[y].updateProps&&(x[y].props.type!==x[y].updateProps.type||x[y].props.color&&!x[y].updateProps.color||x[y].props.size&&!x[y].updateProps.size||x[y].props.shape&&!x[y].updateProps.shape))return!0;return!1},needRepaint:function(M){var x=M.chart,y=x.props.data,S=x.updateProps.data;return y===S},synchronizeG2Update:function(M,x){this.updateChart(M,x.chart),this.updateAxises(M,x.axises),this.updateTooltip(M,x),this.updateCoord(M,x),this.updateLegends(M,x.legends),this.updateGeoms(M,x.geoms),this.updateGuide(M,x.guide),this.updateFacet(M,x),this.updateViews(M,x)},updateChart:function(M,x){if(!!x){var y=x.props,S=x.updateProps,P=y.width,A=y.height,O=y.animate,L=y.data,H=y.scale,F=S.width,K=S.height,G=S.animate,U=S.data,Z=S.scale;L!==U&&M.changeData(U),u.Util.shallowEqual(H,Z)||(u.Util.isArray(Z)?M.scale(Z[0],Z[1]):M.scale(Z)),O!==G&&M.animate(G),P!==F&&A!==K?M.changeSize(F,K):P!==F?M.changeWidth(F):A!==K&&M.changeHeight(K),o.default.updateEvents(M,o.default.chartEvents,x.props,S),o.default.updateBaseEvents(M,x.updateProps,S)}},updateAxis:function(M,x){var y=x.props,S=y.name,P=y.visible,A=v(y,["name","visible"]),O=x.updateProps,L=O.name,H=O.visible,F=v(O,["name","visible"]);P!==H&&M.axis(S,!!H),u.Util.shallowEqual(A,F)||M.axis(S,F)},updateAxises:function(M,x){if(!!x)for(var y in x)x[y]&&x[y].props&&x[y].updateProps&&this.updateAxis(M,x[y])},updateTooltip:function(M,x){if(!!x.tooltip){var y=x.tooltip.props,S=x.tooltip.updateProps;y==null&&S==null||u.Util.shallowEqual(y,S)||M.tooltip(t({},S))}},updateCoord:function(M,x){var y=x.coord;if(!!y){var S=y.props,P=y.updateProps;if(!(S==null||P==null)){var A=u.Util.without(P,b.concat(["type"]));if(!u.Util.shallowEqual(S,P)){var O=M.coord(P.type,A);y.g2Instance=O,u.Prop.init(b,P,function(L,H){H==="reflect"?u.Util.each(L,function(F){return O[H](F)}):H==="transpose"?L[0]===!0&&O[H].apply(O,f(L)):O[H].apply(O,f(L))})}}}},updateLegend:function(M,x){var y=x.props,S=x.updateProps;if(!!S&&!u.Util.shallowEqual(y,S)){var P=S.name,A=S.visible,O=v(S,["name","visible"]),L=A&&O;M.legend.apply(M,f(P?[P,L]:[L]))}},updateLegends:function(M,x){if(x!=null)for(var y in x)x[y]&&this.updateLegend(M,x[y])},updateLabel:function(M,x,y){if(!(x==null||y==null)){var S=x.content,P=v(x,["content"]),A=y.content,O=v(y,["content"]);(!u.Util.shallowEqual(P,O)||!u.Util.shallowEqual(S,A))&&(u.Util.isArray(A)?M.label(A[0],A[1],O):M.label(A,O))}},updateGeom:function(M,x){var y=x.props,S=x.updateProps;if(!(!y||!S)&&y.type===S.type){var P=x.g2Instance;if(u.Util.shallowEqual(y,S)){x.label&&this.updateLabel(P,x.label.props,x.label.updateProps);return}var A=y.adjust,O=v(y,["adjust"]),L=S.adjust,H=v(S,["adjust"]);(A||L)&&P.adjust(L),u.Prop.update(g,O,H,function(F,K){P[K].apply(P,f(F))}),x.label&&this.updateLabel(P,x.label.props,x.label.updateProps)}},updateGeoms:function(M,x){if(x==null)return!1;for(var y in x)x[y]&&this.updateGeom(M,x[y]);return!1},isTypedGuideChanged:function(M){return!u.Util.shallowEqual(M.props,M.updateProps)},updateGuide:function(M,x){if(!(!x||!x.elements)){var y=x.elements,S=!1;for(var P in y)if(y[P]&&(y[P].updateProps||this.isTypedGuideChanged(y[P]))){S=!0;break}S&&(i.default.mergeGuide(x,!0),M.guide().clear(),h.default.guide(M,x))}},updateView:function(M,x){if(!(!x||!x.props||!x.updateProps||x.parentInfo.name==="Facet")){var y=x.g2Instance,S=x.props,P=x.updateProps,A=S.scale,O=S.data,L=S.animate,H=S.axis,F=S.filter,K=P.scale,G=P.animate,U=P.data,Z=P.axis,J=P.filter;L!==G&&y.animate(G),O!==U&&y.changeData(U),u.Util.shallowEqual(A,K)||y.scale(K),u.Util.shallowEqual(F,J)||J.forEach(function(rt){y.filter(rt[0],rt[1])}),H!==Z&&y.axis(Z),this.updateCoord(y,x),this.updateAxises(y,x.axises),this.updateGeoms(y,x.geoms),this.updateGuide(y,x.guide)}},updateViews:function(M,x){var y=x.views;if(!!y)for(var S in y){var P=y[S];P&&(P.needReExecute||this.needReExecute(P))?(h.default.synchronizeG2View(P.g2Instance,P),y[S].needReExecute=!1):this.updateView(M,P)}},updateFacet:function(M,x){var y=x.facet;if(!!y){var S=y.props,P=y.updateProps;if(!(S==null||P==null)){var A=S.type,O=v(S,["type"]),L=P.type,H=v(P,["type"]);(A!==L||!u.Util.shallowEqual(O,H))&&(y.props=P,h.default.facet(M,x))}}}};T.default=m},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(M){for(var x=1;x<arguments.length;x++){var y=arguments[x];for(var S in y)Object.prototype.hasOwnProperty.call(y,S)&&(M[S]=y[S])}return M},u=function(){function M(x,y){for(var S=0;S<y.length;S++){var P=y[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}return function(x,y,S){return y&&M(x.prototype,y),S&&M(x,S),x}}(),s=e(433),c=b(s),r=e(87),h=b(r),n=e(435),i=b(n),a=e(434),o=b(a),l=e(197),f=b(l),v=e(88);function b(M){return M&&M.__esModule?M:{default:M}}function g(M,x){var y={};for(var S in M)x.indexOf(S)>=0||!Object.prototype.hasOwnProperty.call(M,S)||(y[S]=M[S]);return y}function m(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}var _=function(){function M(){m(this,M),this.config={},this.elementInfos={},this.added=!1,this.initedG2=!1,this.updated=!1,this.deleted=!1,this.deleteInfos={}}return u(M,[{key:"calUpdateFlag",value:function(y,S){var P=this.elementInfos[S].props,A=P.children,O=g(P,["children"]),L=this.elementInfos[S].updateProps,H=L.children,F=g(L,["children"]);if(y==="Chart"||y==="View"){var K=O.data,G=g(O,["data"]),U=F.data,Z=g(F,["data"]);(K!==U||!v.Util.isEqual(G,Z))&&(this.updated=!0)}else v.Util.isEqual(O,F)||(this.updated=!0)}},{key:"addElement",value:function(y,S,P,A,O){!this.chart&&this.initedG2||(this.added=!0,this.elementInfos[S]={id:S,viewId:O,parentInfo:A,name:y,props:t({},P)},A&&!this.elementInfos[A.id]&&(this.elementInfos[A.id]={id:A.id,name:A.name}),c.default.addElement(y,this.config,this.elementInfos[S]))}},{key:"updateElement",value:function(y,S,P){this.elementInfos[S].updateProps=t({},P),this.calUpdateFlag(y,S)}},{key:"deleteElement",value:function(y,S){!this.chart||(this.deleteInfos[S]=S,this.deleted=!0)}},{key:"createG2Instance",value:function(){var y=this.config,S=f.default.createChart(y,this.elementInfos);return f.default.executeChartConfig(S,y,this.elementInfos),f.default.synchronizeG2Add(S,y,this.elementInfos),S.render(),this.chart=S,this.initedG2=!0,this.resetStates(),S}},{key:"destory",value:function(){this.chart.destroy(),this.chart=null}},{key:"resetStates",value:function(){var y=this.elementInfos;for(var S in y)y[S].updateProps&&delete y[S].updateProps,this.deleteInfos[S]&&delete y[S];this.added=!1,this.updated=!1,this.deleteInfos={}}},{key:"reExecuteChart",value:function(){return this.chart.clear(),h.default.merge(this.config,this.deleteInfos,this.elementInfos,!0),f.default.executeChartConfig(this.chart,this.config,this.elementInfos),f.default.synchronizeG2Add(this.chart,this.config,this.elementInfos),this.chart.repaint(),this.resetStates(),this.chart}},{key:"batchedUpdate",value:function(){return this.chart==null?null:this.config.chart.props.forceUpdate||i.default.needRebuildChart(this.config)?(h.default.merge(this.config,this.deleteInfos,this.elementInfos,!0),this.chart.destroy(),this.chart="destroy",this.createG2Instance()):o.default.needReExecute(this.deleteInfos,this.elementInfos)||i.default.needReExecute(this.config)?(this.reExecuteChart(),this.chart):(this.deleted&&(o.default.synchronizeG2Delete(this.chart,this.config,this.deleteInfos,this.elementInfos),h.default.mergeDelete(this.config,this.deleteInfos,this.elementInfos)),this.added&&f.default.synchronizeG2Add(this.chart,this.config),this.updated&&i.default.synchronizeG2Update(this.chart,this.config),(this.added||this.deleted||this.updated)&&this.chart.repaint(),h.default.mergeUpdate(this.config,!1),this.resetStates(),this.chart)}}]),M}();T.default=_},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(58),u=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default={init:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments[1],n=arguments[2];u.default.each(r,function(i){var a=h[i];a!==void 0&&(u.default.isArray(a)||(a=[a]),n(a,i))})},update:function(r,h,n,i){var a=void 0,o=void 0;u.default.each(r,function(l){a=h[l],o=n[l],u.default.shallowEqual(o,a)||(u.default.isArray(o)||(o=[o]),i(o,l))})}}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={}},function(E,T,e){"use strict";T.a=v;var t=e(90),u=e(89),s=e(198),c=-.14861,r=1.78277,h=-.29227,n=-.90649,i=1.97294,a=i*n,o=i*r,l=r*h-n*c;function f(g){if(g instanceof b)return new b(g.h,g.s,g.l,g.opacity);g instanceof u.a||(g=e.i(u.b)(g));var m=g.r/255,_=g.g/255,M=g.b/255,x=(l*M+a*m-o*_)/(l+a-o),y=M-x,S=(i*(_-x)-h*y)/n,P=Math.sqrt(S*S+y*y)/(i*x*(1-x)),A=P?Math.atan2(S,y)*s.a-120:NaN;return new b(A<0?A+360:A,P,x,g.opacity)}function v(g,m,_,M){return arguments.length===1?f(g):new b(g,m,_,M==null?1:M)}function b(g,m,_,M){this.h=+g,this.s=+m,this.l=+_,this.opacity=+M}e.i(t.a)(b,v,e.i(t.b)(u.c,{brighter:function(g){return g=g==null?u.d:Math.pow(u.d,g),new b(this.h,this.s,this.l*g,this.opacity)},darker:function(g){return g=g==null?u.e:Math.pow(u.e,g),new b(this.h,this.s,this.l*g,this.opacity)},rgb:function(){var g=isNaN(this.h)?0:(this.h+120)*s.b,m=+this.l,_=isNaN(this.s)?0:this.s*m*(1-m),M=Math.cos(g),x=Math.sin(g);return new u.a(255*(m+_*(c*M+r*x)),255*(m+_*(h*M+n*x)),255*(m+_*(i*M)),this.opacity)}}))},function(E,T,e){"use strict";T.b=b,T.a=P;var t=e(90),u=e(89),s=e(198),c=18,r=.96422,h=1,n=.82521,i=4/29,a=6/29,o=3*a*a,l=a*a*a;function f(L){if(L instanceof g)return new g(L.l,L.a,L.b,L.opacity);if(L instanceof A)return O(L);L instanceof u.a||(L=e.i(u.b)(L));var H=x(L.r),F=x(L.g),K=x(L.b),G=m((.2225045*H+.7168786*F+.0606169*K)/h),U,Z;return H===F&&F===K?U=Z=G:(U=m((.4360747*H+.3850649*F+.1430804*K)/r),Z=m((.0139322*H+.0971045*F+.7141733*K)/n)),new g(116*G-16,500*(U-G),200*(G-Z),L.opacity)}function v(L,H){return new g(L,0,0,H==null?1:H)}function b(L,H,F,K){return arguments.length===1?f(L):new g(L,H,F,K==null?1:K)}function g(L,H,F,K){this.l=+L,this.a=+H,this.b=+F,this.opacity=+K}e.i(t.a)(g,b,e.i(t.b)(u.c,{brighter:function(L){return new g(this.l+c*(L==null?1:L),this.a,this.b,this.opacity)},darker:function(L){return new g(this.l-c*(L==null?1:L),this.a,this.b,this.opacity)},rgb:function(){var L=(this.l+16)/116,H=isNaN(this.a)?L:L+this.a/500,F=isNaN(this.b)?L:L-this.b/200;return H=r*_(H),L=h*_(L),F=n*_(F),new u.a(M(3.1338561*H-1.6168667*L-.4906146*F),M(-.9787684*H+1.9161415*L+.033454*F),M(.0719453*H-.2289914*L+1.4052427*F),this.opacity)}}));function m(L){return L>l?Math.pow(L,1/3):L/o+i}function _(L){return L>a?L*L*L:o*(L-i)}function M(L){return 255*(L<=.0031308?12.92*L:1.055*Math.pow(L,1/2.4)-.055)}function x(L){return(L/=255)<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4)}function y(L){if(L instanceof A)return new A(L.h,L.c,L.l,L.opacity);if(L instanceof g||(L=f(L)),L.a===0&&L.b===0)return new A(NaN,0<L.l&&L.l<100?0:NaN,L.l,L.opacity);var H=Math.atan2(L.b,L.a)*s.a;return new A(H<0?H+360:H,Math.sqrt(L.a*L.a+L.b*L.b),L.l,L.opacity)}function S(L,H,F,K){return arguments.length===1?y(L):new A(F,H,L,K==null?1:K)}function P(L,H,F,K){return arguments.length===1?y(L):new A(L,H,F,K==null?1:K)}function A(L,H,F,K){this.h=+L,this.c=+H,this.l=+F,this.opacity=+K}function O(L){if(isNaN(L.h))return new g(L.l,0,0,L.opacity);var H=L.h*s.b;return new g(L.l,Math.cos(H)*L.c,Math.sin(H)*L.c,L.opacity)}e.i(t.a)(A,P,e.i(t.b)(u.c,{brighter:function(L){return new A(this.h,this.c,this.l+c*(L==null?1:L),this.opacity)},darker:function(L){return new A(this.h,this.c,this.l-c*(L==null?1:L),this.opacity)},rgb:function(){return O(this).rgb()}}))},function(E,T,e){"use strict";var t={value:function(){}};function u(){for(var n=0,i=arguments.length,a={},o;n<i;++n){if(!(o=arguments[n]+"")||o in a||/[\s.]/.test(o))throw new Error("illegal type: "+o);a[o]=[]}return new s(a)}function s(n){this._=n}function c(n,i){return n.trim().split(/^|\s+/).map(function(a){var o="",l=a.indexOf(".");if(l>=0&&(o=a.slice(l+1),a=a.slice(0,l)),a&&!i.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:o}})}s.prototype=u.prototype={constructor:s,on:function(n,i){var a=this._,o=c(n+"",a),l,f=-1,v=o.length;if(arguments.length<2){for(;++f<v;)if((l=(n=o[f]).type)&&(l=r(a[l],n.name)))return l;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++f<v;)if(l=(n=o[f]).type)a[l]=h(a[l],n.name,i);else if(i==null)for(l in a)a[l]=h(a[l],n.name,null);return this},copy:function(){var n={},i=this._;for(var a in i)n[a]=i[a].slice();return new s(n)},call:function(n,i){if((l=arguments.length-2)>0)for(var a=new Array(l),o=0,l,f;o<l;++o)a[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(f=this._[n],o=0,l=f.length;o<l;++o)f[o].value.apply(i,a)},apply:function(n,i,a){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var o=this._[n],l=0,f=o.length;l<f;++l)o[l].value.apply(i,a)}};function r(n,i){for(var a=0,o=n.length,l;a<o;++a)if((l=n[a]).name===i)return l.value}function h(n,i,a){for(var o=0,l=n.length;o<l;++o)if(n[o].name===i){n[o]=t,n=n.slice(0,o).concat(n.slice(o+1));break}return a!=null&&n.push({name:i,value:a}),n}T.a=u},function(E,T,e){"use strict";var t=e(441);e.d(T,"a",function(){return t.a})},function(E,T,e){"use strict";e.d(T,"b",function(){return u}),e.d(T,"c",function(){return s}),e.d(T,"a",function(){return c});var t=1.70158,u=function r(h){h=+h;function n(i){return i*i*((h+1)*i-h)}return n.overshoot=r,n}(t),s=function r(h){h=+h;function n(i){return--i*i*((h+1)*i+h)+1}return n.overshoot=r,n}(t),c=function r(h){h=+h;function n(i){return((i*=2)<1?i*i*((h+1)*i-h):(i-=2)*i*((h+1)*i+h)+2)/2}return n.overshoot=r,n}(t)},function(E,T,e){"use strict";T.b=l,T.a=f,T.c=v;var t=4/11,u=6/11,s=8/11,c=3/4,r=9/11,h=10/11,n=15/16,i=21/22,a=63/64,o=1/t/t;function l(b){return 1-f(1-b)}function f(b){return(b=+b)<t?o*b*b:b<s?o*(b-=u)*b+c:b<h?o*(b-=r)*b+n:o*(b-=i)*b+a}function v(b){return((b*=2)<=1?1-f(1-b):f(b-1)+1)/2}},function(E,T,e){"use strict";T.b=t,T.c=u,T.a=s;function t(c){return 1-Math.sqrt(1-c*c)}function u(c){return Math.sqrt(1- --c*c)}function s(c){return((c*=2)<=1?1-Math.sqrt(1-c*c):Math.sqrt(1-(c-=2)*c)+1)/2}},function(E,T,e){"use strict";T.b=t,T.c=u,T.a=s;function t(c){return c*c*c}function u(c){return--c*c*c+1}function s(c){return((c*=2)<=1?c*c*c:(c-=2)*c*c+2)/2}},function(E,T,e){"use strict";e.d(T,"b",function(){return c}),e.d(T,"a",function(){return r}),e.d(T,"c",function(){return h});var t=2*Math.PI,u=1,s=.3,c=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function l(f){return i*Math.pow(2,10*--f)*Math.sin((o-f)/a)}return l.amplitude=function(f){return n(f,a*t)},l.period=function(f){return n(i,f)},l}(u,s),r=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function l(f){return 1-i*Math.pow(2,-10*(f=+f))*Math.sin((f+o)/a)}return l.amplitude=function(f){return n(f,a*t)},l.period=function(f){return n(i,f)},l}(u,s),h=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function l(f){return((f=f*2-1)<0?i*Math.pow(2,10*f)*Math.sin((o-f)/a):2-i*Math.pow(2,-10*f)*Math.sin((o+f)/a))/2}return l.amplitude=function(f){return n(f,a*t)},l.period=function(f){return n(i,f)},l}(u,s)},function(E,T,e){"use strict";T.b=t,T.c=u,T.a=s;function t(c){return Math.pow(2,10*c-10)}function u(c){return 1-Math.pow(2,-10*c)}function s(c){return((c*=2)<=1?Math.pow(2,10*c-10):2-Math.pow(2,10-10*c))/2}},function(E,T,e){"use strict";T.a=t;function t(u){return+u}},function(E,T,e){"use strict";e.d(T,"b",function(){return u}),e.d(T,"c",function(){return s}),e.d(T,"a",function(){return c});var t=3,u=function r(h){h=+h;function n(i){return Math.pow(i,h)}return n.exponent=r,n}(t),s=function r(h){h=+h;function n(i){return 1-Math.pow(1-i,h)}return n.exponent=r,n}(t),c=function r(h){h=+h;function n(i){return((i*=2)<=1?Math.pow(i,h):2-Math.pow(2-i,h))/2}return n.exponent=r,n}(t)},function(E,T,e){"use strict";T.b=t,T.c=u,T.a=s;function t(c){return c*c}function u(c){return c*(2-c)}function s(c){return((c*=2)<=1?c*c:--c*(2-c)+1)/2}},function(E,T,e){"use strict";T.b=s,T.c=c,T.a=r;var t=Math.PI,u=t/2;function s(h){return 1-Math.cos(h*u)}function c(h){return Math.sin(h*u)}function r(h){return(1-Math.cos(t*h))/2}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(92);e.d(T,"interpolate",function(){return t.a});var u=e(200);e.d(T,"interpolateArray",function(){return u.a});var s=e(91);e.d(T,"interpolateBasis",function(){return s.a});var c=e(201);e.d(T,"interpolateBasisClosed",function(){return c.a});var r=e(203);e.d(T,"interpolateDate",function(){return r.a});var h=e(59);e.d(T,"interpolateNumber",function(){return h.a});var n=e(204);e.d(T,"interpolateObject",function(){return n.a});var i=e(459);e.d(T,"interpolateRound",function(){return i.a});var a=e(206);e.d(T,"interpolateString",function(){return a.a});var o=e(461);e.d(T,"interpolateTransformCss",function(){return o.a}),e.d(T,"interpolateTransformSvg",function(){return o.b});var l=e(463);e.d(T,"interpolateZoom",function(){return l.a});var f=e(205);e.d(T,"interpolateRgb",function(){return f.a}),e.d(T,"interpolateRgbBasis",function(){return f.b}),e.d(T,"interpolateRgbBasisClosed",function(){return f.c});var v=e(456);e.d(T,"interpolateHsl",function(){return v.a}),e.d(T,"interpolateHslLong",function(){return v.b});var b=e(457);e.d(T,"interpolateLab",function(){return b.a});var g=e(455);e.d(T,"interpolateHcl",function(){return g.a}),e.d(T,"interpolateHclLong",function(){return g.b});var m=e(454);e.d(T,"interpolateCubehelix",function(){return m.a}),e.d(T,"interpolateCubehelixLong",function(){return m.b});var _=e(458);e.d(T,"quantize",function(){return _.a})},function(E,T,e){"use strict";e.d(T,"b",function(){return c});var t=e(12),u=e(41);function s(r){return function h(n){n=+n;function i(a,o){var l=r((a=e.i(t.a)(a)).h,(o=e.i(t.a)(o)).h),f=e.i(u.a)(a.s,o.s),v=e.i(u.a)(a.l,o.l),b=e.i(u.a)(a.opacity,o.opacity);return function(g){return a.h=l(g),a.s=f(g),a.l=v(Math.pow(g,n)),a.opacity=b(g),a+""}}return i.gamma=h,i}(1)}T.a=s(u.b);var c=s(u.a)},function(E,T,e){"use strict";e.d(T,"b",function(){return c});var t=e(12),u=e(41);function s(r){return function(h,n){var i=r((h=e.i(t.b)(h)).h,(n=e.i(t.b)(n)).h),a=e.i(u.a)(h.c,n.c),o=e.i(u.a)(h.l,n.l),l=e.i(u.a)(h.opacity,n.opacity);return function(f){return h.h=i(f),h.c=a(f),h.l=o(f),h.opacity=l(f),h+""}}}T.a=s(u.b);var c=s(u.a)},function(E,T,e){"use strict";e.d(T,"b",function(){return c});var t=e(12),u=e(41);function s(r){return function(h,n){var i=r((h=e.i(t.d)(h)).h,(n=e.i(t.d)(n)).h),a=e.i(u.a)(h.s,n.s),o=e.i(u.a)(h.l,n.l),l=e.i(u.a)(h.opacity,n.opacity);return function(f){return h.h=i(f),h.s=a(f),h.l=o(f),h.opacity=l(f),h+""}}}T.a=s(u.b);var c=s(u.a)},function(E,T,e){"use strict";T.a=s;var t=e(12),u=e(41);function s(c,r){var h=e.i(u.a)((c=e.i(t.c)(c)).l,(r=e.i(t.c)(r)).l),n=e.i(u.a)(c.a,r.a),i=e.i(u.a)(c.b,r.b),a=e.i(u.a)(c.opacity,r.opacity);return function(o){return c.l=h(o),c.a=n(o),c.b=i(o),c.opacity=a(o),c+""}}},function(E,T,e){"use strict";T.a=function(t,u){for(var s=new Array(u),c=0;c<u;++c)s[c]=t(c/(u-1));return s}},function(E,T,e){"use strict";T.a=function(t,u){return t=+t,u-=t,function(s){return Math.round(t+u*s)}}},function(E,T,e){"use strict";e.d(T,"a",function(){return u});var t=180/Math.PI,u={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};T.b=function(s,c,r,h,n,i){var a,o,l;return(a=Math.sqrt(s*s+c*c))&&(s/=a,c/=a),(l=s*r+c*h)&&(r-=s*l,h-=c*l),(o=Math.sqrt(r*r+h*h))&&(r/=o,h/=o,l/=o),s*h<c*r&&(s=-s,c=-c,l=-l,a=-a),{translateX:n,translateY:i,rotate:Math.atan2(c,s)*t,skewX:Math.atan(l)*t,scaleX:a,scaleY:o}}},function(E,T,e){"use strict";e.d(T,"a",function(){return c}),e.d(T,"b",function(){return r});var t=e(59),u=e(462);function s(h,n,i,a){function o(g){return g.length?g.pop()+" ":""}function l(g,m,_,M,x,y){if(g!==_||m!==M){var S=x.push("translate(",null,n,null,i);y.push({i:S-4,x:e.i(t.a)(g,_)},{i:S-2,x:e.i(t.a)(m,M)})}else(_||M)&&x.push("translate("+_+n+M+i)}function f(g,m,_,M){g!==m?(g-m>180?m+=360:m-g>180&&(g+=360),M.push({i:_.push(o(_)+"rotate(",null,a)-2,x:e.i(t.a)(g,m)})):m&&_.push(o(_)+"rotate("+m+a)}function v(g,m,_,M){g!==m?M.push({i:_.push(o(_)+"skewX(",null,a)-2,x:e.i(t.a)(g,m)}):m&&_.push(o(_)+"skewX("+m+a)}function b(g,m,_,M,x,y){if(g!==_||m!==M){var S=x.push(o(x)+"scale(",null,",",null,")");y.push({i:S-4,x:e.i(t.a)(g,_)},{i:S-2,x:e.i(t.a)(m,M)})}else(_!==1||M!==1)&&x.push(o(x)+"scale("+_+","+M+")")}return function(g,m){var _=[],M=[];return g=h(g),m=h(m),l(g.translateX,g.translateY,m.translateX,m.translateY,_,M),f(g.rotate,m.rotate,_,M),v(g.skewX,m.skewX,_,M),b(g.scaleX,g.scaleY,m.scaleX,m.scaleY,_,M),g=m=null,function(x){for(var y=-1,S=M.length,P;++y<S;)_[(P=M[y]).i]=P.x(x);return _.join("")}}}var c=s(u.a,"px, ","px)","deg)"),r=s(u.b,", ",")",")")},function(E,T,e){"use strict";T.a=h,T.b=n;var t=e(460),u,s,c,r;function h(i){return i==="none"?t.a:(u||(u=document.createElement("DIV"),s=document.documentElement,c=document.defaultView),u.style.transform=i,i=c.getComputedStyle(s.appendChild(u),null).getPropertyValue("transform"),s.removeChild(u),i=i.slice(7,-1).split(","),e.i(t.b)(+i[0],+i[1],+i[2],+i[3],+i[4],+i[5]))}function n(i){return i==null||(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",i),!(i=r.transform.baseVal.consolidate()))?t.a:(i=i.matrix,e.i(t.b)(i.a,i.b,i.c,i.d,i.e,i.f))}},function(E,T,e){"use strict";var t=Math.SQRT2,u=2,s=4,c=1e-12;function r(i){return((i=Math.exp(i))+1/i)/2}function h(i){return((i=Math.exp(i))-1/i)/2}function n(i){return((i=Math.exp(2*i))-1)/(i+1)}T.a=function(i,a){var o=i[0],l=i[1],f=i[2],v=a[0],b=a[1],g=a[2],m=v-o,_=b-l,M=m*m+_*_,x,y;if(M<c)y=Math.log(g/f)/t,x=function(H){return[o+H*m,l+H*_,f*Math.exp(t*H*y)]};else{var S=Math.sqrt(M),P=(g*g-f*f+s*M)/(2*f*u*S),A=(g*g-f*f-s*M)/(2*g*u*S),O=Math.log(Math.sqrt(P*P+1)-P),L=Math.log(Math.sqrt(A*A+1)-A);y=(L-O)/t,x=function(H){var F=H*y,K=r(O),G=f/(u*S)*(K*n(t*F+O)-h(O));return[o+G*m,l+G*_,f*K/r(t*F+O)]}}return x.duration=y*1e3,x}},function(E,T,e){"use strict";var t=e(12),u=e(32);function s(h){return function n(i){i=+i;function a(o,l){var f=h((o=e.i(t.a)(o)).h,(l=e.i(t.a)(l)).h),v=e.i(u.a)(o.s,l.s),b=e.i(u.a)(o.l,l.l),g=e.i(u.a)(o.opacity,l.opacity);return function(m){return o.h=f(m),o.s=v(m),o.l=b(Math.pow(m,i)),o.opacity=g(m),o+""}}return a.gamma=n,a}(1)}var c=s(u.b),r=s(u.a)},function(E,T,e){"use strict";var t=function(u){var s=u.length;return function(c){return u[Math.max(0,Math.min(s-1,Math.floor(c*s)))]}}},function(E,T,e){"use strict";var t=e(12),u=e(32);function s(h){return function(n,i){var a=h((n=e.i(t.b)(n)).h,(i=e.i(t.b)(i)).h),o=e.i(u.a)(n.c,i.c),l=e.i(u.a)(n.l,i.l),f=e.i(u.a)(n.opacity,i.opacity);return function(v){return n.h=a(v),n.c=o(v),n.l=l(v),n.opacity=f(v),n+""}}}var c=s(u.b),r=s(u.a)},function(E,T,e){"use strict";var t=e(12),u=e(32);function s(h){return function(n,i){var a=h((n=e.i(t.d)(n)).h,(i=e.i(t.d)(i)).h),o=e.i(u.a)(n.s,i.s),l=e.i(u.a)(n.l,i.l),f=e.i(u.a)(n.opacity,i.opacity);return function(v){return n.h=a(v),n.s=o(v),n.l=l(v),n.opacity=f(v),n+""}}}var c=s(u.b),r=s(u.a)},function(E,T,e){"use strict";var t=e(32),u=function(s,c){var r=e.i(t.b)(+s,+c);return function(h){var n=r(h);return n-360*Math.floor(n/360)}}},function(E,T,e){"use strict";var t=e(12),u=e(32);function s(c,r){var h=e.i(u.a)((c=e.i(t.c)(c)).l,(r=e.i(t.c)(r)).l),n=e.i(u.a)(c.a,r.a),i=e.i(u.a)(c.b,r.b),a=e.i(u.a)(c.opacity,r.opacity);return function(o){return c.l=h(o),c.a=n(o),c.b=i(o),c.opacity=a(o),c+""}}},function(E,T,e){"use strict";function t(u,s){for(var c=0,r=s.length-1,h=s[0],n=new Array(r<0?0:r);c<r;)n[c]=u(h,h=s[++c]);return function(i){var a=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return n[a](i-a)}}},function(E,T,e){"use strict";var t=function(u,s){for(var c=new Array(s),r=0;r<s;++r)c[r]=u(r/(s-1));return c}},function(E,T,e){"use strict";var t=function(u,s){return u=+u,s=+s,function(c){return Math.round(u*(1-c)+s*c)}}},function(E,T,e){"use strict";e.d(T,"a",function(){return u});var t=180/Math.PI,u={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};T.b=function(s,c,r,h,n,i){var a,o,l;return(a=Math.sqrt(s*s+c*c))&&(s/=a,c/=a),(l=s*r+c*h)&&(r-=s*l,h-=c*l),(o=Math.sqrt(r*r+h*h))&&(r/=o,h/=o,l/=o),s*h<c*r&&(s=-s,c=-c,l=-l,a=-a),{translateX:n,translateY:i,rotate:Math.atan2(c,s)*t,skewX:Math.atan(l)*t,scaleX:a,scaleY:o}}},function(E,T,e){"use strict";e.d(T,"a",function(){return c}),e.d(T,"b",function(){return r});var t=e(60),u=e(475);function s(h,n,i,a){function o(g){return g.length?g.pop()+" ":""}function l(g,m,_,M,x,y){if(g!==_||m!==M){var S=x.push("translate(",null,n,null,i);y.push({i:S-4,x:e.i(t.a)(g,_)},{i:S-2,x:e.i(t.a)(m,M)})}else(_||M)&&x.push("translate("+_+n+M+i)}function f(g,m,_,M){g!==m?(g-m>180?m+=360:m-g>180&&(g+=360),M.push({i:_.push(o(_)+"rotate(",null,a)-2,x:e.i(t.a)(g,m)})):m&&_.push(o(_)+"rotate("+m+a)}function v(g,m,_,M){g!==m?M.push({i:_.push(o(_)+"skewX(",null,a)-2,x:e.i(t.a)(g,m)}):m&&_.push(o(_)+"skewX("+m+a)}function b(g,m,_,M,x,y){if(g!==_||m!==M){var S=x.push(o(x)+"scale(",null,",",null,")");y.push({i:S-4,x:e.i(t.a)(g,_)},{i:S-2,x:e.i(t.a)(m,M)})}else(_!==1||M!==1)&&x.push(o(x)+"scale("+_+","+M+")")}return function(g,m){var _=[],M=[];return g=h(g),m=h(m),l(g.translateX,g.translateY,m.translateX,m.translateY,_,M),f(g.rotate,m.rotate,_,M),v(g.skewX,m.skewX,_,M),b(g.scaleX,g.scaleY,m.scaleX,m.scaleY,_,M),g=m=null,function(x){for(var y=-1,S=M.length,P;++y<S;)_[(P=M[y]).i]=P.x(x);return _.join("")}}}var c=s(u.a,"px, ","px)","deg)"),r=s(u.b,", ",")",")")},function(E,T,e){"use strict";T.a=h,T.b=n;var t=e(473),u,s,c,r;function h(i){return i==="none"?t.a:(u||(u=document.createElement("DIV"),s=document.documentElement,c=document.defaultView),u.style.transform=i,i=c.getComputedStyle(s.appendChild(u),null).getPropertyValue("transform"),s.removeChild(u),i=i.slice(7,-1).split(","),e.i(t.b)(+i[0],+i[1],+i[2],+i[3],+i[4],+i[5]))}function n(i){return i==null||(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",i),!(i=r.transform.baseVal.consolidate()))?t.a:(i=i.matrix,e.i(t.b)(i.a,i.b,i.c,i.d,i.e,i.f))}},function(E,T,e){"use strict";var t=Math.SQRT2,u=2,s=4,c=1e-12;function r(a){return((a=Math.exp(a))+1/a)/2}function h(a){return((a=Math.exp(a))-1/a)/2}function n(a){return((a=Math.exp(2*a))-1)/(a+1)}var i=function(a,o){var l=a[0],f=a[1],v=a[2],b=o[0],g=o[1],m=o[2],_=b-l,M=g-f,x=_*_+M*M,y,S;if(x<c)S=Math.log(m/v)/t,y=function(F){return[l+F*_,f+F*M,v*Math.exp(t*F*S)]};else{var P=Math.sqrt(x),A=(m*m-v*v+s*x)/(2*v*u*P),O=(m*m-v*v-s*x)/(2*m*u*P),L=Math.log(Math.sqrt(A*A+1)-A),H=Math.log(Math.sqrt(O*O+1)-O);S=(H-L)/t,y=function(F){var K=F*S,G=r(L),U=v/(u*P)*(G*n(t*K+L)-h(L));return[l+U*_,f+U*M,v*G/r(t*K+L)]}}return y.duration=S*1e3,y}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";var t=e(61),u=e(215);T.a=function(s){return e.i(u.a)(e.i(t.a)(s).call(document.documentElement))}},function(E,T,e){"use strict";T.a=u;var t=0;function u(){return new s}function s(){this._="@"+(++t).toString(36)}s.prototype=u.prototype={constructor:s,get:function(c){for(var r=this._;!(r in c);)if(!(c=c.parentNode))return;return c[r]},set:function(c,r){return c[this._]=r},remove:function(c){return this._ in c&&delete c[this._]},toString:function(){return this._}}},function(E,T,e){"use strict";var t=e(101),u=e(62);T.a=function(s){var c=e.i(t.a)();return c.changedTouches&&(c=c.changedTouches[0]),e.i(u.a)(s,c)}},function(E,T,e){"use strict";var t=e(18);T.a=function(u){return typeof u=="string"?new t.b([document.querySelectorAll(u)],[document.documentElement]):new t.b([u==null?[]:u],t.c)}},function(E,T,e){"use strict";var t=e(61);T.a=function(u){var s=typeof u=="function"?u:e.i(t.a)(u);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}},function(E,T,e){"use strict";var t=e(97);function u(i){return function(){this.removeAttribute(i)}}function s(i){return function(){this.removeAttributeNS(i.space,i.local)}}function c(i,a){return function(){this.setAttribute(i,a)}}function r(i,a){return function(){this.setAttributeNS(i.space,i.local,a)}}function h(i,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttribute(i):this.setAttribute(i,o)}}function n(i,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,o)}}T.a=function(i,a){var o=e.i(t.a)(i);if(arguments.length<2){var l=this.node();return o.local?l.getAttributeNS(o.space,o.local):l.getAttribute(o)}return this.each((a==null?o.local?s:u:typeof a=="function"?o.local?n:h:o.local?r:c)(o,a))}},function(E,T,e){"use strict";T.a=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}},function(E,T,e){"use strict";function t(a){return a.trim().split(/^|\s+/)}function u(a){return a.classList||new s(a)}function s(a){this._node=a,this._names=t(a.getAttribute("class")||"")}s.prototype={add:function(a){var o=this._names.indexOf(a);o<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var o=this._names.indexOf(a);o>=0&&(this._names.splice(o,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};function c(a,o){for(var l=u(a),f=-1,v=o.length;++f<v;)l.add(o[f])}function r(a,o){for(var l=u(a),f=-1,v=o.length;++f<v;)l.remove(o[f])}function h(a){return function(){c(this,a)}}function n(a){return function(){r(this,a)}}function i(a,o){return function(){(o.apply(this,arguments)?c:r)(this,a)}}T.a=function(a,o){var l=t(a+"");if(arguments.length<2){for(var f=u(this.node()),v=-1,b=l.length;++v<b;)if(!f.contains(l[v]))return!1;return!0}return this.each((typeof o=="function"?i:o?h:n)(l,o))}},function(E,T,e){"use strict";function t(){var s=this.cloneNode(!1),c=this.parentNode;return c?c.insertBefore(s,this.nextSibling):s}function u(){var s=this.cloneNode(!0),c=this.parentNode;return c?c.insertBefore(s,this.nextSibling):s}T.a=function(s){return this.select(s?u:t)}},function(E,T,e){"use strict";var t=e(18),u=e(216),s=e(477),c="$";function r(n,i,a,o,l,f){for(var v=0,b,g=i.length,m=f.length;v<m;++v)(b=i[v])?(b.__data__=f[v],o[v]=b):a[v]=new u.b(n,f[v]);for(;v<g;++v)(b=i[v])&&(l[v]=b)}function h(n,i,a,o,l,f,v){var b,g,m={},_=i.length,M=f.length,x=new Array(_),y;for(b=0;b<_;++b)(g=i[b])&&(x[b]=y=c+v.call(g,g.__data__,b,i),y in m?l[b]=g:m[y]=g);for(b=0;b<M;++b)y=c+v.call(n,f[b],b,f),(g=m[y])?(o[b]=g,g.__data__=f[b],m[y]=null):a[b]=new u.b(n,f[b]);for(b=0;b<_;++b)(g=i[b])&&m[x[b]]===g&&(l[b]=g)}T.a=function(n,i){if(!n)return y=new Array(this.size()),m=-1,this.each(function(G){y[++m]=G}),y;var a=i?h:r,o=this._parents,l=this._groups;typeof n!="function"&&(n=e.i(s.a)(n));for(var f=l.length,v=new Array(f),b=new Array(f),g=new Array(f),m=0;m<f;++m){var _=o[m],M=l[m],x=M.length,y=n.call(_,_&&_.__data__,m,o),S=y.length,P=b[m]=new Array(S),A=v[m]=new Array(S),O=g[m]=new Array(x);a(_,M,P,A,O,y,i);for(var L=0,H=0,F,K;L<S;++L)if(F=P[L]){for(L>=H&&(H=L+1);!(K=A[H])&&++H<S;);F._next=K||null}}return v=new t.b(v,o),v._enter=b,v._exit=g,v}},function(E,T,e){"use strict";T.a=function(t){return arguments.length?this.property("__data__",t):this.node().__data__}},function(E,T,e){"use strict";var t=e(102);function u(r,h,n){var i=e.i(t.a)(r),a=i.CustomEvent;typeof a=="function"?a=new a(h,n):(a=i.document.createEvent("Event"),n?(a.initEvent(h,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(h,!1,!1)),r.dispatchEvent(a)}function s(r,h){return function(){return u(this,r,h)}}function c(r,h){return function(){return u(this,r,h.apply(this,arguments))}}T.a=function(r,h){return this.each((typeof h=="function"?c:s)(r,h))}},function(E,T,e){"use strict";T.a=function(t){for(var u=this._groups,s=0,c=u.length;s<c;++s)for(var r=u[s],h=0,n=r.length,i;h<n;++h)(i=r[h])&&t.call(i,i.__data__,h,r);return this}},function(E,T,e){"use strict";T.a=function(){return!this.node()}},function(E,T,e){"use strict";var t=e(217),u=e(18);T.a=function(){return new u.b(this._exit||this._groups.map(t.a),this._parents)}},function(E,T,e){"use strict";var t=e(18),u=e(214);T.a=function(s){typeof s!="function"&&(s=e.i(u.a)(s));for(var c=this._groups,r=c.length,h=new Array(r),n=0;n<r;++n)for(var i=c[n],a=i.length,o=h[n]=[],l,f=0;f<a;++f)(l=i[f])&&s.call(l,l.__data__,f,i)&&o.push(l);return new t.b(h,this._parents)}},function(E,T,e){"use strict";function t(){this.innerHTML=""}function u(c){return function(){this.innerHTML=c}}function s(c){return function(){var r=c.apply(this,arguments);this.innerHTML=r==null?"":r}}T.a=function(c){return arguments.length?this.each(c==null?t:(typeof c=="function"?s:u)(c)):this.node().innerHTML}},function(E,T,e){"use strict";var t=e(61),u=e(100);function s(){return null}T.a=function(c,r){var h=typeof c=="function"?c:e.i(t.a)(c),n=r==null?s:typeof r=="function"?r:e.i(u.a)(r);return this.select(function(){return this.insertBefore(h.apply(this,arguments),n.apply(this,arguments)||null)})}},function(E,T,e){"use strict";T.a=function(t,u,s){var c=this.enter(),r=this,h=this.exit();return c=typeof t=="function"?t(c):c.append(t+""),u!=null&&(r=u(r)),s==null?h.remove():s(h),c&&r?c.merge(r).order():r}},function(E,T,e){"use strict";function t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";var t=e(18);T.a=function(u){for(var s=this._groups,c=u._groups,r=s.length,h=c.length,n=Math.min(r,h),i=new Array(r),a=0;a<n;++a)for(var o=s[a],l=c[a],f=o.length,v=i[a]=new Array(f),b,g=0;g<f;++g)(b=o[g]||l[g])&&(v[g]=b);for(;a<r;++a)i[a]=s[a];return new t.b(i,this._parents)}},function(E,T,e){"use strict";T.a=function(){for(var t=this._groups,u=0,s=t.length;u<s;++u)for(var c=t[u],r=0,h=c.length;r<h;++r){var n=c[r];if(n)return n}return null}},function(E,T,e){"use strict";T.a=function(){var t=new Array(this.size()),u=-1;return this.each(function(){t[++u]=this}),t}},function(E,T,e){"use strict";T.a=function(){for(var t=this._groups,u=-1,s=t.length;++u<s;)for(var c=t[u],r=c.length-1,h=c[r],n;--r>=0;)(n=c[r])&&(h&&n.compareDocumentPosition(h)^4&&h.parentNode.insertBefore(n,h),h=n);return this}},function(E,T,e){"use strict";function t(c){return function(){delete this[c]}}function u(c,r){return function(){this[c]=r}}function s(c,r){return function(){var h=r.apply(this,arguments);h==null?delete this[c]:this[c]=h}}T.a=function(c,r){return arguments.length>1?this.each((r==null?t:typeof r=="function"?s:u)(c,r)):this.node()[c]}},function(E,T,e){"use strict";function t(){this.nextSibling&&this.parentNode.appendChild(this)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";function t(){var u=this.parentNode;u&&u.removeChild(this)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";var t=e(18),u=e(100);T.a=function(s){typeof s!="function"&&(s=e.i(u.a)(s));for(var c=this._groups,r=c.length,h=new Array(r),n=0;n<r;++n)for(var i=c[n],a=i.length,o=h[n]=new Array(a),l,f,v=0;v<a;++v)(l=i[v])&&(f=s.call(l,l.__data__,v,i))&&("__data__"in l&&(f.__data__=l.__data__),o[v]=f);return new t.b(h,this._parents)}},function(E,T,e){"use strict";var t=e(18),u=e(219);T.a=function(s){typeof s!="function"&&(s=e.i(u.a)(s));for(var c=this._groups,r=c.length,h=[],n=[],i=0;i<r;++i)for(var a=c[i],o=a.length,l,f=0;f<o;++f)(l=a[f])&&(h.push(s.call(l,l.__data__,f,a)),n.push(l));return new t.b(h,n)}},function(E,T,e){"use strict";T.a=function(){var t=0;return this.each(function(){++t}),t}},function(E,T,e){"use strict";var t=e(18);T.a=function(s){s||(s=u);function c(b,g){return b&&g?s(b.__data__,g.__data__):!b-!g}for(var r=this._groups,h=r.length,n=new Array(h),i=0;i<h;++i){for(var a=r[i],o=a.length,l=n[i]=new Array(o),f,v=0;v<o;++v)(f=a[v])&&(l[v]=f);l.sort(c)}return new t.b(n,this._parents).order()};function u(s,c){return s<c?-1:s>c?1:s>=c?0:NaN}},function(E,T,e){"use strict";function t(){this.textContent=""}function u(c){return function(){this.textContent=c}}function s(c){return function(){var r=c.apply(this,arguments);this.textContent=r==null?"":r}}T.a=function(c){return arguments.length?this.each(c==null?t:(typeof c=="function"?s:u)(c)):this.node().textContent}},function(E,T,e){"use strict";var t=e(101),u=e(62);T.a=function(s,c,r){arguments.length<3&&(r=c,c=e.i(t.a)().changedTouches);for(var h=0,n=c?c.length:0,i;h<n;++h)if((i=c[h]).identifier===r)return e.i(u.a)(s,i);return null}},function(E,T,e){"use strict";var t=e(101),u=e(62);T.a=function(s,c){c==null&&(c=e.i(t.a)().touches);for(var r=0,h=c?c.length:0,n=new Array(h);r<h;++r)n[r]=e.i(u.a)(s,c[r]);return n}},function(E,T,e){"use strict";var t=e(104);T.a=function(u,s,c){var r=new t.d,h=s;return s==null?(r.restart(u,s,c),r):(s=+s,c=c==null?e.i(t.a)():+c,r.restart(function n(i){i+=h,r.restart(n,h+=s,c),u(i)},s,c),r)}},function(E,T,e){"use strict";var t=e(104);T.a=function(u,s,c){var r=new t.d;return s=s==null?0:+s,r.restart(function(h){r.stop(),u(h+s)},s,c),r}},function(E,T,e){"use strict";var t=e(27),u=e(13),s=[null];T.a=function(c,r){var h=c.__transition,n,i;if(h){r=r==null?null:r+"";for(i in h)if((n=h[i]).state>u.d&&n.name===r)return new t.b([[c]],s,r,+i)}return null}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(516),u=e(27);e.d(T,"transition",function(){return u.a});var s=e(514);e.d(T,"active",function(){return s.a});var c=e(220);e.d(T,"interrupt",function(){return c.a})},function(E,T,e){"use strict";var t=e(22),u=e(517),s=e(518);t.selection.prototype.interrupt=u.a,t.selection.prototype.transition=s.a},function(E,T,e){"use strict";var t=e(220);T.a=function(u){return this.each(function(){e.i(t.a)(this,u)})}},function(E,T,e){"use strict";var t=e(27),u=e(13),s=e(199),c=e(103),r={time:null,delay:0,duration:250,ease:s.easeCubicInOut};function h(n,i){for(var a;!(a=n.__transition)||!(a=a[i]);)if(!(n=n.parentNode))return r.time=e.i(c.now)(),r;return a}T.a=function(n){var i,a;n instanceof t.b?(i=n._id,n=n._name):(i=e.i(t.c)(),(a=r).time=e.i(c.now)(),n=n==null?null:n+"");for(var o=this._groups,l=o.length,f=0;f<l;++f)for(var v=o[f],b=v.length,g,m=0;m<b;++m)(g=v[m])&&e.i(u.h)(g,n,i,m,v,a||h(g,i));return new t.b(o,this._parents,n,i)}},function(E,T,e){"use strict";var t=e(94),u=e(22),s=e(63),c=e(221);function r(l){return function(){this.removeAttribute(l)}}function h(l){return function(){this.removeAttributeNS(l.space,l.local)}}function n(l,f,v){var b,g=v+"",m;return function(){var _=this.getAttribute(l);return _===g?null:_===b?m:m=f(b=_,v)}}function i(l,f,v){var b,g=v+"",m;return function(){var _=this.getAttributeNS(l.space,l.local);return _===g?null:_===b?m:m=f(b=_,v)}}function a(l,f,v){var b,g,m;return function(){var _,M=v(this),x;return M==null?void this.removeAttribute(l):(_=this.getAttribute(l),x=M+"",_===x?null:_===b&&x===g?m:(g=x,m=f(b=_,M)))}}function o(l,f,v){var b,g,m;return function(){var _,M=v(this),x;return M==null?void this.removeAttributeNS(l.space,l.local):(_=this.getAttributeNS(l.space,l.local),x=M+"",_===x?null:_===b&&x===g?m:(g=x,m=f(b=_,M)))}}T.a=function(l,f){var v=e.i(u.namespace)(l),b=v==="transform"?t.e:c.a;return this.attrTween(l,typeof f=="function"?(v.local?o:a)(v,b,e.i(s.b)(this,"attr."+l,f)):f==null?(v.local?h:r)(v):(v.local?i:n)(v,b,f))}},function(E,T,e){"use strict";var t=e(22);function u(h,n){return function(i){this.setAttribute(h,n.call(this,i))}}function s(h,n){return function(i){this.setAttributeNS(h.space,h.local,n.call(this,i))}}function c(h,n){var i,a;function o(){var l=n.apply(this,arguments);return l!==a&&(i=(a=l)&&s(h,l)),i}return o._value=n,o}function r(h,n){var i,a;function o(){var l=n.apply(this,arguments);return l!==a&&(i=(a=l)&&u(h,l)),i}return o._value=n,o}T.a=function(h,n){var i="attr."+h;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;var a=e.i(t.namespace)(h);return this.tween(i,(a.local?c:r)(a,n))}},function(E,T,e){"use strict";var t=e(13);function u(c,r){return function(){e.i(t.g)(this,c).delay=+r.apply(this,arguments)}}function s(c,r){return r=+r,function(){e.i(t.g)(this,c).delay=r}}T.a=function(c){var r=this._id;return arguments.length?this.each((typeof c=="function"?u:s)(r,c)):e.i(t.f)(this.node(),r).delay}},function(E,T,e){"use strict";var t=e(13);function u(c,r){return function(){e.i(t.e)(this,c).duration=+r.apply(this,arguments)}}function s(c,r){return r=+r,function(){e.i(t.e)(this,c).duration=r}}T.a=function(c){var r=this._id;return arguments.length?this.each((typeof c=="function"?u:s)(r,c)):e.i(t.f)(this.node(),r).duration}},function(E,T,e){"use strict";var t=e(13);function u(s,c){if(typeof c!="function")throw new Error;return function(){e.i(t.e)(this,s).ease=c}}T.a=function(s){var c=this._id;return arguments.length?this.each(u(c,s)):e.i(t.f)(this.node(),c).ease}},function(E,T,e){"use strict";var t=e(13);T.a=function(){var u,s,c=this,r=c._id,h=c.size();return new Promise(function(n,i){var a={value:i},o={value:function(){--h==0&&n()}};c.each(function(){var l=e.i(t.e)(this,r),f=l.on;f!==u&&(s=(u=f).copy(),s._.cancel.push(a),s._.interrupt.push(a),s._.end.push(o)),l.on=s})})}},function(E,T,e){"use strict";var t=e(22),u=e(27);T.a=function(s){typeof s!="function"&&(s=e.i(t.matcher)(s));for(var c=this._groups,r=c.length,h=new Array(r),n=0;n<r;++n)for(var i=c[n],a=i.length,o=h[n]=[],l,f=0;f<a;++f)(l=i[f])&&s.call(l,l.__data__,f,i)&&o.push(l);return new u.b(h,this._parents,this._name,this._id)}},function(E,T,e){"use strict";var t=e(27);T.a=function(u){if(u._id!==this._id)throw new Error;for(var s=this._groups,c=u._groups,r=s.length,h=c.length,n=Math.min(r,h),i=new Array(r),a=0;a<n;++a)for(var o=s[a],l=c[a],f=o.length,v=i[a]=new Array(f),b,g=0;g<f;++g)(b=o[g]||l[g])&&(v[g]=b);for(;a<r;++a)i[a]=s[a];return new t.b(i,this._parents,this._name,this._id)}},function(E,T,e){"use strict";var t=e(13);function u(c){return(c+"").trim().split(/^|\s+/).every(function(r){var h=r.indexOf(".");return h>=0&&(r=r.slice(0,h)),!r||r==="start"})}function s(c,r,h){var n,i,a=u(r)?t.g:t.e;return function(){var o=a(this,c),l=o.on;l!==n&&(i=(n=l).copy()).on(r,h),o.on=i}}T.a=function(c,r){var h=this._id;return arguments.length<2?e.i(t.f)(this.node(),h).on.on(c):this.each(s(h,c,r))}},function(E,T,e){"use strict";function t(u){return function(){var s=this.parentNode;for(var c in this.__transition)if(+c!==u)return;s&&s.removeChild(this)}}T.a=function(){return this.on("end.remove",t(this._id))}},function(E,T,e){"use strict";var t=e(22),u=e(27),s=e(13);T.a=function(c){var r=this._name,h=this._id;typeof c!="function"&&(c=e.i(t.selector)(c));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var l=n[o],f=l.length,v=a[o]=new Array(f),b,g,m=0;m<f;++m)(b=l[m])&&(g=c.call(b,b.__data__,m,l))&&("__data__"in b&&(g.__data__=b.__data__),v[m]=g,e.i(s.h)(v[m],r,h,m,v,e.i(s.f)(b,h)));return new u.b(a,this._parents,r,h)}},function(E,T,e){"use strict";var t=e(22),u=e(27),s=e(13);T.a=function(c){var r=this._name,h=this._id;typeof c!="function"&&(c=e.i(t.selectorAll)(c));for(var n=this._groups,i=n.length,a=[],o=[],l=0;l<i;++l)for(var f=n[l],v=f.length,b,g=0;g<v;++g)if(b=f[g]){for(var m=c.call(b,b.__data__,g,f),_,M=e.i(s.f)(b,h),x=0,y=m.length;x<y;++x)(_=m[x])&&e.i(s.h)(_,r,h,x,m,M);a.push(m),o.push(b)}return new u.b(a,o,r,h)}},function(E,T,e){"use strict";var t=e(22),u=t.selection.prototype.constructor;T.a=function(){return new u(this._groups,this._parents)}},function(E,T,e){"use strict";var t=e(94),u=e(22),s=e(13),c=e(63),r=e(221);function h(l,f){var v,b,g;return function(){var m=e.i(u.style)(this,l),_=(this.style.removeProperty(l),e.i(u.style)(this,l));return m===_?null:m===v&&_===b?g:g=f(v=m,b=_)}}function n(l){return function(){this.style.removeProperty(l)}}function i(l,f,v){var b,g=v+"",m;return function(){var _=e.i(u.style)(this,l);return _===g?null:_===b?m:m=f(b=_,v)}}function a(l,f,v){var b,g,m;return function(){var _=e.i(u.style)(this,l),M=v(this),x=M+"";return M==null&&(x=M=(this.style.removeProperty(l),e.i(u.style)(this,l))),_===x?null:_===b&&x===g?m:(g=x,m=f(b=_,M))}}function o(l,f){var v,b,g,m="style."+f,_="end."+m,M;return function(){var x=e.i(s.e)(this,l),y=x.on,S=x.value[m]==null?M||(M=n(f)):void 0;(y!==v||g!==S)&&(b=(v=y).copy()).on(_,g=S),x.on=b}}T.a=function(l,f,v){var b=(l+="")==="transform"?t.a:r.a;return f==null?this.styleTween(l,h(l,b)).on("end.style."+l,n(l)):typeof f=="function"?this.styleTween(l,a(l,b,e.i(c.b)(this,"style."+l,f))).each(o(this._id,l)):this.styleTween(l,i(l,b,f),v).on("end.style."+l,null)}},function(E,T,e){"use strict";function t(s,c,r){return function(h){this.style.setProperty(s,c.call(this,h),r)}}function u(s,c,r){var h,n;function i(){var a=c.apply(this,arguments);return a!==n&&(h=(n=a)&&t(s,a,r)),h}return i._value=c,i}T.a=function(s,c,r){var h="style."+(s+="");if(arguments.length<2)return(h=this.tween(h))&&h._value;if(c==null)return this.tween(h,null);if(typeof c!="function")throw new Error;return this.tween(h,u(s,c,r==null?"":r))}},function(E,T,e){"use strict";var t=e(63);function u(c){return function(){this.textContent=c}}function s(c){return function(){var r=c(this);this.textContent=r==null?"":r}}T.a=function(c){return this.tween("text",typeof c=="function"?s(e.i(t.b)(this,"text",c)):u(c==null?"":c+""))}},function(E,T,e){"use strict";function t(s){return function(c){this.textContent=s.call(this,c)}}function u(s){var c,r;function h(){var n=s.apply(this,arguments);return n!==r&&(c=(r=n)&&t(n)),c}return h._value=s,h}T.a=function(s){var c="text";if(arguments.length<1)return(c=this.tween(c))&&c._value;if(s==null)return this.tween(c,null);if(typeof s!="function")throw new Error;return this.tween(c,u(s))}},function(E,T,e){"use strict";var t=e(27),u=e(13);T.a=function(){for(var s=this._name,c=this._id,r=e.i(t.c)(),h=this._groups,n=h.length,i=0;i<n;++i)for(var a=h[i],o=a.length,l,f=0;f<o;++f)if(l=a[f]){var v=e.i(u.f)(l,c);e.i(u.h)(l,s,r,f,a,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new t.b(h,this._parents,s,r)}},function(E,T,e){"use strict";var t=function(u,s,c,r,h,n,i,a){if(s===void 0)throw new Error("invariant requires an error message argument");if(!u){var o;if(s===void 0)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[c,r,h,n,i,a],f=0;o=new Error(s.replace(/%s/g,function(){return l[f++]})),o.name="Invariant Violation"}throw o.framesToPop=1,o}};E.exports=t},function(E,T,e){(function(t){var u="Expected a function",s=0/0,c="[object Symbol]",r=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt,o=typeof t=="object"&&t&&t.Object===Object&&t,l=typeof self=="object"&&self&&self.Object===Object&&self,f=o||l||Function("return this")(),v=Object.prototype,b=v.toString,g=Math.max,m=Math.min,_=function(){return f.Date.now()};function M(A,O,L){var H,F,K,G,U,Z,J=0,rt=!1,vt=!1,mt=!0;if(typeof A!="function")throw new TypeError(u);O=P(O)||0,x(L)&&(rt=!!L.leading,vt="maxWait"in L,K=vt?g(P(L.maxWait)||0,O):K,mt="trailing"in L?!!L.trailing:mt);function ut(z){var q=H,gt=F;return H=F=void 0,J=z,G=A.apply(gt,q),G}function Rt(z){return J=z,U=setTimeout(Mt,O),rt?ut(z):G}function Ft(z){var q=z-Z,gt=z-J,et=O-q;return vt?m(et,K-gt):et}function wt(z){var q=z-Z,gt=z-J;return Z===void 0||q>=O||q<0||vt&&gt>=K}function Mt(){var z=_();if(wt(z))return St(z);U=setTimeout(Mt,Ft(z))}function St(z){return U=void 0,mt&&H?ut(z):(H=F=void 0,G)}function At(){U!==void 0&&clearTimeout(U),J=0,H=Z=F=U=void 0}function nt(){return U===void 0?G:St(_())}function Pt(){var z=_(),q=wt(z);if(H=arguments,F=this,Z=z,q){if(U===void 0)return Rt(Z);if(vt)return U=setTimeout(Mt,O),ut(Z)}return U===void 0&&(U=setTimeout(Mt,O)),G}return Pt.cancel=At,Pt.flush=nt,Pt}function x(A){var O=typeof A;return!!A&&(O=="object"||O=="function")}function y(A){return!!A&&typeof A=="object"}function S(A){return typeof A=="symbol"||y(A)&&b.call(A)==c}function P(A){if(typeof A=="number")return A;if(S(A))return s;if(x(A)){var O=typeof A.valueOf=="function"?A.valueOf():A;A=x(O)?O+"":O}if(typeof A!="string")return A===0?A:+A;A=A.replace(r,"");var L=n.test(A);return L||i.test(A)?a(A.slice(2),L?2:8):h.test(A)?s:+A}E.exports=M}).call(T,e(225))},function(E,T,e){"use strict";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var t=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function c(h){if(h==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(h)}function r(){try{if(!Object.assign)return!1;var h=new String("abc");if(h[5]="de",Object.getOwnPropertyNames(h)[0]==="5")return!1;for(var n={},i=0;i<10;i++)n["_"+String.fromCharCode(i)]=i;var a=Object.getOwnPropertyNames(n).map(function(l){return n[l]});if(a.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(l){o[l]=l}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch(l){return!1}}E.exports=r()?Object.assign:function(h,n){for(var i,a=c(h),o,l=1;l<arguments.length;l++){i=Object(arguments[l]);for(var f in i)u.call(i,f)&&(a[f]=i[f]);if(t){o=t(i);for(var v=0;v<o.length;v++)s.call(i,o[v])&&(a[o[v]]=i[o[v]])}}return a}},function(E,T,e){"use strict";var t=function(){},u=e(223),s={},c=Function.call.bind(Object.prototype.hasOwnProperty);t=function(h){var n="Warning: "+h;typeof console!="undefined"&&console.error(n);try{throw new Error(n)}catch(i){}};function r(h,n,i,a,o){for(var l in h)if(c(h,l)){var f;try{if(typeof h[l]!="function"){var v=Error((a||"React class")+": "+i+" type `"+l+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof h[l]+"`.");throw v.name="Invariant Violation",v}f=h[l](n,l,a,i,null,u)}catch(g){f=g}if(f&&!(f instanceof Error)&&t((a||"React class")+": type specification of "+i+" `"+l+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof f+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),f instanceof Error&&!(f.message in s)){s[f.message]=!0;var b=o?o():"";t("Failed "+i+" type: "+f.message+(b!=null?b:""))}}}r.resetWarningCache=function(){s={}},E.exports=r},function(E,T,e){"use strict";var t=e(224),u=e(539),s=e(223),c=e(540),r=Function.call.bind(Object.prototype.hasOwnProperty),h=function(){};h=function(i){var a="Warning: "+i;typeof console!="undefined"&&console.error(a);try{throw new Error(a)}catch(o){}};function n(){return null}E.exports=function(i,a){var o=typeof Symbol=="function"&&Symbol.iterator,l="@@iterator";function f(ut){var Rt=ut&&(o&&ut[o]||ut[l]);if(typeof Rt=="function")return Rt}var v="<<anonymous>>",b={array:M("array"),bool:M("boolean"),func:M("function"),number:M("number"),object:M("object"),string:M("string"),symbol:M("symbol"),any:x(),arrayOf:y,element:S(),elementType:P(),instanceOf:A,node:F(),objectOf:L,oneOf:O,oneOfType:H,shape:K,exact:G};function g(ut,Rt){return ut===Rt?ut!==0||1/ut==1/Rt:ut!==ut&&Rt!==Rt}function m(ut){this.message=ut,this.stack=""}m.prototype=Error.prototype;function _(ut){var Rt={},Ft=0;function wt(St,At,nt,Pt,z,q,gt){if(Pt=Pt||v,q=q||nt,gt!==s){if(a){var et=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw et.name="Invariant Violation",et}else if(typeof console!="undefined"){var at=Pt+":"+nt;!Rt[at]&&Ft<3&&(h("You are manually calling a React.PropTypes validation function for the `"+q+"` prop on `"+Pt+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),Rt[at]=!0,Ft++)}}return At[nt]==null?St?At[nt]===null?new m("The "+z+" `"+q+"` is marked as required "+("in `"+Pt+"`, but its value is `null`.")):new m("The "+z+" `"+q+"` is marked as required in "+("`"+Pt+"`, but its value is `undefined`.")):null:ut(At,nt,Pt,z,q)}var Mt=wt.bind(null,!1);return Mt.isRequired=wt.bind(null,!0),Mt}function M(ut){function Rt(Ft,wt,Mt,St,At,nt){var Pt=Ft[wt],z=J(Pt);if(z!==ut){var q=rt(Pt);return new m("Invalid "+St+" `"+At+"` of type "+("`"+q+"` supplied to `"+Mt+"`, expected ")+("`"+ut+"`."))}return null}return _(Rt)}function x(){return _(n)}function y(ut){function Rt(Ft,wt,Mt,St,At){if(typeof ut!="function")return new m("Property `"+At+"` of component `"+Mt+"` has invalid PropType notation inside arrayOf.");var nt=Ft[wt];if(!Array.isArray(nt)){var Pt=J(nt);return new m("Invalid "+St+" `"+At+"` of type "+("`"+Pt+"` supplied to `"+Mt+"`, expected an array."))}for(var z=0;z<nt.length;z++){var q=ut(nt,z,Mt,St,At+"["+z+"]",s);if(q instanceof Error)return q}return null}return _(Rt)}function S(){function ut(Rt,Ft,wt,Mt,St){var At=Rt[Ft];if(!i(At)){var nt=J(At);return new m("Invalid "+Mt+" `"+St+"` of type "+("`"+nt+"` supplied to `"+wt+"`, expected a single ReactElement."))}return null}return _(ut)}function P(){function ut(Rt,Ft,wt,Mt,St){var At=Rt[Ft];if(!t.isValidElementType(At)){var nt=J(At);return new m("Invalid "+Mt+" `"+St+"` of type "+("`"+nt+"` supplied to `"+wt+"`, expected a single ReactElement type."))}return null}return _(ut)}function A(ut){function Rt(Ft,wt,Mt,St,At){if(!(Ft[wt]instanceof ut)){var nt=ut.name||v,Pt=mt(Ft[wt]);return new m("Invalid "+St+" `"+At+"` of type "+("`"+Pt+"` supplied to `"+Mt+"`, expected ")+("instance of `"+nt+"`."))}return null}return _(Rt)}function O(ut){if(!Array.isArray(ut))return arguments.length>1?h("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):h("Invalid argument supplied to oneOf, expected an array."),n;function Rt(Ft,wt,Mt,St,At){for(var nt=Ft[wt],Pt=0;Pt<ut.length;Pt++)if(g(nt,ut[Pt]))return null;var z=JSON.stringify(ut,function(gt,et){var at=rt(et);return at==="symbol"?String(et):et});return new m("Invalid "+St+" `"+At+"` of value `"+String(nt)+"` "+("supplied to `"+Mt+"`, expected one of "+z+"."))}return _(Rt)}function L(ut){function Rt(Ft,wt,Mt,St,At){if(typeof ut!="function")return new m("Property `"+At+"` of component `"+Mt+"` has invalid PropType notation inside objectOf.");var nt=Ft[wt],Pt=J(nt);if(Pt!=="object")return new m("Invalid "+St+" `"+At+"` of type "+("`"+Pt+"` supplied to `"+Mt+"`, expected an object."));for(var z in nt)if(r(nt,z)){var q=ut(nt,z,Mt,St,At+"."+z,s);if(q instanceof Error)return q}return null}return _(Rt)}function H(ut){if(!Array.isArray(ut))return h("Invalid argument supplied to oneOfType, expected an instance of array."),n;for(var Rt=0;Rt<ut.length;Rt++){var Ft=ut[Rt];if(typeof Ft!="function")return h("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+vt(Ft)+" at index "+Rt+"."),n}function wt(Mt,St,At,nt,Pt){for(var z=0;z<ut.length;z++){var q=ut[z];if(q(Mt,St,At,nt,Pt,s)==null)return null}return new m("Invalid "+nt+" `"+Pt+"` supplied to "+("`"+At+"`."))}return _(wt)}function F(){function ut(Rt,Ft,wt,Mt,St){return U(Rt[Ft])?null:new m("Invalid "+Mt+" `"+St+"` supplied to "+("`"+wt+"`, expected a ReactNode."))}return _(ut)}function K(ut){function Rt(Ft,wt,Mt,St,At){var nt=Ft[wt],Pt=J(nt);if(Pt!=="object")return new m("Invalid "+St+" `"+At+"` of type `"+Pt+"` "+("supplied to `"+Mt+"`, expected `object`."));for(var z in ut){var q=ut[z];if(!!q){var gt=q(nt,z,Mt,St,At+"."+z,s);if(gt)return gt}}return null}return _(Rt)}function G(ut){function Rt(Ft,wt,Mt,St,At){var nt=Ft[wt],Pt=J(nt);if(Pt!=="object")return new m("Invalid "+St+" `"+At+"` of type `"+Pt+"` "+("supplied to `"+Mt+"`, expected `object`."));var z=u({},Ft[wt],ut);for(var q in z){var gt=ut[q];if(!gt)return new m("Invalid "+St+" `"+At+"` key `"+q+"` supplied to `"+Mt+"`.\nBad object: "+JSON.stringify(Ft[wt],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(ut),null,"  "));var et=gt(nt,q,Mt,St,At+"."+q,s);if(et)return et}return null}return _(Rt)}function U(ut){switch(typeof ut){case"number":case"string":case"undefined":return!0;case"boolean":return!ut;case"object":if(Array.isArray(ut))return ut.every(U);if(ut===null||i(ut))return!0;var Rt=f(ut);if(Rt){var Ft=Rt.call(ut),wt;if(Rt!==ut.entries){for(;!(wt=Ft.next()).done;)if(!U(wt.value))return!1}else for(;!(wt=Ft.next()).done;){var Mt=wt.value;if(Mt&&!U(Mt[1]))return!1}}else return!1;return!0;default:return!1}}function Z(ut,Rt){return ut==="symbol"?!0:Rt?Rt["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&Rt instanceof Symbol:!1}function J(ut){var Rt=typeof ut;return Array.isArray(ut)?"array":ut instanceof RegExp?"object":Z(Rt,ut)?"symbol":Rt}function rt(ut){if(typeof ut=="undefined"||ut===null)return""+ut;var Rt=J(ut);if(Rt==="object"){if(ut instanceof Date)return"date";if(ut instanceof RegExp)return"regexp"}return Rt}function vt(ut){var Rt=rt(ut);switch(Rt){case"array":case"object":return"an "+Rt;case"boolean":case"date":case"regexp":return"a "+Rt;default:return Rt}}function mt(ut){return!ut.constructor||!ut.constructor.name?v:ut.constructor.name}return b.checkPropTypes=c,b.resetWarningCache=c.resetWarningCache,b.PropTypes=b,b}},function(E,T,e){"use strict";/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){"use strict";var t=typeof Symbol=="function"&&Symbol.for,u=t?Symbol.for("react.element"):60103,s=t?Symbol.for("react.portal"):60106,c=t?Symbol.for("react.fragment"):60107,r=t?Symbol.for("react.strict_mode"):60108,h=t?Symbol.for("react.profiler"):60114,n=t?Symbol.for("react.provider"):60109,i=t?Symbol.for("react.context"):60110,a=t?Symbol.for("react.async_mode"):60111,o=t?Symbol.for("react.concurrent_mode"):60111,l=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,v=t?Symbol.for("react.suspense_list"):60120,b=t?Symbol.for("react.memo"):60115,g=t?Symbol.for("react.lazy"):60116,m=t?Symbol.for("react.block"):60121,_=t?Symbol.for("react.fundamental"):60117,M=t?Symbol.for("react.responder"):60118,x=t?Symbol.for("react.scope"):60119;function y(at){return typeof at=="string"||typeof at=="function"||at===c||at===o||at===h||at===r||at===f||at===v||typeof at=="object"&&at!==null&&(at.$$typeof===g||at.$$typeof===b||at.$$typeof===n||at.$$typeof===i||at.$$typeof===l||at.$$typeof===_||at.$$typeof===M||at.$$typeof===x||at.$$typeof===m)}function S(at){if(typeof at=="object"&&at!==null){var xt=at.$$typeof;switch(xt){case u:var k=at.type;switch(k){case a:case o:case c:case h:case r:case f:return k;default:var ot=k&&k.$$typeof;switch(ot){case i:case l:case g:case b:case n:return ot;default:return xt}}case s:return xt}}}var P=a,A=o,O=i,L=n,H=u,F=l,K=c,G=g,U=b,Z=s,J=h,rt=r,vt=f,mt=!1;function ut(at){return mt||(mt=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),Rt(at)||S(at)===a}function Rt(at){return S(at)===o}function Ft(at){return S(at)===i}function wt(at){return S(at)===n}function Mt(at){return typeof at=="object"&&at!==null&&at.$$typeof===u}function St(at){return S(at)===l}function At(at){return S(at)===c}function nt(at){return S(at)===g}function Pt(at){return S(at)===b}function z(at){return S(at)===s}function q(at){return S(at)===h}function gt(at){return S(at)===r}function et(at){return S(at)===f}T.AsyncMode=P,T.ConcurrentMode=A,T.ContextConsumer=O,T.ContextProvider=L,T.Element=H,T.ForwardRef=F,T.Fragment=K,T.Lazy=G,T.Memo=U,T.Portal=Z,T.Profiler=J,T.StrictMode=rt,T.Suspense=vt,T.isAsyncMode=ut,T.isConcurrentMode=Rt,T.isContextConsumer=Ft,T.isContextProvider=wt,T.isElement=Mt,T.isForwardRef=St,T.isFragment=At,T.isLazy=nt,T.isMemo=Pt,T.isPortal=z,T.isProfiler=q,T.isStrictMode=gt,T.isSuspense=et,T.isValidElementType=y,T.typeOf=S})()},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),function(t){var u=function(){if(typeof Map!="undefined")return Map;function Z(J,rt){var vt=-1;return J.some(function(mt,ut){return mt[0]===rt?(vt=ut,!0):!1}),vt}return function(){function J(){this.__entries__=[]}return Object.defineProperty(J.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),J.prototype.get=function(rt){var vt=Z(this.__entries__,rt),mt=this.__entries__[vt];return mt&&mt[1]},J.prototype.set=function(rt,vt){var mt=Z(this.__entries__,rt);~mt?this.__entries__[mt][1]=vt:this.__entries__.push([rt,vt])},J.prototype.delete=function(rt){var vt=this.__entries__,mt=Z(vt,rt);~mt&&vt.splice(mt,1)},J.prototype.has=function(rt){return!!~Z(this.__entries__,rt)},J.prototype.clear=function(){this.__entries__.splice(0)},J.prototype.forEach=function(rt,vt){vt===void 0&&(vt=null);for(var mt=0,ut=this.__entries__;mt<ut.length;mt++){var Rt=ut[mt];rt.call(vt,Rt[1],Rt[0])}},J}()}(),s=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,c=function(){return typeof t!="undefined"&&t.Math===Math?t:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),r=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(c):function(Z){return setTimeout(function(){return Z(Date.now())},1e3/60)}}(),h=2;function n(Z,J){var rt=!1,vt=!1,mt=0;function ut(){rt&&(rt=!1,Z()),vt&&Ft()}function Rt(){r(ut)}function Ft(){var wt=Date.now();if(rt){if(wt-mt<h)return;vt=!0}else rt=!0,vt=!1,setTimeout(Rt,J);mt=wt}return Ft}var i=20,a=["top","right","bottom","left","width","height","size","weight"],o=typeof MutationObserver!="undefined",l=function(){function Z(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=n(this.refresh.bind(this),i)}return Z.prototype.addObserver=function(J){~this.observers_.indexOf(J)||this.observers_.push(J),this.connected_||this.connect_()},Z.prototype.removeObserver=function(J){var rt=this.observers_,vt=rt.indexOf(J);~vt&&rt.splice(vt,1),!rt.length&&this.connected_&&this.disconnect_()},Z.prototype.refresh=function(){var J=this.updateObservers_();J&&this.refresh()},Z.prototype.updateObservers_=function(){var J=this.observers_.filter(function(rt){return rt.gatherActive(),rt.hasActive()});return J.forEach(function(rt){return rt.broadcastActive()}),J.length>0},Z.prototype.connect_=function(){!s||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),o?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},Z.prototype.disconnect_=function(){!s||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},Z.prototype.onTransitionEnd_=function(J){var rt=J.propertyName,vt=rt===void 0?"":rt,mt=a.some(function(ut){return!!~vt.indexOf(ut)});mt&&this.refresh()},Z.getInstance=function(){return this.instance_||(this.instance_=new Z),this.instance_},Z.instance_=null,Z}(),f=function(Z,J){for(var rt=0,vt=Object.keys(J);rt<vt.length;rt++){var mt=vt[rt];Object.defineProperty(Z,mt,{value:J[mt],enumerable:!1,writable:!1,configurable:!0})}return Z},v=function(Z){var J=Z&&Z.ownerDocument&&Z.ownerDocument.defaultView;return J||c},b=O(0,0,0,0);function g(Z){return parseFloat(Z)||0}function m(Z){for(var J=[],rt=1;rt<arguments.length;rt++)J[rt-1]=arguments[rt];return J.reduce(function(vt,mt){var ut=Z["border-"+mt+"-width"];return vt+g(ut)},0)}function _(Z){for(var J=["top","right","bottom","left"],rt={},vt=0,mt=J;vt<mt.length;vt++){var ut=mt[vt],Rt=Z["padding-"+ut];rt[ut]=g(Rt)}return rt}function M(Z){var J=Z.getBBox();return O(0,0,J.width,J.height)}function x(Z){var J=Z.clientWidth,rt=Z.clientHeight;if(!J&&!rt)return b;var vt=v(Z).getComputedStyle(Z),mt=_(vt),ut=mt.left+mt.right,Rt=mt.top+mt.bottom,Ft=g(vt.width),wt=g(vt.height);if(vt.boxSizing==="border-box"&&(Math.round(Ft+ut)!==J&&(Ft-=m(vt,"left","right")+ut),Math.round(wt+Rt)!==rt&&(wt-=m(vt,"top","bottom")+Rt)),!S(Z)){var Mt=Math.round(Ft+ut)-J,St=Math.round(wt+Rt)-rt;Math.abs(Mt)!==1&&(Ft-=Mt),Math.abs(St)!==1&&(wt-=St)}return O(mt.left,mt.top,Ft,wt)}var y=function(){return typeof SVGGraphicsElement!="undefined"?function(Z){return Z instanceof v(Z).SVGGraphicsElement}:function(Z){return Z instanceof v(Z).SVGElement&&typeof Z.getBBox=="function"}}();function S(Z){return Z===v(Z).document.documentElement}function P(Z){return s?y(Z)?M(Z):x(Z):b}function A(Z){var J=Z.x,rt=Z.y,vt=Z.width,mt=Z.height,ut=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,Rt=Object.create(ut.prototype);return f(Rt,{x:J,y:rt,width:vt,height:mt,top:rt,right:J+vt,bottom:mt+rt,left:J}),Rt}function O(Z,J,rt,vt){return{x:Z,y:J,width:rt,height:vt}}var L=function(){function Z(J){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=O(0,0,0,0),this.target=J}return Z.prototype.isActive=function(){var J=P(this.target);return this.contentRect_=J,J.width!==this.broadcastWidth||J.height!==this.broadcastHeight},Z.prototype.broadcastRect=function(){var J=this.contentRect_;return this.broadcastWidth=J.width,this.broadcastHeight=J.height,J},Z}(),H=function(){function Z(J,rt){var vt=A(rt);f(this,{target:J,contentRect:vt})}return Z}(),F=function(){function Z(J,rt,vt){if(this.activeObservations_=[],this.observations_=new u,typeof J!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=J,this.controller_=rt,this.callbackCtx_=vt}return Z.prototype.observe=function(J){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(J instanceof v(J).Element))throw new TypeError('parameter 1 is not of type "Element".');var rt=this.observations_;rt.has(J)||(rt.set(J,new L(J)),this.controller_.addObserver(this),this.controller_.refresh())}},Z.prototype.unobserve=function(J){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(J instanceof v(J).Element))throw new TypeError('parameter 1 is not of type "Element".');var rt=this.observations_;!rt.has(J)||(rt.delete(J),rt.size||this.controller_.removeObserver(this))}},Z.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},Z.prototype.gatherActive=function(){var J=this;this.clearActive(),this.observations_.forEach(function(rt){rt.isActive()&&J.activeObservations_.push(rt)})},Z.prototype.broadcastActive=function(){if(!!this.hasActive()){var J=this.callbackCtx_,rt=this.activeObservations_.map(function(vt){return new H(vt.target,vt.broadcastRect())});this.callback_.call(J,rt,J),this.clearActive()}},Z.prototype.clearActive=function(){this.activeObservations_.splice(0)},Z.prototype.hasActive=function(){return this.activeObservations_.length>0},Z}(),K=typeof WeakMap!="undefined"?new WeakMap:new u,G=function(){function Z(J){if(!(this instanceof Z))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var rt=l.getInstance(),vt=new F(J,rt,this);K.set(this,vt)}return Z}();["observe","unobserve","disconnect"].forEach(function(Z){G.prototype[Z]=function(){var J;return(J=K.get(this))[Z].apply(J,arguments)}});var U=function(){return typeof c.ResizeObserver!="undefined"?c.ResizeObserver:G}();T.default=U}.call(T,e(225))},function(E,T,e){(function(t,u){u(T,e(22),e(515))})(this,function(t,u,s){"use strict";var c=1e-10;function r(et,at){var xt=n(et),k=xt.filter(function(on){return h(on,et)}),ot=0,it=0,$=[],_t;if(k.length>1){var yt=f(k);for(_t=0;_t<k.length;++_t){var Nt=k[_t];Nt.angle=Math.atan2(Nt.x-yt.x,Nt.y-yt.y)}k.sort(function(on,en){return en.angle-on.angle});var $t=k[k.length-1];for(_t=0;_t<k.length;++_t){var ee=k[_t];it+=($t.x+ee.x)*(ee.y-$t.y);for(var Gt={x:(ee.x+$t.x)/2,y:(ee.y+$t.y)/2},Ht=null,ae=0;ae<ee.parentIndex.length;++ae)if($t.parentIndex.indexOf(ee.parentIndex[ae])>-1){var le=et[ee.parentIndex[ae]],Be=Math.atan2(ee.x-le.x,ee.y-le.y),Ce=Math.atan2($t.x-le.x,$t.y-le.y),We=Ce-Be;We<0&&(We+=2*Math.PI);var Ye=Ce-We/2,wn=a(Gt,{x:le.x+le.radius*Math.sin(Ye),y:le.y+le.radius*Math.cos(Ye)});wn>le.radius*2&&(wn=le.radius*2),(Ht===null||Ht.width>wn)&&(Ht={circle:le,width:wn,p1:ee,p2:$t})}Ht!==null&&($.push(Ht),ot+=i(Ht.circle.radius,Ht.width),$t=ee)}}else{var er=et[0];for(_t=1;_t<et.length;++_t)et[_t].radius<er.radius&&(er=et[_t]);var Lr=!1;for(_t=0;_t<et.length;++_t)if(a(et[_t],er)>Math.abs(er.radius-et[_t].radius)){Lr=!0;break}Lr?ot=it=0:(ot=er.radius*er.radius*Math.PI,$.push({circle:er,p1:{x:er.x,y:er.y+er.radius},p2:{x:er.x-c,y:er.y+er.radius},width:er.radius*2}))}return it/=2,at&&(at.area=ot+it,at.arcArea=ot,at.polygonArea=it,at.arcs=$,at.innerPoints=k,at.intersectionPoints=xt),ot+it}function h(et,at){for(var xt=0;xt<at.length;++xt)if(a(et,at[xt])>at[xt].radius+c)return!1;return!0}function n(et){for(var at=[],xt=0;xt<et.length;++xt)for(var k=xt+1;k<et.length;++k)for(var ot=l(et[xt],et[k]),it=0;it<ot.length;++it){var $=ot[it];$.parentIndex=[xt,k],at.push($)}return at}function i(et,at){return et*et*Math.acos(1-at/et)-(et-at)*Math.sqrt(at*(2*et-at))}function a(et,at){return Math.sqrt((et.x-at.x)*(et.x-at.x)+(et.y-at.y)*(et.y-at.y))}function o(et,at,xt){if(xt>=et+at)return 0;if(xt<=Math.abs(et-at))return Math.PI*Math.min(et,at)*Math.min(et,at);var k=et-(xt*xt-at*at+et*et)/(2*xt),ot=at-(xt*xt-et*et+at*at)/(2*xt);return i(et,k)+i(at,ot)}function l(et,at){var xt=a(et,at),k=et.radius,ot=at.radius;if(xt>=k+ot||xt<=Math.abs(k-ot))return[];var it=(k*k-ot*ot+xt*xt)/(2*xt),$=Math.sqrt(k*k-it*it),_t=et.x+it*(at.x-et.x)/xt,yt=et.y+it*(at.y-et.y)/xt,Nt=-(at.y-et.y)*($/xt),$t=-(at.x-et.x)*($/xt);return[{x:_t+Nt,y:yt-$t},{x:_t-Nt,y:yt+$t}]}function f(et){for(var at={x:0,y:0},xt=0;xt<et.length;++xt)at.x+=et[xt].x,at.y+=et[xt].y;return at.x/=et.length,at.y/=et.length,at}function v(et,at,xt,k){k=k||{};var ot=k.maxIterations||100,it=k.tolerance||1e-10,$=et(at),_t=et(xt),yt=xt-at;if($*_t>0)throw"Initial bisect points must have opposite signs";if($===0)return at;if(_t===0)return xt;for(var Nt=0;Nt<ot;++Nt){yt/=2;var $t=at+yt,ee=et($t);if(ee*$>=0&&(at=$t),Math.abs(yt)<it||ee===0)return $t}return at+yt}function b(et){for(var at=new Array(et),xt=0;xt<et;++xt)at[xt]=0;return at}function g(et,at){return b(et).map(function(){return b(at)})}function m(et,at){for(var xt=0,k=0;k<et.length;++k)xt+=et[k]*at[k];return xt}function _(et){return Math.sqrt(m(et,et))}function M(et,at,xt){for(var k=0;k<at.length;++k)et[k]=at[k]*xt}function x(et,at,xt,k,ot){for(var it=0;it<et.length;++it)et[it]=at*xt[it]+k*ot[it]}function y(et,at,xt){xt=xt||{};var k=xt.maxIterations||at.length*200,ot=xt.nonZeroDelta||1.05,it=xt.zeroDelta||.001,$=xt.minErrorDelta||1e-6,_t=xt.minErrorDelta||1e-5,yt=xt.rho!==void 0?xt.rho:1,Nt=xt.chi!==void 0?xt.chi:2,$t=xt.psi!==void 0?xt.psi:-.5,ee=xt.sigma!==void 0?xt.sigma:.5,Gt,Ht=at.length,ae=new Array(Ht+1);ae[0]=at,ae[0].fx=et(at),ae[0].id=0;for(var le=0;le<Ht;++le){var Be=at.slice();Be[le]=Be[le]?Be[le]*ot:it,ae[le+1]=Be,ae[le+1].fx=et(Be),ae[le+1].id=le+1}function Ce(hi){for(var Ae=0;Ae<hi.length;Ae++)ae[Ht][Ae]=hi[Ae];ae[Ht].fx=hi.fx}for(var We=function(hi,Ae){return hi.fx-Ae.fx},Ye=at.slice(),wn=at.slice(),er=at.slice(),Lr=at.slice(),on=0;on<k;++on){if(ae.sort(We),xt.history){var en=ae.map(function(hi){var Ae=hi.slice();return Ae.fx=hi.fx,Ae.id=hi.id,Ae});en.sort(function(hi,Ae){return hi.id-Ae.id}),xt.history.push({x:ae[0].slice(),fx:ae[0].fx,simplex:en})}for(Gt=0,le=0;le<Ht;++le)Gt=Math.max(Gt,Math.abs(ae[0][le]-ae[1][le]));if(Math.abs(ae[0].fx-ae[Ht].fx)<$&&Gt<_t)break;for(le=0;le<Ht;++le){Ye[le]=0;for(var An=0;An<Ht;++An)Ye[le]+=ae[An][le];Ye[le]/=Ht}var Bn=ae[Ht];if(x(wn,1+yt,Ye,-yt,Bn),wn.fx=et(wn),wn.fx<ae[0].fx)x(Lr,1+Nt,Ye,-Nt,Bn),Lr.fx=et(Lr),Lr.fx<wn.fx?Ce(Lr):Ce(wn);else if(wn.fx>=ae[Ht-1].fx){var gr=!1;if(wn.fx>Bn.fx?(x(er,1+$t,Ye,-$t,Bn),er.fx=et(er),er.fx<Bn.fx?Ce(er):gr=!0):(x(er,1-$t*yt,Ye,$t*yt,Bn),er.fx=et(er),er.fx<wn.fx?Ce(er):gr=!0),gr){if(ee>=1)break;for(le=1;le<ae.length;++le)x(ae[le],1-ee,ae[0],ee,ae[le]),ae[le].fx=et(ae[le])}}else Ce(wn)}return ae.sort(We),{fx:ae[0].fx,x:ae[0]}}function S(et,at,xt,k,ot,it,$){var _t=xt.fx,yt=m(xt.fxprime,at),Nt=_t,$t=_t,ee=yt,Gt=0;ot=ot||1,it=it||1e-6,$=$||.1;function Ht(le,Be,Ce){for(var We=0;We<16;++We)if(ot=(le+Be)/2,x(k.x,1,xt.x,ot,at),Nt=k.fx=et(k.x,k.fxprime),ee=m(k.fxprime,at),Nt>_t+it*ot*yt||Nt>=Ce)Be=ot;else{if(Math.abs(ee)<=-$*yt)return ot;ee*(Be-le)>=0&&(Be=le),le=ot,Ce=Nt}return 0}for(var ae=0;ae<10;++ae){if(x(k.x,1,xt.x,ot,at),Nt=k.fx=et(k.x,k.fxprime),ee=m(k.fxprime,at),Nt>_t+it*ot*yt||ae&&Nt>=$t)return Ht(Gt,ot,$t);if(Math.abs(ee)<=-$*yt)return ot;if(ee>=0)return Ht(ot,Gt,Nt);$t=Nt,Gt=ot,ot*=2}return ot}function P(et,at,xt){var k={x:at.slice(),fx:0,fxprime:at.slice()},ot={x:at.slice(),fx:0,fxprime:at.slice()},it=at.slice(),$,_t,yt=1,Nt;xt=xt||{},Nt=xt.maxIterations||at.length*20,k.fx=et(k.x,k.fxprime),$=k.fxprime.slice(),M($,k.fxprime,-1);for(var $t=0;$t<Nt;++$t){if(yt=S(et,$,k,ot,yt),xt.history&&xt.history.push({x:k.x.slice(),fx:k.fx,fxprime:k.fxprime.slice(),alpha:yt}),!yt)M($,k.fxprime,-1);else{x(it,1,ot.fxprime,-1,k.fxprime);var ee=m(k.fxprime,k.fxprime),Gt=Math.max(0,m(it,ot.fxprime)/ee);x($,Gt,$,-1,ot.fxprime),_t=k,k=ot,ot=_t}if(_(k.fxprime)<=1e-5)break}return xt.history&&xt.history.push({x:k.x.slice(),fx:k.fx,fxprime:k.fxprime.slice(),alpha:yt}),k}function A(et,at){at=at||{},at.maxIterations=at.maxIterations||500;var xt=at.initialLayout||G,k=at.lossFunction||J;et=H(et);var ot=xt(et,at),it=[],$=[],_t;for(_t in ot)ot.hasOwnProperty(_t)&&(it.push(ot[_t].x),it.push(ot[_t].y),$.push(_t));for(var yt=y(function(ee){for(var Gt={},Ht=0;Ht<$.length;++Ht){var ae=$[Ht];Gt[ae]={x:ee[2*Ht],y:ee[2*Ht+1],radius:ot[ae].radius}}return k(Gt,et)},it,at),Nt=yt.x,$t=0;$t<$.length;++$t)_t=$[$t],ot[_t].x=Nt[2*$t],ot[_t].y=Nt[2*$t+1];return ot}var O=1e-10;function L(et,at,xt){return Math.min(et,at)*Math.min(et,at)*Math.PI<=xt+O?Math.abs(et-at):v(function(k){return o(et,at,k)-xt},0,et+at)}function H(et){et=et.slice();var at=[],xt={},k,ot,it,$;for(k=0;k<et.length;++k){var _t=et[k];_t.sets.length==1?at.push(_t.sets[0]):_t.sets.length==2&&(it=_t.sets[0],$=_t.sets[1],xt[[it,$]]=!0,xt[[$,it]]=!0)}for(at.sort(function(yt,Nt){return yt>Nt}),k=0;k<at.length;++k)for(it=at[k],ot=k+1;ot<at.length;++ot)$=at[ot],[it,$]in xt||et.push({sets:[it,$],size:0});return et}function F(et,at,xt){var k=g(at.length,at.length),ot=g(at.length,at.length);return et.filter(function(it){return it.sets.length==2}).map(function(it){var $=xt[it.sets[0]],_t=xt[it.sets[1]],yt=Math.sqrt(at[$].size/Math.PI),Nt=Math.sqrt(at[_t].size/Math.PI),$t=L(yt,Nt,it.size);k[$][_t]=k[_t][$]=$t;var ee=0;it.size+1e-10>=Math.min(at[$].size,at[_t].size)?ee=1:it.size<=1e-10&&(ee=-1),ot[$][_t]=ot[_t][$]=ee}),{distances:k,constraints:ot}}function K(et,at,xt,k){var ot=0,it;for(it=0;it<at.length;++it)at[it]=0;for(it=0;it<xt.length;++it)for(var $=et[2*it],_t=et[2*it+1],yt=it+1;yt<xt.length;++yt){var Nt=et[2*yt],$t=et[2*yt+1],ee=xt[it][yt],Gt=k[it][yt],Ht=(Nt-$)*(Nt-$)+($t-_t)*($t-_t),ae=Math.sqrt(Ht),le=Ht-ee*ee;Gt>0&&ae<=ee||Gt<0&&ae>=ee||(ot+=2*le*le,at[2*it]+=4*le*($-Nt),at[2*it+1]+=4*le*(_t-$t),at[2*yt]+=4*le*(Nt-$),at[2*yt+1]+=4*le*($t-_t))}return ot}function G(et,at){var xt=Z(et,at),k=at.lossFunction||J;if(et.length>=8){var ot=U(et,at),it=k(ot,et),$=k(xt,et);it+1e-8<$&&(xt=ot)}return xt}function U(et,at){at=at||{};var xt=at.restarts||10,k=[],ot={},it;for(it=0;it<et.length;++it){var $=et[it];$.sets.length==1&&(ot[$.sets[0]]=k.length,k.push($))}var _t=F(et,k,ot),yt=_t.distances,Nt=_t.constraints,$t=_(yt.map(_))/yt.length;yt=yt.map(function(We){return We.map(function(Ye){return Ye/$t})});var ee=function(We,Ye){return K(We,Ye,yt,Nt)},Gt,Ht;for(it=0;it<xt;++it){var ae=b(yt.length*2).map(Math.random);Ht=P(ee,ae,at),(!Gt||Ht.fx<Gt.fx)&&(Gt=Ht)}var le=Gt.x,Be={};for(it=0;it<k.length;++it){var Ce=k[it];Be[Ce.sets[0]]={x:le[2*it]*$t,y:le[2*it+1]*$t,radius:Math.sqrt(Ce.size/Math.PI)}}if(at.history)for(it=0;it<at.history.length;++it)M(at.history[it].x,$t);return Be}function Z(et,at){for(var xt=at&&at.lossFunction?at.lossFunction:J,k={},ot={},it,$=0;$<et.length;++$){var _t=et[$];_t.sets.length==1&&(it=_t.sets[0],k[it]={x:1e10,y:1e10,rowid:k.length,size:_t.size,radius:Math.sqrt(_t.size/Math.PI)},ot[it]=[])}for(et=et.filter(function(ge){return ge.sets.length==2}),$=0;$<et.length;++$){var yt=et[$],Nt=yt.hasOwnProperty("weight")?yt.weight:1,$t=yt.sets[0],ee=yt.sets[1];yt.size+O>=Math.min(k[$t].size,k[ee].size)&&(Nt=0),ot[$t].push({set:ee,size:yt.size,weight:Nt}),ot[ee].push({set:$t,size:yt.size,weight:Nt})}var Gt=[];for(it in ot)if(ot.hasOwnProperty(it)){var Ht=0;for($=0;$<ot[it].length;++$)Ht+=ot[it][$].size*ot[it][$].weight;Gt.push({set:it,size:Ht})}function ae(ge,Wt){return Wt.size-ge.size}Gt.sort(ae);var le={};function Be(ge){return ge.set in le}function Ce(ge,Wt){k[Wt].x=ge.x,k[Wt].y=ge.y,le[Wt]=!0}for(Ce({x:0,y:0},Gt[0].set),$=1;$<Gt.length;++$){var We=Gt[$].set,Ye=ot[We].filter(Be);if(it=k[We],Ye.sort(ae),Ye.length===0)throw"ERROR: missing pairwise overlap information";for(var wn=[],er=0;er<Ye.length;++er){var Lr=k[Ye[er].set],on=L(it.radius,Lr.radius,Ye[er].size);wn.push({x:Lr.x+on,y:Lr.y}),wn.push({x:Lr.x-on,y:Lr.y}),wn.push({y:Lr.y+on,x:Lr.x}),wn.push({y:Lr.y-on,x:Lr.x});for(var en=er+1;en<Ye.length;++en)for(var An=k[Ye[en].set],Bn=L(it.radius,An.radius,Ye[en].size),gr=l({x:Lr.x,y:Lr.y,radius:on},{x:An.x,y:An.y,radius:Bn}),hi=0;hi<gr.length;++hi)wn.push(gr[hi])}var Ae=1e50,Me=wn[0];for(er=0;er<wn.length;++er){k[We].x=wn[er].x,k[We].y=wn[er].y;var Qt=xt(k,et);Qt<Ae&&(Ae=Qt,Me=wn[er])}Ce(Me,We)}return k}function J(et,at){var xt=0;function k($t){return $t.map(function(ee){return et[ee]})}for(var ot=0;ot<at.length;++ot){var it=at[ot],$;if(it.sets.length!=1){if(it.sets.length==2){var _t=et[it.sets[0]],yt=et[it.sets[1]];$=o(_t.radius,yt.radius,a(_t,yt))}else $=r(k(it.sets));var Nt=it.hasOwnProperty("weight")?it.weight:1;xt+=Nt*($-it.size)*($-it.size)}}return xt}function rt(et,at,xt){xt===null?et.sort(function(le,Be){return Be.radius-le.radius}):et.sort(xt);var k;if(et.length>0){var ot=et[0].x,it=et[0].y;for(k=0;k<et.length;++k)et[k].x-=ot,et[k].y-=it}if(et.length==2){var $=a(et[0],et[1]);$<Math.abs(et[1].radius-et[0].radius)&&(et[1].x=et[0].x+et[0].radius-et[1].radius-1e-10,et[1].y=et[0].y)}if(et.length>1){var _t=Math.atan2(et[1].x,et[1].y)-at,yt=Math.cos(_t),Nt=Math.sin(_t),$t,ee;for(k=0;k<et.length;++k)$t=et[k].x,ee=et[k].y,et[k].x=yt*$t-Nt*ee,et[k].y=Nt*$t+yt*ee}if(et.length>2){for(var Gt=Math.atan2(et[2].x,et[2].y)-at;Gt<0;)Gt+=2*Math.PI;for(;Gt>2*Math.PI;)Gt-=2*Math.PI;if(Gt>Math.PI){var Ht=et[1].y/(1e-10+et[1].x);for(k=0;k<et.length;++k){var ae=(et[k].x+Ht*et[k].y)/(1+Ht*Ht);et[k].x=2*ae-et[k].x,et[k].y=2*ae*Ht-et[k].y}}}}function vt(et){et.map(function(Nt){Nt.parent=Nt});function at(Nt){return Nt.parent!==Nt&&(Nt.parent=at(Nt.parent)),Nt.parent}function xt(Nt,$t){var ee=at(Nt),Gt=at($t);ee.parent=Gt}for(var k=0;k<et.length;++k)for(var ot=k+1;ot<et.length;++ot){var it=et[k].radius+et[ot].radius;a(et[k],et[ot])+1e-10<it&&xt(et[ot],et[k])}var $={},_t;for(k=0;k<et.length;++k)_t=at(et[k]).parent.setid,_t in $||($[_t]=[]),$[_t].push(et[k]);et.map(function(Nt){delete Nt.parent});var yt=[];for(_t in $)$.hasOwnProperty(_t)&&yt.push($[_t]);return yt}function mt(et){var at=function(xt){var k=Math.max.apply(null,et.map(function(it){return it[xt]+it.radius})),ot=Math.min.apply(null,et.map(function(it){return it[xt]-it.radius}));return{max:k,min:ot}};return{xRange:at("x"),yRange:at("y")}}function ut(et,at,xt){at===null&&(at=Math.PI/2);var k=[],ot,it;for(it in et)if(et.hasOwnProperty(it)){var $=et[it];k.push({x:$.x,y:$.y,radius:$.radius,setid:it})}var _t=vt(k);for(ot=0;ot<_t.length;++ot){rt(_t[ot],at,xt);var yt=mt(_t[ot]);_t[ot].size=(yt.xRange.max-yt.xRange.min)*(yt.yRange.max-yt.yRange.min),_t[ot].bounds=yt}_t.sort(function(ae,le){return le.size-ae.size}),k=_t[0];var Nt=k.bounds,$t=(Nt.xRange.max-Nt.xRange.min)/50;function ee(ae,le,Be){if(!!ae){var Ce=ae.bounds,We,Ye,wn;le?We=Nt.xRange.max-Ce.xRange.min+$t:(We=Nt.xRange.max-Ce.xRange.max,wn=(Ce.xRange.max-Ce.xRange.min)/2-(Nt.xRange.max-Nt.xRange.min)/2,wn<0&&(We+=wn)),Be?Ye=Nt.yRange.max-Ce.yRange.min+$t:(Ye=Nt.yRange.max-Ce.yRange.max,wn=(Ce.yRange.max-Ce.yRange.min)/2-(Nt.yRange.max-Nt.yRange.min)/2,wn<0&&(Ye+=wn));for(var er=0;er<ae.length;++er)ae[er].x+=We,ae[er].y+=Ye,k.push(ae[er])}}for(var Gt=1;Gt<_t.length;)ee(_t[Gt],!0,!1),ee(_t[Gt+1],!1,!0),ee(_t[Gt+2],!0,!0),Gt+=3,Nt=mt(k);var Ht={};for(ot=0;ot<k.length;++ot)Ht[k[ot].setid]=k[ot];return Ht}function Rt(et,at,xt,k){var ot=[],it=[];for(var $ in et)et.hasOwnProperty($)&&(it.push($),ot.push(et[$]));at-=2*k,xt-=2*k;var _t=mt(ot),yt=_t.xRange,Nt=_t.yRange;if(yt.max==yt.min||Nt.max==Nt.min)return console.log("not scaling solution: zero size detected"),et;for(var $t=at/(yt.max-yt.min),ee=xt/(Nt.max-Nt.min),Gt=Math.min(ee,$t),Ht=(at-(yt.max-yt.min)*Gt)/2,ae=(xt-(Nt.max-Nt.min)*Gt)/2,le={},Be=0;Be<ot.length;++Be){var Ce=ot[Be];le[it[Be]]={radius:Gt*Ce.radius,x:k+Ht+(Ce.x-yt.min)*Gt,y:k+ae+(Ce.y-Nt.min)*Gt}}return le}function Ft(){var et=600,at=350,xt=15,k=1e3,ot=Math.PI/2,it=!0,$=!0,_t=!0,yt=null,Nt=null,$t={},ee=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Gt=0,Ht=function(Ce){if(Ce in $t)return $t[Ce];var We=$t[Ce]=ee[Gt];return Gt+=1,Gt>=ee.length&&(Gt=0),We},ae=A,le=J;function Be(Ce){var We=Ce.datum(),Ye={};We.forEach(function(be){be.size==0&&be.sets.length==1&&(Ye[be.sets[0]]=1)}),We=We.filter(function(be){return!be.sets.some(function(Xe){return Xe in Ye})});var wn={},er={};if(We.length>0){var Lr=ae(We,{lossFunction:le});it&&(Lr=ut(Lr,ot,Nt)),wn=Rt(Lr,et,at,xt),er=nt(wn,We)}var on={};We.forEach(function(be){be.label&&(on[be.sets]=be.label)});function en(be){if(be.sets in on)return on[be.sets];if(be.sets.length==1)return""+be.sets[0]}Ce.selectAll("svg").data([wn]).enter().append("svg");var An=Ce.select("svg").attr("width",et).attr("height",at),Bn={},gr=!1;An.selectAll(".venn-area path").each(function(be){var Xe=u.select(this).attr("d");be.sets.length==1&&Xe&&(gr=!0,Bn[be.sets[0]]=q(Xe))});var hi=function(be){return function(Xe){var Rn=be.sets.map(function(tr){var Mn=Bn[tr],vn=wn[tr];return Mn||(Mn={x:et/2,y:at/2,radius:1}),vn||(vn={x:et/2,y:at/2,radius:1}),{x:Mn.x*(1-Xe)+vn.x*Xe,y:Mn.y*(1-Xe)+vn.y*Xe,radius:Mn.radius*(1-Xe)+vn.radius*Xe}});return gt(Rn)}},Ae=An.selectAll(".venn-area").data(We,function(be){return be.sets}),Me=Ae.enter().append("g").attr("class",function(be){return"venn-area venn-"+(be.sets.length==1?"circle":"intersection")}).attr("data-venn-sets",function(be){return be.sets.join("_")}),Qt=Me.append("path"),ge=Me.append("text").attr("class","label").text(function(be){return en(be)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",et/2).attr("y",at/2);_t&&(Qt.style("fill-opacity","0").filter(function(be){return be.sets.length==1}).style("fill",function(be){return Ht(be.sets)}).style("fill-opacity",".25"),ge.style("fill",function(be){return be.sets.length==1?Ht(be.sets):"#444"}));var Wt=Ce;gr?(Wt=Ce.transition("venn").duration(k),Wt.selectAll("path").attrTween("d",hi)):Wt.selectAll("path").attr("d",function(be){return gt(be.sets.map(function(Xe){return wn[Xe]}))});var re=Wt.selectAll("text").filter(function(be){return be.sets in er}).text(function(be){return en(be)}).attr("x",function(be){return Math.floor(er[be.sets].x)}).attr("y",function(be){return Math.floor(er[be.sets].y)});$&&(gr?"on"in re?re.on("end",wt(wn,en)):re.each("end",wt(wn,en)):re.each(wt(wn,en)));var Te=Ae.exit().transition("venn").duration(k).remove();Te.selectAll("path").attrTween("d",hi);var ue=Te.selectAll("text").attr("x",et/2).attr("y",at/2);return yt!==null&&(ge.style("font-size","0px"),re.style("font-size",yt),ue.style("font-size","0px")),{circles:wn,textCentres:er,nodes:Ae,enter:Me,update:Wt,exit:Te}}return Be.wrap=function(Ce){return arguments.length?($=Ce,Be):$},Be.width=function(Ce){return arguments.length?(et=Ce,Be):et},Be.height=function(Ce){return arguments.length?(at=Ce,Be):at},Be.padding=function(Ce){return arguments.length?(xt=Ce,Be):xt},Be.colours=function(Ce){return arguments.length?(Ht=Ce,Be):Ht},Be.fontSize=function(Ce){return arguments.length?(yt=Ce,Be):yt},Be.duration=function(Ce){return arguments.length?(k=Ce,Be):k},Be.layoutFunction=function(Ce){return arguments.length?(ae=Ce,Be):ae},Be.normalize=function(Ce){return arguments.length?(it=Ce,Be):it},Be.styled=function(Ce){return arguments.length?(_t=Ce,Be):_t},Be.orientation=function(Ce){return arguments.length?(ot=Ce,Be):ot},Be.orientationOrder=function(Ce){return arguments.length?(Nt=Ce,Be):Nt},Be.lossFunction=function(Ce){return arguments.length?(le=Ce,Be):le},Be}function wt(et,at){return function(){for(var xt=u.select(this),k=xt.datum(),ot=et[k.sets[0]].radius||50,it=at(k)||"",$=it.split(/\s+/).reverse(),_t=3,yt=(it.length+$.length)/_t,Nt=$.pop(),$t=[Nt],ee,Gt=0,Ht=1.1,ae=xt.text(null).append("tspan").text(Nt);Nt=$.pop(),!!Nt;)$t.push(Nt),ee=$t.join(" "),ae.text(ee),ee.length>yt&&ae.node().getComputedTextLength()>ot&&($t.pop(),ae.text($t.join(" ")),$t=[Nt],ae=xt.append("tspan").text(Nt),Gt++);var le=.35-Gt*Ht/2,Be=xt.attr("x"),Ce=xt.attr("y");xt.selectAll("tspan").attr("x",Be).attr("y",Ce).attr("dy",function(We,Ye){return le+Ye*Ht+"em"})}}function Mt(et,at,xt){var k=at[0].radius-a(at[0],et),ot,it;for(ot=1;ot<at.length;++ot)it=at[ot].radius-a(at[ot],et),it<=k&&(k=it);for(ot=0;ot<xt.length;++ot)it=a(xt[ot],et)-xt[ot].radius,it<=k&&(k=it);return k}function St(et,at){var xt=[],k;for(k=0;k<et.length;++k){var ot=et[k];xt.push({x:ot.x,y:ot.y}),xt.push({x:ot.x+ot.radius/2,y:ot.y}),xt.push({x:ot.x-ot.radius/2,y:ot.y}),xt.push({x:ot.x,y:ot.y+ot.radius/2}),xt.push({x:ot.x,y:ot.y-ot.radius/2})}var it=xt[0],$=Mt(xt[0],et,at);for(k=1;k<xt.length;++k){var _t=Mt(xt[k],et,at);_t>=$&&(it=xt[k],$=_t)}var yt=y(function(Gt){return-1*Mt({x:Gt[0],y:Gt[1]},et,at)},[it.x,it.y],{maxIterations:500,minErrorDelta:1e-10}).x,Nt={x:yt[0],y:yt[1]},$t=!0;for(k=0;k<et.length;++k)if(a(Nt,et[k])>et[k].radius){$t=!1;break}for(k=0;k<at.length;++k)if(a(Nt,at[k])<at[k].radius){$t=!1;break}if(!$t)if(et.length==1)Nt={x:et[0].x,y:et[0].y};else{var ee={};r(et,ee),ee.arcs.length===0?Nt={x:0,y:-1e3,disjoint:!0}:ee.arcs.length==1?Nt={x:ee.arcs[0].circle.x,y:ee.arcs[0].circle.y}:at.length?Nt=St(et,[]):Nt=f(ee.arcs.map(function(Gt){return Gt.p1}))}return Nt}function At(et){var at={},xt=[];for(var k in et)xt.push(k),at[k]=[];for(var ot=0;ot<xt.length;ot++)for(var it=et[xt[ot]],$=ot+1;$<xt.length;++$){var _t=et[xt[$]],yt=a(it,_t);yt+_t.radius<=it.radius+1e-10?at[xt[$]].push(xt[ot]):yt+it.radius<=_t.radius+1e-10&&at[xt[ot]].push(xt[$])}return at}function nt(et,at){for(var xt={},k=At(et),ot=0;ot<at.length;++ot){for(var it=at[ot].sets,$={},_t={},yt=0;yt<it.length;++yt){$[it[yt]]=!0;for(var Nt=k[it[yt]],$t=0;$t<Nt.length;++$t)_t[Nt[$t]]=!0}var ee=[],Gt=[];for(var Ht in et)Ht in $?ee.push(et[Ht]):Ht in _t||Gt.push(et[Ht]);var ae=St(ee,Gt);xt[it]=ae,ae.disjoint&&at[ot].size>0&&console.log("WARNING: area "+it+" not represented on screen")}return xt}function Pt(et,at){for(var xt=At(et.selectAll("svg").datum()),k={},ot=0;ot<at.sets.length;++ot){var it=at.sets[ot];for(var $ in xt)for(var _t=xt[$],yt=0;yt<_t.length;++yt)if(_t[yt]==it){k[$]=!0;break}}function Nt($t){for(var ee=0;ee<$t.length;++ee)if(!($t[ee]in k))return!1;return!0}et.selectAll("g").sort(function($t,ee){return $t.sets.length!=ee.sets.length?$t.sets.length-ee.sets.length:$t==at?Nt(ee.sets)?-1:1:ee==at?Nt($t.sets)?1:-1:ee.size-$t.size})}function z(et,at,xt){var k=[];return k.push(`
M`,et,at),k.push(`
m`,-xt,0),k.push(`
a`,xt,xt,0,1,0,xt*2,0),k.push(`
a`,xt,xt,0,1,0,-xt*2,0),k.join(" ")}function q(et){var at=et.split(" ");return{x:parseFloat(at[1]),y:parseFloat(at[2]),radius:-parseFloat(at[4])}}function gt(et){var at={};r(et,at);var xt=at.arcs;if(xt.length===0)return"M 0 0";if(xt.length==1){var k=xt[0].circle;return z(k.x,k.y,k.radius)}else{for(var ot=[`
M`,xt[0].p2.x,xt[0].p2.y],it=0;it<xt.length;++it){var $=xt[it],_t=$.circle.radius,yt=$.width>_t;ot.push(`
A`,_t,_t,0,yt?1:0,1,$.p1.x,$.p1.y)}return ot.join(" ")}}t.intersectionArea=r,t.circleCircleIntersection=l,t.circleOverlap=o,t.circleArea=i,t.distance=a,t.venn=A,t.greedyLayout=Z,t.scaleSolution=Rt,t.normalizeSolution=ut,t.bestInitialLayout=G,t.lossFunction=J,t.disjointCluster=vt,t.distanceFromIntersectArea=L,t.VennDiagram=Ft,t.wrapText=wt,t.computeTextCentres=nt,t.computeTextCentre=St,t.sortAreas=Pt,t.circlePath=z,t.circleFromPath=q,t.intersectionAreaPath=gt,Object.defineProperty(t,"__esModule",{value:!0})})},function(E,T,e){"use strict";var t=function(){};t=function(u,s,c){var r=arguments.length;c=new Array(r>2?r-2:0);for(var h=2;h<r;h++)c[h-2]=arguments[h];if(s===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(s.length<10||/^[s\W]*$/.test(s))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+s);if(!u){var n=0,i="Warning: "+s.replace(/%s/g,function(){return c[n++]});typeof console!="undefined"&&console.error(i);try{throw new Error(i)}catch(a){}}},E.exports=t},function(E,T,e){e(64),E.exports=e(64)}])})},yU0y:function(_e,dt,R){"use strict";R.d(dt,"b",function(){return V}),R.d(dt,"a",function(){return E}),R.d(dt,"c",function(){return T});var V=1e-6,E=typeof Float32Array!="undefined"?Float32Array:Array,T=Math.random;function e(c){E=c}var t=Math.PI/180;function u(c){return c*t}function s(c,r){return Math.abs(c-r)<=V*Math.max(1,Math.abs(c),Math.abs(r))}Math.hypot||(Math.hypot=function(){for(var c=0,r=arguments.length;r--;)c+=arguments[r]*arguments[r];return Math.sqrt(c)})},yXPU:function(_e,dt){function R(E,T,e,t,u,s,c){try{var r=E[s](c),h=r.value}catch(n){e(n);return}r.done?T(h):Promise.resolve(h).then(t,u)}function V(E){return function(){var T=this,e=arguments;return new Promise(function(t,u){var s=E.apply(T,e);function c(h){R(s,t,u,c,r,"next",h)}function r(h){R(s,t,u,c,r,"throw",h)}c(void 0)})}}_e.exports=V,_e.exports.default=_e.exports,_e.exports.__esModule=!0},ycre:function(_e,dt,R){var V=R("711d"),E=V("length");_e.exports=E},z4Hk:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.BindingWhenSyntax=void 0;var V=R("406g"),E=R("RR/i"),T=function(){function e(t){this._binding=t}return e.prototype.when=function(t){return this._binding.constraint=t,new V.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(t){return this._binding.constraint=E.namedConstraint(t),new V.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){var u=t.target!==null&&!t.target.isNamed()&&!t.target.isTagged();return u},new V.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(t,u){return this._binding.constraint=E.taggedConstraint(t)(u),new V.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(u){return E.typeConstraint(t)(u.parentRequest)},new V.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(t){return this._binding.constraint=function(u){return E.namedConstraint(t)(u.parentRequest)},new V.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(t,u){return this._binding.constraint=function(s){return E.taggedConstraint(t)(u)(s.parentRequest)},new V.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(u){return E.traverseAncerstors(u,E.typeConstraint(t))},new V.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(u){return!E.traverseAncerstors(u,E.typeConstraint(t))},new V.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(u){return E.traverseAncerstors(u,E.namedConstraint(t))},new V.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(u){return!E.traverseAncerstors(u,E.namedConstraint(t))},new V.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(t,u){return this._binding.constraint=function(s){return E.traverseAncerstors(s,E.taggedConstraint(t)(u))},new V.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(t,u){return this._binding.constraint=function(s){return!E.traverseAncerstors(s,E.taggedConstraint(t)(u))},new V.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(u){return E.traverseAncerstors(u,t)},new V.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(u){return!E.traverseAncerstors(u,t)},new V.BindingOnSyntax(this._binding)},e}();dt.BindingWhenSyntax=T},zEVN:function(_e,dt,R){var V=R("Gi0A"),E=R("sEf8"),T=R("mdPL"),e=T&&T.isMap,t=e?E(e):V;_e.exports=t},zZ0H:function(_e,dt){function R(V){return V}_e.exports=R},zZPE:function(_e,dt){var R="[object Object]";function V(i){var a=!1;if(i!=null&&typeof i.toString!="function")try{a=!!(i+"")}catch(o){}return a}function E(i,a){return function(o){return i(a(o))}}var T=Function.prototype,e=Object.prototype,t=T.toString,u=e.hasOwnProperty,s=t.call(Object),c=e.toString,r=E(Object.getPrototypeOf,Object);function h(i){return!!i&&typeof i=="object"}function n(i){if(!h(i)||c.call(i)!=R||V(i))return!1;var a=r(i);if(a===null)return!0;var o=u.call(a,"constructor")&&a.constructor;return typeof o=="function"&&o instanceof o&&t.call(o)==s}_e.exports=n},zoYe:function(_e,dt,R){var V=R("nmnc"),E=R("eUgh"),T=R("Z0cm"),e=R("/9aa"),t=1/0,u=V?V.prototype:void 0,s=u?u.toString:void 0;function c(r){if(typeof r=="string")return r;if(T(r))return E(r,c)+"";if(e(r))return s?s.call(r):"";var h=r+"";return h=="0"&&1/r==-t?"-0":h}_e.exports=c},zvhG:function(_e,dt){_e.exports=R;function R(V,E,T,e){this.cx=3*V,this.bx=3*(T-V)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*E,this.by=3*(e-E)-this.cy,this.ay=1-this.cy-this.by,this.p1x=V,this.p1y=e,this.p2x=T,this.p2y=e}R.prototype.sampleCurveX=function(V){return((this.ax*V+this.bx)*V+this.cx)*V},R.prototype.sampleCurveY=function(V){return((this.ay*V+this.by)*V+this.cy)*V},R.prototype.sampleCurveDerivativeX=function(V){return(3*this.ax*V+2*this.bx)*V+this.cx},R.prototype.solveCurveX=function(V,E){typeof E=="undefined"&&(E=1e-6);var T,e,t,u,s;for(t=V,s=0;s<8;s++){if(u=this.sampleCurveX(t)-V,Math.abs(u)<E)return t;var c=this.sampleCurveDerivativeX(t);if(Math.abs(c)<1e-6)break;t=t-u/c}if(T=0,e=1,t=V,t<T)return T;if(t>e)return e;for(;T<e;){if(u=this.sampleCurveX(t),Math.abs(u-V)<E)return t;V>u?T=t:e=t,t=(e-T)*.5+T}return t},R.prototype.solve=function(V,E){return this.sampleCurveY(this.solveCurveX(V,E))}},zxMA:function(_e,dt,R){"use strict";Object.defineProperty(dt,"__esModule",{value:!0}),dt.QueryableString=void 0;var V=function(){function E(T){this.str=T}return E.prototype.startsWith=function(T){return this.str.indexOf(T)===0},E.prototype.endsWith=function(T){var e="",t=T.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},t)},E.prototype.contains=function(T){return this.str.indexOf(T)!==-1},E.prototype.equals=function(T){return this.str===T},E.prototype.value=function(){return this.str},E}();dt.QueryableString=V}}]);
